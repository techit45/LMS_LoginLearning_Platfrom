# üõ†Ô∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Storage ‡∏ú‡πà‡∏≤‡∏ô Supabase Dashboard

## ‚ùå ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ERROR: 42501: must be owner of table objects

SQL Editor ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ `storage.objects` ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Dashboard ‡πÅ‡∏ó‡∏ô

---

## ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡πà‡∏≤‡∏ô Dashboard

### üóÑÔ∏è ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Storage Bucket

1. **‡πÑ‡∏õ‡∏ó‡∏µ‡πà Supabase Dashboard** ‚Üí **Storage**
2. **‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà bucket "course-files"** (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) ‡∏´‡∏£‡∏∑‡∏≠ **‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà**
3. **‡∏Ñ‡∏•‡∏¥‡∏Å Settings (‡πÄ‡∏ü‡∏∑‡∏≠‡∏á)** ‡∏ï‡∏£‡∏á‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô
4. **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:**
   ```
   ‚úÖ Public bucket: ON
   üìè File size limit: 52428800 (50MB)
   üìÑ Allowed MIME types: (‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤ - ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó)
   ```
5. **‡∏Ñ‡∏•‡∏¥‡∏Å "Update bucket"**

### üîê ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Storage Policies

1. **‡πÑ‡∏õ‡∏ó‡∏µ‡πà Storage** ‚Üí **Policies** (‡πÅ‡∏ó‡πá‡∏ö‡∏ñ‡∏±‡∏î‡∏à‡∏≤‡∏Å Buckets)
2. **‡∏•‡∏ö policies ‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î** ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö `course-files`
3. **‡∏™‡∏£‡πâ‡∏≤‡∏á policies ‡πÉ‡∏´‡∏°‡πà** ‡πÇ‡∏î‡∏¢‡∏Ñ‡∏•‡∏¥‡∏Å **"New policy"**

#### Policy 1: ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏î‡∏π‡πÑ‡∏ü‡∏•‡πå
```
Policy name: Anyone can view course files
Allowed operation: SELECT
Target roles: public
USING expression: bucket_id = 'course-files'
```

#### Policy 2: ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ user ‡∏ó‡∏µ‡πà login ‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î
```
Policy name: Authenticated users can upload
Allowed operation: INSERT  
Target roles: authenticated
WITH CHECK expression: bucket_id = 'course-files'
```

#### Policy 3: ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ user ‡∏ó‡∏µ‡πà login ‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï
```
Policy name: Authenticated users can update
Allowed operation: UPDATE
Target roles: authenticated  
USING expression: bucket_id = 'course-files'
```

#### Policy 4: ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ user ‡∏ó‡∏µ‡πà login ‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏ö
```
Policy name: Authenticated users can delete
Allowed operation: DELETE
Target roles: authenticated
USING expression: bucket_id = 'course-files'
```

### üß™ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î

1. **‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö** (‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤ F5)
2. **‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤** ‚Üí ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ ‚Üí ‡πÅ‡∏ó‡πá‡∏ö "‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö"
3. **‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö"** - ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
4. **‡∏•‡∏≠‡∏á‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏î‡∏™‡∏≠‡∏ö**

---

## üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢ (‡∏´‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô‡∏¢‡∏∏‡πà‡∏á‡∏¢‡∏≤‡∏Å)

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ Policy Templates
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Storage** ‚Üí **Policies**
2. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Use template"** 
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **"Allow public read access"**
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **"Allow authenticated uploads"**

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏£‡∏±‡∏ô SQL ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏ó‡∏≥‡πÑ‡∏î‡πâ)
‡∏£‡∏±‡∏ô‡πÅ‡∏Ñ‡πà SQL ‡∏ô‡∏µ‡πâ‡πÉ‡∏ô SQL Editor:
```sql
-- ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï bucket ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô public
UPDATE storage.buckets 
SET public = true, file_size_limit = 52428800
WHERE name = 'course-files';

-- ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ
INSERT INTO storage.buckets (id, name, public, file_size_limit)
VALUES ('course-files', 'course-files', true, 52428800)
ON CONFLICT (id) DO UPDATE SET public = true;
```

---

## üìã Checklist ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤

- [ ] **Bucket "course-files" ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà**
- [ ] **Public bucket = ON**
- [ ] **File size limit = 50MB+**
- [ ] **‡∏°‡∏µ Policy ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö SELECT (‡∏î‡∏π‡πÑ‡∏ü‡∏•‡πå)**
- [ ] **‡∏°‡∏µ Policy ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö INSERT (‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î)**
- [ ] **‡∏ó‡∏î‡∏™‡∏≠‡∏ö "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö" ‡∏ú‡πà‡∏≤‡∏ô**
- [ ] **‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à**

---

## üÜò ‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢: ‡∏™‡∏£‡πâ‡∏≤‡∏á Bucket ‡πÉ‡∏´‡∏°‡πà
1. **‡∏•‡∏ö bucket "course-files" ‡πÄ‡∏Å‡πà‡∏≤**
2. **‡∏™‡∏£‡πâ‡∏≤‡∏á bucket ‡πÉ‡∏´‡∏°‡πà:**
   - ‡∏ä‡∏∑‡πà‡∏≠: `course-files`
   - ‚úÖ Public: ON
   - ‡∏Ç‡∏ô‡∏≤‡∏î: 50MB
3. **‡πÉ‡∏ä‡πâ Policy Templates**
4. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á**

---

*‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö!* üéØ