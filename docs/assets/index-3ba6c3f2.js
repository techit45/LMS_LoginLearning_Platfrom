var jh=Object.defineProperty;var Nh=(s,e,r)=>e in s?jh(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var ct=(s,e,r)=>(Nh(s,typeof e!="symbol"?e+"":e,r),r);import{r as p,a as Qi,g as Zr,b as te,c as _h,R as kh,d as Sh,e as Xe}from"./vendor-48cd178f.js";import{L as Y,u as sr,a as at,b as en,O as Ch,N as ri,H as Th,R as Eh,c as he}from"./router-c8d7685c.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Jl={exports:{}},tn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ph=p,Ah=Symbol.for("react.element"),Dh=Symbol.for("react.fragment"),Ih=Object.prototype.hasOwnProperty,Oh=Ph.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lh={key:!0,ref:!0,__self:!0,__source:!0};function Yl(s,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Ih.call(e,n)&&!Lh.hasOwnProperty(n)&&(i[n]=e[n]);if(s&&s.defaultProps)for(n in e=s.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Ah,type:s,key:a,ref:o,props:i,_owner:Oh.current}}tn.Fragment=Dh;tn.jsx=Yl;tn.jsxs=Yl;Jl.exports=tn;var t=Jl.exports,ni={},Ga=Qi;ni.createRoot=Ga.createRoot,ni.hydrateRoot=Ga.hydrateRoot;var Rh=typeof Element<"u",Mh=typeof Map=="function",$h=typeof Set=="function",Fh=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Pr(s,e){if(s===e)return!0;if(s&&e&&typeof s=="object"&&typeof e=="object"){if(s.constructor!==e.constructor)return!1;var r,n,i;if(Array.isArray(s)){if(r=s.length,r!=e.length)return!1;for(n=r;n--!==0;)if(!Pr(s[n],e[n]))return!1;return!0}var a;if(Mh&&s instanceof Map&&e instanceof Map){if(s.size!==e.size)return!1;for(a=s.entries();!(n=a.next()).done;)if(!e.has(n.value[0]))return!1;for(a=s.entries();!(n=a.next()).done;)if(!Pr(n.value[1],e.get(n.value[0])))return!1;return!0}if($h&&s instanceof Set&&e instanceof Set){if(s.size!==e.size)return!1;for(a=s.entries();!(n=a.next()).done;)if(!e.has(n.value[0]))return!1;return!0}if(Fh&&ArrayBuffer.isView(s)&&ArrayBuffer.isView(e)){if(r=s.length,r!=e.length)return!1;for(n=r;n--!==0;)if(s[n]!==e[n])return!1;return!0}if(s.constructor===RegExp)return s.source===e.source&&s.flags===e.flags;if(s.valueOf!==Object.prototype.valueOf&&typeof s.valueOf=="function"&&typeof e.valueOf=="function")return s.valueOf()===e.valueOf();if(s.toString!==Object.prototype.toString&&typeof s.toString=="function"&&typeof e.toString=="function")return s.toString()===e.toString();if(i=Object.keys(s),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[n]))return!1;if(Rh&&s instanceof Element)return!1;for(n=r;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&s.$$typeof)&&!Pr(s[i[n]],e[i[n]]))return!1;return!0}return s!==s&&e!==e}var Uh=function(e,r){try{return Pr(e,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Vh=Zr(Uh);var zh=function(s,e,r,n,i,a,o,l){if(!s){var d;if(e===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,i,a,o,l],u=0;d=new Error(e.replace(/%s/g,function(){return c[u++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}},qh=zh;const Ha=Zr(qh);var Bh=function(e,r,n,i){var a=n?n.call(i,e,r):void 0;if(a!==void 0)return!!a;if(e===r)return!0;if(typeof e!="object"||!e||typeof r!="object"||!r)return!1;var o=Object.keys(e),l=Object.keys(r);if(o.length!==l.length)return!1;for(var d=Object.prototype.hasOwnProperty.bind(r),c=0;c<o.length;c++){var u=o[c];if(!d(u))return!1;var h=e[u],m=r[u];if(a=n?n.call(i,h,m,u):void 0,a===!1||a===void 0&&h!==m)return!1}return!0};const Gh=Zr(Bh);var Ql=(s=>(s.BASE="base",s.BODY="body",s.HEAD="head",s.HTML="html",s.LINK="link",s.META="meta",s.NOSCRIPT="noscript",s.SCRIPT="script",s.STYLE="style",s.TITLE="title",s.FRAGMENT="Symbol(react.fragment)",s))(Ql||{}),Sn={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Wa=Object.values(Ql),Zi={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Hh=Object.entries(Zi).reduce((s,[e,r])=>(s[r]=e,s),{}),et="data-rh",hs={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},ms=(s,e)=>{for(let r=s.length-1;r>=0;r-=1){const n=s[r];if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}return null},Wh=s=>{let e=ms(s,"title");const r=ms(s,hs.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),r&&e)return r.replace(/%s/g,()=>e);const n=ms(s,hs.DEFAULT_TITLE);return e||n||void 0},Kh=s=>ms(s,hs.ON_CHANGE_CLIENT_STATE)||(()=>{}),Cn=(s,e)=>e.filter(r=>typeof r[s]<"u").map(r=>r[s]).reduce((r,n)=>({...r,...n}),{}),Xh=(s,e)=>e.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,n)=>{if(!r.length){const i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a].toLowerCase();if(s.indexOf(l)!==-1&&n[l])return r.concat(n)}}return r},[]),Jh=s=>console&&typeof console.warn=="function"&&console.warn(s),Cs=(s,e,r)=>{const n={};return r.filter(i=>Array.isArray(i[s])?!0:(typeof i[s]<"u"&&Jh(`Helmet: ${s} should be of type "Array". Instead found type "${typeof i[s]}"`),!1)).map(i=>i[s]).reverse().reduce((i,a)=>{const o={};a.filter(d=>{let c;const u=Object.keys(d);for(let m=0;m<u.length;m+=1){const f=u[m],y=f.toLowerCase();e.indexOf(y)!==-1&&!(c==="rel"&&d[c].toLowerCase()==="canonical")&&!(y==="rel"&&d[y].toLowerCase()==="stylesheet")&&(c=y),e.indexOf(f)!==-1&&(f==="innerHTML"||f==="cssText"||f==="itemprop")&&(c=f)}if(!c||!d[c])return!1;const h=d[c].toLowerCase();return n[c]||(n[c]={}),o[c]||(o[c]={}),n[c][h]?!1:(o[c][h]=!0,!0)}).reverse().forEach(d=>i.push(d));const l=Object.keys(o);for(let d=0;d<l.length;d+=1){const c=l[d],u={...n[c],...o[c]};n[c]=u}return i},[]).reverse()},Yh=(s,e)=>{if(Array.isArray(s)&&s.length){for(let r=0;r<s.length;r+=1)if(s[r][e])return!0}return!1},Qh=s=>({baseTag:Xh(["href"],s),bodyAttributes:Cn("bodyAttributes",s),defer:ms(s,hs.DEFER),encode:ms(s,hs.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Cn("htmlAttributes",s),linkTags:Cs("link",["rel","href"],s),metaTags:Cs("meta",["name","charset","http-equiv","property","itemprop"],s),noscriptTags:Cs("noscript",["innerHTML"],s),onChangeClientState:Kh(s),scriptTags:Cs("script",["src","innerHTML"],s),styleTags:Cs("style",["cssText"],s),title:Wh(s),titleAttributes:Cn("titleAttributes",s),prioritizeSeoTags:Yh(s,hs.PRIORITIZE_SEO_TAGS)}),Zl=s=>Array.isArray(s)?s.join(""):s,Zh=(s,e)=>{const r=Object.keys(s);for(let n=0;n<r.length;n+=1)if(e[r[n]]&&e[r[n]].includes(s[r[n]]))return!0;return!1},Tn=(s,e)=>Array.isArray(s)?s.reduce((r,n)=>(Zh(n,e)?r.priority.push(n):r.default.push(n),r),{priority:[],default:[]}):{default:s,priority:[]},Ka=(s,e)=>({...s,[e]:void 0}),em=["noscript","script","style"],ii=(s,e=!0)=>e===!1?String(s):String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),ec=s=>Object.keys(s).reduce((e,r)=>{const n=typeof s[r]<"u"?`${r}="${s[r]}"`:`${r}`;return e?`${e} ${n}`:n},""),tm=(s,e,r,n)=>{const i=ec(r),a=Zl(e);return i?`<${s} ${et}="true" ${i}>${ii(a,n)}</${s}>`:`<${s} ${et}="true">${ii(a,n)}</${s}>`},sm=(s,e,r=!0)=>e.reduce((n,i)=>{const a=i,o=Object.keys(a).filter(c=>!(c==="innerHTML"||c==="cssText")).reduce((c,u)=>{const h=typeof a[u]>"u"?u:`${u}="${ii(a[u],r)}"`;return c?`${c} ${h}`:h},""),l=a.innerHTML||a.cssText||"",d=em.indexOf(s)===-1;return`${n}<${s} ${et}="true" ${o}${d?"/>":`>${l}</${s}>`}`},""),tc=(s,e={})=>Object.keys(s).reduce((r,n)=>{const i=Zi[n];return r[i||n]=s[n],r},e),rm=(s,e,r)=>{const n={key:e,[et]:!0},i=tc(r,n);return[te.createElement("title",i,e)]},Ar=(s,e)=>e.map((r,n)=>{const i={key:n,[et]:!0};return Object.keys(r).forEach(a=>{const l=Zi[a]||a;if(l==="innerHTML"||l==="cssText"){const d=r.innerHTML||r.cssText;i.dangerouslySetInnerHTML={__html:d}}else i[l]=r[a]}),te.createElement(s,i)}),He=(s,e,r=!0)=>{switch(s){case"title":return{toComponent:()=>rm(s,e.title,e.titleAttributes),toString:()=>tm(s,e.title,e.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>tc(e),toString:()=>ec(e)};default:return{toComponent:()=>Ar(s,e),toString:()=>sm(s,e,r)}}},nm=({metaTags:s,linkTags:e,scriptTags:r,encode:n})=>{const i=Tn(s,Sn.meta),a=Tn(e,Sn.link),o=Tn(r,Sn.script);return{priorityMethods:{toComponent:()=>[...Ar("meta",i.priority),...Ar("link",a.priority),...Ar("script",o.priority)],toString:()=>`${He("meta",i.priority,n)} ${He("link",a.priority,n)} ${He("script",o.priority,n)}`},metaTags:i.default,linkTags:a.default,scriptTags:o.default}},im=s=>{const{baseTag:e,bodyAttributes:r,encode:n=!0,htmlAttributes:i,noscriptTags:a,styleTags:o,title:l="",titleAttributes:d,prioritizeSeoTags:c}=s;let{linkTags:u,metaTags:h,scriptTags:m}=s,f={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:f,linkTags:u,metaTags:h,scriptTags:m}=nm(s)),{priority:f,base:He("base",e,n),bodyAttributes:He("bodyAttributes",r,n),htmlAttributes:He("htmlAttributes",i,n),link:He("link",u,n),meta:He("meta",h,n),noscript:He("noscript",a,n),script:He("script",m,n),style:He("style",o,n),title:He("title",{title:l,titleAttributes:d},n)}},ai=im,mr=[],sc=!!(typeof window<"u"&&window.document&&window.document.createElement),oi=class{constructor(s,e){ct(this,"instances",[]);ct(this,"canUseDOM",sc);ct(this,"context");ct(this,"value",{setHelmet:s=>{this.context.helmet=s},helmetInstances:{get:()=>this.canUseDOM?mr:this.instances,add:s=>{(this.canUseDOM?mr:this.instances).push(s)},remove:s=>{const e=(this.canUseDOM?mr:this.instances).indexOf(s);(this.canUseDOM?mr:this.instances).splice(e,1)}}});this.context=s,this.canUseDOM=e||!1,e||(s.helmet=ai({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},am={},rc=te.createContext(am),xs,nc=(xs=class extends p.Component{constructor(r){super(r);ct(this,"helmetData");this.helmetData=new oi(this.props.context||{},xs.canUseDOM)}render(){return te.createElement(rc.Provider,{value:this.helmetData.value},this.props.children)}},ct(xs,"canUseDOM",sc),xs),ts=(s,e)=>{const r=document.head||document.querySelector("head"),n=r.querySelectorAll(`${s}[${et}]`),i=[].slice.call(n),a=[];let o;return e&&e.length&&e.forEach(l=>{const d=document.createElement(s);for(const c in l)if(Object.prototype.hasOwnProperty.call(l,c))if(c==="innerHTML")d.innerHTML=l.innerHTML;else if(c==="cssText")d.styleSheet?d.styleSheet.cssText=l.cssText:d.appendChild(document.createTextNode(l.cssText));else{const u=c,h=typeof l[u]>"u"?"":l[u];d.setAttribute(c,h)}d.setAttribute(et,"true"),i.some((c,u)=>(o=u,d.isEqualNode(c)))?i.splice(o,1):a.push(d)}),i.forEach(l=>{var d;return(d=l.parentNode)==null?void 0:d.removeChild(l)}),a.forEach(l=>r.appendChild(l)),{oldTags:i,newTags:a}},li=(s,e)=>{const r=document.getElementsByTagName(s)[0];if(!r)return;const n=r.getAttribute(et),i=n?n.split(","):[],a=[...i],o=Object.keys(e);for(const l of o){const d=e[l]||"";r.getAttribute(l)!==d&&r.setAttribute(l,d),i.indexOf(l)===-1&&i.push(l);const c=a.indexOf(l);c!==-1&&a.splice(c,1)}for(let l=a.length-1;l>=0;l-=1)r.removeAttribute(a[l]);i.length===a.length?r.removeAttribute(et):r.getAttribute(et)!==o.join(",")&&r.setAttribute(et,o.join(","))},om=(s,e)=>{typeof s<"u"&&document.title!==s&&(document.title=Zl(s)),li("title",e)},Xa=(s,e)=>{const{baseTag:r,bodyAttributes:n,htmlAttributes:i,linkTags:a,metaTags:o,noscriptTags:l,onChangeClientState:d,scriptTags:c,styleTags:u,title:h,titleAttributes:m}=s;li("body",n),li("html",i),om(h,m);const f={baseTag:ts("base",r),linkTags:ts("link",a),metaTags:ts("meta",o),noscriptTags:ts("noscript",l),scriptTags:ts("script",c),styleTags:ts("style",u)},y={},x={};Object.keys(f).forEach(g=>{const{newTags:v,oldTags:w}=f[g];v.length&&(y[g]=v),w.length&&(x[g]=f[g].oldTags)}),e&&e(),d(s,y,x)},Ts=null,lm=s=>{Ts&&cancelAnimationFrame(Ts),s.defer?Ts=requestAnimationFrame(()=>{Xa(s,()=>{Ts=null})}):(Xa(s),Ts=null)},cm=lm,Ja=class extends p.Component{constructor(){super(...arguments);ct(this,"rendered",!1)}shouldComponentUpdate(e){return!Gh(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:r}=this.props.context;let n=null;const i=Qh(e.get().map(a=>{const o={...a.props};return delete o.context,o}));nc.canUseDOM?cm(i):ai&&(n=ai(i)),r(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},si,be=(si=class extends p.Component{shouldComponentUpdate(s){return!Vh(Ka(this.props,"helmetData"),Ka(s,"helmetData"))}mapNestedChildrenToProps(s,e){if(!e)return null;switch(s.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${s.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(s,e,r,n){return{...e,[s.type]:[...e[s.type]||[],{...r,...this.mapNestedChildrenToProps(s,n)}]}}mapObjectTypeChildren(s,e,r,n){switch(s.type){case"title":return{...e,[s.type]:n,titleAttributes:{...r}};case"body":return{...e,bodyAttributes:{...r}};case"html":return{...e,htmlAttributes:{...r}};default:return{...e,[s.type]:{...r}}}}mapArrayTypeChildrenToProps(s,e){let r={...e};return Object.keys(s).forEach(n=>{r={...r,[n]:s[n]}}),r}warnOnInvalidChildren(s,e){return Ha(Wa.some(r=>s.type===r),typeof s.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Wa.join(", ")} are allowed. Helmet does not support rendering <${s.type}> elements. Refer to our API for more information.`),Ha(!e||typeof e=="string"||Array.isArray(e)&&!e.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${s.type}>. Did you forget to wrap your children in braces? ( <${s.type}>{\`\`}</${s.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(s,e){let r={};return te.Children.forEach(s,n=>{if(!n||!n.props)return;const{children:i,...a}=n.props,o=Object.keys(a).reduce((d,c)=>(d[Hh[c]||c]=a[c],d),{});let{type:l}=n;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(n,i),l){case"Symbol(react.fragment)":e=this.mapChildrenToProps(i,e);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(n,r,o,i);break;default:e=this.mapObjectTypeChildren(n,e,o,i);break}}),this.mapArrayTypeChildrenToProps(r,e)}render(){const{children:s,...e}=this.props;let r={...e},{helmetData:n}=e;if(s&&(r=this.mapChildrenToProps(s,r)),n&&!(n instanceof oi)){const i=n;n=new oi(i.context,!0),delete r.helmetData}return n?te.createElement(Ja,{...r,context:n.value}):te.createElement(rc.Consumer,null,i=>te.createElement(Ja,{...r,context:i}))}},ct(si,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),si);function ic(s){var e,r,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(e=0;e<i;e++)s[e]&&(r=ic(s[e]))&&(n&&(n+=" "),n+=r)}else for(r in s)s[r]&&(n&&(n+=" "),n+=r);return n}function ac(){for(var s,e,r=0,n="",i=arguments.length;r<i;r++)(s=arguments[r])&&(e=ic(s))&&(n&&(n+=" "),n+=e);return n}function dm(){for(var s=0,e,r,n="";s<arguments.length;)(e=arguments[s++])&&(r=oc(e))&&(n&&(n+=" "),n+=r);return n}function oc(s){if(typeof s=="string")return s;for(var e,r="",n=0;n<s.length;n++)s[n]&&(e=oc(s[n]))&&(r&&(r+=" "),r+=e);return r}var ea="-";function um(s){var e=mm(s),r=s.conflictingClassGroups,n=s.conflictingClassGroupModifiers,i=n===void 0?{}:n;function a(l){var d=l.split(ea);return d[0]===""&&d.length!==1&&d.shift(),lc(d,e)||hm(l)}function o(l,d){var c=r[l]||[];return d&&i[l]?[].concat(c,i[l]):c}return{getClassGroupId:a,getConflictingClassGroupIds:o}}function lc(s,e){var o;if(s.length===0)return e.classGroupId;var r=s[0],n=e.nextPart.get(r),i=n?lc(s.slice(1),n):void 0;if(i)return i;if(e.validators.length!==0){var a=s.join(ea);return(o=e.validators.find(function(l){var d=l.validator;return d(a)}))==null?void 0:o.classGroupId}}var Ya=/^\[(.+)\]$/;function hm(s){if(Ya.test(s)){var e=Ya.exec(s)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}}function mm(s){var e=s.theme,r=s.prefix,n={nextPart:new Map,validators:[]},i=pm(Object.entries(s.classGroups),r);return i.forEach(function(a){var o=a[0],l=a[1];ci(l,n,o,e)}),n}function ci(s,e,r,n){s.forEach(function(i){if(typeof i=="string"){var a=i===""?e:Qa(e,i);a.classGroupId=r;return}if(typeof i=="function"){if(fm(i)){ci(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(function(o){var l=o[0],d=o[1];ci(d,Qa(e,l),r,n)})})}function Qa(s,e){var r=s;return e.split(ea).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function fm(s){return s.isThemeGetter}function pm(s,e){return e?s.map(function(r){var n=r[0],i=r[1],a=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var d=l[0],c=l[1];return[e+d,c]})):o});return[n,a]}):s}function gm(s){if(s<1)return{get:function(){},set:function(){}};var e=0,r=new Map,n=new Map;function i(a,o){r.set(a,o),e++,e>s&&(e=0,n=r,r=new Map)}return{get:function(o){var l=r.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return i(o,l),l},set:function(o,l){r.has(o)?r.set(o,l):i(o,l)}}}var cc="!";function xm(s){var e=s.separator||":",r=e.length===1,n=e[0],i=e.length;return function(o){for(var l=[],d=0,c=0,u,h=0;h<o.length;h++){var m=o[h];if(d===0){if(m===n&&(r||o.slice(h,h+i)===e)){l.push(o.slice(c,h)),c=h+i;continue}if(m==="/"){u=h;continue}}m==="["?d++:m==="]"&&d--}var f=l.length===0?o:o.substring(c),y=f.startsWith(cc),x=y?f.substring(1):f,g=u&&u>c?u-c:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:x,maybePostfixModifierPosition:g}}}function ym(s){if(s.length<=1)return s;var e=[],r=[];return s.forEach(function(n){var i=n[0]==="[";i?(e.push.apply(e,r.sort().concat([n])),r=[]):r.push(n)}),e.push.apply(e,r.sort()),e}function bm(s){return{cache:gm(s.cacheSize),splitModifiers:xm(s),...um(s)}}var vm=/\s+/;function wm(s,e){var r=e.splitModifiers,n=e.getClassGroupId,i=e.getConflictingClassGroupIds,a=new Set;return s.trim().split(vm).map(function(o){var l=r(o),d=l.modifiers,c=l.hasImportantModifier,u=l.baseClassName,h=l.maybePostfixModifierPosition,m=n(h?u.substring(0,h):u),f=!!h;if(!m){if(!h)return{isTailwindClass:!1,originalClassName:o};if(m=n(u),!m)return{isTailwindClass:!1,originalClassName:o};f=!1}var y=ym(d).join(":"),x=c?y+cc:y;return{isTailwindClass:!0,modifierId:x,classGroupId:m,originalClassName:o,hasPostfixModifier:f}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,d=o.classGroupId,c=o.hasPostfixModifier,u=l+d;return a.has(u)?!1:(a.add(u),i(d,c).forEach(function(h){return a.add(l+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function jm(){for(var s=arguments.length,e=new Array(s),r=0;r<s;r++)e[r]=arguments[r];var n,i,a,o=l;function l(c){var u=e[0],h=e.slice(1),m=h.reduce(function(f,y){return y(f)},u());return n=bm(m),i=n.cache.get,a=n.cache.set,o=d,d(c)}function d(c){var u=i(c);if(u)return u;var h=wm(c,n);return a(c,h),h}return function(){return o(dm.apply(null,arguments))}}function de(s){var e=function(n){return n[s]||[]};return e.isThemeGetter=!0,e}var dc=/^\[(?:([a-z-]+):)?(.+)\]$/i,Nm=/^\d+\/\d+$/,_m=new Set(["px","full","screen"]),km=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Sm=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Cm=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Ye(s){return zt(s)||_m.has(s)||Nm.test(s)||di(s)}function di(s){return Jt(s,"length",Im)}function Tm(s){return Jt(s,"size",uc)}function Em(s){return Jt(s,"position",uc)}function Pm(s){return Jt(s,"url",Om)}function fr(s){return Jt(s,"number",zt)}function zt(s){return!Number.isNaN(Number(s))}function Am(s){return s.endsWith("%")&&zt(s.slice(0,-1))}function Es(s){return Za(s)||Jt(s,"number",Za)}function re(s){return dc.test(s)}function Ps(){return!0}function bt(s){return km.test(s)}function Dm(s){return Jt(s,"",Lm)}function Jt(s,e,r){var n=dc.exec(s);return n?n[1]?n[1]===e:r(n[2]):!1}function Im(s){return Sm.test(s)}function uc(){return!1}function Om(s){return s.startsWith("url(")}function Za(s){return Number.isInteger(Number(s))}function Lm(s){return Cm.test(s)}function Rm(){var s=de("colors"),e=de("spacing"),r=de("blur"),n=de("brightness"),i=de("borderColor"),a=de("borderRadius"),o=de("borderSpacing"),l=de("borderWidth"),d=de("contrast"),c=de("grayscale"),u=de("hueRotate"),h=de("invert"),m=de("gap"),f=de("gradientColorStops"),y=de("gradientColorStopPositions"),x=de("inset"),g=de("margin"),v=de("opacity"),w=de("padding"),b=de("saturate"),_=de("scale"),N=de("sepia"),k=de("skew"),j=de("space"),T=de("translate"),M=function(){return["auto","contain","none"]},B=function(){return["auto","hidden","clip","visible","scroll"]},W=function(){return["auto",re,e]},C=function(){return[re,e]},z=function(){return["",Ye]},R=function(){return["auto",zt,re]},$=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},P=function(){return["solid","dashed","dotted","double","none"]},U=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},G=function(){return["start","end","center","between","around","evenly","stretch"]},F=function(){return["","0",re]},A=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},I=function(){return[zt,fr]},O=function(){return[zt,re]};return{cacheSize:500,theme:{colors:[Ps],spacing:[Ye],blur:["none","",bt,re],brightness:I(),borderColor:[s],borderRadius:["none","","full",bt,re],borderSpacing:C(),borderWidth:z(),contrast:I(),grayscale:F(),hueRotate:O(),invert:F(),gap:C(),gradientColorStops:[s],gradientColorStopPositions:[Am,di],inset:W(),margin:W(),opacity:I(),padding:C(),saturate:I(),scale:I(),sepia:F(),skew:O(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",re]}],container:["container"],columns:[{columns:[bt]}],"break-after":[{"break-after":A()}],"break-before":[{"break-before":A()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat($(),[re])}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Es]}],basis:[{basis:W()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",re]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Es]}],"grid-cols":[{"grid-cols":[Ps]}],"col-start-end":[{col:["auto",{span:["full",Es]},re]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[Ps]}],"row-start-end":[{row:["auto",{span:[Es]},re]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",re]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",re]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(G())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(G(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(G(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",re,e]}],"min-w":[{"min-w":["min","max","fit",re,Ye]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[bt]},bt,re]}],h:[{h:[re,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",re,Ye]}],"max-h":[{"max-h":[re,e,"min","max","fit"]}],"font-size":[{text:["base",bt,di]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",fr]}],"font-family":[{font:[Ps]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",re]}],"line-clamp":[{"line-clamp":["none",zt,fr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",re,Ye]}],"list-image":[{"list-image":["none",re]}],"list-style-type":[{list:["none","disc","decimal",re]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(P(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Ye]}],"underline-offset":[{"underline-offset":["auto",re,Ye]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat($(),[Em])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Tm]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Pm]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(P(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:P()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(P())}],"outline-offset":[{"outline-offset":[re,Ye]}],"outline-w":[{outline:[Ye]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Ye]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",bt,Dm]}],"shadow-color":[{shadow:[Ps]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":U()}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",bt,re]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",re]}],duration:[{duration:O()}],ease:[{ease:["linear","in","out","in-out",re]}],delay:[{delay:O()}],animate:[{animate:["none","spin","ping","pulse","bounce",re]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Es,re]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",re]}],accent:[{accent:["auto",s]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",re]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",re]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[Ye,fr]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Mm=jm(Rm);function yt(...s){return Mm(ac(s))}function Fe(s,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(s==null||s(i),r===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function eo(s,e){if(typeof s=="function")return s(e);s!=null&&(s.current=e)}function hc(...s){return e=>{let r=!1;const n=s.map(i=>{const a=eo(i,e);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():eo(s[i],null)}}}}function Ht(...s){return p.useCallback(hc(...s),s)}function mc(s,e=[]){let r=[];function n(a,o){const l=p.createContext(o),d=r.length;r=[...r,o];const c=h=>{var v;const{scope:m,children:f,...y}=h,x=((v=m==null?void 0:m[s])==null?void 0:v[d])||l,g=p.useMemo(()=>y,Object.values(y));return t.jsx(x.Provider,{value:g,children:f})};c.displayName=a+"Provider";function u(h,m){var x;const f=((x=m==null?void 0:m[s])==null?void 0:x[d])||l,y=p.useContext(f);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[c,u]}const i=()=>{const a=r.map(o=>p.createContext(o));return function(l){const d=(l==null?void 0:l[s])||a;return p.useMemo(()=>({[`__scope${s}`]:{...l,[s]:d}}),[l,d])}};return i.scopeName=s,[n,$m(i,...e)]}function $m(...s){const e=s[0];if(s.length===1)return e;const r=()=>{const n=s.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:d,scopeName:c})=>{const h=d(a)[`__scope${c}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function $r(s){const e=Um(s),r=p.forwardRef((n,i)=>{const{children:a,...o}=n,l=p.Children.toArray(a),d=l.find(zm);if(d){const c=d.props.children,u=l.map(h=>h===d?p.Children.count(c)>1?p.Children.only(null):p.isValidElement(c)?c.props.children:null:h);return t.jsx(e,{...o,ref:i,children:p.isValidElement(c)?p.cloneElement(c,void 0,u):null})}return t.jsx(e,{...o,ref:i,children:a})});return r.displayName=`${s}.Slot`,r}var Fm=$r("Slot");function Um(s){const e=p.forwardRef((r,n)=>{const{children:i,...a}=r;if(p.isValidElement(i)){const o=Bm(i),l=qm(a,i.props);return i.type!==p.Fragment&&(l.ref=n?hc(n,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var Vm=Symbol("radix.slottable");function zm(s){return p.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===Vm}function qm(s,e){const r={...e};for(const n in e){const i=s[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...l)=>{const d=a(...l);return i(...l),d}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...s,...r}}function Bm(s){var n,i;let e=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?s.ref:(e=(i=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?s.props.ref:s.props.ref||s.ref)}function Gm(s){const e=s+"CollectionProvider",[r,n]=mc(e),[i,a]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:g,children:v}=x,w=te.useRef(null),b=te.useRef(new Map).current;return t.jsx(i,{scope:g,itemMap:b,collectionRef:w,children:v})};o.displayName=e;const l=s+"CollectionSlot",d=$r(l),c=te.forwardRef((x,g)=>{const{scope:v,children:w}=x,b=a(l,v),_=Ht(g,b.collectionRef);return t.jsx(d,{ref:_,children:w})});c.displayName=l;const u=s+"CollectionItemSlot",h="data-radix-collection-item",m=$r(u),f=te.forwardRef((x,g)=>{const{scope:v,children:w,...b}=x,_=te.useRef(null),N=Ht(g,_),k=a(u,v);return te.useEffect(()=>(k.itemMap.set(_,{ref:_,...b}),()=>void k.itemMap.delete(_))),t.jsx(m,{[h]:"",ref:N,children:w})});f.displayName=u;function y(x){const g=a(s+"CollectionConsumer",x);return te.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const b=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((k,j)=>b.indexOf(k.ref.current)-b.indexOf(j.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},y,n]}var Hm=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ot=Hm.reduce((s,e)=>{const r=$r(`Primitive.${e}`),n=p.forwardRef((i,a)=>{const{asChild:o,...l}=i,d=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(d,{...l,ref:a})});return n.displayName=`Primitive.${e}`,{...s,[e]:n}},{});function fc(s,e){s&&Qi.flushSync(()=>s.dispatchEvent(e))}function Wt(s){const e=p.useRef(s);return p.useEffect(()=>{e.current=s}),p.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function Wm(s,e=globalThis==null?void 0:globalThis.document){const r=Wt(s);p.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var Km="DismissableLayer",ui="dismissableLayer.update",Xm="dismissableLayer.pointerDownOutside",Jm="dismissableLayer.focusOutside",to,pc=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gc=p.forwardRef((s,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...d}=s,c=p.useContext(pc),[u,h]=p.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=p.useState({}),y=Ht(e,j=>h(j)),x=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=x.indexOf(g),w=u?x.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,_=w>=v,N=Qm(j=>{const T=j.target,M=[...c.branches].some(B=>B.contains(T));!_||M||(i==null||i(j),o==null||o(j),j.defaultPrevented||l==null||l())},m),k=Zm(j=>{const T=j.target;[...c.branches].some(B=>B.contains(T))||(a==null||a(j),o==null||o(j),j.defaultPrevented||l==null||l())},m);return Wm(j=>{w===c.layers.size-1&&(n==null||n(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},m),p.useEffect(()=>{if(u)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(to=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),so(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=to)}},[u,m,r,c]),p.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),so())},[u,c]),p.useEffect(()=>{const j=()=>f({});return document.addEventListener(ui,j),()=>document.removeEventListener(ui,j)},[]),t.jsx(ot.div,{...d,ref:y,style:{pointerEvents:b?_?"auto":"none":void 0,...s.style},onFocusCapture:Fe(s.onFocusCapture,k.onFocusCapture),onBlurCapture:Fe(s.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Fe(s.onPointerDownCapture,N.onPointerDownCapture)})});gc.displayName=Km;var Ym="DismissableLayerBranch",xc=p.forwardRef((s,e)=>{const r=p.useContext(pc),n=p.useRef(null),i=Ht(e,n);return p.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),t.jsx(ot.div,{...s,ref:i})});xc.displayName=Ym;function Qm(s,e=globalThis==null?void 0:globalThis.document){const r=Wt(s),n=p.useRef(!1),i=p.useRef(()=>{});return p.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let d=function(){yc(Xm,r,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function Zm(s,e=globalThis==null?void 0:globalThis.document){const r=Wt(s),n=p.useRef(!1);return p.useEffect(()=>{const i=a=>{a.target&&!n.current&&yc(Jm,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function so(){const s=new CustomEvent(ui);document.dispatchEvent(s)}function yc(s,e,r,{discrete:n}){const i=r.originalEvent.target,a=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(s,e,{once:!0}),n?fc(i,a):i.dispatchEvent(a)}var ef=gc,tf=xc,Hs=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},sf="Portal",bc=p.forwardRef((s,e)=>{var l;const{container:r,...n}=s,[i,a]=p.useState(!1);Hs(()=>a(!0),[]);const o=r||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?_h.createPortal(t.jsx(ot.div,{...n,ref:e}),o):null});bc.displayName=sf;function rf(s,e){return p.useReducer((r,n)=>e[r][n]??r,s)}var vc=s=>{const{present:e,children:r}=s,n=nf(e),i=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),a=Ht(n.ref,af(i));return typeof r=="function"||n.isPresent?p.cloneElement(i,{ref:a}):null};vc.displayName="Presence";function nf(s){const[e,r]=p.useState(),n=p.useRef(null),i=p.useRef(s),a=p.useRef("none"),o=s?"mounted":"unmounted",[l,d]=rf(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=pr(n.current);a.current=l==="mounted"?c:"none"},[l]),Hs(()=>{const c=n.current,u=i.current;if(u!==s){const m=a.current,f=pr(c);s?d("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?d("UNMOUNT"):d(u&&m!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=s}},[s,d]),Hs(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=f=>{const x=pr(n.current).includes(f.animationName);if(f.target===e&&x&&(d("ANIMATION_END"),!i.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},m=f=>{f.target===e&&(a.current=pr(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(c=>{n.current=c?getComputedStyle(c):null,r(c)},[])}}function pr(s){return(s==null?void 0:s.animationName)||"none"}function af(s){var n,i;let e=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?s.ref:(e=(i=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?s.props.ref:s.props.ref||s.ref)}var of=kh[" useInsertionEffect ".trim().toString()]||Hs;function lf({prop:s,defaultProp:e,onChange:r=()=>{},caller:n}){const[i,a,o]=cf({defaultProp:e,onChange:r}),l=s!==void 0,d=l?s:i;{const u=p.useRef(s!==void 0);p.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const c=p.useCallback(u=>{var h;if(l){const m=df(u)?u(s):u;m!==s&&((h=o.current)==null||h.call(o,m))}else a(u)},[l,s,a,o]);return[d,c]}function cf({defaultProp:s,onChange:e}){const[r,n]=p.useState(s),i=p.useRef(r),a=p.useRef(e);return of(()=>{a.current=e},[e]),p.useEffect(()=>{var o;i.current!==r&&((o=a.current)==null||o.call(a,r),i.current=r)},[r,i]),[r,n,a]}function df(s){return typeof s=="function"}var uf=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),hf="VisuallyHidden",ta=p.forwardRef((s,e)=>t.jsx(ot.span,{...s,ref:e,style:{...uf,...s.style}}));ta.displayName=hf;var sa="ToastProvider",[ra,mf,ff]=Gm("Toast"),[wc,O2]=mc("Toast",[ff]),[pf,sn]=wc(sa),jc=s=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=s,[l,d]=p.useState(null),[c,u]=p.useState(0),h=p.useRef(!1),m=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${sa}\`. Expected non-empty \`string\`.`),t.jsx(ra.Provider,{scope:e,children:t.jsx(pf,{scope:e,label:r,duration:n,swipeDirection:i,swipeThreshold:a,toastCount:c,viewport:l,onViewportChange:d,onToastAdd:p.useCallback(()=>u(f=>f+1),[]),onToastRemove:p.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};jc.displayName=sa;var Nc="ToastViewport",gf=["F8"],hi="toast.viewportPause",mi="toast.viewportResume",_c=p.forwardRef((s,e)=>{const{__scopeToast:r,hotkey:n=gf,label:i="Notifications ({hotkey})",...a}=s,o=sn(Nc,r),l=mf(r),d=p.useRef(null),c=p.useRef(null),u=p.useRef(null),h=p.useRef(null),m=Ht(e,h,o.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;p.useEffect(()=>{const g=v=>{var b;n.length!==0&&n.every(_=>v[_]||v.code===_)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[n]),p.useEffect(()=>{const g=d.current,v=h.current;if(y&&g&&v){const w=()=>{if(!o.isClosePausedRef.current){const k=new CustomEvent(hi);v.dispatchEvent(k),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const k=new CustomEvent(mi);v.dispatchEvent(k),o.isClosePausedRef.current=!1}},_=k=>{!g.contains(k.relatedTarget)&&b()},N=()=>{g.contains(document.activeElement)||b()};return g.addEventListener("focusin",w),g.addEventListener("focusout",_),g.addEventListener("pointermove",w),g.addEventListener("pointerleave",N),window.addEventListener("blur",w),window.addEventListener("focus",b),()=>{g.removeEventListener("focusin",w),g.removeEventListener("focusout",_),g.removeEventListener("pointermove",w),g.removeEventListener("pointerleave",N),window.removeEventListener("blur",w),window.removeEventListener("focus",b)}}},[y,o.isClosePausedRef]);const x=p.useCallback(({tabbingDirection:g})=>{const w=l().map(b=>{const _=b.ref.current,N=[_,...Ef(_)];return g==="forwards"?N:N.reverse()});return(g==="forwards"?w.reverse():w).flat()},[l]);return p.useEffect(()=>{const g=h.current;if(g){const v=w=>{var N,k,j;const b=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!b){const T=document.activeElement,M=w.shiftKey;if(w.target===g&&M){(N=c.current)==null||N.focus();return}const C=x({tabbingDirection:M?"backwards":"forwards"}),z=C.findIndex(R=>R===T);En(C.slice(z+1))?w.preventDefault():M?(k=c.current)==null||k.focus():(j=u.current)==null||j.focus()}};return g.addEventListener("keydown",v),()=>g.removeEventListener("keydown",v)}},[l,x]),t.jsxs(tf,{ref:d,role:"region","aria-label":i.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&t.jsx(fi,{ref:c,onFocusFromOutsideViewport:()=>{const g=x({tabbingDirection:"forwards"});En(g)}}),t.jsx(ra.Slot,{scope:r,children:t.jsx(ot.ol,{tabIndex:-1,...a,ref:m})}),y&&t.jsx(fi,{ref:u,onFocusFromOutsideViewport:()=>{const g=x({tabbingDirection:"backwards"});En(g)}})]})});_c.displayName=Nc;var kc="ToastFocusProxy",fi=p.forwardRef((s,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=s,a=sn(kc,r);return t.jsx(ta,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const l=o.relatedTarget;!((c=a.viewport)!=null&&c.contains(l))&&n()}})});fi.displayName=kc;var rr="Toast",xf="toast.swipeStart",yf="toast.swipeMove",bf="toast.swipeCancel",vf="toast.swipeEnd",Sc=p.forwardRef((s,e)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:a,...o}=s,[l,d]=lf({prop:n,defaultProp:i??!0,onChange:a,caller:rr});return t.jsx(vc,{present:r||l,children:t.jsx(Nf,{open:l,...o,ref:e,onClose:()=>d(!1),onPause:Wt(s.onPause),onResume:Wt(s.onResume),onSwipeStart:Fe(s.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Fe(s.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Fe(s.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Fe(s.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),d(!1)})})})});Sc.displayName=rr;var[wf,jf]=wc(rr,{onClose(){}}),Nf=p.forwardRef((s,e)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:d,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:f,...y}=s,x=sn(rr,r),[g,v]=p.useState(null),w=Ht(e,R=>v(R)),b=p.useRef(null),_=p.useRef(null),N=i||x.duration,k=p.useRef(0),j=p.useRef(N),T=p.useRef(0),{onToastAdd:M,onToastRemove:B}=x,W=Wt(()=>{var $;(g==null?void 0:g.contains(document.activeElement))&&(($=x.viewport)==null||$.focus()),o()}),C=p.useCallback(R=>{!R||R===1/0||(window.clearTimeout(T.current),k.current=new Date().getTime(),T.current=window.setTimeout(W,R))},[W]);p.useEffect(()=>{const R=x.viewport;if(R){const $=()=>{C(j.current),c==null||c()},P=()=>{const U=new Date().getTime()-k.current;j.current=j.current-U,window.clearTimeout(T.current),d==null||d()};return R.addEventListener(hi,P),R.addEventListener(mi,$),()=>{R.removeEventListener(hi,P),R.removeEventListener(mi,$)}}},[x.viewport,N,d,c,C]),p.useEffect(()=>{a&&!x.isClosePausedRef.current&&C(N)},[a,N,x.isClosePausedRef,C]),p.useEffect(()=>(M(),()=>B()),[M,B]);const z=p.useMemo(()=>g?Ic(g):null,[g]);return x.viewport?t.jsxs(t.Fragment,{children:[z&&t.jsx(_f,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),t.jsx(wf,{scope:r,onClose:W,children:Qi.createPortal(t.jsx(ra.ItemSlot,{scope:r,children:t.jsx(ef,{asChild:!0,onEscapeKeyDown:Fe(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||W(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:t.jsx(ot.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":x.swipeDirection,...y,ref:w,style:{userSelect:"none",touchAction:"none",...s.style},onKeyDown:Fe(s.onKeyDown,R=>{R.key==="Escape"&&(l==null||l(R.nativeEvent),R.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,W()))}),onPointerDown:Fe(s.onPointerDown,R=>{R.button===0&&(b.current={x:R.clientX,y:R.clientY})}),onPointerMove:Fe(s.onPointerMove,R=>{if(!b.current)return;const $=R.clientX-b.current.x,P=R.clientY-b.current.y,U=!!_.current,G=["left","right"].includes(x.swipeDirection),F=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,A=G?F(0,$):0,I=G?0:F(0,P),O=R.pointerType==="touch"?10:2,D={x:A,y:I},q={originalEvent:R,delta:D};U?(_.current=D,gr(yf,h,q,{discrete:!1})):ro(D,x.swipeDirection,O)?(_.current=D,gr(xf,u,q,{discrete:!1}),R.target.setPointerCapture(R.pointerId)):(Math.abs($)>O||Math.abs(P)>O)&&(b.current=null)}),onPointerUp:Fe(s.onPointerUp,R=>{const $=_.current,P=R.target;if(P.hasPointerCapture(R.pointerId)&&P.releasePointerCapture(R.pointerId),_.current=null,b.current=null,$){const U=R.currentTarget,G={originalEvent:R,delta:$};ro($,x.swipeDirection,x.swipeThreshold)?gr(vf,f,G,{discrete:!0}):gr(bf,m,G,{discrete:!0}),U.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),_f=s=>{const{__scopeToast:e,children:r,...n}=s,i=sn(rr,e),[a,o]=p.useState(!1),[l,d]=p.useState(!1);return Cf(()=>o(!0)),p.useEffect(()=>{const c=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(c)},[]),l?null:t.jsx(bc,{asChild:!0,children:t.jsx(ta,{...n,children:a&&t.jsxs(t.Fragment,{children:[i.label," ",r]})})})},kf="ToastTitle",Cc=p.forwardRef((s,e)=>{const{__scopeToast:r,...n}=s;return t.jsx(ot.div,{...n,ref:e})});Cc.displayName=kf;var Sf="ToastDescription",Tc=p.forwardRef((s,e)=>{const{__scopeToast:r,...n}=s;return t.jsx(ot.div,{...n,ref:e})});Tc.displayName=Sf;var Ec="ToastAction",Pc=p.forwardRef((s,e)=>{const{altText:r,...n}=s;return r.trim()?t.jsx(Dc,{altText:r,asChild:!0,children:t.jsx(na,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ec}\`. Expected non-empty \`string\`.`),null)});Pc.displayName=Ec;var Ac="ToastClose",na=p.forwardRef((s,e)=>{const{__scopeToast:r,...n}=s,i=jf(Ac,r);return t.jsx(Dc,{asChild:!0,children:t.jsx(ot.button,{type:"button",...n,ref:e,onClick:Fe(s.onClick,i.onClose)})})});na.displayName=Ac;var Dc=p.forwardRef((s,e)=>{const{__scopeToast:r,altText:n,...i}=s;return t.jsx(ot.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:e})});function Ic(s){const e=[];return Array.from(s.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),Tf(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Ic(n))}}),e}function gr(s,e,r,{discrete:n}){const i=r.originalEvent.currentTarget,a=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:r});e&&i.addEventListener(s,e,{once:!0}),n?fc(i,a):i.dispatchEvent(a)}var ro=(s,e,r=0)=>{const n=Math.abs(s.x),i=Math.abs(s.y),a=n>i;return e==="left"||e==="right"?a&&n>r:!a&&i>r};function Cf(s=()=>{}){const e=Wt(s);Hs(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function Tf(s){return s.nodeType===s.ELEMENT_NODE}function Ef(s){const e=[],r=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function En(s){const e=document.activeElement;return s.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var Pf=jc,Oc=_c,Lc=Sc,Rc=Cc,Mc=Tc,$c=Pc,Fc=na;const no=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,io=ac,Uc=(s,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return io(s,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(c=>{const u=r==null?void 0:r[c],h=a==null?void 0:a[c];if(u===null)return null;const m=no(u)||no(h);return i[c][m]}),l=r&&Object.entries(r).reduce((c,u)=>{let[h,m]=u;return m===void 0||(c[h]=m),c},{}),d=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:h,className:m,...f}=u;return Object.entries(f).every(y=>{let[x,g]=y;return Array.isArray(g)?g.includes({...a,...l}[x]):{...a,...l}[x]===g})?[...c,h,m]:c},[]);return io(s,o,d,r==null?void 0:r.class,r==null?void 0:r.className)};var Af={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Df=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V=(s,e)=>{const r=p.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,children:l,...d},c)=>p.createElement("svg",{ref:c,...Af,width:i,height:i,stroke:n,strokeWidth:o?Number(a)*24/Number(i):a,className:`lucide lucide-${Df(s)}`,...d},[...e.map(([u,h])=>p.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${s}`,r},If=V("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),ne=V("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Tt=V("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),tt=V("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Of=V("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Le=V("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),Vc=V("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),Ws=V("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Lf=V("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),ia=V("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),qt=V("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]]),ge=V("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Rf=V("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),zc=V("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Mf=V("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Me=V("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),$f=V("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Ff=V("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ve=V("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Ls=V("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Uf=V("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),aa=V("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Vf=V("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),pi=V("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),zf=V("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),fe=V("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ae=V("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]),ao=V("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),qf=V("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Ks=V("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),kt=V("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ys=V("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Ce=V("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),qc=V("FileArchive",[["path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2",key:"1u864v"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]),oe=V("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Bc=V("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Bf=V("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Gf=V("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),Kt=V("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),nr=V("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),gi=V("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),Hf=V("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),Wf=V("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),xi=V("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Kf=V("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Ue=V("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Xf=V("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Gc=V("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),Xs=V("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Jf=V("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Yf=V("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),rt=V("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Et=V("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Qf=V("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Fr=V("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),pt=V("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),bs=V("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Zf=V("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),Hc=V("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Dr=V("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),fs=V("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ep=V("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),oo=V("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Ir=V("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),tp=V("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Js=V("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),ir=V("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Gt=V("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),yi=V("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]),Ys=V("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),bi=V("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Ur=V("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),Je=V("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),sp=V("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),rp=V("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),np=V("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),ip=V("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),st=V("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),ap=V("School",[["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4",key:"cpkuc4"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),Yt=V("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),oa=V("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),op=V("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Ke=V("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),lp=V("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),As=V("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),cp=V("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),lo=V("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),vi=V("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),dp=V("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),up=V("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),hp=V("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),mp=V("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Se=V("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),gt=V("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),rn=V("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Re=V("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),la=V("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Wc=V("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),co=V("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),vs=V("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),fp=V("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),wi=V("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),Vr=V("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),it=V("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ie=V("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ca=V("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),pp=V("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),gp=V("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),xp=V("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),uo=V("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),we=V("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),da=V("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),yp=Pf,Kc=te.forwardRef(({className:s,...e},r)=>t.jsx(Oc,{ref:r,className:yt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...e}));Kc.displayName=Oc.displayName;const bp=Uc("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Xc=te.forwardRef(({className:s,variant:e,...r},n)=>t.jsx(Lc,{ref:n,className:yt(bp({variant:e}),s),...r}));Xc.displayName=Lc.displayName;const vp=te.forwardRef(({className:s,...e},r)=>t.jsx($c,{ref:r,className:yt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...e}));vp.displayName=$c.displayName;const Jc=te.forwardRef(({className:s,...e},r)=>t.jsx(Fc,{ref:r,className:yt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...e,children:t.jsx(we,{className:"h-4 w-4"})}));Jc.displayName=Fc.displayName;const Yc=te.forwardRef(({className:s,...e},r)=>t.jsx(Rc,{ref:r,className:yt("text-sm font-semibold",s),...e}));Yc.displayName=Rc.displayName;const Qc=te.forwardRef(({className:s,...e},r)=>t.jsx(Mc,{ref:r,className:yt("text-sm opacity-90",s),...e}));Qc.displayName=Mc.displayName;const wp=1;let Pn=0;function jp(){return Pn=(Pn+1)%Number.MAX_VALUE,Pn.toString()}const Ee={state:{toasts:[]},listeners:[],getState:()=>Ee.state,setState:s=>{typeof s=="function"?Ee.state=s(Ee.state):Ee.state={...Ee.state,...s},Ee.listeners.forEach(e=>e(Ee.state))},subscribe:s=>(Ee.listeners.push(s),()=>{Ee.listeners=Ee.listeners.filter(e=>e!==s)})},Np=({...s})=>{const e=jp(),r=i=>Ee.setState(a=>({...a,toasts:a.toasts.map(o=>o.id===e?{...o,...i}:o)})),n=()=>Ee.setState(i=>({...i,toasts:i.toasts.filter(a=>a.id!==e)}));return Ee.setState(i=>({...i,toasts:[{...s,id:e,dismiss:n},...i.toasts].slice(0,wp)})),{id:e,dismiss:n,update:r}};function ae(){const[s,e]=p.useState(Ee.getState());return p.useEffect(()=>Ee.subscribe(n=>{e(n)}),[]),p.useEffect(()=>{const r=[];return s.toasts.forEach(n=>{if(n.duration===1/0)return;const i=setTimeout(()=>{n.dismiss()},n.duration||5e3);r.push(i)}),()=>{r.forEach(n=>clearTimeout(n))}},[s.toasts]),{toast:Np,toasts:s.toasts}}function _p(){const{toasts:s}=ae();return t.jsxs(yp,{children:[s.map(({id:e,title:r,description:n,action:i,dismiss:a,...o})=>t.jsxs(Xc,{...o,children:[t.jsxs("div",{className:"grid gap-1",children:[r&&t.jsx(Yc,{children:r}),n&&t.jsx(Qc,{children:n})]}),i,t.jsx(Jc,{})]},e)),t.jsx(Kc,{})]})}const Zc=p.createContext(),kp=(s,e)=>{switch(e.type){case"ADD_TOAST":return[...s,e.toast];case"REMOVE_TOAST":return s.filter(r=>r.id!==e.id);case"CLEAR_TOASTS":return[];default:return s}},Sp=({children:s})=>{const[e,r]=p.useReducer(kp,[]),n=p.useCallback(({title:o,description:l,variant:d="default",duration:c=5e3})=>{const u=Date.now()+Math.random();r({type:"ADD_TOAST",toast:{id:u,title:o,description:l,variant:d,duration:c}}),setTimeout(()=>{r({type:"REMOVE_TOAST",id:u})},c)},[]),i=p.useCallback(o=>{r({type:"REMOVE_TOAST",id:o})},[]),a=p.useCallback(()=>{r({type:"CLEAR_TOASTS"})},[]);return t.jsx(Zc.Provider,{value:{toast:n,removeToast:i,clearToasts:a,toasts:e},children:s})},Dt=()=>{const s=p.useContext(Zc);if(!s)throw new Error("useToast must be used within a ToastProvider");return s},ed=p.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"}),nn=p.createContext({}),an=p.createContext(null),on=typeof document<"u",ua=on?p.useLayoutEffect:p.useEffect,td=p.createContext({strict:!1}),ha=s=>s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Cp="framerAppearId",sd="data-"+ha(Cp);function Tp(s,e,r,n){const{visualElement:i}=p.useContext(nn),a=p.useContext(td),o=p.useContext(an),l=p.useContext(ed).reducedMotion,d=p.useRef();n=n||a.renderer,!d.current&&n&&(d.current=n(s,{visualState:e,parent:i,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=d.current;p.useInsertionEffect(()=>{c&&c.update(r,o)});const u=p.useRef(!!(r[sd]&&!window.HandoffComplete));return ua(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),p.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function ls(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function Ep(s,e,r){return p.useCallback(n=>{n&&s.mount&&s.mount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):ls(r)&&(r.current=n))},[e])}function Qs(s){return typeof s=="string"||Array.isArray(s)}function ln(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}const ma=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],fa=["initial",...ma];function cn(s){return ln(s.animate)||fa.some(e=>Qs(s[e]))}function rd(s){return!!(cn(s)||s.variants)}function Pp(s,e){if(cn(s)){const{initial:r,animate:n}=s;return{initial:r===!1||Qs(r)?r:void 0,animate:Qs(n)?n:void 0}}return s.inherit!==!1?e:{}}function Ap(s){const{initial:e,animate:r}=Pp(s,p.useContext(nn));return p.useMemo(()=>({initial:e,animate:r}),[ho(e),ho(r)])}function ho(s){return Array.isArray(s)?s.join(" "):s}const mo={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zs={};for(const s in mo)Zs[s]={isEnabled:e=>mo[s].some(r=>!!e[r])};function Dp(s){for(const e in s)Zs[e]={...Zs[e],...s[e]}}const pa=p.createContext({}),nd=p.createContext({}),Ip=Symbol.for("motionComponentSymbol");function Op({preloadedFeatures:s,createVisualElement:e,useRender:r,useVisualState:n,Component:i}){s&&Dp(s);function a(l,d){let c;const u={...p.useContext(ed),...l,layoutId:Lp(l)},{isStatic:h}=u,m=Ap(l),f=n(l,h);if(!h&&on){m.visualElement=Tp(i,f,u,e);const y=p.useContext(nd),x=p.useContext(td).strict;m.visualElement&&(c=m.visualElement.loadFeatures(u,x,s,y))}return p.createElement(nn.Provider,{value:m},c&&m.visualElement?p.createElement(c,{visualElement:m.visualElement,...u}):null,r(i,l,Ep(f,m.visualElement,d),f,h,m.visualElement))}const o=p.forwardRef(a);return o[Ip]=i,o}function Lp({layoutId:s}){const e=p.useContext(pa).id;return e&&s!==void 0?e+"-"+s:s}function Rp(s){function e(n,i={}){return Op(s(n,i))}if(typeof Proxy>"u")return e;const r=new Map;return new Proxy(e,{get:(n,i)=>(r.has(i)||r.set(i,e(i)),r.get(i))})}const Mp=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ga(s){return typeof s!="string"||s.includes("-")?!1:!!(Mp.indexOf(s)>-1||/[A-Z]/.test(s))}const zr={};function $p(s){Object.assign(zr,s)}const ar=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qt=new Set(ar);function id(s,{layout:e,layoutId:r}){return Qt.has(s)||s.startsWith("origin")||(e||r!==void 0)&&(!!zr[s]||s==="opacity")}const $e=s=>!!(s&&s.getVelocity),Fp={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Up=ar.length;function Vp(s,{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},n,i){let a="";for(let o=0;o<Up;o++){const l=ar[o];if(s[l]!==void 0){const d=Fp[l]||l;a+=`${d}(${s[l]}) `}}return e&&!s.z&&(a+="translateZ(0)"),a=a.trim(),i?a=i(s,n?"":a):r&&n&&(a="none"),a}const ad=s=>e=>typeof e=="string"&&e.startsWith(s),od=ad("--"),ji=ad("var(--"),zp=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,qp=(s,e)=>e&&typeof s=="number"?e.transform(s):s,Pt=(s,e,r)=>Math.min(Math.max(r,s),e),Zt={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},$s={...Zt,transform:s=>Pt(0,1,s)},xr={...Zt,default:1},Fs=s=>Math.round(s*1e5)/1e5,dn=/(-)?([\d]*\.?[\d])+/g,ld=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Bp=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function or(s){return typeof s=="string"}const lr=s=>({test:e=>or(e)&&e.endsWith(s)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${s}`}),vt=lr("deg"),nt=lr("%"),X=lr("px"),Gp=lr("vh"),Hp=lr("vw"),fo={...nt,parse:s=>nt.parse(s)/100,transform:s=>nt.transform(s*100)},po={...Zt,transform:Math.round},cd={borderWidth:X,borderTopWidth:X,borderRightWidth:X,borderBottomWidth:X,borderLeftWidth:X,borderRadius:X,radius:X,borderTopLeftRadius:X,borderTopRightRadius:X,borderBottomRightRadius:X,borderBottomLeftRadius:X,width:X,maxWidth:X,height:X,maxHeight:X,size:X,top:X,right:X,bottom:X,left:X,padding:X,paddingTop:X,paddingRight:X,paddingBottom:X,paddingLeft:X,margin:X,marginTop:X,marginRight:X,marginBottom:X,marginLeft:X,rotate:vt,rotateX:vt,rotateY:vt,rotateZ:vt,scale:xr,scaleX:xr,scaleY:xr,scaleZ:xr,skew:vt,skewX:vt,skewY:vt,distance:X,translateX:X,translateY:X,translateZ:X,x:X,y:X,z:X,perspective:X,transformPerspective:X,opacity:$s,originX:fo,originY:fo,originZ:X,zIndex:po,fillOpacity:$s,strokeOpacity:$s,numOctaves:po};function xa(s,e,r,n){const{style:i,vars:a,transform:o,transformOrigin:l}=s;let d=!1,c=!1,u=!0;for(const h in e){const m=e[h];if(od(h)){a[h]=m;continue}const f=cd[h],y=qp(m,f);if(Qt.has(h)){if(d=!0,o[h]=y,!u)continue;m!==(f.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,l[h]=y):i[h]=y}if(e.transform||(d||n?i.transform=Vp(s.transform,r,u,n):i.transform&&(i.transform="none")),c){const{originX:h="50%",originY:m="50%",originZ:f=0}=l;i.transformOrigin=`${h} ${m} ${f}`}}const ya=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dd(s,e,r){for(const n in e)!$e(e[n])&&!id(n,r)&&(s[n]=e[n])}function Wp({transformTemplate:s},e,r){return p.useMemo(()=>{const n=ya();return xa(n,e,{enableHardwareAcceleration:!r},s),Object.assign({},n.vars,n.style)},[e])}function Kp(s,e,r){const n=s.style||{},i={};return dd(i,n,s),Object.assign(i,Wp(s,e,r)),s.transformValues?s.transformValues(i):i}function Xp(s,e,r){const n={},i=Kp(s,e,r);return s.drag&&s.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(n.tabIndex=0),n.style=i,n}const Jp=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qr(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||Jp.has(s)}let ud=s=>!qr(s);function Yp(s){s&&(ud=e=>e.startsWith("on")?!qr(e):s(e))}try{Yp(require("@emotion/is-prop-valid").default)}catch{}function Qp(s,e,r){const n={};for(const i in s)i==="values"&&typeof s.values=="object"||(ud(i)||r===!0&&qr(i)||!e&&!qr(i)||s.draggable&&i.startsWith("onDrag"))&&(n[i]=s[i]);return n}function go(s,e,r){return typeof s=="string"?s:X.transform(e+r*s)}function Zp(s,e,r){const n=go(e,s.x,s.width),i=go(r,s.y,s.height);return`${n} ${i}`}const eg={offset:"stroke-dashoffset",array:"stroke-dasharray"},tg={offset:"strokeDashoffset",array:"strokeDasharray"};function sg(s,e,r=1,n=0,i=!0){s.pathLength=1;const a=i?eg:tg;s[a.offset]=X.transform(-n);const o=X.transform(e),l=X.transform(r);s[a.array]=`${o} ${l}`}function ba(s,{attrX:e,attrY:r,attrScale:n,originX:i,originY:a,pathLength:o,pathSpacing:l=1,pathOffset:d=0,...c},u,h,m){if(xa(s,c,u,m),h){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:f,style:y,dimensions:x}=s;f.transform&&(x&&(y.transform=f.transform),delete f.transform),x&&(i!==void 0||a!==void 0||y.transform)&&(y.transformOrigin=Zp(x,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(f.x=e),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),o!==void 0&&sg(f,o,l,d,!1)}const hd=()=>({...ya(),attrs:{}}),va=s=>typeof s=="string"&&s.toLowerCase()==="svg";function rg(s,e,r,n){const i=p.useMemo(()=>{const a=hd();return ba(a,e,{enableHardwareAcceleration:!1},va(n),s.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(s.style){const a={};dd(a,s.style,s),i.style={...a,...i.style}}return i}function ng(s=!1){return(r,n,i,{latestValues:a},o)=>{const d=(ga(r)?rg:Xp)(n,a,o,r),u={...Qp(n,typeof r=="string",s),...d,ref:i},{children:h}=n,m=p.useMemo(()=>$e(h)?h.get():h,[h]);return p.createElement(r,{...u,children:m})}}function md(s,{style:e,vars:r},n,i){Object.assign(s.style,e,i&&i.getProjectionStyles(n));for(const a in r)s.style.setProperty(a,r[a])}const fd=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pd(s,e,r,n){md(s,e,void 0,n);for(const i in e.attrs)s.setAttribute(fd.has(i)?i:ha(i),e.attrs[i])}function wa(s,e){const{style:r}=s,n={};for(const i in r)($e(r[i])||e.style&&$e(e.style[i])||id(i,s))&&(n[i]=r[i]);return n}function gd(s,e){const r=wa(s,e);for(const n in s)if($e(s[n])||$e(e[n])){const i=ar.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[i]=s[n]}return r}function ja(s,e,r,n={},i={}){return typeof e=="function"&&(e=e(r!==void 0?r:s.custom,n,i)),typeof e=="string"&&(e=s.variants&&s.variants[e]),typeof e=="function"&&(e=e(r!==void 0?r:s.custom,n,i)),e}function xd(s){const e=p.useRef(null);return e.current===null&&(e.current=s()),e.current}const Br=s=>Array.isArray(s),ig=s=>!!(s&&typeof s=="object"&&s.mix&&s.toValue),ag=s=>Br(s)?s[s.length-1]||0:s;function Or(s){const e=$e(s)?s.get():s;return ig(e)?e.toValue():e}function og({scrapeMotionValuesFromProps:s,createRenderState:e,onMount:r},n,i,a){const o={latestValues:lg(n,i,a,s),renderState:e()};return r&&(o.mount=l=>r(n,l,o)),o}const yd=s=>(e,r)=>{const n=p.useContext(nn),i=p.useContext(an),a=()=>og(s,e,n,i);return r?a():xd(a)};function lg(s,e,r,n){const i={},a=n(s,{});for(const m in a)i[m]=Or(a[m]);let{initial:o,animate:l}=s;const d=cn(s),c=rd(s);e&&c&&!d&&s.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?l:o;return h&&typeof h!="boolean"&&!ln(h)&&(Array.isArray(h)?h:[h]).forEach(f=>{const y=ja(s,f);if(!y)return;const{transitionEnd:x,transition:g,...v}=y;for(const w in v){let b=v[w];if(Array.isArray(b)){const _=u?b.length-1:0;b=b[_]}b!==null&&(i[w]=b)}for(const w in x)i[w]=x[w]}),i}const me=s=>s;class xo{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function cg(s){let e=new xo,r=new xo,n=0,i=!1,a=!1;const o=new WeakSet,l={schedule:(d,c=!1,u=!1)=>{const h=u&&i,m=h?e:r;return c&&o.add(d),m.add(d)&&h&&i&&(n=e.order.length),d},cancel:d=>{r.remove(d),o.delete(d)},process:d=>{if(i){a=!0;return}if(i=!0,[e,r]=[r,e],r.clear(),n=e.order.length,n)for(let c=0;c<n;c++){const u=e.order[c];u(d),o.has(u)&&(l.schedule(u),s())}i=!1,a&&(a=!1,l.process(d))}};return l}const yr=["prepare","read","update","preRender","render","postRender"],dg=40;function ug(s,e){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=yr.reduce((h,m)=>(h[m]=cg(()=>r=!0),h),{}),o=h=>a[h].process(i),l=()=>{const h=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(h-i.timestamp,dg),1),i.timestamp=h,i.isProcessing=!0,yr.forEach(o),i.isProcessing=!1,r&&e&&(n=!1,s(l))},d=()=>{r=!0,n=!0,i.isProcessing||s(l)};return{schedule:yr.reduce((h,m)=>{const f=a[m];return h[m]=(y,x=!1,g=!1)=>(r||d(),f.schedule(y,x,g)),h},{}),cancel:h=>yr.forEach(m=>a[m].cancel(h)),state:i,steps:a}}const{schedule:ce,cancel:xt,state:ke,steps:An}=ug(typeof requestAnimationFrame<"u"?requestAnimationFrame:me,!0),hg={useVisualState:yd({scrapeMotionValuesFromProps:gd,createRenderState:hd,onMount:(s,e,{renderState:r,latestValues:n})=>{ce.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),ce.render(()=>{ba(r,n,{enableHardwareAcceleration:!1},va(e.tagName),s.transformTemplate),pd(e,r)})}})},mg={useVisualState:yd({scrapeMotionValuesFromProps:wa,createRenderState:ya})};function fg(s,{forwardMotionProps:e=!1},r,n){return{...ga(s)?hg:mg,preloadedFeatures:r,useRender:ng(e),createVisualElement:n,Component:s}}function ht(s,e,r,n={passive:!0}){return s.addEventListener(e,r,n),()=>s.removeEventListener(e,r)}const bd=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1;function un(s,e="page"){return{point:{x:s[e+"X"],y:s[e+"Y"]}}}const pg=s=>e=>bd(e)&&s(e,un(e));function mt(s,e,r,n){return ht(s,e,pg(r),n)}const gg=(s,e)=>r=>e(s(r)),St=(...s)=>s.reduce(gg);function vd(s){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=s,r):!1}}const yo=vd("dragHorizontal"),bo=vd("dragVertical");function wd(s){let e=!1;if(s==="y")e=bo();else if(s==="x")e=yo();else{const r=yo(),n=bo();r&&n?e=()=>{r(),n()}:(r&&r(),n&&n())}return e}function jd(){const s=wd(!0);return s?(s(),!1):!0}class It{constructor(e){this.isMounted=!1,this.node=e}update(){}}function vo(s,e){const r="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End"),i=(a,o)=>{if(a.pointerType==="touch"||jd())return;const l=s.getProps();s.animationState&&l.whileHover&&s.animationState.setActive("whileHover",e),l[n]&&ce.update(()=>l[n](a,o))};return mt(s.current,r,i,{passive:!s.getProps()[n]})}class xg extends It{mount(){this.unmount=St(vo(this.node,!0),vo(this.node,!1))}unmount(){}}class yg extends It{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=St(ht(this.node.current,"focus",()=>this.onFocus()),ht(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Nd=(s,e)=>e?s===e?!0:Nd(s,e.parentElement):!1;function Dn(s,e){if(!e)return;const r=new PointerEvent("pointer"+s);e(r,un(r))}class bg extends It{constructor(){super(...arguments),this.removeStartListeners=me,this.removeEndListeners=me,this.removeAccessibleListeners=me,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),a=mt(window,"pointerup",(l,d)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps();ce.update(()=>{!h&&!Nd(this.node.current,l.target)?u&&u(l,d):c&&c(l,d)})},{passive:!(n.onTap||n.onPointerUp)}),o=mt(window,"pointercancel",(l,d)=>this.cancelPress(l,d),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=St(a,o),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=a=>{if(a.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Dn("up",(d,c)=>{const{onTap:u}=this.node.getProps();u&&ce.update(()=>u(d,c))})};this.removeEndListeners(),this.removeEndListeners=ht(this.node.current,"keyup",o),Dn("down",(l,d)=>{this.startPress(l,d)})},r=ht(this.node.current,"keydown",e),n=()=>{this.isPressing&&Dn("cancel",(a,o)=>this.cancelPress(a,o))},i=ht(this.node.current,"blur",n);this.removeAccessibleListeners=St(r,i)}}startPress(e,r){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&ce.update(()=>n(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!jd()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&ce.update(()=>n(e,r))}mount(){const e=this.node.getProps(),r=mt(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=ht(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=St(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Ni=new WeakMap,In=new WeakMap,vg=s=>{const e=Ni.get(s.target);e&&e(s)},wg=s=>{s.forEach(vg)};function jg({root:s,...e}){const r=s||document;In.has(r)||In.set(r,{});const n=In.get(r),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(wg,{root:s,...e})),n[i]}function Ng(s,e,r){const n=jg(e);return Ni.set(s,r),n.observe(s),()=>{Ni.delete(s),n.unobserve(s)}}const _g={some:0,all:1};class kg extends It{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:a}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:_g[i]},l=d=>{const{isIntersecting:c}=d;if(this.isInView===c||(this.isInView=c,a&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=c?u:h;m&&m(d)};return Ng(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(Sg(e,r))&&this.startObserver()}unmount(){}}function Sg({viewport:s={}},{viewport:e={}}={}){return r=>s[r]!==e[r]}const Cg={inView:{Feature:kg},tap:{Feature:bg},focus:{Feature:yg},hover:{Feature:xg}};function _d(s,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==s.length)return!1;for(let n=0;n<r;n++)if(e[n]!==s[n])return!1;return!0}function Tg(s){const e={};return s.values.forEach((r,n)=>e[n]=r.get()),e}function Eg(s){const e={};return s.values.forEach((r,n)=>e[n]=r.getVelocity()),e}function hn(s,e,r){const n=s.getProps();return ja(n,e,r!==void 0?r:n.custom,Tg(s),Eg(s))}let Pg=me,Na=me;const Ct=s=>s*1e3,ft=s=>s/1e3,Ag={current:!1},kd=s=>Array.isArray(s)&&typeof s[0]=="number";function Sd(s){return!!(!s||typeof s=="string"&&Cd[s]||kd(s)||Array.isArray(s)&&s.every(Sd))}const Rs=([s,e,r,n])=>`cubic-bezier(${s}, ${e}, ${r}, ${n})`,Cd={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Rs([0,.65,.55,1]),circOut:Rs([.55,0,1,.45]),backIn:Rs([.31,.01,.66,-.59]),backOut:Rs([.33,1.53,.69,.99])};function Td(s){if(s)return kd(s)?Rs(s):Array.isArray(s)?s.map(Td):Cd[s]}function Dg(s,e,r,{delay:n=0,duration:i,repeat:a=0,repeatType:o="loop",ease:l,times:d}={}){const c={[e]:r};d&&(c.offset=d);const u=Td(l);return Array.isArray(u)&&(c.easing=u),s.animate(c,{delay:n,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}function Ig(s,{repeat:e,repeatType:r="loop"}){const n=e&&r!=="loop"&&e%2===1?0:s.length-1;return s[n]}const Ed=(s,e,r)=>(((1-3*r+3*e)*s+(3*r-6*e))*s+3*e)*s,Og=1e-7,Lg=12;function Rg(s,e,r,n,i){let a,o,l=0;do o=e+(r-e)/2,a=Ed(o,n,i)-s,a>0?r=o:e=o;while(Math.abs(a)>Og&&++l<Lg);return o}function cr(s,e,r,n){if(s===e&&r===n)return me;const i=a=>Rg(a,0,1,s,r);return a=>a===0||a===1?a:Ed(i(a),e,n)}const Mg=cr(.42,0,1,1),$g=cr(0,0,.58,1),Pd=cr(.42,0,.58,1),Fg=s=>Array.isArray(s)&&typeof s[0]!="number",Ad=s=>e=>e<=.5?s(2*e)/2:(2-s(2*(1-e)))/2,Dd=s=>e=>1-s(1-e),_a=s=>1-Math.sin(Math.acos(s)),Id=Dd(_a),Ug=Ad(_a),Od=cr(.33,1.53,.69,.99),ka=Dd(Od),Vg=Ad(ka),zg=s=>(s*=2)<1?.5*ka(s):.5*(2-Math.pow(2,-10*(s-1))),qg={linear:me,easeIn:Mg,easeInOut:Pd,easeOut:$g,circIn:_a,circInOut:Ug,circOut:Id,backIn:ka,backInOut:Vg,backOut:Od,anticipate:zg},wo=s=>{if(Array.isArray(s)){Na(s.length===4);const[e,r,n,i]=s;return cr(e,r,n,i)}else if(typeof s=="string")return qg[s];return s},Sa=(s,e)=>r=>!!(or(r)&&Bp.test(r)&&r.startsWith(s)||e&&Object.prototype.hasOwnProperty.call(r,e)),Ld=(s,e,r)=>n=>{if(!or(n))return n;const[i,a,o,l]=n.match(dn);return{[s]:parseFloat(i),[e]:parseFloat(a),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Bg=s=>Pt(0,255,s),On={...Zt,transform:s=>Math.round(Bg(s))},Bt={test:Sa("rgb","red"),parse:Ld("red","green","blue"),transform:({red:s,green:e,blue:r,alpha:n=1})=>"rgba("+On.transform(s)+", "+On.transform(e)+", "+On.transform(r)+", "+Fs($s.transform(n))+")"};function Gg(s){let e="",r="",n="",i="";return s.length>5?(e=s.substring(1,3),r=s.substring(3,5),n=s.substring(5,7),i=s.substring(7,9)):(e=s.substring(1,2),r=s.substring(2,3),n=s.substring(3,4),i=s.substring(4,5),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const _i={test:Sa("#"),parse:Gg,transform:Bt.transform},cs={test:Sa("hsl","hue"),parse:Ld("hue","saturation","lightness"),transform:({hue:s,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(s)+", "+nt.transform(Fs(e))+", "+nt.transform(Fs(r))+", "+Fs($s.transform(n))+")"},Pe={test:s=>Bt.test(s)||_i.test(s)||cs.test(s),parse:s=>Bt.test(s)?Bt.parse(s):cs.test(s)?cs.parse(s):_i.parse(s),transform:s=>or(s)?s:s.hasOwnProperty("red")?Bt.transform(s):cs.transform(s)},ue=(s,e,r)=>-r*s+r*e+s;function Ln(s,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?s+(e-s)*6*r:r<1/2?e:r<2/3?s+(e-s)*(2/3-r)*6:s}function Hg({hue:s,saturation:e,lightness:r,alpha:n}){s/=360,e/=100,r/=100;let i=0,a=0,o=0;if(!e)i=a=o=r;else{const l=r<.5?r*(1+e):r+e-r*e,d=2*r-l;i=Ln(d,l,s+1/3),a=Ln(d,l,s),o=Ln(d,l,s-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:n}}const Rn=(s,e,r)=>{const n=s*s;return Math.sqrt(Math.max(0,r*(e*e-n)+n))},Wg=[_i,Bt,cs],Kg=s=>Wg.find(e=>e.test(s));function jo(s){const e=Kg(s);let r=e.parse(s);return e===cs&&(r=Hg(r)),r}const Rd=(s,e)=>{const r=jo(s),n=jo(e),i={...r};return a=>(i.red=Rn(r.red,n.red,a),i.green=Rn(r.green,n.green,a),i.blue=Rn(r.blue,n.blue,a),i.alpha=ue(r.alpha,n.alpha,a),Bt.transform(i))};function Xg(s){var e,r;return isNaN(s)&&or(s)&&(((e=s.match(dn))===null||e===void 0?void 0:e.length)||0)+(((r=s.match(ld))===null||r===void 0?void 0:r.length)||0)>0}const Md={regex:zp,countKey:"Vars",token:"${v}",parse:me},$d={regex:ld,countKey:"Colors",token:"${c}",parse:Pe.parse},Fd={regex:dn,countKey:"Numbers",token:"${n}",parse:Zt.parse};function Mn(s,{regex:e,countKey:r,token:n,parse:i}){const a=s.tokenised.match(e);a&&(s["num"+r]=a.length,s.tokenised=s.tokenised.replace(e,n),s.values.push(...a.map(i)))}function Gr(s){const e=s.toString(),r={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Mn(r,Md),Mn(r,$d),Mn(r,Fd),r}function Ud(s){return Gr(s).values}function Vd(s){const{values:e,numColors:r,numVars:n,tokenised:i}=Gr(s),a=e.length;return o=>{let l=i;for(let d=0;d<a;d++)d<n?l=l.replace(Md.token,o[d]):d<n+r?l=l.replace($d.token,Pe.transform(o[d])):l=l.replace(Fd.token,Fs(o[d]));return l}}const Jg=s=>typeof s=="number"?0:s;function Yg(s){const e=Ud(s);return Vd(s)(e.map(Jg))}const At={test:Xg,parse:Ud,createTransformer:Vd,getAnimatableNone:Yg},zd=(s,e)=>r=>`${r>0?e:s}`;function qd(s,e){return typeof s=="number"?r=>ue(s,e,r):Pe.test(s)?Rd(s,e):s.startsWith("var(")?zd(s,e):Gd(s,e)}const Bd=(s,e)=>{const r=[...s],n=r.length,i=s.map((a,o)=>qd(a,e[o]));return a=>{for(let o=0;o<n;o++)r[o]=i[o](a);return r}},Qg=(s,e)=>{const r={...s,...e},n={};for(const i in r)s[i]!==void 0&&e[i]!==void 0&&(n[i]=qd(s[i],e[i]));return i=>{for(const a in n)r[a]=n[a](i);return r}},Gd=(s,e)=>{const r=At.createTransformer(e),n=Gr(s),i=Gr(e);return n.numVars===i.numVars&&n.numColors===i.numColors&&n.numNumbers>=i.numNumbers?St(Bd(n.values,i.values),r):zd(s,e)},er=(s,e,r)=>{const n=e-s;return n===0?1:(r-s)/n},No=(s,e)=>r=>ue(s,e,r);function Zg(s){return typeof s=="number"?No:typeof s=="string"?Pe.test(s)?Rd:Gd:Array.isArray(s)?Bd:typeof s=="object"?Qg:No}function ex(s,e,r){const n=[],i=r||Zg(s[0]),a=s.length-1;for(let o=0;o<a;o++){let l=i(s[o],s[o+1]);if(e){const d=Array.isArray(e)?e[o]||me:e;l=St(d,l)}n.push(l)}return n}function Hd(s,e,{clamp:r=!0,ease:n,mixer:i}={}){const a=s.length;if(Na(a===e.length),a===1)return()=>e[0];s[0]>s[a-1]&&(s=[...s].reverse(),e=[...e].reverse());const o=ex(e,n,i),l=o.length,d=c=>{let u=0;if(l>1)for(;u<s.length-2&&!(c<s[u+1]);u++);const h=er(s[u],s[u+1],c);return o[u](h)};return r?c=>d(Pt(s[0],s[a-1],c)):d}function tx(s,e){const r=s[s.length-1];for(let n=1;n<=e;n++){const i=er(0,e,n);s.push(ue(r,1,i))}}function sx(s){const e=[0];return tx(e,s.length-1),e}function rx(s,e){return s.map(r=>r*e)}function nx(s,e){return s.map(()=>e||Pd).splice(0,s.length-1)}function Hr({duration:s=300,keyframes:e,times:r,ease:n="easeInOut"}){const i=Fg(n)?n.map(wo):wo(n),a={done:!1,value:e[0]},o=rx(r&&r.length===e.length?r:sx(e),s),l=Hd(o,e,{ease:Array.isArray(i)?i:nx(e,i)});return{calculatedDuration:s,next:d=>(a.value=l(d),a.done=d>=s,a)}}function Wd(s,e){return e?s*(1e3/e):0}const ix=5;function Kd(s,e,r){const n=Math.max(e-ix,0);return Wd(r-s(n),e-n)}const $n=.001,ax=.01,_o=10,ox=.05,lx=1;function cx({duration:s=800,bounce:e=.25,velocity:r=0,mass:n=1}){let i,a;Pg(s<=Ct(_o));let o=1-e;o=Pt(ox,lx,o),s=Pt(ax,_o,ft(s)),o<1?(i=c=>{const u=c*o,h=u*s,m=u-r,f=ki(c,o),y=Math.exp(-h);return $n-m/f*y},a=c=>{const h=c*o*s,m=h*r+r,f=Math.pow(o,2)*Math.pow(c,2)*s,y=Math.exp(-h),x=ki(Math.pow(c,2),o);return(-i(c)+$n>0?-1:1)*((m-f)*y)/x}):(i=c=>{const u=Math.exp(-c*s),h=(c-r)*s+1;return-$n+u*h},a=c=>{const u=Math.exp(-c*s),h=(r-c)*(s*s);return u*h});const l=5/s,d=ux(i,a,l);if(s=Ct(s),isNaN(d))return{stiffness:100,damping:10,duration:s};{const c=Math.pow(d,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:s}}}const dx=12;function ux(s,e,r){let n=r;for(let i=1;i<dx;i++)n=n-s(n)/e(n);return n}function ki(s,e){return s*Math.sqrt(1-e*e)}const hx=["duration","bounce"],mx=["stiffness","damping","mass"];function ko(s,e){return e.some(r=>s[r]!==void 0)}function fx(s){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...s};if(!ko(s,mx)&&ko(s,hx)){const r=cx(s);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function Xd({keyframes:s,restDelta:e,restSpeed:r,...n}){const i=s[0],a=s[s.length-1],o={done:!1,value:i},{stiffness:l,damping:d,mass:c,duration:u,velocity:h,isResolvedFromDuration:m}=fx({...n,velocity:-ft(n.velocity||0)}),f=h||0,y=d/(2*Math.sqrt(l*c)),x=a-i,g=ft(Math.sqrt(l/c)),v=Math.abs(x)<5;r||(r=v?.01:2),e||(e=v?.005:.5);let w;if(y<1){const b=ki(g,y);w=_=>{const N=Math.exp(-y*g*_);return a-N*((f+y*g*x)/b*Math.sin(b*_)+x*Math.cos(b*_))}}else if(y===1)w=b=>a-Math.exp(-g*b)*(x+(f+g*x)*b);else{const b=g*Math.sqrt(y*y-1);w=_=>{const N=Math.exp(-y*g*_),k=Math.min(b*_,300);return a-N*((f+y*g*x)*Math.sinh(k)+b*x*Math.cosh(k))/b}}return{calculatedDuration:m&&u||null,next:b=>{const _=w(b);if(m)o.done=b>=u;else{let N=f;b!==0&&(y<1?N=Kd(w,b,_):N=0);const k=Math.abs(N)<=r,j=Math.abs(a-_)<=e;o.done=k&&j}return o.value=o.done?a:_,o}}}function So({keyframes:s,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:d,restDelta:c=.5,restSpeed:u}){const h=s[0],m={done:!1,value:h},f=T=>l!==void 0&&T<l||d!==void 0&&T>d,y=T=>l===void 0?d:d===void 0||Math.abs(l-T)<Math.abs(d-T)?l:d;let x=r*e;const g=h+x,v=o===void 0?g:o(g);v!==g&&(x=v-h);const w=T=>-x*Math.exp(-T/n),b=T=>v+w(T),_=T=>{const M=w(T),B=b(T);m.done=Math.abs(M)<=c,m.value=m.done?v:B};let N,k;const j=T=>{f(m.value)&&(N=T,k=Xd({keyframes:[m.value,y(m.value)],velocity:Kd(b,T,m.value),damping:i,stiffness:a,restDelta:c,restSpeed:u}))};return j(0),{calculatedDuration:null,next:T=>{let M=!1;return!k&&N===void 0&&(M=!0,_(T),j(T)),N!==void 0&&T>N?k.next(T-N):(!M&&_(T),m)}}}const px=s=>{const e=({timestamp:r})=>s(r);return{start:()=>ce.update(e,!0),stop:()=>xt(e),now:()=>ke.isProcessing?ke.timestamp:performance.now()}},Co=2e4;function To(s){let e=0;const r=50;let n=s.next(e);for(;!n.done&&e<Co;)e+=r,n=s.next(e);return e>=Co?1/0:e}const gx={decay:So,inertia:So,tween:Hr,keyframes:Hr,spring:Xd};function Wr({autoplay:s=!0,delay:e=0,driver:r=px,keyframes:n,type:i="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",onPlay:d,onStop:c,onComplete:u,onUpdate:h,...m}){let f=1,y=!1,x,g;const v=()=>{g=new Promise(I=>{x=I})};v();let w;const b=gx[i]||Hr;let _;b!==Hr&&typeof n[0]!="number"&&(_=Hd([0,100],n,{clamp:!1}),n=[0,100]);const N=b({...m,keyframes:n});let k;l==="mirror"&&(k=b({...m,keyframes:[...n].reverse(),velocity:-(m.velocity||0)}));let j="idle",T=null,M=null,B=null;N.calculatedDuration===null&&a&&(N.calculatedDuration=To(N));const{calculatedDuration:W}=N;let C=1/0,z=1/0;W!==null&&(C=W+o,z=C*(a+1)-o);let R=0;const $=I=>{if(M===null)return;f>0&&(M=Math.min(M,I)),f<0&&(M=Math.min(I-z/f,M)),T!==null?R=T:R=Math.round(I-M)*f;const O=R-e*(f>=0?1:-1),D=f>=0?O<0:O>z;R=Math.max(O,0),j==="finished"&&T===null&&(R=z);let q=R,K=N;if(a){const pe=Math.min(R,z)/C;let ze=Math.floor(pe),lt=pe%1;!lt&&pe>=1&&(lt=1),lt===1&&ze--,ze=Math.min(ze,a+1),!!(ze%2)&&(l==="reverse"?(lt=1-lt,o&&(lt-=o/C)):l==="mirror"&&(K=k)),q=Pt(0,1,lt)*C}const H=D?{done:!1,value:n[0]}:K.next(q);_&&(H.value=_(H.value));let{done:J}=H;!D&&W!==null&&(J=f>=0?R>=z:R<=0);const Ne=T===null&&(j==="finished"||j==="running"&&J);return h&&h(H.value),Ne&&G(),H},P=()=>{w&&w.stop(),w=void 0},U=()=>{j="idle",P(),x(),v(),M=B=null},G=()=>{j="finished",u&&u(),P(),x()},F=()=>{if(y)return;w||(w=r($));const I=w.now();d&&d(),T!==null?M=I-T:(!M||j==="finished")&&(M=I),j==="finished"&&v(),B=M,T=null,j="running",w.start()};s&&F();const A={then(I,O){return g.then(I,O)},get time(){return ft(R)},set time(I){I=Ct(I),R=I,T!==null||!w||f===0?T=I:M=w.now()-I/f},get duration(){const I=N.calculatedDuration===null?To(N):N.calculatedDuration;return ft(I)},get speed(){return f},set speed(I){I===f||!w||(f=I,A.time=ft(R))},get state(){return j},play:F,pause:()=>{j="paused",T=R},stop:()=>{y=!0,j!=="idle"&&(j="idle",c&&c(),U())},cancel:()=>{B!==null&&$(B),U()},complete:()=>{j="finished"},sample:I=>(M=0,$(I))};return A}function xx(s){let e;return()=>(e===void 0&&(e=s()),e)}const yx=xx(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),bx=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),br=10,vx=2e4,wx=(s,e)=>e.type==="spring"||s==="backgroundColor"||!Sd(e.ease);function jx(s,e,{onUpdate:r,onComplete:n,...i}){if(!(yx()&&bx.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,l,d,c=!1;const u=()=>{d=new Promise(b=>{l=b})};u();let{keyframes:h,duration:m=300,ease:f,times:y}=i;if(wx(e,i)){const b=Wr({...i,repeat:0,delay:0});let _={done:!1,value:h[0]};const N=[];let k=0;for(;!_.done&&k<vx;)_=b.sample(k),N.push(_.value),k+=br;y=void 0,h=N,m=k-br,f="linear"}const x=Dg(s.owner.current,e,h,{...i,duration:m,ease:f,times:y}),g=()=>{c=!1,x.cancel()},v=()=>{c=!0,ce.update(g),l(),u()};return x.onfinish=()=>{c||(s.set(Ig(h,i)),n&&n(),v())},{then(b,_){return d.then(b,_)},attachTimeline(b){return x.timeline=b,x.onfinish=null,me},get time(){return ft(x.currentTime||0)},set time(b){x.currentTime=Ct(b)},get speed(){return x.playbackRate},set speed(b){x.playbackRate=b},get duration(){return ft(m)},play:()=>{o||(x.play(),xt(g))},pause:()=>x.pause(),stop:()=>{if(o=!0,x.playState==="idle")return;const{currentTime:b}=x;if(b){const _=Wr({...i,autoplay:!1});s.setWithVelocity(_.sample(b-br).value,_.sample(b).value,br)}v()},complete:()=>{c||x.finish()},cancel:v}}function Nx({keyframes:s,delay:e,onUpdate:r,onComplete:n}){const i=()=>(r&&r(s[s.length-1]),n&&n(),{time:0,speed:1,duration:0,play:me,pause:me,stop:me,then:a=>(a(),Promise.resolve()),cancel:me,complete:me});return e?Wr({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const _x={type:"spring",stiffness:500,damping:25,restSpeed:10},kx=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),Sx={type:"keyframes",duration:.8},Cx={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Tx=(s,{keyframes:e})=>e.length>2?Sx:Qt.has(s)?s.startsWith("scale")?kx(e[1]):_x:Cx,Si=(s,e)=>s==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(At.test(e)||e==="0")&&!e.startsWith("url(")),Ex=new Set(["brightness","contrast","saturate","opacity"]);function Px(s){const[e,r]=s.slice(0,-1).split("(");if(e==="drop-shadow")return s;const[n]=r.match(dn)||[];if(!n)return s;const i=r.replace(n,"");let a=Ex.has(e)?1:0;return n!==r&&(a*=100),e+"("+a+i+")"}const Ax=/([a-z-]*)\(.*?\)/g,Ci={...At,getAnimatableNone:s=>{const e=s.match(Ax);return e?e.map(Px).join(" "):s}},Dx={...cd,color:Pe,backgroundColor:Pe,outlineColor:Pe,fill:Pe,stroke:Pe,borderColor:Pe,borderTopColor:Pe,borderRightColor:Pe,borderBottomColor:Pe,borderLeftColor:Pe,filter:Ci,WebkitFilter:Ci},Ca=s=>Dx[s];function Jd(s,e){let r=Ca(s);return r!==Ci&&(r=At),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const Yd=s=>/^0[^.\s]+$/.test(s);function Ix(s){if(typeof s=="number")return s===0;if(s!==null)return s==="none"||s==="0"||Yd(s)}function Ox(s,e,r,n){const i=Si(e,r);let a;Array.isArray(r)?a=[...r]:a=[null,r];const o=n.from!==void 0?n.from:s.get();let l;const d=[];for(let c=0;c<a.length;c++)a[c]===null&&(a[c]=c===0?o:a[c-1]),Ix(a[c])&&d.push(c),typeof a[c]=="string"&&a[c]!=="none"&&a[c]!=="0"&&(l=a[c]);if(i&&d.length&&l)for(let c=0;c<d.length;c++){const u=d[c];a[u]=Jd(e,l)}return a}function Lx({when:s,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:d,elapsed:c,...u}){return!!Object.keys(u).length}function Ta(s,e){return s[e]||s.default||s}const Rx={skipAnimations:!1},Ea=(s,e,r,n={})=>i=>{const a=Ta(n,s)||{},o=a.delay||n.delay||0;let{elapsed:l=0}=n;l=l-Ct(o);const d=Ox(e,s,r,a),c=d[0],u=d[d.length-1],h=Si(s,c),m=Si(s,u);let f={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...a,delay:-l,onUpdate:y=>{e.set(y),a.onUpdate&&a.onUpdate(y)},onComplete:()=>{i(),a.onComplete&&a.onComplete()}};if(Lx(a)||(f={...f,...Tx(s,f)}),f.duration&&(f.duration=Ct(f.duration)),f.repeatDelay&&(f.repeatDelay=Ct(f.repeatDelay)),!h||!m||Ag.current||a.type===!1||Rx.skipAnimations)return Nx(f);if(!n.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=jx(e,s,f);if(y)return y}return Wr(f)};function Kr(s){return!!($e(s)&&s.add)}const Qd=s=>/^\-?\d*\.?\d+$/.test(s);function Pa(s,e){s.indexOf(e)===-1&&s.push(e)}function Aa(s,e){const r=s.indexOf(e);r>-1&&s.splice(r,1)}class Da{constructor(){this.subscriptions=[]}add(e){return Pa(this.subscriptions,e),()=>Aa(this.subscriptions,e)}notify(e,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,n);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Mx=s=>!isNaN(parseFloat(s));class $x{constructor(e,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,i=!0)=>{this.prev=this.current,this.current=n;const{delta:a,timestamp:o}=ke;this.lastUpdated!==o&&(this.timeDelta=a,this.lastUpdated=o,ce.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ce.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=Mx(this.current),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Da);const n=this.events[e].add(r);return e==="change"?()=>{n(),ce.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Wd(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ws(s,e){return new $x(s,e)}const Zd=s=>e=>e.test(s),Fx={test:s=>s==="auto",parse:s=>s},eu=[Zt,X,nt,vt,Hp,Gp,Fx],Ds=s=>eu.find(Zd(s)),Ux=[...eu,Pe,At],Vx=s=>Ux.find(Zd(s));function zx(s,e,r){s.hasValue(e)?s.getValue(e).set(r):s.addValue(e,ws(r))}function qx(s,e){const r=hn(s,e);let{transitionEnd:n={},transition:i={},...a}=r?s.makeTargetAnimatable(r,!1):{};a={...a,...n};for(const o in a){const l=ag(a[o]);zx(s,o,l)}}function Bx(s,e,r){var n,i;const a=Object.keys(e).filter(l=>!s.hasValue(l)),o=a.length;if(o)for(let l=0;l<o;l++){const d=a[l],c=e[d];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(i=(n=r[d])!==null&&n!==void 0?n:s.readValue(d))!==null&&i!==void 0?i:e[d]),u!=null&&(typeof u=="string"&&(Qd(u)||Yd(u))?u=parseFloat(u):!Vx(u)&&At.test(c)&&(u=Jd(d,c)),s.addValue(d,ws(u,{owner:s})),r[d]===void 0&&(r[d]=u),u!==null&&s.setBaseTarget(d,u))}}function Gx(s,e){return e?(e[s]||e.default||e).from:void 0}function Hx(s,e,r){const n={};for(const i in s){const a=Gx(i,e);if(a!==void 0)n[i]=a;else{const o=r.getValue(i);o&&(n[i]=o.get())}}return n}function Wx({protectedKeys:s,needsAnimating:e},r){const n=s.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function Kx(s,e){const r=s.get();if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(e[n]!==r)return!0}else return r!==e}function tu(s,e,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:a=s.getDefaultTransition(),transitionEnd:o,...l}=s.makeTargetAnimatable(e);const d=s.getValue("willChange");n&&(a=n);const c=[],u=i&&s.animationState&&s.animationState.getState()[i];for(const h in l){const m=s.getValue(h),f=l[h];if(!m||f===void 0||u&&Wx(u,h))continue;const y={delay:r,elapsed:0,...Ta(a||{},h)};if(window.HandoffAppearAnimations){const v=s.getProps()[sd];if(v){const w=window.HandoffAppearAnimations(v,h,m,ce);w!==null&&(y.elapsed=w,y.isHandoff=!0)}}let x=!y.isHandoff&&!Kx(m,f);if(y.type==="spring"&&(m.getVelocity()||y.velocity)&&(x=!1),m.animation&&(x=!1),x)continue;m.start(Ea(h,m,f,s.shouldReduceMotion&&Qt.has(h)?{type:!1}:y));const g=m.animation;Kr(d)&&(d.add(h),g.then(()=>d.remove(h))),c.push(g)}return o&&Promise.all(c).then(()=>{o&&qx(s,o)}),c}function Ti(s,e,r={}){const n=hn(s,e,r.custom);let{transition:i=s.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);const a=n?()=>Promise.all(tu(s,n,r)):()=>Promise.resolve(),o=s.variantChildren&&s.variantChildren.size?(d=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:h}=i;return Xx(s,e,c+d,u,h,r)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,c]=l==="beforeChildren"?[a,o]:[o,a];return d().then(()=>c())}else return Promise.all([a(),o(r.delay)])}function Xx(s,e,r=0,n=0,i=1,a){const o=[],l=(s.variantChildren.size-1)*n,d=i===1?(c=0)=>c*n:(c=0)=>l-c*n;return Array.from(s.variantChildren).sort(Jx).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(Ti(c,e,{...a,delay:r+d(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Jx(s,e){return s.sortNodePosition(e)}function Yx(s,e,r={}){s.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(a=>Ti(s,a,r));n=Promise.all(i)}else if(typeof e=="string")n=Ti(s,e,r);else{const i=typeof e=="function"?hn(s,e,r.custom):e;n=Promise.all(tu(s,i,r))}return n.then(()=>s.notify("AnimationComplete",e))}const Qx=[...ma].reverse(),Zx=ma.length;function e0(s){return e=>Promise.all(e.map(({animation:r,options:n})=>Yx(s,r,n)))}function t0(s){let e=e0(s);const r=r0();let n=!0;const i=(d,c)=>{const u=hn(s,c);if(u){const{transition:h,transitionEnd:m,...f}=u;d={...d,...f,...m}}return d};function a(d){e=d(s)}function o(d,c){const u=s.getProps(),h=s.getVariantContext(!0)||{},m=[],f=new Set;let y={},x=1/0;for(let v=0;v<Zx;v++){const w=Qx[v],b=r[w],_=u[w]!==void 0?u[w]:h[w],N=Qs(_),k=w===c?b.isActive:null;k===!1&&(x=v);let j=_===h[w]&&_!==u[w]&&N;if(j&&n&&s.manuallyAnimateOnMount&&(j=!1),b.protectedKeys={...y},!b.isActive&&k===null||!_&&!b.prevProp||ln(_)||typeof _=="boolean")continue;let M=s0(b.prevProp,_)||w===c&&b.isActive&&!j&&N||v>x&&N,B=!1;const W=Array.isArray(_)?_:[_];let C=W.reduce(i,{});k===!1&&(C={});const{prevResolvedValues:z={}}=b,R={...z,...C},$=P=>{M=!0,f.has(P)&&(B=!0,f.delete(P)),b.needsAnimating[P]=!0};for(const P in R){const U=C[P],G=z[P];if(y.hasOwnProperty(P))continue;let F=!1;Br(U)&&Br(G)?F=!_d(U,G):F=U!==G,F?U!==void 0?$(P):f.add(P):U!==void 0&&f.has(P)?$(P):b.protectedKeys[P]=!0}b.prevProp=_,b.prevResolvedValues=C,b.isActive&&(y={...y,...C}),n&&s.blockInitialAnimation&&(M=!1),M&&(!j||B)&&m.push(...W.map(P=>({animation:P,options:{type:w,...d}})))}if(f.size){const v={};f.forEach(w=>{const b=s.getBaseTarget(w);b!==void 0&&(v[w]=b)}),m.push({animation:v})}let g=!!m.length;return n&&(u.initial===!1||u.initial===u.animate)&&!s.manuallyAnimateOnMount&&(g=!1),n=!1,g?e(m):Promise.resolve()}function l(d,c,u){var h;if(r[d].isActive===c)return Promise.resolve();(h=s.variantChildren)===null||h===void 0||h.forEach(f=>{var y;return(y=f.animationState)===null||y===void 0?void 0:y.setActive(d,c)}),r[d].isActive=c;const m=o(u,d);for(const f in r)r[f].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>r}}function s0(s,e){return typeof e=="string"?e!==s:Array.isArray(e)?!_d(e,s):!1}function Lt(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function r0(){return{animate:Lt(!0),whileInView:Lt(),whileHover:Lt(),whileTap:Lt(),whileDrag:Lt(),whileFocus:Lt(),exit:Lt()}}class n0 extends It{constructor(e){super(e),e.animationState||(e.animationState=t0(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ln(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let i0=0;class a0 extends It{constructor(){super(...arguments),this.id=i0++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const a=this.node.animationState.setActive("exit",!e,{custom:n??this.node.getProps().custom});r&&!e&&a.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const o0={animation:{Feature:n0},exit:{Feature:a0}},Eo=(s,e)=>Math.abs(s-e);function l0(s,e){const r=Eo(s.x,e.x),n=Eo(s.y,e.y);return Math.sqrt(r**2+n**2)}class su{constructor(e,r,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Un(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,f=l0(h.offset,{x:0,y:0})>=3;if(!m&&!f)return;const{point:y}=h,{timestamp:x}=ke;this.history.push({...y,timestamp:x});const{onStart:g,onMove:v}=this.handlers;m||(g&&g(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Fn(m,this.transformPagePoint),ce.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:f,onSessionEnd:y,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Un(h.type==="pointercancel"?this.lastMoveEventInfo:Fn(m,this.transformPagePoint),this.history);this.startEvent&&f&&f(h,g),y&&y(h,g)},!bd(e))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.contextWindow=i||window;const o=un(e),l=Fn(o,this.transformPagePoint),{point:d}=l,{timestamp:c}=ke;this.history=[{...d,timestamp:c}];const{onSessionStart:u}=r;u&&u(e,Un(l,this.history)),this.removeListeners=St(mt(this.contextWindow,"pointermove",this.handlePointerMove),mt(this.contextWindow,"pointerup",this.handlePointerUp),mt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),xt(this.updatePoint)}}function Fn(s,e){return e?{point:e(s.point)}:s}function Po(s,e){return{x:s.x-e.x,y:s.y-e.y}}function Un({point:s},e){return{point:s,delta:Po(s,ru(e)),offset:Po(s,c0(e)),velocity:d0(e,.1)}}function c0(s){return s[0]}function ru(s){return s[s.length-1]}function d0(s,e){if(s.length<2)return{x:0,y:0};let r=s.length-1,n=null;const i=ru(s);for(;r>=0&&(n=s[r],!(i.timestamp-n.timestamp>Ct(e)));)r--;if(!n)return{x:0,y:0};const a=ft(i.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ve(s){return s.max-s.min}function Ei(s,e=0,r=.01){return Math.abs(s-e)<=r}function Ao(s,e,r,n=.5){s.origin=n,s.originPoint=ue(e.min,e.max,s.origin),s.scale=Ve(r)/Ve(e),(Ei(s.scale,1,1e-4)||isNaN(s.scale))&&(s.scale=1),s.translate=ue(r.min,r.max,s.origin)-s.originPoint,(Ei(s.translate)||isNaN(s.translate))&&(s.translate=0)}function Us(s,e,r,n){Ao(s.x,e.x,r.x,n?n.originX:void 0),Ao(s.y,e.y,r.y,n?n.originY:void 0)}function Do(s,e,r){s.min=r.min+e.min,s.max=s.min+Ve(e)}function u0(s,e,r){Do(s.x,e.x,r.x),Do(s.y,e.y,r.y)}function Io(s,e,r){s.min=e.min-r.min,s.max=s.min+Ve(e)}function Vs(s,e,r){Io(s.x,e.x,r.x),Io(s.y,e.y,r.y)}function h0(s,{min:e,max:r},n){return e!==void 0&&s<e?s=n?ue(e,s,n.min):Math.max(s,e):r!==void 0&&s>r&&(s=n?ue(r,s,n.max):Math.min(s,r)),s}function Oo(s,e,r){return{min:e!==void 0?s.min+e:void 0,max:r!==void 0?s.max+r-(s.max-s.min):void 0}}function m0(s,{top:e,left:r,bottom:n,right:i}){return{x:Oo(s.x,r,i),y:Oo(s.y,e,n)}}function Lo(s,e){let r=e.min-s.min,n=e.max-s.max;return e.max-e.min<s.max-s.min&&([r,n]=[n,r]),{min:r,max:n}}function f0(s,e){return{x:Lo(s.x,e.x),y:Lo(s.y,e.y)}}function p0(s,e){let r=.5;const n=Ve(s),i=Ve(e);return i>n?r=er(e.min,e.max-n,s.min):n>i&&(r=er(s.min,s.max-i,e.min)),Pt(0,1,r)}function g0(s,e){const r={};return e.min!==void 0&&(r.min=e.min-s.min),e.max!==void 0&&(r.max=e.max-s.min),r}const Pi=.35;function x0(s=Pi){return s===!1?s=0:s===!0&&(s=Pi),{x:Ro(s,"left","right"),y:Ro(s,"top","bottom")}}function Ro(s,e,r){return{min:Mo(s,e),max:Mo(s,r)}}function Mo(s,e){return typeof s=="number"?s:s[e]||0}const $o=()=>({translate:0,scale:1,origin:0,originPoint:0}),ds=()=>({x:$o(),y:$o()}),Fo=()=>({min:0,max:0}),ye=()=>({x:Fo(),y:Fo()});function Ge(s){return[s("x"),s("y")]}function nu({top:s,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:s,max:n}}}function y0({x:s,y:e}){return{top:e.min,right:s.max,bottom:e.max,left:s.min}}function b0(s,e){if(!e)return s;const r=e({x:s.left,y:s.top}),n=e({x:s.right,y:s.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Vn(s){return s===void 0||s===1}function Ai({scale:s,scaleX:e,scaleY:r}){return!Vn(s)||!Vn(e)||!Vn(r)}function Mt(s){return Ai(s)||iu(s)||s.z||s.rotate||s.rotateX||s.rotateY}function iu(s){return Uo(s.x)||Uo(s.y)}function Uo(s){return s&&s!=="0%"}function Xr(s,e,r){const n=s-r,i=e*n;return r+i}function Vo(s,e,r,n,i){return i!==void 0&&(s=Xr(s,i,n)),Xr(s,r,n)+e}function Di(s,e=0,r=1,n,i){s.min=Vo(s.min,e,r,n,i),s.max=Vo(s.max,e,r,n,i)}function au(s,{x:e,y:r}){Di(s.x,e.translate,e.scale,e.originPoint),Di(s.y,r.translate,r.scale,r.originPoint)}function v0(s,e,r,n=!1){const i=r.length;if(!i)return;e.x=e.y=1;let a,o;for(let l=0;l<i;l++){a=r[l],o=a.projectionDelta;const d=a.instance;d&&d.style&&d.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&us(s,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,au(s,o)),n&&Mt(a.latestValues)&&us(s,a.latestValues))}e.x=zo(e.x),e.y=zo(e.y)}function zo(s){return Number.isInteger(s)||s>1.0000000000001||s<.999999999999?s:1}function jt(s,e){s.min=s.min+e,s.max=s.max+e}function qo(s,e,[r,n,i]){const a=e[i]!==void 0?e[i]:.5,o=ue(s.min,s.max,a);Di(s,e[r],e[n],o,e.scale)}const w0=["x","scaleX","originX"],j0=["y","scaleY","originY"];function us(s,e){qo(s.x,e,w0),qo(s.y,e,j0)}function ou(s,e){return nu(b0(s.getBoundingClientRect(),e))}function N0(s,e,r){const n=ou(s,r),{scroll:i}=e;return i&&(jt(n.x,i.offset.x),jt(n.y,i.offset.y)),n}const lu=({current:s})=>s?s.ownerDocument.defaultView:null,_0=new WeakMap;class k0{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ye(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(un(u,"page").point)},a=(u,h)=>{const{drag:m,dragPropagation:f,onDragStart:y}=this.getProps();if(m&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=wd(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ge(g=>{let v=this.getAxisMotionValue(g).get()||0;if(nt.test(v)){const{projection:w}=this.visualElement;if(w&&w.layout){const b=w.layout.layoutBox[g];b&&(v=Ve(b)*(parseFloat(v)/100))}}this.originPoint[g]=v}),y&&ce.update(()=>y(u,h),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:m,dragDirectionLock:f,onDirectionLock:y,onDrag:x}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:g}=h;if(f&&this.currentDirection===null){this.currentDirection=S0(g),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,g),this.updateAxis("y",h.point,g),this.visualElement.render(),x&&x(u,h)},l=(u,h)=>this.stop(u,h),d=()=>Ge(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new su(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:lu(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&ce.update(()=>a(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:i}=this.getProps();if(!n||!vr(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=h0(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;r&&ls(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=m0(i.layoutBox,r):this.constraints=!1,this.elastic=x0(n),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ge(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=g0(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!ls(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=N0(n,i.root,this.visualElement.getTransformPagePoint());let o=f0(i.layout.layoutBox,a);if(r){const l=r(y0(o));this.hasMutatedConstraints=!!l,l&&(o=nu(l))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},c=Ge(u=>{if(!vr(u,r,this.currentDirection))return;let h=d&&d[u]||{};o&&(h={min:0,max:0});const m=i?200:1e6,f=i?40:1e7,y={type:"inertia",velocity:n?e[u]:0,bounceStiffness:m,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(l)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return n.start(Ea(e,n,0,r))}stopAnimation(){Ge(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ge(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ge(r=>{const{drag:n}=this.getProps();if(!vr(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[r];a.set(e[r]-ue(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!ls(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ge(o=>{const l=this.getAxisMotionValue(o);if(l){const d=l.get();i[o]=p0({min:d,max:d},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ge(o=>{if(!vr(o,e,null))return;const l=this.getAxisMotionValue(o),{min:d,max:c}=this.constraints[o];l.set(ue(d,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;_0.set(this.visualElement,this);const e=this.visualElement.current,r=mt(e,"pointerdown",d=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();ls(d)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),n();const o=ht(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ge(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=d[u].translate,h.set(h.get()+d[u].translate))}),this.visualElement.render())});return()=>{o(),r(),a(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=Pi,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function vr(s,e,r){return(e===!0||e===s)&&(r===null||r===s)}function S0(s,e=10){let r=null;return Math.abs(s.y)>e?r="y":Math.abs(s.x)>e&&(r="x"),r}class C0 extends It{constructor(e){super(e),this.removeGroupControls=me,this.removeListeners=me,this.controls=new k0(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||me}unmount(){this.removeGroupControls(),this.removeListeners()}}const Bo=s=>(e,r)=>{s&&ce.update(()=>s(e,r))};class T0 extends It{constructor(){super(...arguments),this.removePointerDownListener=me}onPointerDown(e){this.session=new su(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:lu(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Bo(e),onStart:Bo(r),onMove:n,onEnd:(a,o)=>{delete this.session,i&&ce.update(()=>i(a,o))}}}mount(){this.removePointerDownListener=mt(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function E0(){const s=p.useContext(an);if(s===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:n}=s,i=p.useId();return p.useEffect(()=>n(i),[]),!e&&r?[!1,()=>r&&r(i)]:[!0]}const Lr={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Go(s,e){return e.max===e.min?0:s/(e.max-e.min)*100}const Is={correct:(s,e)=>{if(!e.target)return s;if(typeof s=="string")if(X.test(s))s=parseFloat(s);else return s;const r=Go(s,e.target.x),n=Go(s,e.target.y);return`${r}% ${n}%`}},P0={correct:(s,{treeScale:e,projectionDelta:r})=>{const n=s,i=At.parse(s);if(i.length>5)return n;const a=At.createTransformer(s),o=typeof i[0]!="number"?1:0,l=r.x.scale*e.x,d=r.y.scale*e.y;i[0+o]/=l,i[1+o]/=d;const c=ue(l,d,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),a(i)}};class A0 extends te.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=e;$p(D0),a&&(r.group&&r.group.add(a),n&&n.register&&i&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Lr.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:i,isPresent:a}=this.props,o=n.projection;return o&&(o.isPresent=a,i||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||ce.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function cu(s){const[e,r]=E0(),n=p.useContext(pa);return te.createElement(A0,{...s,layoutGroup:n,switchLayoutGroup:p.useContext(nd),isPresent:e,safeToRemove:r})}const D0={borderRadius:{...Is,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Is,borderTopRightRadius:Is,borderBottomLeftRadius:Is,borderBottomRightRadius:Is,boxShadow:P0},du=["TopLeft","TopRight","BottomLeft","BottomRight"],I0=du.length,Ho=s=>typeof s=="string"?parseFloat(s):s,Wo=s=>typeof s=="number"||X.test(s);function O0(s,e,r,n,i,a){i?(s.opacity=ue(0,r.opacity!==void 0?r.opacity:1,L0(n)),s.opacityExit=ue(e.opacity!==void 0?e.opacity:1,0,R0(n))):a&&(s.opacity=ue(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<I0;o++){const l=`border${du[o]}Radius`;let d=Ko(e,l),c=Ko(r,l);if(d===void 0&&c===void 0)continue;d||(d=0),c||(c=0),d===0||c===0||Wo(d)===Wo(c)?(s[l]=Math.max(ue(Ho(d),Ho(c),n),0),(nt.test(c)||nt.test(d))&&(s[l]+="%")):s[l]=c}(e.rotate||r.rotate)&&(s.rotate=ue(e.rotate||0,r.rotate||0,n))}function Ko(s,e){return s[e]!==void 0?s[e]:s.borderRadius}const L0=uu(0,.5,Id),R0=uu(.5,.95,me);function uu(s,e,r){return n=>n<s?0:n>e?1:r(er(s,e,n))}function Xo(s,e){s.min=e.min,s.max=e.max}function qe(s,e){Xo(s.x,e.x),Xo(s.y,e.y)}function Jo(s,e,r,n,i){return s-=e,s=Xr(s,1/r,n),i!==void 0&&(s=Xr(s,1/i,n)),s}function M0(s,e=0,r=1,n=.5,i,a=s,o=s){if(nt.test(e)&&(e=parseFloat(e),e=ue(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=ue(a.min,a.max,n);s===a&&(l-=e),s.min=Jo(s.min,e,r,l,i),s.max=Jo(s.max,e,r,l,i)}function Yo(s,e,[r,n,i],a,o){M0(s,e[r],e[n],e[i],e.scale,a,o)}const $0=["x","scaleX","originX"],F0=["y","scaleY","originY"];function Qo(s,e,r,n){Yo(s.x,e,$0,r?r.x:void 0,n?n.x:void 0),Yo(s.y,e,F0,r?r.y:void 0,n?n.y:void 0)}function Zo(s){return s.translate===0&&s.scale===1}function hu(s){return Zo(s.x)&&Zo(s.y)}function U0(s,e){return s.x.min===e.x.min&&s.x.max===e.x.max&&s.y.min===e.y.min&&s.y.max===e.y.max}function mu(s,e){return Math.round(s.x.min)===Math.round(e.x.min)&&Math.round(s.x.max)===Math.round(e.x.max)&&Math.round(s.y.min)===Math.round(e.y.min)&&Math.round(s.y.max)===Math.round(e.y.max)}function el(s){return Ve(s.x)/Ve(s.y)}class V0{constructor(){this.members=[]}add(e){Pa(this.members,e),e.scheduleRender()}remove(e){if(Aa(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tl(s,e,r){let n="";const i=s.x.translate/e.x,a=s.y.translate/e.y;if((i||a)&&(n=`translate3d(${i}px, ${a}px, 0) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{rotate:d,rotateX:c,rotateY:u}=r;d&&(n+=`rotate(${d}deg) `),c&&(n+=`rotateX(${c}deg) `),u&&(n+=`rotateY(${u}deg) `)}const o=s.x.scale*e.x,l=s.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const z0=(s,e)=>s.depth-e.depth;class q0{constructor(){this.children=[],this.isDirty=!1}add(e){Pa(this.children,e),this.isDirty=!0}remove(e){Aa(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(z0),this.isDirty=!1,this.children.forEach(e)}}function B0(s,e){const r=performance.now(),n=({timestamp:i})=>{const a=i-r;a>=e&&(xt(n),s(a-e))};return ce.read(n,!0),()=>xt(n)}function G0(s){window.MotionDebug&&window.MotionDebug.record(s)}function H0(s){return s instanceof SVGElement&&s.tagName!=="svg"}function W0(s,e,r){const n=$e(s)?s:ws(s);return n.start(Ea("",n,e,r)),n.animation}const sl=["","X","Y","Z"],K0={visibility:"hidden"},rl=1e3;let X0=0;const $t={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function fu({attachResizeListener:s,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=X0++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,$t.totalNodes=$t.resolvedTargetDeltas=$t.recalculatedProjection=0,this.nodes.forEach(Q0),this.nodes.forEach(ry),this.nodes.forEach(ny),this.nodes.forEach(Z0),G0($t)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new q0)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Da),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const d=this.eventHandlers.get(o);d&&d.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=H0(o),this.instance=o;const{layoutId:d,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||d)&&(this.isLayoutDirty=!0),s){let h;const m=()=>this.root.updateBlockedByResize=!1;s(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=B0(m,250),Lr.hasAnimatedSinceResize&&(Lr.hasAnimatedSinceResize=!1,this.nodes.forEach(il))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&u&&(d||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:f,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||cy,{onLayoutAnimationStart:g,onLayoutAnimationComplete:v}=u.getProps(),w=!this.targetLayout||!mu(this.targetLayout,y)||f,b=!m&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||m&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,b);const _={...Ta(x,"layout"),onPlay:g,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else m||il(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,xt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(iy),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nl);return}this.isUpdating||this.nodes.forEach(ty),this.isUpdating=!1,this.nodes.forEach(sy),this.nodes.forEach(J0),this.nodes.forEach(Y0),this.clearAllSnapshots();const l=performance.now();ke.delta=Pt(0,1e3/60,l-ke.timestamp),ke.timestamp=l,ke.isProcessing=!0,An.update.process(ke),An.preRender.process(ke),An.render.process(ke),ke.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(ey),this.sharedNodes.forEach(ay)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ye(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!hu(this.projectionDelta),d=this.getTransformTemplate(),c=d?d(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(l||Mt(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return o&&(d=this.removeTransform(d)),dy(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ye();const l=o.measureViewportBox(),{scroll:d}=this.root;return d&&(jt(l.x,d.offset.x),jt(l.y,d.offset.y)),l}removeElementScroll(o){const l=ye();qe(l,o);for(let d=0;d<this.path.length;d++){const c=this.path[d],{scroll:u,options:h}=c;if(c!==this.root&&u&&h.layoutScroll){if(u.isRoot){qe(l,o);const{scroll:m}=this.root;m&&(jt(l.x,-m.offset.x),jt(l.y,-m.offset.y))}jt(l.x,u.offset.x),jt(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const d=ye();qe(d,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&us(d,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Mt(u.latestValues)&&us(d,u.latestValues)}return Mt(this.latestValues)&&us(d,this.latestValues),d}removeTransform(o){const l=ye();qe(l,o);for(let d=0;d<this.path.length;d++){const c=this.path[d];if(!c.instance||!Mt(c.latestValues))continue;Ai(c.latestValues)&&c.updateSnapshot();const u=ye(),h=c.measurePageBox();qe(u,h),Qo(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Mt(this.latestValues)&&Qo(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ke.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==d;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=ke.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ye(),this.relativeTargetOrigin=ye(),Vs(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),qe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ye(),this.targetWithTransforms=ye()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),u0(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qe(this.target,this.layout.layoutBox),au(this.target,this.targetDelta)):qe(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ye(),this.relativeTargetOrigin=ye(),Vs(this.relativeTargetOrigin,this.target,f.target),qe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}$t.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ai(this.parent.latestValues)||iu(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ke.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;qe(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,f=this.treeScale.y;v0(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:y}=l;if(!y){this.projectionTransform&&(this.projectionDelta=ds(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ds(),this.projectionDeltaWithTransform=ds());const x=this.projectionTransform;Us(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=tl(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==m||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),$t.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const d=this.snapshot,c=d?d.latestValues:{},u={...this.latestValues},h=ds();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=ye(),f=d?d.source:void 0,y=this.layout?this.layout.source:void 0,x=f!==y,g=this.getStack(),v=!g||g.members.length<=1,w=!!(x&&!v&&this.options.crossfade===!0&&!this.path.some(ly));this.animationProgress=0;let b;this.mixTargetDelta=_=>{const N=_/1e3;al(h.x,o.x,N),al(h.y,o.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vs(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oy(this.relativeTarget,this.relativeTargetOrigin,m,N),b&&U0(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=ye()),qe(b,this.relativeTarget)),x&&(this.animationValues=u,O0(u,c,this.latestValues,N,w,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(xt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ce.update(()=>{Lr.hasAnimatedSinceResize=!0,this.currentAnimation=W0(0,rl,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(rl),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:d,layout:c,latestValues:u}=o;if(!(!l||!d||!c)){if(this!==o&&this.layout&&c&&pu(this.options.animationType,this.layout.layoutBox,c.layoutBox)){d=this.target||ye();const h=Ve(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+h;const m=Ve(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+m}qe(l,d),us(l,u),Us(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new V0),this.sharedNodes.get(o).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:d}={}){const c=this.getStack();c&&c.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:d}=o;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(l=!0),!l)return;const c={};for(let u=0;u<sl.length;u++){const h="rotate"+sl[u];d[h]&&(c[h]=d[h],o.setStaticValue(h,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var l,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return K0;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Or(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Or(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Mt(this.latestValues)&&(x.transform=u?u({},""):"none",this.hasProjected=!1),x}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=tl(this.projectionDeltaWithTransform,this.treeScale,m),u&&(c.transform=u(m,c.transform));const{x:f,y}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${y.origin*100}% 0`,h.animationValues?c.opacity=h===this?(d=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const x in zr){if(m[x]===void 0)continue;const{correct:g,applyTo:v}=zr[x],w=c.transform==="none"?m[x]:g(m[x],h);if(v){const b=v.length;for(let _=0;_<b;_++)c[v[_]]=w}else c[x]=w}return this.options.layoutId&&(c.pointerEvents=h===this?Or(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(nl),this.root.sharedNodes.clear()}}}function J0(s){s.updateLayout()}function Y0(s){var e;const r=((e=s.resumeFrom)===null||e===void 0?void 0:e.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&r&&s.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=s.layout,{animationType:a}=s.options,o=r.source!==s.layout.source;a==="size"?Ge(h=>{const m=o?r.measuredBox[h]:r.layoutBox[h],f=Ve(m);m.min=n[h].min,m.max=m.min+f}):pu(a,r.layoutBox,n)&&Ge(h=>{const m=o?r.measuredBox[h]:r.layoutBox[h],f=Ve(n[h]);m.max=m.min+f,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[h].max=s.relativeTarget[h].min+f)});const l=ds();Us(l,n,r.layoutBox);const d=ds();o?Us(d,s.applyTransform(i,!0),r.measuredBox):Us(d,n,r.layoutBox);const c=!hu(l);let u=!1;if(!s.resumeFrom){const h=s.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:f}=h;if(m&&f){const y=ye();Vs(y,r.layoutBox,m.layoutBox);const x=ye();Vs(x,n,f.layoutBox),mu(y,x)||(u=!0),h.options.layoutRoot&&(s.relativeTarget=x,s.relativeTargetOrigin=y,s.relativeParent=h)}}}s.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:d,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(s.isLead()){const{onExitComplete:n}=s.options;n&&n()}s.options.transition=void 0}function Q0(s){$t.totalNodes++,s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function Z0(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function ey(s){s.clearSnapshot()}function nl(s){s.clearMeasurements()}function ty(s){s.isLayoutDirty=!1}function sy(s){const{visualElement:e}=s.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),s.resetTransform()}function il(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function ry(s){s.resolveTargetDelta()}function ny(s){s.calcProjection()}function iy(s){s.resetRotation()}function ay(s){s.removeLeadSnapshot()}function al(s,e,r){s.translate=ue(e.translate,0,r),s.scale=ue(e.scale,1,r),s.origin=e.origin,s.originPoint=e.originPoint}function ol(s,e,r,n){s.min=ue(e.min,r.min,n),s.max=ue(e.max,r.max,n)}function oy(s,e,r,n){ol(s.x,e.x,r.x,n),ol(s.y,e.y,r.y,n)}function ly(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const cy={duration:.45,ease:[.4,0,.1,1]},ll=s=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(s),cl=ll("applewebkit/")&&!ll("chrome/")?Math.round:me;function dl(s){s.min=cl(s.min),s.max=cl(s.max)}function dy(s){dl(s.x),dl(s.y)}function pu(s,e,r){return s==="position"||s==="preserve-aspect"&&!Ei(el(e),el(r),.2)}const uy=fu({attachResizeListener:(s,e)=>ht(s,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zn={current:void 0},gu=fu({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!zn.current){const s=new uy({});s.mount(window),s.setOptions({layoutScroll:!0}),zn.current=s}return zn.current},resetTransform:(s,e)=>{s.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),hy={pan:{Feature:T0},drag:{Feature:C0,ProjectionNode:gu,MeasureLayout:cu}},my=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function fy(s){const e=my.exec(s);if(!e)return[,];const[,r,n]=e;return[r,n]}function Ii(s,e,r=1){const[n,i]=fy(s);if(!n)return;const a=window.getComputedStyle(e).getPropertyValue(n);if(a){const o=a.trim();return Qd(o)?parseFloat(o):o}else return ji(i)?Ii(i,e,r+1):i}function py(s,{...e},r){const n=s.current;if(!(n instanceof Element))return{target:e,transitionEnd:r};r&&(r={...r}),s.values.forEach(i=>{const a=i.get();if(!ji(a))return;const o=Ii(a,n);o&&i.set(o)});for(const i in e){const a=e[i];if(!ji(a))continue;const o=Ii(a,n);o&&(e[i]=o,r||(r={}),r[i]===void 0&&(r[i]=a))}return{target:e,transitionEnd:r}}const gy=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),xu=s=>gy.has(s),xy=s=>Object.keys(s).some(xu),ul=s=>s===Zt||s===X,hl=(s,e)=>parseFloat(s.split(", ")[e]),ml=(s,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/);if(i)return hl(i[1],e);{const a=n.match(/^matrix\((.+)\)$/);return a?hl(a[1],s):0}},yy=new Set(["x","y","z"]),by=ar.filter(s=>!yy.has(s));function vy(s){const e=[];return by.forEach(r=>{const n=s.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e.length&&s.render(),e}const js={width:({x:s},{paddingLeft:e="0",paddingRight:r="0"})=>s.max-s.min-parseFloat(e)-parseFloat(r),height:({y:s},{paddingTop:e="0",paddingBottom:r="0"})=>s.max-s.min-parseFloat(e)-parseFloat(r),top:(s,{top:e})=>parseFloat(e),left:(s,{left:e})=>parseFloat(e),bottom:({y:s},{top:e})=>parseFloat(e)+(s.max-s.min),right:({x:s},{left:e})=>parseFloat(e)+(s.max-s.min),x:ml(4,13),y:ml(5,14)};js.translateX=js.x;js.translateY=js.y;const wy=(s,e,r)=>{const n=e.measureViewportBox(),i=e.current,a=getComputedStyle(i),{display:o}=a,l={};o==="none"&&e.setStaticValue("display",s.display||"block"),r.forEach(c=>{l[c]=js[c](n,a)}),e.render();const d=e.measureViewportBox();return r.forEach(c=>{const u=e.getValue(c);u&&u.jump(l[c]),s[c]=js[c](d,a)}),s},jy=(s,e,r={},n={})=>{e={...e},n={...n};const i=Object.keys(e).filter(xu);let a=[],o=!1;const l=[];if(i.forEach(d=>{const c=s.getValue(d);if(!s.hasValue(d))return;let u=r[d],h=Ds(u);const m=e[d];let f;if(Br(m)){const y=m.length,x=m[0]===null?1:0;u=m[x],h=Ds(u);for(let g=x;g<y&&m[g]!==null;g++)f?Na(Ds(m[g])===f):f=Ds(m[g])}else f=Ds(m);if(h!==f)if(ul(h)&&ul(f)){const y=c.get();typeof y=="string"&&c.set(parseFloat(y)),typeof m=="string"?e[d]=parseFloat(m):Array.isArray(m)&&f===X&&(e[d]=m.map(parseFloat))}else h!=null&&h.transform&&(f!=null&&f.transform)&&(u===0||m===0)?u===0?c.set(f.transform(u)):e[d]=h.transform(m):(o||(a=vy(s),o=!0),l.push(d),n[d]=n[d]!==void 0?n[d]:e[d],c.jump(m))}),l.length){const d=l.indexOf("height")>=0?window.pageYOffset:null,c=wy(e,s,l);return a.length&&a.forEach(([u,h])=>{s.getValue(u).set(h)}),s.render(),on&&d!==null&&window.scrollTo({top:d}),{target:c,transitionEnd:n}}else return{target:e,transitionEnd:n}};function Ny(s,e,r,n){return xy(e)?jy(s,e,r,n):{target:e,transitionEnd:n}}const _y=(s,e,r,n)=>{const i=py(s,e,n);return e=i.target,n=i.transitionEnd,Ny(s,e,r,n)},Oi={current:null},yu={current:!1};function ky(){if(yu.current=!0,!!on)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),e=()=>Oi.current=s.matches;s.addListener(e),e()}else Oi.current=!1}function Sy(s,e,r){const{willChange:n}=e;for(const i in e){const a=e[i],o=r[i];if($e(a))s.addValue(i,a),Kr(n)&&n.add(i);else if($e(o))s.addValue(i,ws(a,{owner:s})),Kr(n)&&n.remove(i);else if(o!==a)if(s.hasValue(i)){const l=s.getValue(i);!l.hasAnimated&&l.set(a)}else{const l=s.getStaticValue(i);s.addValue(i,ws(l!==void 0?l:a,{owner:s}))}}for(const i in r)e[i]===void 0&&s.removeValue(i);return e}const fl=new WeakMap,bu=Object.keys(Zs),Cy=bu.length,pl=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Ty=fa.length;class Ey{constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ce.render(this.render,!1,!0);const{latestValues:l,renderState:d}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=d,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=cn(r),this.isVariantNode=rd(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(r,{});for(const h in u){const m=u[h];l[h]!==void 0&&$e(m)&&(m.set(l[h],!1),Kr(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){this.current=e,fl.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),yu.current||ky(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Oi.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){fl.delete(this.current),this.projection&&this.projection.unmount(),xt(this.notifyUpdate),xt(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,r){const n=Qt.has(e),i=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ce.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),a()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...r},n,i,a){let o,l;for(let d=0;d<Cy;d++){const c=bu[d],{isEnabled:u,Feature:h,ProjectionNode:m,MeasureLayout:f}=Zs[c];m&&(o=m),u(r)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),f&&(l=f))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:c,drag:u,dragConstraints:h,layoutScroll:m,layoutRoot:f}=r;this.projection.setOptions({layoutId:d,layout:c,alwaysMeasureLayout:!!u||h&&ls(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:a,layoutScroll:m,layoutRoot:f})}return l}updateFeatures(){for(const e in this.features){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ye()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<pl.length;n++){const i=pl[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a=e["on"+i];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=Sy(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<Ty;n++){const i=fa[n],a=this.props[i];(Qs(a)||a===!1)&&(r[i]=a)}return r}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=ws(r,{owner:this}),this.addValue(e,n)),n}readValue(e){var r;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props,i=typeof n=="string"||typeof n=="object"?(r=ja(this.props,n))===null||r===void 0?void 0:r[e]:void 0;if(n&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!$e(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Da),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class vu extends Ey{sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...n},{transformValues:i},a){let o=Hx(n,e||{},this);if(i&&(r&&(r=i(r)),n&&(n=i(n)),o&&(o=i(o))),a){Bx(this,n,o);const l=_y(this,n,o,r);r=l.transitionEnd,n=l.target}return{transition:e,transitionEnd:r,...n}}}function Py(s){return window.getComputedStyle(s)}class Ay extends vu{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,r){if(Qt.has(r)){const n=Ca(r);return n&&n.default||0}else{const n=Py(e),i=(od(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return ou(e,r)}build(e,r,n,i){xa(e,r,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,r){return wa(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;$e(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(e,r,n,i){md(e,r,n,i)}}class Dy extends vu{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Qt.has(r)){const n=Ca(r);return n&&n.default||0}return r=fd.has(r)?r:ha(r),e.getAttribute(r)}measureInstanceViewportBox(){return ye()}scrapeMotionValuesFromProps(e,r){return gd(e,r)}build(e,r,n,i){ba(e,r,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,r,n,i){pd(e,r,n,i)}mount(e){this.isSVGTag=va(e.tagName),super.mount(e)}}const Iy=(s,e)=>ga(s)?new Dy(e,{enableHardwareAcceleration:!1}):new Ay(e,{enableHardwareAcceleration:!0}),Oy={layout:{ProjectionNode:gu,MeasureLayout:cu}},Ly={...o0,...Cg,...hy,...Oy},L=Rp((s,e)=>fg(s,e,Ly,Iy));function wu(){const s=p.useRef(!1);return ua(()=>(s.current=!0,()=>{s.current=!1}),[]),s}function Ry(){const s=wu(),[e,r]=p.useState(0),n=p.useCallback(()=>{s.current&&r(e+1)},[e]);return[p.useCallback(()=>ce.postRender(n),[n]),e]}class My extends p.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function $y({children:s,isPresent:e}){const r=p.useId(),n=p.useRef(null),i=p.useRef({width:0,height:0,top:0,left:0});return p.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:d}=i.current;if(e||!n.current||!a||!o)return;n.current.dataset.motionPopId=r;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),p.createElement(My,{isPresent:e,childRef:n,sizeRef:i},p.cloneElement(s,{ref:n}))}const qn=({children:s,initial:e,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:a,mode:o})=>{const l=xd(Fy),d=p.useId(),c=p.useMemo(()=>({id:d,initial:e,isPresent:r,custom:i,onExitComplete:u=>{l.set(u,!0);for(const h of l.values())if(!h)return;n&&n()},register:u=>(l.set(u,!1),()=>l.delete(u))}),a?void 0:[r]);return p.useMemo(()=>{l.forEach((u,h)=>l.set(h,!1))},[r]),p.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),o==="popLayout"&&(s=p.createElement($y,{isPresent:r},s)),p.createElement(an.Provider,{value:c},s)};function Fy(){return new Map}function Uy(s){return p.useEffect(()=>()=>s(),[])}const Ft=s=>s.key||"";function Vy(s,e){s.forEach(r=>{const n=Ft(r);e.set(n,r)})}function zy(s){const e=[];return p.Children.forEach(s,r=>{p.isValidElement(r)&&e.push(r)}),e}const xe=({children:s,custom:e,initial:r=!0,onExitComplete:n,exitBeforeEnter:i,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const l=p.useContext(pa).forceRender||Ry()[0],d=wu(),c=zy(s);let u=c;const h=p.useRef(new Map).current,m=p.useRef(u),f=p.useRef(new Map).current,y=p.useRef(!0);if(ua(()=>{y.current=!1,Vy(c,f),m.current=u}),Uy(()=>{y.current=!0,f.clear(),h.clear()}),y.current)return p.createElement(p.Fragment,null,u.map(w=>p.createElement(qn,{key:Ft(w),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:a,mode:o},w)));u=[...u];const x=m.current.map(Ft),g=c.map(Ft),v=x.length;for(let w=0;w<v;w++){const b=x[w];g.indexOf(b)===-1&&!h.has(b)&&h.set(b,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((w,b)=>{if(g.indexOf(b)!==-1)return;const _=f.get(b);if(!_)return;const N=x.indexOf(b);let k=w;if(!k){const j=()=>{h.delete(b);const T=Array.from(f.keys()).filter(M=>!g.includes(M));if(T.forEach(M=>f.delete(M)),m.current=c.filter(M=>{const B=Ft(M);return B===b||T.includes(B)}),!h.size){if(d.current===!1)return;l(),n&&n()}};k=p.createElement(qn,{key:Ft(_),isPresent:!1,onExitComplete:j,custom:e,presenceAffectsLayout:a,mode:o},_),h.set(b,k)}u.splice(N,0,k)}),u=u.map(w=>{const b=w.key;return h.has(b)?w:p.createElement(qn,{key:Ft(w),isPresent:!0,presenceAffectsLayout:a,mode:o},w)}),p.createElement(p.Fragment,null,h.size?u:u.map(w=>p.cloneElement(w)))},qy=()=>{const{toasts:s,removeToast:e}=Dt(),r=i=>{switch(i){case"destructive":return t.jsx(ne,{className:"w-5 h-5 text-red-500"});case"success":return t.jsx(ve,{className:"w-5 h-5 text-green-500"});case"warning":return t.jsx(Tt,{className:"w-5 h-5 text-yellow-500"});default:return t.jsx(Xf,{className:"w-5 h-5 text-blue-500"})}},n=i=>{switch(i){case"destructive":return"bg-red-50 border-red-200 text-red-800";case"success":return"bg-green-50 border-green-200 text-green-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}};return t.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.jsx(xe,{children:s.map(i=>t.jsxs(L.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{duration:.3},className:`flex items-start space-x-3 p-4 rounded-lg border shadow-lg max-w-sm ${n(i.variant)}`,children:[r(i.variant),t.jsxs("div",{className:"flex-1",children:[i.title&&t.jsx("h4",{className:"font-semibold text-sm mb-1",children:i.title}),i.description&&t.jsx("p",{className:"text-sm opacity-90",children:i.description})]}),t.jsx("button",{onClick:()=>e(i.id),className:"flex-shrink-0 opacity-60 hover:opacity-100 transition-opacity",children:t.jsx(we,{className:"w-4 h-4"})})]},i.id))})})},By="modulepreload",Gy=function(s){return"/"+s},gl={},dr=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=Gy(a),a in gl)return;gl[a]=!0;const o=a.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let u=i.length-1;u>=0;u--){const h=i[u];if(h.href===a&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":By,o||(c.as="script",c.crossOrigin=""),c.href=a,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})},Hy=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...r)=>dr(()=>Promise.resolve().then(()=>_s),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Ia extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Wy extends Ia{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ky extends Ia{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Xy extends Ia{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Li;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Li||(Li={}));var Jy=globalThis&&globalThis.__awaiter||function(s,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};class Yy{constructor(e,{headers:r={},customFetch:n,region:i=Li.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=Hy(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return Jy(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=r;let l={},{region:d}=r;d||(d=this.region),d&&d!=="any"&&(l["x-region"]=d);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:c}).catch(y=>{throw new Wy(y)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new Ky(u);if(!u.ok)throw new Xy(u);let m=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),f;return m==="application/json"?f=yield u.json():m==="application/octet-stream"?f=yield u.blob():m==="text/event-stream"?f=u:m==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(i){return{data:null,error:i}}})}}var Oe={},Oa={},mn={},ur={},fn={},pn={},Qy=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ns=Qy();const Zy=Ns.fetch,ju=Ns.fetch.bind(Ns),Nu=Ns.Headers,eb=Ns.Request,tb=Ns.Response,_s=Object.freeze(Object.defineProperty({__proto__:null,Headers:Nu,Request:eb,Response:tb,default:ju,fetch:Zy},Symbol.toStringTag,{value:"Module"})),sb=Sh(_s);var gn={};Object.defineProperty(gn,"__esModule",{value:!0});let rb=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};gn.default=rb;var _u=Xe&&Xe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(pn,"__esModule",{value:!0});const nb=_u(sb),ib=_u(gn);let ab=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=nb.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,d;let c=null,u=null,h=null,m=a.status,f=a.statusText;if(a.ok){if(this.method!=="HEAD"){const v=await a.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,m=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const x=await a.text();try{c=JSON.parse(x),Array.isArray(c)&&a.status===404&&(u=[],c=null,m=200,f="OK")}catch{a.status===404&&x===""?(m=204,f="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((d=c==null?void 0:c.details)===null||d===void 0)&&d.includes("0 rows"))&&(c=null,m=200,f="OK"),c&&this.shouldThrowOnError)throw new ib.default(c)}return{error:c,data:u,count:h,status:m,statusText:f}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,l,d;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(d=a==null?void 0:a.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}returns(){return this}overrideTypes(){return this}};pn.default=ab;var ob=Xe&&Xe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(fn,"__esModule",{value:!0});const lb=ob(pn);let cb=class extends lb.default{select(e){let r=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var l;const d=[e?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${d};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};fn.default=cb;var db=Xe&&Xe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ur,"__esModule",{value:!0});const ub=db(fn);let hb=class extends ub.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};ur.default=hb;var mb=Xe&&Xe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(mn,"__esModule",{value:!0});const Os=mb(ur);let fb=class{constructor(e,{headers:r={},schema:n,fetch:i}){this.url=e,this.headers=r,this.schema=n,this.fetch=i}select(e,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Os.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const i="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const o=e.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(o.length>0){const l=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",l.join(","))}}return new Os.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const d=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Os.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),this.headers.Prefer=i.join(","),new Os.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Os.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};mn.default=fb;var xn={},yn={};Object.defineProperty(yn,"__esModule",{value:!0});yn.version=void 0;yn.version="0.0.0-automated";Object.defineProperty(xn,"__esModule",{value:!0});xn.DEFAULT_HEADERS=void 0;const pb=yn;xn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${pb.version}`};var ku=Xe&&Xe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Oa,"__esModule",{value:!0});const gb=ku(mn),xb=ku(ur),yb=xn;let bb=class Su{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},yb.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=i}from(e){const r=new URL(`${this.url}/${e}`);return new gb.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Su(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let d;n||i?(o=n?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",d=r);const c=Object.assign({},this.headers);return a&&(c.Prefer=`count=${a}`),new xb.default({method:o,url:l,headers:c,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};Oa.default=bb;var ks=Xe&&Xe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.PostgrestError=Oe.PostgrestBuilder=Oe.PostgrestTransformBuilder=Oe.PostgrestFilterBuilder=Oe.PostgrestQueryBuilder=Oe.PostgrestClient=void 0;const Cu=ks(Oa);Oe.PostgrestClient=Cu.default;const Tu=ks(mn);Oe.PostgrestQueryBuilder=Tu.default;const Eu=ks(ur);Oe.PostgrestFilterBuilder=Eu.default;const Pu=ks(fn);Oe.PostgrestTransformBuilder=Pu.default;const Au=ks(pn);Oe.PostgrestBuilder=Au.default;const Du=ks(gn);Oe.PostgrestError=Du.default;var vb=Oe.default={PostgrestClient:Cu.default,PostgrestQueryBuilder:Tu.default,PostgrestFilterBuilder:Eu.default,PostgrestTransformBuilder:Pu.default,PostgrestBuilder:Au.default,PostgrestError:Du.default};const{PostgrestClient:wb,PostgrestQueryBuilder:V2,PostgrestFilterBuilder:z2,PostgrestTransformBuilder:q2,PostgrestBuilder:B2,PostgrestError:G2}=vb;let Ri;typeof window>"u"?Ri=require("ws"):Ri=window.WebSocket;const jb=Ri,Nb="2.11.10",_b={"X-Client-Info":`realtime-js/${Nb}`},kb="1.0.0",Iu=1e4,Sb=1e3;var ps;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(ps||(ps={}));var Te;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Te||(Te={}));var Ze;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Ze||(Ze={}));var Mi;(function(s){s.websocket="websocket"})(Mi||(Mi={}));var Vt;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Vt||(Vt={}));class Cb{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const i=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+i));o=o+i;const d=n.decode(e.slice(o,o+a));o=o+a;const c=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:d,payload:c}}}class Ou{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var le;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(le||(le={}));const xl=(s,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,o)=>(a[o]=Tb(o,s,e,i),a),{})},Tb=(s,e,r,n)=>{const i=e.find(l=>l.name===s),a=i==null?void 0:i.type,o=r[s];return a&&!n.includes(a)?Lu(a,o):$i(o)},Lu=(s,e)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return Db(e,r)}switch(s){case le.bool:return Eb(e);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return Pb(e);case le.json:case le.jsonb:return Ab(e);case le.timestamp:return Ib(e);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return $i(e);default:return $i(e)}},$i=s=>s,Eb=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Pb=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Ab=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Db=(s,e)=>{if(typeof s!="string")return s;const r=s.length-1,n=s[r];if(s[0]==="{"&&n==="}"){let a;const o=s.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>Lu(e,l))}return s},Ib=s=>typeof s=="string"?s.replace(" ","T"):s,Ru=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Bn{constructor(e,r,n={},i=Iu){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var yl;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(yl||(yl={}));class zs{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zs.syncState(this.state,i,a,o),this.pendingDiffs.forEach(d=>{this.state=zs.syncDiff(this.state,d,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=zs.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const a=this.cloneDeep(e),o=this.transformState(r),l={},d={};return this.map(a,(c,u)=>{o[c]||(d[c]=u)}),this.map(o,(c,u)=>{const h=a[c];if(h){const m=u.map(g=>g.presence_ref),f=h.map(g=>g.presence_ref),y=u.filter(g=>f.indexOf(g.presence_ref)<0),x=h.filter(g=>m.indexOf(g.presence_ref)<0);y.length>0&&(l[c]=y),x.length>0&&(d[c]=x)}else l[c]=u}),this.syncDiff(a,{joins:l,leaves:d},n,i)}static syncDiff(e,r,n,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(l,d)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(d),u.length>0){const h=e[l].map(f=>f.presence_ref),m=u.filter(f=>h.indexOf(f.presence_ref)<0);e[l].unshift(...m)}n(l,u,d)}),this.map(o,(l,d)=>{let c=e[l];if(!c)return;const u=d.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=c,i(l,c,d),c.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bl;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(bl||(bl={}));var vl;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(vl||(vl={}));var ut;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(ut||(ut={}));class La{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Te.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Bn(this,Ze.join,this.params,this.timeout),this.rejoinTimer=new Ou(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Te.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Te.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ze.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new zs(this),this.broadcastEndpointURL=Ru(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(ut.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(ut.CLOSED));const d={},c={broadcast:a,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(ut.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,f=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,y=[];for(let x=0;x<f;x++){const g=m[x],{filter:{event:v,schema:w,table:b,filter:_}}=g,N=u&&u[x];if(N&&N.event===v&&N.schema===w&&N.table===b&&N.filter===_)y.push(Object.assign(Object.assign({},g),{id:N.id}));else{this.unsubscribe(),this.state=Te.errored,e==null||e(ut.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(ut.SUBSCRIBED);return}}).receive("error",u=>{this.state=Te.errored,e==null||e(ut.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ut.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,d;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Te.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ze.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const i=new Bn(this,Ze.leave,{},e);i.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Bn(this,e,r,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,a;const o=e.toLocaleLowerCase(),{close:l,error:d,leave:c,join:u}=Ze;if(n&&[l,d,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var y,x,g;return((y=f.filter)===null||y===void 0?void 0:y.event)==="*"||((g=(x=f.filter)===null||x===void 0?void 0:x.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(m,n)):(a=this.bindings[o])===null||a===void 0||a.filter(f=>{var y,x,g,v,w,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,N=(y=f.filter)===null||y===void 0?void 0:y.event;return _&&((x=r.ids)===null||x===void 0?void 0:x.includes(_))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const _=(w=(v=f==null?void 0:f.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return _==="*"||_===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:x,table:g,commit_timestamp:v,type:w,errors:b}=y;m=Object.assign(Object.assign({},{schema:x,table:g,commit_timestamp:v,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(y))}f.callback(m,n)})}_isClosed(){return this.state===Te.closed}_isJoined(){return this.state===Te.joined}_isJoining(){return this.state===Te.joining}_isLeaving(){return this.state===Te.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&La.isEqual(i.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ze.close,{},e)}_onError(e){this._on(Ze.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Te.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=xl(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=xl(e.columns,e.old_record)),r}}const wl=()=>{},Ob=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Lb{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=_b,this.params={},this.timeout=Iu,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wl,this.ref=0,this.logger=wl,this.conn=null,this.sendBuffer=[],this.serializer=new Cb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>dr(()=>Promise.resolve().then(()=>_s),void 0).then(({default:d})=>d(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Mi.websocket}`,this.httpEndpoint=Ru(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const i=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,o)=>o(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ou(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=jb),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Rb(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:kb}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ps.connecting:return Vt.Connecting;case ps.open:return Vt.Open;case ps.closing:return Vt.Closing;default:return Vt.Closed}}isConnected(){return this.connectionState()===Vt.Open}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new La(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:i,ref:a}=e,o=()=>{this.encode(e,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(Ze.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Sb,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:i,payload:a,ref:o}=r;n==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(i,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ze.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Ob],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Rb{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ps.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Ra extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function je(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class Mb extends Ra{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Fi extends Ra{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var $b=globalThis&&globalThis.__awaiter||function(s,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};const Mu=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...r)=>dr(()=>Promise.resolve().then(()=>_s),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Fb=()=>$b(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield dr(()=>Promise.resolve().then(()=>_s),void 0)).Response:Response}),Ui=s=>{if(Array.isArray(s))return s.map(r=>Ui(r));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Ui(n)}),e};var es=globalThis&&globalThis.__awaiter||function(s,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};const Gn=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Ub=(s,e,r)=>es(void 0,void 0,void 0,function*(){const n=yield Fb();s instanceof n&&!(r!=null&&r.noResolveJson)?s.json().then(i=>{e(new Mb(Gn(i),s.status||500))}).catch(i=>{e(new Fi(Gn(i),i))}):e(new Fi(Gn(s),s))}),Vb=(s,e,r,n)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),r))};function hr(s,e,r,n,i,a){return es(this,void 0,void 0,function*(){return new Promise((o,l)=>{s(r,Vb(e,n,i,a)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>Ub(d,l,n))})})}function Jr(s,e,r,n){return es(this,void 0,void 0,function*(){return hr(s,"GET",e,r,n)})}function Nt(s,e,r,n,i){return es(this,void 0,void 0,function*(){return hr(s,"POST",e,n,i,r)})}function zb(s,e,r,n,i){return es(this,void 0,void 0,function*(){return hr(s,"PUT",e,n,i,r)})}function qb(s,e,r,n){return es(this,void 0,void 0,function*(){return hr(s,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function $u(s,e,r,n,i){return es(this,void 0,void 0,function*(){return hr(s,"DELETE",e,n,i,r)})}var Ie=globalThis&&globalThis.__awaiter||function(s,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};const Bb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jl={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gb{constructor(e,r={},n,i){this.url=e,this.headers=r,this.bucketId=n,this.fetch=Mu(i)}uploadOrUpdate(e,r,n,i){return Ie(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},jl),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:a,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:c,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(je(a))return{data:null,error:a};throw a}})}upload(e,r,n){return Ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return Ie(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let d;const c=Object.assign({upsert:jl.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",c.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",c.cacheControl)):(d=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:d,headers:u}),m=yield h.json();return h.ok?{data:{path:a,fullPath:m.Key},error:null}:{data:null,error:m}}catch(d){if(je(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,r){return Ie(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield Nt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Ra("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}})}update(e,r,n){return Ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Ie(this,void 0,void 0,function*(){try{return{data:yield Nt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(je(i))return{data:null,error:i};throw i}})}copy(e,r,n){return Ie(this,void 0,void 0,function*(){try{return{data:{path:(yield Nt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(je(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return Ie(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Nt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(je(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return Ie(this,void 0,void 0,function*(){try{const i=yield Nt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(je(i))return{data:null,error:i};throw i}})}download(e,r){return Ie(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Jr(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(je(l))return{data:null,error:l};throw l}})}info(e){return Ie(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Jr(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ui(n),error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}})}exists(e){return Ie(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield qb(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(je(n)&&n instanceof Fi){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&i.push(d);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${c}`)}}}remove(e){return Ie(this,void 0,void 0,function*(){try{return{data:yield $u(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}})}list(e,r,n){return Ie(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Bb),r),{prefix:e||""});return{data:yield Nt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(je(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Hb="2.7.1",Wb={"X-Client-Info":`storage-js/${Hb}`};var ss=globalThis&&globalThis.__awaiter||function(s,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};class Kb{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},Wb),r),this.fetch=Mu(n)}listBuckets(){return ss(this,void 0,void 0,function*(){try{return{data:yield Jr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(je(e))return{data:null,error:e};throw e}})}getBucket(e){return ss(this,void 0,void 0,function*(){try{return{data:yield Jr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return ss(this,void 0,void 0,function*(){try{return{data:yield Nt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return ss(this,void 0,void 0,function*(){try{return{data:yield zb(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(je(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ss(this,void 0,void 0,function*(){try{return{data:yield Nt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}})}deleteBucket(e){return ss(this,void 0,void 0,function*(){try{return{data:yield $u(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}})}}class Xb extends Kb{constructor(e,r={},n){super(e,r,n)}from(e){return new Gb(this.url,this.headers,e,this.fetch)}}const Jb="2.50.0";let Ms="";typeof Deno<"u"?Ms="deno":typeof document<"u"?Ms="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ms="react-native":Ms="node";const Yb={"X-Client-Info":`supabase-js-${Ms}/${Jb}`},Qb={headers:Yb},Zb={schema:"public"},ev={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tv={};var sv=globalThis&&globalThis.__awaiter||function(s,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};const rv=s=>{let e;return s?e=s:typeof fetch>"u"?e=ju:e=fetch,(...r)=>e(...r)},nv=()=>typeof Headers>"u"?Nu:Headers,iv=(s,e,r)=>{const n=rv(r),i=nv();return(a,o)=>sv(void 0,void 0,void 0,function*(){var l;const d=(l=yield e())!==null&&l!==void 0?l:s;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",s),c.has("Authorization")||c.set("Authorization",`Bearer ${d}`),n(a,Object.assign(Object.assign({},o),{headers:c}))})};var av=globalThis&&globalThis.__awaiter||function(s,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};function ov(s){return s.endsWith("/")?s:s+"/"}function lv(s,e){var r,n;const{db:i,auth:a,realtime:o,global:l}=s,{db:d,auth:c,realtime:u,global:h}=e,m={db:Object.assign(Object.assign({},d),i),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>av(this,void 0,void 0,function*(){return""})};return s.accessToken?m.accessToken=s.accessToken:delete m.accessToken,m}const Fu="2.70.0",os=30*1e3,Vi=3,Hn=Vi*os,cv="http://localhost:9999",dv="supabase.auth.token",uv={"X-Client-Info":`gotrue-js/${Fu}`},zi="X-Supabase-Api-Version",Uu={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},hv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,mv=6e5;class Ma extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Q(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class fv extends Ma{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function pv(s){return Q(s)&&s.name==="AuthApiError"}class Vu extends Ma{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Ot extends Ma{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class wt extends Ot{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function gv(s){return Q(s)&&s.name==="AuthSessionMissingError"}class wr extends Ot{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jr extends Ot{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Nr extends Ot{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function xv(s){return Q(s)&&s.name==="AuthImplicitGrantRedirectError"}class Nl extends Ot{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qi extends Ot{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Wn(s){return Q(s)&&s.name==="AuthRetryableFetchError"}class _l extends Ot{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class qs extends Ot{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kl=` 	
\r=`.split(""),yv=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<kl.length;e+=1)s[kl[e].charCodeAt(0)]=-2;for(let e=0;e<Yr.length;e+=1)s[Yr[e].charCodeAt(0)]=e;return s})();function Sl(s,e,r){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Yr[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Yr[n]),e.queuedBits-=6}}function zu(s,e,r){const n=yv[s];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Cl(s){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{wv(o,n,r)};for(let o=0;o<s.length;o+=1)zu(s.charCodeAt(o),i,a);return e.join("")}function bv(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function vv(s,e){for(let r=0;r<s.length;r+=1){let n=s.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(s.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}bv(n,e)}}function wv(s,e,r){if(e.utf8seq===0){if(s<=127){r(s);return}for(let n=1;n<6;n+=1)if(!(s>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function jv(s){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<s.length;i+=1)zu(s.charCodeAt(i),r,n);return new Uint8Array(e)}function Nv(s){const e=[];return vv(s,r=>e.push(r)),new Uint8Array(e)}function _v(s){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return s.forEach(i=>Sl(i,r,n)),Sl(null,r,n),e.join("")}function kv(s){return Math.round(Date.now()/1e3)+s}function Sv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Qe=()=>typeof window<"u"&&typeof document<"u",Rt={tested:!1,writable:!1},Bs=()=>{if(!Qe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rt.tested)return Rt.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Rt.tested=!0,Rt.writable=!0}catch{Rt.tested=!0,Rt.writable=!1}return Rt.writable};function Cv(s){const e={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const qu=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...r)=>dr(()=>Promise.resolve().then(()=>_s),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Tv=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Bu=async(s,e,r)=>{await s.setItem(e,JSON.stringify(r))},_r=async(s,e)=>{const r=await s.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},kr=async(s,e)=>{await s.removeItem(e)};class bn{constructor(){this.promise=new bn.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}bn.promiseConstructor=Promise;function Kn(s){const e=s.split(".");if(e.length!==3)throw new qs("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!hv.test(e[n]))throw new qs("JWT not in base64url format");return{header:JSON.parse(Cl(e[0])),payload:JSON.parse(Cl(e[1])),signature:jv(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ev(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function Pv(s,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await s(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function Av(s){return("0"+s.toString(16)).substr(-2)}function Dv(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,Av).join("")}async function Iv(s){const r=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function Ov(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await Iv(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function rs(s,e,r=!1){const n=Dv();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Bu(s,`${e}-code-verifier`,i);const a=await Ov(n);return[a,n===a?"plain":"s256"]}const Lv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Rv(s){const e=s.headers.get(zi);if(!e||!e.match(Lv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Mv(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function $v(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Fv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ns(s){if(!Fv.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Uv=globalThis&&globalThis.__rest||function(s,e){var r={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(r[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(r[n[i]]=s[n[i]]);return r};const Ut=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Vv=[502,503,504];async function Tl(s){var e;if(!Tv(s))throw new qi(Ut(s),0);if(Vv.includes(s.status))throw new qi(Ut(s),s.status);let r;try{r=await s.json()}catch(a){throw new Vu(Ut(a),a)}let n;const i=Rv(s);if(i&&i.getTime()>=Uu["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new _l(Ut(r),s.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new wt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new _l(Ut(r),s.status,r.weak_password.reasons);throw new fv(Ut(r),s.status||500,n)}const zv=(s,e,r,n)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function se(s,e,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[zi]||(a[zi]=Uu["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await qv(s,e,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function qv(s,e,r,n,i,a){const o=zv(e,n,i,a);let l;try{l=await s(r,Object.assign({},o))}catch(d){throw console.error(d),new qi(Ut(d),0)}if(l.ok||await Tl(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(d){await Tl(d)}}function dt(s){var e;let r=null;Wv(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=kv(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:r,user:n},error:null}}function El(s){const e=dt(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function _t(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function Bv(s){return{data:s,error:null}}function Gv(s){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=s,o=Uv(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function Hv(s){return s}function Wv(s){return s.access_token&&s.refresh_token&&s.expires_in}const Xn=["global","local","others"];var Kv=globalThis&&globalThis.__rest||function(s,e){var r={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(r[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(r[n[i]]=s[n[i]]);return r};class Xv{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=qu(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=Xn[0]){if(Xn.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xn.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:_t})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Kv(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Gv,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Q(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_t})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,a,o,l,d;try{const c={nextPage:null,lastPage:0,total:0},u=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Hv});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(d=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return f.length>0&&(f.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(y.split(";")[1].split("=")[1]);c[`${g}Page`]=x}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Q(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){ns(e);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_t})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ns(e);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:_t})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){ns(e);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:_t})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){ns(e.userId);try{const{data:r,error:n}=await se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ns(e.userId),ns(e.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}}const Jv={getItem:s=>Bs()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{Bs()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{Bs()&&globalThis.localStorage.removeItem(s)}};function Pl(s={}){return{getItem:e=>s[e]||null,setItem:(e,r)=>{s[e]=r},removeItem:e=>{delete s[e]}}}function Yv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const is={debug:!!(globalThis&&Bs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Gu extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Qv extends Gu{}async function Zv(s,e,r){is.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),is.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){is.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,i.name);try{return await r()}finally{is.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,i.name)}}else{if(e===0)throw is.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Qv(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(is.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Yv();const ew={url:cv,storageKey:dv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:uv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Al(s,e,r){return await r()}class tr{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tr.nextInstanceID,tr.nextInstanceID+=1,this.instanceID>0&&Qe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},ew),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Xv({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=qu(i.fetch),this.lock=i.lock||Al,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Qe()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Zv:this.lock=Al,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Bs()?this.storage=Jv:(this.memoryStorage={},this.storage=Pl(this.memoryStorage)):(this.memoryStorage={},this.storage=Pl(this.memoryStorage)),Qe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Fu}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Cv(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Qe()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),xv(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Q(r)?{error:r}:{error:new Vu("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const a=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:dt}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(a){if(Q(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var r,n,i;try{let a;if("email"in e){const{email:u,password:h,options:m}=e;let f=null,y=null;this.flowType==="pkce"&&([f,y]=await rs(this.storage,this.storageKey)),a=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:y},xform:dt})}else if("phone"in e){const{phone:u,password:h,options:m}=e;a=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:dt})}else throw new jr("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(a){if(Q(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:l}=e;r=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:El})}else if("phone"in e){const{phone:a,password:o,options:l}=e;r=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:El})}else throw new jr("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new wr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,i,a,o,l,d,c,u,h,m,f;let y,x;if("message"in e)y=e.message,x=e.signature;else{const{chain:g,wallet:v,statement:w,options:b}=e;let _;if(Qe())if(typeof v=="object")_=v;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))_=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const N=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const k=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),w?{statement:w}:null));let j;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")j=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)j=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)y=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),x=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${N.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(i=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const k=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=k}}try{const{data:g,error:v}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:_v(x)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:dt});if(v)throw v;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new wr}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:v})}catch(g){if(Q(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const r=await _r(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:o}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:dt});if(await kr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new wr}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(Q(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:a,nonce:o}=e,l=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:dt}),{data:d,error:c}=l;return c?{data:{user:null,session:null},error:c}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new wr}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:c})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,i,a,o;try{if("email"in e){const{email:l,options:d}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await rs(this.storage,this.storageKey));const{error:h}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:d}=e,{data:c,error:u}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=d==null?void 0:d.data)!==null&&i!==void 0?i:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new jr("You must provide either an email or phone number.")}catch(l){if(Q(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let i,a;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:dt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,c=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,n,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await rs(this.storage,this.storageKey)),await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:Bv})}catch(a){if(Q(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new wt;const{error:i}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Q(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:o}=await se(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:o,error:l}=await se(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new jr("You must provide either an email or phone number and a type")}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await _r(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Hn:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,c,u))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_t}):await this._useSession(async r=>{var n,i,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wt}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:_t})})}catch(r){if(Q(r))return gv(r)&&(await this._removeSession(),await kr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new wt;const o=i.session;let l=null,d=null;this.flowType==="pkce"&&e.email!=null&&([l,d]=await rs(this.storage,this.storageKey));const{data:c,error:u}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:_t});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new wt;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:o}=Kn(e.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{session:l,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:d}=await this._getUser(e.access_token);if(d)throw d;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(Q(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new wt;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Qe())throw new Nr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Nr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Nl("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Nr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Nl("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:d,token_type:c}=e;if(!a||!l||!o||!c)throw new Nr("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;d&&(m=parseInt(d));const f=m-u;f*1e3<=os&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const y=m-h;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,u);const{data:x,error:g}=await this._getUser(a);if(g)throw g;const v={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:h,expires_at:m,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(n){if(Q(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await _r(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{error:a};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(pv(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await kr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Sv(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await rs(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Q(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var o,l,d,c,u;const{data:h,error:m}=a;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Qe()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Q(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)throw o;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Pv(async i=>(i>0&&await Ev(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:dt})),(i,a)=>{const o=200*Math.pow(2,i);return a&&Wn(a)&&Date.now()+o-n<os})}catch(n){if(this._debug(r,"error",n),Q(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Qe()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await _r(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Hn;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Hn}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Wn(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new wt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new bn;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new wt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),Q(a)){const o={session:null,error:a};return Wn(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(d){a.push(d)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Bu(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await kr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),os);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/os);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${os}ms, refresh threshold is ${Vi} ticks`),i<=Vi&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Gu)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await rs(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:c}=await se(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=d==null?void 0:d.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(Q(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Q(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Kn(i.access_token);let l=null;o.aal&&(l=o.aal);let d=l;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+mv>Date.now()))return n;const{data:i,error:a}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!i.keys||i.keys.length===0)throw new qs("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),n=i.keys.find(o=>o.kid===e),!n)throw new qs("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:f,error:y}=await this.getSession();if(y||!f.session)return{data:null,error:y};n=f.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:d}}=Kn(n);if(Mv(a.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:a,header:i,signature:o},error:null}}const c=$v(i.alg),u=await this.fetchJwk(i.kid,r),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,Nv(`${l}.${d}`)))throw new qs("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}}tr.nextInstanceID=0;const tw=tr;class sw extends tw{constructor(e){super(e)}}var rw=globalThis&&globalThis.__awaiter||function(s,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?a(u.value):i(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};class nw{constructor(e,r,n){var i,a,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=ov(e),d=new URL(l);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const c=`sb-${d.hostname.split(".")[0]}-auth-token`,u={db:Zb,realtime:tv,auth:Object.assign(Object.assign({},ev),{storageKey:c}),global:Qb},h=lv(n??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=iv(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new wb(new URL("rest/v1",d).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Yy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Xb(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return rw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:a,flowType:o,lock:l,debug:d},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sw({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,flowType:o,lock:l,debug:d,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Lb(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const iw=(s,e,r)=>new nw(s,e,r),aw="https://vuitwzisazvikrhtfthh.supabase.co",ow="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ1aXR3emlzYXp2aWtyaHRmdGhoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzOTU4ODIsImV4cCI6MjA2Njk3MTg4Mn0.VXCqythCUualJ7S9jVvnQUYe9BKnfMvbihtZT5c3qyE";console.log("Supabase URL:","Set");console.log("Supabase Key:","Set");const E=iw(aw,ow);E||console.error("Supabase client not initialized. Check environment variables.");const lw="login-learning.com",Hu=p.createContext(),_e={SUPER_ADMIN:"super_admin",BRANCH_MANAGER:"branch_manager",INSTRUCTOR:"instructor",STUDENT:"student",PARENT:"parent",GUEST:"guest"},Dl=s=>s?s.toLowerCase().endsWith(`@${lw}`):!1,cw=({children:s})=>{const[e,r]=p.useState(null),[n,i]=p.useState(!0),[a,o]=p.useState(!1),[l,d]=p.useState(_e.GUEST),{toast:c}=Dt();p.useEffect(()=>{(async()=>{try{if(!E){console.warn("Supabase client is not initialized. This might be because Supabase URL or Anon Key are missing or incorrect."),c&&c({title:"⚠️ Supabase ยังไม่ได้เริ่มการทำงาน",description:"กรุณาตรวจสอบการตั้งค่า Supabase URL และ Anon Key",variant:"destructive",duration:1e4}),i(!1);return}(()=>{try{const _=localStorage.getItem("sb-vuitwzisazvikrhtfthh-auth-token");if(_){const N=JSON.parse(_);(!N.refresh_token||!N.access_token)&&(localStorage.removeItem("sb-vuitwzisazvikrhtfthh-auth-token"),console.log("Cleared invalid stored auth data"))}}catch{localStorage.removeItem("sb-vuitwzisazvikrhtfthh-auth-token"),console.log("Cleared corrupted stored auth data")}})(),(async()=>{try{const{data:{session:_},error:N}=await E.auth.getSession();if(N){if(console.error("Error getting session:",N),N.message.includes("Invalid Refresh Token")||N.message.includes("Refresh Token Not Found")){await E.auth.signOut(),localStorage.removeItem("sb-vuitwzisazvikrhtfthh-auth-token"),console.log("Cleared invalid session");return}c&&c({title:"ข้อผิดพลาดในการโหลดเซสชัน",description:N.message,variant:"destructive"})}const k=(_==null?void 0:_.user)??null;if(r(k),k)if(Dl(k.email))o(!0),d(_e.SUPER_ADMIN);else try{const{data:j}=await E.from("user_profiles").select("role").eq("user_id",k.id).single(),T=(j==null?void 0:j.role)||"student",M=T==="admin"?_e.SUPER_ADMIN:T==="instructor"?_e.INSTRUCTOR:_e.STUDENT;o(T==="admin"||T==="instructor"),d(M)}catch{console.log("Could not fetch user role from database, using default"),o(!1),d(_e.STUDENT)}else o(!1),d(_e.GUEST)}catch(_){console.error("Exception in getSession:",_),c({title:"เกิดข้อผิดพลาดร้ายแรงในการโหลดเซสชัน",description:_.message,variant:"destructive"})}finally{i(!1)}})();const{data:b}=E.auth.onAuthStateChange(async(_,N)=>{console.log("Auth state change:",_,N);const k=(N==null?void 0:N.user)??null;if(r(k),k)if(Dl(k.email))o(!0),d(_e.SUPER_ADMIN);else try{const{data:j}=await E.from("user_profiles").select("role").eq("user_id",k.id).single(),T=(j==null?void 0:j.role)||"student",M=T==="admin"?_e.SUPER_ADMIN:T==="instructor"?_e.INSTRUCTOR:_e.STUDENT;o(T==="admin"||T==="instructor"),d(M)}catch{console.log("Could not fetch user role from database, using default"),o(!1),d(_e.STUDENT)}else o(!1),d(_e.GUEST);_==="SIGNED_IN"&&k?c({title:`เข้าสู่ระบบสำเร็จในฐานะ ${l}!`}):_==="PASSWORD_RECOVERY"?c({title:"การกู้คืนรหัสผ่าน",description:"คำแนะนำในการกู้คืนรหัสผ่านถูกส่งไปยังอีเมลของคุณแล้ว"}):_==="USER_UPDATED"&&c({title:"ข้อมูลผู้ใช้อัปเดตแล้ว"}),i(!1)});return()=>{b==null||b.subscription.unsubscribe()}}catch(v){console.error("Error initializing auth:",v),i(!1)}})()},[c]);const x={user:e,isAdmin:a,userRole:l,ROLES:_e,hasRole:g=>e?l===_e.SUPER_ADMIN?!0:l===g:!1,signInWithPassword:async(g,v)=>{if(!E)return c({title:"Supabase ยังไม่ได้เชื่อมต่อ",description:"กรุณาเชื่อมต่อ Supabase ก่อนใช้งาน",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};i(!0);const{data:w,error:b}=await E.auth.signInWithPassword({email:g,password:v});return i(!1),{data:w,error:b}},signUpWithPassword:async(g,v,w)=>{if(!E)return c({title:"Supabase ยังไม่ได้เชื่อมต่อ",description:"กรุณาเชื่อมต่อ Supabase ก่อนใช้งาน",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};i(!0);const{data:b,error:_}=await E.auth.signUp({email:g,password:v,options:{data:{full_name:w,role:_e.STUDENT}}});return i(!1),{data:b,error:_}},signInWithGoogle:async()=>{if(!E)return c({title:"Supabase ยังไม่ได้เชื่อมต่อ",description:"กรุณาเชื่อมต่อ Supabase ก่อนใช้งาน",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};i(!0);const{data:g,error:v}=await E.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});return i(!1),{data:g,error:v}},signOut:async()=>{if(!E)return c({title:"Supabase ยังไม่ได้เชื่อมต่อ",description:"กรุณาเชื่อมต่อ Supabase ก่อนใช้งาน",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};i(!0);const{error:g}=await E.auth.signOut();return i(!1),g||(r(null),o(!1),d(_e.GUEST)),{error:g}},loading:n,isSupabaseConnected:!!E};return t.jsx(Hu.Provider,{value:x,children:s})},De=()=>{const s=p.useContext(Hu);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},dw=Uc("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),S=te.forwardRef(({className:s,variant:e,size:r,asChild:n=!1,...i},a)=>{const o=n?Fm:"button";return t.jsx(o,{className:yt(dw({variant:e,size:r,className:s})),ref:a,...i})});S.displayName="Button";const uw=async()=>{try{const{data:s,error:e}=await E.from("courses").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(e)throw e;return{data:s.map(n=>({...n,enrollment_count:0})),error:null}}catch(s){return console.error("Error fetching courses:",s),{data:null,error:s}}},$a=async s=>{try{console.log("getCourseById: Fetching course with ID:",s);const{data:e,error:r}=await E.from("courses").select(`
        *,
        course_content(*)
      `).eq("id",s).eq("is_active",!0).maybeSingle();if(console.log("getCourseById: Database result:",{data:e,error:r}),r)throw console.error("getCourseById: Database error:",r),r;if(!e)return console.log("getCourseById: Course not found or inactive"),{data:null,error:{message:"ไม่พบคอร์สที่ระบุหรือคอร์สไม่เปิดใช้งาน",code:"COURSE_NOT_FOUND"}};let n=0;try{const{count:a}=await E.from("enrollments").select("*",{count:"exact",head:!0}).eq("course_id",s);n=a||0,console.log("getCourseById: Enrollment count:",n)}catch(a){console.warn("Could not fetch enrollment count:",a)}const i={data:{...e,enrollment_count:n,content:e.course_content||[]},error:null};return console.log("getCourseById: Final result:",i),i}catch(e){return console.error("getCourseById: Error fetching course:",e),{data:null,error:e}}},hw=async s=>{try{const{data:e,error:r}=await E.from("courses").select(`
        *,
        course_content(*)
      `).eq("id",s).maybeSingle();if(r)throw r;if(!e)return{data:null,error:{message:"ไม่พบคอร์สที่ระบุ",code:"COURSE_NOT_FOUND"}};let n=0;try{const{count:i}=await E.from("enrollments").select("*",{count:"exact",head:!0}).eq("course_id",s);n=i||0}catch(i){console.warn("Could not fetch enrollment count:",i)}return{data:{...e,enrollment_count:n,content:e.course_content||[]},error:null}}catch(e){return console.error("Error fetching course for admin:",e),{data:null,error:e}}},mw=async s=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n,error:i}=await E.from("user_profiles").select("user_id").eq("user_id",e.id).maybeSingle();if(i)throw console.error("Error checking user profile:",i),new Error("ไม่สามารถตรวจสอบข้อมูลผู้ใช้ได้");if(!n)throw new Error("ไม่พบข้อมูลผู้ใช้ กรุณาติดต่อผู้ดูแลระบบ");const{data:a,error:o}=await E.from("courses").insert([{...s,instructor_id:e.id}]).select().single();if(o)throw o;return{data:a,error:null}}catch(e){return console.error("Error creating course:",e),{data:null,error:e}}},fw=async(s,e)=>{try{const{data:r,error:n}=await E.from("courses").update(e).eq("id",s).select().single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error updating course:",r),{data:null,error:r}}},pw=async(s,e)=>{try{const{error:r}=await E.from("courses").update({is_active:e}).eq("id",s);if(r)throw r;return{error:null}}catch(r){return console.error("Error toggling course status:",r),{error:r}}},gw=async()=>{try{if(console.log("Fetching admin courses..."),!E)throw new Error("Supabase client not initialized");const{data:s,error:e}=await E.from("courses").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Supabase error:",e),new Error(`Database error: ${e.message}`);return console.log("Admin courses fetched successfully:",(s==null?void 0:s.length)||0,"courses"),{data:s||[],error:null}}catch(s){return console.error("Error fetching admin courses:",s),{data:null,error:{message:s.message||"Unknown error occurred",details:s}}}},xw=async()=>{try{const{data:s,error:e}=await E.from("courses").select("*").eq("is_active",!0).eq("is_featured",!0).order("created_at",{ascending:!1}).limit(4);if(e)throw e;return{data:s.map(n=>({...n,enrollment_count:0})),error:null}}catch(s){return console.error("Error fetching featured courses:",s),{data:null,error:s}}},yw=async(s,e)=>{try{const{error:r}=await E.from("courses").update({is_featured:e}).eq("id",s);if(r)throw r;return{error:null}}catch(r){return console.error("Error toggling course featured status:",r),{error:r}}},bw=async()=>{try{const{count:s,error:e}=await E.from("courses").select("*",{count:"exact",head:!0}).eq("is_active",!0);if(e)throw e;const{count:r,error:n}=await E.from("enrollments").select("*",{count:"exact",head:!0});if(n)throw n;const{count:i,error:a}=await E.from("enrollments").select("*",{count:"exact",head:!0}).eq("is_active",!0);if(a)throw a;const{count:o,error:l}=await E.from("enrollments").select("*",{count:"exact",head:!0}).not("completed_at","is",null);if(l)throw l;return{data:{totalCourses:s||0,totalEnrollments:r||0,activeEnrollments:i||0,completedEnrollments:o||0,completionRate:r>0?(o/r*100).toFixed(1):0},error:null}}catch(s){return console.error("Error fetching course stats:",s),{data:null,error:s}}},vw=()=>{const{toast:s}=Dt(),{user:e}=De(),[r,n]=p.useState([]),[i,a]=p.useState(!0),o=h=>h?h.split(`
`).map((m,f)=>t.jsxs(te.Fragment,{children:[m,f<h.split(`
`).length-1&&t.jsx("br",{})]},f)):"";p.useEffect(()=>{(async()=>{try{const{data:m,error:f}=await xw();f?(console.error("Error loading featured courses:",f),s({title:"ไม่สามารถโหลดคอร์สแนะนำได้",description:f.message,variant:"destructive"})):n(m||[])}catch(m){console.error("Error:",m)}finally{a(!1)}})()},[s]);const l=()=>{s({title:"🚧 ฟีเจอร์นี้ยังไม่พร้อมใช้งาน",description:"แต่ไม่ต้องกังวล! คุณสามารถขอให้เพิ่มฟีเจอร์นี้ในข้อความถัดไปได้! 🚀"})},d=[{icon:ie,value:"100+",label:"นักเรียน"},{icon:ge,value:"10+",label:"คอร์สเรียน"},{icon:Le,value:"90%",label:"อัตราสำเร็จ"},{icon:Se,value:"4.8",label:"คะแนนเฉลี่ย"}],c={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},u={type:"tween",ease:"anticipate",duration:.5};return t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:c,transition:u,children:[t.jsxs(be,{children:[t.jsx("title",{children:"หน้าแรก - Login Learning"}),t.jsx("meta",{name:"description",content:"ยินดีต้อนรับสู่ Login Learning แพลตฟอร์มเรียนรู้วิศวกรรมออนไลน์ครบวงจรสำหรับน้องมัธยม"})]}),t.jsxs("div",{className:"pt-24",children:[" ",t.jsx("section",{className:"pt-16 pb-20 px-6",children:t.jsx("div",{className:"max-w-7xl mx-auto",children:t.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[t.jsxs(L.div,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,delay:.2},children:[t.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold mb-6 leading-tight text-black",children:["เสริมทักษะ",t.jsx("span",{className:"block gradient-text",children:"วิศวกรรม"}),"ค้นหาตัวตน"]}),t.jsx("p",{className:"text-xl text-black mb-8 leading-relaxed",children:"Login Learning ช่วยน้องมัธยมค้นพบศักยภาพและความชอบด้านวิศวกรรม เพื่อการตัดสินใจเลือกเส้นทางอนาคตอย่างมั่นใจ"}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsx(S,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 text-lg px-8 py-6 pulse-glow",children:t.jsxs(Y,{to:e?"/dashboard":"/signup",children:[t.jsx(bi,{className:"w-5 h-5 mr-2"}),e?"ไปที่แดชบอร์ด":"เริ่มเรียนฟรี"]})}),t.jsx(S,{asChild:!0,size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50 text-lg px-8 py-6",children:t.jsxs(Y,{to:"/courses",children:["ดูคอร์สทั้งหมด",t.jsx(pi,{className:"w-5 h-5 ml-2"})]})})]})]}),t.jsxs(L.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,delay:.4},className:"relative",children:[t.jsx("div",{className:"floating-animation",children:t.jsx("img",{className:"rounded-2xl shadow-2xl w-full",alt:"นักเรียนมัธยมกำลังเรียนรู้เกี่ยวกับโครงงานวิศวกรรมอย่างสนุกสนาน",src:"https://images.unsplash.com/photo-1596496181861-5fc5346995ba"})}),t.jsx("div",{className:"absolute -bottom-6 -left-6 glass-effect rounded-xl p-4 shadow-lg",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center",children:t.jsx(da,{className:"w-6 h-6 text-blue-800"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-black font-semibold",children:"โครงงานสร้างสรรค์"}),t.jsx("p",{className:"text-black opacity-70",children:"จากผู้เชี่ยวชาญด้านวิศวกรรม"})]})]})})]})]})})}),t.jsx("section",{className:"py-16 px-6",children:t.jsx("div",{className:"max-w-7xl mx-auto",children:t.jsx(L.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:d.map((h,m)=>t.jsxs(L.div,{initial:{scale:.8,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.5,delay:m*.1},viewport:{once:!0},className:"glass-effect rounded-xl p-6 text-center hover:scale-105 transition-transform",children:[t.jsx(h.icon,{className:"w-8 h-8 text-blue-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-3xl font-bold text-black mb-2",children:h.value}),t.jsx("p",{className:"text-black",children:h.label})]},m))})})}),t.jsx("section",{className:"py-20 px-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs(L.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[t.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-black mb-6",children:"คอร์สเรียนแนะนำ"}),t.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:"คัดสรรคอร์สคุณภาพเพื่อจุดประกายความสนใจด้านวิศวกรรมในตัวคุณ"})]}),i?t.jsxs("div",{className:"col-span-full text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"กำลังโหลดคอร์สแนะนำ..."})]}):r.length>0?t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:r.slice(0,4).map((h,m)=>{var f;return t.jsx(L.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:m*.1},viewport:{once:!0},className:"course-card rounded-xl overflow-hidden",children:t.jsxs(Y,{to:`/courses/${h.id}`,className:"block",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{className:"w-full h-48 object-cover",alt:`ภาพปกคอร์ส ${h.title}`,src:h.image_url||h.thumbnail_url||"https://images.unsplash.com/photo-1635251595512-dc52146d5ae8",onError:y=>{y.target.src="https://images.unsplash.com/photo-1635251595512-dc52146d5ae8"}}),t.jsx("div",{className:"absolute top-4 right-4 bg-black/50 backdrop-blur-sm rounded-full px-3 py-1",children:t.jsx("span",{className:"text-white text-sm font-medium",children:h.level||h.difficulty_level||"ระดับกลาง"})}),h.is_featured&&t.jsx("div",{className:"absolute top-4 left-4 bg-yellow-500 rounded-full px-3 py-1",children:t.jsx(Se,{className:"w-4 h-4 text-white fill-current"})})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-black mb-3 line-clamp-2",children:h.title}),t.jsx("div",{className:"text-black mb-4 line-clamp-2",children:o(h.description)}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Se,{className:"w-4 h-4 text-yellow-500 fill-current"}),t.jsx("span",{className:"text-black font-medium",children:h.rating||"4.5"})]}),t.jsxs("div",{className:"flex items-center space-x-1 text-black",children:[t.jsx(ie,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm",children:((f=h.students)==null?void 0:f.toLocaleString())||h.enrolled_count||"0"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-1 text-black",children:[t.jsx(fe,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm",children:h.duration||`${h.duration_weeks||8} สัปดาห์`})]}),t.jsx(S,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:"เรียนเลย"})]})]})]})},h.id)})}):t.jsx("div",{className:"text-center py-16",children:t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-12 max-w-md mx-auto border border-blue-200",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl flex items-center justify-center mx-auto mb-6",children:t.jsx(Se,{className:"w-8 h-8 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"ยังไม่มีคอร์สแนะนำ"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"ผู้ดูแลระบบยังไม่ได้เลือกคอร์สแนะนำ"}),t.jsx(S,{asChild:!0,variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:t.jsx(Y,{to:"/courses",children:"ดูคอร์สทั้งหมด"})})]})}),t.jsx("div",{className:"text-center mt-12",children:t.jsx(S,{asChild:!0,size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50 text-lg px-8 py-4",children:t.jsxs(Y,{to:"/courses",children:["ดูคอร์สทั้งหมด",t.jsx(pi,{className:"w-5 h-5 ml-2"})]})})})]})}),t.jsx("section",{className:"py-20 px-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs(L.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[t.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-black mb-6",children:"ทำไมต้องเลือก Login Learning?"}),t.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:"เราให้มากกว่าการเรียนรู้ เราสร้างวิศวกรรุ่นใหม่ที่พร้อมสำหรับอนาคต"})]}),t.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:rn,title:"เรียนรู้จากโปรเจกต์จริง",description:"ฝึกฝนกับโครงงานที่ใช้งานได้จริงในอุตสาหกรรมและมหาวิทยาลัย"},{icon:ie,title:"พี่เลี้ยงผู้เชี่ยวชาญ",description:"เรียนกับพี่วิศวกรและผู้มีประสบการณ์ตรง คอยให้คำแนะนำใกล้ชิด"},{icon:la,title:"ค้นพบตัวเองและวางแผน",description:"ช่วยน้องๆ ค้นหาความถนัดและวางแผนเส้นทางสู่วิศวะฯ อย่างชัดเจน"}].map((h,m)=>t.jsxs(L.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:m*.2},viewport:{once:!0},className:"glass-effect rounded-xl p-8 text-center hover:scale-105 transition-transform cursor-pointer",onClick:l,children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-700 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx(h.icon,{className:"w-8 h-8 text-blue-800"})}),t.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:h.title}),t.jsx("p",{className:"text-black leading-relaxed",children:h.description})]},m))})]})}),t.jsx("section",{className:"py-20 px-6",children:t.jsx("div",{className:"max-w-4xl mx-auto text-center",children:t.jsxs(L.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"glass-effect rounded-2xl p-12 shadow-xl",children:[t.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-black mb-6",children:"พร้อมค้นหาเส้นทางวิศวะฯ ของคุณแล้วหรือยัง?"}),t.jsx("p",{className:"text-xl text-black mb-8",children:"เข้าร่วมกับเพื่อนๆ อีกกว่า 15,000 คน ที่ Login Learning"}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t.jsx(S,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 text-lg px-8 py-6",children:t.jsx(Y,{to:e?"/dashboard":"/signup",children:e?"ไปที่แดชบอร์ด":"เริ่มเรียนฟรีวันนี้"})}),t.jsx(S,{asChild:!0,size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50 text-lg px-8 py-6",children:t.jsx(Y,{to:"/contact",children:"ปรึกษาพี่ๆ ผู้เชี่ยวชาญ"})})]})]})})})]})]})},ww=()=>{const s={name:"LOGIN LEARNING Co.",mission:"คอร์สเรียนเสริมทักษะและค้นหาตัวตนของน้องมัธยม ต้น-ปลาย เพื่อตัดสินใจเข้าเรียนต่อในระดับมัธยมปลาย/มหาวิทยาลัย",address:"917 จรัญสนิทวงศ์ 75 บางพลัด บางพลัด",contacts:[{name:"พี่ก้อง",phone:"090-969-9578"},{name:"พี่เก็ก",phone:"083-436-0294"}],lineGroup:"https://line.me/ti/g/TbTTLXEkRS",email:"info@loginlearning.com"},e=[{name:"สาขาลาดกระบัง",address:"ถนนฉลองกรุง ลาดกระบัง, กรุงเทพฯ 10520",image:"Ladkrabang branch of Login Learning with students"},{name:"สาขาบางพลัด",address:"400 ซ.จรัญสนิทวงศ์ 75 แขวงบางพลัด, กรุงเทพฯ 10700",image:"Bang Phlat branch of Login Learning with modern classroom"},{name:"สาขาศรีราชา",address:"165/31 อำเภอศรีราชา ชลบุรี 20110",image:"Sriracha branch of Login Learning, coastal city view"},{name:"สาขาระยอง",address:"84/48 อำเภอเมืองระยอง ระยอง 21000",image:"Rayong branch of Login Learning, industrial area context"}],r=[{icon:da,title:"สอนทำโครงงานด้านวิศวกรรม",description:"เสริมสร้างทักษะการทำโครงงานจริง พร้อมพี่เลี้ยงดูแลใกล้ชิด"},{icon:rn,title:"สอนทฤษฎีและการแข่งขัน",description:"เตรียมความพร้อมทั้งภาคทฤษฎีและสนามแข่งขัน เช่น หุ่นยนต์เดินตามเส้น, TESA Top Gun Rally"},{icon:zc,title:"อบรม Professional Skills",description:"พัฒนาทักษะจำเป็นสำหรับวิศวกร เช่น การโปรแกรม (Python, C++), Arduino, IoT, แขนกล DOBOT, PLC"},{icon:Jf,title:"Engineering Services",description:"บริการด้านวิศวกรรม เช่น ออกแบบชุดฝึกขนถ่ายโลหะ, เครื่องตรวจความสุกมะม่วง, เครื่องจำลองการชุบโลหะ"},{icon:ie,title:"จัดค่ายนอกสถานที่",description:"เปิดประสบการณ์การเรียนรู้วิศวกรรมรูปแบบใหม่ สนุกและได้ความรู้"}],n=["แบบจำลองการปลูกข้าวสมัยใหม่ด้วยระบบ IOT","แบบจำลองการควบคุมและตรวจสอบคุณภาพน้ำด้วยระบบ IOT และ AI","แบบจำลองเครื่องกวนสารโดยใช้ AI และ PID Control","เครื่องตรวจความสุกมะม่วง","เครื่องช่วยกายภาพบำบัดแขน","กระถางต้นไม้อัจฉริยะ","เครื่องตรวจสอบคุณภาพน็อตและจำลองการชุบแข็ง"],i={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},a={type:"tween",ease:"anticipate",duration:.5};return t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:i,transition:a,className:"pt-24 pb-16 px-6",children:[t.jsxs(be,{children:[t.jsx("title",{children:"เกี่ยวกับเรา - Login Learning"}),t.jsx("meta",{name:"description",content:`เรียนรู้เพิ่มเติมเกี่ยวกับ ${s.name} ภารกิจของเรา และทีมงานผู้เชี่ยวชาญที่พร้อมช่วยน้องๆ ค้นหาเส้นทางวิศวะ`})]}),t.jsxs("section",{className:"text-center mb-16 pt-8",children:[t.jsxs(L.h1,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-4",children:["เกี่ยวกับ ",t.jsx("span",{className:"gradient-text",children:"Login Learning"})]}),t.jsx(L.p,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.4},className:"text-xl text-gray-700 max-w-3xl mx-auto",children:s.mission})]}),t.jsx("section",{className:"mb-16",children:t.jsxs("div",{className:"max-w-4xl mx-auto glass-effect p-8 rounded-xl shadow-lg",children:[t.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 text-center",children:"ข้อมูลองค์กร"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[t.jsxs("div",{children:[t.jsx("img",{className:"rounded-lg shadow-md w-full h-64 object-cover mb-4",alt:"ทีมงาน Login Learning กำลังสอนนักเรียน",src:"/images/profile.jpg"}),t.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[t.jsx(bs,{className:"w-6 h-6 text-blue-400 mt-1 shrink-0"}),t.jsx("p",{className:"text-gray-800",children:s.address})]}),t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx(pt,{className:"w-6 h-6 text-blue-400 shrink-0"}),t.jsx("a",{href:`mailto:${s.email}`,className:"text-gray-800 hover:text-blue-600 transition-colors",children:s.email})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"ติดต่อเรา:"}),s.contacts.map((o,l)=>t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx(Gt,{className:"w-6 h-6 text-blue-400 shrink-0"}),t.jsxs("p",{className:"text-gray-800",children:[o.name,": ",o.phone]})]},l)),t.jsxs("div",{className:"flex items-center space-x-3 mt-4",children:[t.jsx(ie,{className:"w-6 h-6 text-green-400 shrink-0"}),t.jsx("a",{href:s.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"text-gray-800 hover:text-green-600 transition-colors underline",children:"เข้าร่วม Line Group ของเรา"})]}),t.jsx("img",{className:"rounded-lg shadow-md w-full h-40 object-cover mt-4",alt:"บรรยากาศการเรียนการสอนที่ Login Learning",src:"https://images.unsplash.com/photo-1645001399108-e5c236218018"})]})]})]})}),t.jsxs("section",{className:"mb-16",id:"branches",children:[t.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-10 text-center",children:"สาขาของเรา"}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((o,l)=>t.jsxs(L.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.5,delay:l*.1},viewport:{once:!0},className:"course-card rounded-xl overflow-hidden p-6 text-center",children:[t.jsx("img",{className:"w-full h-40 object-cover rounded-md mb-4",alt:`สาขา ${o.name} ของ Login Learning`,src:"https://images.unsplash.com/photo-1683419405479-e79a7a6a1d53"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:o.name}),t.jsx("p",{className:"text-gray-600 text-sm",children:o.address})]},l))})]}),t.jsxs("section",{className:"mb-16",id:"services",children:[t.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-10 text-center",children:"บริการและกิจกรรมของเรา"}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map((o,l)=>t.jsxs(L.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:l*.1},viewport:{once:!0},className:"glass-effect rounded-xl p-6 hover:shadow-xl transition-shadow",children:[t.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mb-6 mx-auto",children:t.jsx(o.icon,{className:"w-8 h-8 text-blue-800"})}),t.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-3 text-center",children:o.title}),t.jsx("p",{className:"text-gray-700 leading-relaxed text-center",children:o.description})]},l))})]}),t.jsxs("section",{id:"projects",children:[t.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-10 text-center",children:"ตัวอย่างโครงงาน ปี 2568"}),t.jsxs("div",{className:"max-w-3xl mx-auto glass-effect p-8 rounded-xl shadow-lg",children:[t.jsx("ul",{className:"list-disc list-inside space-y-3 text-gray-800",children:n.map((o,l)=>t.jsx(L.li,{initial:{x:-20,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.3,delay:l*.05},viewport:{once:!0},className:"text-lg",children:o},l))}),t.jsx("p",{className:"text-gray-600 mt-6 text-sm italic",children:"ข้อมูลนี้เป็นข้อมูลเบื้องต้นและอาจมีการเปลี่ยนแปลง โปรดตรวจสอบข้อมูลล่าสุดจากประกาศอย่างเป็นทางการ"})]})]})]})},Z=te.forwardRef(({className:s,type:e,...r},n)=>t.jsx("input",{type:e,className:yt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:n,...r}));Z.displayName="Input";const jw=()=>{const{toast:s}=ae(),[e,r]=p.useState([]),[n,i]=p.useState(!0),[a,o]=p.useState(""),[l,d]=p.useState("ทั้งหมด"),c=x=>x?x.split(`
`).map((g,v)=>t.jsxs(te.Fragment,{children:[g,v<x.split(`
`).length-1&&t.jsx("br",{})]},v)):"ไม่มีคำอธิบาย",u=p.useCallback(async()=>{i(!0);const{data:x,error:g}=await uw();g?s({title:"ข้อผิดพลาดในการโหลดข้อมูล",description:g.message,variant:"destructive"}):r(x||[]),i(!1)},[s]);p.useEffect(()=>{u()},[u]);const h=["ทั้งหมด",...new Set(e.map(x=>x.category).filter(Boolean))],m=e.filter(x=>{var w;const g=x.title.toLowerCase().includes(a.toLowerCase())||((w=x.description)==null?void 0:w.toLowerCase().includes(a.toLowerCase())),v=l==="ทั้งหมด"||x.category===l;return g&&v}),f={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},y={type:"tween",ease:"anticipate",duration:.5};return t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:f,transition:y,className:"pt-24 pb-16 px-6",children:[t.jsxs(be,{children:[t.jsx("title",{children:"คอร์สเรียนทั้งหมด - Login Learning"}),t.jsx("meta",{name:"description",content:"เลือกดูคอร์สเรียนวิศวกรรมที่หลากหลายของเรา ออกแบบมาเพื่อน้องๆ มัธยมโดยเฉพาะ"})]}),t.jsx("section",{className:"pt-8 mb-12",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs(L.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-center mb-10",children:[t.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-blue-900 mb-4",children:["คอร์สเรียน ",t.jsx("span",{className:"gradient-text",children:"ทั้งหมด"})]}),t.jsx("p",{className:"text-xl text-blue-800 max-w-2xl mx-auto",children:"ค้นหาคอร์สที่ใช่ จุดประกายแรงบันดาลใจสู่เส้นทางวิศวะฯ กับ Login Learning"})]}),t.jsxs(L.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.4},className:"flex flex-col md:flex-row gap-4 mb-8 p-4 glass-effect rounded-lg",children:[t.jsxs("div",{className:"relative flex-grow",children:[t.jsx(Z,{type:"text",placeholder:"ค้นหาคอร์สเรียน...",className:"pl-10 text-black bg-white/90 focus:bg-white",value:a,onChange:x=>o(x.target.value)}),t.jsx(Yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})]}),t.jsx("select",{className:"px-4 py-2 rounded-lg bg-white/90 text-black border border-white/30 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",value:l,onChange:x=>d(x.target.value),children:h.map(x=>t.jsx("option",{value:x,children:x},x))})]}),n?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#667eea] mx-auto mb-4"}),t.jsx("p",{className:"text-blue-700",children:"กำลังโหลดคอร์สเรียน..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-6 text-blue-700",children:["พบ ",m.length," คอร์สเรียน",a&&` สำหรับ "${a}"`,l!=="ทั้งหมด"&&` ในหมวดหมู่ "${l}"`]}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:m.map((x,g)=>t.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:g*.05+.5},className:"course-card rounded-xl overflow-hidden hover:scale-105 transition-transform duration-300",children:t.jsxs(Y,{to:`/courses/${x.id}`,className:"block",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{className:"w-full h-48 object-cover",alt:`ภาพปกคอร์ส ${x.title}`,src:x.image_url||"https://images.unsplash.com/photo-1635251595512-dc52146d5ae8"}),t.jsx("div",{className:"absolute top-3 right-3 bg-blue-300/80 backdrop-blur-sm rounded-full px-3 py-1 text-xs font-medium text-white-300",children:x.level==="beginner"?"ระดับเริ่มต้น":x.level==="intermediate"?"ระดับกลาง":x.level==="advanced"?"ระดับสูง":"ไม่ระบุ"}),t.jsx("div",{className:"absolute bottom-3 left-3 bg-gradient-to-r from-yellow-300 to-red-200 text-white-300 px-2 py-1 rounded text-xs font-semibold",children:x.category||"ทั่วไป"})]}),t.jsxs("div",{className:"p-5",children:[t.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-2 line-clamp-2 h-14",children:x.title}),t.jsx("div",{className:"text-sm text-blue-700 mb-3 line-clamp-3 h-[60px]",children:c(x.description)}),t.jsxs("div",{className:"flex items-center justify-between mb-3 text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(qt,{className:"w-4 h-4 text-blue-400"}),t.jsx("span",{className:"text-blue-900 font-medium",children:x.instructor_name||"อาจารย์"})]}),t.jsxs("div",{className:"flex items-center space-x-1 text-blue-700",children:[t.jsx(ie,{className:"w-4 h-4"}),t.jsx("span",{children:x.enrollment_count||0})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-1 text-blue-700 text-sm",children:[t.jsx(fe,{className:"w-4 h-4"}),t.jsxs("span",{children:[x.duration_hours||0," ชั่วโมง"]})]}),t.jsx("div",{className:"text-blue-900 font-bold",children:x.price>0?`฿${x.price.toLocaleString()}`:"ฟรี"})]}),t.jsx(S,{className:"w-full mt-4 bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-gray-800",children:"ดูรายละเอียด"})]})]})},x.id))}),m.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ge,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-blue-900 mb-2",children:"ไม่พบคอร์สเรียน"}),t.jsx("p",{className:"text-blue-700 mb-4",children:"ลองปรับเปลี่ยนคำค้นหาหรือหมวดหมู่"}),t.jsx(S,{onClick:()=>{o(""),d("ทั้งหมด")},variant:"outline",className:"text-blue-900 border-blue-300 hover:bg-blue-100",children:"ดูคอร์สทั้งหมด"})]})]})]})})]})},Nw=async(s=null)=>{var e,r,n;try{let i=s;if(!i){const{data:{user:u},error:h}=await E.auth.getUser();if(h||!u)throw new Error("User not authenticated");i=u}console.log("ensureUserProfile: Checking profile for user:",i.id);const{data:a,error:o}=await E.from("user_profiles").select("user_id, full_name, email, role").eq("user_id",i.id).maybeSingle();if(o)throw console.error("ensureUserProfile: Error checking profile:",o),o;if(a)return console.log("ensureUserProfile: Profile exists:",a),{data:a,error:null,created:!1};console.log("ensureUserProfile: Creating new profile for user:",i.id);const l={user_id:i.id,full_name:((e=i.user_metadata)==null?void 0:e.full_name)||((r=i.user_metadata)==null?void 0:r.name)||((n=i.email)==null?void 0:n.split("@")[0])||"ผู้ใช้ใหม่",email:i.email,role:"student",is_active:!0},{data:d,error:c}=await E.from("user_profiles").insert([l]).select().single();if(c)throw console.error("ensureUserProfile: Error creating profile:",c),c;return console.log("ensureUserProfile: Profile created successfully:",d),{data:d,error:null,created:!0}}catch(i){return console.error("ensureUserProfile: Error:",i),{data:null,error:i,created:!1}}},_w=async s=>{try{console.log("enrollmentService: Starting enrollment for courseId:",s);const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)throw console.error("enrollmentService: User authentication error:",r),new Error("User not authenticated");console.log("enrollmentService: User authenticated:",e.id),console.log("enrollmentService: Ensuring user profile exists...");const{data:n,error:i,created:a}=await Nw(e);if(i)throw console.error("enrollmentService: Error ensuring user profile:",i),new Error("ไม่สามารถตรวจสอบหรือสร้างโปรไฟล์ผู้ใช้ได้ กรุณาลองใหม่");a?console.log("enrollmentService: New user profile created for enrollment"):console.log("enrollmentService: User profile confirmed:",n.user_id),console.log("enrollmentService: Checking for existing enrollment...");const{data:o,error:l}=await E.from("enrollments").select("*").eq("user_id",e.id).eq("course_id",s).maybeSingle();if(console.log("enrollmentService: Existing enrollment check:",{existingEnrollment:o,checkError:l}),l)throw console.error("enrollmentService: Error checking existing enrollment:",l),l;if(o)return console.log("enrollmentService: User already enrolled"),{data:null,error:{message:"คุณได้ลงทะเบียนคอร์สนี้แล้ว"}};console.log("enrollmentService: Creating new enrollment...");const d={user_id:e.id,course_id:s,is_active:!0,progress_percentage:0};console.log("enrollmentService: Enrollment data:",d);const{data:c,error:u}=await E.from("enrollments").insert([d]).select(`
        *,
        courses(
          title,
          user_profiles!courses_instructor_id_fkey(full_name)
        )
      `).single();if(console.log("enrollmentService: Enrollment creation result:",{data:c,error:u}),u)throw console.error("enrollmentService: Enrollment creation failed:",u),u;return console.log("enrollmentService: Enrollment created successfully:",c),{data:c,error:null}}catch(e){return console.error("enrollmentService: Error enrolling in course:",e),{data:null,error:e}}},Wu=async s=>{try{console.log("enrollmentService: Checking enrollment for courseId:",s);const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)return console.log("enrollmentService: No user found or error:",r),{isEnrolled:!1,error:null};console.log("enrollmentService: Checking for user:",e.id);const{data:n,error:i}=await E.from("enrollments").select("id, is_active, enrolled_at, progress_percentage, completed_at").eq("user_id",e.id).eq("course_id",s).maybeSingle();if(console.log("enrollmentService: Database query result:",{data:n,error:i}),i)throw console.error("enrollmentService: Database error:",i),i;const a={isEnrolled:!!n,status:n?{...n,enrollment_id:n.id}:null,error:null};return console.log("enrollmentService: Final result:",a),a}catch(e){return console.error("enrollmentService: Error checking enrollment:",e),{isEnrolled:!1,error:e}}},Ku=async s=>{try{const{data:e,error:r}=await E.from("attachments").select("*").eq("entity_type","course_content").eq("entity_id",s).order("upload_order",{ascending:!0});if(r)throw r;return{data:e||[],error:null}}catch(e){return console.error("Error fetching content attachments:",e),{data:[],error:e}}},kw=async(s,e,r=1)=>{try{console.log("Starting file upload:",{fileName:s.name,contentId:e,fileSize:s.size});const{data:{user:n},error:i}=await E.auth.getUser();if(i)throw console.error("User authentication error:",i),new Error(`Authentication error: ${i.message}`);if(!n)throw new Error("User not authenticated - please login first");if(console.log("User authenticated:",n.id),!s)throw new Error("No file provided");if(!e)throw new Error("Content ID is required");const a=Date.now(),o=s.name.split(".").pop(),l=s.name.replace(/[^a-zA-Z0-9.-]/g,"_"),d=`${a}_${l}`,c=`attachments/${e}/${d}`;console.log("Generated file path:",c),console.log("Checking storage bucket access...");let u=!1;try{const{data:b,error:_}=await E.storage.listBuckets();if(_)console.warn("Cannot list buckets, trying direct access:",_.message);else{const N=b.find(k=>k.name==="course-files");N&&(console.log("Storage bucket found in list:",N.name),u=!0)}if(!u){console.log("Testing direct bucket access...");const{error:N}=await E.storage.from("course-files").list("",{limit:1});if(N)throw console.error("Direct bucket access failed:",N),new Error(`Storage bucket "course-files" is not accessible: ${N.message}. Please check bucket exists and permissions are correct.`);console.log("Direct bucket access successful"),u=!0}}catch(b){throw console.error("Storage bucket check failed:",b),new Error(`Storage setup error: ${b.message}`)}if(!u)throw new Error('Storage bucket "course-files" not found or not accessible. Please setup storage first.');console.log("Uploading file to storage...");const{data:h,error:m}=await E.storage.from("course-files").upload(c,s,{cacheControl:"3600",upsert:!1});if(m)throw console.error("Storage upload error:",m),new Error(`File upload failed: ${m.message}`);console.log("File uploaded successfully:",h);const{data:{publicUrl:f}}=E.storage.from("course-files").getPublicUrl(c);console.log("Generated public URL:",f);const{error:y}=await E.from("attachments").select("count").limit(1);if(y&&y.code==="42P01")throw new Error('Database table "attachments" not found. Please run the database schema setup.');console.log("Saving attachment record to database...");let x=1;if(typeof r=="number"&&r>0&&r<=2147483647)x=Math.floor(r);else if(typeof r=="string"){const b=parseInt(r);!isNaN(b)&&b>0&&b<=2147483647&&(x=b)}console.log("Original uploadOrder:",r,"Valid uploadOrder:",x);const g={entity_type:"course_content",entity_id:e,filename:s.name,original_filename:s.name,file_url:f,file_path:c,file_size:s.size,file_extension:(o==null?void 0:o.toLowerCase())||"unknown",mime_type:s.type||"application/octet-stream",upload_order:x,is_public:!1,uploaded_by:n.id};console.log("Attachment record:",g);const{data:v,error:w}=await E.from("attachments").insert([g]).select().single();if(w){console.error("Database insert error:",w);try{await E.storage.from("course-files").remove([c]),console.log("Cleaned up uploaded file after database error")}catch(b){console.error("Failed to cleanup file:",b)}throw new Error(`Database error: ${w.message}`)}return console.log("Attachment record saved:",v),{data:{...v,url:f,file_path:c},error:null}}catch(n){return console.error("Error uploading attachment:",n),{data:null,error:{message:n.message,details:n}}}},vn=async s=>{var e;try{console.log("Starting course image upload:",{fileName:s.name,fileSize:s.size});const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");if(!s)throw new Error("No image file provided");if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(s.type))throw new Error("ไฟล์ต้องเป็นรูปภาพ (JPG, PNG, WebP เท่านั้น)");const a=5*1024*1024;if(s.size>a)throw new Error("ขนาดไฟล์ต้องไม่เกิน 5MB");const o=(e=s.name.split(".").pop())==null?void 0:e.toLowerCase(),l=`course-cover-${Date.now()}-${Math.random().toString(36).substring(2)}.${o}`,d=`course-covers/${l}`;console.log("Uploading image to path:",d);const{data:c,error:u}=await E.storage.from("course-files").upload(d,s,{cacheControl:"3600",upsert:!1});if(u)throw console.error("Storage upload error:",u),new Error(`ไม่สามารถอัปโหลดรูปภาพได้: ${u.message}`);console.log("Image upload successful:",c);const{data:h}=E.storage.from("course-files").getPublicUrl(d);if(!(h!=null&&h.publicUrl))throw new Error("ไม่สามารถสร้าง URL สำหรับรูปภาพได้");return console.log("Public URL generated:",h.publicUrl),{data:{filePath:d,publicUrl:h.publicUrl,fileName:l},error:null}}catch(r){return console.error("Error uploading course image:",r),{data:null,error:r}}},Sw=async s=>{var e;try{console.log("Starting profile image upload:",{fileName:s.name,fileSize:s.size});const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");if(!s)throw new Error("No image file provided");if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(s.type))throw new Error("ไฟล์ต้องเป็นรูปภาพ (JPG, PNG, WebP เท่านั้น)");const a=2*1024*1024;if(s.size>a)throw new Error("ขนาดไฟล์ต้องไม่เกิน 2MB");const o=(e=s.name.split(".").pop())==null?void 0:e.toLowerCase(),l=`profile-${r.id}-${Date.now()}.${o}`,d=`profile-images/${l}`;console.log("Uploading profile image to path:",d);try{const{data:m}=await E.storage.from("course-files").list("profile-images",{search:`profile-${r.id}-`});if(m&&m.length>0){const f=m.map(y=>`profile-images/${y.name}`);await E.storage.from("course-files").remove(f),console.log("Removed old profile images:",f)}}catch(m){console.warn("Could not cleanup old profile images:",m)}const{data:c,error:u}=await E.storage.from("course-files").upload(d,s,{cacheControl:"3600",upsert:!1});if(u)throw console.error("Storage upload error:",u),new Error(`ไม่สามารถอัปโหลดรูปโปรไฟล์ได้: ${u.message}`);console.log("Profile image upload successful:",c);const{data:h}=E.storage.from("course-files").getPublicUrl(d);if(!(h!=null&&h.publicUrl))throw new Error("ไม่สามารถสร้าง URL สำหรับรูปโปรไฟล์ได้");return console.log("Profile image URL generated:",h.publicUrl),{data:{filePath:d,publicUrl:h.publicUrl,fileName:l},error:null}}catch(r){return console.error("Error uploading profile image:",r),{data:null,error:r}}},Cw=async(s,e={})=>{try{const{categoryId:r=null,topicType:n=null,search:i=null,sortBy:a="last_reply_at",sortOrder:o="desc",page:l=1,limit:d=20}=e;let c=E.from("forum_topics").select("*").eq("course_id",s);i&&(c=c.textSearch("search_vector",i)),c=c.order("is_pinned",{ascending:!1}),c=c.order(a,{ascending:o==="asc"});const u=(l-1)*d,h=u+d-1;c=c.range(u,h);const{data:m,error:f,count:y}=await c;if(f)throw f;if(!m||m.length===0)return{data:[],error:null,pagination:{page:l,limit:d,total:0,hasMore:!1}};const x=[...new Set(m.map(w=>w.author_id).filter(Boolean))];let g={};if(x.length>0){const{data:w}=await E.from("user_profiles").select("user_id, full_name, avatar_url, role").in("user_id",x);w&&w.forEach(b=>{g[b.user_id]=b})}return{data:m.map(w=>({...w,user_profiles:g[w.author_id]||null})),error:null,pagination:{page:l,limit:d,total:y,hasMore:y>h+1}}}catch(r){return console.error("Error fetching course topics:",r),{data:null,error:r,pagination:null}}},Tw=async s=>{try{const{data:e,error:r}=await E.from("forum_topics").select("*").eq("id",s).single();if(r)throw r;let n=null;if(e.author_id){const{data:h}=await E.from("user_profiles").select("user_id, full_name, avatar_url, role").eq("user_id",e.author_id).single();n=h}let i=null,a=null;if(e.course_id){const{data:h}=await E.from("courses").select("id, title").eq("id",e.course_id).single();a=h}const{data:o,error:l}=await E.from("forum_replies").select("*").eq("topic_id",s).order("created_at",{ascending:!0});if(l)throw l;let d={};if(o&&o.length>0){const h=[...new Set(o.map(m=>m.author_id).filter(Boolean))];if(h.length>0){const{data:m}=await E.from("user_profiles").select("user_id, full_name, avatar_url, role").in("user_id",h);m&&m.forEach(f=>{d[f.user_id]=f})}}const c=(o||[]).map(h=>({...h,user_profiles:d[h.author_id]||null}));return await Ow(s),{data:{...e,user_profiles:n,forum_categories:i,courses:a,replies:c},error:null}}catch(e){return console.error("Error fetching topic with replies:",e),{data:null,error:e}}},Ew=async s=>{var e;try{const n=(e=(await E.auth.getUser()).data.user)==null?void 0:e.id,{data:i,error:a}=await E.from("forum_topics").insert([{...s,author_id:n}]).select("*").single();if(a)throw a;let o=null;if(n){const{data:c}=await E.from("user_profiles").select("user_id, full_name, avatar_url, role").eq("user_id",n).single();o=c}return{data:{...i,user_profiles:o,forum_categories:null},error:null}}catch(r){return console.error("Error creating topic:",r),{data:null,error:r}}},Pw=async s=>{try{const{error:e}=await E.from("forum_topics").delete().eq("id",s);if(e)throw e;return{error:null}}catch(e){return console.error("Error deleting topic:",e),{error:e}}},Aw=async(s,e)=>{try{const{data:r,error:n}=await E.from("forum_topics").update({is_pinned:e}).eq("id",s).select().single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error toggling topic pin:",r),{data:null,error:r}}},Dw=async(s,e)=>{try{const{data:r,error:n}=await E.from("forum_topics").update({is_locked:e}).eq("id",s).select().single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error toggling topic lock:",r),{data:null,error:r}}},Iw=async(s,e=null)=>{try{const{data:r,error:n}=await E.from("forum_topics").update({is_solved:!0,solved_reply_id:e}).eq("id",s).select().single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error marking topic as solved:",r),{data:null,error:r}}},Ow=async s=>{try{const{data:e}=await E.from("forum_topics").select("view_count").eq("id",s).single(),r=(e==null?void 0:e.view_count)||0,{error:n}=await E.from("forum_topics").update({view_count:r+1}).eq("id",s);if(n)throw n;return{error:null}}catch(e){return console.warn("Error incrementing view count:",e),{error:e}}},Lw=async s=>{var e;try{const n=(e=(await E.auth.getUser()).data.user)==null?void 0:e.id,{data:i,error:a}=await E.from("forum_replies").insert([{...s,author_id:n}]).select("*").single();if(a)throw a;let o=null;if(n){const{data:d}=await E.from("user_profiles").select("user_id, full_name, avatar_url, role").eq("user_id",n).single();o=d}return{data:{...i,user_profiles:o},error:null}}catch(r){return console.error("Error creating reply:",r),{data:null,error:r}}},Rw=async(s,e)=>{try{await E.from("forum_replies").update({is_best_answer:!1}).eq("topic_id",e);const{data:r,error:n}=await E.from("forum_replies").update({is_best_answer:!0}).eq("id",s).select().single();if(n)throw n;return await Iw(e,s),{data:r,error:null}}catch(r){return console.error("Error marking reply as best answer:",r),{data:null,error:r}}},Xu=async(s,e)=>{var r;try{const n=(r=(await E.auth.getUser()).data.user)==null?void 0:r.id;if(!n)throw new Error("User not authenticated");const{data:i,error:a}=await E.from("forum_likes").select("id").eq("user_id",n).eq("target_type",s).eq("target_id",e).maybeSingle();if(a&&a.code!=="PGRST116")throw a;if(i){const{error:o}=await E.from("forum_likes").delete().eq("id",i.id);if(o)throw o;return{data:{liked:!1},error:null}}else{const{data:o,error:l}=await E.from("forum_likes").insert([{user_id:n,target_type:s,target_id:e}]).select().single();if(l)throw l;return{data:{liked:!0},error:null}}}catch(n){return console.error("Error toggling like:",n),{data:null,error:n}}},Mw=async(s,e="all")=>{var r;try{const n=(r=(await E.auth.getUser()).data.user)==null?void 0:r.id;if(!n)throw new Error("User not authenticated");const{data:i,error:a}=await E.from("forum_subscriptions").upsert([{user_id:n,topic_id:s,notification_type:e}]).select().single();if(a)throw a;return{data:i,error:null}}catch(n){return console.error("Error subscribing to topic:",n),{data:null,error:n}}},$w=async s=>{var e;try{const r=(e=(await E.auth.getUser()).data.user)==null?void 0:e.id;if(!r)throw new Error("User not authenticated");const{error:n}=await E.from("forum_subscriptions").delete().eq("user_id",r).eq("topic_id",s);if(n)throw n;return{error:null}}catch(r){return console.error("Error unsubscribing from topic:",r),{error:r}}},Rr=s=>{const e=new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"เมื่อสักครู่":n<3600?`${Math.floor(n/60)} นาทีที่แล้ว`:n<86400?`${Math.floor(n/3600)} ชั่วโมงที่แล้ว`:n<604800?`${Math.floor(n/86400)} วันที่แล้ว`:e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"})},Ju=s=>({discussion:"การสนทนา",question:"คำถาม",announcement:"ประกาศ",assignment_help:"ความช่วยเหลือเรื่องงาน"})[s]||s,Yu=s=>({discussion:"blue",question:"yellow",announcement:"red",assignment_help:"green"})[s]||"gray",Fw=({topic:s,onTopicClick:e,onLike:r,onPin:n,onLock:i,onDelete:a,onEdit:o,userRole:l="student",currentUserId:d})=>{var W,C,z;const[c,u]=p.useState(!1),[h,m]=p.useState(s.user_liked||!1),[f,y]=p.useState(s.like_count||0),x=d===s.author_id,g=l==="instructor"||l==="admin",v=g,w=x||g,b=x||g,_=Yu(s.topic_type),N={blue:"bg-blue-100 text-blue-800 border-blue-200",yellow:"bg-yellow-100 text-yellow-800 border-yellow-200",red:"bg-red-100 text-red-800 border-red-200",green:"bg-green-100 text-green-800 border-green-200",gray:"bg-gray-100 text-gray-800 border-gray-200"},k=async R=>{R.stopPropagation();try{await r(s.id),m(!h),y($=>h?$-1:$+1)}catch($){console.error("Error liking topic:",$)}},j=async R=>{R.stopPropagation();try{await n(s.id,!s.is_pinned)}catch($){console.error("Error pinning topic:",$)}},T=async R=>{R.stopPropagation();try{await i(s.id,!s.is_locked)}catch($){console.error("Error locking topic:",$)}},M=R=>{R.stopPropagation(),o(s)},B=async R=>{if(R.stopPropagation(),window.confirm("คุณแน่ใจหรือไม่ที่จะลบหัวข้อนี้?"))try{await a(s.id)}catch($){console.error("Error deleting topic:",$)}};return t.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer relative ${s.is_pinned?"ring-2 ring-yellow-200 bg-yellow-50":""}`,onClick:()=>e(s.id),children:[t.jsx("div",{className:"flex items-start justify-between p-6 pb-3",children:t.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(W=s.user_profiles)!=null&&W.avatar_url?t.jsx("img",{src:s.user_profiles.avatar_url,alt:s.user_profiles.full_name,className:"w-full h-full rounded-full object-cover"}):t.jsx(it,{className:"w-5 h-5"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex-1 pr-4",children:[t.jsx("h3",{className:`text-lg font-semibold text-gray-900 line-clamp-2 ${s.is_locked?"opacity-60":""}`,children:s.title}),t.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${N[_]}`,children:Ju(s.topic_type)}),s.forum_categories&&t.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700 border border-gray-200",children:s.forum_categories.name}),s.is_pinned&&t.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 border border-yellow-200",children:[t.jsx(yi,{className:"w-3 h-3"}),t.jsx("span",{children:"ปักหมุด"})]}),s.is_locked&&t.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 border border-red-200",children:[t.jsx(Et,{className:"w-3 h-3"}),t.jsx("span",{children:"ล็อค"})]}),s.is_solved&&t.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 border border-green-200",children:[t.jsx(ve,{className:"w-3 h-3"}),t.jsx("span",{children:"แก้ไขแล้ว"})]})]})]}),(w||b||v)&&t.jsxs("div",{className:"relative",children:[t.jsx(S,{variant:"ghost",size:"sm",onClick:R=>{R.stopPropagation(),u(!c)},className:"p-1 h-8 w-8",children:t.jsx(ep,{className:"w-4 h-4"})}),c&&t.jsxs("div",{className:"absolute right-0 top-8 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[150px]",children:[w&&t.jsxs("button",{onClick:M,className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2",children:[t.jsx(ir,{className:"w-4 h-4"}),t.jsx("span",{children:"แก้ไข"})]}),v&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:j,className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2",children:[t.jsx(yi,{className:"w-4 h-4"}),t.jsx("span",{children:s.is_pinned?"ยกเลิกปักหมุด":"ปักหมุด"})]}),t.jsxs("button",{onClick:T,className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2",children:[t.jsx(Et,{className:"w-4 h-4"}),t.jsx("span",{children:s.is_locked?"ปลดล็อค":"ล็อค"})]})]}),b&&t.jsxs("button",{onClick:B,className:"w-full px-3 py-2 text-left text-sm hover:bg-red-50 text-red-600 flex items-center space-x-2",children:[t.jsx(Re,{className:"w-4 h-4"}),t.jsx("span",{children:"ลบ"})]}),t.jsxs("button",{onClick:R=>{R.stopPropagation(),u(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 border-t border-gray-100",children:[t.jsx(Gf,{className:"w-4 h-4"}),t.jsx("span",{children:"รายงาน"})]})]})]})]}),t.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3",children:s.content}),t.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-3",children:[t.jsx("span",{className:"font-medium",children:((C=s.user_profiles)==null?void 0:C.full_name)||"ผู้ใช้ไม่ระบุตัวตน"}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(fe,{className:"w-3 h-3"}),t.jsx("span",{children:Rr(s.created_at)})]}),((z=s.user_profiles)==null?void 0:z.role)==="instructor"&&t.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:"ผู้สอน"})]})]})]})}),t.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-t border-gray-100 bg-gray-50",children:[t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Dr,{className:"w-4 h-4"}),t.jsx("span",{children:s.reply_count||0})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Ce,{className:"w-4 h-4"}),t.jsx("span",{children:s.view_count||0})]})]}),t.jsxs("button",{onClick:k,className:`flex items-center space-x-1 px-3 py-1.5 rounded-full transition-all duration-200 ${h?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[t.jsx(xi,{className:`w-4 h-4 ${h?"fill-current":""}`}),t.jsx("span",{className:"text-sm font-medium",children:f})]})]}),c&&t.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>u(!1)})]})},gs={maxFileSize:50*1024*1024,allowedTypes:{"image/jpeg":{icon:"🖼️",preview:!0},"image/png":{icon:"🖼️",preview:!0},"image/gif":{icon:"🖼️",preview:!0},"image/webp":{icon:"🖼️",preview:!0},"application/pdf":{icon:"📄",preview:!1},"text/plain":{icon:"📝",preview:!1},"application/msword":{icon:"📘",preview:!1},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{icon:"📘",preview:!1},"application/vnd.ms-excel":{icon:"📊",preview:!1},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{icon:"📊",preview:!1},"application/zip":{icon:"🗜️",preview:!1},"application/x-zip-compressed":{icon:"🗜️",preview:!1}}},Qu=s=>{const e=[];return s.size>gs.maxFileSize&&e.push(`ไฟล์มีขนาดใหญ่เกินไป (สูงสุด ${gs.maxFileSize/1024/1024}MB)`),gs.allowedTypes[s.type]||e.push(`ประเภทไฟล์ไม่รองรับ: ${s.type}`),s.name.length>255&&e.push("ชื่อไฟล์ยาวเกินไป (สูงสุด 255 ตัวอักษร)"),{isValid:e.length===0,errors:e}},Uw=(s,e,r,n)=>{const i=Date.now(),a=Math.random().toString(36).substring(2);n.split(".").pop();const o=n.replace(/[^a-zA-Z0-9._-]/g,"_");return`${s}/${e}/${r}/${i}_${a}_${o}`},Vw=async(s,e,r)=>{try{const n=Qu(s);if(!n.isValid)throw new Error(n.errors.join(", "));const{data:{user:i},error:a}=await E.auth.getUser();if(a||!i)throw new Error("ผู้ใช้ไม่ได้เข้าสู่ระบบ");const o=Uw(i.id,e,r,s.name),{data:l,error:d}=await E.storage.from("content-attachments").upload(o,s,{cacheControl:"3600",upsert:!1});if(d)throw d;const{data:c,error:u}=await E.from("attachments").insert([{entity_type:e,entity_id:r,filename:s.name,file_url:l.path,file_size:s.size,mime_type:s.type,uploaded_by:i.id}]).select("*").single();if(u)throw await E.storage.from("content-attachments").remove([l.path]),u;return{data:c,error:null}}catch(n){return console.error("Error uploading file:",n),{data:null,error:n}}},zw=async(s,e,r)=>{try{const n=await Promise.allSettled(s.map(o=>Vw(o,e,r))),i=[],a=[];return n.forEach((o,l)=>{var d;o.status==="fulfilled"&&o.value.data?i.push(o.value.data):a.push({file:s[l].name,error:o.reason||((d=o.value)==null?void 0:d.error)})}),{data:{successful:i,failed:a},error:a.length>0?`${a.length} ไฟล์อัปโหลดไม่สำเร็จ`:null}}catch(n){return console.error("Error uploading multiple files:",n),{data:null,error:n}}},qw=async(s,e)=>{try{const{data:r,error:n}=await E.from("attachments").select("*").eq("entity_type",s).eq("entity_id",e).order("created_at",{ascending:!0});if(n)throw n;let i={};if(r&&r.length>0){const o=[...new Set(r.map(l=>l.uploaded_by).filter(Boolean))];if(o.length>0){const{data:l}=await E.from("user_profiles").select("user_id, full_name, avatar_url").in("user_id",o);l&&l.forEach(d=>{i[d.user_id]=d})}}return{data:r.map(o=>({...o,config:gs.allowedTypes[o.mime_type]||{icon:"📎",preview:!1},formattedSize:Zu(o.file_size),uploader:i[o.uploaded_by]||null,publicUrl:null})),error:null}}catch(r){return console.error("Error getting attachments:",r),{data:[],error:r}}},Bw=async s=>{try{const{data:e}=E.storage.from("content-attachments").getPublicUrl(s);return e.publicUrl}catch(e){return console.error("Error getting file URL:",e),null}},Gw=async s=>{try{const{data:e,error:r}=await E.from("attachments").select("*").eq("id",s).single();if(r)throw r;const{data:n,error:i}=await E.storage.from("content-attachments").download(e.file_url);if(i)throw i;const a=URL.createObjectURL(n),o=document.createElement("a");return o.href=a,o.download=e.filename,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a),{error:null}}catch(e){return console.error("Error downloading file:",e),{error:e}}},Hw=async s=>{try{const{data:e,error:r}=await E.from("attachments").select("*").eq("id",s).single();if(r)throw r;const{data:{user:n}}=await E.auth.getUser();if(!n||n.id!==e.uploaded_by)throw new Error("คุณไม่มีสิทธิ์ลบไฟล์นี้");const{error:i}=await E.storage.from("content-attachments").remove([e.file_url]);i&&console.warn("Error deleting from storage:",i);const{error:a}=await E.from("attachments").delete().eq("id",s);if(a)throw a;return{error:null}}catch(e){return console.error("Error deleting attachment:",e),{error:e}}},Ww=async s=>new Promise(e=>{if(!s.type.startsWith("image/")){e(null);return}const r=document.createElement("canvas"),n=r.getContext("2d"),i=new Image;i.onload=()=>{const o=Math.min(200/i.width,200/i.height);r.width=i.width*o,r.height=i.height*o,n.drawImage(i,0,0,r.width,r.height),r.toBlob(e,"image/jpeg",.8)},i.onerror=()=>e(null),i.src=URL.createObjectURL(s)}),Zu=s=>{if(s===0)return"0 Bytes";const e=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,n)).toFixed(2))+" "+r[n]},Bi=s=>{var e;return((e=gs.allowedTypes[s])==null?void 0:e.icon)||"📎"},Gi=s=>{var e;return((e=gs.allowedTypes[s])==null?void 0:e.preview)||!1},Kw=({targetType:s,targetId:e,currentUserId:r,userRole:n="student",onAttachmentDeleted:i})=>{const[a,o]=p.useState([]),[l,d]=p.useState(!0),[c,u]=p.useState(null),[h,m]=p.useState(null),{toast:f}=ae(),y=n==="instructor"||n==="admin";p.useEffect(()=>{x()},[s,e]);const x=async()=>{d(!0);try{const{data:N,error:k}=await qw(s,e);if(k)throw k;o(N||[])}catch(N){console.error("Error loading attachments:",N),f({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถโหลดไฟล์แนบได้",variant:"destructive"})}d(!1)},g=async N=>{try{const{error:k}=await Gw(N.id);if(k)throw k;f({title:"ดาวน์โหลดสำเร็จ",description:`ดาวน์โหลดไฟล์ ${N.file_name} เรียบร้อยแล้ว`})}catch{f({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถดาวน์โหลดไฟล์ได้",variant:"destructive"})}},v=async N=>{if(!(r===N.uploaded_by||y)){f({title:"ไม่มีสิทธิ์",description:"คุณไม่สามารถลบไฟล์นี้ได้",variant:"destructive"});return}if(confirm(`คุณแน่ใจหรือไม่ที่จะลบไฟล์ "${N.file_name}"?`))try{const{error:j}=await Hw(N.id);if(j)throw j;o(T=>T.filter(M=>M.id!==N.id)),i==null||i(N),f({title:"ลบไฟล์สำเร็จ",description:`ลบไฟล์ ${N.file_name} เรียบร้อยแล้ว`})}catch{f({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถลบไฟล์ได้",variant:"destructive"})}},w=async N=>{if(!Gi(N.file_type)){g(N);return}try{const k=await Bw(N.file_url);u(k),m(N)}catch{f({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถแสดงตัวอย่างไฟล์ได้",variant:"destructive"})}},b=()=>{u(null),m(null)},_=N=>new Date(N).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return l?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"})}):a.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-4xl mb-2",children:"📎"}),t.jsx("p",{children:"ยังไม่มีไฟล์แนบ"})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsx(xe,{children:a.map(N=>{var j,T;const k=r===N.uploaded_by||y;return N.file_type.startsWith("image/"),t.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center text-xl",children:Bi(N.file_type)})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:N.file_name}),t.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs text-gray-500",children:[t.jsx("span",{children:N.formattedSize}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(it,{className:"w-3 h-3"}),t.jsx("span",{children:((T=(j=N.uploader)==null?void 0:j.user_profiles)==null?void 0:T.full_name)||"ผู้ใช้ไม่ระบุตัวตน"})]}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(Me,{className:"w-3 h-3"}),t.jsx("span",{children:_(N.created_at)})]}),N.download_count>0&&t.jsxs("span",{children:["ดาวน์โหลด ",N.download_count," ครั้ง"]})]})]}),t.jsxs("div",{className:"flex items-center space-x-1 ml-3",children:[Gi(N.file_type)&&t.jsx(S,{variant:"ghost",size:"sm",onClick:()=>w(N),className:"p-2",title:"ดูตัวอย่าง",children:t.jsx(Ce,{className:"w-4 h-4"})}),t.jsx(S,{variant:"ghost",size:"sm",onClick:()=>g(N),className:"p-2",title:"ดาวน์โหลด",children:t.jsx(kt,{className:"w-4 h-4"})}),k&&t.jsx(S,{variant:"ghost",size:"sm",onClick:()=>v(N),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50",title:"ลบไฟล์",children:t.jsx(Re,{className:"w-4 h-4"})})]})]})})]})},N.id)})}),t.jsx(xe,{children:c&&h&&t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:b,children:t.jsxs(L.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg max-w-4xl max-h-[90vh] overflow-hidden",onClick:N=>N.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold",children:h.file_name}),t.jsx("p",{className:"text-sm text-gray-500",children:h.formattedSize})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(S,{variant:"outline",size:"sm",onClick:()=>g(h),children:[t.jsx(kt,{className:"w-4 h-4 mr-2"}),"ดาวน์โหลด"]}),t.jsx(S,{variant:"ghost",size:"sm",onClick:b,children:"✕"})]})]}),t.jsx("div",{className:"p-4 max-h-[70vh] overflow-auto",children:h.file_type.startsWith("image/")?t.jsx("img",{src:c,alt:h.file_name,className:"max-w-full h-auto rounded"}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-6xl mb-4",children:Bi(h.file_type)}),t.jsx("p",{className:"text-gray-600",children:"ไม่สามารถแสดงตัวอย่างไฟล์ประเภทนี้ได้"}),t.jsxs(S,{onClick:()=>g(h),className:"mt-4",children:[t.jsx(kt,{className:"w-4 h-4 mr-2"}),"ดาวน์โหลดเพื่อดู"]})]})})]})})})]})},Xw=({topicId:s,onBack:e,currentUserId:r,userRole:n="student"})=>{var C,z,R,$;const[i,a]=p.useState(null),[o,l]=p.useState([]),[d,c]=p.useState(!0),[u,h]=p.useState(!1),[m,f]=p.useState(""),[y,x]=p.useState(null),[g,v]=p.useState(!1),{toast:w}=ae(),_=n==="instructor"||n==="admin";p.useEffect(()=>{N()},[s]);const N=async()=>{try{c(!0);const{data:P,error:U}=await Tw(s);if(U)throw U;a(P),l(P.replies||[])}catch(P){console.error("Error loading topic:",P),w({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถโหลดข้อมูลหัวข้อได้",variant:"destructive"})}finally{c(!1)}},k=async P=>{if(P.preventDefault(),!!m.trim())try{h(!0);const{data:U,error:G}=await Lw({topic_id:s,content:m,parent_reply_id:(y==null?void 0:y.id)||null});if(G)throw G;l(F=>[...F,U]),f(""),x(null),a(F=>({...F,reply_count:(F.reply_count||0)+1})),w({title:"ส่งความคิดเห็นสำเร็จ",description:"ความคิดเห็นของคุณถูกเพิ่มแล้ว"})}catch(U){console.error("Error creating reply:",U),w({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถส่งความคิดเห็นได้",variant:"destructive"})}finally{h(!1)}},j=async(P,U)=>{try{const{data:G,error:F}=await Xu(P,U);if(F)throw F;P==="topic"?a(A=>({...A,like_count:G.liked?(A.like_count||0)+1:Math.max((A.like_count||0)-1,0),user_liked:G.liked})):l(A=>A.map(I=>I.id===U?{...I,like_count:G.liked?(I.like_count||0)+1:Math.max((I.like_count||0)-1,0),user_liked:G.liked}:I))}catch(G){console.error("Error toggling like:",G)}},T=async P=>{try{const{error:U}=await Rw(P,s);if(U)throw U;l(G=>G.map(F=>({...F,is_best_answer:F.id===P}))),a(G=>({...G,is_solved:!0,solved_reply_id:P})),w({title:"เลือกคำตอบที่ดีที่สุดแล้ว",description:"หัวข้อนี้ถูกทำเครื่องหมายว่าแก้ไขแล้ว"})}catch(U){console.error("Error marking best answer:",U),w({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถเลือกคำตอบที่ดีที่สุดได้",variant:"destructive"})}},M=async()=>{try{g?(await $w(s),v(!1),w({title:"ยกเลิกการติดตามแล้ว",description:"คุณจะไม่ได้รับการแจ้งเตือนจากหัวข้อนี้อีก"})):(await Mw(s),v(!0),w({title:"ติดตามหัวข้อแล้ว",description:"คุณจะได้รับการแจ้งเตือนเมื่อมีความคิดเห็นใหม่"}))}catch(P){console.error("Error toggling subscription:",P)}};if(d)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});if(!i)return t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-gray-500",children:"ไม่พบหัวข้อที่ต้องการ"}),t.jsxs(S,{onClick:e,className:"mt-4",children:[t.jsx(tt,{className:"w-4 h-4 mr-2"}),"กลับ"]})]});const B=Yu(i.topic_type),W={blue:"bg-blue-100 text-blue-800 border-blue-200",yellow:"bg-yellow-100 text-yellow-800 border-yellow-200",red:"bg-red-100 text-red-800 border-red-200",green:"bg-green-100 text-green-800 border-green-200",gray:"bg-gray-100 text-gray-800 border-gray-200"};return t.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(S,{variant:"ghost",onClick:e,className:"flex items-center space-x-2",children:[t.jsx(tt,{className:"w-4 h-4"}),t.jsx("span",{children:"กลับไปรายการหัวข้อ"})]}),t.jsx(S,{variant:"outline",onClick:M,className:"flex items-center space-x-2",children:g?t.jsxs(t.Fragment,{children:[t.jsx(Lf,{className:"w-4 h-4"}),t.jsx("span",{children:"ยกเลิกติดตาม"})]}):t.jsxs(t.Fragment,{children:[t.jsx(ia,{className:"w-4 h-4"}),t.jsx("span",{children:"ติดตาม"})]})})]}),t.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-xl shadow-sm",children:[t.jsx("div",{className:"p-6 border-b border-gray-100",children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:(C=i.user_profiles)!=null&&C.avatar_url?t.jsx("img",{src:i.user_profiles.avatar_url,alt:i.user_profiles.full_name,className:"w-full h-full rounded-full object-cover"}):t.jsx(it,{className:"w-6 h-6"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[t.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full border ${W[B]}`,children:Ju(i.topic_type)}),i.forum_categories&&t.jsx("span",{className:"px-3 py-1 text-sm font-medium rounded-full bg-gray-100 text-gray-700 border border-gray-200",children:i.forum_categories.name}),i.is_pinned&&t.jsxs("span",{className:"flex items-center space-x-1 px-3 py-1 text-sm font-medium rounded-full bg-yellow-100 text-yellow-800 border border-yellow-200",children:[t.jsx(yi,{className:"w-4 h-4"}),t.jsx("span",{children:"ปักหมุด"})]}),i.is_locked&&t.jsxs("span",{className:"flex items-center space-x-1 px-3 py-1 text-sm font-medium rounded-full bg-red-100 text-red-800 border border-red-200",children:[t.jsx(Et,{className:"w-4 h-4"}),t.jsx("span",{children:"ล็อค"})]}),i.is_solved&&t.jsxs("span",{className:"flex items-center space-x-1 px-3 py-1 text-sm font-medium rounded-full bg-green-100 text-green-800 border border-green-200",children:[t.jsx(ve,{className:"w-4 h-4"}),t.jsx("span",{children:"แก้ไขแล้ว"})]})]}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-3",children:i.title}),t.jsxs("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:[t.jsx("span",{className:"font-medium",children:((z=i.user_profiles)==null?void 0:z.full_name)||"ผู้ใช้ไม่ระบุตัวตน"}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(fe,{className:"w-4 h-4"}),t.jsx("span",{children:Rr(i.created_at)})]}),((R=i.user_profiles)==null?void 0:R.role)==="instructor"&&t.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:"ผู้สอน"})]})]})]})}),t.jsxs("div",{className:"p-6 border-b border-gray-100",children:[t.jsx("div",{className:"prose max-w-none",children:t.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:i.content})}),t.jsx("div",{className:"mt-6",children:t.jsx(Kw,{targetType:"topic",targetId:i.id,currentUserId:r,userRole:n})})]}),t.jsxs("div",{className:"flex items-center justify-between p-6 bg-gray-50",children:[t.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Dr,{className:"w-4 h-4"}),t.jsxs("span",{children:[i.reply_count||0," ความคิดเห็น"]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Ce,{className:"w-4 h-4"}),t.jsxs("span",{children:[i.view_count||0," ครั้ง"]})]})]}),t.jsxs("button",{onClick:()=>j("topic",i.id),className:`flex items-center space-x-1 px-4 py-2 rounded-full transition-all duration-200 ${i.user_liked?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[t.jsx(xi,{className:`w-4 h-4 ${i.user_liked?"fill-current":""}`}),t.jsx("span",{className:"font-medium",children:i.like_count||0})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[t.jsx(Dr,{className:"w-5 h-5 mr-2"}),"ความคิดเห็น (",o.length,")"]}),!i.is_locked&&t.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[y&&t.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"text-sm font-medium text-blue-800",children:["ตอบกลับ: ",($=y.user_profiles)==null?void 0:$.full_name]}),t.jsx("button",{onClick:()=>x(null),className:"text-blue-600 hover:text-blue-800",children:"✕"})]}),t.jsx("p",{className:"text-sm text-blue-700 line-clamp-2",children:y.content})]}),t.jsxs("form",{onSubmit:k,className:"space-y-4",children:[t.jsx("textarea",{value:m,onChange:P=>f(P.target.value),placeholder:"เขียนความคิดเห็น...",className:"w-full p-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",rows:4,required:!0}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:y?"ตอบกลับความคิดเห็น":"ความคิดเห็นใหม่"}),t.jsxs(S,{type:"submit",disabled:u||!m.trim(),className:"flex items-center space-x-2",children:[t.jsx(oa,{className:"w-4 h-4"}),t.jsx("span",{children:u?"กำลังส่ง...":"ส่งความคิดเห็น"})]})]})]})]}),t.jsx(xe,{children:o.map((P,U)=>{var G,F,A;return t.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:U*.1},className:`bg-white border border-gray-200 rounded-xl p-6 ${P.is_best_answer?"ring-2 ring-green-200 bg-green-50":""}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(G=P.user_profiles)!=null&&G.avatar_url?t.jsx("img",{src:P.author.user_profiles.profile_image_url,alt:P.author.user_profiles.full_name,className:"w-full h-full rounded-full object-cover"}):t.jsx(it,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("span",{className:"font-semibold text-gray-900",children:((F=P.user_profiles)==null?void 0:F.full_name)||"ผู้ใช้ไม่ระบุตัวตน"}),((A=P.user_profiles)==null?void 0:A.role)==="instructor"&&t.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:"ผู้สอน"}),P.is_best_answer&&t.jsxs("span",{className:"flex items-center space-x-1 px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[t.jsx(Le,{className:"w-3 h-3"}),t.jsx("span",{children:"คำตอบที่ดีที่สุด"})]})]}),t.jsx("span",{className:"text-sm text-gray-500",children:Rr(P.created_at)})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[_&&!P.is_best_answer&&i.topic_type==="question"&&t.jsxs(S,{variant:"outline",size:"sm",onClick:()=>T(P.id),className:"flex items-center space-x-1",children:[t.jsx(Le,{className:"w-4 h-4"}),t.jsx("span",{children:"เลือกเป็นคำตอบที่ดีที่สุด"})]}),t.jsxs(S,{variant:"ghost",size:"sm",onClick:()=>x(P),className:"flex items-center space-x-1",children:[t.jsx(np,{className:"w-4 h-4"}),t.jsx("span",{children:"ตอบกลับ"})]})]})]}),t.jsx("div",{className:"mb-4",children:t.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:P.content})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-sm text-gray-500",children:P.updated_at!==P.created_at&&t.jsxs("span",{children:["แก้ไขเมื่อ ",Rr(P.updated_at)]})}),t.jsxs("button",{onClick:()=>j("reply",P.id),className:`flex items-center space-x-1 px-3 py-1.5 rounded-full transition-all duration-200 ${P.user_liked?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[t.jsx(xi,{className:`w-4 h-4 ${P.user_liked?"fill-current":""}`}),t.jsx("span",{className:"text-sm font-medium",children:P.like_count||0})]})]})]},P.id)})}),o.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(Dr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"ยังไม่มีความคิดเห็น"}),t.jsx("p",{className:"text-sm",children:"เป็นคนแรกที่แสดงความคิดเห็นในหัวข้อนี้"})]})]})]})},Jw=({targetType:s,targetId:e,onFilesUploaded:r,maxFiles:n=5,disabled:i=!1})=>{const[a,o]=p.useState([]),[l,d]=p.useState(!1),[c,u]=p.useState(!1),[h,m]=p.useState({}),f=p.useRef(null),{toast:y}=ae(),x=T=>{T.preventDefault(),i||d(!0)},g=T=>{T.preventDefault(),d(!1)},v=T=>{if(T.preventDefault(),d(!1),i)return;const M=Array.from(T.dataTransfer.files);b(M)},w=T=>{const M=Array.from(T.target.files);b(M)},b=async T=>{if(a.length+T.length>n){y({title:"ไฟล์เกินจำนวนที่กำหนด",description:`สามารถอัปโหลดได้สูงสุด ${n} ไฟล์`,variant:"destructive"});return}const M=[],B=[];for(const W of T){const C=Qu(W);C.isValid?M.push({file:W,id:Math.random().toString(36),status:"pending",error:null}):B.push({name:W.name,errors:C.errors})}if(B.length>0&&y({title:"ไฟล์บางไฟล์ไม่ถูกต้อง",description:B.map(W=>`${W.name}: ${W.errors.join(", ")}`).join(`
`),variant:"destructive"}),M.length>0){o(W=>[...W,...M]);for(const W of M)if(Gi(W.file.type)){const C=await Ww(W.file);C&&m(z=>({...z,[W.id]:URL.createObjectURL(C)}))}}},_=T=>{o(M=>M.filter(B=>B.id!==T)),m(M=>{const B={...M};return B[T]&&(URL.revokeObjectURL(B[T]),delete B[T]),B})},N=async()=>{if(a.length!==0){u(!0);try{const T=a.filter(B=>B.status==="pending").map(B=>B.file),M=await zw(T,s,e);if(M.data){const{successful:B,failed:W}=M.data;o(C=>C.map(z=>{const R=B.find(P=>P.file_name===z.file.name),$=W.find(P=>P.file===z.file.name);return R?{...z,status:"completed"}:$?{...z,status:"error",error:$.error}:z})),B.length>0&&(y({title:"อัปโหลดสำเร็จ",description:`อัปโหลดไฟล์สำเร็จ ${B.length} ไฟล์`}),r==null||r(B)),W.length>0&&y({title:"อัปโหลดบางไฟล์ไม่สำเร็จ",description:`${W.length} ไฟล์อัปโหลดไม่สำเร็จ`,variant:"destructive"})}}catch{y({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถอัปโหลดไฟล์ได้",variant:"destructive"})}u(!1)}},k=()=>{const T=a.filter(M=>M.status==="completed").map(M=>M.id);T.forEach(M=>{h[M]&&URL.revokeObjectURL(h[M])}),o(M=>M.filter(B=>B.status!=="completed")),m(M=>{const B={...M};return T.forEach(W=>delete B[W]),B})},j=(T,M)=>{switch(T){case"completed":return t.jsx(Uf,{className:"w-4 h-4 text-green-600"});case"error":return t.jsx(ne,{className:"w-4 h-4 text-red-600"});default:return null}};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200 ${l?"border-indigo-500 bg-indigo-50":i?"border-gray-200 bg-gray-50 cursor-not-allowed":"border-gray-300 hover:border-gray-400 cursor-pointer"}`,onDragOver:x,onDragLeave:g,onDrop:v,onClick:()=>{var T;return!i&&((T=f.current)==null?void 0:T.click())},children:[t.jsx("input",{ref:f,type:"file",multiple:!0,className:"hidden",onChange:w,disabled:i}),t.jsx(vs,{className:`w-8 h-8 mx-auto mb-3 ${i?"text-gray-400":"text-gray-600"}`}),t.jsx("p",{className:`text-sm font-medium ${i?"text-gray-400":"text-gray-700"}`,children:l?"วางไฟล์ที่นี่":"คลิกหรือลากไฟล์มาวางที่นี่"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"รองรับ: รูปภาพ, PDF, เอกสาร (สูงสุด 50MB ต่อไฟล์)"})]}),t.jsx(xe,{children:a.length>0&&t.jsx(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2",children:a.map(T=>t.jsxs(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:`flex items-center space-x-3 p-3 bg-gray-50 rounded-lg ${T.status==="error"?"border border-red-200":""}`,children:[t.jsx("div",{className:"flex-shrink-0",children:h[T.id]?t.jsx("img",{src:h[T.id],alt:T.file.name,className:"w-10 h-10 object-cover rounded"}):t.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center text-lg",children:Bi(T.file.type)})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:T.file.name}),t.jsx("p",{className:"text-xs text-gray-500",children:Zu(T.file.size)}),T.error&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:T.error.message||"เกิดข้อผิดพลาด"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[j(T.status,T.error),T.status==="pending"&&t.jsx(S,{variant:"ghost",size:"sm",onClick:()=>_(T.id),className:"p-1 h-auto",children:t.jsx(we,{className:"w-4 h-4"})})]})]},T.id))})}),a.length>0&&t.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[a.length," ไฟล์ (",a.filter(T=>T.status==="pending").length," รอการอัปโหลด)"]}),t.jsxs("div",{className:"flex space-x-2",children:[a.some(T=>T.status==="completed")&&t.jsx(S,{variant:"outline",size:"sm",onClick:k,disabled:c,children:"ล้างไฟล์ที่เสร็จแล้ว"}),t.jsx(S,{onClick:N,disabled:c||a.filter(T=>T.status==="pending").length===0,size:"sm",className:"bg-indigo-600 hover:bg-indigo-700",children:c?t.jsxs(t.Fragment,{children:[t.jsx(rt,{className:"w-4 h-4 mr-2 animate-spin"}),"กำลังอัปโหลด..."]}):t.jsxs(t.Fragment,{children:[t.jsx(vs,{className:"w-4 h-4 mr-2"}),"อัปโหลด (",a.filter(T=>T.status==="pending").length,")"]})})]})]})]})},Yw=({isOpen:s,onClose:e,courseId:r,onTopicCreated:n})=>{const[i,a]=p.useState({title:"",content:""}),[o,l]=p.useState(!1),{toast:d}=ae();p.useEffect(()=>{s&&a({title:"",content:""})},[s]);const c=async h=>{if(h.preventDefault(),!i.title.trim()||!i.content.trim()){d({title:"ข้อมูลไม่ครบถ้วน",description:"กรุณากรอกชื่อหัวข้อและเนื้อหา",variant:"destructive"});return}try{l(!0);const m={course_id:r,title:i.title.trim(),content:i.content.trim()},{data:f,error:y}=await Ew(m);if(y)throw y;d({title:"สร้างหัวข้อสำเร็จ",description:"หัวข้อของคุณถูกเพิ่มในฟอรัมแล้ว"}),n(f),e()}catch(m){console.error("Error creating topic:",m),d({title:"เกิดข้อผิดพลาด",description:m.message||"ไม่สามารถสร้างหัวข้อได้",variant:"destructive"})}finally{l(!1)}},u=(h,m)=>{a(f=>({...f,[h]:m}))};return s?t.jsx(xe,{children:t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:t.jsxs(L.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:h=>h.stopPropagation(),children:[t.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:t.jsx(fs,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:"สร้างหัวข้อใหม่"}),t.jsx("p",{className:"text-indigo-100 mt-1",children:"แบ่งปันความคิดเห็นหรือถามคำถาม"})]})]}),t.jsx(S,{variant:"ghost",size:"icon",onClick:e,className:"text-white hover:bg-white/20 rounded-lg",children:t.jsx(we,{className:"w-6 h-6"})})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:t.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"ชื่อหัวข้อ *"}),t.jsx("input",{type:"text",value:i.title,onChange:h=>u("title",h.target.value),placeholder:"เช่น วิธีการใช้ React Hooks อย่างมีประสิทธิภาพ",className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-lg",maxLength:200,required:!0}),t.jsxs("div",{className:"flex justify-between mt-2",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"ชื่อหัวข้อที่ดึงดูดความสนใจ"}),t.jsxs("span",{className:"text-sm text-gray-400",children:[i.title.length,"/200"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"เนื้อหา *"}),t.jsx("textarea",{value:i.content,onChange:h=>u("content",h.target.value),placeholder:"แบ่งปันความคิดเห็น ประสบการณ์ หรือข้อมูลที่น่าสนใจ...",className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",rows:8,maxLength:5e3,required:!0}),t.jsxs("div",{className:"flex justify-between mt-2",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"รองรับ Markdown สำหรับการจัดรูปแบบข้อความ"}),t.jsxs("span",{className:"text-sm text-gray-400",children:[i.content.length,"/5000"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"แนบไฟล์ (ไม่บังคับ)"}),t.jsx(Jw,{targetType:"topic",targetId:null,onFilesUploaded:h=>{console.log("Files uploaded:",h)},maxFiles:5,disabled:o})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"💡 คำแนะนำการใช้ฟอรัม"}),t.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[t.jsx("li",{children:"• ใช้ชื่อหัวข้อที่ชัดเจนและเข้าใจง่าย"}),t.jsx("li",{children:"• เขียนเนื้อหาที่มีประโยชน์และเกี่ยวข้องกับคอร์ส"}),t.jsx("li",{children:"• หากเป็นคำถาม ให้ระบุรายละเอียดครบถ้วน"}),t.jsx("li",{children:"• เคารพความคิดเห็นของผู้อื่นและใช้ภาษาที่สุภาพ"}),t.jsx("li",{children:"• ค้นหาก่อนสร้างหัวข้อใหม่ เผื่อมีคนถามแล้ว"})]})]})]})}),t.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 flex-shrink-0",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-sm text-gray-500",children:"* ฟิลด์ที่จำเป็นต้องกรอก"}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx(S,{type:"button",variant:"outline",onClick:e,disabled:o,className:"px-6",children:"ยกเลิก"}),t.jsxs(S,{type:"button",onClick:c,disabled:o||!i.title.trim()||!i.content.trim(),className:"px-6 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:[t.jsx(st,{className:"w-4 h-4 mr-2"}),o?"กำลังสร้าง...":"สร้างหัวข้อ"]})]})]})})]})})}):null},Qw=()=>{var F,A;const{courseId:s}=sr(),{toast:e}=ae(),{user:r}=De(),n=I=>I?I.split(`
`).map((O,D)=>t.jsxs(te.Fragment,{children:[O,D<I.split(`
`).length-1&&t.jsx("br",{})]},D)):"",[i,a]=p.useState(null),[o,l]=p.useState(!0),[d,c]=p.useState({isEnrolled:!1,status:null}),[u,h]=p.useState(!1),[m,f]=p.useState("forum"),[y,x]=p.useState([]),[g,v]=p.useState(null),[w,b]=p.useState(!1),[_,N]=p.useState(!1),k=p.useCallback(async()=>{l(!0),console.log("Loading course with ID:",s);const{data:I,error:O}=await $a(s);console.log("Course data:",I,"Error:",O),O?(console.error("Course loading error:",O),e({title:"ข้อผิดพลาดในการโหลดข้อมูล",description:O.message,variant:"destructive"})):a(I),l(!1)},[s,e]),j=p.useCallback(async()=>{if(!r)return;console.log("CourseDetailPage: Checking enrollment status for user:",r==null?void 0:r.id,"course:",s);const{isEnrolled:I,status:O,error:D}=await Wu(s);console.log("CourseDetailPage: Enrollment check result:",{isEnrolled:I,status:O,error:D}),D?console.error("CourseDetailPage: Enrollment check error:",D):(c({isEnrolled:I,status:O}),console.log("CourseDetailPage: Enrollment status updated:",{isEnrolled:I,status:O}))},[s,r]);p.useEffect(()=>{k(),r&&j()},[k,j,r]),p.useEffect(()=>{m==="forum"&&d.isEnrolled&&M()},[m,d.isEnrolled]);const T=async()=>{if(!r){e({title:"กรุณาเข้าสู่ระบบก่อน",description:"คุณต้องเข้าสู่ระบบก่อนลงทะเบียนเรียน",variant:"destructive"});return}console.log("CourseDetailPage: Starting enrollment for user:",r.id,"course:",s),h(!0);const{data:I,error:O}=await _w(s);console.log("CourseDetailPage: Enrollment result:",{data:I,error:O}),O?(console.error("CourseDetailPage: Enrollment failed:",O),e({title:"ไม่สามารถลงทะเบียนได้",description:O.message,variant:"destructive"})):(console.log("CourseDetailPage: Enrollment successful, updating state"),e({title:"ลงทะเบียนสำเร็จ!",description:`คุณได้ลงทะเบียนคอร์ส "${i==null?void 0:i.title}" เรียบร้อยแล้ว`}),c({isEnrolled:!0,status:"active"}),console.log("CourseDetailPage: Enrollment status set to:",{isEnrolled:!0,status:"active"}),setTimeout(()=>{console.log("CourseDetailPage: Re-checking enrollment status after enrollment"),j()},1e3)),h(!1)},M=async()=>{try{N(!0);const{data:I,error:O}=await Cw(s,{sortBy:"last_reply_at",sortOrder:"desc",limit:50});if(O)throw O;x(I||[])}catch(I){console.error("Error loading forum topics:",I),e({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถโหลดหัวข้อฟอรัมได้",variant:"destructive"})}finally{N(!1)}},B=I=>{v(I)},W=()=>{v(null),M()},C=I=>{x(O=>[I,...O]),e({title:"สร้างหัวข้อสำเร็จ",description:"หัวข้อของคุณถูกเพิ่มในฟอรัมแล้ว"})},z=async I=>{try{await Xu("topic",I),x(O=>O.map(D=>D.id===I?{...D,like_count:D.user_liked?(D.like_count||0)-1:(D.like_count||0)+1,user_liked:!D.user_liked}:D))}catch(O){console.error("Error liking topic:",O)}},R=async(I,O)=>{try{await Aw(I,O),x(D=>D.map(q=>q.id===I?{...q,is_pinned:O}:q)),e({title:O?"ปักหมุดหัวข้อแล้ว":"ยกเลิกปักหมุดแล้ว",description:"สถานะหัวข้อถูกอัปเดตแล้ว"})}catch(D){console.error("Error pinning topic:",D)}},$=async(I,O)=>{try{await Dw(I,O),x(D=>D.map(q=>q.id===I?{...q,is_locked:O}:q)),e({title:O?"ล็อคหัวข้อแล้ว":"ปลดล็อคหัวข้อแล้ว",description:"สถานะหัวข้อถูกอัปเดตแล้ว"})}catch(D){console.error("Error locking topic:",D)}},P=async I=>{try{await Pw(I),x(O=>O.filter(D=>D.id!==I)),e({title:"ลบหัวข้อแล้ว",description:"หัวข้อถูกลบออกจากฟอรัมแล้ว"})}catch(O){console.error("Error deleting topic:",O)}},U={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},G={type:"tween",ease:"anticipate",duration:.5};return o?t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#667eea] mx-auto mb-4"}),t.jsx("p",{className:"text-emerald-700",children:"กำลังโหลดข้อมูลคอร์ส..."})]})}):i?t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:U,transition:G,className:"container mx-auto px-4 py-12",children:[t.jsxs(be,{children:[t.jsxs("title",{children:[i.title," - Login Learning"]}),t.jsx("meta",{name:"description",content:i.description})]}),t.jsx("div",{className:"mb-8",children:t.jsxs(Y,{to:"/courses",className:"flex items-center text-emerald-700 hover:text-emerald-900 transition-colors",children:[t.jsx(tt,{className:"w-5 h-5 mr-2"}),"กลับไปหน้าคอร์สเรียนทั้งหมด"]})}),t.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[t.jsxs(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"lg:col-span-2 space-y-6",children:[t.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[t.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-emerald-900 mb-4",children:i.title}),t.jsx("div",{className:"text-emerald-800 text-lg leading-relaxed mb-6",children:n(i.description)}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ge,{className:"w-5 h-5 text-[#667eea]"}),t.jsxs("span",{className:"text-emerald-800",children:["สอนโดย: ",i.instructor_name||"ไม่ระบุ"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(fe,{className:"w-5 h-5 text-[#667eea]"}),t.jsxs("span",{className:"text-emerald-800",children:["ระยะเวลา: ",i.duration_hours||0," ชั่วโมง"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ie,{className:"w-5 h-5 text-[#667eea]"}),t.jsxs("span",{className:"text-emerald-800",children:["ผู้เรียน: ",i.enrollment_count||0," คน"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Le,{className:"w-5 h-5 text-[#667eea]"}),t.jsxs("span",{className:"text-emerald-800",children:["ระดับ: ",i.level||"ไม่ระบุ"]})]})]}),t.jsx("img",{className:"w-full h-64 sm:h-96 object-cover rounded-lg mb-6 shadow-md",alt:i.title,src:i.image_url||"https://images.unsplash.com/photo-1635251595512-dc52146d5ae8",onError:I=>{I.target.src="https://images.unsplash.com/photo-1635251595512-dc52146d5ae8"}})]}),t.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("h2",{className:"text-2xl font-semibold text-emerald-900 flex items-center",children:[t.jsx(fs,{className:"w-6 h-6 mr-2"}),"ฟอรัมสนทนา"]})}),d.isEnrolled?t.jsx("div",{children:g?t.jsx(Xw,{topicId:g,onBack:W,currentUserId:r==null?void 0:r.id,userRole:((F=r==null?void 0:r.user_profiles)==null?void 0:F.role)||"student"}):t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center justify-end mb-6",children:t.jsxs(S,{onClick:()=>b(!0),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:[t.jsx(Je,{className:"w-4 h-4 mr-2"}),"สร้างหัวข้อใหม่"]})}),_?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):y.length>0?t.jsx("div",{className:"space-y-4",children:y.map(I=>{var O;return t.jsx(Fw,{topic:I,onTopicClick:B,onLike:z,onPin:R,onLock:$,onDelete:P,onEdit:D=>{console.log("Edit topic:",D)},userRole:((O=r==null?void 0:r.user_profiles)==null?void 0:O.role)||"student",currentUserId:r==null?void 0:r.id},I.id)})}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(fs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"ยังไม่มีหัวข้อสนทนา"}),t.jsx("p",{className:"text-gray-500 mb-6",children:"เป็นคนแรกที่เริ่มการสนทนาในคอร์สนี้"}),t.jsxs(S,{onClick:()=>b(!0),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:[t.jsx(Je,{className:"w-4 h-4 mr-2"}),"สร้างหัวข้อแรก"]})]})]})}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(fs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"ลงทะเบียนเพื่อเข้าถึงฟอรัมสนทนา"}),t.jsx("p",{className:"text-gray-500 mb-6",children:"เข้าร่วมการสนทนาและแลกเปลี่ยนความคิดเห็นกับเพื่อนนักเรียนและอาจารย์"}),t.jsx("p",{className:"text-sm text-gray-400",children:"กรุณาลงทะเบียนคอร์สก่อนเพื่อเข้าถึงฟอรัมสนทนา"})]})]})]}),t.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"lg:col-span-1 space-y-6",children:[t.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h2",{className:"text-3xl font-bold text-emerald-900",children:["฿",((A=i.price)==null?void 0:A.toLocaleString())||"0"]}),t.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((I,O)=>t.jsx(Se,{className:"w-5 h-5 text-yellow-400 fill-current"},O)),t.jsx("span",{className:"ml-2 text-sm text-emerald-800",children:"(5.0)"})]})]}),t.jsx("p",{className:"text-sm text-emerald-700 mb-6",children:"ราคาพิเศษสำหรับนักเรียน Login Learning"}),d.isEnrolled&&t.jsxs("div",{className:"flex items-center space-x-2 mb-4 p-3 bg-green-500/20 rounded-lg border border-green-500/30",children:[t.jsx(fp,{className:"w-5 h-5 text-green-400"}),t.jsx("span",{className:"text-green-400 font-medium",children:"คุณได้ลงทะเบียนคอร์สนี้แล้ว"})]}),d.isEnrolled?t.jsx(Y,{to:`/courses/${s}/learn`,className:"block w-full",children:t.jsxs(S,{size:"lg",className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white text-lg py-3",children:[t.jsx(ge,{className:"w-5 h-5 mr-2"}),"เริ่มเรียน"]})}):t.jsxs(S,{size:"lg",className:"w-full bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-gray-800 text-lg py-3",onClick:T,disabled:u,children:[t.jsx(dp,{className:"w-5 h-5 mr-2"}),u?"กำลังลงทะเบียน...":"ลงทะเบียนเรียนเลย"]}),t.jsx("p",{className:"text-xs text-slate-500 mt-4 text-center",children:"รับประกันความพึงพอใจ คืนเงินภายใน 7 วัน"})]}),t.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[t.jsx("h3",{className:"text-xl font-semibold text-emerald-900 mb-3",children:"สิ่งที่คุณจะได้รับ"}),t.jsx("ul",{className:"space-y-2 text-emerald-800 text-sm list-disc list-inside",children:i.learning_outcomes&&i.learning_outcomes.length>0?(()=>{try{return(typeof i.learning_outcomes=="string"?JSON.parse(i.learning_outcomes):i.learning_outcomes).filter(O=>O.trim()!=="").map((O,D)=>t.jsx("li",{children:O},D))}catch(I){return console.warn("Error parsing learning outcomes:",I),[t.jsx("li",{children:"ความรู้และทักษะทางวิศวกรรมที่แข็งแกร่ง"},"default-1"),t.jsx("li",{children:"ประสบการณ์ทำโปรเจกต์จริง"},"default-2"),t.jsx("li",{children:"ใบประกาศนียบัตรเมื่อเรียนจบ"},"default-3"),t.jsx("li",{children:"คำแนะนำจากผู้เชี่ยวชาญ"},"default-4"),t.jsx("li",{children:"โอกาสในการสร้างเครือข่าย"},"default-5")]}})():t.jsxs(t.Fragment,{children:[t.jsx("li",{children:"ความรู้และทักษะทางวิศวกรรมที่แข็งแกร่ง"}),t.jsx("li",{children:"ประสบการณ์ทำโปรเจกต์จริง"}),t.jsx("li",{children:"ใบประกาศนียบัตรเมื่อเรียนจบ"}),t.jsx("li",{children:"คำแนะนำจากผู้เชี่ยวชาญ"}),t.jsx("li",{children:"โอกาสในการสร้างเครือข่าย"})]})})]}),i.tools_required&&(()=>{try{const O=(typeof i.tools_required=="string"?JSON.parse(i.tools_required):i.tools_required).filter(D=>D.trim()!=="");if(O.length>0)return t.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[t.jsx("h3",{className:"text-xl font-semibold text-emerald-900 mb-3",children:"เครื่องมือที่ใช้"}),t.jsx("ul",{className:"space-y-2 text-emerald-800 text-sm list-disc list-inside",children:O.map((D,q)=>t.jsx("li",{children:D},q))})]})}catch(I){console.warn("Error parsing tools required:",I)}return null})()]})]}),t.jsx(Yw,{isOpen:w,onClose:()=>b(!1),courseId:s,onTopicCreated:C})]}):t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ne,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),t.jsx("h2",{className:"text-2xl font-bold text-emerald-900 mb-2",children:"ไม่พบข้อมูลคอร์ส"}),t.jsx("p",{className:"text-emerald-700 mb-4",children:"คอร์สที่คุณกำลังมองหาไม่มีอยู่ในระบบ"}),t.jsx(Y,{to:"/courses",children:t.jsx(S,{variant:"outline",className:"text-emerald-900 border-emerald-300 hover:bg-emerald-100",children:"กลับไปหน้าคอร์สทั้งหมด"})})]})})},Zw=s=>{if(!s)return"unknown";const e=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/youtube\.com\/v\/([a-zA-Z0-9_-]{11})/];for(const i of e){const a=s.match(i);if(a)return{type:"youtube",id:a[1]}}return[".mp4",".webm",".ogg",".mov",".avi"].some(i=>s.toLowerCase().includes(i))||s.startsWith("blob:")||s.startsWith("data:")?{type:"direct",url:s}:{type:"unknown"}},ej=(s,e=!1)=>{const r=new URLSearchParams({enablejsapi:"1",origin:window.location.origin,autoplay:e?"1":"0",rel:"0",modestbranding:"1",iv_load_policy:"3",cc_load_policy:"0",disablekb:"1",fs:"1",playsinline:"1"});return`https://www.youtube.com/embed/${s}?${r.toString()}`},tj=({src:s,contentId:e,title:r,autoPlay:n=!1,initialTime:i=0,onComplete:a})=>{const o=p.useRef(null),l=p.useRef(null),d=Zw(s),c=d.type==="youtube",u=d.type==="direct",[h,m]=p.useState(!1),[f,y]=p.useState(i),[x,g]=p.useState(0),[v,w]=p.useState(1),[b,_]=p.useState(!1),[N,k]=p.useState(!1),[j,T]=p.useState(!0),[M,B]=p.useState(!0),[W,C]=p.useState(1);p.useEffect(()=>{const O=o.current;if(!O||!u)return;i>0&&(O.currentTime=i);const D=()=>{g(O.duration),T(!1)},q=()=>{y(O.currentTime)},K=()=>{m(!0)},H=()=>{m(!1)},J=()=>{m(!1)},Ne=()=>{w(O.volume),_(O.muted)},pe=()=>T(!0),ze=()=>T(!1);return O.addEventListener("loadedmetadata",D),O.addEventListener("timeupdate",q),O.addEventListener("play",K),O.addEventListener("pause",H),O.addEventListener("ended",J),O.addEventListener("volumechange",Ne),O.addEventListener("waiting",pe),O.addEventListener("canplay",ze),()=>{O.removeEventListener("loadedmetadata",D),O.removeEventListener("timeupdate",q),O.removeEventListener("play",K),O.removeEventListener("pause",H),O.removeEventListener("ended",J),O.removeEventListener("volumechange",Ne),O.removeEventListener("waiting",pe),O.removeEventListener("canplay",ze)}},[i,u]),p.useEffect(()=>{if(!u)return;let O;const D=()=>{B(!0),clearTimeout(O),O=setTimeout(()=>{h&&B(!1)},3e3)},q=l.current;return q&&(q.addEventListener("mousemove",D),q.addEventListener("mouseleave",()=>{h&&B(!1)})),()=>{clearTimeout(O),q&&q.removeEventListener("mousemove",D)}},[h,u]);const z=()=>{if(!u)return;const O=o.current;O&&O.paused?O.play():O&&O.pause()},R=O=>{if(!u)return;const D=o.current;if(!D)return;const q=O.currentTarget.getBoundingClientRect(),K=(O.clientX-q.left)/q.width;D.currentTime=K*x},$=()=>{if(!u)return;const O=o.current;O&&(O.muted=!O.muted)},P=O=>{if(!u)return;const D=o.current;if(!D)return;const q=parseFloat(O.target.value);D.volume=q,w(q),_(q===0)},U=()=>{const O=l.current;document.fullscreenElement?document.exitFullscreen().then(()=>{k(!1)}):O.requestFullscreen().then(()=>{k(!0)})},G=O=>{if(!u)return;const D=o.current;D&&(D.currentTime=Math.max(0,Math.min(x,D.currentTime+O)))},F=O=>{if(!u)return;const D=o.current;D&&(D.playbackRate=O,C(O))},A=O=>{const D=Math.floor(O/60),q=Math.floor(O%60);return`${D}:${q.toString().padStart(2,"0")}`},I=u&&x>0?f/x*100:0;return d.type==="unknown"?t.jsx("div",{className:"relative bg-gray-900 rounded-lg overflow-hidden p-8 text-center",children:t.jsxs("div",{className:"text-white",children:[t.jsx(ys,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),t.jsx("h3",{className:"text-xl font-semibold mb-2",children:"ไม่รองรับประเภทวิดีโอนี้"}),t.jsx("p",{className:"text-gray-300 mb-4",children:"กรุณาใช้ YouTube URL หรือไฟล์วิดีโอที่รองรับ (.mp4, .webm, .ogg)"}),t.jsx("p",{className:"text-xs text-gray-400 break-all",children:s}),s&&t.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[t.jsx(ys,{className:"w-4 h-4 mr-2"}),"เปิดในแท็บใหม่"]})]})}):t.jsxs("div",{ref:l,className:"relative bg-black rounded-lg overflow-hidden group cursor-pointer",onClick:u?z:void 0,children:[c&&t.jsxs(t.Fragment,{children:[t.jsx("iframe",{src:ej(d.id,n),className:"w-full h-[400px] lg:h-[500px]",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen",allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin",onLoad:()=>{console.log("🎬 Iframe loaded"),T(!1)}}),t.jsx("div",{className:"absolute top-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded",children:"YouTube"})]}),u&&t.jsx("video",{ref:o,src:s,className:"w-full h-auto max-h-[500px] object-contain",autoPlay:n,preload:"metadata",onClick:O=>O.stopPropagation()}),u&&j&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:t.jsx(rt,{className:"w-12 h-12 text-white animate-spin"})}),u&&!h&&!j&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:t.jsx(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white/20 backdrop-blur-sm rounded-full p-4",children:t.jsx(bi,{className:"w-16 h-16 text-white ml-2"})})}),u&&t.jsxs(L.div,{initial:{opacity:1},animate:{opacity:M?1:0},transition:{duration:.3},className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",onClick:O=>O.stopPropagation(),children:[t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"w-full h-2 bg-white/20 rounded-full cursor-pointer",onClick:R,children:t.jsx("div",{className:"h-full bg-blue-500 rounded-full relative",style:{width:`${I}%`},children:t.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-4 h-4 bg-blue-500 rounded-full -mr-2"})})})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(S,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:z,children:h?t.jsx(tp,{className:"w-6 h-6"}):t.jsx(bi,{className:"w-6 h-6"})}),t.jsx(S,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>G(-10),children:t.jsx(up,{className:"w-5 h-5"})}),t.jsx(S,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>G(10),children:t.jsx(hp,{className:"w-5 h-5"})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(S,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:$,children:b||v===0?t.jsx(gp,{className:"w-5 h-5"}):t.jsx(pp,{className:"w-5 h-5"})}),t.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:b?0:v,onChange:P,className:"w-20 h-1 bg-white/20 rounded-lg appearance-none slider"})]}),t.jsxs("span",{className:"text-white text-sm font-mono",children:[A(f)," / ",A(x)]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("select",{value:W,onChange:O=>F(parseFloat(O.target.value)),className:"bg-transparent text-white text-sm border border-white/20 rounded px-2 py-1",children:[t.jsx("option",{value:"0.5",className:"bg-black",children:"0.5x"}),t.jsx("option",{value:"0.75",className:"bg-black",children:"0.75x"}),t.jsx("option",{value:"1",className:"bg-black",children:"1x"}),t.jsx("option",{value:"1.25",className:"bg-black",children:"1.25x"}),t.jsx("option",{value:"1.5",className:"bg-black",children:"1.5x"}),t.jsx("option",{value:"2",className:"bg-black",children:"2x"})]}),t.jsx(S,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:U,children:t.jsx(Zf,{className:"w-5 h-5"})})]})]})]}),r&&t.jsx(L.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`absolute top-4 left-4 right-4 ${c?"z-10":""}`,children:t.jsx("h3",{className:"text-white text-lg font-semibold bg-black/50 backdrop-blur-sm rounded px-3 py-2",children:r})}),e&&a&&t.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"absolute bottom-20 right-4 z-20",children:t.jsxs(S,{onClick:()=>a(e),className:"bg-green-600 hover:bg-green-700 text-white shadow-lg",size:"sm",children:[t.jsx(ve,{className:"w-4 h-4 mr-2"}),"ผ่านเนื้อหานี้"]})})]})},Hi=async s=>{try{const{data:e,error:r}=await E.from("quizzes").select("*").eq("content_id",s).eq("is_active",!0).order("id",{ascending:!1}).limit(1);if(r)throw r;return{data:e&&e.length>0?e[0]:null,error:null}}catch(e){return console.error("Error fetching quiz:",e),{data:null,error:e}}},sj=async s=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)return{data:[],error:null};const{data:n,error:i}=await E.from("quiz_attempts").select("*").eq("user_id",e.id).eq("quiz_id",s).order("started_at",{ascending:!1});if(i)throw i;return{data:n||[],error:null}}catch(e){return console.error("Error fetching quiz attempts:",e),{data:[],error:e}}},rj=async s=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n,error:i}=await E.from("quizzes").select("*").eq("id",s).single();if(i)throw i;const{data:a,error:o}=await sj(s);if(o)throw o;const l=Date.now(),{data:d,error:c}=await E.from("quiz_attempts").insert([{user_id:e.id,quiz_id:s,answers:{},score:0,started_at:new Date().toISOString()}]).select().single();if(c)throw c;return{data:{...d,quiz:n},error:null}}catch(e){return console.error("Error starting quiz attempt:",e),{data:null,error:e}}},nj=async(s,e)=>{try{const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:i,error:a}=await E.from("quiz_attempts").select("*").eq("id",s).eq("user_id",r.id).single();if(a)throw a;const{data:o,error:l}=await E.from("quizzes").select("*").eq("id",i.quiz_id).single();if(l)throw l;const d=ij(o.questions,e),c=d.percentage>=o.passing_score,u=new Date().toISOString(),h=new Date(i.started_at),m=new Date(u),f=Math.round((m-h)/(1e3*60)),{data:y,error:x}=await E.from("quiz_attempts").update({answers:e,score:d.percentage,completed_at:u}).eq("id",s).eq("user_id",r.id).select("*").single();if(x)throw x;return{data:{...y,score_details:d},error:null}}catch(r){return console.error("Error submitting quiz attempt:",r),{data:null,error:r}}},ij=(s,e)=>{let r=0;const n={};s.forEach((a,o)=>{const l=a.id||o.toString(),d=e[l],c=aj(a,d);c&&r++,n[l]={is_correct:c,correct_answer:oj(a),user_answer:d,explanation:a.explanation||null}});const i=s.length>0?Math.round(r/s.length*100):0;return{correct_count:r,total_questions:s.length,percentage:i,feedback:n}},aj=(s,e)=>{switch(s.type){case"multiple_choice":return e===s.correct_answer;case"true_false":return e===s.correct_answer;case"fill_blank":return(Array.isArray(s.correct_answer)?s.correct_answer:[s.correct_answer]).some(a=>(e==null?void 0:e.toLowerCase().trim())===a.toLowerCase().trim());case"multiple_select":if(!Array.isArray(e)||!Array.isArray(s.correct_answer))return!1;const n=new Set(e.sort()),i=new Set(s.correct_answer.sort());return n.size===i.size&&[...n].every(a=>i.has(a));default:return!1}},oj=s=>{switch(s.type){case"multiple_choice":case"true_false":return s.correct_answer;case"fill_blank":return Array.isArray(s.correct_answer)?s.correct_answer[0]:s.correct_answer;case"multiple_select":return s.correct_answer;default:return null}},lj=async(s,e,r)=>{try{const{data:{user:n},error:i}=await E.auth.getUser();if(i||!n)throw new Error("User not authenticated");if((await Hi(s)).data)throw new Error("แบบทดสอบสำหรับเนื้อหานี้มีอยู่แล้ว");const o={title:r.title,description:r.description||"",questions:r.questions,is_active:!0};try{o.content_id=s;const{data:l,error:d}=await E.from("quizzes").insert([o]).select().single();if(d)throw d;return{data:l,error:null}}catch{console.log("content_id column not found, using course_id fallback"),delete o.content_id,o.course_id=e;const{data:d,error:c}=await E.from("quizzes").insert([o]).select().single();if(c)throw c;return{data:d,error:null}}}catch(n){return console.error("Error creating quiz for content:",n),{data:null,error:n}}},cj=({quiz:s,onComplete:e,onClose:r})=>{var C,z,R;const{toast:n}=ae(),[i,a]=p.useState(null),[o,l]=p.useState(0),[d,c]=p.useState({}),[u,h]=p.useState(0),[m,f]=p.useState(!1),[y,x]=p.useState(null),[g,v]=p.useState(!1),w=p.useCallback(async()=>{if(!i)return;v(!0);const{data:$,error:P}=await nj(i.id,d);if(P){n({title:"ไม่สามารถส่งแบบทดสอบได��",description:P.message,variant:"destructive"}),v(!1);return}x($),f(!0),v(!1),n({title:$.is_passed?"ผ่านแบบทดสอบ! 🎉":"ไม่ผ่านแบบทดสอบ",description:`คะแนนที่ได้: ${$.score}/${$.max_score} (${$.score}%)`,variant:$.is_passed?"default":"destructive"}),e==null||e($)},[i,d,n,e]),b=p.useCallback(async()=>{v(!0);const{data:$,error:P}=await rj(s.id);if(P){n({title:"ไม่สามารถเริ่มแบบทดสอบได้",description:P.message,variant:"destructive"}),r==null||r();return}a($),s.time_limit>0&&h(s.time_limit*60),v(!1)},[s.id,s.time_limit,n,r]);p.useEffect(()=>{b()},[b]),p.useEffect(()=>{if(u>0&&!m){const $=setTimeout(()=>{h(u-1)},1e3);return()=>clearTimeout($)}else u===0&&s.time_limit>0&&!m&&w()},[u,m,s.time_limit,w]);const _=($,P)=>{c(U=>({...U,[$]:P}))},N=()=>{o<s.questions.length-1&&l(o+1)},k=()=>{o>0&&l(o-1)},j=$=>{const P=Math.floor($/60),U=$%60;return`${P}:${U.toString().padStart(2,"0")}`},T=()=>Object.keys(d).length;if(g&&!i)return t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-700",children:"กำลังเตรียมแบบทดสอบ..."})]})});if(m&&y)return t.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:`mx-auto w-16 h-16 rounded-full flex items-center justify-center ${y.is_passed?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:y.is_passed?t.jsx(Wc,{className:"w-8 h-8"}):t.jsx(uo,{className:"w-8 h-8"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:y.is_passed?"ยินดีด้วย! คุณผ่านแบบทดสอบ":"เสียใจด้วย คุณไม่ผ่านแบบทดสอบ"}),t.jsxs("p",{className:"text-gray-700",children:["คะแนนที่ได้: ",y.score,"% | ต้องการ: ",s.passing_score,"%"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-200 shadow-sm p-6 rounded-xl",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"รายละเอียดคะแนน"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-400",children:((C=y.score_details)==null?void 0:C.correct_count)||0}),t.jsx("div",{className:"text-sm text-gray-700",children:"ตอบถูก"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-slate-300",children:((z=y.score_details)==null?void 0:z.total_questions)||0}),t.jsx("div",{className:"text-sm text-gray-700",children:"ทั้งหมด"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[y.score,"%"]}),t.jsx("div",{className:"text-sm text-gray-700",children:"คะแนนรวม"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-400",children:y.time_spent_minutes||0}),t.jsx("div",{className:"text-sm text-gray-700",children:"นาที"})]})]})]}),s.show_correct_answers&&((R=y.score_details)==null?void 0:R.feedback)&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"ตรวจสอบคำตอบ"}),s.questions.map(($,P)=>{const U=$.id||P.toString(),G=y.score_details.feedback[U];return t.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:P*.1},className:`bg-white border border-gray-200 shadow-sm p-4 rounded-lg border-l-4 ${G!=null&&G.is_correct?"border-green-500":"border-red-500"}`,children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:`mt-1 ${G!=null&&G.is_correct?"text-green-400":"text-red-400"}`,children:G!=null&&G.is_correct?t.jsx(ve,{className:"w-5 h-5"}):t.jsx(uo,{className:"w-5 h-5"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-gray-900 font-medium mb-2",children:$.question}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-700",children:"คำตอบของคุณ: "}),t.jsx("span",{className:G!=null&&G.is_correct?"text-green-400":"text-red-400",children:Array.isArray(G==null?void 0:G.user_answer)?G.user_answer.join(", "):(G==null?void 0:G.user_answer)||"ไม่ได้ตอบ"})]}),!(G!=null&&G.is_correct)&&t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-700",children:"คำตอบที่ถูก: "}),t.jsx("span",{className:"text-green-400",children:Array.isArray(G==null?void 0:G.correct_answer)?G.correct_answer.join(", "):G==null?void 0:G.correct_answer})]}),(G==null?void 0:G.explanation)&&t.jsxs("div",{className:"mt-2 p-2 bg-blue-500/10 rounded text-blue-300",children:[t.jsx("strong",{children:"คำอธิบาย:"})," ",G.explanation]})]})]})]})},U)})]}),t.jsxs("div",{className:"flex justify-center space-x-4",children:[t.jsx(S,{onClick:r,variant:"outline",children:"ปิด"}),!y.is_passed&&(i==null?void 0:i.attempt_number)<s.max_attempts&&t.jsxs(S,{onClick:()=>{f(!1),x(null),l(0),c({}),b()},className:"bg-blue-500 hover:bg-blue-600",children:[t.jsx(ip,{className:"w-4 h-4 mr-2"}),"ลองใหม่"]})]})]});const M=s.questions[o],B=M.id||o.toString(),W=d[B];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s.title}),t.jsxs("p",{className:"text-gray-700",children:["คำถามที่ ",o+1," จาก ",s.questions.length]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[s.time_limit>0&&t.jsxs("div",{className:`flex items-center space-x-2 ${u<300?"text-red-400":"text-gray-700"}`,children:[t.jsx(fe,{className:"w-4 h-4"}),t.jsx("span",{className:"font-mono",children:j(u)})]}),t.jsxs("div",{className:"text-gray-700 text-sm",children:["ตอบแล้ว: ",T(),"/",s.questions.length]})]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(o+1)/s.questions.length*100}%`}})}),t.jsx(xe,{mode:"wait",children:t.jsx(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white border border-gray-200 shadow-sm p-6 rounded-xl",children:t.jsx(dj,{question:M,questionId:B,userAnswer:W,onAnswerChange:_})},o)}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(S,{onClick:k,disabled:o===0,variant:"outline",children:[t.jsx(tt,{className:"w-4 h-4 mr-2"}),"ก่อนหน้า"]}),t.jsx("div",{className:"flex items-center space-x-2",children:o===s.questions.length-1?t.jsx(S,{onClick:w,disabled:g||T()===0,className:"bg-green-500 hover:bg-green-600",children:g?"กำลังส่ง...":"ส่งคำตอบ"}):t.jsxs(S,{onClick:N,children:["ถัดไป",t.jsx(Of,{className:"w-4 h-4 ml-2"})]})})]}),T()<s.questions.length&&t.jsxs("div",{className:"flex items-center space-x-2 text-amber-400 text-sm",children:[t.jsx(ne,{className:"w-4 h-4"}),t.jsxs("span",{children:["คุณยังตอบคำถามไม่ครบ (",s.questions.length-T()," ข้อ)"]})]})]})},dj=({question:s,questionId:e,userAnswer:r,onAnswerChange:n})=>{const i=()=>{switch(s.type){case"multiple_choice":return t.jsx("div",{className:"space-y-3",children:s.options.map((a,o)=>t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-gray-100 transition-colors bg-gray-50 border border-gray-200",children:[t.jsx("input",{type:"radio",name:e,value:a,checked:r===a,onChange:l=>n(e,l.target.value),className:"w-4 h-4 text-blue-500"}),t.jsx("span",{className:"text-gray-900",children:a})]},o))});case"multiple_select":return t.jsx("div",{className:"space-y-3",children:s.options.map((a,o)=>t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-gray-100 transition-colors bg-gray-50 border border-gray-200",children:[t.jsx("input",{type:"checkbox",value:a,checked:Array.isArray(r)&&r.includes(a),onChange:l=>{const d=Array.isArray(r)?r:[];l.target.checked?n(e,[...d,a]):n(e,d.filter(c=>c!==a))},className:"w-4 h-4 text-blue-500"}),t.jsx("span",{className:"text-gray-900",children:a})]},o))});case"true_false":return t.jsx("div",{className:"space-y-3",children:[!0,!1].map(a=>t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-gray-100 transition-colors bg-gray-50 border border-gray-200",children:[t.jsx("input",{type:"radio",name:e,value:a,checked:r===a,onChange:o=>n(e,o.target.value==="true"),className:"w-4 h-4 text-blue-500"}),t.jsx("span",{className:"text-gray-900",children:a?"ถูก":"ผิด"})]},a.toString()))});case"fill_blank":return t.jsx("input",{type:"text",value:r||"",onChange:a=>n(e,a.target.value),placeholder:"พิมพ์คำตอบของคุณ...",className:"w-full p-3 bg-white border border-gray-300 rounded-lg text-gray-900 focus:border-blue-500 focus:outline-none"});default:return t.jsx("p",{className:"text-red-400",children:"ไม่รองรับประเภทคำถามนี้"})}};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:s.question}),s.image&&t.jsx("img",{src:s.image,alt:"Question",className:"max-w-full h-auto rounded-lg"}),i(),s.hint&&t.jsxs("div",{className:"text-sm text-blue-300 bg-blue-500/10 p-3 rounded-lg",children:[t.jsx("strong",{children:"คำแนะนำ:"})," ",s.hint]})]})},Qr=async s=>{try{console.log("Using course_id approach for assignment lookup to avoid schema issues");const{data:e,error:r}=await E.from("course_content").select("course_id, title").eq("id",s).single();if(r||!e)return{data:null,error:null};const n=await E.from("assignments").select("*").eq("course_id",e.course_id).eq("is_active",!0).order("id",{ascending:!1}).limit(1);if(n.error)return console.error("Error fetching assignments by course_id:",n.error),{data:null,error:null};const i=n.data||[];return{data:i.length>0?i[0]:null,error:null}}catch(e){return console.error("Error fetching assignment:",e),{data:null,error:null}}},eh=async s=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)return{data:[],error:null};const{data:n,error:i}=await E.from("assignment_submissions").select("*").eq("user_id",e.id).eq("assignment_id",s).order("id",{ascending:!1});if(i)throw i;return{data:n||[],error:null}}catch(e){return console.error("Error fetching user submissions:",e),{data:[],error:e}}},Il=async(s,e)=>{try{const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:i,error:a}=await E.from("assignments").select("*").eq("id",s).single();if(a)throw a;const{data:o,error:l}=await eh(s);if(l)throw l;const d=i.due_date?new Date>new Date(i.due_date):!1,{data:c,error:u}=await E.from("assignment_submissions").insert([{user_id:r.id,assignment_id:s,submission_text:e.text||""}]).select().single();if(u)throw u;return{data:c,error:null}}catch(r){return console.error("Error creating submission:",r),{data:null,error:r}}},Ol=async(s,e)=>{try{const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:i,error:a}=await E.from("assignment_submissions").update({submission_text:e.text||""}).eq("id",s).eq("user_id",r.id).select().single();if(a)throw a;return{data:i,error:null}}catch(r){return console.error("Error updating submission:",r),{data:null,error:r}}},Ll=async s=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n,error:i}=await E.from("assignment_submissions").update({submitted_at:new Date().toISOString()}).eq("id",s).eq("user_id",e.id).select().single();if(i)throw i;return{data:n,error:null}}catch(e){return console.error("Error submitting final submission:",e),{data:null,error:e}}},uj=async(s,e,r)=>{try{const{data:{user:n},error:i}=await E.auth.getUser();if(i||!n)throw new Error("User not authenticated");if((await Qr(s)).data)throw new Error("งานมอบหมายสำหรับเนื้อหานี้มีอยู่แล้ว");const o={title:r.title,description:r.description||"",instructions:r.instructions||"",due_date:r.due_date,max_score:r.max_score||100,is_active:!0};try{o.content_id=s;const{data:l,error:d}=await E.from("assignments").insert([o]).select().single();if(d)throw d;return{data:l,error:null}}catch{console.log("content_id column not found, using course_id fallback"),delete o.content_id,o.course_id=e;const{data:d,error:c}=await E.from("assignments").insert([o]).select().single();if(c)throw c;return{data:d,error:null}}}catch(n){return console.error("Error creating assignment for content:",n),{data:null,error:n}}},hj=async s=>{try{const{data:e,error:r}=await E.from("assignments").select("*").eq("id",s).single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error fetching assignment:",e),{data:null,error:e}}},mj=async s=>{try{const{data:e,error:r}=await E.from("assignment_submissions").select(`
        *,
        user_profiles!assignment_submissions_user_id_fkey(full_name, email, avatar_url)
      `).eq("assignment_id",s).order("submitted_at",{ascending:!1});if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error fetching assignment submissions:",e),{data:null,error:e}}},fj=async(s,e)=>{try{const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:i,error:a}=await E.from("assignment_submissions").update({score:e.score,feedback:e.feedback,graded_at:e.graded_at||new Date().toISOString(),graded_by:e.graded_by||r.id,grading_rubric_scores:e.grading_rubric_scores||null}).eq("id",s).select().single();if(a)throw a;return{data:i,error:null}}catch(r){return console.error("Error updating submission grade:",r),{data:null,error:r}}},pj=({contentId:s,assignment:e,onComplete:r,onClose:n})=>{const{toast:i}=ae(),a=R=>R?R.graded_at&&R.score!==null?"graded":R.submitted_at?"submitted":"draft":"draft",[o,l]=p.useState(!0),[d,c]=p.useState(e),[u,h]=p.useState([]),[m,f]=p.useState(null),[y,x]=p.useState(""),[g,v]=p.useState([]),[w,b]=p.useState(!1),[_,N]=p.useState(!1),[k,j]=p.useState("submit"),T=p.useCallback(async()=>{l(!0);try{let R=d;if(!R){const{data:$,error:P}=await Qr(s);if(P)throw P;c($),R=$}if(R!=null&&R.id){const{data:$,error:P}=await eh(R.id);if(P)throw P;if(h($),$.length>0){const U=$[0];f(U),x(U.submission_text||""),v([]),U.submitted_at||a(U)==="submitted"||a(U)==="graded"?j("view"):j("edit")}}}catch(R){console.error("Error loading assignment data:",R),i({title:"ไ���่สามารถโหลดข้อมูลงานได้",description:R.message,variant:"destructive"})}finally{l(!1)}},[s,d,i]);p.useEffect(()=>{T()},[T]);const M=async()=>{if(d){b(!0);try{const R={text:y};let $;if(m&&!m.submitted_at?$=await Ol(m.id,R):$=await Il(d.id,R),$.error)throw $.error;f($.data),i({title:"บันทึกแบบร่างแล้ว",description:"งานของคุณได้รับการบันทึกเป็นแบบร่างแล้ว"}),T()}catch(R){console.error("Error saving draft:",R),i({title:"ไม่สามารถบันทึกได้",description:R.message,variant:"destructive"})}finally{b(!1)}}},B=async()=>{if(d){if(!y.trim()){i({title:"กรุณาเพิ่มเนื้อหา",description:"กรุณาเขียนคำตอบหรือเนื้อหางาน",variant:"destructive"});return}N(!0);try{const R={text:y};let $;if(m&&!m.submitted_at?(await Ol(m.id,R),$=await Ll(m.id)):($=await Il(d.id,R),$.error||($=await Ll($.data.id))),$.error)throw $.error;i({title:"ส่งงานสำเร็จ! 🎉",description:"งานของคุณได้รับการส่งเรียบร้อยแล้ว"}),r==null||r($.data),j("view"),T()}catch(R){console.error("Error submitting assignment:",R),i({title:"ไม่สามารถส่งงานได้",description:R.message,variant:"destructive"})}finally{N(!1)}}},W=(d==null?void 0:d.due_date)&&new Date>new Date(d.due_date),C=k==="submit"||k==="edit",z=(m==null?void 0:m.submitted_at)||a(m)==="submitted"||a(m)==="graded";return o?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-700",children:"กำลังโหลดงานมอบหมาย..."})]})}):d?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:d.title}),t.jsx("p",{className:"text-gray-800",children:d.description})]}),t.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[z&&t.jsxs("div",{className:"flex items-center space-x-1 text-green-400 text-sm",children:[t.jsx(Ff,{className:"w-4 h-4"}),t.jsx("span",{children:"ส่งแล้ว"})]}),W&&!z&&t.jsxs("div",{className:"flex items-center space-x-1 text-red-400 text-sm",children:[t.jsx(Tt,{className:"w-4 h-4"}),t.jsx("span",{children:"เกินกำหนด"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 p-4 bg-white border border-gray-300/30 rounded-lg",children:[d.due_date&&t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(Me,{className:"w-4 h-4 text-blue-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-700",children:"กำหนดส่ง"}),t.jsx("p",{className:"text-gray-900",children:new Date(d.due_date).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(Le,{className:"w-4 h-4 text-yellow-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-700",children:"คะแนนเต็ม"}),t.jsxs("p",{className:"text-gray-900",children:[d.max_score||100," คะแนน"]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(oe,{className:"w-4 h-4 text-purple-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-700",children:"จำนวนไฟล์สูงสุด"}),t.jsxs("p",{className:"text-gray-900",children:[d.max_files||5," ไฟล์"]})]})]})]})]}),d.instructions&&t.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"คำแนะนำ"}),t.jsx("div",{className:"text-gray-800 whitespace-pre-wrap leading-relaxed",children:d.instructions})]}),u.length>0&&t.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"ประวัติการส่งงาน"}),t.jsx("div",{className:"space-y-2",children:u.map((R,$)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-300/30 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-800",children:"ส่งเมื่อ"}),t.jsx("span",{className:"ml-2 text-xs text-gray-700",children:R.submitted_at?new Date(R.submitted_at).toLocaleDateString("th-TH"):"ยังไม่ส่ง"})]}),t.jsxs("div",{className:`px-2 py-1 rounded text-xs ${a(R)==="submitted"?"bg-green-500/20 text-green-400":a(R)==="graded"?"bg-blue-500/20 text-blue-400":"bg-yellow-500/20 text-yellow-400"}`,children:[a(R)==="submitted"&&"ส่งแล้ว",a(R)==="graded"&&`ให้คะแนนแล้ว (${R.score}/${(d==null?void 0:d.max_score)||100})`,a(R)==="draft"&&"แบบร่าง"]})]}),t.jsx(S,{size:"sm",variant:"ghost",onClick:()=>{f(R),x(R.submission_text||""),v([]),j("view")},children:t.jsx(Ce,{className:"w-4 h-4"})})]},R.id))})]}),t.jsx(xe,{mode:"wait",children:t.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass-effect rounded-lg overflow-hidden",children:[m&&t.jsx("div",{className:"border-b border-white/10 p-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(S,{size:"sm",variant:k==="view"?"default":"ghost",onClick:()=>j("view"),children:[t.jsx(Ce,{className:"w-4 h-4 mr-2"}),"ดูงาน"]}),!z&&t.jsxs(S,{size:"sm",variant:k==="edit"?"default":"ghost",onClick:()=>j("edit"),children:[t.jsx(Js,{className:"w-4 h-4 mr-2"}),"แก้ไข"]})]})}),t.jsx("div",{className:"p-6",children:k==="view"?t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"งานที่ส่ง"}),(m==null?void 0:m.submission_text)&&t.jsxs("div",{children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"ข้อความ"}),t.jsx("div",{className:"p-4 bg-white border border-gray-300/30 rounded-lg text-gray-900 whitespace-pre-wrap",children:m.submission_text})]}),(m==null?void 0:m.feedback)&&t.jsxs("div",{children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"ความคิดเห็นจากอาจารย์"}),t.jsx("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg text-blue-800",children:m.feedback})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:m?"แก้ไขงาน":"ส่งงานมอบหมาย"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ข้อความ/คำตอบ"}),t.jsx("textarea",{value:y,onChange:R=>x(R.target.value),disabled:!C,rows:8,className:"w-full p-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none resize-none",placeholder:"เขียนคำตอบหรือคำอธิบายงานของคุณที่นี่..."})]}),t.jsx("div",{className:"text-xs text-gray-500",children:"หมายเหตุ: การอัปโหลดไฟล์จะเพิ่มเติมในเวอร์ชันถัดไป ตอนนี้ใช้ข้อความเท่านั้น"}),C&&t.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/10",children:[t.jsx("div",{className:"text-xs text-gray-500",children:W&&t.jsxs("div",{className:"flex items-center space-x-1 text-amber-400",children:[t.jsx(Tt,{className:"w-3 h-3"}),t.jsx("span",{children:"การส่งงานหลังกำหนดอาจมีผลต่อคะแนน"})]})}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(S,{variant:"outline",onClick:M,disabled:w||_,children:w?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"กำลังบันทึก..."]}):t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"w-4 h-4 mr-2"}),"บันทึกแบบร่าง"]})}),t.jsx(S,{onClick:B,disabled:w||_,className:"bg-green-500 hover:bg-green-600",children:_?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"กำลังส่ง..."]}):t.jsxs(t.Fragment,{children:[t.jsx(oa,{className:"w-4 h-4 mr-2"}),"ส่งงาน"]})})]})]})]})})]},k)})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(oe,{className:"w-16 h-16 text-gray-700 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"ไม่พบงานมอบหมาย"}),t.jsx("p",{className:"text-gray-700",children:"ไม่สามารถโหลดข้อมูลงานมอบหมายได้"})]})},gj=({isOpen:s,onClose:e,contentId:r,courseId:n})=>{const{toast:i}=ae(),[a,o]=p.useState({title:"",description:"",time_limit:30,passing_score:70,questions:[{id:1,question:"",type:"multiple_choice",options:["","","",""],correct_answer:0}]}),l=()=>{const m={id:Date.now(),question:"",type:"multiple_choice",options:["","","",""],correct_answer:0};o(f=>({...f,questions:[...f.questions,m]}))},d=m=>{o(f=>({...f,questions:f.questions.filter(y=>y.id!==m)}))},c=(m,f,y)=>{o(x=>({...x,questions:x.questions.map(g=>g.id===m?{...g,[f]:y}:g)}))},u=(m,f,y)=>{o(x=>({...x,questions:x.questions.map(g=>g.id===m?{...g,options:g.options.map((v,w)=>w===f?y:v)}:g)}))},h=async()=>{try{if(!a.title.trim()){i({title:"กรุณาใส่ชื่อแบบทดสอบ",variant:"destructive"});return}for(const y of a.questions){if(!y.question.trim()){i({title:"กรุณาใส่คำถาม",variant:"destructive"});return}if(y.options.some(x=>!x.trim())){i({title:"กรุณาใส่ตัวเลือกให้ครบ",variant:"destructive"});return}}const{data:m,error:f}=await lj(r,n,a);if(f)throw f;i({title:"บันทึกแบบทดสอบสำเร็จ",description:`แบบทดสอบ "${a.title}" ถูกสร้างแล้ว`}),e()}catch(m){console.error("Error saving quiz:",m),i({title:"เกิดข้อผิดพลาดในการบันทึก",description:m.message||"ไม่สามารถบันทึกแบบทดสอบได้",variant:"destructive"})}};return s?t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:e,children:t.jsxs(L.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:m=>m.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"ตั้งค่าแบบทดสอบ"}),t.jsx(S,{variant:"ghost",size:"sm",onClick:e,children:t.jsx(we,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"ชื่อแบบทดสอบ"}),t.jsx("input",{type:"text",value:a.title,onChange:m=>o(f=>({...f,title:m.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ใส่ชื่อแบบทดสอบ"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"เวลาทำ (นาที)"}),t.jsx("input",{type:"number",value:a.time_limit,onChange:m=>o(f=>({...f,time_limit:parseInt(m.target.value)})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"คำอธิบาย"}),t.jsx("textarea",{value:a.description,onChange:m=>o(f=>({...f,description:m.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"คำอธิบายเกี่ยวกับแบบทดสอบ"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"คะแนนขั้นต่ำที่ผ่าน (%)"}),t.jsx("input",{type:"number",value:a.passing_score,onChange:m=>o(f=>({...f,passing_score:parseInt(m.target.value)})),className:"w-32 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"100"})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium",children:"คำถาม"}),t.jsxs(S,{onClick:l,size:"sm",children:[t.jsx(Je,{className:"w-4 h-4 mr-2"}),"เพิ่มคำถาม"]})]}),t.jsx("div",{className:"space-y-6",children:a.questions.map((m,f)=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h4",{className:"font-medium",children:["คำถามที่ ",f+1]}),a.questions.length>1&&t.jsx(S,{variant:"ghost",size:"sm",onClick:()=>d(m.id),className:"text-red-600 hover:text-red-700",children:t.jsx(Re,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"คำถาม"}),t.jsx("textarea",{value:m.question,onChange:y=>c(m.id,"question",y.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"ใส่คำถาม"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"ตัวเลือก"}),t.jsx("div",{className:"space-y-2",children:m.options.map((y,x)=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"radio",name:`correct-${m.id}`,checked:m.correct_answer===x,onChange:()=>c(m.id,"correct_answer",x),className:"text-blue-600"}),t.jsx("input",{type:"text",value:y,onChange:g=>u(m.id,x,g.target.value),className:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`ตัวเลือกที่ ${x+1}`})]},x))}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"เลือกวงกลมเพื่อกำหนดคำตอบที่ถูกต้อง"})]})]})]},m.id))})]})]})}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t",children:[t.jsx(S,{variant:"outline",onClick:e,children:"ยกเลิก"}),t.jsxs(S,{onClick:h,children:[t.jsx(st,{className:"w-4 h-4 mr-2"}),"บันทึกแบบทดสอบ"]})]})]})}):null},xj=({isOpen:s,onClose:e,contentId:r,courseId:n})=>{const{toast:i}=ae(),[a,o]=p.useState({title:"",description:"",instructions:"",due_date:"",max_score:100,submission_type:"file",allowed_file_types:[".pdf",".doc",".docx"],max_file_size:10,allow_late_submission:!0,late_penalty:10}),l=[{value:"file",label:"อัพโหลดไฟล์"},{value:"text",label:"ข้อความ"},{value:"url",label:"ลิงก์"},{value:"both",label:"ไฟล์และข้อความ"}],d=[".pdf",".doc",".docx",".txt",".rtf",".jpg",".jpeg",".png",".gif",".zip",".rar",".7z",".ppt",".pptx",".xls",".xlsx"],c=h=>{o(m=>({...m,allowed_file_types:m.allowed_file_types.includes(h)?m.allowed_file_types.filter(f=>f!==h):[...m.allowed_file_types,h]}))},u=async()=>{try{if(!a.title.trim()){i({title:"กรุณาใส่ชื่องานมอบหมาย",variant:"destructive"});return}if(!a.description.trim()){i({title:"กรุณาใส่คำอธิบายงาน",variant:"destructive"});return}if(!a.due_date){i({title:"กรุณากำหนดวันที่ส่งงาน",variant:"destructive"});return}if(new Date(a.due_date)<=new Date){i({title:"วันที่ส่งงานต้องเป็นอนาคต",variant:"destructive"});return}const{data:f,error:y}=await uj(r,n,a);if(y)throw y;i({title:"บันทึกงานมอบหมายสำเร็จ",description:`งาน "${a.title}" ถูกสร้างแล้ว`}),e()}catch(h){console.error("Error saving assignment:",h),i({title:"เกิดข้อผิดพลาดในการบันทึก",description:h.message||"ไม่สามารถบันทึกงานมอบหมายได้",variant:"destructive"})}};return s?t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:e,children:t.jsxs(L.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:h=>h.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"ตั้งค่างานมอบหมาย"}),t.jsx(S,{variant:"ghost",size:"sm",onClick:e,children:t.jsx(we,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"ชื่องานมอบหมาย"}),t.jsx("input",{type:"text",value:a.title,onChange:h=>o(m=>({...m,title:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ใส่ชื่องานมอบหมาย"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"วันที่ส่งงาน"}),t.jsx("input",{type:"datetime-local",value:a.due_date,onChange:h=>o(m=>({...m,due_date:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"คะแนนเต็ม"}),t.jsx("input",{type:"number",value:a.max_score,onChange:h=>o(m=>({...m,max_score:parseInt(h.target.value)})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"คำอธิบายงาน"}),t.jsx("textarea",{value:a.description,onChange:h=>o(m=>({...m,description:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"อธิบายงานที่มอบหมาย"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"คำแนะนำการทำงาน"}),t.jsx("textarea",{value:a.instructions,onChange:h=>o(m=>({...m,instructions:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"4",placeholder:"ใส่คำแนะนำและขั้นตอนการทำงาน"})]}),t.jsxs("div",{className:"border-t pt-6",children:[t.jsx("h3",{className:"text-lg font-medium mb-4",children:"การส่งงาน"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"ประเภทการส่งงาน"}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:l.map(h=>t.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[t.jsx("input",{type:"radio",name:"submission_type",value:h.value,checked:a.submission_type===h.value,onChange:m=>o(f=>({...f,submission_type:m.target.value})),className:"text-blue-600"}),t.jsx("span",{className:"text-sm",children:h.label})]},h.value))})]}),(a.submission_type==="file"||a.submission_type==="both")&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"ประเภทไฟล์ที่อนุญาต"}),t.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:d.map(h=>t.jsxs("label",{className:"flex items-center space-x-1 text-xs",children:[t.jsx("input",{type:"checkbox",checked:a.allowed_file_types.includes(h),onChange:()=>c(h),className:"text-blue-600"}),t.jsx("span",{children:h})]},h))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"ขนาดไฟล์สูงสุด (MB)"}),t.jsx("input",{type:"number",value:a.max_file_size,onChange:h=>o(m=>({...m,max_file_size:parseInt(h.target.value)})),className:"w-32 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"100"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:a.allow_late_submission,onChange:h=>o(m=>({...m,allow_late_submission:h.target.checked})),className:"text-blue-600"}),t.jsx("span",{className:"text-sm font-medium",children:"อนุญาตให้ส่งงานช้า"})]}),a.allow_late_submission&&t.jsxs("div",{className:"ml-6",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"หักคะแนนการส่งช้า (%)"}),t.jsx("input",{type:"number",value:a.late_penalty,onChange:h=>o(m=>({...m,late_penalty:parseInt(h.target.value)})),className:"w-32 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"100"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"คะแนนที่จะหักต่อวันที่ส่งช้า"})]})]})]})]})]})}),t.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t",children:[t.jsx(S,{variant:"outline",onClick:e,children:"ยกเลิก"}),t.jsxs(S,{onClick:u,children:[t.jsx(st,{className:"w-4 h-4 mr-2"}),"บันทึกงานมอบหมาย"]})]})]})}):null},yj=async(s,e="video")=>{try{const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:i,error:a}=await E.from("course_content").select("course_id").eq("id",s).single();if(a)throw a;if(!i)throw new Error("Content not found");let o=null,l=null;try{const d=await E.from("user_progress").upsert([{user_id:r.id,course_id:i.course_id,content_id:s,completed_at:new Date().toISOString(),is_completed:!0,completion_percentage:100,last_accessed_at:new Date().toISOString()}],{onConflict:"user_id,course_id,content_id"}).select().single();o=d.data,l=d.error}catch(d){console.log("Falling back to basic user_progress structure:",d);const c=await E.from("user_progress").upsert([{user_id:r.id,course_id:i.course_id,content_id:s,completed_at:new Date().toISOString(),time_spent_minutes:0}],{onConflict:"user_id,course_id,content_id"}).select().single();o=c.data,l=c.error}if(l)throw l;return{data:o,error:null}}catch(r){return console.error("Error marking content complete:",r),{data:null,error:r}}},Sr=async s=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)return{data:null,error:null};const{data:n,error:i}=await E.from("enrollments").select("id, progress_percentage, completed_at, is_active").eq("user_id",e.id).eq("course_id",s).maybeSingle();if(i)throw i;if(!n)return{data:{enrolled:!1},error:null};const{data:a,error:o}=await E.from("course_content").select("id, title, content_type, order_index").eq("course_id",s).order("order_index");if(o)throw o;const l=a.map(b=>b.id),{data:d,error:c}=await E.from("user_progress").select("content_id, completed_at, is_completed, completion_percentage").eq("user_id",e.id).eq("course_id",s).in("content_id",l);if(c)throw c;const{data:u,error:h}=await E.from("quiz_attempts").select("quiz_id, is_passed, completed_at").eq("user_id",e.id);h&&console.warn("Quiz attempts table not available:",h);const{data:m,error:f}=await E.from("assignment_submissions").select("assignment_id, submitted_at, score, graded_at").eq("user_id",e.id);f&&console.warn("Assignment submissions table not available:",f);const y=new Map((d||[]).map(b=>[b.content_id,b])),x=a.map(b=>{const _=y.get(b.id);let N=!1;if(_&&_.is_completed)N=!0;else switch(b.content_type){case"video":N=!!(_!=null&&_.is_completed);break;case"quiz":N=(u||[]).some(k=>k.is_passed);break;case"assignment":N=(m||[]).some(k=>k.submitted_at!==null);break;default:N=!!(_!=null&&_.is_completed)}return{...b,is_completed:N,completion_percentage:(_==null?void 0:_.completion_percentage)||(N?100:0),completed_at:_==null?void 0:_.completed_at}}),g=x.filter(b=>b.is_completed).length,v=x.length,w=v>0?Math.round(g/v*100):0;return{data:{enrolled:!0,enrollment:n,content_progress:x,completed_count:g,total_count:v,progress_percentage:w,calculated_progress:w},error:null}}catch(e){return console.error("Error fetching course progress:",e),{data:null,error:e}}},th=async s=>{try{const{data:e,error:r}=await E.from("course_content").select("*").eq("course_id",s).order("order_index",{ascending:!0});if(r)throw r;return{data:e||[],error:null}}catch(e){return console.error("Error fetching content with progress:",e),{data:[],error:e}}};async function Rl(s,e){var r,n;try{console.log("🔒 Checking course content accessibility:",{courseId:s,userId:e});const{data:i,error:a}=await E.from("course_content").select(`
        id,
        title,
        order_index,
        content_type,
        lock_enabled,
        requires_previous_completion,
        lock_message
      `).eq("course_id",s).order("order_index",{ascending:!0});if(a)return console.error("Error fetching course contents:",a),{error:a};const{data:o}=await E.from("enrollments").select("id").eq("user_id",e).eq("course_id",s).single();if(!o){console.log("❌ User not enrolled in course");const h={};return i.forEach((m,f)=>{h[m.id]={isAccessible:f===0||m.content_type==="video",reason:f===0?"First content available":m.content_type==="video"?"Video content freely accessible":"User not enrolled"}}),{accessibility:h}}let l=null,d=null;try{const h=await E.from("user_progress").select("content_id, is_completed, completed_at").eq("user_id",e);l=h.data,d=h.error}catch(h){console.log("Falling back to completed_at only check for all progress:",h);const m=await E.from("user_progress").select("content_id, completed_at").eq("user_id",e);l=((r=m.data)==null?void 0:r.map(f=>({content_id:f.content_id,is_completed:!!f.completed_at,completed_at:f.completed_at})))||[],d=m.error}console.log("📊 All progress records:",{progressRecords:l,progressError:d});const c=new Set(((n=l==null?void 0:l.filter(h=>h.is_completed))==null?void 0:n.map(h=>h.content_id))||[]);console.log("✅ Completed content IDs:",Array.from(c));const u={};for(let h=0;h<i.length;h++){const m=i[h];if(m.content_type==="video"){u[m.id]={isAccessible:!0,reason:"Video content freely accessible"};continue}if(!m.lock_enabled||!m.requires_previous_completion){u[m.id]={isAccessible:!0,reason:"Content lock disabled"};continue}if(h===0){u[m.id]={isAccessible:!0,reason:"First content"};continue}const f=i[h-1];f&&c.has(f.id)?u[m.id]={isAccessible:!0,reason:"Previous content completed"}:u[m.id]={isAccessible:!1,reason:m.lock_message||"คุณต้องทำเนื้อหาก่อนหน้าให้เสร็จก่อน",blockingContent:f}}return console.log("🔒 Content accessibility results:",u),{accessibility:u}}catch(i){return console.error("Error checking course content accessibility:",i),{error:i}}}const Cr=({contentId:s,className:e=""})=>{const{toast:r}=ae(),[n,i]=p.useState([]),[a,o]=p.useState(!0),[l,d]=p.useState(null),c=y=>{const x=y==null?void 0:y.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(x)?t.jsx(Ue,{className:"w-5 h-5 text-blue-500"}):["mp4","avi","mov","wmv","flv"].includes(x)?t.jsx(ca,{className:"w-5 h-5 text-purple-500"}):["zip","rar","7z","tar","gz"].includes(x)?t.jsx(qc,{className:"w-5 h-5 text-orange-500"}):["pdf"].includes(x)?t.jsx(oe,{className:"w-5 h-5 text-red-500"}):["doc","docx"].includes(x)?t.jsx(oe,{className:"w-5 h-5 text-blue-600"}):["ppt","pptx"].includes(x)?t.jsx(oe,{className:"w-5 h-5 text-orange-600"}):["xls","xlsx"].includes(x)?t.jsx(oe,{className:"w-5 h-5 text-green-600"}):t.jsx(Bc,{className:"w-5 h-5 text-slate-500"})},u=y=>{if(y===0)return"0 Bytes";const x=1024,g=["Bytes","KB","MB","GB"],v=Math.floor(Math.log(y)/Math.log(x));return parseFloat((y/Math.pow(x,v)).toFixed(2))+" "+g[v]};p.useEffect(()=>{(async()=>{if(s){o(!0);try{console.log("Loading attachments for content:",s);const{data:x,error:g}=await Ku(s);if(g){console.error("Error loading attachments:",g),r({title:"ไม่สามารถโหลดไฟล์แนบได้",description:"มีข้อผิดพลาดในการโหลดไฟล์แนบ",variant:"destructive"});return}console.log("Loaded attachments:",x),i(x||[])}catch(x){console.error("Error in loadAttachments:",x),r({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถโหลดไฟล์แนบได้",variant:"destructive"})}finally{o(!1)}}})()},[s,r]);const h=async y=>{d(y.id);try{if(console.log("Downloading file:",y),y.file_url){const x=document.createElement("a");x.href=y.file_url,x.download=y.original_filename||y.filename,x.target="_blank",document.body.appendChild(x),x.click(),document.body.removeChild(x),r({title:"เริ่มดาวน์โหลด",description:`กำลังดาวน์โหลดไฟล์ ${y.original_filename||y.filename}`})}else throw new Error("ไม่พบ URL ของไฟล์")}catch(x){console.error("Download error:",x),r({title:"ไม่สามารถดาวน์โหลดได้",description:x.message||"เกิดข้อผิดพลาดในการดาวน์โหลดไฟล์",variant:"destructive"})}finally{d(null)}},m=y=>{y.file_url&&window.open(y.file_url,"_blank")},f=(y,x)=>{const g=["application/pdf","image/jpeg","image/png","image/gif","image/webp","text/plain"],v=["pdf","jpg","jpeg","png","gif","webp","txt"];return g.includes(y)||v.includes(x==null?void 0:x.toLowerCase())};return a?t.jsxs("div",{className:`flex items-center justify-center p-8 ${e}`,children:[t.jsx(rt,{className:"w-6 h-6 animate-spin text-gray-400"}),t.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"กำลังโหลดไฟล์แนบ..."})]}):!n||n.length===0?null:t.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-6 ${e}`,children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[t.jsx(Ir,{className:"w-5 h-5 text-orange-500"}),t.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["ไฟล์แนบเอกสาร (",n.length,")"]})]}),t.jsx("div",{className:"space-y-3",children:n.map(y=>t.jsxs(L.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-100 hover:bg-gray-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[t.jsx("div",{className:"flex-shrink-0",children:c(y.file_extension)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:y.original_filename||y.filename}),t.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[t.jsx("span",{children:u(y.file_size)}),y.file_extension&&t.jsx("span",{className:"uppercase",children:y.file_extension}),y.download_count>0&&t.jsxs("span",{children:["ดาวน์โหลด ",y.download_count," ครั้ง"]})]}),y.description&&t.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:y.description})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[f(y.mime_type,y.file_extension)&&t.jsx(S,{size:"sm",variant:"outline",onClick:()=>m(y),className:"text-blue-600 border-blue-200 hover:bg-blue-50",title:"ดูตัวอย่าง",children:t.jsx(Ce,{className:"w-4 h-4"})}),t.jsx(S,{size:"sm",onClick:()=>h(y),disabled:l===y.id,className:"bg-green-600 hover:bg-green-700 text-white",title:"ดาวน์โหลด",children:l===y.id?t.jsx(rt,{className:"w-4 h-4 animate-spin"}):t.jsx(kt,{className:"w-4 h-4"})})]})]},y.id))}),t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsx("p",{className:"text-xs text-gray-500 text-center",children:"💡 คลิกปุ่มดาวน์โหลดเพื่อบันทึกไฟล์ลงเครื่องของคุณ"})})]})},bj=()=>{const{courseId:s}=sr(),{user:e,isAdmin:r}=De(),{toast:n}=ae(),[i,a]=p.useState(null),[o,l]=p.useState(!0),[d,c]=p.useState({isEnrolled:!1}),[u,h]=p.useState(null),[m,f]=p.useState(null),[y,x]=p.useState({}),[g,v]=p.useState(null),[w,b]=p.useState(null),[_,N]=p.useState(!1),[k,j]=p.useState(null),[T,M]=p.useState(!1),[B,W]=p.useState(!1),[C,z]=p.useState(!1),R=p.useCallback(async()=>{if(e)try{console.log("Checking enrollment for user:",e==null?void 0:e.id,"course:",s);const{isEnrolled:D,status:q,error:K}=await Wu(s);if(console.log("Enrollment result:",{isEnrolled:D,status:q,error:K}),K){console.error("Enrollment check error:",K),n({title:"ไม่สามารถตรวจสอบการลงทะเบียนได้",description:K.message,variant:"destructive"}),c({isEnrolled:!1,status:null});return}if(c({isEnrolled:D,status:q}),q!=null&&q.enrollment_id?(f(q.enrollment_id),console.log("Enrollment ID set:",q.enrollment_id)):q!=null&&q.id&&(f(q.id),console.log("Enrollment ID set from status.id:",q.id)),D){console.log("User is enrolled, loading progress...");const{data:H}=await Sr(s);console.log("Course progress data:",H),h(H);const{data:J}=await th(s);if(J&&J.length>0){console.log("Loading course content",J.length,"items");const{accessibility:Ne,error:pe}=await Rl(s,e.id);pe?console.error("Error loading content accessibility:",pe):(console.log("🔒 Content accessibility loaded:",Ne),x(Ne))}}else console.log("User is not enrolled")}catch(D){console.error("Error in checkEnrollmentAndProgress:",D),n({title:"เกิดข้อผิดพลาดในการตรวจสอบ",description:D.message,variant:"destructive"})}},[e,s,n]),$=p.useCallback(async()=>{l(!0),console.log("CourseLearningPage: Loading course with ID:",s);const D=setTimeout(()=>{console.error("CourseLearningPage: Course loading timeout after 10 seconds"),l(!1),n({title:"การโหลดใช้เวลานานเกินไป",description:"กรุณาลองรีเฟรชหน้าใหม่หรือตรวจสอบการเชื่อมต่ออินเทอร์เน็ต",variant:"destructive"})},1e4);try{const{data:q,error:K}=await $a(s);clearTimeout(D),console.log("CourseLearningPage: Course data received:",q,"Error:",K),K?(console.error("CourseLearningPage: Course loading error:",K),n({title:"ข้อผิดพลาดในการโหลดข้อมูล",description:K.message,variant:"destructive"})):q?(a(q),console.log("CourseLearningPage: Course set successfully:",q),q!=null&&q.content&&q.content.length>0?(console.log("CourseLearningPage: Auto-selecting first content:",q.content[0]),v(q.content[0])):(console.log("CourseLearningPage: No content found in course"),console.log("CourseLearningPage: Course data structure:",q),console.log("CourseLearningPage: Content array:",q==null?void 0:q.content))):(console.log("CourseLearningPage: No course data returned"),n({title:"ไม่พบข้อมูลคอร์ส",description:"คอร์สนี้อาจไม่มีอยู่ในระบบ",variant:"destructive"}))}catch(q){clearTimeout(D),console.error("CourseLearningPage: Unexpected error loading course:",q),n({title:"เกิดข้อผิดพลาดที่ไม่คาดคิด",description:q.message,variant:"destructive"})}finally{l(!1)}},[s,n]);p.useEffect(()=>{$()},[s]),p.useEffect(()=>{e&&i&&(console.log("useEffect: Checking enrollment and progress",{user:e==null?void 0:e.id,courseId:i==null?void 0:i.id}),R())},[e,i==null?void 0:i.id]);const P=async D=>{const q=i.content.findIndex(K=>K.id===D.id);if(O(D,q)){const K=y[D.id],H=(K==null?void 0:K.reason)||"กรุณาผ่านเนื้อหาก่อนหน้านี้ก่อน",J=K==null?void 0:K.blockingContent;n({title:"เนื้อหายังไม่เปิดให้เรียน",description:J?`กรุณาผ่าน "${J.title}" ก่อน`:H,variant:"destructive"});return}if(v(D),N(!1),b(null),M(!1),j(null),D.content_type==="quiz"){const{data:K}=await Hi(D.id);K&&(b(K),N(!0))}if(D.content_type==="assignment")try{const{data:K,error:H}=await Qr(D.id);K&&!H&&(j(K),M(!0))}catch{console.log(`ไม่พบงานมอบหมายสำหรับเนื้อหา: ${D.title}`)}},U=D=>{n({title:D.is_passed?"ยินดีด้วย! ผ่านแบบทดสอบ 🎉":"ไม่ผ่านแบบทดสอบ",description:`คะแนน: ${D.score}%`,variant:D.is_passed?"default":"destructive"}),e&&i&&(async()=>{try{const{data:K}=await Sr(s);h(K)}catch(K){console.error("Error refreshing progress:",K)}})(),N(!1)},G=D=>{n({title:"ส่งงานสำเร็จ! 🎉",description:"งานของคุณได้รับการส่งเรียบร้อยแล้ว"}),e&&i&&(async()=>{try{const{data:K}=await Sr(s);h(K)}catch(K){console.error("Error refreshing progress:",K)}})(),M(!1)},F=async(D,q="general")=>{var K;try{const H=(K=i==null?void 0:i.content)==null?void 0:K.find(Ne=>Ne.id===D),J=(H==null?void 0:H.content_type)==="video"?"วิดีโอ":(H==null?void 0:H.content_type)==="text"?"เนื้อหา":(H==null?void 0:H.content_type)==="quiz"?"แบบทดสอบ":(H==null?void 0:H.content_type)==="assignment"?"งาน":"เนื้อหา";if(n({title:`${J}เสร็จสิ้น! 🎉`,description:`คุณได้ทำ${J}นี้เสร็จเรียบร้อยแล้ว`}),e&&D){const{data:Ne,error:pe}=await yj(D,q);pe?console.error("Error marking content as completed:",pe):console.log("Content marked as completed:",Ne)}e&&i&&(async()=>{try{const{data:pe}=await Sr(s);h(pe);const{accessibility:ze,error:lt}=await Rl(s,e.id);lt||x(ze)}catch(pe){console.error("Error refreshing progress:",pe)}})()}catch(H){console.error("Error in handleContentComplete:",H),n({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถบันทึกความคืบหน้าได้",variant:"destructive"})}},A=D=>F(D,"video"),I=D=>{if(console.log("🎯 getContentProgress called for:",D.content_type,D.id),console.log("📋 Current courseProgress:",u),!(u!=null&&u.content_progress))return console.log("📋 No courseProgress.content_progress found"),0;const q=u.content_progress.find(H=>H.id===D.id),K=q!=null&&q.is_completed?100:0;return console.log("📄 Content progress:",K),K},O=(D,q)=>{if(y.hasOwnProperty(D.id)){const J=y[D.id];return console.log("🔒 Content lock check:",{contentId:D.id,accessInfo:J,isAccessible:J==null?void 0:J.isAccessible}),!(J!=null&&J.isAccessible)}if(q===0)return!1;const K=i.content[q-1];return I(K)<100};return o?t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#667eea] mx-auto mb-4"}),t.jsx("p",{className:"text-teal-700",children:"กำลังโหลดเนื้อหาคอร์ส..."}),t.jsxs("p",{className:"text-teal-700 text-sm mt-2",children:["Course ID: ",s]})]})}):i?d.isEnrolled?t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0a192f] to-[#172a46]",children:[t.jsx(be,{children:t.jsxs("title",{children:[i.title," - เรียน | Login Learning"]})}),t.jsx("div",{className:"bg-black/20 backdrop-blur-sm border-b border-white/10",children:t.jsx("div",{className:"container mx-auto px-4 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(Y,{to:`/courses/${s}`,children:t.jsx(S,{variant:"ghost",size:"icon",className:"text-teal-900",children:t.jsx(tt,{className:"w-5 h-5"})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-teal-900",children:i.title}),u&&t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-teal-800",children:[t.jsxs("span",{children:["ความคืบหน้า: ",u.progress_percentage,"%"]}),t.jsx("span",{children:"•"}),t.jsxs("span",{children:[u.completed_count,"/",u.total_count," เนื้อหา"]})]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-teal-800",children:[t.jsx(ie,{className:"w-4 h-4"}),t.jsxs("span",{children:[i.enrollment_count||0," คน"]})]})]})})}),t.jsx("div",{className:"container mx-auto px-4 py-6",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 sticky top-24",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-3 rounded-xl mr-4",children:t.jsx(ge,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"เนื้อหาคอร์ส"}),t.jsx("p",{className:"text-sm text-gray-600",children:"เลือกเนื้อหาที่ต้องการเรียน"})]})]}),u&&t.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-200",children:[t.jsxs("div",{className:"flex justify-between text-sm font-semibold text-gray-700 mb-3",children:[t.jsx("span",{children:"🎯 ความคืบหน้าทั้งหมด"}),t.jsxs("span",{className:"text-indigo-600",children:[u.progress_percentage,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 shadow-inner",children:t.jsx("div",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 h-3 rounded-full transition-all duration-500 shadow-sm",style:{width:`${u.progress_percentage}%`}})}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-2",children:[t.jsx("span",{children:"เริ่มต้น"}),t.jsx("span",{children:"เสร็จสิ้น"})]})]}),t.jsx("div",{className:"space-y-3",children:i!=null&&i.content&&i.content.length>0?i.content.map((D,q)=>{var Ne,pe;const K=I(D),H=O(D,q),J=(g==null?void 0:g.id)===D.id;return t.jsx(L.div,{whileHover:H?{}:{scale:1.02,y:-2},className:`group relative overflow-hidden rounded-xl border-2 transition-all duration-300 cursor-pointer ${J?"border-blue-500 bg-blue-50 shadow-md":H?"border-gray-200 bg-gray-50 opacity-60":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,onClick:()=>!H&&P(D),children:t.jsx("div",{className:"relative p-4",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${H?"bg-gray-300":K>=100?"bg-gradient-to-r from-green-500 to-emerald-500":J?"bg-gradient-to-r from-blue-500 to-indigo-500":"bg-gradient-to-r from-gray-400 to-gray-500"}`,children:H?t.jsx(Et,{className:"w-5 h-5 text-white"}):K>=100?t.jsx(ve,{className:"w-5 h-5 text-white"}):D.content_type==="video"?t.jsx(Ys,{className:"w-5 h-5 text-white"}):D.content_type==="quiz"?t.jsx(Ls,{className:"w-5 h-5 text-white"}):D.content_type==="assignment"?t.jsx(ge,{className:"w-5 h-5 text-white"}):t.jsx(oe,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:`text-sm font-bold mb-1 line-clamp-2 ${H?"text-gray-500":J?"text-blue-800":"text-gray-800"}`,children:D.title}),t.jsxs("div",{className:"flex items-center justify-between text-xs mb-2",children:[t.jsx("span",{className:`${H?"text-gray-400":"text-gray-600"}`,children:D.content_type==="video"?"📹 วิดีโอ":D.content_type==="quiz"?"📝 แบบทดสอบ":D.content_type==="assignment"?"📋 งานมอบหมาย":"📄 เอกสาร"}),D.duration_minutes&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(fe,{className:"w-3 h-3"}),t.jsxs("span",{children:[D.duration_minutes," นาที"]})]})]}),H?t.jsxs("div",{className:"text-xs text-red-600 bg-red-50 border border-red-200 rounded-md p-2 mt-2",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Et,{className:"w-3 h-3"}),t.jsx("span",{className:"font-medium",children:"เนื้อหาถูกล็อค"})]}),t.jsx("div",{className:"mt-1 text-gray-600",children:((Ne=y[D.id])==null?void 0:Ne.reason)||"กรุณาผ่านเนื้อหาก่อนหน้าก่อน"}),((pe=y[D.id])==null?void 0:pe.blockingContent)&&t.jsxs("div",{className:"mt-1 text-blue-600",children:['ต้องผ่าน: "',y[D.id].blockingContent.title,'"']})]}):t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${K>=100?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-blue-500 to-indigo-500"}`,style:{width:`${Math.min(K,100)}%`}})})]})]})})},D.id)}):t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(oe,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:"ยังไม่มีเนื้อหาในคอร์สนี้"})]})})]})}),t.jsx("div",{className:"lg:col-span-3",children:g?t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-6 text-white",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:[g.content_type==="video"&&t.jsx(Ys,{className:"w-6 h-6 text-white"}),g.content_type==="text"&&t.jsx(oe,{className:"w-6 h-6 text-white"}),g.content_type==="quiz"&&t.jsx(Ls,{className:"w-6 h-6 text-white"}),g.content_type==="assignment"&&t.jsx(ge,{className:"w-6 h-6 text-white"})]}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:g.title}),t.jsxs("div",{className:"flex items-center text-blue-100 mt-1",children:[t.jsx(fe,{className:"w-4 h-4 mr-1"}),t.jsxs("span",{children:[g.duration_minutes||0," นาที"]})]})]})]})})}),t.jsxs("div",{className:"p-6",children:[g.content_type==="video"&&(g.content_url||g.video_url)&&t.jsxs("div",{children:[t.jsx(tj,{src:g.content_url||g.video_url,contentId:g.id,title:g.title,autoPlay:!1,onComplete:A}),t.jsxs("div",{className:"mt-6 border-t pt-6",children:[I(g)>=100?t.jsx("div",{className:"text-center",children:t.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-lg",children:[t.jsx(ve,{className:"w-5 h-5 mr-2"}),"วิดีโอนี้ดูเสร็จสิ้นแล้ว"]})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsxs("div",{className:"text-center p-4 border border-blue-200 rounded-lg",children:[t.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"ความคืบหน้าการดู"}),t.jsx("div",{className:"text-sm text-gray-600",children:"สามารถเข้าถึงเนื้อหาได้ทั้งหมด"})]})}),r&&t.jsxs("div",{className:"border-t pt-4 mt-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"การตั้งค่าสำหรับผู้ดูแล"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(S,{variant:"outline",size:"sm",className:"bg-red-500 text-white border-red-500 hover:bg-red-600 hover:border-red-600 font-medium",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/admin/courses/${i.id}/content`),n({title:"คัดลอก link แล้ว",description:"ส่ง link นี้ให้ admin อื่นเพื่อจัดการเนื้อหา"})},children:[t.jsx(Ke,{className:"w-4 h-4 mr-2"}),"แก้ไขวิดีโอ"]}),t.jsxs(S,{variant:"outline",size:"sm",className:"bg-purple-500 text-white border-purple-500 hover:bg-purple-600 hover:border-purple-600 font-medium",onClick:()=>{navigator.clipboard.writeText(window.location.href),n({title:"คัดลอก link แล้ว",description:"แชร์ link นี้ให้นักเรียนเพื่อดูวิดีโอ"})},children:[t.jsx(As,{className:"w-4 h-4 mr-2"}),"แชร์วิดีโอ"]})]})]})]})]}),g.content_type==="text"&&t.jsxs("div",{children:[t.jsx("div",{className:"prose max-w-none mb-8",children:t.jsx("div",{dangerouslySetInnerHTML:{__html:g.content||"ไม่มีเนื้อหา"}})}),t.jsx(Cr,{contentId:g.id,className:"mb-8"}),t.jsxs("div",{className:"border-t pt-6",children:[I(g)>=100?t.jsx("div",{className:"text-center",children:t.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-lg",children:[t.jsx(ve,{className:"w-5 h-5 mr-2"}),"เนื้อหานี้เสร็จสิ้นแล้ว"]})}):t.jsx("div",{className:"text-center",children:t.jsxs(S,{onClick:()=>F(g.id,"text"),className:"bg-green-600 hover:bg-green-700 text-white",size:"lg",children:[t.jsx(ve,{className:"w-5 h-5 mr-2"}),"ผ่านเนื้อหานี้"]})}),r&&t.jsxs("div",{className:"border-t pt-4 mt-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"การตั้งค่าสำหรับผู้ดูแล"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(S,{variant:"outline",size:"sm",className:"bg-indigo-500 text-white border-indigo-500 hover:bg-indigo-600 hover:border-indigo-600 font-medium",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/admin/courses/${i.id}/content`),n({title:"คัดลอก link แล้ว",description:"ส่ง link นี้ให้ admin อื่นเพื่อจัดการเนื้อหา"})},children:[t.jsx(Ke,{className:"w-4 h-4 mr-2"}),"แก้ไขเนื้อหา"]}),t.jsxs(S,{variant:"outline",size:"sm",className:"bg-purple-500 text-white border-purple-500 hover:bg-purple-600 hover:border-purple-600 font-medium",onClick:()=>{navigator.clipboard.writeText(window.location.href),n({title:"คัดลอก link แล้ว",description:"แชร์ link นี้ให้นักเรียนเพื่ออ่านเนื้อหา"})},children:[t.jsx(As,{className:"w-4 h-4 mr-2"}),"แชร์เนื้อหา"]})]})]})]})]}),g.content_type==="quiz"&&t.jsxs("div",{children:[t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ls,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"แบบทดสอบ"}),t.jsx("p",{className:"text-gray-600 mb-6",children:g.content||"คลิกปุ่มด้านล่างเพื่อเริ่มทำแบบทดสอบ"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs(S,{className:"bg-blue-500 hover:bg-blue-600 text-white",onClick:async()=>{const{data:D}=await Hi(g.id);D?(b(D),N(!0)):n({title:"ไม่พบแบบทดสอบ",description:"ไม่มีแบบทดสอบสำหรับเนื้อหานี้",variant:"destructive"})},children:[t.jsx(Ls,{className:"w-4 h-4 mr-2"}),"เริ่มทำแบบทดสอบ"]}),I(g)<100&&t.jsx("div",{children:t.jsxs(S,{variant:"outline",className:"bg-green-600 hover:bg-green-700 text-white border-green-600",onClick:()=>F(g.id,"quiz"),children:[t.jsx(ve,{className:"w-4 h-4 mr-2"}),"ผ่านเนื้อหานี้"]})}),r&&t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"การตั้งค่าสำหรับผู้ดูแล"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(S,{variant:"outline",size:"sm",className:"bg-blue-500 text-white border-blue-500 hover:bg-blue-600 hover:border-blue-600 font-medium",onClick:()=>W(!0),children:[t.jsx(Ke,{className:"w-4 h-4 mr-2"}),"ตั้งค่าแบบทดสอบ"]}),t.jsxs(S,{variant:"outline",size:"sm",className:"bg-purple-500 text-white border-purple-500 hover:bg-purple-600 hover:border-purple-600 font-medium",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/admin/courses/${i.id}/content`),n({title:"คัดลอก link แล้ว",description:"ส่ง link นี้ให้ admin อื่นเพื่อจัดการเนื้อหา"})},children:[t.jsx(As,{className:"w-4 h-4 mr-2"}),"แชร์การจัดการ"]})]})]})]})]}),t.jsx(Cr,{contentId:g.id,className:"mt-8"})]}),g.content_type==="assignment"&&t.jsxs("div",{children:[t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ge,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"งานมอบหมาย"}),t.jsx("p",{className:"text-gray-600 mb-6",children:g.content||"คลิกปุ่มด้านล่างเพื่อดูงานมอบหมาย"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs(S,{className:"bg-green-500 hover:bg-green-600 text-white",onClick:async()=>{const{data:D}=await Qr(g.id);D?(j(D),M(!0)):n({title:"ไม่พบงานมอบหมาย",description:"ไม่มีงานมอบหมายสำหรับเนื้อหานี้",variant:"destructive"})},children:[t.jsx(ge,{className:"w-4 h-4 mr-2"}),"ดูงานมอบหมาย"]}),I(g)<100&&t.jsx("div",{children:t.jsxs(S,{variant:"outline",className:"bg-green-600 hover:bg-green-700 text-white border-green-600",onClick:()=>F(g.id,"assignment"),children:[t.jsx(ve,{className:"w-4 h-4 mr-2"}),"ผ่านเนื้อหานี้"]})}),r&&t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"การตั้งค่าสำหรับผู้ดูแล"}),t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[t.jsxs(S,{variant:"outline",size:"sm",className:"bg-orange-500 text-white border-orange-500 hover:bg-orange-600 hover:border-orange-600 font-medium",onClick:()=>z(!0),children:[t.jsx(Ke,{className:"w-4 h-4 mr-2"}),"ตั้งค่างานมอบหมาย"]}),t.jsxs(S,{variant:"outline",size:"sm",className:"bg-green-500 text-white border-green-500 hover:bg-green-600 hover:border-green-600 font-medium",onClick:()=>{n({title:"เปิดการให้คะแนน",description:"ฟีเจอร์นี้จะพร้อมใช้งานเร็วๆ นี้"})},children:[t.jsx(gi,{className:"w-4 h-4 mr-2"}),"ให้คะแนนงาน"]}),t.jsxs(S,{variant:"outline",size:"sm",className:"bg-purple-500 text-white border-purple-500 hover:bg-purple-600 hover:border-purple-600 font-medium",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/admin/courses/${i.id}/content`),n({title:"คัดลอก link แล้ว",description:"ส่ง link นี้ให้ admin อื่นเพื่อจัดการเนื้อหา"})},children:[t.jsx(As,{className:"w-4 h-4 mr-2"}),"แชร์การจัดการ"]})]})]})]})]}),t.jsx(Cr,{contentId:g.id,className:"mt-8"})]}),(g.content_type==="document"||g.content_type==="lesson")&&t.jsxs("div",{children:[g.content&&t.jsx("div",{className:"prose max-w-none mb-8",children:t.jsx("div",{dangerouslySetInnerHTML:{__html:g.content}})}),t.jsx(Cr,{contentId:g.id,className:"mb-8"}),t.jsxs("div",{className:"border-t pt-6",children:[I(g)>=100?t.jsx("div",{className:"text-center",children:t.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-lg",children:[t.jsx(ve,{className:"w-5 h-5 mr-2"}),"เนื้อหานี้เสร็จสิ้นแล้ว"]})}):t.jsx("div",{className:"text-center",children:t.jsxs(S,{onClick:()=>F(g.id,g.content_type),className:"bg-green-600 hover:bg-green-700 text-white",size:"lg",children:[t.jsx(ve,{className:"w-5 h-5 mr-2"}),"ผ่านเนื้อหานี้"]})}),r&&t.jsxs("div",{className:"border-t pt-4 mt-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"การตั้งค่าสำหรับผู้ดูแล"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(S,{variant:"outline",size:"sm",className:"bg-teal-500 text-white border-teal-500 hover:bg-teal-600 hover:border-teal-600 font-medium",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/admin/courses/${i.id}/content`),n({title:"คัดลอก link แล้ว",description:"ส่ง link นี้ให้ admin อื่นเพื่อจัดการเนื้อหา"})},children:[t.jsx(Ke,{className:"w-4 h-4 mr-2"}),"แก้ไขเอกสาร"]}),t.jsxs(S,{variant:"outline",size:"sm",className:"bg-purple-500 text-white border-purple-500 hover:bg-purple-600 hover:border-purple-600 font-medium",onClick:()=>{navigator.clipboard.writeText(window.location.href),n({title:"คัดลอก link แล้ว",description:"แชร์ link นี้ให้นักเรียนเพื่ออ่านเอกสาร"})},children:[t.jsx(As,{className:"w-4 h-4 mr-2"}),"แชร์เอกสาร"]})]})]})]})]})]})]}):t.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(ge,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"เลือกเนื้อหาที่ต้องการเรียน"}),t.jsx("p",{className:"text-gray-600",children:"กรุณาเลือกเนื้อหาจากรายการด้านซ้ายเพื่อเริ่มเรียน"})]})})})]})}),t.jsx(xe,{children:_&&w&&t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>N(!1),children:t.jsx(L.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:D=>D.stopPropagation(),children:t.jsx("div",{className:"p-6",children:t.jsx(cj,{quiz:w,onComplete:U,onClose:()=>N(!1)})})})})}),t.jsx(xe,{children:T&&k&&t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>M(!1),children:t.jsx(L.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:D=>D.stopPropagation(),children:t.jsx("div",{className:"p-6",children:t.jsx(pj,{contentId:g==null?void 0:g.id,assignment:k,onComplete:G,onClose:()=>M(!1)})})})})}),t.jsx(gj,{isOpen:B,onClose:()=>W(!1),contentId:g==null?void 0:g.id,courseId:s}),t.jsx(xj,{isOpen:C,onClose:()=>z(!1),contentId:g==null?void 0:g.id,courseId:s})]}):t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h2",{className:"text-2xl font-bold text-teal-900 mb-2",children:"คุณยังไม่ได้ลงทะเบียนคอร์สนี้"}),t.jsx("p",{className:"text-teal-700 mb-4",children:"กรุณาลงทะเบียนก่อนเรียน"}),t.jsxs("div",{className:"text-teal-700 text-sm mb-4",children:[t.jsxs("p",{children:["Course: ",i==null?void 0:i.title]}),t.jsxs("p",{children:["User: ",e==null?void 0:e.email]}),t.jsxs("p",{children:["Enrollment Status: ",JSON.stringify(d)]})]}),t.jsx(Y,{to:`/courses/${s}`,children:t.jsx(S,{children:"ไปหน้าลงทะเบียน"})})]})}):t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h2",{className:"text-2xl font-bold text-teal-900 mb-2",children:"ไม่พบข้อมูลคอร์ส"}),t.jsxs("p",{className:"text-teal-700 mb-4",children:["Course ID: ",s]}),t.jsxs("p",{className:"text-teal-700 text-sm mb-4",children:["Loading: ",o?"true":"false"]}),t.jsx(Y,{to:"/courses",children:t.jsx(S,{variant:"outline",children:"กลับไปหน้าคอร์สทั้งหมด"})})]})})},vj=()=>{const s={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},e=[{title:"Arduino & IoT Workshop",duration:"5 วัน",participants:"15-20 คน",description:"เรียนรู้การสร้างระบบ IoT และการควบคุมอุปกรณ์ด้วย Arduino",features:["ปฏิบัติการจริง","อุปกรณ์ครบชุด","โปรเจคจริง"],price:"12,500 บาท",category:"Electronics"},{title:"React Native Mobile Development",duration:"7 วัน",participants:"12-18 คน",description:"สร้างแอปพลิเคชันมือถือด้วย React Native จากเริ่มต้นจนเสร็จสมบูรณ์",features:["สร้างแอปจริง","Deploy ขึ้น Store","Portfolio Project"],price:"18,000 บาท",category:"Software"},{title:"Structural Design Intensive",duration:"10 วัน",participants:"10-15 คน",description:"การออกแบบโครงสร้างอาคารเชิงลึกด้วยซอฟต์แวร์มืออาชีพ",features:["AutoCAD + SAP2000","โปรเจคจริง","ใบรับรอง"],price:"25,000 บาท",category:"Civil Engineering"}],r=[{icon:ie,title:"เรียนแบบกลุ่มเล็ก",description:"จำนวนผู้เรียนจำกัด เพื่อการดูแลที่ใกล้ชิด"},{icon:rn,title:"ปฏิบัติการจริง",description:"70% ปฏิบัติ 30% ทฤษฎี เน้นการทำงานจริง"},{icon:Le,title:"ใบรับรองการเรียน",description:"รับใบรับรองหลังจบคอร์สทุกหลักสูตร"},{icon:ge,title:"เอกสารประกอบ",description:"เอกสาร E-book และอุปกรณ์ครบชุด"}],n=["ห้องเรียนปรับอากาศ พร้อมเครื่องมือครบชุด","คอมพิวเตอร์และซอฟต์แวร์ลิขสิทธิ์แท้","Wi-Fi ความเร็วสูง และพื้นที่จอดรถ","พื้นที่พักผ่อนและอาหารกลางวัน","ห้องสมุดและพื้นที่ทำงานกลุ่ม"];return t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:s,className:"min-h-screen pt-20",children:[t.jsxs(be,{children:[t.jsx("title",{children:"การเรียน Onsite - Login Learning"}),t.jsx("meta",{name:"description",content:"หลักสูตรการเรียนแบบ Onsite ณ สถาบัน Login Learning พร้อมปฏิบัติการจริงและอุปกรณ์ครบชุด"})]}),t.jsxs("section",{className:"relative overflow-hidden py-20",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-100/50 to-blue-200/30"}),t.jsx("div",{className:"container mx-auto px-4 relative",children:t.jsxs(L.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8},className:"text-center max-w-4xl mx-auto",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-700 to-blue-500 rounded-full flex items-center justify-center",children:t.jsx(bs,{className:"w-10 h-10 text-blue-800"})})}),t.jsxs("h1",{className:"text-4xl lg:text-6xl font-bold text-black mb-6",children:["การเรียน ",t.jsx("span",{className:"gradient-text",children:"Onsite"})]}),t.jsx("p",{className:"text-xl text-black mb-8 leading-relaxed",children:"เรียนรู้แบบเข้มข้นกับอาจารย์ผู้เชี่ยวชาญ ปฏิบัติการจริง พร้อมอุปกรณ์ครบชุด ณ ศูนย์การเรียนรู้ Login Learning"}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t.jsxs(S,{size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600",children:[t.jsx(Me,{className:"w-5 h-5 mr-2"}),"จองหลักสูตร Onsite"]}),t.jsxs(S,{size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[t.jsx(Gt,{className:"w-5 h-5 mr-2"}),"สอบถามข้อมูล"]})]})]})})]}),t.jsx("section",{className:"py-20",children:t.jsxs("div",{className:"container mx-auto px-4",children:[t.jsxs(L.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},className:"text-center mb-16",children:[t.jsxs("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:["ทำไมต้องเรียน ",t.jsx("span",{className:"gradient-text",children:"Onsite"})]}),t.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:"การเรียนแบบ Onsite ให้ประสบการณ์การเรียนรู้ที่เข้มข้นและมีประสิทธิภาพสูงสุด"})]}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:r.map((i,a)=>t.jsxs(L.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.6,delay:a*.1},className:"glass-effect p-6 rounded-xl text-center hover:transform hover:scale-105 transition-all duration-300",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-700 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(i.icon,{className:"w-8 h-8 text-blue-800"})}),t.jsx("h3",{className:"text-xl font-bold text-black mb-3",children:i.title}),t.jsx("p",{className:"text-black",children:i.description})]},a))})]})}),t.jsx("section",{className:"py-20 bg-gradient-to-r from-blue-50/80 to-blue-100/60",children:t.jsxs("div",{className:"container mx-auto px-4",children:[t.jsxs(L.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},className:"text-center mb-16",children:[t.jsxs("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:["หลักสูตร ",t.jsx("span",{className:"gradient-text",children:"Onsite"})," ยอดนิยม"]}),t.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:"หลักสูตรเข้มข้นที่ได้รับความนิยมสูงสุด พร้อมปฏิบัติการจริง"})]}),t.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:e.map((i,a)=>t.jsxs(L.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.6,delay:a*.2},className:"glass-effect p-6 rounded-xl hover:transform hover:scale-105 transition-all duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-blue-700 to-blue-500 text-gray-800 text-sm rounded-full",children:i.category}),t.jsxs("div",{className:"flex items-center text-yellow-400",children:[t.jsx(Se,{className:"w-4 h-4 mr-1"}),t.jsx("span",{className:"text-sm",children:"ยอดนิยม"})]})]}),t.jsx("h3",{className:"text-xl font-bold text-black mb-3",children:i.title}),t.jsx("p",{className:"text-black mb-4",children:i.description}),t.jsxs("div",{className:"space-y-2 mb-6",children:[t.jsxs("div",{className:"flex items-center text-black",children:[t.jsx(fe,{className:"w-4 h-4 mr-2"}),t.jsxs("span",{children:["ระยะเวลา: ",i.duration]})]}),t.jsxs("div",{className:"flex items-center text-black",children:[t.jsx(ie,{className:"w-4 h-4 mr-2"}),t.jsxs("span",{children:["ผู้เรียน: ",i.participants]})]})]}),t.jsx("div",{className:"space-y-2 mb-6",children:i.features.map((o,l)=>t.jsxs("div",{className:"flex items-center text-blue-600",children:[t.jsx(ve,{className:"w-4 h-4 mr-2"}),t.jsx("span",{className:"text-sm",children:o})]},l))}),t.jsxs("div",{className:"border-t border-slate-300 pt-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-2xl font-bold text-black",children:i.price}),t.jsx("span",{className:"text-black text-sm block",children:"รวมอุปกรณ์ทั้งหมด"})]}),t.jsx(S,{className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600",children:"สอบถาม"})]})]},a))})]})}),t.jsx("section",{className:"py-20",children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[t.jsxs(L.div,{initial:{x:-30,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.8},children:[t.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:"สิ่งอำนวยความสะดวก"}),t.jsx("p",{className:"text-xl text-black mb-8",children:"ศูนย์การเรียนรู้ที่ทันสมัย พร้อมสิ่งอำนวยความสะดวกครบครัน"}),t.jsx("div",{className:"space-y-4",children:n.map((i,a)=>t.jsxs(L.div,{initial:{x:-20,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.6,delay:a*.1},className:"flex items-center",children:[t.jsx(ve,{className:"w-5 h-5 text-blue-600 mr-3 flex-shrink-0"}),t.jsx("span",{className:"text-black",children:i})]},a))})]}),t.jsx(L.div,{initial:{x:30,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.8},className:"glass-effect p-8 rounded-xl",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Mf,{className:"w-16 h-16 text-blue-600 mx-auto mb-6"}),t.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:"ที่ตั้งศูนย์การเรียน"}),t.jsxs("div",{className:"space-y-3 text-black",children:[t.jsx("p",{children:t.jsx("strong",{children:"สำนักงานใหญ่:"})}),t.jsxs("p",{children:["123 ถนนเทคโนโลยี แขวงนวัตกรรม",t.jsx("br",{}),"เขตดิจิทัล กรุงเทพฯ 10400"]}),t.jsx("div",{className:"pt-4 border-t border-slate-300",children:t.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Gt,{className:"w-4 h-4 mr-2 text-blue-600"}),t.jsx("span",{children:"02-xxx-xxxx"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(pt,{className:"w-4 h-4 mr-2 text-blue-600"}),t.jsx("span",{children:"onsite@loginlearning.com"})]})]})})]})]})})]})})}),t.jsx("section",{className:"py-20 bg-gradient-to-r from-blue-100/60 to-blue-200/40",children:t.jsx("div",{className:"container mx-auto px-4 text-center",children:t.jsxs(L.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},className:"max-w-3xl mx-auto",children:[t.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:"พร้อมเริ่มต้นการเรียนรู้แบบ Onsite แล้วหรือยัง?"}),t.jsx("p",{className:"text-xl text-black mb-8",children:"ติดต่อเราวันนี้เพื่อสอบถามข้อมูลและจองที่นั่งในหลักสูตรที่คุณสนใจ"}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t.jsxs(S,{size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600",children:[t.jsx(Gt,{className:"w-5 h-5 mr-2"}),"ติดต่อเราเลย"]}),t.jsx(S,{size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50",asChild:!0,children:t.jsxs(Y,{to:"/contact",children:[t.jsx(pt,{className:"w-5 h-5 mr-2"}),"ส่งข้อความถึงเรา"]})})]})]})})})]})},wj=()=>{const[s,e]=p.useState({}),r=(l,d)=>{const c=`${l}-${d}`;e(u=>({...u,[c]:!u[c]}))},n=[{faculty:"คณะวิศวกรรมศาสตร์ (หลักสูตรไทย)",icon:ap,subtitle:"ข้อมูลเบื้องต้นรอบ Portfolio (โปรดตรวจสอบประกาศล่าสุดจากมหาวิทยาลัย)",universities:[{name:"จุฬาลงกรณ์มหาวิทยาลัย",shortName:"จุฬาฯ",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",gpax:"≥ 3.00-3.50",exams:"TPAT3, TGAT",intake:"~600-700 คน",fee:"~21,000 บาท/เทอม",website:"https://www.eng.chula.ac.th/",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ จุฬาฯ",recommendedMajors:["วิศวกรรมคอมพิวเตอร์: GPAX ≥ 3.50, Portfolio ผลงานเด่น, TPAT3","วิศวกรรมไฟฟ้า: GPAX ≥ 3.25, Portfolio, TPAT3"],portfolioRounds:"~327 คน",quotaRounds:"~38 คน",admissionRounds:"~240 คน"},{name:"มหาวิทยาลัยเกษตรศาสตร์",shortName:"เกษตรฯ",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/5/51/Logo_ku_th.svg/1200px-Logo_ku_th.svg.png",fallbackLogo:"https://placehold.co/60x60/D4A017/FFFFFF?text=KU&font=bold",gpax:"≥ 2.75-3.25",exams:"TPAT3, TGAT",intake:"~1400+ คน",fee:"~17,000 บาท/เทอม",website:"https://www.eng.ku.ac.th/",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ เกษตรฯ",recommendedMajors:["วิศวกรรมคอมพิวเตอร์: GPAX ≥ 3.25, Portfolio","วิศวกรรมการบินและอวกาศ: GPAX ≥ 3.00, Portfolio"],portfolioRounds:"~791 คน",quotaRounds:"~181 คน",admissionRounds:"~390 คน"},{name:"มหาวิทยาลัยเทคโนโลยีพระจอมเกล้าธนบุรี",shortName:"มจธ.",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/7/76/Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg/1200px-Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg.png",fallbackLogo:"https://placehold.co/60x60/F28500/FFFFFF?text=KMUTT&font=bold",gpax:"≥ 2.75-3.00",exams:"TGAT, TPAT3 (บางโครงการ)",intake:"~900+ คน",fee:"~25,000 บาท/เทอม",website:"https://eng.kmutt.ac.th/",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ มจธ.",recommendedMajors:["วิศวกรรมคอมพิวเตอร์: GPAX ≥ 3.00, Portfolio"],portfolioRounds:"~725 คน",quotaRounds:"~170 คน",admissionRounds:"~63 คน"},{name:"สถาบันเทคโนโลยีพระจอมเกล้าเจ้าคุณทหารลาดกระบัง",shortName:"สจล.",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/e/e4/Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg/1200px-Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg.png",fallbackLogo:"https://placehold.co/60x60/E36414/FFFFFF?text=KMITL&font=bold",gpax:"≥ 2.75",exams:"TPAT3, TGAT",intake:"~600+ คน",fee:"~20,000 บาท/เทอม",website:"https://www.reg.kmitl.ac.th/index/faculty_engineer.php",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ สจล.",recommendedMajors:["วิศวกรรมคอมพิวเตอร์: GPAX ≥ 3.00, Portfolio"],portfolioRounds:"~200 คน",quotaRounds:"~54 คน",admissionRounds:"~403 คน"},{name:"มหาวิทยาลัยเทคโนโลยีพระจอมเกล้าพระนครเหนือ",shortName:"มจพ.",logo:"https://www.eng.kmutnb.ac.th/wp-content/uploads/2019/08/LOGO-KMUTNB--300x300.png",fallbackLogo:"https://placehold.co/60x60/C00000/FFFFFF?text=KMUTNB&font=bold",gpax:"≥ 2.75",exams:"TGAT/TPAT (บางโครงการ)",intake:"~600+ คน",fee:"~18,000 บาท/เทอม",website:"https://www.eng.kmutnb.ac.th/",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ มจพ.",recommendedMajors:["วิศวกรรมการผลิต: GPAX ≥ 2.75, Portfolio"],portfolioRounds:"~371 คน",quotaRounds:"~124 คน",admissionRounds:"~40 คน"},{name:"มหาวิทยาลัยเชียงใหม่",shortName:"มช.",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/d/db/Chiang_Mai_University.svg/1200px-Chiang_Mai_University.svg.png",fallbackLogo:"https://placehold.co/60x60/7B1FA2/FFFFFF?text=CMU&font=bold",gpax:"≥ 2.75-3.00",exams:"TGAT, TPAT3",intake:"~1100+ คน",fee:"~20,000 บาท/เทอม",website:"https://www.eng.cmu.ac.th/",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ มช.",recommendedMajors:["วิศวกรรมคอมพิวเตอร์: GPAX ≥ 3.00, Portfolio"],portfolioRounds:"~352 คน",quotaRounds:"~225 คน",admissionRounds:"~350 คน"},{name:"มหาวิทยาลัยขอนแก่น",shortName:"มข.",logo:"https://www.kku.ac.th/wp-content/uploads/2022/01/1.-official-logo-2022-26.png",fallbackLogo:"https://placehold.co/60x60/D32F2F/FFFFFF?text=KKU&font=bold",gpax:"≥ 2.75",exams:"TGAT/TPAT (บางโครงการ)",intake:"~600+ คน",fee:"~18,000 บาท/เทอม",website:"https://eng.kku.ac.th/",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ มข.",recommendedMajors:["วิศวกรรมคอมพิวเตอร์: GPAX ≥ 3.00, Portfolio"],portfolioRounds:"~326 คน",quotaRounds:"~152 คน",admissionRounds:"~118 คน"},{name:"มหาวิทยาลัยสงขลานครินทร์",shortName:"มอ.",logo:"https://huso.psu.ac.th/th/wp-content/uploads/2023/04/PSU_Logo_text_Eng_Color_2.png",fallbackLogo:"https://placehold.co/60x60/0277BD/FFFFFF?text=PSU&font=bold",gpax:"≥ 2.75",exams:"TGAT/TPAT (บางโครงการ)",intake:"~1000+ คน",fee:"~22,000 บาท/เทอม",website:"https://www.eng.psu.ac.th/",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ มอ.",recommendedMajors:["วิศวกรรมคอมพิวเตอร์: GPAX ≥ 3.00, Portfolio"],portfolioRounds:"~594 คน",quotaRounds:"~210 คน",admissionRounds:"~100 คน"}]},{faculty:"คณะวิศวกรรมศาสตร์ (หลักสูตรนานาชาติ)",icon:nr,subtitle:"ข้อมูลเบื้องต้นรอบ Portfolio (โปรดตรวจสอบประกาศล่าสุดจากมหาวิทยาลัย)",universities:[{name:"จุฬาลงกรณ์มหาวิทยาลัย",shortName:"ISE Chula",subtitle:"ISE (International School of Engineering)",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",requirements:"IELTS: ≥ 6.0, TOEFL iBT: ≥ 80, SAT Math: ≥ 620",intake:"~180-200 คน (รวมทุกสาขา)",fee:"~84,000 บาท/เทอม",website:"https://www.google.com/search?client=safari&rls=en&q=ISE+Chula&ie=UTF-8&oe=UTF-8",websiteText:"เว็บไซต์ ISE Chula",recommendedMajors:["Aerospace Engineering: GPAX ≥ 3.5, Strong Math/Physics, IELTS ≥ 6.5, SAT Math ≥ 650","Robotics and AI: GPAX ≥ 3.5, Strong Math/Programming, IELTS ≥ 6.5, SAT Math ≥ 650"]},{name:"มหาวิทยาลัยเกษตรศาสตร์",shortName:"IUP Kasetsart",subtitle:"IUP (International Undergraduate Program)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/5/51/Logo_ku_th.svg/1200px-Logo_ku_th.svg.png",fallbackLogo:"https://placehold.co/60x60/D4A017/FFFFFF?text=KU&font=bold",gpax:"≥ 2.75",requirements:"IELTS: ≥ 5.5, TOEFL iBT: ≥ 61",intake:"~100-150 คน (รวมทุกสาขา)",fee:"~70,000 บาท/เทอม",website:"https://iup.eng.ku.ac.th",websiteText:"เว็บไซต์ IUP Kasetsart",recommendedMajors:["Software and Knowledge Engineering: GPAX ≥ 3.00, IELTS ≥ 5.5, Portfolio (เน้น Project ด้าน Software)","Electrical Engineering: GPAX ≥ 2.75, IELTS ≥ 5.5, Portfolio (เน้นความสนใจด้านไฟฟ้า)"]},{name:"มหาวิทยาลัยมหิดล",shortName:"Mahidol Eng",subtitle:"Faculty of Engineering (International Programs)",logo:"https://upload.wikimedia.org/wikipedia/commons/4/45/Mahidol_U.png",fallbackLogo:"https://placehold.co/60x60/1565C0/FFFFFF?text=MU&font=bold",gpax:"≥ 3.00",requirements:"IELTS: ≥ 6.0, TOEFL iBT: ≥ 64",intake:"~80-120 คน (รวมทุกสาขา)",fee:"~90,000 บาท/เทอม",website:"https://www.eg.mahidol.ac.th",websiteText:"เว็บไซต์ EG Mahidol Inter",recommendedMajors:["Biomedical Engineering: GPAX ≥ 3.25, IELTS ≥ 6.0, Portfolio (เน้นชีววิทยา, เคมี)","Computer Engineering: GPAX ≥ 3.00, IELTS ≥ 6.0, Portfolio (เน้น Programming, Math)"]},{name:"มหาวิทยาลัยเทคโนโลยีพระจอมเกล้าธนบุรี",shortName:"SIIE KMUTT",subtitle:"SIIE (School of International and Interdisciplinary Engineering)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/7/76/Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg/1200px-Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg.png",fallbackLogo:"https://placehold.co/60x60/F28500/FFFFFF?text=KMUTT&font=bold",gpax:"≥ 3.00",requirements:"IELTS ≥ 5.5 / TOEFL",intake:"~150-200 คน",fee:"~80,000 บาท/เทอม",website:"https://www.eng.kmitl.ac.th/siie-international-programs/",websiteText:"เว็บไซต์ SIIE KMUTT",recommendedMajors:["Computer Engineering (Inter): GPAX ≥ 3.00, IELTS ≥ 5.5, Portfolio"]},{name:"สถาบันเทคโนโลยีพระจอมเกล้าเจ้าคุณทหารลาดกระบัง",shortName:"Inter KMITL",subtitle:"School of Engineering (International Programs)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/e/e4/Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg/1200px-Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg.png",fallbackLogo:"https://placehold.co/60x60/E36414/FFFFFF?text=KMITL&font=bold",gpax:"≥ 3.00",requirements:"IELTS ≥ 5.5 / TOEFL",intake:"~100-150 คน",fee:"~75,000 บาท/เทอม",website:"https://oia.kmitl.ac.th/oia/international-programs/",websiteText:"เว็บไซต์ Inter KMITL",recommendedMajors:["Robotics & AI Engineering (Inter): GPAX ≥ 3.00, IELTS ≥ 5.5, Portfolio"]}]},{faculty:"คณะวิทยาศาสตร์ (สาขาคอมพิวเตอร์และที่เกี่ยวข้อง)",icon:Rf,subtitle:"ข้อมูลเบื้องต้นรอบ Portfolio (โปรดตรวจสอบประกาศล่าสุดจากมหาวิทยาลัย)",universities:[{name:"จุฬาลงกรณ์มหาวิทยาลัย",shortName:"จุฬาฯ วิทยาศาสตร์",subtitle:"คณะวิทยาศาสตร์ สาขาวิทยาการคอมพิวเตอร์",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",gpax:"≥ 3.25-3.5 (ตามโครงการ)",intake:"~20-30 คน",fee:"~21,000 บาท/เทอม",website:"https://www.chula.ac.th/academic/faculty-of-science/",websiteText:"เว็บไซต์คณะวิทยาศาสตร์ จุฬาฯ",recommendedMajors:["AI & Machine Learning: GPAX ≥ 3.5, Portfolio (โครงงาน AI/ML), รางวัล สอวน. คอมฯ","Software Development: GPAX ≥ 3.25, Portfolio (ผลงาน Application/Web)"]},{name:"มหาวิทยาลัยเกษตรศาสตร์",shortName:"เกษตรฯ วิทยาศาสตร์",subtitle:"คณะวิทยาศาสตร์ สาขาวิทยาการคอมพิวเตอร์",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/5/51/Logo_ku_th.svg/1200px-Logo_ku_th.svg.png",fallbackLogo:"https://placehold.co/60x60/D4A017/FFFFFF?text=KU&font=bold",gpax:"≥ 3.00 (ตามโครงการ)",intake:"~30-50 คน",fee:"~17,000 บาท/เทอม",website:"https://sci.ku.ac.th/web2024/",websiteText:"เว็บไซต์คณะวิทยาศาสตร์ เกษตรฯ",recommendedMajors:["Data Science: GPAX ≥ 3.00, Portfolio (โครงงานวิเคราะห์ข้อมูล), ความรู้สถิติ/โปรแกรมมิ่ง","Game Development: GPAX ≥ 3.00, Portfolio (ผลงานเกม, Art, Story)"]},{name:"มหาวิทยาลัยเทคโนโลยีพระจอมเกล้าธนบุรี",shortName:"มจธ. วิทยาศาสตร์",subtitle:"คณะวิทยาศาสตร์ สาขาวิทยาการคอมพิวเตอร์ (หลักสูตรภาษาอังกฤษ)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/7/76/Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg/1200px-Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg.png",fallbackLogo:"https://placehold.co/60x60/F28500/FFFFFF?text=KMUTT&font=bold",gpax:"≥ 3.00",requirements:"IELTS ≥ 5.5 / TOEFL iBT ≥ 61",intake:"~50 คน",fee:"~40,000 บาท/เทอม",website:"https://www.kmutt.ac.th/education/curriculum/faculty-of-science/",websiteText:"เว็บไซต์คณะวิทยาศาสตร์ มจธ.",recommendedMajors:["Computer Science (English Program): เน้นความรู้พื้นฐานและประยุกต์ด้านวิทยาการคอมพิวเตอร์","AI & Data Analytics: พัฒนาทักษะการเขียนโปรแกรม การวิเคราะห์ข้อมูล และ AI"]}]},{faculty:"คณะเทคโนโลยีสารสนเทศและการสื่อสาร (ICT)",icon:Js,subtitle:"ข้อมูลเบื้องต้นรอบ Portfolio (โปรดตรวจสอบประกาศล่าสุดจากมหาวิทยาลัย)",universities:[{name:"มหาวิทยาลัยมหิดล",shortName:"ICT Mahidol",subtitle:"คณะ ICT (หลักสูตรนานาชาติ)",logo:"https://upload.wikimedia.org/wikipedia/commons/4/45/Mahidol_U.png",fallbackLogo:"https://placehold.co/60x60/1565C0/FFFFFF?text=MU&font=bold",gpax:"≥ 3.00",requirements:"IELTS ≥ 6.0 / TOEFL iBT ≥ 64",intake:"~150-200 คน",fee:"~60,000 บาท/เทอม",website:"https://www.ict.mahidol.ac.th",websiteText:"เว็บไซต์ ICT Mahidol",recommendedMajors:["Cybersecurity: GPAX ≥ 3.00, IELTS ≥ 6.0, Portfolio (ความสนใจด้านความปลอดภัย)","Data Science (Track): GPAX ≥ 3.25, IELTS ≥ 6.0, Portfolio (โครงงาน Data)"]},{name:"จุฬาลงกรณ์มหาวิทยาลัย",shortName:"CEDT Chula",subtitle:"วิศวกรรมคอมพิวเตอร์และเทคโนโลยีดิจิทัล (CEDT - Inter)",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",gpax:"≥ 3.50",requirements:"IELTS ≥ 6.5 / TOEFL iBT ≥ 80, SAT Math ≥ 700",intake:"~40-50 คน",fee:"~110,000 บาท/เทอม",website:"https://www.cp.eng.chula.ac.th/cedt",websiteText:"เว็บไซต์ CEDT Chula",recommendedMajors:["Digital Technology & Innovation: GPAX ≥ 3.5, IELTS ≥ 6.5, SAT Math ≥ 700, Portfolio (เน้นนวัตกรรม)"]},{name:"สถาบันเทคโนโลยีพระจอมเกล้าเจ้าคุณทหารลาดกระบัง",shortName:"IT KMITL",subtitle:"คณะเทคโนโลยีสารสนเทศ (IT KMITL)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/e/e4/Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg/1200px-Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg.png",fallbackLogo:"https://placehold.co/60x60/E36414/FFFFFF?text=KMITL&font=bold",gpax:"≥ 2.75-3.00 (ตามสาขา)",intake:"~100-200 คน",fee:"~35,000 บาท/เทอม",website:"https://www.it.kmitl.ac.th/th/program/",websiteText:"เว็บไซต์ IT KMITL",recommendedMajors:["เทคโนโลยีสารสนเทศ (IT): GPAX ≥ 2.75, Portfolio","วิทยาการข้อมูล (Data Science): GPAX ≥ 3.00, Portfolio"]}]}],i={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},a={type:"tween",ease:"anticipate",duration:.5},o=["from-blue-500 to-indigo-500","from-green-500 to-teal-500","from-purple-500 to-violet-500","from-orange-500 to-red-500"];return t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:i,transition:a,className:"pt-24 pb-16 px-6",children:[t.jsxs(be,{children:[t.jsx("title",{children:"ข้อมูลการรับเข้ามหาวิทยาลัย - Login Learning"}),t.jsx("meta",{name:"description",content:"ข้อมูลการรับเข้าคณะวิศวกรรมศาสตร์และสาขาที่เกี่ยวข้องในมหาวิทยาลัยชั้นนำ สำหรับรอบ Portfolio (ข้อมูลเบื้องต้น)"})]}),t.jsxs("section",{className:"pt-8 mb-12",children:[t.jsxs(L.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-center mb-10",children:[t.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-4",children:["ข้อมูลการรับเข้า ",t.jsx("span",{className:"gradient-text",children:"มหาวิทยาลัย"})]}),t.jsx("p",{className:"text-xl text-gray-700 max-w-3xl mx-auto",children:"ภาพรวมเกณฑ์การรับสมัครคณะวิศวกรรมศาสตร์และสาขาใกล้เคียงในมหาวิทยาลัยชั้นนำ (ข้อมูลสำหรับรอบ Portfolio และอาจมีการเปลี่ยนแปลง)"})]}),n.map((l,d)=>t.jsxs(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:d*.1+.3},viewport:{once:!0},className:"mb-16",children:[t.jsxs("div",{className:`flex items-center mb-6 p-6 rounded-xl bg-gradient-to-r ${o[d%o.length]} shadow-lg`,children:[t.jsx(l.icon,{className:"w-10 h-10 text-white mr-4"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-white",children:l.faculty}),t.jsx("p",{className:"text-white/90 text-sm mt-1",children:l.subtitle})]})]}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:l.universities.map((c,u)=>{const h=`${d}-${u}`,m=s[h];return t.jsxs(L.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:u*.05},viewport:{once:!0},className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-200",children:[t.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("img",{className:"w-12 h-12 mr-4 rounded-full object-contain bg-white p-1 shadow-sm border-2 border-white",alt:`โลโก้ ${c.name}`,src:c.logo,onError:f=>{f.target.src=c.fallbackLogo}}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:c.shortName}),c.subtitle&&t.jsx("p",{className:"text-blue-600 text-sm font-medium",children:c.subtitle})]})]})}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"space-y-3 text-sm text-gray-700 mb-4",children:[c.gpax&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(la,{className:"w-4 h-4 mr-3 text-blue-500"}),t.jsxs("span",{children:[t.jsx("strong",{children:"GPAX:"})," ",c.gpax]})]}),c.exams&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(Js,{className:"w-4 h-4 mr-3 text-green-500"}),t.jsxs("span",{children:[t.jsx("strong",{children:"คะแนนสอบ:"})," ",c.exams]})]}),c.requirements&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(rn,{className:"w-4 h-4 mr-3 text-yellow-500"}),t.jsxs("span",{children:[t.jsx("strong",{children:"คุณสมบัติ:"})," ",c.requirements]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(ie,{className:"w-4 h-4 mr-3 text-purple-500"}),t.jsxs("span",{children:[t.jsx("strong",{children:"จำนวนรับ:"})," ",c.intake]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ks,{className:"w-4 h-4 mr-3 text-red-500"}),t.jsxs("span",{children:[t.jsx("strong",{children:"ค่าเทอม:"})," ",c.fee]})]})]}),c.recommendedMajors&&t.jsxs("div",{className:"mb-4",children:[t.jsxs("button",{onClick:()=>r(d,u),className:"flex items-center justify-between w-full p-3 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Le,{className:"w-4 h-4 mr-2 text-indigo-600"}),t.jsx("span",{className:"text-sm font-medium text-indigo-800",children:"สาขายอดฮิตและข้อมูลเพิ่มเติม"})]}),m?t.jsx(zf,{className:"w-4 h-4 text-indigo-600"}):t.jsx(aa,{className:"w-4 h-4 text-indigo-600"})]}),m&&t.jsxs(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"mt-3 p-4 bg-gray-50 rounded-lg",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"สาขายอดฮิต:"}),t.jsx("ul",{className:"space-y-2 text-xs text-gray-700",children:c.recommendedMajors.map((f,y)=>t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"w-2 h-2 bg-indigo-400 rounded-full mt-1.5 mr-2 flex-shrink-0"}),t.jsx("span",{children:f})]},y))}),c.portfolioRounds&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"จำนวนรับรอบ Portfolio:"}),t.jsxs("div",{className:"text-xs text-gray-700 space-y-1",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(fe,{className:"w-3 h-3 mr-2 text-blue-500"}),t.jsxs("span",{children:["รอบ 1 Portfolio: ",c.portfolioRounds]})]}),c.quotaRounds&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(fe,{className:"w-3 h-3 mr-2 text-green-500"}),t.jsxs("span",{children:["รอบ 2 Quota: ",c.quotaRounds]})]}),c.admissionRounds&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(fe,{className:"w-3 h-3 mr-2 text-orange-500"}),t.jsxs("span",{children:["รอบ 3 Admission: ",c.admissionRounds]})]})]})]})]})]}),c.website&&t.jsxs(S,{onClick:()=>window.open(c.website,"_blank","noopener,noreferrer"),className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white py-3 rounded-xl font-semibold transition-all duration-200 shadow-md hover:shadow-lg",children:[t.jsx(ys,{className:"w-4 h-4 mr-2"}),c.websiteText]})]})]},u)})})]},d)),t.jsxs(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5+n.length*.1},className:"mt-12 text-center p-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"ข้อควรทราบสำคัญ"}),t.jsxs("p",{className:"text-gray-700 text-sm leading-relaxed max-w-4xl mx-auto",children:["ข้อมูลจำนวนรับและเกณฑ์การคัดเลือกอาจมีการเปลี่ยนแปลงในแต่ละปีการศึกษา ควรตรวจสอบข้อมูลล่าสุดจากประกาศอย่างเป็นทางการของ ",t.jsx("strong",{children:"TCAS"})," หรือ",t.jsx("strong",{children:"มหาวิทยาลัยโดยตรง"}),"เสมอ"]}),t.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[t.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:"Portfolio"}),t.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"GPAX"}),t.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium",children:"สัมภาษณ์"}),t.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-medium",children:"คะแนนสอบ"})]})]})]})]})},sh=te.forwardRef(({className:s,...e},r)=>t.jsx("textarea",{className:yt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...e}));sh.displayName="Textarea";const jj=()=>{const{toast:s}=ae(),e={address:"917 จรัญสนิทวงศ์ 75 บางพลัด บางพลัด, กรุงเทพฯ",contacts:[{name:"พี่ก้อง",phone:"090-969-9578"},{name:"พี่เก็ก",phone:"083-436-0294"}],email:"info@loginlearning.com",lineGroup:"https://line.me/ti/g/TbTTLXEkRS"},r=[{name:"สาขาลาดกระบัง",address:"ถนนฉลองกรุง ลาดกระบัง, กรุงเทพฯ 10520"},{name:"สาขาบางพลัด",address:"400 ซ.จรัญสนิทวงศ์ 75 แขวงบางพลัด, กรุงเทพฯ 10700"},{name:"สาขาศรีราชา",address:"165/31 อำเภอศรีราชา ชลบุรี 20110"},{name:"สาขาระยอง",address:"84/48 อำเภอเมืองระยอง ระยอง 21000"}],n=o=>{o.preventDefault(),s({title:"🚧 ระบบส่งข้อความยังไม่พร้อมใช้งาน",description:"ขออภัยในความไม่สะดวก กรุณาติดต่อเราผ่านช่องทางอื่นที่ระบุไว้ 🚀"})},i={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},a={type:"tween",ease:"anticipate",duration:.5};return t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:i,transition:a,className:"pt-24 pb-16 px-6",children:[t.jsxs(be,{children:[t.jsx("title",{children:"ติดต่อเรา - Login Learning"}),t.jsx("meta",{name:"description",content:"ติดต่อ Login Learning เพื่อสอบถามข้อมูลคอร์สเรียน บริการ หรือขอคำปรึกษาด้านวิศวกรรม"})]}),t.jsxs("section",{className:"pt-8 mb-12",children:[t.jsxs(L.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-center mb-10",children:[t.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-4",children:["ติดต่อ ",t.jsx("span",{className:"gradient-text",children:"Login Learning"})]}),t.jsx("p",{className:"text-xl text-gray-700 max-w-2xl mx-auto",children:"มีคำถาม? ต้องการคำแนะนำ? หรือสนใจคอร์สเรียน? ติดต่อเราได้เลย!"})]}),t.jsxs("div",{className:"max-w-6xl mx-auto grid lg:grid-cols-2 gap-12",children:[t.jsxs(L.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.7,delay:.4},className:"glass-effect p-8 rounded-xl shadow-xl",children:[t.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-6",children:"ส่งข้อความถึงเรา"}),t.jsxs("form",{onSubmit:n,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-800 mb-1",children:"ชื่อ-นามสกุล"}),t.jsx(Z,{type:"text",id:"name",placeholder:"เช่น สมชาย ใจดี",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-800 mb-1",children:"อีเมล"}),t.jsx(Z,{type:"email",id:"email",placeholder:"เช่น somchai.j@example.com",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-800 mb-1",children:"หัวข้อ"}),t.jsx(Z,{type:"text",id:"subject",placeholder:"เช่น สอบถามเกี่ยวกับคอร์ส Arduino",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-800 mb-1",children:"ข้อความ"}),t.jsx(sh,{id:"message",rows:"4",placeholder:"พิมพ์ข้อความของคุณที่นี่...",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),t.jsxs(S,{type:"submit",size:"lg",className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[t.jsx(oa,{className:"w-5 h-5 mr-2"}),"ส่งข้อความ"]})]})]}),t.jsxs(L.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.7,delay:.6},className:"space-y-8",children:[t.jsxs("div",{className:"glass-effect p-8 rounded-xl shadow-xl",children:[t.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-6",children:"ข้อมูลติดต่อ"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(bs,{className:"w-6 h-6 text-blue-400 mt-1 shrink-0"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"ที่ตั้งสำนักงานใหญ่"}),t.jsx("p",{className:"text-gray-700",children:e.address})]})]}),t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(Gt,{className:"w-6 h-6 text-green-400 mt-1 shrink-0"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"เบอร์โทรศัพท์"}),e.contacts.map(o=>t.jsxs("p",{className:"text-gray-700",children:[o.name,": ",o.phone]},o.name))]})]}),t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(pt,{className:"w-6 h-6 text-yellow-400 mt-1 shrink-0"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"อีเมล"}),t.jsx("a",{href:`mailto:${e.email}`,className:"text-gray-700 hover:text-yellow-600 transition-colors",children:e.email})]})]}),t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(ie,{className:"w-6 h-6 text-teal-400 mt-1 shrink-0"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Line Group"}),t.jsx("a",{href:e.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"text-gray-700 hover:text-teal-600 transition-colors underline",children:"คลิกเพื่อเข้าร่วมกลุ่ม Line"})]})]})]})]}),t.jsxs("div",{className:"glass-effect p-8 rounded-xl shadow-xl",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"สาขาที่เปิดบริการ"}),t.jsx("div",{className:"space-y-3",children:r.map(o=>t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx(bs,{className:"w-5 h-5 text-purple-400 mt-1 shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-md font-medium text-gray-800",children:o.name}),t.jsx("p",{className:"text-sm text-gray-600",children:o.address})]})]},o.name))})]})]})]})]}),t.jsxs("section",{className:"mt-16",children:[t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.7,delay:.8},className:"text-center mb-6",children:t.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"ค้นหาเราบนแผนที่"})}),t.jsx(L.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.7,delay:1},className:"glass-effect rounded-xl p-4 shadow-xl h-96 flex items-center justify-center",children:t.jsx("p",{className:"text-gray-700 text-lg",children:"🚧 แผนที่กำลังจะมาเร็วๆ นี้! 🚧"})})]})]})},Nj=()=>{const[s,e]=p.useState(""),[r,n]=p.useState(""),[i,a]=p.useState(!1),[o,l]=p.useState(""),{signInWithPassword:d,signInWithGoogle:c,isSupabaseConnected:u}=De(),h=at(),{toast:m}=ae(),f=async v=>{if(v.preventDefault(),l(""),!u){m({title:"⚠️ ยังไม่ได้เชื่อมต่อ Supabase",description:"โปรดเชื่อมต่อ Supabase ก่อนทำการเข้าสู่ระบบ",variant:"destructive"});return}a(!0);const{error:w}=await d(s,r);a(!1),w?(l(w.message),m({title:"เข้าสู่ระบบไม่สำเร็จ",description:w.message,variant:"destructive"})):(m({title:"เข้าสู่ระบบสำเร็จ!"}),h("/dashboard"))},y=async()=>{if(l(""),!u){m({title:"⚠️ ยังไม่ได้เชื่อมต่อ Supabase",description:"โปรดเชื่อมต่อ Supabase ก่อนทำการเข้าสู่ระบบด้วย Google",variant:"destructive"});return}a(!0);const{error:v}=await c();a(!1),v&&(l(v.message),m({title:"เข้าสู่ระบบด้วย Google ไม่สำเร็จ",description:v.message,variant:"destructive"}))},x={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},g={type:"tween",ease:"anticipate",duration:.5};return t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:x,transition:g,className:"min-h-screen flex items-center justify-center pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:[t.jsxs(be,{children:[t.jsx("title",{children:"เข้าสู่ระบบ - Login Learning"}),t.jsx("meta",{name:"description",content:"เข้าสู่ระบบบัญชี Login Learning ของคุณเพื่อเข้าถึงคอร์สเรียนและติดตามความก้าวหน้า"})]}),t.jsxs("div",{className:"max-w-md w-full space-y-8 glass-effect p-10 rounded-xl shadow-2xl",children:[t.jsxs("div",{children:[t.jsx(L.h2,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mt-6 text-center text-4xl font-extrabold text-gray-900",children:"เข้าสู่ระบบ"}),t.jsxs(L.p,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"mt-2 text-center text-sm text-gray-700",children:["หรือ"," ",t.jsx(Y,{to:"/signup",className:"font-medium text-blue-400 hover:text-blue-300",children:"สร้างบัญชีใหม่"})]})]}),t.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[o&&t.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 p-3 rounded-md flex items-center text-red-300 text-sm",children:[t.jsx(ne,{className:"w-5 h-5 mr-2"}),o]}),t.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[t.jsxs(L.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.3},children:[t.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"อีเมล"}),t.jsxs("div",{className:"relative",children:[t.jsx(Z,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-t-md",placeholder:"อีเมล",value:s,onChange:v=>e(v.target.value)}),t.jsx(pt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),t.jsxs(L.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.4},children:[t.jsx("label",{htmlFor:"password",className:"sr-only",children:"รหัสผ่าน"}),t.jsxs("div",{className:"relative",children:[t.jsx(Z,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-b-md",placeholder:"รหัสผ่าน",value:r,onChange:v=>n(v.target.value)}),t.jsx(Et,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]})]}),t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},className:"flex items-center justify-between",children:t.jsx("div",{className:"text-sm",children:t.jsx("button",{onClick:()=>m({title:"🚧 ฟีเจอร์นี้ยังไม่พร้อมใช้งาน"}),className:"font-medium text-blue-400 hover:text-blue-300",children:"ลืมรหัสผ่าน?"})})}),t.jsx(L.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.6},children:t.jsxs(S,{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-gray-800 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:i||!u,children:[t.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:t.jsx(Qf,{className:"h-5 w-5 text-blue-300 group-hover:text-blue-200","aria-hidden":"true"})}),i?"กำลังเข้าสู่ระบบ...":"เข้าสู่ระบบ"]})})]}),t.jsxs(L.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.7},className:"mt-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t border-gray-700"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"px-2 bg-gray-800 text-gray-400 rounded-md",children:"หรือเข้าสู่ระบบด้วย"})})]}),t.jsx("div",{className:"mt-6",children:t.jsxs(S,{onClick:y,variant:"outline",className:"w-full flex justify-center py-3 px-4 border-gray-300 text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:i||!u,children:[t.jsx("svg",{className:"w-5 h-5 mr-2","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:t.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.7 512 244 512 110.3 512 0 401.7 0 265.2S110.3 18.3 244 18.3c67.4 0 120.9 24.8 160.4 60.3l-64.8 63.1c-20.1-18.9-48.4-30.8-89.3-30.8-70.1 0-128.2 57.2-128.2 128.2s58.1 128.2 128.2 128.2c80.3 0 110.1-58.8 113.8-87.9H244v-74.6h236.7c2.3 12.7 3.8 25.9 3.8 39.9z"})}),"เข้าสู่ระบบด้วย Google"]})})]}),!u&&t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-4 text-center text-yellow-400 text-sm p-3 bg-yellow-500/10 rounded-md",children:"⚠️ Supabase ยังไม่ได้เชื่อมต่อ! กรุณาเชื่อมต่อ Supabase ในหน้าตั้งค่าเพื่อเปิดใช้งานระบบ Login"})]})]})},_j=()=>{const[s,e]=p.useState(""),[r,n]=p.useState(""),[i,a]=p.useState(""),[o,l]=p.useState(""),[d,c]=p.useState(!1),[u,h]=p.useState(""),{signUpWithPassword:m,signInWithGoogle:f,isSupabaseConnected:y}=De(),x=at(),{toast:g}=ae(),v=async N=>{if(N.preventDefault(),h(""),!y){g({title:"⚠️ ยังไม่ได้เชื่อมต่อ Supabase",description:"โปรดเชื่อมต่อ Supabase ก่อนทำการสมัครสมาชิก",variant:"destructive"});return}if(r!==i){h("รหัสผ่านไม่ตรงกัน"),g({title:"ข้อผิดพลาด",description:"รหัสผ่านและการยืนยันรหัสผ่านไม่ตรงกัน",variant:"destructive"});return}c(!0);const{error:k}=await m(s,r,o);c(!1),k?(h(k.message),g({title:"สมัครสมาชิกไม่สำเร็จ",description:k.message,variant:"destructive"})):(g({title:"สมัครสมาชิกสำเร็จ!",description:"กรุณาตรวจสอบอีเมลของคุณเพื่อยืนยันบัญชี"}),x("/login"))},w=async()=>{if(h(""),!y){g({title:"⚠️ ยังไม่ได้เชื่อมต่อ Supabase",description:"โปรดเชื่อมต่อ Supabase ก่อนทำการสมัครสมาชิกด้วย Google",variant:"destructive"});return}c(!0);const{error:N}=await f();c(!1),N&&(h(N.message),g({title:"สมัครสมาชิกด้วย Google ไม่สำเร็จ",description:N.message,variant:"destructive"}))},b={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},_={type:"tween",ease:"anticipate",duration:.5};return t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:b,transition:_,className:"min-h-screen flex items-center justify-center pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:[t.jsxs(be,{children:[t.jsx("title",{children:"สมัครสมาชิก - Login Learning"}),t.jsx("meta",{name:"description",content:"สร้างบัญชี Login Learning ใหม่เพื่อเริ่มต้นการเรียนรู้และค้นพบศักยภาพด้านวิศวกรรม"})]}),t.jsxs("div",{className:"max-w-md w-full space-y-8 glass-effect p-10 rounded-xl shadow-2xl",children:[t.jsxs("div",{children:[t.jsx(L.h2,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mt-6 text-center text-4xl font-extrabold text-gray-900",children:"สร้างบัญชีใหม่"}),t.jsxs(L.p,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"mt-2 text-center text-sm text-gray-700",children:["หรือ"," ",t.jsx(Y,{to:"/login",className:"font-medium text-blue-400 hover:text-blue-300",children:"เข้าสู่ระบบหากมีบัญชีแล้ว"})]})]}),t.jsxs("form",{className:"mt-8 space-y-6",onSubmit:v,children:[u&&t.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 p-3 rounded-md flex items-center text-red-300 text-sm",children:[t.jsx(ne,{className:"w-5 h-5 mr-2"}),u]}),t.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[t.jsxs(L.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.3},children:[t.jsx("label",{htmlFor:"full-name",className:"sr-only",children:"ชื่อ-นามสกุล"}),t.jsxs("div",{className:"relative",children:[t.jsx(Z,{id:"full-name",name:"fullName",type:"text",autoComplete:"name",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"ชื่อ-นามสกุล",value:o,onChange:N=>l(N.target.value)}),t.jsx(it,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),t.jsxs(L.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.4},children:[t.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"อีเมล"}),t.jsxs("div",{className:"relative",children:[t.jsx(Z,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"อีเมล",value:s,onChange:N=>e(N.target.value)}),t.jsx(pt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),t.jsxs(L.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.5},children:[t.jsx("label",{htmlFor:"password",className:"sr-only",children:"รหัสผ่าน"}),t.jsxs("div",{className:"relative",children:[t.jsx(Z,{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"รหัสผ่าน (อย่างน้อย 6 ตัวอักษร)",value:r,onChange:N=>n(N.target.value)}),t.jsx(Et,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),t.jsxs(L.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.6},children:[t.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"ยืนยันรหัสผ่าน"}),t.jsxs("div",{className:"relative",children:[t.jsx(Z,{id:"confirm-password",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"ยืนยันรหัสผ่าน",value:i,onChange:N=>a(N.target.value)}),t.jsx(Et,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]})]}),t.jsx(L.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.7},children:t.jsxs(S,{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-gray-800 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:d||!y,children:[t.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:t.jsx(Vr,{className:"h-5 w-5 text-blue-300 group-hover:text-blue-200","aria-hidden":"true"})}),d?"กำลังสร้างบัญชี...":"สร้างบัญชี"]})})]}),t.jsxs(L.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.8},className:"mt-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t border-gray-700"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"px-2 bg-gray-800 text-gray-400 rounded-md",children:"หรือสมัครด้วย"})})]}),t.jsx("div",{className:"mt-6",children:t.jsxs(S,{onClick:w,variant:"outline",className:"w-full flex justify-center py-3 px-4 border-gray-300 text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:d||!y,children:[t.jsx("svg",{className:"w-5 h-5 mr-2","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:t.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.7 512 244 512 110.3 512 0 401.7 0 265.2S110.3 18.3 244 18.3c67.4 0 120.9 24.8 160.4 60.3l-64.8 63.1c-20.1-18.9-48.4-30.8-89.3-30.8-70.1 0-128.2 57.2-128.2 128.2s58.1 128.2 128.2 128.2c80.3 0 110.1-58.8 113.8-87.9H244v-74.6h236.7c2.3 12.7 3.8 25.9 3.8 39.9z"})}),"สมัครด้วย Google"]})})]}),!y&&t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"mt-4 text-center text-yellow-400 text-sm p-3 bg-yellow-500/10 rounded-md",children:"⚠️ Supabase ยังไม่ได้เชื่อมต่อ! กรุณาเชื่อมต่อ Supabase ในหน้าตั้งค่าเพื่อเปิดใช้งานระบบสมัครสมาชิก"})]})]})},kj=()=>{var d;const{user:s,isAdmin:e}=De(),{toast:r}=ae(),n=at(),i=(c,u)=>{u?n(u):r({title:`🚧 ฟีเจอร์ "${c}" ยังไม่พร้อมใช้งาน`,description:"เรากำลังพัฒนาฟีเจอร์นี้อยู่ โปรดรอติดตาม! 🚀"})},a={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};if(!s)return t.jsx("div",{className:"min-h-screen flex items-center justify-center pt-24 pb-12 px-4",children:t.jsx("p",{className:"text-green-900 text-xl",children:"กำลังโหลดข้อมูลผู้ใช้..."})});const o=[{name:"การจัดการคอร์สเรียน",icon:gi,color:"blue",description:"สร้าง แก้ไข และจัดการคอร์สเรียนทั้งหมด",path:"/admin/courses",action:"manage-courses"},{name:"จัดการผู้เรียน",icon:ie,color:"orange",description:"ดูและจัดการข้อมูลผู้เรียน",path:"/admin/users",action:"manage-users"}],l=[{name:"คอร์สของฉัน",icon:ge,color:"blue",description:"ดูคอร์สที่คุณกำลังเรียนและติดตามความคืบหน้า",path:"/courses"},{name:"โปรไฟล์ของฉัน",icon:wi,color:"green",description:"อัปเดตข้อมูลส่วนตัวและรูปโปรไฟล์ของคุณ",path:"/settings"},{name:"ข้อมูลการรับเข้า",icon:gi,color:"purple",description:"ข้อมูลการสมัครเรียนและเงื่อนไขการรับเข้า",path:"/admissions"},{name:"ความคืบหน้า",icon:Vc,color:"orange",description:"ติดตามความก้าวหน้าในการเรียนรู้ของคุณ",path:null},{name:"การแจ้งเตือน",icon:ia,color:"yellow",description:"ดูการแจ้งเตือนล่าสุดและข่าวสารจากเรา",path:null}];return e&&l.push({name:"แผงควบคุมผู้ดูแลระบบ",icon:Xs,color:"red",description:"จัดการผู้ใช้, คอร์สเรียน, และเนื้อหาเว็บไซต์",path:"/admin",gridSpan:"lg:col-span-2"}),t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:a,className:"container mx-auto px-4 py-12",children:[t.jsxs(be,{children:[t.jsx("title",{children:"แดชบอร์ด - Login Learning"}),t.jsx("meta",{name:"description",content:"แดชบอร์ดส่วนตัวของคุณใน Login Learning จัดการคอร์สเรียนและโปรไฟล์"})]}),t.jsxs("div",{className:"max-w-5xl mx-auto",children:[t.jsxs(L.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mb-10",children:[t.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-green-900",children:["ยินดีต้อนรับ, ",t.jsx("span",{className:"gradient-text",children:((d=s.user_metadata)==null?void 0:d.full_name)||s.email}),"!"]}),e&&t.jsx("p",{className:"text-yellow-400 text-md sm:text-lg mt-2",children:"คุณกำลังเข้าสู่ระบบในฐานะผู้ดูแลระบบ"})]}),e&&t.jsxs(L.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"mb-12",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx(da,{className:"w-6 h-6 text-yellow-500 mr-3"}),t.jsx("h2",{className:"text-2xl font-bold text-green-900",children:"การดำเนินการด่วน"})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:o.map((c,u)=>t.jsx(L.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3,delay:.25+u*.05},className:"group bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg p-4 hover:bg-white/20 transition-all duration-300 cursor-pointer hover:scale-105",onClick:()=>i(c.name,c.path),children:t.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[t.jsx("div",{className:`p-3 rounded-full bg-${c.color}-100 group-hover:bg-${c.color}-200 transition-colors`,children:t.jsx(c.icon,{className:`w-6 h-6 text-${c.color}-600`})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-green-900 text-sm",children:c.name}),t.jsx("p",{className:"text-green-700 text-xs mt-1",children:c.description})]})]})},c.name))})]}),t.jsxs(L.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:e?.4:.2},children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx(Xs,{className:"w-6 h-6 text-blue-500 mr-3"}),t.jsx("h2",{className:"text-2xl font-bold text-green-900",children:"เมนูหลัก"})]}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((c,u)=>t.jsxs(L.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,delay:(e?.45:.25)+u*.05},className:`glass-effect p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 ease-in-out transform hover:-translate-y-1 cursor-pointer ${c.gridSpan||""}`,onClick:()=>i(c.name,c.path),children:[t.jsxs("div",{className:`flex items-center text-${c.color}-400 mb-3`,children:[t.jsx(c.icon,{className:"w-7 h-7 mr-3"}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-green-900",children:c.name})]}),t.jsx("p",{className:"text-green-700 text-sm mb-4",children:c.description}),t.jsx(S,{variant:"outline",className:`w-full border-${c.color}-500/60 text-${c.color}-400 hover:bg-${c.color}-500/20`,children:c.path?c.name==="โปรไฟล์ของฉัน"?"แก้ไขโปรไฟล์":`ไปยัง${c.name}`:"ดูรายละเอียด"})]},c.name))})]})]})]})},Sj=()=>{var f,y,x;const{user:s,isAdmin:e}=De(),{toast:r}=ae(),[n,i]=te.useState(!1),[a,o]=te.useState(((f=s==null?void 0:s.user_metadata)==null?void 0:f.full_name)||""),[l,d]=te.useState((s==null?void 0:s.email)||""),c=()=>{r({title:"🚧 ฟีเจอร์บันทึกโปรไฟล์ยังไม่พร้อมใช้งาน",description:"คุณสามารถขอให้เพิ่มฟีเจอร์นี้ในข้อความถัดไปได้! 🚀"}),i(!1)},u=g=>{r({title:`🚧 ฟีเจอร์ "${g}" ยังไม่พร้อมใช้งาน`,description:"เรากำลังพัฒนาฟีเจอร์นี้อยู่ โปรดรอติดตาม! 🚀"})},h={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},m={type:"tween",ease:"anticipate",duration:.5};return s?t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:h,transition:m,className:"container mx-auto px-4 py-12",children:[t.jsxs(be,{children:[t.jsx("title",{children:"โปรไฟล์ของฉัน - Login Learning"}),t.jsx("meta",{name:"description",content:"จัดการข้อมูลโปรไฟล์และตั้งค่าบัญชีของคุณที่ Login Learning"})]}),t.jsxs(L.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mb-10 text-center",children:[t.jsxs("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900",children:["โปรไฟล์ของ ",t.jsx("span",{className:"gradient-text",children:((y=s.user_metadata)==null?void 0:y.full_name)||s.email})]}),e&&t.jsx("p",{className:"text-yellow-400 mt-2",children:"สถานะ: ผู้ดูแลระบบ"})]}),t.jsxs("div",{className:"max-w-2xl mx-auto glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"ข้อมูลส่วนตัว"}),t.jsxs(S,{variant:"outline",onClick:()=>i(!n),className:"text-gray-700 border-gray-400 hover:bg-gray-100 hover:text-gray-900",children:[t.jsx(Js,{className:"w-4 h-4 mr-2"}),n?"ยกเลิก":"แก้ไขโปรไฟล์"]})]}),n?t.jsxs("form",{onSubmit:g=>{g.preventDefault(),c()},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"ชื่อ-นามสกุล"}),t.jsxs("div",{className:"relative",children:[t.jsx(it,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),t.jsx(Z,{id:"fullName",type:"text",value:a,onChange:g=>o(g.target.value),className:"pl-10 bg-white border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-200"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"อีเมล"}),t.jsxs("div",{className:"relative",children:[t.jsx(pt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),t.jsx(Z,{id:"email",type:"email",value:l,onChange:g=>d(g.target.value),disabled:!0,className:"pl-10 bg-gray-100 border-gray-300 text-gray-600 cursor-not-allowed"})]}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"ไม่สามารถแก้ไขอีเมลได้"})]}),t.jsx(S,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:"บันทึกการเปลี่ยนแปลง"})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(it,{className:"w-5 h-5 mr-3 text-[#667eea]"}),t.jsxs("span",{className:"text-gray-800",children:["ชื่อ-นามสกุล: ",((x=s.user_metadata)==null?void 0:x.full_name)||"ไม่ได้ระบุ"]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(pt,{className:"w-5 h-5 mr-3 text-[#667eea]"}),t.jsxs("span",{className:"text-gray-800",children:["อีเมล: ",s.email]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(vi,{className:"w-5 h-5 mr-3 text-[#667eea]"}),t.jsx("span",{className:"text-gray-800",children:"สถานะบัญชี: ยืนยันแล้ว"})]})]})]}),t.jsxs("div",{className:"max-w-2xl mx-auto mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-effect p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>u("คอร์สเรียนของฉัน"),children:[t.jsxs("div",{className:"flex items-center text-blue-300 mb-3",children:[t.jsx(ge,{className:"w-7 h-7 mr-3"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"คอร์สเรียนของฉัน"})]}),t.jsx("p",{className:"text-gray-700 text-sm",children:"ดูและจัดการคอร์สที่คุณลงทะเบียน"})]}),t.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-effect p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>u("ความคืบหน้าการเรียน"),children:[t.jsxs("div",{className:"flex items-center text-green-300 mb-3",children:[t.jsx(Vc,{className:"w-7 h-7 mr-3"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"ความคืบหน้า"})]}),t.jsx("p",{className:"text-gray-700 text-sm",children:"ติดตามความก้าวหน้าในการเรียนของคุณ"})]})]})]}):t.jsx("div",{className:"text-center py-10",children:"กำลังโหลดข้อมูลผู้ใช้..."})},Cj=async(s=null)=>{try{let e=s;if(!e){const{data:{user:i},error:a}=await E.auth.getUser();if(a||!i)throw new Error("User not authenticated");e=i.id}const{data:r,error:n}=await E.from("user_profiles").select("*").eq("user_id",e).single();if(n&&n.code!=="PGRST116")throw n;return r?{data:r,error:null}:{data:{user_id:e,full_name:"",age:null,school_name:"",grade_level:"",phone:"",interested_fields:[],bio:"",avatar_url:""},error:null}}catch(e){return console.error("Error fetching user profile:",e),{data:null,error:e}}},Tj=async s=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n,error:i}=await E.from("user_profiles").update(s).eq("user_id",e.id).select().single();if(i)throw i;return{data:n,error:null}}catch(e){return console.error("Error updating user profile:",e),{data:null,error:e}}},Ej=async()=>{try{const{data:s,error:e}=await E.from("user_profiles").select(`
        *,
        enrollments(count),
        achievements(count)
      `).order("created_at",{ascending:!1});return e?(console.error("Error fetching user profiles:",e),{data:[],error:e}):{data:s.map(n=>{var i,a,o,l;return{...n,enrollment_count:((a=(i=n.enrollments)==null?void 0:i[0])==null?void 0:a.count)||0,achievement_count:((l=(o=n.achievements)==null?void 0:o[0])==null?void 0:l.count)||0}}),error:null}}catch(s){return console.error("Error fetching users for admin:",s),{data:[],error:s}}},Pj=async(s,e)=>{try{const{data:r,error:n}=await E.from("user_profiles").update({role:e}).eq("user_id",s).select().single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error updating user role:",r),{data:null,error:r}}},Aj=async()=>{try{const{data:{user:s}}=await E.auth.getUser();if(!s)throw new Error("User not authenticated");const{data:e,error:r}=await Cj(s.id);if(r)throw r;return{data:e,error:null}}catch(s){return console.error("Error getting profile settings:",s),{data:null,error:s}}},Dj=async s=>{try{const{data:{user:e}}=await E.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:r,error:n}=await Tj(s);if(n)throw n;return{data:r,error:null}}catch(e){return console.error("Error saving profile settings:",e),{data:null,error:e}}},Ij=async()=>{try{const{data:{user:s}}=await E.auth.getUser();if(!s)throw new Error("User not authenticated");const{error:e}=await E.from("user_settings").delete().eq("user_id",s.id);if(e)throw e;return{data:!0,error:null}}catch(s){return console.error("Error deleting user settings:",s),{data:null,error:s}}},Oj=()=>{const{user:s}=De(),{toast:e}=ae(),[r,n]=p.useState(!1),[i,a]=p.useState(!0);p.useState("profile");const[o,l]=p.useState(!1),[d,c]=p.useState({full_name:"",email:"",phone:"",bio:"",grade_level:"",school_name:"",age:"",interested_fields:[],avatar_url:""});p.useState({theme:"light",language:"th",compact_mode:!1,animations_enabled:!0}),p.useState({email_notifications:!0,push_notifications:!0,course_updates:!0,assignment_reminders:!0,forum_notifications:!1,sound_enabled:!0}),p.useEffect(()=>{(async()=>{var g;if(s){a(!0);try{const v=await Aj();v.data?c({full_name:v.data.full_name||((g=s.user_metadata)==null?void 0:g.full_name)||"",email:s.email||"",phone:v.data.phone||"",bio:v.data.bio||"",grade_level:v.data.grade_level||"",school_name:v.data.school_name||"",age:v.data.age||"",interested_fields:v.data.interested_fields||[],avatar_url:v.data.avatar_url||""}):c(w=>{var b;return{...w,email:s.email||"",full_name:((b=s.user_metadata)==null?void 0:b.full_name)||""}}),v.data&&Object.keys(v.data).length>0&&e({title:"โหลดการตั้งค่าสำเร็จ",description:"ข้อมูลโปรไฟล์ของคุณถูกโหลดจากฐานข้อมูล"})}catch(v){console.error("Error loading settings:",v),e({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถโหลดการตั้งค่าได้",variant:"destructive"})}finally{a(!1)}}})()},[s,e]);const u=async x=>{const g=x.target.files[0];if(g){l(!0);try{const{data:v,error:w}=await Sw(g);if(w)throw new Error(w.message||"ไม่สามารถอัปโหลดรูปภาพได้");c(b=>({...b,avatar_url:v.publicUrl})),e({title:"อัปโหลดรูปภาพสำเร็จ",description:"รูปโปรไฟล์ของคุณได้รับการอัปเดทแล้ว"}),await h()}catch(v){console.error("Error uploading profile image:",v),e({title:"เกิดข้อผิดพลาด",description:v.message,variant:"destructive"})}finally{l(!1),x.target.value=""}}},h=async()=>{if(s){n(!0);try{const{email:x,...g}=d,{error:v}=await Dj(g);if(v)throw new Error(v);e({title:"บันทึกสำเร็จ",description:"ข้อมูลโปรไฟล์ของคุณได้รับการอัพเดทแล้ว"})}catch(x){console.error("Error saving profile:",x),e({title:"เกิดข้อผิดพลาด",description:`ไม่สามารถบันทึกข้อมูลได้: ${x.message}`,variant:"destructive"})}finally{n(!1)}}},m=async()=>{var x;if(s&&window.confirm("คุณแน่ใจหรือไม่ที่จะล้างข้อมูลโปรไฟล์ทั้งหมด?")){n(!0);try{const{error:g}=await Ij();if(g)throw new Error(g);c({full_name:((x=s.user_metadata)==null?void 0:x.full_name)||"",email:s.email||"",phone:"",bio:"",grade_level:"",school_name:"",age:"",interested_fields:[],avatar_url:""}),e({title:"ล้างข้อมูลสำเร็จ",description:"ข้อมูลโปรไฟล์ทั้งหมดถูกลบออกจากฐานข้อมูลแล้ว"})}catch(g){console.error("Error clearing settings:",g),e({title:"เกิดข้อผิดพลาด",description:`ไม่สามารถล้างข้อมูลได้: ${g.message}`,variant:"destructive"})}finally{n(!1)}}};if(i)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(rt,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),t.jsx("p",{className:"text-gray-600",children:"กำลังโหลดการตั้งค่า..."})]})});const f=()=>t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ข้อมูลโปรไฟล์"}),t.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:[d.avatar_url?t.jsx("img",{src:d.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):t.jsx(it,{className:"w-8 h-8 text-gray-400"}),o&&t.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center rounded-full",children:t.jsx(rt,{className:"w-6 h-6 text-white animate-spin"})})]}),t.jsx("input",{type:"file",id:"profile-image-upload",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:u,className:"hidden",disabled:o}),t.jsx(S,{size:"sm",variant:"outline",className:"absolute -bottom-1 -right-1 rounded-full w-8 h-8 p-0",onClick:()=>{var x;return(x=document.getElementById("profile-image-upload"))==null?void 0:x.click()},disabled:o,children:o?t.jsx(rt,{className:"w-4 h-4 animate-spin"}):t.jsx($f,{className:"w-4 h-4"})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:"รูปโปรไฟล์"}),t.jsx("p",{className:"text-sm text-gray-500",children:"อัพโหลดรูปภาพ JPG, PNG ขนาดไม่เกิน 2MB"}),o&&t.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"กำลังอัปโหลดรูปภาพ..."})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ชื่อ-นามสกุล"}),t.jsx("input",{type:"text",value:d.full_name||"",onChange:x=>c({...d,full_name:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"กรอกชื่อ-นามสกุล"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"อีเมล"}),t.jsx("input",{type:"email",value:d.email||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed",placeholder:"กรอกอีเมล"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"อีเมลไม่สามารถแก้ไขได้ เนื่องจากใช้สำหรับเข้าสู่ระบบ"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เบอร์โทรศัพท์"}),t.jsx("input",{type:"tel",value:d.phone||"",onChange:x=>c({...d,phone:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"กรอกเบอร์โทรศัพท์"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"อายุ"}),t.jsx("input",{type:"number",value:d.age||"",onChange:x=>c({...d,age:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"กรอกอายุ",min:"1",max:"100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ระดับชั้น"}),t.jsxs("select",{value:d.grade_level||"",onChange:x=>c({...d,grade_level:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"เลือกระดับชั้น"}),t.jsx("option",{value:"ม.1",children:"มัธยมศึกษาปีที่ 1"}),t.jsx("option",{value:"ม.2",children:"มัธยมศึกษาปีที่ 2"}),t.jsx("option",{value:"ม.3",children:"มัธยมศึกษาปีที่ 3"}),t.jsx("option",{value:"ม.4",children:"มัธยมศึกษาปีที่ 4"}),t.jsx("option",{value:"ม.5",children:"มัธยมศึกษาปีที่ 5"}),t.jsx("option",{value:"ม.6",children:"มัธยมศึกษาปีที่ 6"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"โรงเรียน"}),t.jsx("input",{type:"text",value:d.school_name||"",onChange:x=>c({...d,school_name:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"กรอกชื่อโรงเรียน"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เกี่ยวกับฉัน"}),t.jsx("textarea",{value:d.bio||"",onChange:x=>c({...d,bio:x.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"เขียนข้อมูลเกี่ยวกับตัวคุณ..."})]})]}),t.jsx("div",{className:"flex justify-end mt-6",children:t.jsx(S,{onClick:h,disabled:r,children:r?t.jsxs(t.Fragment,{children:[t.jsx(rt,{className:"w-4 h-4 mr-2 animate-spin"}),"กำลังบันทึก..."]}):t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"w-4 h-4 mr-2"}),"บันทึกข้อมูล"]})})})]})}),y=()=>f();return t.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:t.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"การตั้งค่า"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"จัดการข้อมูลส่วนตัวของคุณ (เก็บในฐานข้อมูล)"})]}),t.jsx("div",{className:"mt-4 sm:mt-0",children:t.jsx(S,{variant:"outline",onClick:m,disabled:r,className:"text-red-600 border-red-300 hover:bg-red-50 hover:border-red-400",children:r?t.jsxs(t.Fragment,{children:[t.jsx(rt,{className:"w-4 h-4 mr-2 animate-spin"}),"กำลังล้าง..."]}):"ล้างข้อมูลโปรไฟล์"})})]}),t.jsx("div",{className:"max-w-4xl mx-auto",children:y()})]})})},Lj=async()=>{try{console.log("Fetching dashboard statistics...");const{count:s,error:e}=await E.from("user_profiles").select("*",{count:"exact",head:!0});e&&console.warn("Could not fetch user count:",e);const r=new Date;r.setDate(r.getDate()-7);const{count:n,error:i}=await E.from("user_profiles").select("*",{count:"exact",head:!0}).gte("created_at",r.toISOString());i&&console.warn("Could not fetch new users count:",i);const{count:a,error:o}=await E.from("courses").select("*",{count:"exact",head:!0});o&&console.warn("Could not fetch courses count:",o);const{count:l,error:d}=await E.from("courses").select("*",{count:"exact",head:!0}).eq("is_active",!0);d&&console.warn("Could not fetch active courses count:",d);const{count:c,error:u}=await E.from("projects").select("*",{count:"exact",head:!0});u&&console.warn("Could not fetch projects count:",u);const{count:h,error:m}=await E.from("projects").select("*",{count:"exact",head:!0}).eq("is_approved",!0);m&&console.warn("Could not fetch approved projects count:",m);const{count:f,error:y}=await E.from("projects").select("*",{count:"exact",head:!0}).eq("is_approved",!1);y&&console.warn("Could not fetch pending projects count:",y);const{count:x,error:g}=await E.from("enrollments").select("*",{count:"exact",head:!0});g&&console.warn("Could not fetch enrollments count:",g);const{count:v,error:w}=await E.from("enrollments").select("*",{count:"exact",head:!0}).eq("is_active",!0);w&&console.warn("Could not fetch active enrollments count:",w);const b=s>0?Math.round(n/s*100):0,{data:_,error:N}=await E.from("projects").select("view_count");let k=0;!N&&_&&(k=_.reduce((T,M)=>T+(M.view_count||0),0));const j={totalUsers:s||0,activeUsers:Math.round((s||0)*.15),newUsersToday:Math.round((n||0)/7),userGrowth:b,newUsersWeek:n||0,totalCourses:a||0,activeCourses:l||0,draftCourses:(a||0)-(l||0),courseEnrollments:x||0,totalProjects:c||0,approvedProjects:h||0,pendingApproval:f||0,featuredProjects:Math.round((h||0)*.2),projectViews:k,systemUptime:99.8,serverLoad:Math.round(Math.random()*30+40),storageUsed:2.4,activeSessions:Math.round((s||0)*.1)};return console.log("Dashboard stats calculated:",j),{data:j,error:null}}catch(s){return console.error("Error fetching dashboard stats:",s),{data:{totalUsers:0,activeUsers:0,newUsersToday:0,userGrowth:0,totalCourses:0,activeCourses:0,draftCourses:0,courseEnrollments:0,totalProjects:0,approvedProjects:0,pendingApproval:0,featuredProjects:0,projectViews:0,systemUptime:0,serverLoad:0,storageUsed:0,activeSessions:0},error:s}}},Rj=async()=>{try{const s=[],{data:e,error:r}=await E.from("user_profiles").select("full_name, email, created_at").order("created_at",{ascending:!1}).limit(5);!r&&e&&e.forEach(d=>{s.push({type:"user_registration",title:"ผู้ใช้ใหม่ลงทะเบียน",description:`${d.full_name||d.email} เข้าร่วมระบบ`,timestamp:d.created_at,icon:"user-plus"})});const{data:n,error:i}=await E.from("courses").select("title, updated_at").order("updated_at",{ascending:!1}).limit(3);!i&&n&&n.forEach(d=>{s.push({type:"course_update",title:"คอร์สมีการอัปเดต",description:`"${d.title}" ได้รับการปรับปรุง`,timestamp:d.updated_at,icon:"book-open"})});const{data:a,error:o}=await E.from("projects").select("title, created_at").order("created_at",{ascending:!1}).limit(3);return!o&&a&&a.forEach(d=>{s.push({type:"project_submission",title:"โครงงานใหม่",description:`"${d.title}" ถูกส่งเพื่อขออนุมัติ`,timestamp:d.created_at,icon:"folder-plus"})}),{data:s.sort((d,c)=>new Date(c.timestamp)-new Date(d.timestamp)).slice(0,10),error:null}}catch(s){return console.error("Error fetching recent activity:",s),{data:[],error:s}}},Mj=async()=>{try{const{error:s}=await E.from("user_profiles").select("id",{count:"exact",head:!0}).limit(1),e=s?"error":"healthy";return{data:{database:{status:e,responseTime:Math.round(Math.random()*50+10)},storage:{status:"healthy",usage:45},api:{status:"healthy",responseTime:Math.round(Math.random()*100+50)},overall:e==="healthy"?"healthy":"warning"},error:null}}catch(s){return console.error("Error fetching system health:",s),{data:{database:{status:"error",responseTime:0},storage:{status:"unknown",usage:0},api:{status:"error",responseTime:0},overall:"error"},error:s}}},$j=()=>{const{user:s}=De(),{toast:e}=ae(),r=at(),[n,i]=p.useState("overview"),[a,o]=p.useState(null),[l,d]=p.useState(!0),[c,u]=p.useState([]),[h,m]=p.useState(null);p.useEffect(()=>{(async()=>{try{d(!0);const{data:_,error:N}=await Lj();N?(console.error("Error loading dashboard stats:",N),e({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถโหลดข้อมูลแดชบอร์ดได้",variant:"destructive"})):o(_);const{data:k,error:j}=await Rj();j||u(k);const{data:T,error:M}=await Mj();M||m(T)}catch(_){console.error("Error loading dashboard:",_),e({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถโหลดข้อมูลแดชบอร์ดได้",variant:"destructive"})}finally{d(!1)}})()},[e]);const f=[{id:"overview",label:"ภาพรวม",icon:Ws},{id:"users",label:"ผู้ใช้",icon:ie},{id:"courses",label:"คอร์ส",icon:qt},{id:"projects",label:"โครงงาน",icon:Ae},{id:"customize",label:"ปรับแต่ง",icon:Ke}],y=a?[{title:"ผู้ใช้งานระบบ",value:a.totalUsers.toLocaleString(),change:`+${a.userGrowth}%`,changeType:"positive",subtitle:`${a.activeUsers} คนออนไลน์`,icon:ie,color:"blue",path:"/admin/users"},{title:"คอร์สเรียน",value:a.totalCourses,change:`${a.activeCourses} เปิดใช้งาน`,changeType:"neutral",subtitle:`${a.courseEnrollments.toLocaleString()} การลงทะเบียน`,icon:qt,color:"green",path:"/admin/courses"},{title:"โครงงาน",value:a.totalProjects,change:`${a.featuredProjects} แนะนำ`,changeType:"neutral",subtitle:`${a.projectViews.toLocaleString()} ยอดดู`,icon:Ae,color:"purple",path:"/admin/projects"},{title:"สถานะระบบ",value:`${a.systemUptime}%`,change:`${a.serverLoad}% load`,changeType:a.serverLoad>80?"negative":"positive",subtitle:`${a.activeSessions} sessions`,icon:op,color:"emerald"}]:[],x=a?[{title:"ผู้ใช้ใหม่วันนี้",value:a.newUsersToday,icon:Vr,color:"bg-blue-50 text-blue-600",trend:"up"},{title:"คอร์สรอการอนุมัติ",value:a.draftCourses,icon:fe,color:"bg-orange-50 text-orange-600",trend:"neutral"},{title:"โครงงานรอการอนุมัติ",value:a.pendingApproval,icon:Tt,color:"bg-yellow-50 text-yellow-600",trend:"neutral"},{title:"พื้นที่จัดเก็บ",value:`${a.storageUsed}GB`,icon:qf,color:"bg-purple-50 text-purple-600",trend:"up"}]:[],g=()=>l?t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[1,2,3,4].map(b=>t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg"}),t.jsx("div",{className:"w-16 h-6 bg-gray-200 rounded-full"})]}),t.jsx("div",{className:"w-24 h-4 bg-gray-200 rounded mb-2"}),t.jsx("div",{className:"w-16 h-8 bg-gray-200 rounded mb-2"}),t.jsx("div",{className:"w-20 h-4 bg-gray-200 rounded"})]})},b))}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"w-32 h-6 bg-gray-200 rounded mb-6"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(b=>t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg mx-auto mb-2"}),t.jsx("div",{className:"w-16 h-4 bg-gray-200 rounded mx-auto mb-1"}),t.jsx("div",{className:"w-12 h-6 bg-gray-200 rounded mx-auto"})]},b))})]})})]}):t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:y.map((b,_)=>t.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:_*.1},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>b.path&&r(b.path),children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:`p-3 rounded-lg bg-${b.color}-100`,children:t.jsx(b.icon,{className:`w-6 h-6 text-${b.color}-600`})}),t.jsx("div",{className:`text-sm font-medium px-2 py-1 rounded-full ${b.changeType==="positive"?"bg-green-100 text-green-800":b.changeType==="negative"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:b.change})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:b.title}),t.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:b.value}),t.jsx("p",{className:"text-sm text-gray-500",children:b.subtitle})]}),b.path&&t.jsxs("div",{className:"mt-4 flex items-center text-sm text-blue-600",children:[t.jsx("span",{children:"ดูรายละเอียด"}),t.jsx(Ce,{className:"w-4 h-4 ml-1"})]})]},b.title))}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[t.jsx(If,{className:"w-5 h-5 mr-2 text-blue-600"}),"ข้อมูลสำคัญ"]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:x.map((b,_)=>t.jsxs(L.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.5+_*.1},className:"text-center p-4 rounded-lg border border-gray-100 hover:border-gray-200 transition-colors",children:[t.jsx("div",{className:`inline-flex p-3 rounded-full ${b.color} mb-3`,children:t.jsx(b.icon,{className:"w-5 h-5"})}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:b.value}),t.jsx("p",{className:"text-sm text-gray-600",children:b.title})]},b.title))})]}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"xl:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[t.jsx(fe,{className:"w-5 h-5 mr-2 text-green-600"}),"กิจกรรมล่าสุด"]}),t.jsx(S,{variant:"outline",size:"sm",children:"ดูทั้งหมด"})]}),t.jsx("div",{className:"space-y-4",children:c.length>0?c.map((b,_)=>t.jsxs(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+_*.1},className:"flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsxs("div",{className:`p-2 rounded-full ${b.type==="user_registration"?"bg-blue-100 text-blue-600":b.type==="course_update"?"bg-green-100 text-green-600":b.type==="project_submission"?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600"}`,children:[b.icon==="user-plus"&&t.jsx(ie,{className:"w-4 h-4"}),b.icon==="book-open"&&t.jsx(qt,{className:"w-4 h-4"}),b.icon==="folder-plus"&&t.jsx(Ae,{className:"w-4 h-4"})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:b.title}),t.jsx("p",{className:"text-sm text-gray-600",children:b.description})]}),t.jsx("div",{className:"text-xs text-gray-400",children:new Date(b.timestamp).toLocaleString("th-TH")})]},_)):t.jsx("div",{className:"text-center py-4 text-gray-500",children:"ไม่มีกิจกรรมล่าสุด"})})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[t.jsx(la,{className:"w-5 h-5 mr-2 text-purple-600"}),"การดำเนินการด่วน"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(Y,{to:"/admin/users",children:t.jsxs(S,{variant:"outline",className:"w-full justify-start",children:[t.jsx(Vr,{className:"w-4 h-4 mr-2"}),"เพิ่มผู้ใช้ใหม่"]})}),t.jsx(Y,{to:"/admin/courses",children:t.jsxs(S,{variant:"outline",className:"w-full justify-start",children:[t.jsx(Ur,{className:"w-4 h-4 mr-2"}),"สร้างคอร์สใหม่"]})}),t.jsx(Y,{to:"/admin/projects",children:t.jsxs(S,{variant:"outline",className:"w-full justify-start",children:[t.jsx(Ae,{className:"w-4 h-4 mr-2"}),"จัดการโครงงาน"]})}),t.jsxs(S,{variant:"outline",className:"w-full justify-start",children:[t.jsx(Ke,{className:"w-4 h-4 mr-2"}),"ตั้งค่าระบบ"]}),t.jsxs(S,{variant:"outline",className:"w-full justify-start",children:[t.jsx(Ws,{className:"w-4 h-4 mr-2"}),"ดูรายงาน"]})]}),t.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"สถานะเซิร์ฟเวอร์"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(ve,{className:"w-4 h-4 text-green-500 mr-1"}),t.jsx("span",{className:"text-green-600",children:"ปกติ"})]})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[t.jsx("span",{className:"text-gray-600",children:"การเชื่อมต่อ"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(xp,{className:"w-4 h-4 text-green-500 mr-1"}),t.jsxs("span",{className:"text-green-600",children:[(a==null?void 0:a.activeSessions)||0," sessions"]})]})]})]})]})]})]}),v=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[t.jsx(qt,{className:"w-5 h-5 mr-2 text-blue-600"}),"ปรับแต่งคอร์สเรียน"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{title:"ธีมและสี",desc:"ปรับแต่งสีและธีมของคอร์ส",icon:oo,color:"purple"},{title:"รูปภาพปก",desc:"จัดการรูปภาพปกคอร์ส",icon:Ue,color:"green"},{title:"เนื้อหา",desc:"แก้ไขรายละเอียดคอร์ส",icon:co,color:"orange"},{title:"การตั้งค่า",desc:"ตั้งค่าการเข้าถึงและราคา",icon:Ke,color:"gray"},{title:"ไฟล์แนบ",desc:"จัดการไฟล์และเอกสาร",icon:vs,color:"blue"},{title:"ตัวอย่าง",desc:"ดูตัวอย่างคอร์ส",icon:Ce,color:"indigo"}].map(b=>t.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx(b.icon,{className:`w-5 h-5 text-${b.color}-600`}),t.jsx("h3",{className:"font-medium text-gray-900",children:b.title})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:b.desc}),t.jsx(S,{variant:"outline",size:"sm",className:"w-full",children:"จัดการ"})]},b.title))})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[t.jsx(Ae,{className:"w-5 h-5 mr-2 text-purple-600"}),"ปรับแต่งโครงงาน"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{title:"ธีมโครงงาน",desc:"ปรับแต่งธีมการแสดงผล",icon:oo,color:"purple"},{title:"แกลเลอรี่",desc:"จัดการรูปภาพโครงงาน",icon:Ue,color:"green"},{title:"รายละเอียด",desc:"แก้ไขข้อมูลโครงงาน",icon:co,color:"orange"},{title:"สถานะ",desc:"จัดการสถานะและการแสดง",icon:Ke,color:"gray"},{title:"ไฟล์โครงงาน",desc:"อัปโหลดไฟล์และเอกสาร",icon:vs,color:"blue"},{title:"แสดงผล",desc:"ดูผลการแสดงโครงงาน",icon:Ce,color:"indigo"}].map(b=>t.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx(b.icon,{className:`w-5 h-5 text-${b.color}-600`}),t.jsx("h3",{className:"font-medium text-gray-900",children:b.title})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:b.desc}),t.jsx(S,{variant:"outline",size:"sm",className:"w-full",children:"จัดการ"})]},b.title))})]})]}),w=()=>{switch(n){case"overview":return g();case"users":return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"จัดการผู้ใช้"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"หน้าจัดการผู้ใช้งานระบบ"}),t.jsx(Y,{to:"/admin/users",children:t.jsx(S,{children:"ไปยังหน้าจัดการผู้ใช้"})})]});case"courses":return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"จัดการคอร์ส"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"หน้าจัดการคอร์สเรียน"}),t.jsx(Y,{to:"/admin/courses",children:t.jsx(S,{children:"ไปยังหน้าจัดการคอร์ส"})})]});case"projects":return t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"จัดการโครงงาน"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"หน้าจัดการโครงงาน"}),t.jsx(Y,{to:"/admin/projects",children:t.jsx(S,{children:"ไปยังหน้าจัดการโครงงาน"})})]});case"customize":return v();default:return g()}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs(be,{children:[t.jsx("title",{children:"แดชบอร์ดผู้ดูแลระบบ - Login Learning"}),t.jsx("meta",{name:"description",content:"แดชบอร์ดสำหรับจัดการระบบ Login Learning"})]}),t.jsxs("div",{className:"w-full mx-auto",children:[t.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 p-3 rounded-xl",children:t.jsx(cp,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"แดชบอร์ดผู้ดูแลระบบ"}),t.jsxs("p",{className:"text-gray-600 mt-1",children:["ยินดีต้อนรับ, ",s==null?void 0:s.email]})]}),t.jsx("div",{className:"ml-auto",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[t.jsx(Me,{className:"w-4 h-4"}),t.jsx("span",{children:new Date().toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})})]})})]}),t.jsx("div",{className:"flex space-x-1 border-b border-gray-200",children:f.map(b=>{const _=b.icon;return t.jsx("button",{onClick:()=>i(b.id),className:`px-6 py-3 text-sm font-medium rounded-t-lg transition-all duration-200 ${n===b.id?"bg-blue-50 text-blue-700 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(_,{className:"w-4 h-4"}),t.jsx("span",{children:b.label})]})},b.id)})})]})}),t.jsx("div",{className:"px-6 py-8",children:t.jsx("div",{className:"max-w-7xl mx-auto",children:t.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:w()},n)})})]})]})},Fj=()=>{const{toast:s}=ae(),e=at(),[r,n]=te.useState(""),[i,a]=te.useState([]),[o,l]=te.useState(!0);te.useEffect(()=>{(async()=>{var f;try{l(!0);const{data:y,error:x}=await Ej();x&&(console.error("Database error:",x),x.code!=="PGRST200"&&s({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถโหลดข้อมูลผู้ใช้ได้",variant:"destructive"})),a(y||[])}catch(y){console.error("Error loading users:",y),(f=y.message)!=null&&f.includes("relationship")||s({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถโหลดข้อมูลผู้ใช้ได้",variant:"destructive"})}finally{l(!1)}})()},[s]);const d=async(m,f)=>{try{const{data:y,error:x}=await Pj(m,f);if(x)throw x;a(g=>g.map(v=>v.user_id===m?{...v,role:f}:v)),s({title:"อัพเดทสำเร็จ",description:`เปลี่ยนบทบาทผู้ใช้เป็น ${f} แล้ว`})}catch(y){console.error("Error updating user role:",y),s({title:"เกิดข้อผิดพลาด",description:`ไม่สามารถอัพเดทบทบาทได้: ${y.message}`,variant:"destructive"})}},c=m=>{s({title:`🚧 ฟีเจอร์ "${m}" ยังไม่พร้อมใช้งาน`,description:"เรากำลังพัฒนาส่วนนี้สำหรับผู้ดูแลระบบ โปรดรอติดตาม! 🚀"})},u=i.filter(m=>{var f,y;return((f=m.full_name)==null?void 0:f.toLowerCase().includes(r.toLowerCase()))||!1||((y=m.email)==null?void 0:y.toLowerCase().includes(r.toLowerCase()))||!1}),h={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};return t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:h,className:"container mx-auto px-4 py-12",children:[t.jsxs(be,{children:[t.jsx("title",{children:"จัดการผู้ใช้ - ผู้ดูแลระบบ Login Learning"}),t.jsx("meta",{name:"description",content:"จัดการข้อมูลผู้ใช้งานทั้งหมดในระบบ Login Learning"})]}),t.jsxs(L.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"flex flex-col sm:flex-row justify-between items-center mb-10",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs(S,{variant:"ghost",size:"sm",onClick:()=>e("/admin"),className:"mr-4 text-gray-600 hover:text-gray-900",children:[t.jsx(tt,{className:"w-4 h-4 mr-2"}),"ย้อนกลับ"]}),t.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-teal-900 mb-4 sm:mb-0",children:[t.jsx(ie,{className:"inline-block w-8 h-8 mr-3 text-[#667eea]"}),"จัดการผู้ใช้งาน"]})]}),t.jsxs(S,{onClick:()=>c("เพิ่มผู้ใช้ใหม่"),className:"bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-gray-800",children:[t.jsx(Vr,{className:"w-5 h-5 mr-2"}),"เพิ่มผู้ใช้ใหม่"]})]}),t.jsx("div",{className:"mb-6 glass-effect p-4 rounded-xl",children:t.jsxs("div",{className:"relative",children:[t.jsx(Yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(Z,{type:"text",placeholder:"ค้นหาผู้ใช้ (ชื่อ, อีเมล)...",value:r,onChange:m=>n(m.target.value),className:"pl-10 w-full bg-slate-200 border-slate-400 text-gray-900 focus:border-[#667eea]"})]})}),t.jsxs("div",{className:"glass-effect rounded-xl shadow-xl overflow-x-auto",children:[t.jsxs("table",{className:"w-full min-w-max text-left text-teal-800",children:[t.jsx("thead",{className:"border-b border-slate-700",children:t.jsxs("tr",{className:"bg-teal-100/30",children:[t.jsx("th",{className:"p-4",children:"ชื่อ-นามสกุล"}),t.jsx("th",{className:"p-4",children:"อีเมล"}),t.jsx("th",{className:"p-4",children:"บทบาท"}),t.jsx("th",{className:"p-4",children:"วันที่เข้าร่วม"}),t.jsx("th",{className:"p-4 text-center",children:"การดำเนินการ"})]})}),t.jsx("tbody",{children:u.map((m,f)=>t.jsxs(L.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:f*.05},className:"border-b border-slate-700/50 hover:bg-slate-700/20 transition-colors",children:[t.jsx("td",{className:"p-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:m.full_name||"ไม่ระบุชื่อ"}),m.school_name&&t.jsx("div",{className:"text-sm text-gray-500",children:m.school_name})]})}),t.jsx("td",{className:"p-4",children:m.email||"ไม่ระบุอีเมล"}),t.jsx("td",{className:"p-4",children:t.jsxs("select",{value:m.role||"student",onChange:y=>d(m.user_id,y.target.value),className:`px-2 py-1 text-xs rounded-full border-0 ${(m.role||"student")==="admin"?"bg-red-500/30 text-red-300":(m.role||"student")==="instructor"?"bg-blue-500/30 text-blue-300":(m.role||"student")==="branch_manager"?"bg-purple-500/30 text-purple-300":"bg-green-500/30 text-green-300"}`,children:[t.jsx("option",{value:"student",children:"Student"}),t.jsx("option",{value:"instructor",children:"Instructor"}),t.jsx("option",{value:"admin",children:"Admin"}),t.jsx("option",{value:"branch_manager",children:"Branch Manager"})]})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-sm",children:m.joinedDate}),t.jsxs("div",{className:"text-xs text-gray-500",children:[m.enrollmentCount," คอร์ส"]})]})}),t.jsxs("td",{className:"p-4 text-center space-x-2",children:[t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>c(`แก้ไขผู้ใช้ ${m.full_name||"ไม่ระบุชื่อ"}`),className:"text-blue-400 hover:bg-blue-500/20",children:t.jsx(ir,{className:"w-4 h-4"})}),t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>c(`ลบผู้ใช้ ${m.full_name||"ไม่ระบุชื่อ"}`),className:"text-red-400 hover:bg-red-500/20",children:t.jsx(Re,{className:"w-4 h-4"})})]})]},m.user_id))})]}),o?t.jsxs("div",{className:"flex items-center justify-center p-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"กำลังโหลดข้อมูลผู้ใช้..."})]}):u.length===0?t.jsx("p",{className:"text-center p-6 text-teal-700",children:i.length===0?"ไม่มีข้อมูลผู้ใช้ในระบบ":"ไม่พบผู้ใช้งานที่ตรงกับการค้นหา"}):null]})]})},Uj=({isOpen:s,onClose:e,onSuccess:r})=>{const{toast:n}=ae(),[i,a]=p.useState(!1),[o,l]=p.useState({title:"",description:"",category:"",level:"beginner",duration_hours:0,price:0,max_students:50,is_active:!0,thumbnail_url:""}),[d,c]=p.useState({}),[u,h]=p.useState(null),[m,f]=p.useState(!1),[y,x]=p.useState(null),g=j=>{const{name:T,value:M,type:B}=j.target;l(W=>({...W,[T]:B==="number"?parseFloat(M)||0:M})),d[T]&&c(W=>({...W,[T]:""}))},v=()=>{const j={};return o.title.trim()||(j.title="กรุณาระบุชื่อคอร์ส"),o.description.trim()||(j.description="กรุณาระบุคำอธิบายคอร์ส"),o.category.trim()||(j.category="กรุณาระบุหมวดหมู่"),o.duration_hours<=0&&(j.duration_hours="ระยะเวลาต้องมากกว่า 0 ชั่วโมง"),o.price<0&&(j.price="ราคาต้องไม่เป็นลบ"),o.max_students<=0&&(j.max_students="จำนวนนักเรียนสูงสุดต้องมากกว่า 0"),c(j),Object.keys(j).length===0},w=async j=>{if(j.preventDefault(),!v()){n({title:"ข้อมูลไม่ครบถ้วน",description:"กรุณาตรวจสอบข้อมูลที่กรอกและลองอีกครั้ง",variant:"destructive"});return}a(!0);try{let T={...o};if(u){f(!0);const{data:W,error:C}=await vn(u);if(C)throw new Error(`ไม่สามารถอัปโหลดรูปหน้าปกได้: ${C.message}`);T.thumbnail_url=W.publicUrl,f(!1)}const{data:M,error:B}=await mw(T);if(B)throw B;n({title:"สร้างคอร์สสำเร็จ! 🎉",description:`คอร์ส "${o.title}" ถูกสร้างเรียบร้อยแล้ว`}),l({title:"",description:"",category:"",level:"beginner",duration_hours:0,price:0,max_students:50,is_active:!0,thumbnail_url:""}),h(null),x(null),r&&r(M),e()}catch(T){console.error("Error creating course:",T),n({title:"ไม่สามารถสร้างคอร์สได้",description:T.message,variant:"destructive"})}finally{a(!1),f(!1)}},b=j=>{const T=j.target.files[0];if(!T)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(T.type)){n({title:"ไฟล์ไม่ถูกต้อง",description:"กรุณาเลือกไฟล์รูปภาพ (JPG, PNG, WebP เท่านั้น)",variant:"destructive"});return}if(T.size>5*1024*1024){n({title:"ไฟล์ใหญ่เกินไป",description:"ขนาดไฟล์ต้องไม่เกิน 5MB",variant:"destructive"});return}h(T);const B=new FileReader;B.onload=W=>{x(W.target.result)},B.readAsDataURL(T)},_=()=>{h(null),x(null);const j=document.getElementById("cover-image");j&&(j.value="")},N=["Electronics","Civil Engineering","Energy","Software","Design","Robotics","Mechanical","Chemical","Environmental"],k=[{value:"beginner",label:"ผู้เริ่มต้น"},{value:"intermediate",label:"ระดับกลาง"},{value:"advanced",label:"ระดับสูง"}];return s?t.jsx(xe,{children:t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:t.jsxs(L.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:"bg-white shadow-2xl rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-gray-200",onClick:j=>j.stopPropagation(),children:[t.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-8 rounded-t-2xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:t.jsx(ge,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-white",children:"เพิ่มคอร์สใหม่"}),t.jsx("p",{className:"text-indigo-100 mt-1",children:"สร้างคอร์สเรียนใหม่สำหรับนักเรียน"})]})]}),t.jsx(S,{variant:"ghost",size:"icon",onClick:e,disabled:i,className:"text-white hover:bg-white/20 rounded-xl",children:t.jsx(we,{className:"w-6 h-6"})})]})}),t.jsx("div",{className:"p-8",children:t.jsxs("form",{onSubmit:w,className:"space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:t.jsx(ge,{className:"w-4 h-4 text-white"})}),"ชื่อคอร์ส *"]}),t.jsx(Z,{name:"title",value:o.title,onChange:g,placeholder:"เช่น Arduino Automation Systems",className:"bg-white border-gray-300 text-gray-800 text-lg h-12 focus:border-blue-500 focus:ring-blue-500 rounded-xl shadow-sm",error:d.title}),d.title&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),d.title]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-green-500 p-2 rounded-lg mr-3",children:t.jsx(oe,{className:"w-4 h-4 text-white"})}),"คำอธิบายคอร์ส *"]}),t.jsx("textarea",{name:"description",value:o.description,onChange:g,placeholder:`อธิบายเนื้อหาและสิ่งที่นักเรียนจะได้เรียนรู้...

สามารถเว้นบรรทัดได้โดยการกด Enter`,rows:4,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-200 text-base shadow-sm resize-none"}),d.description&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),d.description]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-6 rounded-xl border border-purple-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:t.jsx(gt,{className:"w-4 h-4 text-white"})}),"หมวดหมู่ *"]}),t.jsxs("select",{name:"category",value:o.category,onChange:g,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 h-12 shadow-sm",children:[t.jsx("option",{value:"",children:"เลือกหมวดหมู่"}),N.map(j=>t.jsx("option",{value:j,children:j},j))]}),d.category&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),d.category]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 p-6 rounded-xl border border-amber-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-amber-500 p-2 rounded-lg mr-3",children:t.jsx(ie,{className:"w-4 h-4 text-white"})}),"ระดับความยาก"]}),t.jsx("select",{name:"level",value:o.level,onChange:g,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12 shadow-sm",children:k.map(j=>t.jsx("option",{value:j.value,children:j.label},j.value))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 p-6 rounded-xl border border-cyan-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-cyan-500 p-2 rounded-lg mr-3",children:t.jsx(fe,{className:"w-4 h-4 text-white"})}),"ระยะเวลา (ชั่วโมง) *"]}),t.jsxs("div",{className:"relative",children:[t.jsx(fe,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(Z,{type:"number",name:"duration_hours",value:o.duration_hours,onChange:g,placeholder:"40",min:"0",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 rounded-xl shadow-sm text-lg"})]}),d.duration_hours&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),d.duration_hours]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 p-6 rounded-xl border border-emerald-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-emerald-500 p-2 rounded-lg mr-3",children:t.jsx(Ks,{className:"w-4 h-4 text-white"})}),"ราคา (บาท)"]}),t.jsxs("div",{className:"relative",children:[t.jsx(Ks,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(Z,{type:"number",name:"price",value:o.price,onChange:g,placeholder:"2500",min:"0",step:"0.01",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 rounded-xl shadow-sm text-lg"})]}),d.price&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),d.price]})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-rose-50 to-pink-50 p-6 rounded-xl border border-rose-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-rose-500 p-2 rounded-lg mr-3",children:t.jsx(ie,{className:"w-4 h-4 text-white"})}),"จำนวนนักเรียนสูงสุด *"]}),t.jsxs("div",{className:"relative max-w-xs",children:[t.jsx(ie,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(Z,{type:"number",name:"max_students",value:o.max_students,onChange:g,placeholder:"50",min:"1",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-rose-500 focus:ring-2 focus:ring-rose-200 rounded-xl shadow-sm text-lg"})]}),d.max_students&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),d.max_students]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 p-6 rounded-xl border border-teal-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[t.jsx("div",{className:"bg-teal-500 p-2 rounded-lg mr-3",children:t.jsx(Ue,{className:"w-4 h-4 text-white"})}),"รูปหน้าปกคอร์ส"]}),t.jsxs("div",{className:"space-y-4",children:[y&&t.jsxs("div",{className:"relative inline-block",children:[t.jsx("img",{src:y,alt:"Course cover preview",className:"w-48 h-32 object-cover rounded-xl border-2 border-gray-200 shadow-lg"}),t.jsx(S,{type:"button",variant:"ghost",size:"icon",onClick:_,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg",children:t.jsx(Re,{className:"w-4 h-4"})})]}),!y&&t.jsxs("div",{className:"border-2 border-dashed border-teal-300 rounded-xl p-8 text-center hover:border-teal-400 transition-colors bg-white/50",children:[t.jsx("input",{type:"file",id:"cover-image",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:b,className:"hidden",disabled:m}),t.jsxs("label",{htmlFor:"cover-image",className:"cursor-pointer flex flex-col items-center space-y-3",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-400 to-cyan-500 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx(Ue,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-800 font-semibold text-lg",children:"เลือกรูปหน้าปก"}),t.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"JPG, PNG, WebP ขนาดไม่เกิน 5MB"}),t.jsx("p",{className:"text-teal-600 text-xs mt-2 font-medium",children:"คลิกเพื่ออัปโหลดไฟล์"})]})]})]}),m&&t.jsxs("div",{className:"flex items-center justify-center space-x-3 bg-blue-50 p-4 rounded-xl",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),t.jsx("span",{className:"text-blue-700 font-medium",children:"กำลังอัปโหลดรูปภาพ..."})]})]})]}),t.jsxs("div",{className:"flex justify-center space-x-4 pt-8",children:[t.jsx(S,{type:"button",variant:"outline",onClick:e,disabled:i,className:"px-8 py-3 text-gray-600 border-gray-300 hover:bg-gray-50 rounded-xl font-medium text-lg h-14 min-w-[120px]",children:"ยกเลิก"}),t.jsx(S,{type:"submit",disabled:i||m,className:"px-12 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg h-14 min-w-[160px] shadow-lg hover:shadow-xl transition-all duration-200",children:i||m?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),m?"กำลังอัปโหลดรูป...":"กำลังสร้าง..."]}):t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"w-5 h-5 mr-3"}),"สร้างคอร์ส"]})})]})]})})]})})}):null},Vj=({isOpen:s,onClose:e,onSuccess:r,courseId:n})=>{const{toast:i}=ae(),[a,o]=p.useState(!1),[l,d]=p.useState(!0),[c,u]=p.useState({title:"",description:"",category:"",level:"beginner",duration_hours:0,price:0,instructor_name:"",instructor_email:"",max_students:50,is_active:!0,image_url:"",learning_outcomes:[""],tools_required:[""]}),[h,m]=p.useState({}),[f,y]=p.useState(null),[x,g]=p.useState(!1),[v,w]=p.useState(null),[b,_]=p.useState(!1);p.useEffect(()=>{s&&n&&N()},[s,n]);const N=async()=>{try{d(!0);const{data:A,error:I}=await $a(n);if(I)throw I;let O=[""],D=[""];try{A.learning_outcomes&&(O=typeof A.learning_outcomes=="string"?JSON.parse(A.learning_outcomes):A.learning_outcomes),A.tools_required&&(D=typeof A.tools_required=="string"?JSON.parse(A.tools_required):A.tools_required)}catch(q){console.warn("Error parsing course data:",q)}u({title:A.title||"",description:A.description||"",category:A.category||"",level:A.level||"beginner",duration_hours:A.duration_hours||0,price:A.price||0,instructor_name:A.instructor_name||"",instructor_email:A.instructor_email||"",max_students:A.max_students||50,is_active:A.is_active!==void 0?A.is_active:!0,image_url:A.image_url||"",learning_outcomes:O,tools_required:D}),A.image_url&&w(A.image_url)}catch(A){console.error("Error loading course:",A),i({title:"ไม่สามารถโหลดข้อมูลคอร์สได้",description:A.message,variant:"destructive"})}finally{d(!1)}},k=A=>{const{name:I,value:O,type:D}=A.target;u(q=>({...q,[I]:D==="number"?parseFloat(O)||0:O})),h[I]&&m(q=>({...q,[I]:""}))},j=()=>{u(A=>({...A,learning_outcomes:[...A.learning_outcomes,""]}))},T=A=>{u(I=>({...I,learning_outcomes:I.learning_outcomes.filter((O,D)=>D!==A)}))},M=(A,I)=>{u(O=>({...O,learning_outcomes:O.learning_outcomes.map((D,q)=>q===A?I:D)}))},B=()=>{u(A=>({...A,tools_required:[...A.tools_required,""]}))},W=A=>{u(I=>({...I,tools_required:I.tools_required.filter((O,D)=>D!==A)}))},C=(A,I)=>{u(O=>({...O,tools_required:O.tools_required.map((D,q)=>q===A?I:D)}))},z=()=>{const A={};return c.title.trim()||(A.title="กรุณาระบุชื่อคอร์ส"),c.description.trim()||(A.description="กรุณาระบุคำอธิบายคอร์ส"),c.category.trim()||(A.category="กรุณาระบุหมวดหมู่"),c.instructor_name.trim()||(A.instructor_name="กรุณาระบุชื่ออาจารย์"),c.duration_hours<=0&&(A.duration_hours="ระยะเวลาต้องมากกว่า 0 ชั่วโมง"),c.price<0&&(A.price="ราคาต้องไม่เป็นลบ"),c.max_students<=0&&(A.max_students="จำนวนนักเรียนสูงสุดต้องมากกว่า 0"),m(A),Object.keys(A).length===0},R=async A=>{if(A.preventDefault(),!z()){i({title:"ข้อมูลไม่ครบถ้วน",description:"กรุณาตรวจสอบข้อมูลที่กรอกและลองอีกครั้ง",variant:"destructive"});return}o(!0);try{let I={...c};if(f){g(!0);const{data:q,error:K}=await vn(f);if(K)throw new Error(`ไม่สามารถอัปโหลดรูปหน้าปกได้: ${K.message}`);I.image_url=q.publicUrl,g(!1)}I.learning_outcomes=I.learning_outcomes.filter(q=>q.trim()!==""),I.tools_required=I.tools_required.filter(q=>q.trim()!=="");const{data:O,error:D}=await fw(n,I);if(D)throw D;i({title:"อัปเดตคอร์สสำเร็จ! 🎉",description:`คอร์ส "${c.title}" ถูกอัปเดตเรียบร้อยแล้ว`}),r&&r(O),e()}catch(I){console.error("Error updating course:",I),i({title:"ไม่สามารถอัปเดตคอร์สได้",description:I.message,variant:"destructive"})}finally{o(!1),g(!1)}},$=A=>{const I=A.target.files[0];if(!I)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(I.type)){i({title:"ไฟล์ไม่ถูกต้อง",description:"กรุณาเลือกไฟล์รูปภาพ (JPG, PNG, WebP เท่านั้น)",variant:"destructive"});return}if(I.size>5*1024*1024){i({title:"ไฟล์ใหญ่เกินไป",description:"ขนาดไฟล์ต้องไม่เกิน 5MB",variant:"destructive"});return}y(I);const D=new FileReader;D.onload=q=>{w(q.target.result)},D.readAsDataURL(I)},P=()=>{y(null),w(c.image_url||null);const A=document.getElementById("edit-cover-image");A&&(A.value="")},U=["Electronics","Civil Engineering","Energy","Software","Design","Robotics","Mechanical","Chemical","Environmental"],G=[{value:"beginner",label:"ผู้เริ่มต้น"},{value:"intermediate",label:"ระดับกลาง"},{value:"advanced",label:"ระดับสูง"}],F=()=>{var A;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border",children:[t.jsx("h1",{className:"text-3xl font-bold text-emerald-900 mb-4",children:c.title||"ชื่อคอร์ส"}),t.jsx("p",{className:"text-emerald-800 text-lg leading-relaxed mb-6",children:c.description||"คำอธิบายคอร์ส"}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ge,{className:"w-5 h-5 text-[#667eea]"}),t.jsxs("span",{className:"text-emerald-800",children:["สอนโดย: ",c.instructor_name||"ไม่ระบุ"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(fe,{className:"w-5 h-5 text-[#667eea]"}),t.jsxs("span",{className:"text-emerald-800",children:["ระยะเวลา: ",c.duration_hours||0," ชั่วโมง"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ie,{className:"w-5 h-5 text-[#667eea]"}),t.jsx("span",{className:"text-emerald-800",children:"ผู้เรียน: 0 คน"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Le,{className:"w-5 h-5 text-[#667eea]"}),t.jsxs("span",{className:"text-emerald-800",children:["ระดับ: ",c.level==="beginner"?"ผู้เริ่มต้น":c.level==="intermediate"?"ระดับกลาง":c.level==="advanced"?"ระดับสูง":"ไม่ระบุ"]})]})]}),v&&t.jsx("img",{className:"w-full h-64 object-cover rounded-lg mb-6 shadow-md",alt:c.title,src:v})]}),t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h2",{className:"text-3xl font-bold text-emerald-900",children:["฿",((A=c.price)==null?void 0:A.toLocaleString())||"0"]}),t.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((I,O)=>t.jsx(Se,{className:"w-5 h-5 text-yellow-400 fill-current"},O)),t.jsx("span",{className:"ml-2 text-sm text-emerald-800",children:"(5.0)"})]})]}),t.jsx("p",{className:"text-sm text-emerald-700 mb-6",children:"ราคาพิเศษสำหรับนักเรียน Login Learning"}),t.jsx(S,{size:"lg",className:"w-full bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-white text-lg py-3",disabled:!0,children:"ลงทะเบียนเรียนเลย"}),t.jsx("p",{className:"text-xs text-slate-500 mt-4 text-center",children:"รับประกันความพึงพอใจ คืนเงินภายใน 7 วัน"})]}),t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border",children:[t.jsx("h3",{className:"text-xl font-semibold text-emerald-900 mb-3",children:"สิ่งที่คุณจะได้รับ"}),t.jsx("ul",{className:"space-y-2 text-emerald-800 text-sm list-disc list-inside",children:c.learning_outcomes&&c.learning_outcomes.length>0?c.learning_outcomes.filter(I=>I.trim()!=="").map((I,O)=>t.jsx("li",{children:I},O)):t.jsx("li",{className:"text-gray-400",children:"ยังไม่ได้ระบุสิ่งที่จะได้รับ"})})]}),c.tools_required&&c.tools_required.some(I=>I.trim()!=="")&&t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border",children:[t.jsx("h3",{className:"text-xl font-semibold text-emerald-900 mb-3",children:"เครื่องมือที่ใช้"}),t.jsx("ul",{className:"space-y-2 text-emerald-800 text-sm list-disc list-inside",children:c.tools_required.filter(I=>I.trim()!=="").map((I,O)=>t.jsx("li",{children:I},O))})]})]})};return s?t.jsx(xe,{children:t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:t.jsxs(L.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:`bg-white shadow-2xl rounded-2xl w-full ${b?"max-w-7xl":"max-w-4xl"} max-h-[90vh] overflow-hidden border border-gray-200`,onClick:A=>A.stopPropagation(),children:[t.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 p-8 rounded-t-2xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:t.jsx(Ke,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-white",children:"แก้ไขคอร์ส"}),t.jsx("p",{className:"text-emerald-100 mt-1",children:"อัปเดตข้อมูลและรายละเอียดคอร์ส"})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs(S,{variant:"ghost",onClick:()=>_(!b),className:"text-white hover:bg-white/20 rounded-xl flex items-center space-x-2",children:[t.jsx(Ce,{className:"w-5 h-5"}),t.jsx("span",{children:b?"ซ่อนตัวอย่าง":"แสดงตัวอย่าง"})]}),t.jsx(S,{variant:"ghost",size:"icon",onClick:e,disabled:a,className:"text-white hover:bg-white/20 rounded-xl",children:t.jsx(we,{className:"w-6 h-6"})})]})]})}),t.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)]",children:l?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"กำลังโหลดข้อมูลคอร์ส..."})]}):t.jsxs("div",{className:`${b?"grid grid-cols-1 lg:grid-cols-2 gap-8":"max-w-4xl mx-auto"} p-8`,children:[t.jsx("div",{className:"space-y-6",children:t.jsxs("form",{onSubmit:R,className:"space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:t.jsx(ge,{className:"w-4 h-4 text-white"})}),"ชื่อคอร์ส *"]}),t.jsx(Z,{name:"title",value:c.title,onChange:k,placeholder:"เช่น Arduino Automation Systems",className:"bg-white border-gray-300 text-gray-800 text-lg h-12 focus:border-blue-500 focus:ring-blue-500 rounded-xl shadow-sm",error:h.title}),h.title&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),h.title]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-green-500 p-2 rounded-lg mr-3",children:t.jsx(oe,{className:"w-4 h-4 text-white"})}),"คำอธิบายคอร์ส *"]}),t.jsx("textarea",{name:"description",value:c.description,onChange:k,placeholder:"อธิบายเนื้อหาและสิ่งที่นักเรียนจะได้เรียนรู้...",rows:4,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-200 text-base shadow-sm resize-none"}),h.description&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),h.description]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-6 rounded-xl border border-purple-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[t.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:t.jsx(Le,{className:"w-4 h-4 text-white"})}),"สิ่งที่จะได้รับจากคอร์ส"]}),t.jsxs("div",{className:"space-y-3",children:[c.learning_outcomes.map((A,I)=>t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Z,{value:A,onChange:O=>M(I,O.target.value),placeholder:"เช่น ความรู้และทักษะทางวิศวกรรมที่แข็งแกร่ง",className:"bg-white border-gray-300 text-gray-800 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 rounded-xl shadow-sm"}),c.learning_outcomes.length>1&&t.jsx(S,{type:"button",variant:"ghost",size:"icon",onClick:()=>T(I),className:"text-red-500 hover:text-red-600 hover:bg-red-50 rounded-xl",children:t.jsx(Re,{className:"w-4 h-4"})})]},I)),t.jsxs(S,{type:"button",variant:"outline",onClick:j,className:"w-full border-dashed border-purple-300 text-purple-600 hover:bg-purple-50 rounded-xl",children:[t.jsx(Je,{className:"w-4 h-4 mr-2"}),"เพิ่มสิ่งที่ได้รับ"]})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 p-6 rounded-xl border border-orange-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[t.jsx("div",{className:"bg-orange-500 p-2 rounded-lg mr-3",children:t.jsx(Ke,{className:"w-4 h-4 text-white"})}),"เครื่องมือที่ใช้"]}),t.jsxs("div",{className:"space-y-3",children:[c.tools_required.map((A,I)=>t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Z,{value:A,onChange:O=>C(I,O.target.value),placeholder:"เช่น Arduino IDE, Breadboard, Jumper wires",className:"bg-white border-gray-300 text-gray-800 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 rounded-xl shadow-sm"}),c.tools_required.length>1&&t.jsx(S,{type:"button",variant:"ghost",size:"icon",onClick:()=>W(I),className:"text-red-500 hover:text-red-600 hover:bg-red-50 rounded-xl",children:t.jsx(Re,{className:"w-4 h-4"})})]},I)),t.jsxs(S,{type:"button",variant:"outline",onClick:B,className:"w-full border-dashed border-orange-300 text-orange-600 hover:bg-orange-50 rounded-xl",children:[t.jsx(Je,{className:"w-4 h-4 mr-2"}),"เพิ่มเครื่องมือ"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-6 rounded-xl border border-purple-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:t.jsx(gt,{className:"w-4 h-4 text-white"})}),"หมวดหมู่ *"]}),t.jsxs("select",{name:"category",value:c.category,onChange:k,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 h-12 shadow-sm",children:[t.jsx("option",{value:"",children:"เลือกหมวดหมู่"}),U.map(A=>t.jsx("option",{value:A,children:A},A))]}),h.category&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),h.category]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 p-6 rounded-xl border border-amber-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-amber-500 p-2 rounded-lg mr-3",children:t.jsx(ie,{className:"w-4 h-4 text-white"})}),"ระดับความยาก"]}),t.jsx("select",{name:"level",value:c.level,onChange:k,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12 shadow-sm",children:G.map(A=>t.jsx("option",{value:A.value,children:A.label},A.value))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 p-6 rounded-xl border border-cyan-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-cyan-500 p-2 rounded-lg mr-3",children:t.jsx(fe,{className:"w-4 h-4 text-white"})}),"ระยะเวลา (ชั่วโมง) *"]}),t.jsxs("div",{className:"relative",children:[t.jsx(fe,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(Z,{type:"number",name:"duration_hours",value:c.duration_hours,onChange:k,placeholder:"40",min:"0",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 rounded-xl shadow-sm text-lg"})]}),h.duration_hours&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),h.duration_hours]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 p-6 rounded-xl border border-emerald-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-emerald-500 p-2 rounded-lg mr-3",children:t.jsx(Ks,{className:"w-4 h-4 text-white"})}),"ราคา (บาท)"]}),t.jsxs("div",{className:"relative",children:[t.jsx(Ks,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(Z,{type:"number",name:"price",value:c.price,onChange:k,placeholder:"2500",min:"0",step:"0.01",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 rounded-xl shadow-sm text-lg"})]}),h.price&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),h.price]})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 p-6 rounded-xl border border-indigo-200",children:[t.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[t.jsx("div",{className:"bg-indigo-500 p-2 rounded-lg mr-3",children:t.jsx(ie,{className:"w-5 h-5 text-white"})}),"ข้อมูลอาจารย์"]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"ชื่ออาจารย์ *"}),t.jsx(Z,{name:"instructor_name",value:c.instructor_name,onChange:k,placeholder:"อาจารย์สมชาย",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 rounded-xl shadow-sm"}),h.instructor_name&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),h.instructor_name]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"อีเมลอาจารย์"}),t.jsx(Z,{type:"email",name:"instructor_email",value:c.instructor_email,onChange:k,placeholder:"teacher@loginlearning.com",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 rounded-xl shadow-sm"})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-rose-50 to-pink-50 p-6 rounded-xl border border-rose-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-rose-500 p-2 rounded-lg mr-3",children:t.jsx(ie,{className:"w-4 h-4 text-white"})}),"จำนวนนักเรียนสูงสุด *"]}),t.jsxs("div",{className:"relative max-w-xs",children:[t.jsx(ie,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(Z,{type:"number",name:"max_students",value:c.max_students,onChange:k,placeholder:"50",min:"1",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-rose-500 focus:ring-2 focus:ring-rose-200 rounded-xl shadow-sm text-lg"})]}),h.max_students&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),h.max_students]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 p-6 rounded-xl border border-teal-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[t.jsx("div",{className:"bg-teal-500 p-2 rounded-lg mr-3",children:t.jsx(Ue,{className:"w-4 h-4 text-white"})}),"รูปหน้าปกคอร์ส"]}),t.jsxs("div",{className:"space-y-4",children:[v&&t.jsxs("div",{className:"relative inline-block",children:[t.jsx("img",{src:v,alt:"Course cover preview",className:"w-48 h-32 object-cover rounded-xl border-2 border-gray-200 shadow-lg"}),t.jsx(S,{type:"button",variant:"ghost",size:"icon",onClick:P,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg",children:t.jsx(Re,{className:"w-4 h-4"})})]}),!v&&t.jsxs("div",{className:"border-2 border-dashed border-teal-300 rounded-xl p-8 text-center hover:border-teal-400 transition-colors bg-white/50",children:[t.jsx("input",{type:"file",id:"edit-cover-image",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:$,className:"hidden",disabled:x}),t.jsxs("label",{htmlFor:"edit-cover-image",className:"cursor-pointer flex flex-col items-center space-y-3",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-400 to-cyan-500 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx(Ue,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-800 font-semibold text-lg",children:"เลือกรูปหน้าปก"}),t.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"JPG, PNG, WebP ขนาดไม่เกิน 5MB"}),t.jsx("p",{className:"text-teal-600 text-xs mt-2 font-medium",children:"คลิกเพื่ออัปโหลดไฟล์"})]})]})]}),v&&!f&&t.jsxs("div",{className:"text-center",children:[t.jsx("input",{type:"file",id:"edit-cover-image",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:$,className:"hidden",disabled:x}),t.jsxs("label",{htmlFor:"edit-cover-image",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-teal-300 text-teal-700 bg-white hover:bg-teal-50 rounded-lg font-medium transition-colors",children:[t.jsx(Ue,{className:"w-4 h-4 mr-2"}),"เปลี่ยนรูปภาพ"]})]}),x&&t.jsxs("div",{className:"flex items-center justify-center space-x-3 bg-blue-50 p-4 rounded-xl",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),t.jsx("span",{className:"text-blue-700 font-medium",children:"กำลังอัปโหลดรูปภาพ..."})]})]})]}),t.jsxs("div",{className:"flex justify-center space-x-4 pt-8",children:[t.jsx(S,{type:"button",variant:"outline",onClick:e,disabled:a,className:"px-8 py-3 text-gray-600 border-gray-300 hover:bg-gray-50 rounded-xl font-medium text-lg h-14 min-w-[120px]",children:"ยกเลิก"}),t.jsx(S,{type:"submit",disabled:a||x,className:"px-12 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white rounded-xl font-semibold text-lg h-14 min-w-[160px] shadow-lg hover:shadow-xl transition-all duration-200",children:a||x?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),x?"กำลังอัปโหลดรูป...":"กำลังอัปเดต..."]}):t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"w-5 h-5 mr-3"}),"อัปเดตคอร์ส"]})})]})]})}),b&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"sticky top-0 bg-white z-10 pb-4",children:[t.jsxs("h3",{className:"text-2xl font-bold text-emerald-900 flex items-center",children:[t.jsx(Ce,{className:"w-6 h-6 mr-3"}),"ตัวอย่างหน้าคอร์ส"]}),t.jsx("p",{className:"text-gray-600 text-sm",children:"ดูการเปลี่ยนแปลงแบบ Real-time"})]}),t.jsx("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 p-6 rounded-xl border-2 border-emerald-200 max-h-[calc(90vh-300px)] overflow-y-auto",children:t.jsx(F,{})})]})]})})]})})}):null},zj=()=>{const{toast:s}=Dt(),e=at(),[r,n]=p.useState(""),[i,a]=p.useState([]),[o,l]=p.useState(!0),[d,c]=p.useState(null),[u,h]=p.useState(!1),[m,f]=p.useState(!1),[y,x]=p.useState(null),g=C=>{if(!C)return"ไม่มีคำอธิบาย";const z=C.split(`
`);return z.length>1?`${z[0]}...`:z[0]},v=p.useCallback(async()=>{l(!0);const{data:C,error:z}=await gw();z?s({title:"ข้อผิดพลาดในการโหลดข้อมูล",description:z.message,variant:"destructive"}):a(C||[]),l(!1)},[s]),w=p.useCallback(async()=>{const{data:C,error:z}=await bw();!z&&C&&c(C)},[]);p.useEffect(()=>{v(),w()},[v,w]);const b=async(C,z,R)=>{const $=!R,P=$?"เปิดใช้งาน":"ปิดใช้งาน";if(!confirm(`คุณแน่ใจหรือไม่ที่จะ${P}คอร์ส "${z}"?`))return;const{error:U}=await pw(C,$);U?s({title:`ไม่สามารถ${P}คอร์สได้`,description:U.message,variant:"destructive"}):(s({title:`${P}คอร์สสำเร็จ`,description:`คอร์ส "${z}" ถูก${P}แล้ว`}),v(),w())},_=async(C,z,R)=>{const $=!R,P=$?"เพิ่มเป็นคอร์สแนะนำ":"ยกเลิกคอร์สแนะนำ",{error:U}=await yw(C,$);U?s({title:`ไม่สามารถ${P}ได้`,description:U.message,variant:"destructive"}):(s({title:`${P}สำเร็จ`,description:`คอร์ส "${z}" ถูก${P}แล้ว`}),v(),w())},N=()=>{v(),w()},k=()=>{v(),w()},j=C=>{x(C),f(!0)},T=()=>{f(!1),x(null)},M=C=>{s({title:"ฟีเจอร์ยังไม่พร้อมใช้งาน",description:`${C} ยังอยู่ในระหว่างการพัฒนา`,variant:"info"})},B=i.filter(C=>C.title.toLowerCase().includes(r.toLowerCase())||C.category.toLowerCase().includes(r.toLowerCase())),W={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};return t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:W,className:"container mx-auto px-4 py-12",children:[t.jsxs(be,{children:[t.jsx("title",{children:"จัดการคอร์สเรียน - ผู้ดูแลระบบ Login Learning"}),t.jsx("meta",{name:"description",content:"จัดการคอร์สเรียนทั้งหมดในระบบ Login Learning"})]}),t.jsxs(L.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"flex flex-col sm:flex-row justify-between items-center mb-10",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs(S,{variant:"ghost",size:"sm",onClick:()=>e("/admin"),className:"mr-4 text-gray-600 hover:text-gray-900",children:[t.jsx(tt,{className:"w-4 h-4 mr-2"}),"ย้อนกลับ"]}),t.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-purple-900 mb-4 sm:mb-0",children:[t.jsx(qt,{className:"inline-block w-8 h-8 mr-3 text-[#667eea]"}),"จัดการคอร์สเรียน"]})]}),t.jsxs(S,{onClick:()=>h(!0),className:"bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-white-800",children:[t.jsx(Ur,{className:"w-5 h-5 mr-2"}),"เพิ่มคอร์สใหม่"]})]}),d&&t.jsxs(L.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"glass-effect p-6 rounded-xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-700 text-sm",children:"คอร์สทั้งหมด"}),t.jsx("p",{className:"text-2xl font-bold text-purple-900",children:d.totalCourses})]}),t.jsx(qt,{className:"w-8 h-8 text-[#667eea]"})]})}),t.jsx("div",{className:"glass-effect p-6 rounded-xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-700 text-sm",children:"นักเรียนทั้งหมด"}),t.jsx("p",{className:"text-2xl font-bold text-purple-900",children:d.totalEnrollments})]}),t.jsx(ie,{className:"w-8 h-8 text-green-400"})]})}),t.jsx("div",{className:"glass-effect p-6 rounded-xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-700 text-sm",children:"กำลังเรียน"}),t.jsx("p",{className:"text-2xl font-bold text-purple-900",children:d.activeEnrollments})]}),t.jsx(Ws,{className:"w-8 h-8 text-blue-400"})]})}),t.jsx("div",{className:"glass-effect p-6 rounded-xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-700 text-sm",children:"อัตราสำเร็จ"}),t.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[d.completionRate,"%"]})]}),t.jsx(Ce,{className:"w-8 h-8 text-purple-400"})]})})]}),t.jsx("div",{className:"mb-6 glass-effect p-4 rounded-xl",children:t.jsxs("div",{className:"relative",children:[t.jsx(Yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(Z,{type:"text",placeholder:"ค้นหาคอร์ส (ชื่อ, หมวดหมู่)...",value:r,onChange:C=>n(C.target.value),className:"pl-10 w-full bg-slate-200 border-slate-400 text-gray-900 focus:border-[#667eea]"})]})}),t.jsxs("div",{className:"glass-effect rounded-xl shadow-xl overflow-x-auto",children:[o?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#667eea] mx-auto mb-4"}),t.jsx("p",{className:"text-purple-700",children:"กำลังโหลดข้อมูลคอร์ส..."})]}):t.jsxs("table",{className:"w-full min-w-max text-left text-purple-800",children:[t.jsx("thead",{className:"border-b border-slate-700",children:t.jsxs("tr",{className:"bg-purple-100/30",children:[t.jsx("th",{className:"p-4",children:"ชื่อคอร์ส"}),t.jsx("th",{className:"p-4",children:"หมวดหมู่"}),t.jsx("th",{className:"p-4",children:"นักเรียน"}),t.jsx("th",{className:"p-4",children:"ระยะเวลา"}),t.jsx("th",{className:"p-4",children:"ราคา"}),t.jsx("th",{className:"p-4",children:"สถานะ"}),t.jsx("th",{className:"p-4",children:"แนะนำ"}),t.jsx("th",{className:"p-4",children:"วันที่สร้าง"}),t.jsx("th",{className:"p-4 text-center",children:"การดำเนินการ"})]})}),t.jsx("tbody",{children:B.map((C,z)=>t.jsxs(L.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:z*.05},className:"border-b border-slate-700/50 hover:bg-slate-700/20 transition-colors",children:[t.jsx("td",{className:"p-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-purple-900",children:C.title}),t.jsx("p",{className:"text-sm text-purple-700 truncate max-w-xs",children:g(C.description)})]})}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-500/30 text-blue-300",children:C.category||"ไม่ระบุ"})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(ie,{className:"w-4 h-4 mr-1 text-purple-700"}),C.enrollment_count||0]})}),t.jsxs("td",{className:"p-4",children:[C.duration_hours||0," ชั่วโมง"]}),t.jsx("td",{className:"p-4",children:C.price?`฿${C.price.toLocaleString()}`:"ฟรี"}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${C.is_active?"bg-green-500/30 text-green-300":"bg-red-500/30 text-red-300"}`,children:C.is_active?"เปิดใช้งาน":"ปิดใช้งาน"})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Se,{className:`w-4 h-4 mr-1 ${C.is_featured?"text-yellow-400 fill-current":"text-gray-400"}`}),t.jsx("span",{className:`text-xs ${C.is_featured?"text-yellow-400":"text-gray-500"}`,children:C.is_featured?"แนะนำ":"ทั่วไป"})]})}),t.jsx("td",{className:"p-4",children:new Date(C.created_at).toLocaleDateString("th-TH")}),t.jsxs("td",{className:"p-4 text-center space-x-2",children:[t.jsx(Y,{to:`/admin/courses/${C.id}/content`,children:t.jsx(S,{variant:"ghost",size:"icon",className:"text-green-400 hover:bg-green-500/20",title:"จัดการเนื้อหา",children:t.jsx(oe,{className:"w-4 h-4"})})}),t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>j(C.id),className:"text-blue-400 hover:bg-blue-500/20",title:"แก้ไขคอร์ส",children:t.jsx(ir,{className:"w-4 h-4"})}),t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>_(C.id,C.title,C.is_featured),className:C.is_featured?"text-yellow-400 hover:bg-yellow-500/20":"text-gray-400 hover:bg-gray-500/20",title:C.is_featured?"ยกเลิกคอร์สแนะนำ":"ตั้งเป็นคอร์สแนะนำ",children:t.jsx(Se,{className:`w-4 h-4 ${C.is_featured?"fill-current":""}`})}),t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>b(C.id,C.title,C.is_active),className:C.is_active?"text-orange-400 hover:bg-orange-500/20":"text-green-400 hover:bg-green-500/20",title:C.is_active?"ปิดใช้งาน":"เปิดใช้งาน",children:C.is_active?t.jsx(sp,{className:"w-4 h-4"}):t.jsx(rp,{className:"w-4 h-4"})}),!C.is_active&&t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>M(`ลบถาวรคอร์ส ${C.title}`),className:"text-red-400 hover:bg-red-500/20",title:"ลบถาวร",children:t.jsx(Re,{className:"w-4 h-4"})})]})]},C.id))})]}),!o&&B.length===0&&t.jsxs("div",{className:"text-center p-8",children:[t.jsx(Tt,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),t.jsx("p",{className:"text-purple-700 text-lg",children:"ไม่พบคอร์สเรียนที่ตรงกับการค้นหา"}),t.jsx("p",{className:"text-purple-600 text-sm mt-2",children:"ลองปรับเปลี่ยนคำค้นหาหรือเพิ่มคอร์สใหม่"})]})]}),t.jsx(Uj,{isOpen:u,onClose:()=>h(!1),onSuccess:N}),t.jsx(Vj,{isOpen:m,onClose:T,onSuccess:k,courseId:y})]})},rh=p.createContext({dragDropManager:void 0});function Be(s){return"Minified Redux error #"+s+"; visit https://redux.js.org/Errors?code="+s+" for the full message or use the non-minified dev environment for full errors. "}var Ml=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Jn=function(){return Math.random().toString(36).substring(7).split("").join(".")},$l={INIT:"@@redux/INIT"+Jn(),REPLACE:"@@redux/REPLACE"+Jn(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Jn()}};function qj(s){if(typeof s!="object"||s===null)return!1;for(var e=s;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(s)===e}function nh(s,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Be(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Be(1));return r(nh)(s,e)}if(typeof s!="function")throw new Error(Be(2));var i=s,a=e,o=[],l=o,d=!1;function c(){l===o&&(l=o.slice())}function u(){if(d)throw new Error(Be(3));return a}function h(x){if(typeof x!="function")throw new Error(Be(4));if(d)throw new Error(Be(5));var g=!0;return c(),l.push(x),function(){if(g){if(d)throw new Error(Be(6));g=!1,c();var w=l.indexOf(x);l.splice(w,1),o=null}}}function m(x){if(!qj(x))throw new Error(Be(7));if(typeof x.type>"u")throw new Error(Be(8));if(d)throw new Error(Be(9));try{d=!0,a=i(a,x)}finally{d=!1}for(var g=o=l,v=0;v<g.length;v++){var w=g[v];w()}return x}function f(x){if(typeof x!="function")throw new Error(Be(10));i=x,m({type:$l.REPLACE})}function y(){var x,g=h;return x={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Be(11));function b(){w.next&&w.next(u())}b();var _=g(b);return{unsubscribe:_}}},x[Ml]=function(){return this},x}return m({type:$l.INIT}),n={dispatch:m,subscribe:h,getState:u,replaceReducer:f},n[Ml]=y,n}function ee(s,e,...r){if(Bj()&&e===void 0)throw new Error("invariant requires an error message argument");if(!s){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;n=new Error(e.replace(/%s/g,function(){return r[i++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function Bj(){return typeof process<"u"&&process.env.NODE_ENV==="production"}function Gj(s,e,r){return e.split(".").reduce((n,i)=>n&&n[i]?n[i]:r||null,s)}function Hj(s,e){return s.filter(r=>r!==e)}function ih(s){return typeof s=="object"}function Wj(s,e){const r=new Map,n=a=>{r.set(a,r.has(a)?r.get(a)+1:1)};s.forEach(n),e.forEach(n);const i=[];return r.forEach((a,o)=>{a===1&&i.push(o)}),i}function Kj(s,e){return s.filter(r=>e.indexOf(r)>-1)}const Fa="dnd-core/INIT_COORDS",wn="dnd-core/BEGIN_DRAG",Ua="dnd-core/PUBLISH_DRAG_SOURCE",jn="dnd-core/HOVER",Nn="dnd-core/DROP",_n="dnd-core/END_DRAG";function Fl(s,e){return{type:Fa,payload:{sourceClientOffset:e||null,clientOffset:s||null}}}const Xj={type:Fa,payload:{clientOffset:null,sourceClientOffset:null}};function Jj(s){return function(r=[],n={publishSource:!0}){const{publishSource:i=!0,clientOffset:a,getSourceClientOffset:o}=n,l=s.getMonitor(),d=s.getRegistry();s.dispatch(Fl(a)),Yj(r,l,d);const c=eN(r,l);if(c==null){s.dispatch(Xj);return}let u=null;if(a){if(!o)throw new Error("getSourceClientOffset must be defined");Qj(o),u=o(c)}s.dispatch(Fl(a,u));const m=d.getSource(c).beginDrag(l,c);if(m==null)return;Zj(m),d.pinSource(c);const f=d.getSourceType(c);return{type:wn,payload:{itemType:f,item:m,sourceId:c,clientOffset:a||null,sourceClientOffset:u||null,isSourcePublic:!!i}}}}function Yj(s,e,r){ee(!e.isDragging(),"Cannot call beginDrag while dragging."),s.forEach(function(n){ee(r.getSource(n),"Expected sourceIds to be registered.")})}function Qj(s){ee(typeof s=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Zj(s){ee(ih(s),"Item must be an object.")}function eN(s,e){let r=null;for(let n=s.length-1;n>=0;n--)if(e.canDragSource(s[n])){r=s[n];break}return r}function tN(s,e,r){return e in s?Object.defineProperty(s,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[e]=r,s}function sN(s){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){tN(s,i,r[i])})}return s}function rN(s){return function(r={}){const n=s.getMonitor(),i=s.getRegistry();nN(n),oN(n).forEach((o,l)=>{const d=iN(o,l,i,n),c={type:Nn,payload:{dropResult:sN({},r,d)}};s.dispatch(c)})}}function nN(s){ee(s.isDragging(),"Cannot call drop while not dragging."),ee(!s.didDrop(),"Cannot call drop twice during one drag operation.")}function iN(s,e,r,n){const i=r.getTarget(s);let a=i?i.drop(n,s):void 0;return aN(a),typeof a>"u"&&(a=e===0?{}:n.getDropResult()),a}function aN(s){ee(typeof s>"u"||ih(s),"Drop result must either be an object or undefined.")}function oN(s){const e=s.getTargetIds().filter(s.canDropOnTarget,s);return e.reverse(),e}function lN(s){return function(){const r=s.getMonitor(),n=s.getRegistry();cN(r);const i=r.getSourceId();return i!=null&&(n.getSource(i,!0).endDrag(r,i),n.unpinSource()),{type:_n}}}function cN(s){ee(s.isDragging(),"Cannot call endDrag while not dragging.")}function Wi(s,e){return e===null?s===null:Array.isArray(s)?s.some(r=>r===e):s===e}function dN(s){return function(r,{clientOffset:n}={}){uN(r);const i=r.slice(0),a=s.getMonitor(),o=s.getRegistry(),l=a.getItemType();return mN(i,o,l),hN(i,a,o),fN(i,a,o),{type:jn,payload:{targetIds:i,clientOffset:n||null}}}}function uN(s){ee(Array.isArray(s),"Expected targetIds to be an array.")}function hN(s,e,r){ee(e.isDragging(),"Cannot call hover while not dragging."),ee(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<s.length;n++){const i=s[n];ee(s.lastIndexOf(i)===n,"Expected targetIds to be unique in the passed array.");const a=r.getTarget(i);ee(a,"Expected targetIds to be registered.")}}function mN(s,e,r){for(let n=s.length-1;n>=0;n--){const i=s[n],a=e.getTargetType(i);Wi(a,r)||s.splice(n,1)}}function fN(s,e,r){s.forEach(function(n){r.getTarget(n).hover(e,n)})}function pN(s){return function(){if(s.getMonitor().isDragging())return{type:Ua}}}function gN(s){return{beginDrag:Jj(s),publishDragSource:pN(s),hover:dN(s),drop:rN(s),endDrag:lN(s)}}class xN{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function n(a){return(...o)=>{const l=a.apply(e,o);typeof l<"u"&&r(l)}}const i=gN(this);return Object.keys(i).reduce((a,o)=>{const l=i[o];return a[o]=n(l),a},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function yN(s,e){return{x:s.x+e.x,y:s.y+e.y}}function ah(s,e){return{x:s.x-e.x,y:s.y-e.y}}function bN(s){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:n}=s;return!e||!r||!n?null:ah(yN(e,n),r)}function vN(s){const{clientOffset:e,initialClientOffset:r}=s;return!e||!r?null:ah(e,r)}const Gs=[],Va=[];Gs.__IS_NONE__=!0;Va.__IS_ALL__=!0;function wN(s,e){return s===Gs?!1:s===Va||typeof e>"u"?!0:Kj(e,s).length>0}class jN{subscribeToStateChange(e,r={}){const{handlerIds:n}=r;ee(typeof e=="function","listener must be a function."),ee(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const a=()=>{const o=this.store.getState(),l=o.stateId;try{l===i||l===i+1&&!wN(o.dirtyHandlerIds,n)||e()}finally{i=l}};return this.store.subscribe(a)}subscribeToOffsetChange(e){ee(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const i=this.store.getState().dragOffset;i!==r&&(r=i,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return ee(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(ee(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),i=this.getItemType();return Wi(n,i)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(ee(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),i=this.getItemType();return n!==i?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),a=this.getItemType();if(a&&!Wi(i,a))return!1;const o=this.getTargetIds();if(!o.length)return!1;const l=o.indexOf(e);return n?l===o.length-1:l>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return bN(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return vN(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const Ul=typeof global<"u"?global:self,oh=Ul.MutationObserver||Ul.WebKitMutationObserver;function lh(s){return function(){const r=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(r),clearInterval(n),s()}}}function NN(s){let e=1;const r=new oh(s),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const _N=typeof oh=="function"?NN:lh;class kN{enqueueTask(e){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,i=e.length-this.index;n<i;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=_N(this.flush),this.requestErrorThrow=lh(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class SN{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class CN{create(e){const r=this.freeTasks,n=r.length?r.pop():new SN(this.onError,i=>r[r.length]=i);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const ch=new kN,TN=new CN(ch.registerPendingError);function EN(s){ch.enqueueTask(TN.create(s))}const za="dnd-core/ADD_SOURCE",qa="dnd-core/ADD_TARGET",Ba="dnd-core/REMOVE_SOURCE",kn="dnd-core/REMOVE_TARGET";function PN(s){return{type:za,payload:{sourceId:s}}}function AN(s){return{type:qa,payload:{targetId:s}}}function DN(s){return{type:Ba,payload:{sourceId:s}}}function IN(s){return{type:kn,payload:{targetId:s}}}function ON(s){ee(typeof s.canDrag=="function","Expected canDrag to be a function."),ee(typeof s.beginDrag=="function","Expected beginDrag to be a function."),ee(typeof s.endDrag=="function","Expected endDrag to be a function.")}function LN(s){ee(typeof s.canDrop=="function","Expected canDrop to be a function."),ee(typeof s.hover=="function","Expected hover to be a function."),ee(typeof s.drop=="function","Expected beginDrag to be a function.")}function Ki(s,e){if(e&&Array.isArray(s)){s.forEach(r=>Ki(r,!1));return}ee(typeof s=="string"||typeof s=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var We;(function(s){s.SOURCE="SOURCE",s.TARGET="TARGET"})(We||(We={}));let RN=0;function MN(){return RN++}function $N(s){const e=MN().toString();switch(s){case We.SOURCE:return`S${e}`;case We.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${s}`)}}function Vl(s){switch(s[0]){case"S":return We.SOURCE;case"T":return We.TARGET;default:throw new Error(`Cannot parse handler ID: ${s}`)}}function zl(s,e){const r=s.entries();let n=!1;do{const{done:i,value:[,a]}=r.next();if(a===e)return!0;n=!!i}while(!n);return!1}class FN{addSource(e,r){Ki(e),ON(r);const n=this.addHandler(We.SOURCE,e,r);return this.store.dispatch(PN(n)),n}addTarget(e,r){Ki(e,!0),LN(r);const n=this.addHandler(We.TARGET,e,r);return this.store.dispatch(AN(n)),n}containsHandler(e){return zl(this.dragSources,e)||zl(this.dropTargets,e)}getSource(e,r=!1){return ee(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return ee(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return ee(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return ee(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Vl(e)===We.SOURCE}isTargetId(e){return Vl(e)===We.TARGET}removeSource(e){ee(this.getSource(e),"Expected an existing source."),this.store.dispatch(DN(e)),EN(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){ee(this.getTarget(e),"Expected an existing target."),this.store.dispatch(IN(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);ee(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){ee(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){const i=$N(e);return this.types.set(i,r),e===We.SOURCE?this.dragSources.set(i,n):e===We.TARGET&&this.dropTargets.set(i,n),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const UN=(s,e)=>s===e;function VN(s,e){return!s&&!e?!0:!s||!e?!1:s.x===e.x&&s.y===e.y}function zN(s,e,r=UN){if(s.length!==e.length)return!1;for(let n=0;n<s.length;++n)if(!r(s[n],e[n]))return!1;return!0}function qN(s=Gs,e){switch(e.type){case jn:break;case za:case qa:case kn:case Ba:return Gs;case wn:case Ua:case _n:case Nn:default:return Va}const{targetIds:r=[],prevTargetIds:n=[]}=e.payload,i=Wj(r,n);if(!(i.length>0||!zN(r,n)))return Gs;const o=n[n.length-1],l=r[r.length-1];return o!==l&&(o&&i.push(o),l&&i.push(l)),i}function BN(s,e,r){return e in s?Object.defineProperty(s,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[e]=r,s}function GN(s){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){BN(s,i,r[i])})}return s}const ql={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function HN(s=ql,e){const{payload:r}=e;switch(e.type){case Fa:case wn:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case jn:return VN(s.clientOffset,r.clientOffset)?s:GN({},s,{clientOffset:r.clientOffset});case _n:case Nn:return ql;default:return s}}function WN(s,e,r){return e in s?Object.defineProperty(s,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[e]=r,s}function as(s){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){WN(s,i,r[i])})}return s}const KN={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function XN(s=KN,e){const{payload:r}=e;switch(e.type){case wn:return as({},s,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Ua:return as({},s,{isSourcePublic:!0});case jn:return as({},s,{targetIds:r.targetIds});case kn:return s.targetIds.indexOf(r.targetId)===-1?s:as({},s,{targetIds:Hj(s.targetIds,r.targetId)});case Nn:return as({},s,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case _n:return as({},s,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return s}}function JN(s=0,e){switch(e.type){case za:case qa:return s+1;case Ba:case kn:return s-1;default:return s}}function YN(s=0){return s+1}function QN(s,e,r){return e in s?Object.defineProperty(s,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[e]=r,s}function ZN(s){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){QN(s,i,r[i])})}return s}function e1(s={},e){return{dirtyHandlerIds:qN(s.dirtyHandlerIds,{type:e.type,payload:ZN({},e.payload,{prevTargetIds:Gj(s,"dragOperation.targetIds",[])})}),dragOffset:HN(s.dragOffset,e),refCount:JN(s.refCount,e),dragOperation:XN(s.dragOperation,e),stateId:YN(s.stateId)}}function t1(s,e=void 0,r={},n=!1){const i=s1(n),a=new jN(i,new FN(i)),o=new xN(i,a),l=s(o,e,r);return o.receiveBackend(l),o}function s1(s){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return nh(e1,s&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function r1(s,e){if(s==null)return{};var r=n1(s,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(s,n)&&(r[n]=s[n])}return r}function n1(s,e){if(s==null)return{};var r={},n=Object.keys(s),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=s[i]);return r}let Bl=0;const Mr=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var i1=p.memo(function(e){var{children:r}=e,n=r1(e,["children"]);const[i,a]=a1(n);return p.useEffect(()=>{if(a){const o=dh();return++Bl,()=>{--Bl===0&&(o[Mr]=null)}}},[]),t.jsx(rh.Provider,{value:i,children:r})});function a1(s){if("manager"in s)return[{dragDropManager:s.manager},!1];const e=o1(s.backend,s.context,s.options,s.debugMode),r=!s.context;return[e,r]}function o1(s,e=dh(),r,n){const i=e;return i[Mr]||(i[Mr]={dragDropManager:t1(s,e,r,n)}),i[Mr]}function dh(){return typeof global<"u"?global:window}var l1=function s(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,a;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!s(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;i--!==0;){var o=a[i];if(!s(e[o],r[o]))return!1}return!0}return e!==e&&r!==r};const c1=Zr(l1),Xt=typeof window<"u"?p.useLayoutEffect:p.useEffect;function d1(s,e,r){const[n,i]=p.useState(()=>e(s)),a=p.useCallback(()=>{const o=e(s);c1(n,o)||(i(o),r&&r())},[n,s,r]);return Xt(a),[n,a]}function u1(s,e,r){const[n,i]=d1(s,e,r);return Xt(function(){const o=s.getHandlerId();if(o!=null)return s.subscribeToStateChange(i,{handlerIds:[o]})},[s,i]),n}function uh(s,e,r){return u1(e,s||(()=>({})),()=>r.reconnect())}function hh(s,e){const r=[...e||[]];return e==null&&typeof s!="function"&&r.push(s),p.useMemo(()=>typeof s=="function"?s():s,r)}function h1(s){return p.useMemo(()=>s.hooks.dragSource(),[s])}function m1(s){return p.useMemo(()=>s.hooks.dragPreview(),[s])}let Yn=!1,Qn=!1;class f1{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){ee(!Yn,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Yn=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Yn=!1}}isDragging(){if(!this.sourceId)return!1;ee(!Qn,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Qn=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Qn=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Zn=!1;class p1{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;ee(!Zn,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Zn=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Zn=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function g1(s,e,r){const n=r.getRegistry(),i=n.addTarget(s,e);return[i,()=>n.removeTarget(i)]}function x1(s,e,r){const n=r.getRegistry(),i=n.addSource(s,e);return[i,()=>n.removeSource(i)]}function Xi(s,e,r,n){let i=r?r.call(n,s,e):void 0;if(i!==void 0)return!!i;if(s===e)return!0;if(typeof s!="object"||!s||typeof e!="object"||!e)return!1;const a=Object.keys(s),o=Object.keys(e);if(a.length!==o.length)return!1;const l=Object.prototype.hasOwnProperty.bind(e);for(let d=0;d<a.length;d++){const c=a[d];if(!l(c))return!1;const u=s[c],h=e[c];if(i=r?r.call(n,u,h,c):void 0,i===!1||i===void 0&&u!==h)return!1}return!0}function Ji(s){return s!==null&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function y1(s){if(typeof s.type=="string")return;const e=s.type.displayName||s.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function b1(s){return(e=null,r=null)=>{if(!p.isValidElement(e)){const a=e;return s(a,r),a}const n=e;return y1(n),v1(n,r?a=>s(a,r):s)}}function mh(s){const e={};return Object.keys(s).forEach(r=>{const n=s[r];if(r.endsWith("Ref"))e[r]=s[r];else{const i=b1(n);e[r]=()=>i}}),e}function Gl(s,e){typeof s=="function"?s(e):s.current=e}function v1(s,e){const r=s.ref;return ee(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?p.cloneElement(s,{ref:n=>{Gl(r,n),Gl(e,n)}}):p.cloneElement(s,{ref:e})}class w1{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Xi(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Xi(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=mh({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Ji(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Ji(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class j1{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Xi(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=mh({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Ji(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Ss(){const{dragDropManager:s}=p.useContext(rh);return ee(s!=null,"Expected drag drop context"),s}function N1(s,e){const r=Ss(),n=p.useMemo(()=>new w1(r.getBackend()),[r]);return Xt(()=>(n.dragSourceOptions=s||null,n.reconnect(),()=>n.disconnectDragSource()),[n,s]),Xt(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function _1(){const s=Ss();return p.useMemo(()=>new f1(s),[s])}class k1{beginDrag(){const e=this.spec,r=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(r):n={},n??null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){const n=this.spec,i=this.monitor,{isDragging:a}=n;return a?a(i):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,n=this.connector,{end:i}=e;i&&i(r.getItem(),r),n.reconnect()}constructor(e,r,n){this.spec=e,this.monitor=r,this.connector=n}}function S1(s,e,r){const n=p.useMemo(()=>new k1(s,e,r),[e,r]);return p.useEffect(()=>{n.spec=s},[s]),n}function C1(s){return p.useMemo(()=>{const e=s.type;return ee(e!=null,"spec.type must be defined"),e},[s])}function T1(s,e,r){const n=Ss(),i=S1(s,e,r),a=C1(s);Xt(function(){if(a!=null){const[l,d]=x1(a,i,n);return e.receiveHandlerId(l),r.receiveHandlerId(l),d}},[n,e,r,i,a])}function E1(s,e){const r=hh(s,e);ee(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=_1(),i=N1(r.options,r.previewOptions);return T1(r,n,i),[uh(r.collect,n,i),h1(i),m1(i)]}function P1(s){return p.useMemo(()=>s.hooks.dropTarget(),[s])}function A1(s){const e=Ss(),r=p.useMemo(()=>new j1(e.getBackend()),[e]);return Xt(()=>(r.dropTargetOptions=s||null,r.reconnect(),()=>r.disconnectDropTarget()),[s]),r}function D1(){const s=Ss();return p.useMemo(()=>new p1(s),[s])}function I1(s){const{accept:e}=s;return p.useMemo(()=>(ee(s.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class O1{canDrop(){const e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function L1(s,e){const r=p.useMemo(()=>new O1(s,e),[e]);return p.useEffect(()=>{r.spec=s},[s]),r}function R1(s,e,r){const n=Ss(),i=L1(s,e),a=I1(s);Xt(function(){const[l,d]=g1(a,i,n);return e.receiveHandlerId(l),r.receiveHandlerId(l),d},[n,e,i,r,a.map(o=>o.toString()).join("|")])}function M1(s,e){const r=hh(s,e),n=D1(),i=A1(r.options);return R1(r,n,i),[uh(r.collect,n,i),P1(i)]}function fh(s){let e=null;return()=>(e==null&&(e=s()),e)}function $1(s,e){return s.filter(r=>r!==e)}function F1(s,e){const r=new Set,n=a=>r.add(a);s.forEach(n),e.forEach(n);const i=[];return r.forEach(a=>i.push(a)),i}class U1{enter(e){const r=this.entered.length,n=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=F1(this.entered.filter(n),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=$1(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class V1{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const i=this.config.exposeProperties[n];i!=null&&(r[n]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const ph="__NATIVE_FILE__",gh="__NATIVE_URL__",xh="__NATIVE_TEXT__",yh="__NATIVE_HTML__",Hl=Object.freeze(Object.defineProperty({__proto__:null,FILE:ph,HTML:yh,TEXT:xh,URL:gh},Symbol.toStringTag,{value:"Module"}));function ei(s,e,r){const n=e.reduce((i,a)=>i||s.getData(a),"");return n??r}const Yi={[ph]:{exposeProperties:{files:s=>Array.prototype.slice.call(s.files),items:s=>s.items,dataTransfer:s=>s},matchesTypes:["Files"]},[yh]:{exposeProperties:{html:(s,e)=>ei(s,e,""),dataTransfer:s=>s},matchesTypes:["Html","text/html"]},[gh]:{exposeProperties:{urls:(s,e)=>ei(s,e,"").split(`
`),dataTransfer:s=>s},matchesTypes:["Url","text/uri-list"]},[xh]:{exposeProperties:{text:(s,e)=>ei(s,e,""),dataTransfer:s=>s},matchesTypes:["Text","text/plain"]}};function z1(s,e){const r=Yi[s];if(!r)throw new Error(`native type ${s} has no configuration`);const n=new V1(r);return n.loadDataTransfer(e),n}function ti(s){if(!s)return null;const e=Array.prototype.slice.call(s.types||[]);return Object.keys(Yi).filter(r=>{const n=Yi[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const q1=fh(()=>/firefox/i.test(navigator.userAgent)),bh=fh(()=>!!window.safari);class Wl{interpolate(e){const{xs:r,ys:n,c1s:i,c2s:a,c3s:o}=this;let l=r.length-1;if(e===r[l])return n[l];let d=0,c=o.length-1,u;for(;d<=c;){u=Math.floor(.5*(d+c));const f=r[u];if(f<e)d=u+1;else if(f>e)c=u-1;else return n[u]}l=Math.max(0,c);const h=e-r[l],m=h*h;return n[l]+i[l]*h+a[l]*m+o[l]*h*m}constructor(e,r){const{length:n}=e,i=[];for(let f=0;f<n;f++)i.push(f);i.sort((f,y)=>e[f]<e[y]?-1:1);const a=[],o=[];let l,d;for(let f=0;f<n-1;f++)l=e[f+1]-e[f],d=r[f+1]-r[f],a.push(l),o.push(d/l);const c=[o[0]];for(let f=0;f<a.length-1;f++){const y=o[f],x=o[f+1];if(y*x<=0)c.push(0);else{l=a[f];const g=a[f+1],v=l+g;c.push(3*v/((v+g)/y+(v+l)/x))}}c.push(o[o.length-1]);const u=[],h=[];let m;for(let f=0;f<c.length-1;f++){m=o[f];const y=c[f],x=1/a[f],g=y+c[f+1]-m-m;u.push((m-y-g)*x),h.push(g*x*x)}this.xs=e,this.ys=r,this.c1s=c,this.c2s=u,this.c3s=h}}const B1=1;function vh(s){const e=s.nodeType===B1?s:s.parentElement;if(!e)return null;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function Tr(s){return{x:s.clientX,y:s.clientY}}function G1(s){var e;return s.nodeName==="IMG"&&(q1()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(s)))}function H1(s,e,r,n){let i=s?e.width:r,a=s?e.height:n;return bh()&&s&&(a/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:a}}function W1(s,e,r,n,i){const a=G1(e),l=vh(a?s:e),d={x:r.x-l.x,y:r.y-l.y},{offsetWidth:c,offsetHeight:u}=s,{anchorX:h,anchorY:m}=n,{dragPreviewWidth:f,dragPreviewHeight:y}=H1(a,e,c,u),x=()=>{let k=new Wl([0,.5,1],[d.y,d.y/u*y,d.y+y-u]).interpolate(m);return bh()&&a&&(k+=(window.devicePixelRatio-1)*y),k},g=()=>new Wl([0,.5,1],[d.x,d.x/c*f,d.x+f-c]).interpolate(h),{offsetX:v,offsetY:w}=i,b=v===0||v,_=w===0||w;return{x:b?v:g(),y:_?w:x()}}class K1{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}}function X1(s,e,r){return e in s?Object.defineProperty(s,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[e]=r,s}function Kl(s){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){X1(s,i,r[i])})}return s}class J1{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);const i=o=>this.handleDragStart(o,e),a=o=>this.handleSelectStart(o);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",i),r.addEventListener("selectstart",a),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",i),r.removeEventListener("selectstart",a),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const n=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),a=o=>this.handleDrop(o,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",i),r.addEventListener("drop",a),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",i),r.removeEventListener("drop",a)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return Kl({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return Kl({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(Hl).some(r=>Hl[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=z1(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const a=this.sourceNodes.get(i);return a&&vh(a)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:a}=this;this.dragStartSourceIds=null;const o=Tr(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:l}=i,d=ti(l);if(this.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){const u=this.monitor.getSourceId(),h=this.sourceNodes.get(u),m=this.sourcePreviewNodes.get(u)||h;if(m){const{anchorX:f,anchorY:y,offsetX:x,offsetY:g}=this.getCurrentSourcePreviewNodeOptions(),b=W1(h,m,o,{anchorX:f,anchorY:y},{offsetX:x,offsetY:g});l.setDragImage(m,b.x,b.y)}}try{l==null||l.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:c}=this.getCurrentSourcePreviewNodeOptions();c?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(d)this.beginDragNativeItem(d);else{if(l&&!l.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var a;(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:l}=i,d=ti(l);d&&this.beginDragNativeItem(d,l)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:a}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,a.length>0&&this.actions.hover(a,{clientOffset:Tr(i)}),a.some(l=>this.monitor.canDropOnTarget(l))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var a;(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:a}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=Tr(i),this.scheduleHover(a),(a||[]).some(l=>this.monitor.canDropOnTarget(l))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var a;i.preventDefault(),(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}else ti(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:a}=this;this.dropTargetIds=[],this.actions.hover(a,{clientOffset:Tr(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const a=i.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(i.preventDefault(),a.dragDrop()))},this.options=new K1(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new U1(this.isNodeInDocument)}}const Y1=function(e,r,n){return new J1(e,r,n)},Q1=async s=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n,error:i}=await E.from("course_content").insert([{...s}]).select().single();if(i)throw i;return{data:n,error:null}}catch(e){return console.error("Error creating content:",e),{data:null,error:e}}},Z1=async(s,e)=>{try{const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:i,error:a}=await E.from("course_content").update({...e}).eq("id",s).select().single();if(a)throw a;return{data:i,error:null}}catch(r){return console.error("Error updating content:",r),{data:null,error:r}}},e2=async s=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n}=await E.from("quizzes").select("id").eq("content_id",s),{data:i}=await E.from("assignments").select("id").eq("content_id",s);if(n&&n.length>0){for(const o of n)await E.from("quiz_attempts").delete().eq("quiz_id",o.id);await E.from("quizzes").delete().eq("content_id",s)}if(i&&i.length>0){for(const o of i)await E.from("assignment_submissions").delete().eq("assignment_id",o.id);await E.from("assignments").delete().eq("content_id",s)}await E.from("video_progress").delete().eq("content_id",s);const{error:a}=await E.from("course_content").delete().eq("id",s);if(a)throw a;return{error:null}}catch(e){return console.error("Error deleting content:",e),{error:e}}},t2=async(s,e)=>{try{const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");const i=e.map((l,d)=>E.from("course_content").update({order_index:d+1,updated_at:new Date().toISOString()}).eq("id",l.id)),o=(await Promise.all(i)).filter(l=>l.error);if(o.length>0)throw o[0].error;return{error:null}}catch(r){return console.error("Error reordering content:",r),{error:r}}},s2=({contentId:s,existingFiles:e=[],onFilesChange:r,maxFiles:n=10,maxFileSize:i=50*1024*1024,allowedTypes:a=["pdf","doc","docx","ppt","pptx","xls","xlsx","jpg","jpeg","png","gif","mp4","mp3","zip","rar","txt"],uploadMode:o="admin",className:l=""})=>{const{toast:d}=ae(),c=p.useRef(null),[u,h]=p.useState(e),[m,f]=p.useState(!1),[y,x]=p.useState(!1),g=C=>{const z=C==null?void 0:C.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(z)?t.jsx(Ue,{className:"w-5 h-5 text-blue-500"}):["mp4","avi","mov","wmv","flv"].includes(z)?t.jsx(ca,{className:"w-5 h-5 text-purple-500"}):["zip","rar","7z","tar","gz"].includes(z)?t.jsx(qc,{className:"w-5 h-5 text-orange-500"}):["pdf"].includes(z)?t.jsx(oe,{className:"w-5 h-5 text-red-500"}):["doc","docx"].includes(z)?t.jsx(oe,{className:"w-5 h-5 text-blue-600"}):["ppt","pptx"].includes(z)?t.jsx(oe,{className:"w-5 h-5 text-orange-600"}):["xls","xlsx"].includes(z)?t.jsx(oe,{className:"w-5 h-5 text-green-600"}):t.jsx(Bc,{className:"w-5 h-5 text-slate-500"})},v=C=>{if(C===0)return"0 Bytes";const z=1024,R=["Bytes","KB","MB","GB"],$=Math.floor(Math.log(C)/Math.log(z));return parseFloat((C/Math.pow(z,$)).toFixed(2))+" "+R[$]},w=C=>{var $;const z=[];C.size>i&&z.push(`ไฟล์ ${C.name} มีขนาดใหญ่เกินกำหนด (${v(i)})`);const R=($=C.name.split(".").pop())==null?void 0:$.toLowerCase();return a.includes(R)||z.push(`ไฟล์ ${C.name} ไม่ใช่ประเภทที่อนุญาต`),{isValid:z.length===0,errors:z}},b=C=>{if(!C||C.length===0)return;const z=Array.from(C);if(u.length+z.length>n){d({title:"จำนวนไฟล์เกินกำหนด",description:`สามารถอัปโหลดได้สูงสุด ${n} ไฟล์`,variant:"destructive"});return}const R=[],$=[];if(z.forEach(P=>{var G;const U=w(P);if(U.isValid){const F=`file_${Date.now()}_${Math.floor(Math.random()*1e3)}`;R.push({id:F,file:P,name:P.name,size:P.size,type:(G=P.name.split(".").pop())==null?void 0:G.toLowerCase(),mimeType:P.type,isUploading:!1,isUploaded:!1,progress:0,url:null,path:null})}else $.push(...U.errors)}),$.length>0&&d({title:"ไฟล์บางไฟล์ไม่ถูกต้อง",description:$.join(`
`),variant:"destructive"}),R.length>0){const P=[...u,...R];h(P),r==null||r(P)}},_=C=>{C.preventDefault(),x(!1),b(C.dataTransfer.files)},N=C=>{C.preventDefault(),C.stopPropagation(),C.type==="dragenter"||C.type==="dragover"?x(!0):C.type==="dragleave"&&x(!1)},k=C=>{const z=u.filter(R=>R.id!==C);h(z),r==null||r(z)},j=async(C,z=1)=>{var R;h($=>$.map(P=>P.id===C.id?{...P,isUploading:!0,progress:0}:P));try{const $=setInterval(()=>{h(G=>G.map(F=>F.id===C.id?{...F,progress:Math.min(F.progress+10,90)}:F))},200),{data:P,error:U}=await kw(C.file,s,z);if(clearInterval($),U)throw U;return h(G=>G.map(F=>F.id===C.id?{...F,isUploading:!1,isUploaded:!0,progress:100,url:P.url,path:P.file_path,attachmentId:P.id}:F)),{success:!0,data:P}}catch($){console.error("Upload error details:",$);const P=((R=$==null?void 0:$.error)==null?void 0:R.message)||($==null?void 0:$.message)||"ไม่สามารถอัปโหลดไฟล์ได้";throw h(U=>U.map(G=>G.id===C.id?{...G,isUploading:!1,isUploaded:!1,progress:0,error:P}:G)),d({title:"ไม่สามารถอัปโหลดไฟล์ได้",description:P,variant:"destructive"}),$}},T=async()=>{if(!s){d({title:"ไม่สามารถอัปโหลดได้",description:"กรุณาบันทึกเนื้อหาก่อนเพื่อให้ได้ Content ID",variant:"destructive"});return}f(!0);const C=u.filter(z=>!z.isUploaded&&!z.isUploading);if(C.length===0){d({title:"ไม่มีไฟล์ที่ต้องอัปโหลด",description:"ไฟล์ทั้งหมดถูกอัปโหลดแล้ว"}),f(!1);return}try{const z=await Promise.allSettled(C.map((P,U)=>j(P,U+1))),R=z.filter(P=>P.status==="fulfilled").length,$=z.filter(P=>P.status==="rejected").length;R>0&&$===0?d({title:"อัปโหลดสำเร็จ ✅",description:`อัปโหลดไฟล์ ${R} ไฟล์เสร็จสิ้น`}):R>0&&$>0?d({title:"อัปโหลดเสร็จบางส่วน",description:`สำเร็จ ${R} ไฟล์, ล้มเหลว ${$} ไฟล์`,variant:"destructive"}):d({title:"อัปโหลดล้มเหลว",description:"ไม่สามารถอัปโหลดไฟล์ใดๆ ได้",variant:"destructive"}),r==null||r(u)}catch{d({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถอัปโหลดไฟล์ได้",variant:"destructive"})}finally{f(!1)}},M=C=>{if(C.url){const z=document.createElement("a");z.href=C.url,z.download=C.name,document.body.appendChild(z),z.click(),document.body.removeChild(z)}},B=u.filter(C=>!C.isUploaded),W=u.filter(C=>C.isUploaded);return t.jsxs("div",{className:`space-y-4 ${l}`,children:[t.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 transition-colors ${y?"border-blue-500 bg-blue-500/10":"border-slate-600 hover:border-slate-500"}`,onDragEnter:N,onDragLeave:N,onDragOver:N,onDrop:_,children:[t.jsx("input",{ref:c,type:"file",multiple:!0,accept:a.map(C=>`.${C}`).join(","),onChange:C=>b(C.target.files),className:"hidden"}),t.jsxs("div",{className:"text-center",children:[t.jsx(vs,{className:"w-8 h-8 text-slate-400 mx-auto mb-3"}),t.jsxs("p",{className:"text-slate-300 mb-2",children:["ลากไฟล์มาวางที่นี่ หรือ"," ",t.jsx("button",{type:"button",onClick:()=>{var C;return(C=c.current)==null?void 0:C.click()},className:"text-blue-400 hover:text-blue-300 underline",children:"เลือกไฟล์"})]}),t.jsxs("p",{className:"text-xs text-slate-500",children:["ไฟล์ที่รองรับ: ",a.join(", ")," | ขนาดสูงสุด: ",v(i)," | จำนวนสูงสุด: ",n," ไฟล์"]})]})]}),u.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h4",{className:"text-sm font-medium text-slate-300",children:["ไฟล์ที่เลือก (",u.length,"/",n,")"]}),B.length>0&&t.jsx(S,{size:"sm",onClick:T,disabled:m,className:"bg-blue-500 hover:bg-blue-600",children:m?t.jsxs(t.Fragment,{children:[t.jsx(rt,{className:"w-4 h-4 mr-2 animate-spin"}),"กำลังอัปโหลด..."]}):t.jsxs(t.Fragment,{children:[t.jsx(vs,{className:"w-4 h-4 mr-2"}),"อัปโหลดทั้งหมด"]})})]}),t.jsx("div",{className:"grid gap-2",children:t.jsx(xe,{children:u.map(C=>t.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center space-x-3 p-3 bg-slate-700/30 rounded-lg border border-slate-600",children:[t.jsx("div",{className:"flex-shrink-0",children:g(C.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("p",{className:"text-sm font-medium text-white truncate",children:C.name}),C.isUploaded&&t.jsx(ve,{className:"w-4 h-4 text-green-400"})]}),t.jsx("p",{className:"text-xs text-slate-400",children:v(C.size)}),C.isUploading&&t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"w-full bg-slate-600 rounded-full h-1",children:t.jsx("div",{className:"bg-blue-500 h-1 rounded-full transition-all duration-300",style:{width:`${C.progress}%`}})}),t.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[C.progress,"%"]})]}),C.error&&t.jsx("div",{className:"mt-2 p-2 bg-red-500/20 border border-red-500/30 rounded text-xs",children:t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx(ne,{className:"w-3 h-3 text-red-400 mt-0.5 flex-shrink-0"}),t.jsx("div",{className:"flex-1",children:t.jsx("p",{className:"text-red-400",children:C.error})})]})})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[C.isUploaded&&t.jsxs(t.Fragment,{children:[t.jsx(S,{size:"sm",variant:"ghost",onClick:()=>M(C),title:"ดาวน์โหลด",children:t.jsx(kt,{className:"w-4 h-4"})}),C.type&&["jpg","jpeg","png","gif","pdf"].includes(C.type)&&t.jsx(S,{size:"sm",variant:"ghost",title:"ดูตัวอย่าง",children:t.jsx(Ce,{className:"w-4 h-4"})})]}),t.jsx(S,{size:"sm",variant:"ghost",onClick:()=>k(C.id),className:"text-red-400 hover:text-red-300",title:"ลบ",children:t.jsx(Re,{className:"w-4 h-4"})})]})]},C.id))})})]}),u.length>0&&t.jsxs("div",{className:"text-xs text-slate-500 text-center",children:[W.length>0&&t.jsxs("span",{className:"text-green-400",children:["อัปโหลดแล้ว ",W.length," ไฟล์"]}),B.length>0&&W.length>0&&t.jsx("span",{className:"mx-2",children:"•"}),B.length>0&&t.jsxs("span",{className:"text-yellow-400",children:["รออัปโหลด ",B.length," ไฟล์"]})]})]})},r2=({mode:s,content:e,onSave:r,onClose:n})=>{const{toast:i}=ae(),[a,o]=p.useState({title:(e==null?void 0:e.title)||"",content_type:(e==null?void 0:e.content_type)||"video",content:(e==null?void 0:e.content)||"",video_url:(e==null?void 0:e.video_url)||"",duration_minutes:(e==null?void 0:e.duration_minutes)||0,order_index:(e==null?void 0:e.order_index)||0,is_preview:(e==null?void 0:e.is_preview)||!1,completion_requirement:(e==null?void 0:e.completion_requirement)||"full_watch",min_watch_time:(e==null?void 0:e.min_watch_time)||60,allow_manual_completion:(e==null?void 0:e.allow_manual_completion)!==!1,requires_previous_completion:(e==null?void 0:e.requires_previous_completion)!==!1,lock_enabled:(e==null?void 0:e.lock_enabled)!==!1,lock_message:(e==null?void 0:e.lock_message)||"คุณต้องทำเนื้อหาก่อนหน้าให้เสร็จก่อน"}),[l,d]=p.useState(!1),[c,u]=p.useState([]),[h,m]=p.useState((e==null?void 0:e.id)||null),[f,y]=p.useState(!1),x=[{value:"video",label:"วิดีโอ",icon:ca,color:"blue"},{value:"lesson",label:"บทเรียน",icon:ge,color:"green"},{value:"document",label:"เอกสาร",icon:Ir,color:"orange"},{value:"quiz",label:"แบบทดสอบ",icon:oe,color:"yellow"},{value:"assignment",label:"การบ้าน",icon:oe,color:"purple"}];p.useEffect(()=>{(async()=>{if(h){y(!0);try{console.log("Loading attachments for content:",h);const{data:b,error:_}=await Ku(h);if(_){console.error("Error loading attachments:",_),i({title:"ไม่สามารถโหลดไฟล์แนบได้",description:"มีข้อผิดพลาดในการโหลดไฟล์แนบที่มีอยู่",variant:"destructive"});return}console.log("Loaded attachments:",b);const N=b.map(k=>({id:k.id,name:k.original_filename||k.filename,size:k.file_size,type:k.file_extension,mimeType:k.mime_type,isUploading:!1,isUploaded:!0,progress:100,url:k.file_url,path:k.file_path,attachmentId:k.id}));u(N),console.log("Set attached files:",N)}catch(b){console.error("Error in loadAttachments:",b)}finally{y(!1)}}})()},[h,i]);const g=async w=>{if(w.preventDefault(),!a.title.trim()){i({title:"ข้อมูลไม่ครบถ้วน",description:"กรุณากรอกชื่อเนื้อหา",variant:"destructive"});return}d(!0);try{const b=await r(a);s==="create"&&(b!=null&&b.id)&&m(b.id);let _=`${s==="create"?"สร้าง":"แก้ไข"}เนื้อหาเรียบร้อยแล้ว`;if((a.lock_enabled||a.requires_previous_completion)&&(_+=`
🔒 การตั้งค่าล็อคเนื้อหาได้รับการบันทึกแล้ว`),i({title:"บันทึกสำเร็จ",description:_}),s==="create"&&(b!=null&&b.id)&&c.length>0){i({title:"สามารถอัปโหลดไฟล์แล้ว",description:"คุณสามารถอัปโหลดไฟล์แนบได้แล้ว"});return}n()}catch(b){console.error("Error saving content:",b),i({title:"เกิดข้อผิดพลาด",description:b.message||"ไม่สามารถบันทึกข้อมูลได้",variant:"destructive"})}finally{d(!1)}},v=(w,b)=>{o(_=>({..._,[w]:b}))};return t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:n,children:t.jsxs(L.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:w=>w.stopPropagation(),children:[t.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6 rounded-t-xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:t.jsx(ge,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:s==="create"?"สร้างเนื้อหาใหม่":"แก้ไขเนื้อหา"}),t.jsx("p",{className:"text-indigo-100 mt-1",children:"จัดการเนื้อหาในคอร์ส"})]})]}),t.jsx(S,{variant:"ghost",size:"icon",onClick:n,className:"text-white hover:bg-white/20 rounded-lg",children:t.jsx(we,{className:"w-6 h-6"})})]})}),t.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"ชื่อเนื้อหา *"}),t.jsx("input",{type:"text",value:a.title,onChange:w=>v("title",w.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-lg",placeholder:"เช่น การใช้ React Hooks",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"ประเภทเนื้อหา"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:x.map(w=>{const b=w.icon,_=a.content_type===w.value;return t.jsxs("button",{type:"button",onClick:()=>v("content_type",w.value),className:`p-3 rounded-lg border-2 transition-all ${_?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 bg-white hover:border-gray-300 text-gray-600"}`,children:[t.jsx(b,{className:`w-5 h-5 mx-auto mb-1 ${_?"text-indigo-600":"text-gray-500"}`}),t.jsx("div",{className:"text-sm font-medium",children:w.label})]},w.value)})})]}),a.content_type==="video"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"URL วิดีโอ"}),t.jsx("input",{type:"url",value:a.video_url,onChange:w=>v("video_url",w.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"https://www.youtube.com/watch?v=..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"เนื้อหา"}),t.jsx("textarea",{value:a.content,onChange:w=>v("content",w.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",rows:6,placeholder:"เขียนเนื้อหาบทเรียน หรือคำอธิบายเพิ่มเติม..."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ระยะเวลา (นาที)"}),t.jsx("input",{type:"number",value:a.duration_minutes,onChange:w=>v("duration_minutes",parseInt(w.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",min:"0",placeholder:"15"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ลำดับที่"}),t.jsx("input",{type:"number",value:a.order_index,onChange:w=>v("order_index",parseInt(w.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",min:"0",placeholder:"1"})]}),t.jsx("div",{className:"flex items-center",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",id:"is_preview",checked:a.is_preview,onChange:w=>v("is_preview",w.target.checked),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),t.jsx("label",{htmlFor:"is_preview",className:"text-sm font-medium text-gray-700",children:"เปิดให้ดูฟรี"})]})})]}),["document","assignment","lesson"].includes(a.content_type)&&t.jsxs("div",{className:"border-t pt-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[t.jsx(Ir,{className:"w-5 h-5 mr-2 text-orange-500"}),"ไฟล์แนบเอกสาร"]}),t.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-4",children:t.jsxs("p",{className:"text-sm text-orange-800",children:["💡 ",t.jsx("strong",{children:"การแนบไฟล์:"}),!h&&t.jsxs("span",{className:"text-orange-600",children:[" ","กรุณาบันทึกเนื้อหาก่อน จึงจะสามารถอัปโหลดไฟล์ได้"]}),h&&!f&&t.jsxs("span",{className:"text-green-600",children:[" ","สามารถอัปโหลดไฟล์เอกสารประกอบการเรียนได้แล้ว",c.filter(w=>w.isUploaded).length>0&&t.jsxs("span",{className:"ml-2",children:["(",c.filter(w=>w.isUploaded).length," ไฟล์)"]})]}),f&&t.jsxs("span",{className:"text-blue-600",children:[" ","กำลังโหลดไฟล์แนบ..."]})]})}),t.jsx(s2,{contentId:h,existingFiles:c,onFilesChange:u,maxFiles:5,maxFileSize:25*1024*1024,allowedTypes:["pdf","doc","docx","ppt","pptx","xls","xlsx","txt","jpg","jpeg","png","gif"],uploadMode:"admin",className:"bg-white"})]}),t.jsxs("div",{className:"border-t pt-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"การล็อคเนื้อหา"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",id:"lock_enabled",checked:a.lock_enabled,onChange:w=>v("lock_enabled",w.target.checked),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),t.jsx("label",{htmlFor:"lock_enabled",className:"text-sm font-medium text-gray-700",children:"เปิดใช้งานระบบล็อคเนื้อหา"})]}),a.lock_enabled&&t.jsxs("div",{className:"ml-7 space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",id:"requires_previous_completion",checked:a.requires_previous_completion,onChange:w=>v("requires_previous_completion",w.target.checked),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),t.jsx("label",{htmlFor:"requires_previous_completion",className:"text-sm font-medium text-gray-700",children:"ต้องทำเนื้อหาก่อนหน้าให้เสร็จก่อน"})]}),a.requires_previous_completion&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ข้อความเมื่อเนื้อหาถูกล็อค"}),t.jsx("textarea",{value:a.lock_message,onChange:w=>v("lock_message",w.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",rows:2,placeholder:"คุณต้องทำเนื้อหาก่อนหน้าให้เสร็จก่อน"})]})]}),t.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[t.jsxs("p",{className:"text-xs text-yellow-800",children:["💡 ",t.jsx("strong",{children:"คำแนะนำ:"}),!a.lock_enabled&&" ระบบล็อคถูกปิด - ผู้เรียนสามารถเข้าถึงเนื้อหานี้ได้ทันที",a.lock_enabled&&!a.requires_previous_completion&&" ระบบล็อคเปิด แต่ไม่ต้องรอเนื้อหาก่อนหน้า",a.lock_enabled&&a.requires_previous_completion&&" ผู้เรียนต้องทำเนื้อหาก่อนหน้าให้เสร็จก่อนจึงจะเข้าถึงได้"]}),t.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:["💡 ",t.jsx("strong",{children:"หมายเหตุ:"})," รันคำสั่ง SQL ใน add-lock-columns.sql เพื่อเพิ่มคอลัมน์ในฐานข้อมูลก่อนใช้งานฟีเจอร์นี้"]})]})]})]}),t.jsxs("div",{className:"border-t pt-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"เงื่อนไขการผ่านเนื้อหา"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เงื่อนไขการผ่าน"}),t.jsxs("select",{value:a.completion_requirement,onChange:w=>v("completion_requirement",w.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[t.jsx("option",{value:"manual_only",children:"ให้ผู้เรียนกดผ่านเอง"}),t.jsx("option",{value:"full_watch",children:"ดูวิดีโอให้ครบ 90%"}),t.jsx("option",{value:"time_based",children:"ดูวิดีโอครบตามเวลาที่กำหนด"}),t.jsx("option",{value:"end_reach",children:"เลื่อนไปจุดสิ้นสุดของเนื้อหา (95%)"}),t.jsx("option",{value:"any_watch",children:"ดูวิดีโอแค่บางส่วน (10%)"})]})]}),a.completion_requirement==="time_based"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เวลาขั้นต่ำที่ต้องดู (วินาที)"}),t.jsx("input",{type:"number",value:a.min_watch_time,onChange:w=>v("min_watch_time",parseInt(w.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",min:"0",placeholder:"60"}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"ระบุเป็นวินาที เช่น 120 = 2 นาที"})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",id:"allow_manual_completion",checked:a.allow_manual_completion,onChange:w=>v("allow_manual_completion",w.target.checked),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),t.jsx("label",{htmlFor:"allow_manual_completion",className:"text-sm font-medium text-gray-700",children:'อนุญาตให้ผู้เรียนกดผ่านเองได้ (แสดงปุ่ม "ทำเครื่องหมายว่าเสร็จแล้ว")'})]}),t.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:t.jsxs("p",{className:"text-xs text-blue-800",children:["💡 ",t.jsx("strong",{children:"คำแนะนำ:"}),a.completion_requirement==="manual_only"&&" ผู้เรียนต้องกดปุ่มเพื่อผ่านเนื้อหานี้",a.completion_requirement==="full_watch"&&" ผู้เรียนต้องดูวิดีโอให้ครบ 90% จึงจะผ่านอัตโนมัติ",a.completion_requirement==="time_based"&&" ผู้เรียนต้องดูวิดีโอตามเวลาที่กำหนดจึงจะผ่านอัตโนมัติ",a.completion_requirement==="end_reach"&&" ผู้เรียนต้องเลื่อนวิดีโอไปใกล้จบ (95%) จึงจะผ่านอัตโนมัติ",a.completion_requirement==="any_watch"&&" ผู้เรียนดูวิดีโอแค่ 10% ก็จะผ่านอัตโนมัติ"]})})]})]}),t.jsxs("div",{className:"flex justify-between pt-4",children:[t.jsx("div",{className:"flex space-x-3",children:t.jsx(S,{type:"button",variant:"outline",onClick:n,disabled:l,children:"ยกเลิก"})}),t.jsxs("div",{className:"flex space-x-3",children:[c.length>0&&t.jsxs("div",{className:"flex items-center text-sm text-gray-600 mr-4",children:[t.jsx(Ir,{className:"w-4 h-4 mr-1"}),t.jsxs("span",{children:[c.filter(w=>w.isUploaded).length,"/",c.length," ไฟล์"]})]}),t.jsxs(S,{type:"submit",disabled:l,className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:[t.jsx(st,{className:"w-4 h-4 mr-2"}),l?"กำลังบันทึก...":h?"บันทึกการเปลี่ยนแปลง":"บันทึกเนื้อหา"]}),h&&c.some(w=>w.isUploaded)&&t.jsx(S,{type:"button",variant:"outline",onClick:n,className:"border-green-500 text-green-600 hover:bg-green-50",children:"เสร็จสิ้น"})]})]})]})]})})},n2=({content:s,index:e,moveContent:r,onEdit:n,onDelete:i,onTogglePreview:a,onDragEnd:o})=>{const[{isDragging:l},d]=E1({type:"content",item:{id:s.id,index:e},end:()=>{o&&o()},collect:m=>({isDragging:m.isDragging()})}),[,c]=M1({accept:"content",hover:m=>{m.index!==e&&(r(m.index,e),m.index=e)}}),u=m=>{switch(m){case"lesson":return t.jsx(Ys,{className:"w-5 h-5 text-blue-500"});case"quiz":return t.jsx(Ls,{className:"w-5 h-5 text-green-500"});case"assignment":return t.jsx(Wc,{className:"w-5 h-5 text-purple-500"});default:return t.jsx(oe,{className:"w-5 h-5 text-gray-500"})}},h=m=>{switch(m){case"lesson":return"lesson";case"quiz":return"quiz";case"assignment":return"assignment";default:return"content"}};return t.jsx(L.div,{ref:m=>d(c(m)),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e*.05},className:`glass-effect p-4 rounded-xl cursor-move ${l?"opacity-50 scale-95":""} hover:shadow-lg transition-all duration-200`,children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"cursor-move text-orange-600 hover:text-orange-500",children:t.jsx(Wf,{className:"w-5 h-5"})}),t.jsx("div",{className:"text-sm font-medium text-orange-700 w-8",children:s.order_index}),t.jsx("div",{className:"flex-shrink-0",children:u(s.content_type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("h3",{className:"text-lg font-semibold text-orange-900 truncate",children:s.title}),t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:h(s.content_type)})]}),s.duration_minutes&&t.jsxs("p",{className:"text-sm text-orange-600 mt-1",children:["ระยะเวลา: ",s.duration_minutes," นาที"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>a(s),className:"text-blue-500 hover:bg-blue-50",title:"ดูตัวอย่าง",children:t.jsx(Ce,{className:"w-4 h-4"})}),t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>n(s),className:"text-green-500 hover:bg-green-50",title:"แก้ไข",children:t.jsx(Js,{className:"w-4 h-4"})}),t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>i(s.id),className:"text-red-500 hover:bg-red-50",title:"ลบ",children:t.jsx(Re,{className:"w-4 h-4"})})]})]})})},i2=()=>{const{courseId:s}=sr(),{isAdmin:e}=De(),{toast:r}=ae(),[n,i]=p.useState(null),[a,o]=p.useState([]),[l,d]=p.useState(!0),[c,u]=p.useState(!1),[h,m]=p.useState(null),[f,y]=p.useState("create"),x=p.useCallback((k,j)=>{const T=a[k],M=[...a];M.splice(k,1),M.splice(j,0,T),o(M)},[a]),g=p.useCallback(async()=>{d(!0);try{const{data:k,error:j}=await hw(s);if(j)throw j;i(k);const{data:T,error:M}=await th(s);if(M)throw M;o(T||[])}catch(k){console.error("Error loading course data:",k),r({title:"ไม่สามารถโหลดข้อมูลได้",description:k.message,variant:"destructive"})}finally{d(!1)}},[s,r]);p.useEffect(()=>{e&&g()},[e,g]);const v=p.useCallback(async()=>{const k=a.map((j,T)=>({...j,order_index:T+1}));try{const{error:j}=await t2(s,k);if(j)throw j;r({title:"เรียงลำดับใหม่แล้ว",description:"ลำดับเนื้อหาได้รับการปรับปรุงแล้ว"})}catch(j){console.error("Error reordering content:",j),r({title:"ไม่สามารถเรียงลำดับได้",description:j.message,variant:"destructive"}),g()}},[a,s,r,g]),w=()=>{m(null),y("create"),u(!0)},b=k=>{m(k),y("edit"),u(!0)},_=async k=>{if(confirm("คุณแน่ใจหรือไม่ที่จะลบเนื้อหานี้?"))try{const{error:j}=await e2(k);if(j)throw j;r({title:"ลบเนื้อหาสำเร็จ",description:"เนื้อหาได้ถูกลบออกจากระบบแล้ว"}),g()}catch(j){console.error("Error deleting content:",j),r({title:"ไม่สามารถลบเนื้อหาได้",description:j.message,variant:"destructive"})}},N=async k=>{try{let j;if(f==="create"?j=await Q1({...k,course_id:s,order_index:a.length+1}):j=await Z1(h.id,k),j.error)throw j.error;r({title:f==="create"?"สร้างเนื้อหาสำเร็จ":"อัปเดตเนื้อหาสำเร็จ",description:"เนื้อหาได้รับการบันทึกแล้ว"}),u(!1),g()}catch(j){console.error("Error saving content:",j),r({title:"ไม่สามารถบันทึกได้",description:j.message,variant:"destructive"})}};return e?l?t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),t.jsx("p",{className:"text-orange-700",children:"กำลังโหลดข้อมูลเนื้อหา..."})]})}):t.jsxs("div",{className:"container mx-auto px-4 py-12",children:[t.jsx(be,{children:t.jsx("title",{children:n!=null&&n.title?`จัดการเนื้อหาคอร์ส - ${n.title} | Admin`:"จัดการเนื้อหาคอร์ส | Admin"})}),t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[t.jsx(Y,{to:"/admin/courses",children:t.jsx(S,{variant:"ghost",size:"icon",children:t.jsx(tt,{className:"w-5 h-5"})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-orange-900",children:"จัดการเนื้อหาคอร์ส"}),t.jsx("p",{className:"text-orange-700",children:n==null?void 0:n.title}),n&&t.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${n.is_active?"bg-green-500/30 text-green-700":"bg-red-500/30 text-red-700"}`,children:n.is_active?"เปิดใช้งาน":"ปิดใช้งาน"}),!n.is_active&&t.jsx("span",{className:"text-xs text-red-600 bg-red-50 px-2 py-1 rounded-full",children:"⚠️ คอร์สนี้ถูกปิดใช้งาน - สามารถแก้ไขเนื้อหาได้แต่ผู้ใช้ทั่วไปจะไม่เห็น"})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"text-sm text-orange-700",children:["เนื้อหาทั้งหมด: ",a.length," รายการ"]}),t.jsxs(S,{onClick:w,className:"bg-blue-500 hover:bg-blue-600",children:[t.jsx(Je,{className:"w-4 h-4 mr-2"}),"เพิ่มเนื้อหาใหม่"]})]})]}),t.jsx(i1,{backend:Y1,children:t.jsx("div",{className:"space-y-4",children:a.length===0?t.jsxs("div",{className:"glass-effect p-12 rounded-xl text-center",children:[t.jsx(oe,{className:"w-16 h-16 text-orange-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-orange-900 mb-2",children:"ยังไม่มีเนื้อหา"}),t.jsx("p",{className:"text-orange-700 mb-4",children:"เริ่มสร้างเนื้อหาแรกของคอร์สนี้"}),t.jsxs(S,{onClick:w,children:[t.jsx(Je,{className:"w-4 h-4 mr-2"}),"เพิ่มเนื้อหาใหม่"]})]}):a.map((k,j)=>t.jsx(n2,{content:k,index:j,moveContent:x,onEdit:b,onDelete:_,onTogglePreview:T=>{window.open(`/courses/${s}/learn`,"_blank")},onDragEnd:v},k.id))})}),t.jsx(xe,{children:c&&t.jsx(r2,{mode:f,content:h,onSave:N,onClose:()=>u(!1)})})]}):t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-orange-900 mb-2",children:"ไม่มีสิทธิ์เข้าถึง"}),t.jsx("p",{className:"text-orange-700",children:"หน้านี้สำหรับผู้ดูแลระบบเท่านั้น"})]})})},a2=({submission:s,assignment:e,onGrade:r})=>{var h,m;const n=s.score!==null,i=s.is_late,a=new Date(s.submitted_at),o=i&&e.due_date?Math.ceil((a-new Date(e.due_date))/(1e3*60*60*24)):0,l=async(f,y)=>{try{const{data:x,error:g}=await E.storage.from("course-files").download(y);if(g)throw g;const v=URL.createObjectURL(x),w=document.createElement("a");w.href=v,w.download=f,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(v)}catch(x){console.error("Download error:",x),alert("ไม่สามารถดาวน์โหลดไฟล์ได้")}},d=()=>n?"text-green-400":i?"text-red-400":"text-yellow-400",c=()=>n?t.jsx(ve,{className:"w-4 h-4"}):i?t.jsx(Tt,{className:"w-4 h-4"}):t.jsx(fe,{className:"w-4 h-4"}),u=()=>n?`ให้คะแนนแล้ว (${s.score}/${e.max_score})`:i?`ส่งช้า ${o} วัน`:"รอให้คะแนน";return t.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-6 rounded-xl hover:bg-slate-700/30 transition-colors",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mr-3",children:t.jsx(it,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:((h=s.user_profiles)==null?void 0:h.full_name)||"ไม่ระบุชื่อ"}),t.jsx("p",{className:"text-sm text-slate-400",children:((m=s.user_profiles)==null?void 0:m.email)||"ไม่ระบุอีเมล"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{className:"flex items-center text-sm text-slate-400",children:[t.jsx(Me,{className:"w-4 h-4 mr-2"}),"ส่งเมื่อ: ",a.toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),t.jsxs("div",{className:`flex items-center text-sm ${d()}`,children:[c(),t.jsx("span",{className:"ml-2",children:u()})]})]}),s.notes&&t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(fs,{className:"w-4 h-4 text-slate-400 mr-2 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-slate-300 mb-1",children:"หมายเหตุจากนักเรียน:"}),t.jsx("p",{className:"text-sm text-slate-400",children:s.notes})]})]})})}),s.file_paths&&s.file_paths.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-sm font-medium text-slate-300 mb-2",children:"ไฟล์ที่ส่ง:"}),t.jsx("div",{className:"space-y-2",children:s.file_paths.map((f,y)=>{const x=f.split("/").pop();return t.jsxs("div",{className:"flex items-center justify-between bg-slate-700/50 p-2 rounded",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(oe,{className:"w-4 h-4 text-blue-400 mr-2"}),t.jsx("span",{className:"text-sm text-slate-300",children:x})]}),t.jsx(S,{size:"sm",variant:"ghost",onClick:()=>l(x,f),className:"text-blue-400 hover:text-blue-300",children:t.jsx(kt,{className:"w-4 h-4"})})]},y)})})]}),n&&s.feedback&&t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"bg-green-500/10 border border-green-500/20 p-3 rounded-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Le,{className:"w-4 h-4 text-green-400 mr-2 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-green-300 mb-1",children:"ความคิดเห็นจากอาจารย์:"}),t.jsx("p",{className:"text-sm text-green-200",children:s.feedback})]})]})})})]}),t.jsxs("div",{className:"ml-6 flex flex-col space-y-2",children:[t.jsxs(S,{onClick:r,className:`${n?"bg-blue-500 hover:bg-blue-600":"bg-green-500 hover:bg-green-600"}`,children:[t.jsx(Le,{className:"w-4 h-4 mr-2"}),n?"แก้ไขคะแนน":"ให้คะแนน"]}),s.file_paths&&s.file_paths.length>0&&t.jsxs(S,{variant:"outline",size:"sm",onClick:()=>{s.file_paths.forEach(f=>{const y=f.split("/").pop();l(y,f)})},children:[t.jsx(kt,{className:"w-4 h-4 mr-2"}),"ดาวน์โหลดทั้งหมด"]})]})]}),n&&t.jsx("div",{className:"mt-4 pt-4 border-t border-slate-600",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Le,{className:"w-5 h-5 text-yellow-400 mr-2"}),t.jsx("span",{className:"text-sm text-slate-400",children:"คะแนน:"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-2xl font-bold text-white mr-1",children:s.score}),t.jsxs("span",{className:"text-lg text-slate-400",children:["/ ",e.max_score]}),t.jsxs("span",{className:"ml-2 text-sm text-slate-400",children:["(",Math.round(s.score/e.max_score*100),"%)"]})]})]})})]})},o2=({submission:s,assignment:e,onSave:r,onClose:n})=>{var y,x;const{toast:i}=ae(),[a,o]=p.useState({score:s.score||"",feedback:s.feedback||"",grading_rubric_scores:s.grading_rubric_scores||{}}),[l,d]=p.useState(!1),c=["งานดีมาก! เข้าใจเนื้อหาอย่างถ่องแท้","งานดี แต่ยังมีจุดที่ต้องปรับปรุง","เป็นการทำงานที่ดี คิดวิเคราะห์ได้ดี","งานมีคุณภาพ แต่ควรใส่ใจในรายละเอียดมากขึ้น","ควรศึกษาเพิ่มเติมและปรับปรุงในครั้งต่อไป","งานยังไม่ตรงตามที่กำหนด กรุณาทำใหม่"],u=async g=>{if(g.preventDefault(),!a.score||a.score===""){i({title:"กรุณาใส่คะแนน",variant:"destructive"});return}const v=parseFloat(a.score);if(isNaN(v)||v<0||v>e.max_score){i({title:"คะแนนไม่ถูกต้อง",description:`คะแนนต้องอยู่ระหว่าง 0-${e.max_score}`,variant:"destructive"});return}d(!0);try{await r({...a,score:v,graded_at:new Date().toISOString(),graded_by:"admin"})}catch(w){console.error("Grading error:",w)}finally{d(!1)}},h=async(g,v)=>{try{const{data:w,error:b}=await E.storage.from("course-files").download(v);if(b)throw b;const _=URL.createObjectURL(w),N=document.createElement("a");N.href=_,N.download=g,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(_)}catch(w){console.error("Download error:",w),i({title:"ไม่สามารถดาวน์โหลดไฟล์ได้",variant:"destructive"})}},m=g=>{const v=g/e.max_score*100;return v>=80?"text-green-400":v>=70?"text-yellow-400":v>=60?"text-orange-400":"text-red-400"},f=g=>{const v=g/e.max_score*100;return v>=80?"A":v>=70?"B":v>=60?"C":v>=50?"D":"F"};return t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:n,children:t.jsxs(L.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-effect rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:g=>g.stopPropagation(),children:[t.jsx("div",{className:"p-6 border-b border-white/10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:"ให้คะแนนงานมอบหมาย"}),t.jsx("p",{className:"text-slate-400 mt-1",children:e.title})]}),t.jsx(S,{variant:"ghost",size:"icon",onClick:n,children:t.jsx(we,{className:"w-5 h-5"})})]})}),t.jsxs("div",{className:"flex flex-col lg:flex-row h-full max-h-[calc(90vh-88px)]",children:[t.jsxs("div",{className:"lg:w-1/2 p-6 border-r border-white/10 overflow-y-auto",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mr-3",children:t.jsx(it,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:((y=s.user_profiles)==null?void 0:y.full_name)||"ไม่ระบุชื่อ"}),t.jsx("p",{className:"text-sm text-slate-400",children:(x=s.user_profiles)==null?void 0:x.email})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[t.jsxs("div",{className:"flex items-center text-sm text-slate-400",children:[t.jsx(Me,{className:"w-4 h-4 mr-2"}),"ส่งเมื่อ: ",new Date(s.submitted_at).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),s.is_late&&t.jsxs("div",{className:"flex items-center text-sm text-red-400",children:[t.jsx(Tt,{className:"w-4 h-4 mr-2"}),"ส่งช้า"]})]})]}),s.notes&&t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"หมายเหตุจากนักเรียน:"}),t.jsx("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:t.jsx("p",{className:"text-sm text-slate-300",children:s.notes})})]}),s.file_paths&&s.file_paths.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"ไฟล์ที่ส่ง:"}),t.jsx("div",{className:"space-y-2",children:s.file_paths.map((g,v)=>{const w=g.split("/").pop();return t.jsxs("div",{className:"flex items-center justify-between bg-slate-700/50 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(oe,{className:"w-4 h-4 text-blue-400 mr-2"}),t.jsx("span",{className:"text-sm text-slate-300",children:w})]}),t.jsx(S,{size:"sm",variant:"ghost",onClick:()=>h(w,g),className:"text-blue-400 hover:text-blue-300",children:t.jsx(kt,{className:"w-4 h-4"})})]},v)})})]}),t.jsxs("div",{className:"bg-slate-700/30 p-4 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"รายละเอียดงาน:"}),t.jsx("p",{className:"text-sm text-slate-400 mb-3",children:e.instructions}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-slate-400",children:"คะแนนเต็ม:"}),t.jsxs("span",{className:"text-white font-semibold",children:[e.max_score," คะแนน"]})]})]})]}),t.jsx("div",{className:"lg:w-1/2 p-6 overflow-y-auto",children:t.jsxs("form",{onSubmit:u,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"คะแนน *"}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx("input",{type:"number",min:"0",max:e.max_score,step:"0.5",value:a.score,onChange:g=>o(v=>({...v,score:g.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white text-center text-xl font-bold",placeholder:"0",required:!0})}),t.jsxs("div",{className:"text-xl text-slate-400",children:["/ ",e.max_score]}),a.score&&t.jsx("div",{className:`text-lg font-bold ${m(parseFloat(a.score))}`,children:f(parseFloat(a.score))})]}),a.score&&t.jsx("div",{className:"mt-2 text-center",children:t.jsxs("span",{className:`text-sm ${m(parseFloat(a.score))}`,children:[Math.round(parseFloat(a.score)/e.max_score*100),"%"]})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"คะแนนด่วน:"}),t.jsx("div",{className:"grid grid-cols-4 gap-2",children:[25,50,75,100].map(g=>{const v=Math.round(g/100*e.max_score);return t.jsxs(S,{type:"button",variant:"outline",size:"sm",onClick:()=>o(w=>({...w,score:v.toString()})),className:"text-xs",children:[g,"%"]},g)})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"ความคิดเห็น/คำแนะนำ"}),t.jsx("textarea",{value:a.feedback,onChange:g=>o(v=>({...v,feedback:g.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:6,placeholder:"ให้คำแนะนำและความคิดเห็นเกี่ยวกับงานของนักเรียน..."})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"ความคิดเห็นด่วน:"}),t.jsx("div",{className:"space-y-2",children:c.map((g,v)=>t.jsx("button",{type:"button",onClick:()=>o(w=>({...w,feedback:w.feedback?`${w.feedback}

${g}`:g})),className:"w-full text-left p-2 text-xs bg-slate-700/50 hover:bg-slate-700 rounded text-slate-300 hover:text-white transition-colors",children:g},v))})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-white/10",children:[t.jsx(S,{type:"button",variant:"outline",onClick:n,children:"ยกเลิก"}),t.jsx(S,{type:"submit",className:"bg-green-500 hover:bg-green-600",disabled:l,children:l?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"กำลังบันทึก..."]}):t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"w-4 h-4 mr-2"}),"บันทึกคะแนน"]})})]})]})})]})]})})},l2=()=>{const{assignmentId:s}=sr(),{toast:e}=ae(),[r,n]=p.useState(null),[i,a]=p.useState([]),[o,l]=p.useState(!0),[d,c]=p.useState(""),[u,h]=p.useState("all"),[m,f]=p.useState(null),[y,x]=p.useState(!1),g=p.useCallback(async()=>{l(!0);try{const{data:N,error:k}=await hj(s);if(k)throw k;n(N);const{data:j,error:T}=await mj(s);if(T)throw T;a(j||[])}catch(N){e({title:"ข้อผิดพลาดในการโหลดข้อมูล",description:N.message,variant:"destructive"})}finally{l(!1)}},[s,e]);p.useEffect(()=>{g()},[g]);const v=N=>{f(N),x(!0)},w=async N=>{try{const{error:k}=await fj(m.id,N);if(k)throw k;e({title:"บันทึกคะแนนสำเร็จ",description:`ให้คะแนน ${N.score}/${r.max_score} คะแนน`}),g(),x(!1),f(null)}catch(k){e({title:"ไม่สามารถบันทึกคะแนนได้",description:k.message,variant:"destructive"})}},b=i.filter(N=>{var T,M;const k=((M=(T=N.user_profiles)==null?void 0:T.full_name)==null?void 0:M.toLowerCase().includes(d.toLowerCase()))||!1,j=u==="all"||u==="graded"&&N.score!==null||u==="ungraded"&&N.score===null||u==="late"&&N.is_late;return k&&j}),_={total:i.length,graded:i.filter(N=>N.score!==null).length,ungraded:i.filter(N=>N.score===null).length,average:i.length>0&&Math.round(i.filter(N=>N.score!==null).reduce((N,k)=>N+(k.score||0),0)/i.filter(N=>N.score!==null).length)||0};return o?t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"flex items-center justify-center h-64",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),t.jsx("span",{className:"ml-3 text-slate-400",children:"กำลังโหลดข้อมูล..."})]})}):t.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto px-4 py-12",children:[t.jsx(be,{children:t.jsx("title",{children:"ให้คะแนนงานมอบหมาย - ผู้ดูแลระบบ Login Learning"})}),t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx(Y,{to:"/admin/courses",className:"text-slate-400 hover:text-white transition-colors mr-4",children:t.jsx(tt,{className:"w-5 h-5"})}),t.jsx("h1",{className:"text-2xl font-bold text-white",children:"ให้คะแนนงานมอบหมาย"})]}),r&&t.jsx("div",{className:"glass-effect p-6 rounded-xl",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:r.title}),t.jsx("p",{className:"text-slate-400 mb-4",children:r.description}),t.jsxs("div",{className:"flex items-center space-x-6 text-sm text-slate-400",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Le,{className:"w-4 h-4 mr-1"}),"คะแนนเต็ม: ",r.max_score]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(fe,{className:"w-4 h-4 mr-1"}),"กำหนดส่ง: ",r.due_date?new Date(r.due_date).toLocaleDateString("th-TH"):"ไม่ระบุ"]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(ie,{className:"w-4 h-4 mr-1"}),"ส่งงานแล้ว: ",_.total," คน"]})]})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[t.jsx("div",{className:"glass-effect p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 text-sm",children:"งานทั้งหมด"}),t.jsx("p",{className:"text-2xl font-bold text-white",children:_.total})]}),t.jsx(oe,{className:"w-8 h-8 text-blue-400"})]})}),t.jsx("div",{className:"glass-effect p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 text-sm",children:"ให้คะแนนแล้ว"}),t.jsx("p",{className:"text-2xl font-bold text-green-400",children:_.graded})]}),t.jsx(ve,{className:"w-8 h-8 text-green-400"})]})}),t.jsx("div",{className:"glass-effect p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 text-sm",children:"รอให้คะแนน"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:_.ungraded})]}),t.jsx(ne,{className:"w-8 h-8 text-yellow-400"})]})}),t.jsx("div",{className:"glass-effect p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 text-sm",children:"คะแนนเฉลี่ย"}),t.jsx("p",{className:"text-2xl font-bold text-purple-400",children:_.average})]}),t.jsx(Le,{className:"w-8 h-8 text-purple-400"})]})})]}),t.jsx("div",{className:"glass-effect p-4 rounded-lg mb-6",children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(Yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),t.jsx(Z,{type:"text",placeholder:"ค้นหาชื่อนักเรียน...",value:d,onChange:N=>c(N.target.value),className:"pl-10 bg-slate-700/50 border-slate-600 text-white"})]})}),t.jsx("div",{className:"w-full sm:w-48",children:t.jsxs("select",{value:u,onChange:N=>h(N.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:[t.jsx("option",{value:"all",children:"ทั้งหมด"}),t.jsx("option",{value:"ungraded",children:"รอให้คะแนน"}),t.jsx("option",{value:"graded",children:"ให้คะแนนแล้ว"}),t.jsx("option",{value:"late",children:"ส่งช้า"})]})})]})}),t.jsx("div",{className:"space-y-4",children:b.length===0?t.jsxs("div",{className:"glass-effect p-8 rounded-lg text-center",children:[t.jsx(oe,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-400 text-lg",children:d||u!=="all"?"ไม่พบงานที่ตรงกับเงื่อนไขการค้นหา":"ยังไม่มีนักเรียนส่งงาน"})]}):b.map(N=>t.jsx(a2,{submission:N,assignment:r,onGrade:()=>v(N)},N.id))}),t.jsx(xe,{children:y&&m&&t.jsx(o2,{submission:m,assignment:r,onSave:w,onClose:()=>{x(!1),f(null)}})})]})},c2=async()=>{try{const{data:s,error:e}=await E.from("projects").select(`
        id,
        title,
        description,
        short_description,
        category,
        difficulty_level,
        is_featured,
        technologies,
        project_url,
        github_url,
        cover_image_url,
        image_url,
        featured_image_url,
        technology,
        demo_url,
        thumbnail_url,
        creator_id,
        created_at,
        updated_at,
        is_approved
      `).eq("is_approved",!0).order("created_at",{ascending:!1});if(e)throw e;return{data:s||[],error:null}}catch(s){return console.error("Error fetching projects:",s),{data:null,error:s}}},d2=async s=>{try{const{data:e,error:r}=await E.from("projects").select("*").eq("id",s).eq("is_approved",!0).single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error fetching project:",e),{data:null,error:e}}},u2=async s=>{try{const{data:e,error:r}=await E.from("projects").select("*").eq("id",s).single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error fetching project for edit:",e),{data:null,error:e}}},h2=async()=>{try{const{data:s,error:e}=await E.from("projects").select(`
        id,
        title,
        description,
        short_description,
        category,
        difficulty_level,
        is_featured,
        technologies,
        project_url,
        github_url,
        cover_image_url,
        image_url,
        featured_image_url,
        technology,
        demo_url,
        thumbnail_url,
        creator_id,
        created_at,
        updated_at,
        is_approved
      `).eq("is_featured",!0).eq("is_approved",!0).order("created_at",{ascending:!1}).limit(6);if(e)throw e;return{data:s||[],error:null}}catch(s){return console.error("Error fetching featured projects:",s),{data:null,error:s}}},m2=async s=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n,error:i}=await E.from("projects").insert([{...s,creator_id:e.id}]).select().single();if(i)throw i;return{data:n,error:null}}catch(e){return console.error("Error creating project:",e),{data:null,error:e}}},f2=async(s,e)=>{try{const{data:r,error:n}=await E.from("projects").update(e).eq("id",s).select().single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error updating project:",r),{data:null,error:r}}},p2=async s=>{try{const{error:e}=await E.from("projects").update({is_approved:!1}).eq("id",s);if(e)throw e;return{error:null}}catch(e){return console.error("Error deleting project:",e),{error:e}}},g2=async(s,e)=>{try{const{error:r}=await E.from("projects").update({is_approved:e}).eq("id",s);if(r)throw r;return{error:null}}catch(r){return console.error("Error toggling project approval:",r),{error:r}}},x2=async(s,e)=>{try{const{error:r}=await E.from("projects").update({is_featured:e}).eq("id",s);if(r)throw r;return{error:null}}catch(r){return console.error("Error toggling project featured status:",r),{error:r}}},y2=async()=>{try{const{data:s,error:e}=await E.from("projects").select("*").order("created_at",{ascending:!1});if(e)throw e;return{data:s||[],error:null}}catch(s){return console.error("Error fetching admin projects:",s),{data:null,error:s}}},b2=async()=>{try{const{count:s,error:e}=await E.from("projects").select("*",{count:"exact",head:!0}).eq("is_approved",!0);if(e)throw e;const{count:r,error:n}=await E.from("projects").select("*",{count:"exact",head:!0}).eq("is_featured",!0).eq("is_approved",!0);if(n)throw n;const{data:i,error:a}=await E.from("projects").select("category").eq("is_approved",!0);if(a)throw a;const o=new Set((i==null?void 0:i.map(l=>l.category))||[]);return{data:{totalProjects:s||0,featuredProjects:r||0,totalCategories:o.size,categories:Array.from(o)},error:null}}catch(s){return console.error("Error fetching project stats:",s),{data:null,error:s}}},Xl=({project:s,onView:e,onEdit:r,featured:n=!1,currentUserId:i,isAdmin:a=!1})=>{const o={initial:{opacity:0,y:20},animate:{opacity:1,y:0},hover:{y:-8,scale:1.02}},l=d=>new Date(d).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"});return t.jsxs(L.div,{variants:o,initial:"initial",animate:"animate",whileHover:"hover",transition:{duration:.3},className:`group relative bg-white rounded-2xl shadow-lg hover:shadow-2xl border border-gray-200 overflow-hidden ${n?"ring-2 ring-yellow-400 ring-opacity-50":""}`,children:[n&&t.jsx("div",{className:"absolute top-4 right-4 z-10",children:t.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-xs font-semibold flex items-center shadow-lg",children:[t.jsx(Se,{className:"w-3 h-3 mr-1 fill-current"}),"Featured"]})}),t.jsxs("div",{className:"relative h-48 overflow-hidden",children:[s.cover_image_url||s.featured_image_url||s.image_url||s.thumbnail_url?t.jsx("img",{src:s.cover_image_url||s.featured_image_url||s.image_url||s.thumbnail_url,alt:s.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:d=>{d.target.src="https://images.unsplash.com/photo-1461749280684-dccba630e2f6?ixlib=rb-4.0.3"}}):t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",children:t.jsx(ao,{className:"w-16 h-16 text-white opacity-50"})}),t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300"}),t.jsxs("div",{className:"absolute top-4 left-4 flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[(s.project_url||s.demo_url)&&t.jsx(S,{size:"icon",variant:"ghost",className:"bg-white/90 hover:bg-white text-gray-800 rounded-full shadow-lg",onClick:d=>{d.stopPropagation(),window.open(s.project_url||s.demo_url,"_blank")},children:t.jsx(nr,{className:"w-4 h-4"})}),s.github_url&&t.jsx(S,{size:"icon",variant:"ghost",className:"bg-white/90 hover:bg-white text-gray-800 rounded-full shadow-lg",onClick:d=>{d.stopPropagation(),window.open(s.github_url,"_blank")},children:t.jsx(Kt,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 group-hover:text-indigo-600 transition-colors duration-200",children:s.title}),s.category&&t.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:[t.jsx(gt,{className:"w-3 h-3 mr-1"}),s.category]})]}),t.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 leading-relaxed",children:s.short_description||s.description||"ไม่มีคำอธิบาย"})]}),s.technologies&&s.technologies.length>0?t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.technologies.slice(0,4).map((d,c)=>t.jsx("span",{className:"px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800",children:d},c)),s.technologies.length>4&&t.jsxs("span",{className:"px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-600",children:["+",s.technologies.length-4]})]})}):s.technology&&t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"flex flex-wrap gap-2",children:t.jsxs("span",{className:"px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800",children:[t.jsx(ao,{className:"w-3 h-3 mr-1 inline"}),s.technology]})})}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Me,{className:"w-4 h-4 mr-1"}),l(s.created_at)]}),s.status&&t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="published"?"bg-green-100 text-green-800":s.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:s.status==="published"?"เผยแพร่แล้ว":s.status==="draft"?"ร่าง":"เก็บถาวร"})]}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(s.difficulty_level||s.difficulty)&&t.jsx("span",{className:`px-2 py-1 rounded-md font-medium ${(s.difficulty_level||s.difficulty)==="beginner"?"bg-green-100 text-green-700":(s.difficulty_level||s.difficulty)==="intermediate"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:(s.difficulty_level||s.difficulty)==="beginner"?"เริ่มต้น":(s.difficulty_level||s.difficulty)==="intermediate"?"ปานกลาง":"ขั้นสูง"}),s.duration_hours&&t.jsxs("span",{className:"text-gray-500 flex items-center",children:[t.jsx(Me,{className:"w-3 h-3 mr-1"}),s.duration_hours," ชม."]})]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(S,{onClick:()=>e&&e(s),className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl",size:"sm",children:[t.jsx(Ce,{className:"w-4 h-4 mr-2"}),"ดูรายละเอียด"]}),i&&r&&t.jsx(S,{variant:"outline",onClick:d=>{d.stopPropagation(),r(s)},className:"border-blue-300 text-blue-600 hover:bg-blue-50 rounded-xl",size:"sm",title:"แก้ไขโครงงาน",children:t.jsx(ir,{className:"w-4 h-4"})}),(s.project_url||s.demo_url)&&t.jsx(S,{variant:"outline",onClick:d=>{d.stopPropagation(),window.open(s.project_url||s.demo_url,"_blank")},className:"border-indigo-300 text-indigo-600 hover:bg-indigo-50 rounded-xl",size:"sm",children:t.jsx(ys,{className:"w-4 h-4"})}),s.github_url&&t.jsx(S,{variant:"outline",onClick:d=>{d.stopPropagation(),window.open(s.github_url,"_blank")},className:"border-gray-300 text-gray-600 hover:bg-gray-50 rounded-xl",size:"sm",children:t.jsx(Kt,{className:"w-4 h-4"})})]})]}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-indigo-500 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})},v2=({isOpen:s,onClose:e,onSuccess:r,projectId:n})=>{const{toast:i}=Dt(),[a,o]=p.useState(!1),[l,d]=p.useState(!0),[c,u]=p.useState({title:"",description:"",short_description:"",category:"",difficulty_level:"beginner",duration_hours:"",is_featured:!1,technologies:[],project_url:"",github_url:"",video_url:"",cover_image_url:"",content_html:"",tags:[],status:"published"}),[h,m]=p.useState({}),[f,y]=p.useState(null),[x,g]=p.useState(!1),[v,w]=p.useState(null),[b,_]=p.useState(""),[N,k]=p.useState("");p.useEffect(()=>{s&&n&&(async()=>{if(n){d(!0);try{const{data:A,error:I}=await u2(n);if(I){i({title:"ไม่สามารถโหลดข้อมูลโครงงานได้",description:I.message,variant:"destructive"}),e();return}u({title:A.title||"",description:A.description||"",short_description:A.short_description||"",category:A.category||"",difficulty_level:A.difficulty_level||"beginner",duration_hours:A.duration_hours||"",is_featured:A.is_featured||!1,technologies:A.technologies||[],project_url:A.project_url||"",github_url:A.github_url||"",video_url:A.video_url||"",cover_image_url:A.cover_image_url||"",content_html:A.content_html||"",tags:A.tags||[],status:A.status||"published"}),A.cover_image_url&&w(A.cover_image_url)}catch(A){console.error("Error loading project:",A),i({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถโหลดข้อมูลโครงงานได้",variant:"destructive"}),e()}finally{d(!1)}}})()},[n,s,i,e]);const j=F=>{const{name:A,value:I,type:O,checked:D}=F.target;u(q=>({...q,[A]:O==="checkbox"?D:I})),h[A]&&m(q=>({...q,[A]:""}))},T=()=>{b.trim()&&!c.technologies.includes(b.trim())&&(u(F=>({...F,technologies:[...F.technologies,b.trim()]})),_(""))},M=F=>{u(A=>({...A,technologies:A.technologies.filter(I=>I!==F)}))},B=()=>{N.trim()&&!c.tags.includes(N.trim())&&(u(F=>({...F,tags:[...F.tags,N.trim()]})),k(""))},W=F=>{u(A=>({...A,tags:A.tags.filter(I=>I!==F)}))},C=()=>{const F={};return c.title.trim()||(F.title="กรุณาระบุชื่อโครงงาน"),c.description.trim()||(F.description="กรุณาระบุคำอธิบายโครงงาน"),c.category.trim()||(F.category="กรุณาระบุหมวดหมู่"),c.project_url&&!z(c.project_url)&&(F.project_url="กรุณาระบุ URL ที่ถูกต้อง"),c.github_url&&!z(c.github_url)&&(F.github_url="กรุณาระบุ URL ที่ถูกต้อง"),m(F),Object.keys(F).length===0},z=F=>{try{return new URL(F),!0}catch{return!1}},R=async F=>{if(F.preventDefault(),!C()){i({title:"ข้อมูลไม่ครบถ้วน",description:"กรุณาตรวจสอบข้อมูลที่กรอกและลองอีกครั้ง",variant:"destructive"});return}o(!0);try{let A={...c};if(A.duration_hours===""||A.duration_hours==="0"?A.duration_hours=null:A.duration_hours&&(A.duration_hours=parseInt(A.duration_hours)),Object.keys(A).forEach(D=>{A[D]===""&&D!=="title"&&D!=="description"&&D!=="category"&&(A[D]=null)}),(!A.technologies||A.technologies.length===0)&&(A.technologies=[]),(!A.tags||A.tags.length===0)&&(A.tags=[]),f){g(!0);const{data:D,error:q}=await vn(f);if(q)throw new Error(`ไม่สามารถอัปโหลดรูปภาพได้: ${q.message}`);A.cover_image_url=D.publicUrl,g(!1)}const{data:I,error:O}=await f2(n,A);if(O)throw O;i({title:"แก้ไขโครงงานสำเร็จ! 🎉",description:`โครงงาน "${c.title}" ถูกแก้ไขเรียบร้อยแล้ว`}),r&&r(I),e()}catch(A){console.error("Error updating project:",A),i({title:"ไม่สามารถแก้ไขโครงงานได้",description:A.message,variant:"destructive"})}finally{o(!1),g(!1)}},$=F=>{const A=F.target.files[0];if(!A)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(A.type)){i({title:"ไฟล์ไม่ถูกต้อง",description:"กรุณาเลือกไฟล์รูปภาพ (JPG, PNG, WebP เท่านั้น)",variant:"destructive"});return}if(A.size>5*1024*1024){i({title:"ไฟล์ใหญ่เกินไป",description:"ขนาดไฟล์ต้องไม่เกิน 5MB",variant:"destructive"});return}y(A);const O=new FileReader;O.onload=D=>{w(D.target.result)},O.readAsDataURL(A)},P=()=>{y(null),w(c.cover_image_url);const F=document.getElementById("edit-project-image");F&&(F.value="")},U=["Web Development","Mobile App","Desktop App","IoT/Hardware","AI/Machine Learning","Data Science","Game Development","Other"],G=[{value:"beginner",label:"ผู้เริ่มต้น"},{value:"intermediate",label:"ปานกลาง"},{value:"advanced",label:"ขั้นสูง"}];return s?l?t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"กำลังโหลดข้อมูลโครงงาน..."})]})}):t.jsx(xe,{children:t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:t.jsxs(L.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:"bg-white shadow-2xl rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-gray-200",onClick:F=>F.stopPropagation(),children:[t.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-8 rounded-t-2xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:t.jsx(Ae,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-white",children:"แก้ไขโครงงาน"}),t.jsx("p",{className:"text-indigo-100 mt-1",children:"อัปเดตข้อมูลโครงงานของคุณ"})]})]}),t.jsx(S,{variant:"ghost",size:"icon",onClick:e,disabled:a,className:"text-white hover:bg-white/20 rounded-xl",children:t.jsx(we,{className:"w-6 h-6"})})]})}),t.jsx("div",{className:"p-8",children:t.jsxs("form",{onSubmit:R,className:"space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:t.jsx(Ae,{className:"w-4 h-4 text-white"})}),"ชื่อโครงงาน *"]}),t.jsx(Z,{name:"title",value:c.title,onChange:j,placeholder:"เช่น ระบบจัดการคอร์สออนไลน์",className:"bg-white border-gray-300 text-gray-800 text-lg h-12 focus:border-blue-500 focus:ring-blue-500 rounded-xl shadow-sm",error:h.title}),h.title&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),h.title]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-green-500 p-2 rounded-lg mr-3",children:t.jsx(oe,{className:"w-4 h-4 text-white"})}),"คำอธิบายโครงงาน *"]}),t.jsx("textarea",{name:"description",value:c.description,onChange:j,placeholder:"อธิบายรายละเอียดโครงงาน วัตถุประสงค์ และฟีเจอร์หลัก...",rows:4,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-200 text-base shadow-sm resize-none"}),h.description&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),h.description]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-sky-50 p-6 rounded-xl border border-blue-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:t.jsx(oe,{className:"w-4 h-4 text-white"})}),"คำอธิบายสั้น"]}),t.jsx("textarea",{name:"short_description",value:c.short_description,onChange:j,placeholder:"คำอธิบายสั้นๆ สำหรับแสดงในการ์ด...",rows:4,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-base shadow-sm resize-none"})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-6 rounded-xl border border-purple-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[t.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:t.jsx(Gc,{className:"w-4 h-4 text-white"})}),"เทคโนโลยีที่ใช้"]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx(Z,{name:"newTechnology",value:b,onChange:F=>_(F.target.value),placeholder:"เช่น React, Node.js, MongoDB",className:"bg-white border-gray-300 text-gray-800 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 rounded-xl shadow-sm",onKeyPress:F=>F.key==="Enter"&&(F.preventDefault(),T())}),t.jsx(S,{type:"button",onClick:T,className:"px-4 py-2 bg-purple-500 text-white rounded-xl",children:t.jsx(Je,{className:"w-4 h-4"})})]}),c.technologies.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:c.technologies.map((F,A)=>t.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm",children:[F,t.jsx("button",{type:"button",onClick:()=>M(F),className:"ml-2 text-purple-600 hover:text-purple-800",children:t.jsx(we,{className:"w-3 h-3"})})]},A))})]}),t.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 p-6 rounded-xl border border-pink-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[t.jsx("div",{className:"bg-pink-500 p-2 rounded-lg mr-3",children:t.jsx(gt,{className:"w-4 h-4 text-white"})}),"แท็ก"]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx(Z,{name:"newTag",value:N,onChange:F=>k(F.target.value),placeholder:"เช่น React, Frontend, Responsive",className:"bg-white border-gray-300 text-gray-800 focus:border-pink-500 focus:ring-2 focus:ring-pink-200 rounded-xl shadow-sm",onKeyPress:F=>F.key==="Enter"&&(F.preventDefault(),B())}),t.jsx(S,{type:"button",onClick:B,className:"px-4 py-2 bg-pink-500 text-white rounded-xl",children:t.jsx(Je,{className:"w-4 h-4"})})]}),c.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:c.tags.map((F,A)=>t.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-pink-100 text-pink-800 rounded-full text-sm",children:[F,t.jsx("button",{type:"button",onClick:()=>W(F),className:"ml-2 text-pink-600 hover:text-pink-800",children:t.jsx(we,{className:"w-3 h-3"})})]},A))})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 p-6 rounded-xl border border-orange-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-orange-500 p-2 rounded-lg mr-3",children:t.jsx(gt,{className:"w-4 h-4 text-white"})}),"หมวดหมู่ *"]}),t.jsxs("select",{name:"category",value:c.category,onChange:j,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 h-12 shadow-sm",children:[t.jsx("option",{value:"",children:"เลือกหมวดหมู่"}),U.map(F=>t.jsx("option",{value:F,children:F},F))]}),h.category&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),h.category]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 p-6 rounded-xl border border-teal-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-teal-500 p-2 rounded-lg mr-3",children:t.jsx(Me,{className:"w-4 h-4 text-white"})}),"ระดับความยาก"]}),t.jsx("select",{name:"difficulty_level",value:c.difficulty_level,onChange:j,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 h-12 shadow-sm",children:G.map(F=>t.jsx("option",{value:F.value,children:F.label},F.value))})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 p-6 rounded-xl border border-indigo-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-indigo-500 p-2 rounded-lg mr-3",children:t.jsx(Me,{className:"w-4 h-4 text-white"})}),"ระยะเวลาทำโครงงาน (ชั่วโมง)"]}),t.jsx(Z,{name:"duration_hours",type:"number",value:c.duration_hours,onChange:j,placeholder:"เช่น 40",min:"0",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 rounded-xl shadow-sm"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 p-6 rounded-xl border border-cyan-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-cyan-500 p-2 rounded-lg mr-3",children:t.jsx(nr,{className:"w-4 h-4 text-white"})}),"Project URL"]}),t.jsx(Z,{name:"project_url",value:c.project_url,onChange:j,placeholder:"https://example.com",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 rounded-xl shadow-sm"}),h.project_url&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),h.project_url]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 p-6 rounded-xl border border-gray-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-gray-500 p-2 rounded-lg mr-3",children:t.jsx(Kt,{className:"w-4 h-4 text-white"})}),"GitHub URL"]}),t.jsx(Z,{name:"github_url",value:c.github_url,onChange:j,placeholder:"https://github.com/username/repo",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 rounded-xl shadow-sm"}),h.github_url&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),h.github_url]})]})]}),t.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 p-6 rounded-xl border border-yellow-200",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-yellow-500 p-2 rounded-lg",children:t.jsx(Se,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-gray-800 font-semibold",children:"โครงงานแนะนำ"}),t.jsx("p",{className:"text-sm text-gray-600",children:"แสดงในส่วนโครงงานที่แนะนำหน้าแรก"})]}),t.jsx("input",{type:"checkbox",name:"is_featured",checked:c.is_featured,onChange:j,className:"w-5 h-5 text-yellow-600 rounded focus:ring-yellow-500 focus:ring-2"})]})}),t.jsxs("div",{className:"bg-gradient-to-br from-rose-50 to-pink-50 p-6 rounded-xl border border-rose-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[t.jsx("div",{className:"bg-rose-500 p-2 rounded-lg mr-3",children:t.jsx(Ue,{className:"w-4 h-4 text-white"})}),"รูปภาพโครงงาน"]}),t.jsxs("div",{className:"space-y-4",children:[v&&t.jsxs("div",{className:"relative inline-block",children:[t.jsx("img",{src:v,alt:"Project preview",className:"w-48 h-32 object-cover rounded-xl border-2 border-gray-200 shadow-lg"}),t.jsx(S,{type:"button",variant:"ghost",size:"icon",onClick:P,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg",children:t.jsx(Re,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"border-2 border-dashed border-rose-300 rounded-xl p-8 text-center hover:border-rose-400 transition-colors bg-white/50",children:[t.jsx("input",{type:"file",id:"edit-project-image",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:$,className:"hidden",disabled:x}),t.jsxs("label",{htmlFor:"edit-project-image",className:"cursor-pointer flex flex-col items-center space-y-3",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-rose-400 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx(Ue,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-800 font-semibold text-lg",children:v?"เปลี่ยนรูปภาพ":"เลือกรูปภาพ"}),t.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"JPG, PNG, WebP ขนาดไม่เกิน 5MB"}),t.jsx("p",{className:"text-rose-600 text-xs mt-2 font-medium",children:"คลิกเพื่ออัปโหลดไฟล์"})]})]})]}),x&&t.jsxs("div",{className:"flex items-center justify-center space-x-3 bg-blue-50 p-4 rounded-xl",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),t.jsx("span",{className:"text-blue-700 font-medium",children:"กำลังอัปโหลดรูปภาพ..."})]})]})]}),t.jsxs("div",{className:"flex justify-center space-x-4 pt-8",children:[t.jsx(S,{type:"button",variant:"outline",onClick:e,disabled:a,className:"px-8 py-3 text-gray-600 border-gray-300 hover:bg-gray-50 rounded-xl font-medium text-lg h-14 min-w-[120px]",children:"ยกเลิก"}),t.jsx(S,{type:"submit",disabled:a||x,className:"px-12 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg h-14 min-w-[160px] shadow-lg hover:shadow-xl transition-all duration-200",children:a||x?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),x?"กำลังอัปโหลดรูป...":"กำลังอัปเดต..."]}):t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"w-5 h-5 mr-3"}),"บันทึกการแก้ไข"]})})]})]})})]})})}):null},wh=({isOpen:s,onClose:e,onSuccess:r})=>{const{toast:n}=Dt(),[i,a]=p.useState(!1),[o,l]=p.useState({title:"",description:"",short_description:"",category:"",difficulty_level:"beginner",duration_hours:"",is_featured:!1,technologies:[],project_url:"",github_url:"",video_url:"",cover_image_url:"",content_html:"",tags:[],status:"published"}),[d,c]=p.useState({}),[u,h]=p.useState(null),[m,f]=p.useState(!1),[y,x]=p.useState(null),[g,v]=p.useState(""),[w,b]=p.useState(""),_=P=>{const{name:U,value:G,type:F,checked:A}=P.target;l(I=>({...I,[U]:F==="checkbox"?A:G})),d[U]&&c(I=>({...I,[U]:""}))},N=()=>{g.trim()&&!o.technologies.includes(g.trim())&&(l(P=>({...P,technologies:[...P.technologies,g.trim()]})),v(""))},k=P=>{l(U=>({...U,technologies:U.technologies.filter(G=>G!==P)}))},j=()=>{w.trim()&&!o.tags.includes(w.trim())&&(l(P=>({...P,tags:[...P.tags,w.trim()]})),b(""))},T=P=>{l(U=>({...U,tags:U.tags.filter(G=>G!==P)}))},M=()=>{const P={};return o.title.trim()||(P.title="กรุณาระบุชื่อโครงงาน"),o.description.trim()||(P.description="กรุณาระบุคำอธิบายโครงงาน"),o.category.trim()||(P.category="กรุณาระบุหมวดหมู่"),o.project_url&&!B(o.project_url)&&(P.project_url="กรุณาระบุ URL ที่ถูกต้อง"),o.github_url&&!B(o.github_url)&&(P.github_url="กรุณาระบุ URL ที่ถูกต้อง"),c(P),Object.keys(P).length===0},B=P=>{try{return new URL(P),!0}catch{return!1}},W=async P=>{if(P.preventDefault(),!M()){n({title:"ข้อมูลไม่ครบถ้วน",description:"กรุณาตรวจสอบข้อมูลที่กรอกและลองอีกครั้ง",variant:"destructive"});return}a(!0);try{let U={...o};if(U.duration_hours===""||U.duration_hours==="0"?U.duration_hours=null:U.duration_hours&&(U.duration_hours=parseInt(U.duration_hours)),Object.keys(U).forEach(A=>{U[A]===""&&A!=="title"&&A!=="description"&&A!=="category"&&(U[A]=null)}),(!U.technologies||U.technologies.length===0)&&(U.technologies=[]),(!U.tags||U.tags.length===0)&&(U.tags=[]),u){f(!0);const{data:A,error:I}=await vn(u);if(I)throw new Error(`ไม่สามารถอัปโหลดรูปภาพได้: ${I.message}`);U.cover_image_url=A.publicUrl,f(!1)}const{data:G,error:F}=await m2(U);if(F)throw F;n({title:"สร้างโครงงานสำเร็จ! 🎉",description:`โครงงาน "${o.title}" ถูกสร้างเรียบร้อยแล้ว`}),l({title:"",description:"",short_description:"",category:"",difficulty_level:"beginner",duration_hours:"",is_featured:!1,technologies:[],project_url:"",github_url:"",video_url:"",cover_image_url:"",content_html:"",tags:[],status:"published"}),h(null),x(null),r&&r(G),e()}catch(U){console.error("Error creating project:",U),n({title:"ไม่สามารถสร้างโครงงานได้",description:U.message,variant:"destructive"})}finally{a(!1),f(!1)}},C=P=>{const U=P.target.files[0];if(!U)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(U.type)){n({title:"ไฟล์ไม่ถูกต้อง",description:"กรุณาเลือกไฟล์รูปภาพ (JPG, PNG, WebP เท่านั้น)",variant:"destructive"});return}if(U.size>5*1024*1024){n({title:"ไฟล์ใหญ่เกินไป",description:"ขนาดไฟล์ต้องไม่เกิน 5MB",variant:"destructive"});return}h(U);const F=new FileReader;F.onload=A=>{x(A.target.result)},F.readAsDataURL(U)},z=()=>{h(null),x(null);const P=document.getElementById("project-image");P&&(P.value="")},R=["Web Development","Mobile App","Desktop App","IoT/Hardware","AI/Machine Learning","Data Science","Game Development","Other"],$=[{value:"beginner",label:"ผู้เริ่มต้น"},{value:"intermediate",label:"ปานกลาง"},{value:"advanced",label:"ขั้นสูง"}];return s?t.jsx(xe,{children:t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:t.jsxs(L.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:"bg-white shadow-2xl rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-gray-200",onClick:P=>P.stopPropagation(),children:[t.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-8 rounded-t-2xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:t.jsx(Ae,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-white",children:"เพิ่มโครงงานใหม่"}),t.jsx("p",{className:"text-indigo-100 mt-1",children:"สร้างโครงงานและผลงานใหม่"})]})]}),t.jsx(S,{variant:"ghost",size:"icon",onClick:e,disabled:i,className:"text-white hover:bg-white/20 rounded-xl",children:t.jsx(we,{className:"w-6 h-6"})})]})}),t.jsx("div",{className:"p-8",children:t.jsxs("form",{onSubmit:W,className:"space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:t.jsx(Ae,{className:"w-4 h-4 text-white"})}),"ชื่อโครงงาน *"]}),t.jsx(Z,{name:"title",value:o.title,onChange:_,placeholder:"เช่น ระบบจัดการคอร์สออนไลน์",className:"bg-white border-gray-300 text-gray-800 text-lg h-12 focus:border-blue-500 focus:ring-blue-500 rounded-xl shadow-sm",error:d.title}),d.title&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),d.title]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-green-500 p-2 rounded-lg mr-3",children:t.jsx(oe,{className:"w-4 h-4 text-white"})}),"คำอธิบายโครงงาน *"]}),t.jsx("textarea",{name:"description",value:o.description,onChange:_,placeholder:"อธิบายรายละเอียดโครงงาน วัตถุประสงค์ และฟีเจอร์หลัก...",rows:4,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-200 text-base shadow-sm resize-none"}),d.description&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),d.description]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-sky-50 p-6 rounded-xl border border-blue-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:t.jsx(oe,{className:"w-4 h-4 text-white"})}),"คำอธิบายสั้น"]}),t.jsx("textarea",{name:"short_description",value:o.short_description,onChange:_,placeholder:"คำอธิบายสั้นๆ สำหรับแสดงในการ์ด...",rows:4,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-base shadow-sm resize-none"})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-6 rounded-xl border border-purple-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[t.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:t.jsx(Gc,{className:"w-4 h-4 text-white"})}),"เทคโนโลยีที่ใช้"]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx(Z,{name:"newTechnology",value:g,onChange:P=>v(P.target.value),placeholder:"เช่น React, Node.js, MongoDB",className:"bg-white border-gray-300 text-gray-800 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 rounded-xl shadow-sm",onKeyPress:P=>P.key==="Enter"&&(P.preventDefault(),N())}),t.jsx(S,{type:"button",onClick:N,className:"px-4 py-2 bg-purple-500 text-white rounded-xl",children:t.jsx(Je,{className:"w-4 h-4"})})]}),o.technologies.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:o.technologies.map((P,U)=>t.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm",children:[P,t.jsx("button",{type:"button",onClick:()=>k(P),className:"ml-2 text-purple-600 hover:text-purple-800",children:t.jsx(we,{className:"w-3 h-3"})})]},U))})]}),t.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 p-6 rounded-xl border border-pink-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[t.jsx("div",{className:"bg-pink-500 p-2 rounded-lg mr-3",children:t.jsx(gt,{className:"w-4 h-4 text-white"})}),"แท็ก"]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx(Z,{name:"newTag",value:w,onChange:P=>b(P.target.value),placeholder:"เช่น React, Frontend, Responsive",className:"bg-white border-gray-300 text-gray-800 focus:border-pink-500 focus:ring-2 focus:ring-pink-200 rounded-xl shadow-sm",onKeyPress:P=>P.key==="Enter"&&(P.preventDefault(),j())}),t.jsx(S,{type:"button",onClick:j,className:"px-4 py-2 bg-pink-500 text-white rounded-xl",children:t.jsx(Je,{className:"w-4 h-4"})})]}),o.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:o.tags.map((P,U)=>t.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-pink-100 text-pink-800 rounded-full text-sm",children:[P,t.jsx("button",{type:"button",onClick:()=>T(P),className:"ml-2 text-pink-600 hover:text-pink-800",children:t.jsx(we,{className:"w-3 h-3"})})]},U))})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 p-6 rounded-xl border border-orange-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-orange-500 p-2 rounded-lg mr-3",children:t.jsx(gt,{className:"w-4 h-4 text-white"})}),"หมวดหมู่ *"]}),t.jsxs("select",{name:"category",value:o.category,onChange:_,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 h-12 shadow-sm",children:[t.jsx("option",{value:"",children:"เลือกหมวดหมู่"}),R.map(P=>t.jsx("option",{value:P,children:P},P))]}),d.category&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),d.category]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 p-6 rounded-xl border border-teal-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-teal-500 p-2 rounded-lg mr-3",children:t.jsx(Me,{className:"w-4 h-4 text-white"})}),"ระดับความยาก"]}),t.jsx("select",{name:"difficulty_level",value:o.difficulty_level,onChange:_,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 h-12 shadow-sm",children:$.map(P=>t.jsx("option",{value:P.value,children:P.label},P.value))})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 p-6 rounded-xl border border-indigo-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-indigo-500 p-2 rounded-lg mr-3",children:t.jsx(Me,{className:"w-4 h-4 text-white"})}),"ระยะเวลาทำโครงงาน (ชั่วโมง)"]}),t.jsx(Z,{name:"duration_hours",type:"number",value:o.duration_hours,onChange:_,placeholder:"เช่น 40",min:"0",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 rounded-xl shadow-sm"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 p-6 rounded-xl border border-cyan-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-cyan-500 p-2 rounded-lg mr-3",children:t.jsx(nr,{className:"w-4 h-4 text-white"})}),"Project URL"]}),t.jsx(Z,{name:"project_url",value:o.project_url,onChange:_,placeholder:"https://example.com",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 rounded-xl shadow-sm"}),d.project_url&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),d.project_url]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 p-6 rounded-xl border border-gray-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-gray-500 p-2 rounded-lg mr-3",children:t.jsx(Kt,{className:"w-4 h-4 text-white"})}),"GitHub URL"]}),t.jsx(Z,{name:"github_url",value:o.github_url,onChange:_,placeholder:"https://github.com/username/repo",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 rounded-xl shadow-sm"}),d.github_url&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ne,{className:"w-4 h-4 mr-2"}),d.github_url]})]})]}),t.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 p-6 rounded-xl border border-yellow-200",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-yellow-500 p-2 rounded-lg",children:t.jsx(Se,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"text-gray-800 font-semibold",children:"โครงงานแนะนำ"}),t.jsx("p",{className:"text-sm text-gray-600",children:"แสดงในส่วนโครงงานที่แนะนำหน้าแรก"})]}),t.jsx("input",{type:"checkbox",name:"is_featured",checked:o.is_featured,onChange:_,className:"w-5 h-5 text-yellow-600 rounded focus:ring-yellow-500 focus:ring-2"})]})}),t.jsxs("div",{className:"bg-gradient-to-br from-rose-50 to-pink-50 p-6 rounded-xl border border-rose-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[t.jsx("div",{className:"bg-rose-500 p-2 rounded-lg mr-3",children:t.jsx(Ue,{className:"w-4 h-4 text-white"})}),"รูปภาพโครงงาน"]}),t.jsxs("div",{className:"space-y-4",children:[y&&t.jsxs("div",{className:"relative inline-block",children:[t.jsx("img",{src:y,alt:"Project preview",className:"w-48 h-32 object-cover rounded-xl border-2 border-gray-200 shadow-lg"}),t.jsx(S,{type:"button",variant:"ghost",size:"icon",onClick:z,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg",children:t.jsx(Re,{className:"w-4 h-4"})})]}),!y&&t.jsxs("div",{className:"border-2 border-dashed border-rose-300 rounded-xl p-8 text-center hover:border-rose-400 transition-colors bg-white/50",children:[t.jsx("input",{type:"file",id:"project-image",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:C,className:"hidden",disabled:m}),t.jsxs("label",{htmlFor:"project-image",className:"cursor-pointer flex flex-col items-center space-y-3",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-rose-400 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx(Ue,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-800 font-semibold text-lg",children:"เลือกรูปภาพ"}),t.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"JPG, PNG, WebP ขนาดไม่เกิน 5MB"}),t.jsx("p",{className:"text-rose-600 text-xs mt-2 font-medium",children:"คลิกเพื่ออัปโหลดไฟล์"})]})]})]}),m&&t.jsxs("div",{className:"flex items-center justify-center space-x-3 bg-blue-50 p-4 rounded-xl",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),t.jsx("span",{className:"text-blue-700 font-medium",children:"กำลังอัปโหลดรูปภาพ..."})]})]})]}),t.jsxs("div",{className:"flex justify-center space-x-4 pt-8",children:[t.jsx(S,{type:"button",variant:"outline",onClick:e,disabled:i,className:"px-8 py-3 text-gray-600 border-gray-300 hover:bg-gray-50 rounded-xl font-medium text-lg h-14 min-w-[120px]",children:"ยกเลิก"}),t.jsx(S,{type:"submit",disabled:i||m,className:"px-12 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg h-14 min-w-[160px] shadow-lg hover:shadow-xl transition-all duration-200",children:i||m?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),m?"กำลังอัปโหลดรูป...":"กำลังสร้าง..."]}):t.jsxs(t.Fragment,{children:[t.jsx(st,{className:"w-5 h-5 mr-3"}),"สร้างโครงงาน"]})})]})]})})]})})}):null},w2=()=>{const s=at(),{toast:e}=Dt(),{user:r,userProfile:n}=De(),[i,a]=p.useState([]),[o,l]=p.useState([]),[d,c]=p.useState(!0),[u,h]=p.useState(""),[m,f]=p.useState("all"),[y,x]=p.useState("all"),[g,v]=p.useState("newest"),[w,b]=p.useState("grid"),[_,N]=p.useState(!1),[k,j]=p.useState(null),[T,M]=p.useState(!1),[B,W]=p.useState(null),[C,z]=p.useState(!1),R=p.useCallback(async()=>{c(!0);try{const[H,J]=await Promise.all([c2(),h2()]);if(H.error)throw H.error;if(J.error)throw J.error;a(H.data||[]),l(J.data||[])}catch(H){console.error("Error loading projects:",H),e({title:"ข้อผิดพลาดในการโหลดข้อมูล",description:H.message,variant:"destructive"})}finally{c(!1)}},[e]);p.useEffect(()=>{R()},[R]);const $=[...new Set(i.map(H=>H.category).filter(Boolean))],P=[...new Set(i.flatMap(H=>H.technologies||[]).filter(Boolean))],U=i.filter(H=>{var ze;const J=H.title.toLowerCase().includes(u.toLowerCase())||((ze=H.description)==null?void 0:ze.toLowerCase().includes(u.toLowerCase())),Ne=m==="all"||H.category===m,pe=y==="all"||H.technologies&&H.technologies.includes(y);return J&&Ne&&pe}).sort((H,J)=>{switch(g){case"newest":return new Date(J.created_at)-new Date(H.created_at);case"oldest":return new Date(H.created_at)-new Date(J.created_at);case"name":return H.title.localeCompare(J.title);default:return 0}}),G=H=>{s(`/projects/${H.id}`)},F=H=>{W(H.id),M(!0)},A=()=>{R(),M(!1),W(null),e({title:"โครงงานถูกอัปเดตแล้ว",description:"การแก้ไขโครงงานเสร็จสิ้น"})},I=()=>{M(!1),W(null)},O=()=>{z(!0)},D=()=>{R(),z(!1),e({title:"สร้างโครงงานสำเร็จ! 🎉",description:"โครงงานของคุณถูกเพิ่มแล้ว"})},q=()=>{z(!1)},K={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};return t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:K,transition:{duration:.5},className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[t.jsxs(be,{children:[t.jsx("title",{children:"โครงงาน - Login Learning"}),t.jsx("meta",{name:"description",content:"ชมผลงานและโครงงานที่น่าสนใจจาก Login Learning"})]}),t.jsxs("div",{className:"container mx-auto px-4 py-12",children:[t.jsxs(L.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"text-center mb-12",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl mb-6 shadow-lg",children:t.jsx(Ae,{className:"w-10 h-10 text-white"})}),t.jsxs("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:["โครงงาน",t.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:" & ผลงาน"})]}),t.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed mb-8",children:"สำรวจผลงานและโครงงานที่น่าสนใจ พร้อมเทคโนโลยีที่ทันสมัยและนวัตกรรมใหม่ๆ"}),r&&t.jsx(L.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:t.jsxs(S,{onClick:O,className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-8 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all",children:[t.jsx(Je,{className:"w-5 h-5 mr-2"}),"เพิ่มโครงงานใหม่"]})})]}),o.length>0&&t.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-12",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx(Se,{className:"w-6 h-6 text-yellow-500 mr-3 fill-current"}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"โครงงานที่แนะนำ"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map((H,J)=>t.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*J},children:t.jsx(Xl,{project:H,featured:!0,onView:G})},H.id))})]}),t.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(Yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(Z,{type:"text",placeholder:"ค้นหาโครงงาน...",value:u,onChange:H=>h(H.target.value),className:"pl-10 h-12 bg-gray-50 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-xl"})]}),t.jsxs(S,{variant:"outline",onClick:()=>N(!_),className:"h-12 px-6 border-gray-300 hover:bg-gray-50 rounded-xl",children:[t.jsx(Bf,{className:"w-5 h-5 mr-2"}),"ตัวกรอง",t.jsx(aa,{className:`w-4 h-4 ml-2 transition-transform ${_?"rotate-180":""}`})]}),t.jsxs("div",{className:"flex rounded-xl overflow-hidden border border-gray-300",children:[t.jsx(S,{variant:w==="grid"?"default":"ghost",onClick:()=>b("grid"),className:"rounded-none h-12 px-4",children:t.jsx(Hf,{className:"w-5 h-5"})}),t.jsx(S,{variant:w==="list"?"default":"ghost",onClick:()=>b("list"),className:"rounded-none h-12 px-4",children:t.jsx(Yf,{className:"w-5 h-5"})})]})]}),t.jsx(xe,{children:_&&t.jsx(L.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"mt-6 pt-6 border-t border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"หมวดหมู่"}),t.jsxs("select",{value:m,onChange:H=>f(H.target.value),className:"w-full h-10 px-3 bg-gray-50 border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500",children:[t.jsx("option",{value:"all",children:"ทั้งหมด"}),$.map(H=>t.jsx("option",{value:H,children:H},H))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เทคโนโลยี"}),t.jsxs("select",{value:y,onChange:H=>x(H.target.value),className:"w-full h-10 px-3 bg-gray-50 border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500",children:[t.jsx("option",{value:"all",children:"ทั้งหมด"}),P.map(H=>t.jsx("option",{value:H,children:H},H))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"เรียงตาม"}),t.jsxs("select",{value:g,onChange:H=>v(H.target.value),className:"w-full h-10 px-3 bg-gray-50 border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500",children:[t.jsx("option",{value:"newest",children:"ใหม่ล่าสุด"}),t.jsx("option",{value:"oldest",children:"เก่าสุด"}),t.jsx("option",{value:"name",children:"ชื่อ A-Z"})]})]})]})})})]}),t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:d?t.jsxs("div",{className:"text-center py-20",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"กำลังโหลดโครงงาน..."})]}):U.length>0?t.jsx("div",{className:`grid gap-6 ${w==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:U.map((H,J)=>t.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*J},children:t.jsx(Xl,{project:H,onView:G,onEdit:F,currentUserId:r==null?void 0:r.id,isAdmin:(n==null?void 0:n.role)==="admin"})},H.id))}):t.jsxs("div",{className:"text-center py-20",children:[t.jsx(Ae,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"ไม่พบโครงงาน"}),t.jsx("p",{className:"text-gray-500",children:"ลองปรับเปลี่ยนคำค้นหาหรือตัวกรอง"})]})}),!d&&U.length>0&&t.jsxs(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-center mt-8 text-gray-600",children:["แสดง ",U.length," โครงงานจากทั้งหมด ",i.length," โครงงาน"]})]}),t.jsx(xe,{children:k&&t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>j(null),children:t.jsxs(L.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:H=>H.stopPropagation(),children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:k.title}),t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>j(null),className:"text-gray-500 hover:text-gray-700",children:t.jsx(we,{className:"w-6 h-6"})})]})}),t.jsxs("div",{className:"p-6",children:[k.image_url&&t.jsx("img",{src:k.image_url,alt:k.title,className:"w-full h-64 object-cover rounded-xl mb-6"}),t.jsxs("div",{className:"prose max-w-none",children:[t.jsx("p",{className:"text-gray-600 text-lg leading-relaxed mb-6",children:k.description}),k.technologies&&k.technologies.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"เทคโนโลยีที่ใช้"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:k.technologies.map((H,J)=>t.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm font-medium",children:H},J))})]}),t.jsxs("div",{className:"flex space-x-4 pt-6",children:[(k.project_url||k.demo_url)&&t.jsxs(S,{onClick:()=>window.open(k.project_url||k.demo_url,"_blank"),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700",children:[t.jsx(ys,{className:"w-5 h-5 mr-2"}),"ดูโครงงาน"]}),k.github_url&&t.jsxs(S,{variant:"outline",onClick:()=>window.open(k.github_url,"_blank"),children:[t.jsx(Kt,{className:"w-5 h-5 mr-2"}),"GitHub"]})]})]})]})]})})}),t.jsx(wh,{isOpen:C,onClose:q,onSuccess:D}),t.jsx(v2,{isOpen:T,onClose:I,onSuccess:A,projectId:B})]})},j2=()=>{const{projectId:s}=sr(),e=at(),{toast:r}=Dt(),[n,i]=p.useState(null),[a,o]=p.useState(!0),[l,d]=p.useState(0),[c,u]=p.useState(!1);p.useEffect(()=>{h()},[s]);const h=async()=>{o(!0);try{const{data:g,error:v}=await d2(s);if(v)throw v;i(g)}catch(g){console.error("Error fetching project:",g),r({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถโหลดข้อมูลโครงงานได้",variant:"destructive"}),e("/projects")}finally{o(!1)}},m=g=>new Date(g).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"}),f=g=>({React:"bg-blue-100 text-blue-800 border-blue-200",Vue:"bg-green-100 text-green-800 border-green-200",Angular:"bg-red-100 text-red-800 border-red-200","Node.js":"bg-emerald-100 text-emerald-800 border-emerald-200",Python:"bg-yellow-100 text-yellow-800 border-yellow-200",JavaScript:"bg-amber-100 text-amber-800 border-amber-200",TypeScript:"bg-indigo-100 text-indigo-800 border-indigo-200",PHP:"bg-purple-100 text-purple-800 border-purple-200",Java:"bg-orange-100 text-orange-800 border-orange-200",Arduino:"bg-teal-100 text-teal-800 border-teal-200",ESP32:"bg-cyan-100 text-cyan-800 border-cyan-200","Raspberry Pi":"bg-pink-100 text-pink-800 border-pink-200"})[g]||"bg-gray-100 text-gray-800 border-gray-200",y=async()=>{if(navigator.share)try{await navigator.share({title:n.title,text:n.short_description||n.description,url:window.location.href})}catch{}else navigator.clipboard.writeText(window.location.href),r({title:"คัดลอกลิงก์แล้ว",description:"ลิงก์โครงงานถูกคัดลอกไปยังคลิปบอร์ดแล้ว"})};if(a)return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"กำลังโหลด..."})]})});if(!n)return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"ไม่พบโครงงาน"}),t.jsx(S,{onClick:()=>e("/projects"),children:"กลับไปหน้าโครงงาน"})]})});const x=[n.cover_image_url||n.featured_image_url||n.image_url,...n.gallery_images||[]].filter(Boolean);return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[t.jsx("div",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(S,{variant:"ghost",onClick:()=>e("/projects"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[t.jsx(tt,{className:"w-4 h-4 mr-2"}),"กลับไปหน้าโครงงาน"]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(S,{variant:"outline",size:"sm",onClick:y,className:"flex items-center",children:[t.jsx(lp,{className:"w-4 h-4 mr-2"}),"แชร์"]}),n.is_featured&&t.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-xs font-semibold flex items-center",children:[t.jsx(Se,{className:"w-3 h-3 mr-1 fill-current"}),"Featured"]})]})]})})}),t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[x.length>0&&t.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[t.jsxs("div",{className:"aspect-video relative",children:[t.jsx("img",{src:x[l],alt:n.title,className:"w-full h-full object-cover",onError:g=>{g.target.src="https://images.unsplash.com/photo-1461749280684-dccba630e2f6?ixlib=rb-4.0.3"}}),n.video_url&&l===0&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx(S,{size:"lg",className:"bg-black/50 hover:bg-black/70 text-white rounded-full",onClick:()=>window.open(n.video_url,"_blank"),children:t.jsx(Ys,{className:"w-12 h-12"})})})]}),x.length>1&&t.jsx("div",{className:"p-4 bg-gray-50",children:t.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:x.map((g,v)=>t.jsx("button",{onClick:()=>d(v),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 ${l===v?"border-indigo-500":"border-gray-200"}`,children:t.jsx("img",{src:g,alt:`${n.title} ${v+1}`,className:"w-full h-full object-cover"})},v))})})]}),t.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg p-8",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:n.title}),n.short_description&&t.jsx("p",{className:"text-xl text-gray-600 mb-4",children:n.short_description})]}),n.description&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"รายละเอียด"}),t.jsxs("div",{className:"prose prose-gray max-w-none",children:[t.jsx("p",{className:`text-gray-700 leading-relaxed ${!c&&n.description.length>300?"line-clamp-6":""}`,children:n.description}),n.description.length>300&&t.jsx(S,{variant:"link",onClick:()=>u(!c),className:"p-0 h-auto text-indigo-600",children:c?"ดูน้อยลง":"ดูเพิ่มเติม"})]})]}),n.content_html&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"เนื้อหาเพิ่มเติม"}),t.jsx("div",{className:"prose prose-gray max-w-none",dangerouslySetInnerHTML:{__html:n.content_html}})]}),n.technologies&&n.technologies.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"เทคโนโลยีที่ใช้"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:n.technologies.map((g,v)=>t.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-medium border ${f(g)}`,children:g},v))})]}),n.tags&&n.tags.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"แท็ก"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map((g,v)=>t.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-700",children:[t.jsx(gt,{className:"w-3 h-3 mr-1"}),g]},v))})]})]})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-2xl shadow-lg p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ข้อมูลโครงงาน"}),t.jsxs("div",{className:"space-y-4",children:[n.category&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"หมวดหมู่"}),t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:n.category})]}),n.difficulty_level&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ระดับความยาก"}),t.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${n.difficulty_level==="beginner"?"bg-green-100 text-green-800":n.difficulty_level==="intermediate"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:n.difficulty_level==="beginner"?"เริ่มต้น":n.difficulty_level==="intermediate"?"ปานกลาง":"ขั้นสูง"})]}),n.duration_hours&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"ระยะเวลา"}),t.jsxs("span",{className:"text-sm text-gray-900 flex items-center",children:[t.jsx(fe,{className:"w-4 h-4 mr-1"}),n.duration_hours," ชั่วโมง"]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"วันที่สร้าง"}),t.jsxs("span",{className:"text-sm text-gray-900 flex items-center",children:[t.jsx(Me,{className:"w-4 h-4 mr-1"}),m(n.created_at)]})]}),n.status&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"สถานะ"}),t.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${n.status==="published"?"bg-green-100 text-green-800":n.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:n.status==="published"?"เผยแพร่แล้ว":n.status==="draft"?"ร่าง":"เก็บถาวร"})]})]})]}),t.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ลิงก์ที่เกี่ยวข้อง"}),t.jsxs("div",{className:"space-y-3",children:[(n.project_url||n.demo_url)&&t.jsxs(S,{className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",onClick:()=>window.open(n.project_url||n.demo_url,"_blank"),children:[t.jsx(nr,{className:"w-4 h-4 mr-2"}),"ดูโครงงาน"]}),n.github_url&&t.jsxs(S,{variant:"outline",className:"w-full border-gray-300 text-gray-700 hover:bg-gray-50",onClick:()=>window.open(n.github_url,"_blank"),children:[t.jsx(Kt,{className:"w-4 h-4 mr-2"}),"ซอร์สโค้ด"]}),n.video_url&&t.jsxs(S,{variant:"outline",className:"w-full border-red-300 text-red-600 hover:bg-red-50",onClick:()=>window.open(n.video_url,"_blank"),children:[t.jsx(Ys,{className:"w-4 h-4 mr-2"}),"วิดีโอสาธิต"]})]})]})]})]})})]})},N2=()=>{const{toast:s}=ae(),e=at(),r=en(),[n,i]=p.useState(""),[a,o]=p.useState([]),[l,d]=p.useState(!0),[c,u]=p.useState(null),[h,m]=p.useState(!1),f=p.useCallback(async()=>{d(!0);const{data:j,error:T}=await y2();T?s({title:"ข้อผิดพลาดในการโหลดข้อมูล",description:T.message,variant:"destructive"}):o(j||[]),d(!1)},[s]),y=p.useCallback(async()=>{const{data:j,error:T}=await b2();!T&&j&&u(j)},[]);p.useEffect(()=>{var j;console.log("AdminProjectsPage mounted"),f(),y(),(j=r.state)!=null&&j.openCreateModal&&(console.log("Opening create modal from navigation state"),m(!0),e(r.pathname,{replace:!0}))},[f,y,r.state,e,r.pathname]),p.useEffect(()=>{console.log("Current state:",{loading:l,projects:a.length,showCreateForm:h,stats:c})},[l,a,h,c]);const x=async(j,T,M)=>{const B=!M,W=B?"อนุมัติ":"ไม่อนุมัติ";if(!confirm(`คุณแน่ใจหรือไม่ที่จะ${W}โครงงาน "${T}"?`))return;const{error:C}=await g2(j,B);C?s({title:`ไม่สามารถ${W}โครงงานได้`,description:C.message,variant:"destructive"}):(s({title:`${W}โครงงานสำเร็จ`,description:`โครงงาน "${T}" ถูก${W}แล้ว`}),f(),y())},g=async(j,T,M)=>{const B=!M,W=B?"เพิ่มในแนะนำ":"ลบจากแนะนำ",{error:C}=await x2(j,B);C?s({title:`ไม่สามารถ${W}ได้`,description:C.message,variant:"destructive"}):(s({title:`${W}สำเร็จ`,description:`โครงงาน "${T}" ถูก${W}แล้ว`}),f(),y())},v=async(j,T)=>{if(!confirm(`คุณแน่ใจหรือไม่ที่จะลบโครงงาน "${T}"?

การลบนี้จะเป็นการลบชั่วคราว สามารถกู้คืนได้`))return;const{error:M}=await p2(j);M?s({title:"ไม่สามารถลบโครงงานได้",description:M.message,variant:"destructive"}):(s({title:"ลบโครงงานสำเร็จ",description:`โครงงาน "${T}" ถูกลบเรียบร้อยแล้ว`}),f(),y())},w=()=>{f(),y()},b=j=>{s({title:"ฟีเจอร์ยังไม่พร้อมใช้งาน",description:`${j} ยังอยู่ในระหว่างการพัฒนา`,variant:"info"})},_=j=>new Date(j).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"}),N=a.filter(j=>{var T,M;return j.title.toLowerCase().includes(n.toLowerCase())||((T=j.category)==null?void 0:T.toLowerCase().includes(n.toLowerCase()))||((M=j.technologies)==null?void 0:M.some(B=>B.toLowerCase().includes(n.toLowerCase())))}),k={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};return t.jsxs(L.div,{initial:"initial",animate:"in",exit:"out",variants:k,className:"container mx-auto px-4 py-12",children:[t.jsxs(be,{children:[t.jsx("title",{children:"จัดการโครงงาน - ผู้ดูแลระบบ Login Learning"}),t.jsx("meta",{name:"description",content:"จัดการโครงงานและผลงานทั้งหมดในระบบ Login Learning"})]}),t.jsxs(L.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"flex flex-col sm:flex-row justify-between items-center mb-10",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs(S,{variant:"ghost",size:"sm",onClick:()=>e("/admin"),className:"mr-4 text-gray-600 hover:text-gray-900",children:[t.jsx(tt,{className:"w-4 h-4 mr-2"}),"ย้อนกลับ"]}),t.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-purple-900 mb-4 sm:mb-0",children:[t.jsx(Ae,{className:"inline-block w-8 h-8 mr-3 text-[#667eea]"}),"จัดการโครงงาน"]})]}),t.jsxs(S,{onClick:()=>{console.log("Create project button clicked"),m(!0)},className:"bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-white font-semibold shadow-lg",size:"lg",children:[t.jsx(Ur,{className:"w-5 h-5 mr-2"}),"เพิ่มโครงงานใหม่"]})]}),c&&t.jsxs(L.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"glass-effect p-6 rounded-xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-700 text-sm",children:"โครงงานทั้งหมด"}),t.jsx("p",{className:"text-2xl font-bold text-purple-900",children:c.totalProjects})]}),t.jsx(Ae,{className:"w-8 h-8 text-[#667eea]"})]})}),t.jsx("div",{className:"glass-effect p-6 rounded-xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-700 text-sm",children:"โครงงานแนะนำ"}),t.jsx("p",{className:"text-2xl font-bold text-purple-900",children:c.featuredProjects})]}),t.jsx(Se,{className:"w-8 h-8 text-yellow-400 fill-current"})]})}),t.jsx("div",{className:"glass-effect p-6 rounded-xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-700 text-sm",children:"หมวดหมู่"}),t.jsx("p",{className:"text-2xl font-bold text-purple-900",children:c.totalCategories})]}),t.jsx(gt,{className:"w-8 h-8 text-green-400"})]})}),t.jsx("div",{className:"glass-effect p-6 rounded-xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-700 text-sm",children:"การมองเห็น"}),t.jsx("p",{className:"text-2xl font-bold text-purple-900",children:"--"})]}),t.jsx(Ws,{className:"w-8 h-8 text-blue-400"})]})})]}),t.jsx("div",{className:"mb-6 glass-effect p-4 rounded-xl",children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(Z,{type:"text",placeholder:"ค้นหาโครงงาน (ชื่อ, หมวดหมู่, เทคโนโลยี)...",value:n,onChange:j=>i(j.target.value),className:"pl-10 w-full bg-slate-200 border-slate-400 text-gray-900 focus:border-[#667eea]"})]}),t.jsxs(S,{onClick:()=>{console.log("Search area create button clicked"),m(!0)},className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-6 py-2",children:[t.jsx(Ur,{className:"w-4 h-4 mr-2"}),"เพิ่มโครงงาน"]})]})}),t.jsxs("div",{className:"glass-effect rounded-xl shadow-xl overflow-x-auto",children:[l?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#667eea] mx-auto mb-4"}),t.jsx("p",{className:"text-purple-700",children:"กำลังโหลดข้อมูลโครงงาน..."})]}):t.jsxs("table",{className:"w-full min-w-max text-left text-purple-800",children:[t.jsx("thead",{className:"border-b border-slate-700",children:t.jsxs("tr",{className:"bg-purple-100/30",children:[t.jsx("th",{className:"p-4",children:"โครงงาน"}),t.jsx("th",{className:"p-4",children:"หมวดหมู่"}),t.jsx("th",{className:"p-4",children:"เทคโนโลยี"}),t.jsx("th",{className:"p-4",children:"สถานะ"}),t.jsx("th",{className:"p-4",children:"แนะนำ"}),t.jsx("th",{className:"p-4",children:"วันที่สร้าง"}),t.jsx("th",{className:"p-4 text-center",children:"การดำเนินการ"})]})}),t.jsx("tbody",{children:N.map((j,T)=>{var M,B;return t.jsxs(L.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:T*.05},className:"border-b border-slate-700/50 hover:bg-slate-700/20 transition-colors",children:[t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[j.image_url&&t.jsx("img",{src:j.image_url,alt:j.title,className:"w-12 h-12 object-cover rounded-lg",onError:W=>{W.target.style.display="none"}}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-purple-900",children:j.title}),t.jsx("p",{className:"text-sm text-purple-700 truncate max-w-xs",children:j.description||"ไม่มีคำอธิบาย"})]})]})}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-500/30 text-blue-800",children:j.category||"ไม่ระบุ"})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex flex-wrap gap-1 max-w-32",children:[(M=j.technologies)==null?void 0:M.slice(0,2).map((W,C)=>t.jsx("span",{className:"px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",children:W},C)),((B=j.technologies)==null?void 0:B.length)>2&&t.jsxs("span",{className:"px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",children:["+",j.technologies.length-2]})]})}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.is_approved?"bg-green-500/30 text-green-800":"bg-red-500/30 text-red-800"}`,children:j.is_approved?"อนุมัติแล้ว":"รออนุมัติ"})}),t.jsx("td",{className:"p-4",children:t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>g(j.id,j.title,j.is_featured),className:j.is_featured?"text-yellow-500 hover:bg-yellow-500/20":"text-gray-400 hover:bg-yellow-500/20",title:j.is_featured?"ลบจากแนะนำ":"เพิ่มในแนะนำ",children:j.is_featured?t.jsx(Se,{className:"w-4 h-4 fill-current"}):t.jsx(mp,{className:"w-4 h-4"})})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[t.jsx(Me,{className:"w-4 h-4 mr-1"}),_(j.created_at)]})}),t.jsx("td",{className:"p-4 text-center",children:t.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[j.demo_url&&t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>window.open(j.demo_url,"_blank"),className:"text-green-400 hover:bg-green-500/20",title:"ดูเดโม",children:t.jsx(ys,{className:"w-4 h-4"})}),j.github_url&&t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>window.open(j.github_url,"_blank"),className:"text-gray-400 hover:bg-gray-500/20",title:"ดู GitHub",children:t.jsx(Kt,{className:"w-4 h-4"})}),t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>b(`แก้ไขโครงงาน ${j.title}`),className:"text-blue-400 hover:bg-blue-500/20",title:"แก้ไขโครงงาน",children:t.jsx(ir,{className:"w-4 h-4"})}),t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>x(j.id,j.title,j.is_approved),className:j.is_approved?"text-orange-400 hover:bg-orange-500/20":"text-green-400 hover:bg-green-500/20",title:j.is_approved?"ไม่อนุมัติ":"อนุมัติ",children:t.jsx(Ce,{className:"w-4 h-4"})}),t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>v(j.id,j.title),className:"text-red-400 hover:bg-red-500/20",title:"ลบโครงงาน",children:t.jsx(Re,{className:"w-4 h-4"})})]})})]},j.id)})})]}),!l&&N.length===0&&t.jsxs("div",{className:"text-center p-8",children:[t.jsx(Tt,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),t.jsx("p",{className:"text-purple-700 text-lg",children:"ไม่พบโครงงานที่ตรงกับการค้นหา"}),t.jsx("p",{className:"text-purple-600 text-sm mt-2",children:"ลองปรับเปลี่ยนคำค้นหาหรือเพิ่มโครงงานใหม่"})]})]}),t.jsx(wh,{isOpen:h,onClose:()=>m(!1),onSuccess:w})]})},_2=()=>{var u,h,m,f,y,x,g;const[s,e]=p.useState(!1),[r,n]=p.useState(!1),i=en(),{user:a,signOut:o}=De(),l=[{title:"Dashboard",icon:Xs,path:"/admin",description:"ภาพรวมระบบ"},{title:"จัดการผู้ใช้",icon:ie,path:"/admin/users",description:"นักเรียน ผู้สอน และ Admin"},{title:"จัดการคอร์ส",icon:ge,path:"/admin/courses",description:"อนุมัติและจัดการคอร์ส"},{title:"จัดการโครงงาน",icon:Ae,path:"/admin/projects",description:"จัดการผลงานและโครงงาน"},{title:"สถิติและรายงาน",icon:Ws,path:"/admin/analytics",description:"ข้อมูลการใช้งานและยอดขาย"},{title:"จัดการเนื้อหา",icon:oe,path:"/admin/content",description:"การดูแลเนื้อหาและฟอรัม"},{title:"การสื่อสาร",icon:fs,path:"/admin/communications",description:"ประกาศและแจ้งเตือน"},{title:"ความปลอดภัย",icon:vi,path:"/admin/security",description:"การรักษาความปลอดภัย"},{title:"ตั้งค่าระบบ",icon:Ke,path:"/admin/settings",description:"การตั้งค่าเว็บไซต์"}],d=v=>v==="/admin"?i.pathname==="/admin":i.pathname.startsWith(v),c=async()=>{try{await o()}catch(v){console.error("Error signing out:",v)}};return t.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[t.jsx(xe,{children:r&&t.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 lg:hidden",onClick:()=>n(!1)})}),t.jsxs(L.div,{animate:{width:s?80:280,x:r?0:-280},transition:{duration:.3,ease:"easeInOut"},className:`fixed lg:relative left-0 top-0 h-full bg-white border-r border-gray-200 shadow-lg z-50 flex flex-col ${r?"block":"hidden lg:flex"}`,children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[!s&&t.jsxs(L.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-lg flex items-center justify-center",children:t.jsx(vi,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Admin Panel"}),t.jsx("p",{className:"text-xs text-gray-500",children:"จัดการระบบ"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(S,{variant:"ghost",size:"sm",onClick:()=>e(!s),className:"hidden lg:flex p-2",children:s?t.jsx(pi,{className:"w-4 h-4"}):t.jsx(Vf,{className:"w-4 h-4"})}),t.jsx(S,{variant:"ghost",size:"sm",onClick:()=>n(!1),className:"lg:hidden p-2",children:t.jsx(we,{className:"w-4 h-4"})})]})]}),t.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:t.jsx("div",{className:"space-y-1 px-3",children:l.map(v=>{const w=v.icon,b=d(v.path);return t.jsxs(Y,{to:v.path,onClick:()=>n(!1),className:`group flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${b?"bg-indigo-50 text-indigo-700 border-r-2 border-indigo-600":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[t.jsx(w,{className:`flex-shrink-0 w-5 h-5 ${b?"text-indigo-600":"text-gray-400 group-hover:text-gray-600"}`}),!s&&t.jsxs(L.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"ml-3 flex-1",children:[t.jsx("div",{className:"font-medium",children:v.title}),t.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:v.description})]})]},v.path)})})}),t.jsx("div",{className:"border-t border-gray-200 p-4",children:s?t.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:((y=(f=a==null?void 0:a.user_profiles)==null?void 0:f.full_name)==null?void 0:y.charAt(0))||"A"}),t.jsx(S,{variant:"ghost",size:"sm",onClick:c,className:"p-2 text-gray-400 hover:text-red-600",title:"ออกจากระบบ",children:t.jsx(Fr,{className:"w-4 h-4"})})]}):t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:((h=(u=a==null?void 0:a.user_profiles)==null?void 0:u.full_name)==null?void 0:h.charAt(0))||"A"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:((m=a==null?void 0:a.user_profiles)==null?void 0:m.full_name)||"Admin User"}),t.jsx("p",{className:"text-xs text-gray-500",children:"ผู้ดูแลระบบ"})]}),t.jsx(S,{variant:"ghost",size:"sm",onClick:c,className:"p-2 text-gray-400 hover:text-red-600",title:"ออกจากระบบ",children:t.jsx(Fr,{className:"w-4 h-4"})})]})})]}),t.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[t.jsxs("header",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(S,{variant:"ghost",size:"sm",onClick:()=>n(!0),className:"lg:hidden p-2",children:t.jsx(Hc,{className:"w-5 h-5"})}),t.jsxs("div",{className:"hidden md:block",children:[t.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:((x=l.find(v=>d(v.path)))==null?void 0:x.title)||"Admin Panel"}),t.jsx("p",{className:"text-sm text-gray-600",children:((g=l.find(v=>d(v.path)))==null?void 0:g.description)||"ระบบจัดการ"})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"hidden md:flex items-center space-x-2",children:t.jsxs("div",{className:"relative",children:[t.jsx(Yt,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"ค้นหา...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent w-64"})]})}),t.jsxs(S,{variant:"ghost",size:"sm",className:"relative p-2",children:[t.jsx(ia,{className:"w-5 h-5"}),t.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full text-xs flex items-center justify-center text-white",children:"3"})]}),t.jsx("div",{className:"hidden md:flex items-center space-x-2",children:t.jsx(Y,{to:"/courses",children:t.jsx(S,{variant:"outline",size:"sm",children:"ดูเว็บไซต์"})})})]})]}),t.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:t.jsx(Ch,{})})]})]})},k2=()=>{const{toast:s}=ae(),{user:e,signOut:r,isAdmin:n}=De(),i=at(),[a,o]=p.useState(!1),l=async()=>{try{await r(),s({title:"ออกจากระบบสำเร็จแล้ว"}),i("/")}catch(c){s({title:"เกิดข้อผิดพลาดในการออกจากระบบ",description:c.message,variant:"destructive"})}},d=[{to:"/",label:"หน้าแรก",icon:Kf},{to:"/courses",label:"คอร์สเรียน",icon:zc},{to:"/projects",label:"โครงงาน",icon:Ae},{to:"/onsite",label:"การเรียน Onsite",icon:bs},{to:"/about",label:"เกี่ยวกับเรา",icon:wi},{to:"/contact",label:"ติดต่อ",icon:Gt}];return t.jsxs(L.nav,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8},className:"glass-effect fixed top-0 left-0 right-0 z-50 px-4 sm:px-6 py-2 sm:py-3 shadow-lg",children:[t.jsxs("div",{className:"max-w-screen-xl mx-auto flex items-center justify-between",children:[t.jsxs(Y,{to:"/",className:"flex items-center space-x-2 flex-shrink-0",children:[t.jsx("img",{src:"/Logo.png",alt:"Login Learning Logo",className:"w-8 h-8 sm:w-10 sm:h-10 object-contain"}),t.jsx("span",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-black hidden sm:block",children:"Login Learning"})]}),t.jsxs("div",{className:"hidden lg:flex items-center space-x-3 xl:space-x-4",children:[d.map(c=>t.jsxs(Y,{to:c.to,className:"text-black hover:text-blue-700 transition-colors flex items-center space-x-1 px-2 py-1 rounded-md hover:bg-blue-50",children:[t.jsx(c.icon,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm font-medium",children:c.label})]},c.to)),n&&t.jsxs(Y,{to:"/admin",className:"text-blue-600 hover:text-blue-800 transition-colors flex items-center space-x-1 px-2 py-1 rounded-md hover:bg-blue-50",children:[t.jsx(lo,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm font-medium",children:"ผู้ดูแลระบบ"})]})]}),t.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 flex-shrink-0",children:[e?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[t.jsx(S,{variant:"ghost",size:"sm",className:"text-black hover:bg-blue-50 hover:text-blue-700",asChild:!0,children:t.jsxs(Y,{to:"/dashboard",className:"flex items-center space-x-1",children:[t.jsx(Xs,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden lg:inline text-sm",children:"แดชบอร์ด"})]})}),t.jsxs(S,{variant:"outline",size:"sm",className:"text-black border-slate-300 hover:bg-blue-50 hover:text-blue-700 hover:border-blue-300",onClick:l,children:[t.jsx(Fr,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden lg:inline ml-1 text-sm",children:"ออกจากระบบ"})]})]}),t.jsx("div",{className:"md:hidden relative",children:t.jsxs(S,{variant:"ghost",size:"sm",onClick:()=>o(!a),className:"flex items-center space-x-1 text-black hover:bg-blue-50",children:[t.jsx(wi,{className:"w-5 h-5"}),t.jsx(aa,{className:`w-4 h-4 transition-transform ${a?"rotate-180":""}`})]})})]}):t.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[t.jsx(S,{variant:"ghost",size:"sm",className:"text-black hover:bg-blue-50 hover:text-blue-700 text-sm",asChild:!0,children:t.jsx(Y,{to:"/login",children:"เข้าสู่ระบบ"})}),t.jsx(S,{size:"sm",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 text-white text-sm",asChild:!0,children:t.jsx(Y,{to:"/signup",children:"สมัครเรียน"})})]}),t.jsx(S,{variant:"ghost",size:"sm",className:"lg:hidden ml-2 text-black hover:bg-blue-50",onClick:()=>o(!a),children:a?t.jsx(we,{className:"w-5 h-5"}):t.jsx(Hc,{className:"w-5 h-5"})})]})]}),t.jsx(xe,{children:a&&t.jsx(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"lg:hidden mt-2 px-2 pb-4 border-t border-gray-200 bg-white/95 backdrop-blur-sm",children:t.jsxs("div",{className:"space-y-2 pt-4",children:[d.map(c=>t.jsxs(Y,{to:c.to,onClick:()=>o(!1),className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-black hover:bg-blue-50 hover:text-blue-700 transition-colors",children:[t.jsx(c.icon,{className:"w-5 h-5"}),t.jsx("span",{className:"font-medium",children:c.label})]},c.to)),n&&t.jsxs(Y,{to:"/admin",onClick:()=>o(!1),className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-blue-600 hover:bg-blue-50 hover:text-blue-700 transition-colors",children:[t.jsx(lo,{className:"w-5 h-5"}),t.jsx("span",{className:"font-medium",children:"ผู้ดูแลระบบ"})]}),e&&t.jsx(t.Fragment,{children:t.jsxs("div",{className:"border-t border-gray-200 pt-2 mt-2",children:[t.jsxs(Y,{to:"/dashboard",onClick:()=>o(!1),className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-black hover:bg-blue-50 hover:text-blue-700 transition-colors",children:[t.jsx(Xs,{className:"w-5 h-5"}),t.jsx("span",{className:"font-medium",children:"แดชบอร์ด"})]}),t.jsxs("button",{onClick:()=>{l(),o(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[t.jsx(Fr,{className:"w-5 h-5"}),t.jsx("span",{className:"font-medium",children:"ออกจากระบบ"})]})]})})]})})})]})},S2=()=>{const s={name:"Login Learning",description:"แพลตฟอร์มเสริมทักษะและค้นหาตัวตนของน้องมัธยม ต้น-ปลาย เพื่อตัดสินใจเข้าเรียนต่อในระดับมัธยมปลาย/มหาวิทยาลัย",address:"917 จรัญสนิทวงศ์ 75 บางพลัด บางพลัด",contacts:[{name:"พี่ก้อง",phone:"090-969-9578"},{name:"พี่เก็ก",phone:"083-436-0294"}],lineGroup:"https://line.me/ti/g/TbTTLXEkRS",email:"info@loginlearning.com"},e=[{name:"สาขาลาดกระบัง",address:"ถนนฉลองกรุง ลาดกระบัง, กรุงเทพฯ 10520"},{name:"สาขาบางพลัด",address:"400 ซ.จรัญสนิทวงศ์ 75 แขวงบางพลัด, กรุงเทพฯ 10700"},{name:"สาขาศรีราชา",address:"165/31 อำเภอศรีราชา ชลบุรี 20110"},{name:"สาขาระยอง",address:"84/48 อำเภอเมืองระยอง ระยอง 21000"}];return t.jsx("footer",{className:"py-12 px-6 border-t border-slate-200 bg-slate-50 backdrop-blur-md",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12",children:[t.jsxs("div",{children:[t.jsxs(Y,{to:"/",className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-700 to-blue-500 rounded-lg flex items-center justify-center",children:t.jsx(ge,{className:"w-6 h-6 text-blue-800"})}),t.jsx("span",{className:"text-2xl font-bold text-black",children:s.name})]}),t.jsx("p",{className:"text-black opacity-80 leading-relaxed mb-4",children:s.description}),t.jsxs("div",{className:"flex items-start space-x-2 text-black mb-2",children:[t.jsx(bs,{className:"w-5 h-5 mt-1 text-blue-600 shrink-0"}),t.jsx("span",{children:s.address})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-black mb-2",children:[t.jsx(pt,{className:"w-5 h-5 text-blue-600 shrink-0"}),t.jsx("a",{href:`mailto:${s.email}`,className:"hover:text-blue-700 transition-colors",children:s.email})]}),s.contacts.map(r=>t.jsxs("div",{className:"flex items-center space-x-2 text-black mb-1",children:[t.jsx(Gt,{className:"w-5 h-5 text-blue-600 shrink-0"}),t.jsxs("span",{children:[r.name,": ",r.phone]})]},r.name)),t.jsxs("div",{className:"flex items-center space-x-2 text-black mt-2",children:[t.jsx(ie,{className:"w-5 h-5 text-blue-600 shrink-0"}),t.jsx("a",{href:s.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-700 transition-colors",children:"Line Group"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-black font-semibold mb-4 text-lg",children:"สาขาที่เปิดบริการ"}),t.jsx("ul",{className:"space-y-3",children:e.map(r=>t.jsxs("li",{children:[t.jsx("p",{className:"font-medium text-black",children:r.name}),t.jsx("p",{className:"text-black text-sm",children:r.address})]},r.name))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-black font-semibold mb-4 text-lg",children:"ลิงก์ด่วน"}),t.jsxs("ul",{className:"space-y-2 text-black",children:[t.jsx("li",{children:t.jsx(Y,{to:"/courses",className:"hover:text-blue-700 transition-colors",children:"คอร์สเรียนทั้งหมด"})}),t.jsx("li",{children:t.jsx(Y,{to:"/admissions",className:"hover:text-blue-700 transition-colors",children:"ข้อมูลการรับเข้ามหาวิทยาลัย"})}),t.jsx("li",{children:t.jsx(Y,{to:"/about#services",className:"hover:text-blue-700 transition-colors",children:"บริการและกิจกรรม"})}),t.jsx("li",{children:t.jsx(Y,{to:"/about#projects",className:"hover:text-blue-700 transition-colors",children:"ตัวอย่างโครงงาน"})}),t.jsx("li",{children:t.jsx(Y,{to:"/contact",className:"hover:text-blue-700 transition-colors",children:"ติดต่อเรา"})})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-black font-semibold mb-4 text-lg",children:"ติดตามเรา"}),t.jsxs("ul",{className:"space-y-2 text-black",children:[t.jsx("li",{children:t.jsx("button",{onClick:()=>alert("🚧 ฟีเจอร์นี้ยังไม่พร้อมใช้งาน"),className:"hover:text-blue-700 transition-colors",children:"Facebook"})}),t.jsx("li",{children:t.jsx("button",{onClick:()=>alert("🚧 ฟีเจอร์นี้ยังไม่พร้อมใช้งาน"),className:"hover:text-blue-700 transition-colors",children:"Instagram"})}),t.jsx("li",{children:t.jsx("button",{onClick:()=>alert("🚧 ฟีเจอร์นี้ยังไม่พร้อมใช้งาน"),className:"hover:text-blue-700 transition-colors",children:"YouTube"})}),t.jsx("li",{children:t.jsx("a",{href:s.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-700 transition-colors",children:"Line Official"})})]})]})]}),t.jsxs("div",{className:"border-t border-slate-300 mt-8 pt-8 text-center",children:[t.jsxs("p",{className:"text-black",children:["© ",new Date().getFullYear()," ",s.name,". สงวนลิขสิทธิ์ทั้งหมด."]}),t.jsx("p",{className:"text-xs text-black mt-1",children:"ข้อมูลในเว็บไซต์นี้เป็นข้อมูลเบื้องต้นและอาจมีการเปลี่ยนแปลง โปรดตรวจสอบข้อมูลล่าสุดจากประกาศอย่างเป็นทางการ"})]})]})})},Er=({children:s})=>{const{user:e,loading:r,isSupabaseConnected:n}=De(),i=en();return r?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("p",{className:"text-white text-xl",children:"กำลังตรวจสอบสิทธิ์..."})}):n?e?s:t.jsx(ri,{to:"/login",state:{from:i},replace:!0}):t.jsx(ri,{to:"/login",state:{from:i,message:"โปรดเชื่อมต่อ Supabase ก่อนเข้าถึงหน้านี้"},replace:!0})},C2=({children:s})=>{const{user:e,loading:r,isAdmin:n,userRole:i}=De(),a=en();return r?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"กำลังตรวจสอบสิทธิ์..."})]})}):e?n||i==="instructor"||i==="super_admin"||i==="branch_manager"?s:t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[t.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"ไม่มีสิทธิ์เข้าถึง"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กรุณาติดต่อผู้ดูแลระบบ"}),t.jsx("button",{onClick:()=>window.history.back(),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:"กลับไปหน้าที่แล้ว"})]})}):t.jsx(ri,{to:"/login",state:{from:a},replace:!0})};class T2 extends te.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("Error caught by boundary:",e,r)}render(){var e;return this.state.hasError?t.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#e74c3c"},children:[t.jsx("h1",{children:"Something went wrong"}),t.jsxs("p",{children:["Error: ",(e=this.state.error)==null?void 0:e.message]}),t.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),children:"Try Again"})]}):this.props.children}}function E2(){return t.jsx(T2,{children:t.jsxs(nc,{children:[t.jsxs(be,{children:[t.jsx("title",{children:"Login Learning - แพลตฟอร์มเรียนรู้วิศวกรรมออนไลน์"}),t.jsx("meta",{name:"description",content:"เรียนรู้การทำโครงงานวิศวกรรมกับผู้เชี่ยวชาญ ค้นหาตัวตนสำหรับน้องมัธยม เพื่อตัดสินใจเข้าเรียนต่อ พร้อมคอร์สเรียนที่หลากหลายและการสนับสนุนตลอด 24 ชั่วโมง"})]}),t.jsx(Sp,{children:t.jsx(Th,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:t.jsx(cw,{children:t.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-white to-slate-50 text-black",children:[t.jsx(k2,{}),t.jsx("main",{className:"flex-grow pt-20",children:t.jsxs(Eh,{children:[t.jsx(he,{path:"/",element:t.jsx(vw,{})}),t.jsx(he,{path:"/about",element:t.jsx(ww,{})}),t.jsx(he,{path:"/courses",element:t.jsx(jw,{})}),t.jsx(he,{path:"/courses/:courseId",element:t.jsx(Qw,{})}),t.jsx(he,{path:"/projects",element:t.jsx(w2,{})}),t.jsx(he,{path:"/projects/:projectId",element:t.jsx(j2,{})}),t.jsx(he,{path:"/courses/:courseId/learn",element:t.jsx(Er,{children:t.jsx(bj,{})})}),t.jsx(he,{path:"/onsite",element:t.jsx(vj,{})}),t.jsx(he,{path:"/admissions",element:t.jsx(wj,{})}),t.jsx(he,{path:"/contact",element:t.jsx(jj,{})}),t.jsx(he,{path:"/login",element:t.jsx(Nj,{})}),t.jsx(he,{path:"/signup",element:t.jsx(_j,{})}),t.jsx(he,{path:"/dashboard",element:t.jsx(Er,{children:t.jsx(kj,{})})}),t.jsx(he,{path:"/profile",element:t.jsx(Er,{children:t.jsx(Sj,{})})}),t.jsx(he,{path:"/settings",element:t.jsx(Er,{children:t.jsx(Oj,{})})}),t.jsxs(he,{path:"/admin/*",element:t.jsx(C2,{children:t.jsx(_2,{})}),children:[t.jsx(he,{index:!0,element:t.jsx($j,{})}),t.jsx(he,{path:"users",element:t.jsx(Fj,{})}),t.jsx(he,{path:"courses",element:t.jsx(zj,{})}),t.jsx(he,{path:"courses/:courseId/content",element:t.jsx(i2,{})}),t.jsx(he,{path:"assignments/:assignmentId/grading",element:t.jsx(l2,{})}),t.jsx(he,{path:"projects",element:t.jsx(N2,{})})]})]})}),t.jsx(S2,{}),t.jsx(_p,{}),t.jsx(qy,{})]})})})})]})})}ni.createRoot(document.getElementById("root")).render(t.jsx(te.StrictMode,{children:t.jsx(E2,{})}));
