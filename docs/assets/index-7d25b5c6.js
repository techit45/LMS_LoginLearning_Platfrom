var fu=Object.defineProperty;var xu=(s,t,r)=>t in s?fu(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var it=(s,t,r)=>(xu(s,typeof t!="symbol"?t+"":t,r),r);import{r as x,a as Sn,g as Cn,b as te,c as pu,R as gu,d as yu,e as Ge}from"./vendor-48cd178f.js";import{L as J,u as Js,a as st,b as qr,O as bu,N as Ia,H as vu,R as wu,c as ue}from"./router-c8d7685c.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var ol={exports:{}},Gr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ju=x,Nu=Symbol.for("react.element"),_u=Symbol.for("react.fragment"),ku=Object.prototype.hasOwnProperty,Su=ju.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cu={key:!0,ref:!0,__self:!0,__source:!0};function ll(s,t,r){var a,n={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)ku.call(t,a)&&!Cu.hasOwnProperty(a)&&(n[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:Nu,type:s,key:i,ref:o,props:n,_owner:Su.current}}Gr.Fragment=_u;Gr.jsx=ll;Gr.jsxs=ll;ol.exports=Gr;var e=ol.exports,Da={},fi=Sn;Da.createRoot=fi.createRoot,Da.hydrateRoot=fi.hydrateRoot;var Tu=typeof Element<"u",Eu=typeof Map=="function",Pu=typeof Set=="function",Au=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function jr(s,t){if(s===t)return!0;if(s&&t&&typeof s=="object"&&typeof t=="object"){if(s.constructor!==t.constructor)return!1;var r,a,n;if(Array.isArray(s)){if(r=s.length,r!=t.length)return!1;for(a=r;a--!==0;)if(!jr(s[a],t[a]))return!1;return!0}var i;if(Eu&&s instanceof Map&&t instanceof Map){if(s.size!==t.size)return!1;for(i=s.entries();!(a=i.next()).done;)if(!t.has(a.value[0]))return!1;for(i=s.entries();!(a=i.next()).done;)if(!jr(a.value[1],t.get(a.value[0])))return!1;return!0}if(Pu&&s instanceof Set&&t instanceof Set){if(s.size!==t.size)return!1;for(i=s.entries();!(a=i.next()).done;)if(!t.has(a.value[0]))return!1;return!0}if(Au&&ArrayBuffer.isView(s)&&ArrayBuffer.isView(t)){if(r=s.length,r!=t.length)return!1;for(a=r;a--!==0;)if(s[a]!==t[a])return!1;return!0}if(s.constructor===RegExp)return s.source===t.source&&s.flags===t.flags;if(s.valueOf!==Object.prototype.valueOf&&typeof s.valueOf=="function"&&typeof t.valueOf=="function")return s.valueOf()===t.valueOf();if(s.toString!==Object.prototype.toString&&typeof s.toString=="function"&&typeof t.toString=="function")return s.toString()===t.toString();if(n=Object.keys(s),r=n.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,n[a]))return!1;if(Tu&&s instanceof Element)return!1;for(a=r;a--!==0;)if(!((n[a]==="_owner"||n[a]==="__v"||n[a]==="__o")&&s.$$typeof)&&!jr(s[n[a]],t[n[a]]))return!1;return!0}return s!==s&&t!==t}var Lu=function(t,r){try{return jr(t,r)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}};const Ru=Cn(Lu);var Mu=function(s,t,r,a,n,i,o,l){if(!s){var d;if(t===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,a,n,i,o,l],u=0;d=new Error(t.replace(/%s/g,function(){return c[u++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}},Iu=Mu;const xi=Cn(Iu);var Du=function(t,r,a,n){var i=a?a.call(n,t,r):void 0;if(i!==void 0)return!!i;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var o=Object.keys(t),l=Object.keys(r);if(o.length!==l.length)return!1;for(var d=Object.prototype.hasOwnProperty.bind(r),c=0;c<o.length;c++){var u=o[c];if(!d(u))return!1;var h=t[u],m=r[u];if(i=a?a.call(n,h,m,u):void 0,i===!1||i===void 0&&h!==m)return!1}return!0};const Ou=Cn(Du);var cl=(s=>(s.BASE="base",s.BODY="body",s.HEAD="head",s.HTML="html",s.LINK="link",s.META="meta",s.NOSCRIPT="noscript",s.SCRIPT="script",s.STYLE="style",s.TITLE="title",s.FRAGMENT="Symbol(react.fragment)",s))(cl||{}),da={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},pi=Object.values(cl),Tn={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},$u=Object.entries(Tn).reduce((s,[t,r])=>(s[r]=t,s),{}),Je="data-rh",os={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},ls=(s,t)=>{for(let r=s.length-1;r>=0;r-=1){const a=s[r];if(Object.prototype.hasOwnProperty.call(a,t))return a[t]}return null},Fu=s=>{let t=ls(s,"title");const r=ls(s,os.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,()=>t);const a=ls(s,os.DEFAULT_TITLE);return t||a||void 0},Uu=s=>ls(s,os.ON_CHANGE_CLIENT_STATE)||(()=>{}),ua=(s,t)=>t.filter(r=>typeof r[s]<"u").map(r=>r[s]).reduce((r,a)=>({...r,...a}),{}),Vu=(s,t)=>t.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,a)=>{if(!r.length){const n=Object.keys(a);for(let i=0;i<n.length;i+=1){const l=n[i].toLowerCase();if(s.indexOf(l)!==-1&&a[l])return r.concat(a)}}return r},[]),zu=s=>console&&typeof console.warn=="function"&&console.warn(s),ws=(s,t,r)=>{const a={};return r.filter(n=>Array.isArray(n[s])?!0:(typeof n[s]<"u"&&zu(`Helmet: ${s} should be of type "Array". Instead found type "${typeof n[s]}"`),!1)).map(n=>n[s]).reverse().reduce((n,i)=>{const o={};i.filter(d=>{let c;const u=Object.keys(d);for(let m=0;m<u.length;m+=1){const f=u[m],g=f.toLowerCase();t.indexOf(g)!==-1&&!(c==="rel"&&d[c].toLowerCase()==="canonical")&&!(g==="rel"&&d[g].toLowerCase()==="stylesheet")&&(c=g),t.indexOf(f)!==-1&&(f==="innerHTML"||f==="cssText"||f==="itemprop")&&(c=f)}if(!c||!d[c])return!1;const h=d[c].toLowerCase();return a[c]||(a[c]={}),o[c]||(o[c]={}),a[c][h]?!1:(o[c][h]=!0,!0)}).reverse().forEach(d=>n.push(d));const l=Object.keys(o);for(let d=0;d<l.length;d+=1){const c=l[d],u={...a[c],...o[c]};a[c]=u}return n},[]).reverse()},Bu=(s,t)=>{if(Array.isArray(s)&&s.length){for(let r=0;r<s.length;r+=1)if(s[r][t])return!0}return!1},qu=s=>({baseTag:Vu(["href"],s),bodyAttributes:ua("bodyAttributes",s),defer:ls(s,os.DEFER),encode:ls(s,os.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:ua("htmlAttributes",s),linkTags:ws("link",["rel","href"],s),metaTags:ws("meta",["name","charset","http-equiv","property","itemprop"],s),noscriptTags:ws("noscript",["innerHTML"],s),onChangeClientState:Uu(s),scriptTags:ws("script",["src","innerHTML"],s),styleTags:ws("style",["cssText"],s),title:Fu(s),titleAttributes:ua("titleAttributes",s),prioritizeSeoTags:Bu(s,os.PRIORITIZE_SEO_TAGS)}),dl=s=>Array.isArray(s)?s.join(""):s,Gu=(s,t)=>{const r=Object.keys(s);for(let a=0;a<r.length;a+=1)if(t[r[a]]&&t[r[a]].includes(s[r[a]]))return!0;return!1},ha=(s,t)=>Array.isArray(s)?s.reduce((r,a)=>(Gu(a,t)?r.priority.push(a):r.default.push(a),r),{priority:[],default:[]}):{default:s,priority:[]},gi=(s,t)=>({...s,[t]:void 0}),Hu=["noscript","script","style"],Oa=(s,t=!0)=>t===!1?String(s):String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),ul=s=>Object.keys(s).reduce((t,r)=>{const a=typeof s[r]<"u"?`${r}="${s[r]}"`:`${r}`;return t?`${t} ${a}`:a},""),Wu=(s,t,r,a)=>{const n=ul(r),i=dl(t);return n?`<${s} ${Je}="true" ${n}>${Oa(i,a)}</${s}>`:`<${s} ${Je}="true">${Oa(i,a)}</${s}>`},Ku=(s,t,r=!0)=>t.reduce((a,n)=>{const i=n,o=Object.keys(i).filter(c=>!(c==="innerHTML"||c==="cssText")).reduce((c,u)=>{const h=typeof i[u]>"u"?u:`${u}="${Oa(i[u],r)}"`;return c?`${c} ${h}`:h},""),l=i.innerHTML||i.cssText||"",d=Hu.indexOf(s)===-1;return`${a}<${s} ${Je}="true" ${o}${d?"/>":`>${l}</${s}>`}`},""),hl=(s,t={})=>Object.keys(s).reduce((r,a)=>{const n=Tn[a];return r[n||a]=s[a],r},t),Ju=(s,t,r)=>{const a={key:t,[Je]:!0},n=hl(r,a);return[te.createElement("title",n,t)]},Nr=(s,t)=>t.map((r,a)=>{const n={key:a,[Je]:!0};return Object.keys(r).forEach(i=>{const l=Tn[i]||i;if(l==="innerHTML"||l==="cssText"){const d=r.innerHTML||r.cssText;n.dangerouslySetInnerHTML={__html:d}}else n[l]=r[i]}),te.createElement(s,n)}),Be=(s,t,r=!0)=>{switch(s){case"title":return{toComponent:()=>Ju(s,t.title,t.titleAttributes),toString:()=>Wu(s,t.title,t.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>hl(t),toString:()=>ul(t)};default:return{toComponent:()=>Nr(s,t),toString:()=>Ku(s,t,r)}}},Xu=({metaTags:s,linkTags:t,scriptTags:r,encode:a})=>{const n=ha(s,da.meta),i=ha(t,da.link),o=ha(r,da.script);return{priorityMethods:{toComponent:()=>[...Nr("meta",n.priority),...Nr("link",i.priority),...Nr("script",o.priority)],toString:()=>`${Be("meta",n.priority,a)} ${Be("link",i.priority,a)} ${Be("script",o.priority,a)}`},metaTags:n.default,linkTags:i.default,scriptTags:o.default}},Yu=s=>{const{baseTag:t,bodyAttributes:r,encode:a=!0,htmlAttributes:n,noscriptTags:i,styleTags:o,title:l="",titleAttributes:d,prioritizeSeoTags:c}=s;let{linkTags:u,metaTags:h,scriptTags:m}=s,f={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:f,linkTags:u,metaTags:h,scriptTags:m}=Xu(s)),{priority:f,base:Be("base",t,a),bodyAttributes:Be("bodyAttributes",r,a),htmlAttributes:Be("htmlAttributes",n,a),link:Be("link",u,a),meta:Be("meta",h,a),noscript:Be("noscript",i,a),script:Be("script",m,a),style:Be("style",o,a),title:Be("title",{title:l,titleAttributes:d},a)}},$a=Yu,ir=[],ml=!!(typeof window<"u"&&window.document&&window.document.createElement),Fa=class{constructor(s,t){it(this,"instances",[]);it(this,"canUseDOM",ml);it(this,"context");it(this,"value",{setHelmet:s=>{this.context.helmet=s},helmetInstances:{get:()=>this.canUseDOM?ir:this.instances,add:s=>{(this.canUseDOM?ir:this.instances).push(s)},remove:s=>{const t=(this.canUseDOM?ir:this.instances).indexOf(s);(this.canUseDOM?ir:this.instances).splice(t,1)}}});this.context=s,this.canUseDOM=t||!1,t||(s.helmet=$a({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Qu={},fl=te.createContext(Qu),hs,xl=(hs=class extends x.Component{constructor(r){super(r);it(this,"helmetData");this.helmetData=new Fa(this.props.context||{},hs.canUseDOM)}render(){return te.createElement(fl.Provider,{value:this.helmetData.value},this.props.children)}},it(hs,"canUseDOM",ml),hs),Yt=(s,t)=>{const r=document.head||document.querySelector("head"),a=r.querySelectorAll(`${s}[${Je}]`),n=[].slice.call(a),i=[];let o;return t&&t.length&&t.forEach(l=>{const d=document.createElement(s);for(const c in l)if(Object.prototype.hasOwnProperty.call(l,c))if(c==="innerHTML")d.innerHTML=l.innerHTML;else if(c==="cssText")d.styleSheet?d.styleSheet.cssText=l.cssText:d.appendChild(document.createTextNode(l.cssText));else{const u=c,h=typeof l[u]>"u"?"":l[u];d.setAttribute(c,h)}d.setAttribute(Je,"true"),n.some((c,u)=>(o=u,d.isEqualNode(c)))?n.splice(o,1):i.push(d)}),n.forEach(l=>{var d;return(d=l.parentNode)==null?void 0:d.removeChild(l)}),i.forEach(l=>r.appendChild(l)),{oldTags:n,newTags:i}},Ua=(s,t)=>{const r=document.getElementsByTagName(s)[0];if(!r)return;const a=r.getAttribute(Je),n=a?a.split(","):[],i=[...n],o=Object.keys(t);for(const l of o){const d=t[l]||"";r.getAttribute(l)!==d&&r.setAttribute(l,d),n.indexOf(l)===-1&&n.push(l);const c=i.indexOf(l);c!==-1&&i.splice(c,1)}for(let l=i.length-1;l>=0;l-=1)r.removeAttribute(i[l]);n.length===i.length?r.removeAttribute(Je):r.getAttribute(Je)!==o.join(",")&&r.setAttribute(Je,o.join(","))},Zu=(s,t)=>{typeof s<"u"&&document.title!==s&&(document.title=dl(s)),Ua("title",t)},yi=(s,t)=>{const{baseTag:r,bodyAttributes:a,htmlAttributes:n,linkTags:i,metaTags:o,noscriptTags:l,onChangeClientState:d,scriptTags:c,styleTags:u,title:h,titleAttributes:m}=s;Ua("body",a),Ua("html",n),Zu(h,m);const f={baseTag:Yt("base",r),linkTags:Yt("link",i),metaTags:Yt("meta",o),noscriptTags:Yt("noscript",l),scriptTags:Yt("script",c),styleTags:Yt("style",u)},g={},y={};Object.keys(f).forEach(p=>{const{newTags:v,oldTags:w}=f[p];v.length&&(g[p]=v),w.length&&(y[p]=f[p].oldTags)}),t&&t(),d(s,g,y)},js=null,eh=s=>{js&&cancelAnimationFrame(js),s.defer?js=requestAnimationFrame(()=>{yi(s,()=>{js=null})}):(yi(s),js=null)},th=eh,bi=class extends x.Component{constructor(){super(...arguments);it(this,"rendered",!1)}shouldComponentUpdate(t){return!Ou(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:r}=this.props.context;let a=null;const n=qu(t.get().map(i=>{const o={...i.props};return delete o.context,o}));xl.canUseDOM?th(n):$a&&(a=$a(n)),r(a)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},Ma,ge=(Ma=class extends x.Component{shouldComponentUpdate(s){return!Ru(gi(this.props,"helmetData"),gi(s,"helmetData"))}mapNestedChildrenToProps(s,t){if(!t)return null;switch(s.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${s.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(s,t,r,a){return{...t,[s.type]:[...t[s.type]||[],{...r,...this.mapNestedChildrenToProps(s,a)}]}}mapObjectTypeChildren(s,t,r,a){switch(s.type){case"title":return{...t,[s.type]:a,titleAttributes:{...r}};case"body":return{...t,bodyAttributes:{...r}};case"html":return{...t,htmlAttributes:{...r}};default:return{...t,[s.type]:{...r}}}}mapArrayTypeChildrenToProps(s,t){let r={...t};return Object.keys(s).forEach(a=>{r={...r,[a]:s[a]}}),r}warnOnInvalidChildren(s,t){return xi(pi.some(r=>s.type===r),typeof s.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${pi.join(", ")} are allowed. Helmet does not support rendering <${s.type}> elements. Refer to our API for more information.`),xi(!t||typeof t=="string"||Array.isArray(t)&&!t.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${s.type}>. Did you forget to wrap your children in braces? ( <${s.type}>{\`\`}</${s.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(s,t){let r={};return te.Children.forEach(s,a=>{if(!a||!a.props)return;const{children:n,...i}=a.props,o=Object.keys(i).reduce((d,c)=>(d[$u[c]||c]=i[c],d),{});let{type:l}=a;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(a,n),l){case"Symbol(react.fragment)":t=this.mapChildrenToProps(n,t);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(a,r,o,n);break;default:t=this.mapObjectTypeChildren(a,t,o,n);break}}),this.mapArrayTypeChildrenToProps(r,t)}render(){const{children:s,...t}=this.props;let r={...t},{helmetData:a}=t;if(s&&(r=this.mapChildrenToProps(s,r)),a&&!(a instanceof Fa)){const n=a;a=new Fa(n.context,!0),delete r.helmetData}return a?te.createElement(bi,{...r,context:a.value}):te.createElement(fl.Consumer,null,n=>te.createElement(bi,{...r,context:n}))}},it(Ma,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Ma);function pl(s){var t,r,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var n=s.length;for(t=0;t<n;t++)s[t]&&(r=pl(s[t]))&&(a&&(a+=" "),a+=r)}else for(r in s)s[r]&&(a&&(a+=" "),a+=r);return a}function gl(){for(var s,t,r=0,a="",n=arguments.length;r<n;r++)(s=arguments[r])&&(t=pl(s))&&(a&&(a+=" "),a+=t);return a}function sh(){for(var s=0,t,r,a="";s<arguments.length;)(t=arguments[s++])&&(r=yl(t))&&(a&&(a+=" "),a+=r);return a}function yl(s){if(typeof s=="string")return s;for(var t,r="",a=0;a<s.length;a++)s[a]&&(t=yl(s[a]))&&(r&&(r+=" "),r+=t);return r}var En="-";function rh(s){var t=nh(s),r=s.conflictingClassGroups,a=s.conflictingClassGroupModifiers,n=a===void 0?{}:a;function i(l){var d=l.split(En);return d[0]===""&&d.length!==1&&d.shift(),bl(d,t)||ah(l)}function o(l,d){var c=r[l]||[];return d&&n[l]?[].concat(c,n[l]):c}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function bl(s,t){var o;if(s.length===0)return t.classGroupId;var r=s[0],a=t.nextPart.get(r),n=a?bl(s.slice(1),a):void 0;if(n)return n;if(t.validators.length!==0){var i=s.join(En);return(o=t.validators.find(function(l){var d=l.validator;return d(i)}))==null?void 0:o.classGroupId}}var vi=/^\[(.+)\]$/;function ah(s){if(vi.test(s)){var t=vi.exec(s)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function nh(s){var t=s.theme,r=s.prefix,a={nextPart:new Map,validators:[]},n=oh(Object.entries(s.classGroups),r);return n.forEach(function(i){var o=i[0],l=i[1];Va(l,a,o,t)}),a}function Va(s,t,r,a){s.forEach(function(n){if(typeof n=="string"){var i=n===""?t:wi(t,n);i.classGroupId=r;return}if(typeof n=="function"){if(ih(n)){Va(n(a),t,r,a);return}t.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(function(o){var l=o[0],d=o[1];Va(d,wi(t,l),r,a)})})}function wi(s,t){var r=s;return t.split(En).forEach(function(a){r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r}function ih(s){return s.isThemeGetter}function oh(s,t){return t?s.map(function(r){var a=r[0],n=r[1],i=n.map(function(o){return typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var d=l[0],c=l[1];return[t+d,c]})):o});return[a,i]}):s}function lh(s){if(s<1)return{get:function(){},set:function(){}};var t=0,r=new Map,a=new Map;function n(i,o){r.set(i,o),t++,t>s&&(t=0,a=r,r=new Map)}return{get:function(o){var l=r.get(o);if(l!==void 0)return l;if((l=a.get(o))!==void 0)return n(o,l),l},set:function(o,l){r.has(o)?r.set(o,l):n(o,l)}}}var vl="!";function ch(s){var t=s.separator||":",r=t.length===1,a=t[0],n=t.length;return function(o){for(var l=[],d=0,c=0,u,h=0;h<o.length;h++){var m=o[h];if(d===0){if(m===a&&(r||o.slice(h,h+n)===t)){l.push(o.slice(c,h)),c=h+n;continue}if(m==="/"){u=h;continue}}m==="["?d++:m==="]"&&d--}var f=l.length===0?o:o.substring(c),g=f.startsWith(vl),y=g?f.substring(1):f,p=u&&u>c?u-c:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:p}}}function dh(s){if(s.length<=1)return s;var t=[],r=[];return s.forEach(function(a){var n=a[0]==="[";n?(t.push.apply(t,r.sort().concat([a])),r=[]):r.push(a)}),t.push.apply(t,r.sort()),t}function uh(s){return{cache:lh(s.cacheSize),splitModifiers:ch(s),...rh(s)}}var hh=/\s+/;function mh(s,t){var r=t.splitModifiers,a=t.getClassGroupId,n=t.getConflictingClassGroupIds,i=new Set;return s.trim().split(hh).map(function(o){var l=r(o),d=l.modifiers,c=l.hasImportantModifier,u=l.baseClassName,h=l.maybePostfixModifierPosition,m=a(h?u.substring(0,h):u),f=!!h;if(!m){if(!h)return{isTailwindClass:!1,originalClassName:o};if(m=a(u),!m)return{isTailwindClass:!1,originalClassName:o};f=!1}var g=dh(d).join(":"),y=c?g+vl:g;return{isTailwindClass:!0,modifierId:y,classGroupId:m,originalClassName:o,hasPostfixModifier:f}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,d=o.classGroupId,c=o.hasPostfixModifier,u=l+d;return i.has(u)?!1:(i.add(u),n(d,c).forEach(function(h){return i.add(l+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function fh(){for(var s=arguments.length,t=new Array(s),r=0;r<s;r++)t[r]=arguments[r];var a,n,i,o=l;function l(c){var u=t[0],h=t.slice(1),m=h.reduce(function(f,g){return g(f)},u());return a=uh(m),n=a.cache.get,i=a.cache.set,o=d,d(c)}function d(c){var u=n(c);if(u)return u;var h=mh(c,a);return i(c,h),h}return function(){return o(sh.apply(null,arguments))}}function ce(s){var t=function(a){return a[s]||[]};return t.isThemeGetter=!0,t}var wl=/^\[(?:([a-z-]+):)?(.+)\]$/i,xh=/^\d+\/\d+$/,ph=new Set(["px","full","screen"]),gh=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yh=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bh=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function He(s){return Ft(s)||ph.has(s)||xh.test(s)||za(s)}function za(s){return Ht(s,"length",kh)}function vh(s){return Ht(s,"size",jl)}function wh(s){return Ht(s,"position",jl)}function jh(s){return Ht(s,"url",Sh)}function or(s){return Ht(s,"number",Ft)}function Ft(s){return!Number.isNaN(Number(s))}function Nh(s){return s.endsWith("%")&&Ft(s.slice(0,-1))}function Ns(s){return ji(s)||Ht(s,"number",ji)}function ee(s){return wl.test(s)}function _s(){return!0}function pt(s){return gh.test(s)}function _h(s){return Ht(s,"",Ch)}function Ht(s,t,r){var a=wl.exec(s);return a?a[1]?a[1]===t:r(a[2]):!1}function kh(s){return yh.test(s)}function jl(){return!1}function Sh(s){return s.startsWith("url(")}function ji(s){return Number.isInteger(Number(s))}function Ch(s){return bh.test(s)}function Th(){var s=ce("colors"),t=ce("spacing"),r=ce("blur"),a=ce("brightness"),n=ce("borderColor"),i=ce("borderRadius"),o=ce("borderSpacing"),l=ce("borderWidth"),d=ce("contrast"),c=ce("grayscale"),u=ce("hueRotate"),h=ce("invert"),m=ce("gap"),f=ce("gradientColorStops"),g=ce("gradientColorStopPositions"),y=ce("inset"),p=ce("margin"),v=ce("opacity"),w=ce("padding"),b=ce("saturate"),_=ce("scale"),N=ce("sepia"),P=ce("skew"),j=ce("space"),k=ce("translate"),O=function(){return["auto","contain","none"]},B=function(){return["auto","hidden","clip","visible","scroll"]},$=function(){return["auto",ee,t]},L=function(){return[ee,t]},G=function(){return["",He]},M=function(){return["auto",Ft,ee]},F=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},A=function(){return["solid","dashed","dotted","double","none"]},z=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},q=function(){return["start","end","center","between","around","evenly","stretch"]},U=function(){return["","0",ee]},C=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},S=function(){return[Ft,or]},I=function(){return[Ft,ee]};return{cacheSize:500,theme:{colors:[_s],spacing:[He],blur:["none","",pt,ee],brightness:S(),borderColor:[s],borderRadius:["none","","full",pt,ee],borderSpacing:L(),borderWidth:G(),contrast:S(),grayscale:U(),hueRotate:I(),invert:U(),gap:L(),gradientColorStops:[s],gradientColorStopPositions:[Nh,za],inset:$(),margin:$(),opacity:S(),padding:L(),saturate:S(),scale:S(),sepia:U(),skew:I(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",ee]}],container:["container"],columns:[{columns:[pt]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(F(),[ee])}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ns]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ee]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",Ns]}],"grid-cols":[{"grid-cols":[_s]}],"col-start-end":[{col:["auto",{span:["full",Ns]},ee]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[_s]}],"row-start-end":[{row:["auto",{span:[Ns]},ee]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ee]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ee]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(q())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(q(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(q(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",ee,t]}],"min-w":[{"min-w":["min","max","fit",ee,He]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[pt]},pt,ee]}],h:[{h:[ee,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ee,He]}],"max-h":[{"max-h":[ee,t,"min","max","fit"]}],"font-size":[{text:["base",pt,za]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",or]}],"font-family":[{font:[_s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ee]}],"line-clamp":[{"line-clamp":["none",Ft,or]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ee,He]}],"list-image":[{"list-image":["none",ee]}],"list-style-type":[{list:["none","disc","decimal",ee]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(A(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",He]}],"underline-offset":[{"underline-offset":["auto",ee,He]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(F(),[wh])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",vh]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},jh]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(A(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:A()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:[""].concat(A())}],"outline-offset":[{"outline-offset":[ee,He]}],"outline-w":[{outline:[He]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[He]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",pt,_h]}],"shadow-color":[{shadow:[_s]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":z()}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[a]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",pt,ee]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ee]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",ee]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",ee]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Ns,ee]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ee]}],accent:[{accent:["auto",s]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ee]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ee]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[He,or]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Eh=fh(Th);function xt(...s){return Eh(gl(s))}function $e(s,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(s==null||s(n),r===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function Ni(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function Nl(...s){return t=>{let r=!1;const a=s.map(n=>{const i=Ni(n,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let n=0;n<a.length;n++){const i=a[n];typeof i=="function"?i():Ni(s[n],null)}}}}function Bt(...s){return x.useCallback(Nl(...s),s)}function _l(s,t=[]){let r=[];function a(i,o){const l=x.createContext(o),d=r.length;r=[...r,o];const c=h=>{var v;const{scope:m,children:f,...g}=h,y=((v=m==null?void 0:m[s])==null?void 0:v[d])||l,p=x.useMemo(()=>g,Object.values(g));return e.jsx(y.Provider,{value:p,children:f})};c.displayName=i+"Provider";function u(h,m){var y;const f=((y=m==null?void 0:m[s])==null?void 0:y[d])||l,g=x.useContext(f);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,u]}const n=()=>{const i=r.map(o=>x.createContext(o));return function(l){const d=(l==null?void 0:l[s])||i;return x.useMemo(()=>({[`__scope${s}`]:{...l,[s]:d}}),[l,d])}};return n.scopeName=s,[a,Ph(n,...t)]}function Ph(...s){const t=s[0];if(s.length===1)return t;const r=()=>{const a=s.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const o=a.reduce((l,{useScope:d,scopeName:c})=>{const h=d(i)[`__scope${c}`];return{...l,...h}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Er(s){const t=Lh(s),r=x.forwardRef((a,n)=>{const{children:i,...o}=a,l=x.Children.toArray(i),d=l.find(Mh);if(d){const c=d.props.children,u=l.map(h=>h===d?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:h);return e.jsx(t,{...o,ref:n,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return e.jsx(t,{...o,ref:n,children:i})});return r.displayName=`${s}.Slot`,r}var Ah=Er("Slot");function Lh(s){const t=x.forwardRef((r,a)=>{const{children:n,...i}=r;if(x.isValidElement(n)){const o=Dh(n),l=Ih(i,n.props);return n.type!==x.Fragment&&(l.ref=a?Nl(a,o):o),x.cloneElement(n,l)}return x.Children.count(n)>1?x.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var Rh=Symbol("radix.slottable");function Mh(s){return x.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===Rh}function Ih(s,t){const r={...t};for(const a in t){const n=s[a],i=t[a];/^on[A-Z]/.test(a)?n&&i?r[a]=(...l)=>{const d=i(...l);return n(...l),d}:n&&(r[a]=n):a==="style"?r[a]={...n,...i}:a==="className"&&(r[a]=[n,i].filter(Boolean).join(" "))}return{...s,...r}}function Dh(s){var a,n;let t=(a=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?s.ref:(t=(n=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?s.props.ref:s.props.ref||s.ref)}function Oh(s){const t=s+"CollectionProvider",[r,a]=_l(t),[n,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:p,children:v}=y,w=te.useRef(null),b=te.useRef(new Map).current;return e.jsx(n,{scope:p,itemMap:b,collectionRef:w,children:v})};o.displayName=t;const l=s+"CollectionSlot",d=Er(l),c=te.forwardRef((y,p)=>{const{scope:v,children:w}=y,b=i(l,v),_=Bt(p,b.collectionRef);return e.jsx(d,{ref:_,children:w})});c.displayName=l;const u=s+"CollectionItemSlot",h="data-radix-collection-item",m=Er(u),f=te.forwardRef((y,p)=>{const{scope:v,children:w,...b}=y,_=te.useRef(null),N=Bt(p,_),P=i(u,v);return te.useEffect(()=>(P.itemMap.set(_,{ref:_,...b}),()=>void P.itemMap.delete(_))),e.jsx(m,{[h]:"",ref:N,children:w})});f.displayName=u;function g(y){const p=i(s+"CollectionConsumer",y);return te.useCallback(()=>{const w=p.collectionRef.current;if(!w)return[];const b=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(p.itemMap.values()).sort((P,j)=>b.indexOf(P.ref.current)-b.indexOf(j.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},g,a]}var $h=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rt=$h.reduce((s,t)=>{const r=Er(`Primitive.${t}`),a=x.forwardRef((n,i)=>{const{asChild:o,...l}=n,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...l,ref:i})});return a.displayName=`Primitive.${t}`,{...s,[t]:a}},{});function kl(s,t){s&&Sn.flushSync(()=>s.dispatchEvent(t))}function qt(s){const t=x.useRef(s);return x.useEffect(()=>{t.current=s}),x.useMemo(()=>(...r)=>{var a;return(a=t.current)==null?void 0:a.call(t,...r)},[])}function Fh(s,t=globalThis==null?void 0:globalThis.document){const r=qt(s);x.useEffect(()=>{const a=n=>{n.key==="Escape"&&r(n)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[r,t])}var Uh="DismissableLayer",Ba="dismissableLayer.update",Vh="dismissableLayer.pointerDownOutside",zh="dismissableLayer.focusOutside",_i,Sl=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Cl=x.forwardRef((s,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...d}=s,c=x.useContext(Sl),[u,h]=x.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=x.useState({}),g=Bt(t,j=>h(j)),y=Array.from(c.layers),[p]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(p),w=u?y.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,_=w>=v,N=qh(j=>{const k=j.target,O=[...c.branches].some(B=>B.contains(k));!_||O||(n==null||n(j),o==null||o(j),j.defaultPrevented||l==null||l())},m),P=Gh(j=>{const k=j.target;[...c.branches].some(B=>B.contains(k))||(i==null||i(j),o==null||o(j),j.defaultPrevented||l==null||l())},m);return Fh(j=>{w===c.layers.size-1&&(a==null||a(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},m),x.useEffect(()=>{if(u)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(_i=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),ki(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=_i)}},[u,m,r,c]),x.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),ki())},[u,c]),x.useEffect(()=>{const j=()=>f({});return document.addEventListener(Ba,j),()=>document.removeEventListener(Ba,j)},[]),e.jsx(rt.div,{...d,ref:g,style:{pointerEvents:b?_?"auto":"none":void 0,...s.style},onFocusCapture:$e(s.onFocusCapture,P.onFocusCapture),onBlurCapture:$e(s.onBlurCapture,P.onBlurCapture),onPointerDownCapture:$e(s.onPointerDownCapture,N.onPointerDownCapture)})});Cl.displayName=Uh;var Bh="DismissableLayerBranch",Tl=x.forwardRef((s,t)=>{const r=x.useContext(Sl),a=x.useRef(null),n=Bt(t,a);return x.useEffect(()=>{const i=a.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),e.jsx(rt.div,{...s,ref:n})});Tl.displayName=Bh;function qh(s,t=globalThis==null?void 0:globalThis.document){const r=qt(s),a=x.useRef(!1),n=x.useRef(()=>{});return x.useEffect(()=>{const i=l=>{if(l.target&&!a.current){let d=function(){El(Vh,r,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=d,t.addEventListener("click",n.current,{once:!0})):d()}else t.removeEventListener("click",n.current);a.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function Gh(s,t=globalThis==null?void 0:globalThis.document){const r=qt(s),a=x.useRef(!1);return x.useEffect(()=>{const n=i=>{i.target&&!a.current&&El(zh,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function ki(){const s=new CustomEvent(Ba);document.dispatchEvent(s)}function El(s,t,r,{discrete:a}){const n=r.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:r});t&&n.addEventListener(s,t,{once:!0}),a?kl(n,i):n.dispatchEvent(i)}var Hh=Cl,Wh=Tl,Fs=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},Kh="Portal",Pl=x.forwardRef((s,t)=>{var l;const{container:r,...a}=s,[n,i]=x.useState(!1);Fs(()=>i(!0),[]);const o=r||n&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?pu.createPortal(e.jsx(rt.div,{...a,ref:t}),o):null});Pl.displayName=Kh;function Jh(s,t){return x.useReducer((r,a)=>t[r][a]??r,s)}var Al=s=>{const{present:t,children:r}=s,a=Xh(t),n=typeof r=="function"?r({present:a.isPresent}):x.Children.only(r),i=Bt(a.ref,Yh(n));return typeof r=="function"||a.isPresent?x.cloneElement(n,{ref:i}):null};Al.displayName="Presence";function Xh(s){const[t,r]=x.useState(),a=x.useRef(null),n=x.useRef(s),i=x.useRef("none"),o=s?"mounted":"unmounted",[l,d]=Jh(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const c=lr(a.current);i.current=l==="mounted"?c:"none"},[l]),Fs(()=>{const c=a.current,u=n.current;if(u!==s){const m=i.current,f=lr(c);s?d("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?d("UNMOUNT"):d(u&&m!==f?"ANIMATION_OUT":"UNMOUNT"),n.current=s}},[s,d]),Fs(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,h=f=>{const y=lr(a.current).includes(f.animationName);if(f.target===t&&y&&(d("ANIMATION_END"),!n.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},m=f=>{f.target===t&&(i.current=lr(a.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(c=>{a.current=c?getComputedStyle(c):null,r(c)},[])}}function lr(s){return(s==null?void 0:s.animationName)||"none"}function Yh(s){var a,n;let t=(a=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?s.ref:(t=(n=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?s.props.ref:s.props.ref||s.ref)}var Qh=gu[" useInsertionEffect ".trim().toString()]||Fs;function Zh({prop:s,defaultProp:t,onChange:r=()=>{},caller:a}){const[n,i,o]=em({defaultProp:t,onChange:r}),l=s!==void 0,d=l?s:n;{const u=x.useRef(s!==void 0);x.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${a} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,a])}const c=x.useCallback(u=>{var h;if(l){const m=tm(u)?u(s):u;m!==s&&((h=o.current)==null||h.call(o,m))}else i(u)},[l,s,i,o]);return[d,c]}function em({defaultProp:s,onChange:t}){const[r,a]=x.useState(s),n=x.useRef(r),i=x.useRef(t);return Qh(()=>{i.current=t},[t]),x.useEffect(()=>{var o;n.current!==r&&((o=i.current)==null||o.call(i,r),n.current=r)},[r,n]),[r,a,i]}function tm(s){return typeof s=="function"}var sm=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),rm="VisuallyHidden",Pn=x.forwardRef((s,t)=>e.jsx(rt.span,{...s,ref:t,style:{...sm,...s.style}}));Pn.displayName=rm;var An="ToastProvider",[Ln,am,nm]=Oh("Toast"),[Ll,pj]=_l("Toast",[nm]),[im,Hr]=Ll(An),Rl=s=>{const{__scopeToast:t,label:r="Notification",duration:a=5e3,swipeDirection:n="right",swipeThreshold:i=50,children:o}=s,[l,d]=x.useState(null),[c,u]=x.useState(0),h=x.useRef(!1),m=x.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${An}\`. Expected non-empty \`string\`.`),e.jsx(Ln.Provider,{scope:t,children:e.jsx(im,{scope:t,label:r,duration:a,swipeDirection:n,swipeThreshold:i,toastCount:c,viewport:l,onViewportChange:d,onToastAdd:x.useCallback(()=>u(f=>f+1),[]),onToastRemove:x.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};Rl.displayName=An;var Ml="ToastViewport",om=["F8"],qa="toast.viewportPause",Ga="toast.viewportResume",Il=x.forwardRef((s,t)=>{const{__scopeToast:r,hotkey:a=om,label:n="Notifications ({hotkey})",...i}=s,o=Hr(Ml,r),l=am(r),d=x.useRef(null),c=x.useRef(null),u=x.useRef(null),h=x.useRef(null),m=Bt(t,h,o.onViewportChange),f=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;x.useEffect(()=>{const p=v=>{var b;a.length!==0&&a.every(_=>v[_]||v.code===_)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[a]),x.useEffect(()=>{const p=d.current,v=h.current;if(g&&p&&v){const w=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(qa);v.dispatchEvent(P),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(Ga);v.dispatchEvent(P),o.isClosePausedRef.current=!1}},_=P=>{!p.contains(P.relatedTarget)&&b()},N=()=>{p.contains(document.activeElement)||b()};return p.addEventListener("focusin",w),p.addEventListener("focusout",_),p.addEventListener("pointermove",w),p.addEventListener("pointerleave",N),window.addEventListener("blur",w),window.addEventListener("focus",b),()=>{p.removeEventListener("focusin",w),p.removeEventListener("focusout",_),p.removeEventListener("pointermove",w),p.removeEventListener("pointerleave",N),window.removeEventListener("blur",w),window.removeEventListener("focus",b)}}},[g,o.isClosePausedRef]);const y=x.useCallback(({tabbingDirection:p})=>{const w=l().map(b=>{const _=b.ref.current,N=[_,...vm(_)];return p==="forwards"?N:N.reverse()});return(p==="forwards"?w.reverse():w).flat()},[l]);return x.useEffect(()=>{const p=h.current;if(p){const v=w=>{var N,P,j;const b=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!b){const k=document.activeElement,O=w.shiftKey;if(w.target===p&&O){(N=c.current)==null||N.focus();return}const L=y({tabbingDirection:O?"backwards":"forwards"}),G=L.findIndex(M=>M===k);ma(L.slice(G+1))?w.preventDefault():O?(P=c.current)==null||P.focus():(j=u.current)==null||j.focus()}};return p.addEventListener("keydown",v),()=>p.removeEventListener("keydown",v)}},[l,y]),e.jsxs(Wh,{ref:d,role:"region","aria-label":n.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&e.jsx(Ha,{ref:c,onFocusFromOutsideViewport:()=>{const p=y({tabbingDirection:"forwards"});ma(p)}}),e.jsx(Ln.Slot,{scope:r,children:e.jsx(rt.ol,{tabIndex:-1,...i,ref:m})}),g&&e.jsx(Ha,{ref:u,onFocusFromOutsideViewport:()=>{const p=y({tabbingDirection:"backwards"});ma(p)}})]})});Il.displayName=Ml;var Dl="ToastFocusProxy",Ha=x.forwardRef((s,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:a,...n}=s,i=Hr(Dl,r);return e.jsx(Pn,{"aria-hidden":!0,tabIndex:0,...n,ref:t,style:{position:"fixed"},onFocus:o=>{var c;const l=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(l))&&a()}})});Ha.displayName=Dl;var Xs="Toast",lm="toast.swipeStart",cm="toast.swipeMove",dm="toast.swipeCancel",um="toast.swipeEnd",Ol=x.forwardRef((s,t)=>{const{forceMount:r,open:a,defaultOpen:n,onOpenChange:i,...o}=s,[l,d]=Zh({prop:a,defaultProp:n??!0,onChange:i,caller:Xs});return e.jsx(Al,{present:r||l,children:e.jsx(fm,{open:l,...o,ref:t,onClose:()=>d(!1),onPause:qt(s.onPause),onResume:qt(s.onResume),onSwipeStart:$e(s.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$e(s.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:$e(s.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$e(s.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),d(!1)})})})});Ol.displayName=Xs;var[hm,mm]=Ll(Xs,{onClose(){}}),fm=x.forwardRef((s,t)=>{const{__scopeToast:r,type:a="foreground",duration:n,open:i,onClose:o,onEscapeKeyDown:l,onPause:d,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:f,...g}=s,y=Hr(Xs,r),[p,v]=x.useState(null),w=Bt(t,M=>v(M)),b=x.useRef(null),_=x.useRef(null),N=n||y.duration,P=x.useRef(0),j=x.useRef(N),k=x.useRef(0),{onToastAdd:O,onToastRemove:B}=y,$=qt(()=>{var F;(p==null?void 0:p.contains(document.activeElement))&&((F=y.viewport)==null||F.focus()),o()}),L=x.useCallback(M=>{!M||M===1/0||(window.clearTimeout(k.current),P.current=new Date().getTime(),k.current=window.setTimeout($,M))},[$]);x.useEffect(()=>{const M=y.viewport;if(M){const F=()=>{L(j.current),c==null||c()},A=()=>{const z=new Date().getTime()-P.current;j.current=j.current-z,window.clearTimeout(k.current),d==null||d()};return M.addEventListener(qa,A),M.addEventListener(Ga,F),()=>{M.removeEventListener(qa,A),M.removeEventListener(Ga,F)}}},[y.viewport,N,d,c,L]),x.useEffect(()=>{i&&!y.isClosePausedRef.current&&L(N)},[i,N,y.isClosePausedRef,L]),x.useEffect(()=>(O(),()=>B()),[O,B]);const G=x.useMemo(()=>p?ql(p):null,[p]);return y.viewport?e.jsxs(e.Fragment,{children:[G&&e.jsx(xm,{__scopeToast:r,role:"status","aria-live":a==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),e.jsx(hm,{scope:r,onClose:$,children:Sn.createPortal(e.jsx(Ln.ItemSlot,{scope:r,children:e.jsx(Hh,{asChild:!0,onEscapeKeyDown:$e(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||$(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(rt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...g,ref:w,style:{userSelect:"none",touchAction:"none",...s.style},onKeyDown:$e(s.onKeyDown,M=>{M.key==="Escape"&&(l==null||l(M.nativeEvent),M.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:$e(s.onPointerDown,M=>{M.button===0&&(b.current={x:M.clientX,y:M.clientY})}),onPointerMove:$e(s.onPointerMove,M=>{if(!b.current)return;const F=M.clientX-b.current.x,A=M.clientY-b.current.y,z=!!_.current,q=["left","right"].includes(y.swipeDirection),U=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,C=q?U(0,F):0,S=q?0:U(0,A),I=M.pointerType==="touch"?10:2,D={x:C,y:S},H={originalEvent:M,delta:D};z?(_.current=D,cr(cm,h,H,{discrete:!1})):Si(D,y.swipeDirection,I)?(_.current=D,cr(lm,u,H,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(F)>I||Math.abs(A)>I)&&(b.current=null)}),onPointerUp:$e(s.onPointerUp,M=>{const F=_.current,A=M.target;if(A.hasPointerCapture(M.pointerId)&&A.releasePointerCapture(M.pointerId),_.current=null,b.current=null,F){const z=M.currentTarget,q={originalEvent:M,delta:F};Si(F,y.swipeDirection,y.swipeThreshold)?cr(um,f,q,{discrete:!0}):cr(dm,m,q,{discrete:!0}),z.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),xm=s=>{const{__scopeToast:t,children:r,...a}=s,n=Hr(Xs,t),[i,o]=x.useState(!1),[l,d]=x.useState(!1);return ym(()=>o(!0)),x.useEffect(()=>{const c=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(c)},[]),l?null:e.jsx(Pl,{asChild:!0,children:e.jsx(Pn,{...a,children:i&&e.jsxs(e.Fragment,{children:[n.label," ",r]})})})},pm="ToastTitle",$l=x.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s;return e.jsx(rt.div,{...a,ref:t})});$l.displayName=pm;var gm="ToastDescription",Fl=x.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s;return e.jsx(rt.div,{...a,ref:t})});Fl.displayName=gm;var Ul="ToastAction",Vl=x.forwardRef((s,t)=>{const{altText:r,...a}=s;return r.trim()?e.jsx(Bl,{altText:r,asChild:!0,children:e.jsx(Rn,{...a,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ul}\`. Expected non-empty \`string\`.`),null)});Vl.displayName=Ul;var zl="ToastClose",Rn=x.forwardRef((s,t)=>{const{__scopeToast:r,...a}=s,n=mm(zl,r);return e.jsx(Bl,{asChild:!0,children:e.jsx(rt.button,{type:"button",...a,ref:t,onClick:$e(s.onClick,n.onClose)})})});Rn.displayName=zl;var Bl=x.forwardRef((s,t)=>{const{__scopeToast:r,altText:a,...n}=s;return e.jsx(rt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...n,ref:t})});function ql(s){const t=[];return Array.from(s.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&t.push(a.textContent),bm(a)){const n=a.ariaHidden||a.hidden||a.style.display==="none",i=a.dataset.radixToastAnnounceExclude==="";if(!n)if(i){const o=a.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...ql(a))}}),t}function cr(s,t,r,{discrete:a}){const n=r.originalEvent.currentTarget,i=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:r});t&&n.addEventListener(s,t,{once:!0}),a?kl(n,i):n.dispatchEvent(i)}var Si=(s,t,r=0)=>{const a=Math.abs(s.x),n=Math.abs(s.y),i=a>n;return t==="left"||t==="right"?i&&a>r:!i&&n>r};function ym(s=()=>{}){const t=qt(s);Fs(()=>{let r=0,a=0;return r=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(a)}},[t])}function bm(s){return s.nodeType===s.ELEMENT_NODE}function vm(s){const t=[],r=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const n=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||n?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ma(s){const t=document.activeElement;return s.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var wm=Rl,Gl=Il,Hl=Ol,Wl=$l,Kl=Fl,Jl=Vl,Xl=Rn;const Ci=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,Ti=gl,Yl=(s,t)=>r=>{var a;if((t==null?void 0:t.variants)==null)return Ti(s,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:n,defaultVariants:i}=t,o=Object.keys(n).map(c=>{const u=r==null?void 0:r[c],h=i==null?void 0:i[c];if(u===null)return null;const m=Ci(u)||Ci(h);return n[c][m]}),l=r&&Object.entries(r).reduce((c,u)=>{let[h,m]=u;return m===void 0||(c[h]=m),c},{}),d=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((c,u)=>{let{class:h,className:m,...f}=u;return Object.entries(f).every(g=>{let[y,p]=g;return Array.isArray(p)?p.includes({...i,...l}[y]):{...i,...l}[y]===p})?[...c,h,m]:c},[]);return Ti(s,o,d,r==null?void 0:r.class,r==null?void 0:r.className)};var jm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Nm=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V=(s,t)=>{const r=x.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...d},c)=>x.createElement("svg",{ref:c,...jm,width:n,height:n,stroke:a,strokeWidth:o?Number(i)*24/Number(n):i,className:`lucide lucide-${Nm(s)}`,...d},[...t.map(([u,h])=>x.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${s}`,r},_m=V("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),se=V("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),kt=V("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Xe=V("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),km=V("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Me=V("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),Ql=V("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),Us=V("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Sm=V("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Mn=V("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Ut=V("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]]),fe=V("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Cm=V("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Zl=V("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Tm=V("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),De=V("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Em=V("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Pm=V("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),be=V("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Es=V("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Am=V("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),In=V("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Lm=V("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Wa=V("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Rm=V("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),me=V("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Pe=V("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]),Ei=V("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Mm=V("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Vs=V("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),jt=V("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ms=V("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),ke=V("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ec=V("FileArchive",[["path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2",key:"1u864v"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]),re=V("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),tc=V("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Im=V("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Dm=V("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),Gt=V("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),Ys=V("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Ka=V("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),Om=V("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),$m=V("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Ja=V("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Fm=V("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Fe=V("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Um=V("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),sc=V("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),zs=V("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Vm=V("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),zm=V("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Ze=V("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),St=V("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Bm=V("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Pr=V("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ht=V("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),fs=V("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),qm=V("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),rc=V("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),_r=V("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),cs=V("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Gm=V("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Pi=V("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),kr=V("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),Hm=V("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Bs=V("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Qs=V("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),zt=V("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Xa=V("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]),qs=V("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),Ya=V("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Ar=V("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),Ye=V("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Wm=V("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Km=V("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),Jm=V("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),Xm=V("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Qe=V("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Ym=V("School",[["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4",key:"cpkuc4"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),Wt=V("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Dn=V("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Qm=V("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),qe=V("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Zm=V("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),ks=V("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),ef=V("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),Ai=V("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Qa=V("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),tf=V("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),sf=V("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),rf=V("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),af=V("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),_e=V("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),mt=V("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Wr=V("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Ie=V("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),On=V("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ac=V("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Li=V("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),xs=V("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),nf=V("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Za=V("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),Lr=V("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),tt=V("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ae=V("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),$n=V("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),of=V("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),lf=V("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),cf=V("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Ri=V("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ve=V("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Fn=V("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),df=wm,nc=te.forwardRef(({className:s,...t},r)=>e.jsx(Gl,{ref:r,className:xt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));nc.displayName=Gl.displayName;const uf=Yl("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ic=te.forwardRef(({className:s,variant:t,...r},a)=>e.jsx(Hl,{ref:a,className:xt(uf({variant:t}),s),...r}));ic.displayName=Hl.displayName;const hf=te.forwardRef(({className:s,...t},r)=>e.jsx(Jl,{ref:r,className:xt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));hf.displayName=Jl.displayName;const oc=te.forwardRef(({className:s,...t},r)=>e.jsx(Xl,{ref:r,className:xt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(ve,{className:"h-4 w-4"})}));oc.displayName=Xl.displayName;const lc=te.forwardRef(({className:s,...t},r)=>e.jsx(Wl,{ref:r,className:xt("text-sm font-semibold",s),...t}));lc.displayName=Wl.displayName;const cc=te.forwardRef(({className:s,...t},r)=>e.jsx(Kl,{ref:r,className:xt("text-sm opacity-90",s),...t}));cc.displayName=Kl.displayName;const mf=1;let fa=0;function ff(){return fa=(fa+1)%Number.MAX_VALUE,fa.toString()}const Te={state:{toasts:[]},listeners:[],getState:()=>Te.state,setState:s=>{typeof s=="function"?Te.state=s(Te.state):Te.state={...Te.state,...s},Te.listeners.forEach(t=>t(Te.state))},subscribe:s=>(Te.listeners.push(s),()=>{Te.listeners=Te.listeners.filter(t=>t!==s)})},xf=({...s})=>{const t=ff(),r=n=>Te.setState(i=>({...i,toasts:i.toasts.map(o=>o.id===t?{...o,...n}:o)})),a=()=>Te.setState(n=>({...n,toasts:n.toasts.filter(i=>i.id!==t)}));return Te.setState(n=>({...n,toasts:[{...s,id:t,dismiss:a},...n.toasts].slice(0,mf)})),{id:t,dismiss:a,update:r}};function ne(){const[s,t]=x.useState(Te.getState());return x.useEffect(()=>Te.subscribe(a=>{t(a)}),[]),x.useEffect(()=>{const r=[];return s.toasts.forEach(a=>{if(a.duration===1/0)return;const n=setTimeout(()=>{a.dismiss()},a.duration||5e3);r.push(n)}),()=>{r.forEach(a=>clearTimeout(a))}},[s.toasts]),{toast:xf,toasts:s.toasts}}function pf(){const{toasts:s}=ne();return e.jsxs(df,{children:[s.map(({id:t,title:r,description:a,action:n,dismiss:i,...o})=>e.jsxs(ic,{...o,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(lc,{children:r}),a&&e.jsx(cc,{children:a})]}),n,e.jsx(oc,{})]},t)),e.jsx(nc,{})]})}const dc=x.createContext(),gf=(s,t)=>{switch(t.type){case"ADD_TOAST":return[...s,t.toast];case"REMOVE_TOAST":return s.filter(r=>r.id!==t.id);case"CLEAR_TOASTS":return[];default:return s}},yf=({children:s})=>{const[t,r]=x.useReducer(gf,[]),a=x.useCallback(({title:o,description:l,variant:d="default",duration:c=5e3})=>{const u=Date.now()+Math.random();r({type:"ADD_TOAST",toast:{id:u,title:o,description:l,variant:d,duration:c}}),setTimeout(()=>{r({type:"REMOVE_TOAST",id:u})},c)},[]),n=x.useCallback(o=>{r({type:"REMOVE_TOAST",id:o})},[]),i=x.useCallback(()=>{r({type:"CLEAR_TOASTS"})},[]);return e.jsx(dc.Provider,{value:{toast:a,removeToast:n,clearToasts:i,toasts:t},children:s})},Et=()=>{const s=x.useContext(dc);if(!s)throw new Error("useToast must be used within a ToastProvider");return s},uc=x.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"}),Kr=x.createContext({}),Jr=x.createContext(null),Xr=typeof document<"u",Un=Xr?x.useLayoutEffect:x.useEffect,hc=x.createContext({strict:!1}),Vn=s=>s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),bf="framerAppearId",mc="data-"+Vn(bf);function vf(s,t,r,a){const{visualElement:n}=x.useContext(Kr),i=x.useContext(hc),o=x.useContext(Jr),l=x.useContext(uc).reducedMotion,d=x.useRef();a=a||i.renderer,!d.current&&a&&(d.current=a(s,{visualState:t,parent:n,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=d.current;x.useInsertionEffect(()=>{c&&c.update(r,o)});const u=x.useRef(!!(r[mc]&&!window.HandoffComplete));return Un(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),x.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function rs(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function wf(s,t,r){return x.useCallback(a=>{a&&s.mount&&s.mount(a),t&&(a?t.mount(a):t.unmount()),r&&(typeof r=="function"?r(a):rs(r)&&(r.current=a))},[t])}function Gs(s){return typeof s=="string"||Array.isArray(s)}function Yr(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}const zn=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Bn=["initial",...zn];function Qr(s){return Yr(s.animate)||Bn.some(t=>Gs(s[t]))}function fc(s){return!!(Qr(s)||s.variants)}function jf(s,t){if(Qr(s)){const{initial:r,animate:a}=s;return{initial:r===!1||Gs(r)?r:void 0,animate:Gs(a)?a:void 0}}return s.inherit!==!1?t:{}}function Nf(s){const{initial:t,animate:r}=jf(s,x.useContext(Kr));return x.useMemo(()=>({initial:t,animate:r}),[Mi(t),Mi(r)])}function Mi(s){return Array.isArray(s)?s.join(" "):s}const Ii={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hs={};for(const s in Ii)Hs[s]={isEnabled:t=>Ii[s].some(r=>!!t[r])};function _f(s){for(const t in s)Hs[t]={...Hs[t],...s[t]}}const qn=x.createContext({}),xc=x.createContext({}),kf=Symbol.for("motionComponentSymbol");function Sf({preloadedFeatures:s,createVisualElement:t,useRender:r,useVisualState:a,Component:n}){s&&_f(s);function i(l,d){let c;const u={...x.useContext(uc),...l,layoutId:Cf(l)},{isStatic:h}=u,m=Nf(l),f=a(l,h);if(!h&&Xr){m.visualElement=vf(n,f,u,t);const g=x.useContext(xc),y=x.useContext(hc).strict;m.visualElement&&(c=m.visualElement.loadFeatures(u,y,s,g))}return x.createElement(Kr.Provider,{value:m},c&&m.visualElement?x.createElement(c,{visualElement:m.visualElement,...u}):null,r(n,l,wf(f,m.visualElement,d),f,h,m.visualElement))}const o=x.forwardRef(i);return o[kf]=n,o}function Cf({layoutId:s}){const t=x.useContext(qn).id;return t&&s!==void 0?t+"-"+s:s}function Tf(s){function t(a,n={}){return Sf(s(a,n))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(a,n)=>(r.has(n)||r.set(n,t(n)),r.get(n))})}const Ef=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Gn(s){return typeof s!="string"||s.includes("-")?!1:!!(Ef.indexOf(s)>-1||/[A-Z]/.test(s))}const Rr={};function Pf(s){Object.assign(Rr,s)}const Zs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Kt=new Set(Zs);function pc(s,{layout:t,layoutId:r}){return Kt.has(s)||s.startsWith("origin")||(t||r!==void 0)&&(!!Rr[s]||s==="opacity")}const Oe=s=>!!(s&&s.getVelocity),Af={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Lf=Zs.length;function Rf(s,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},a,n){let i="";for(let o=0;o<Lf;o++){const l=Zs[o];if(s[l]!==void 0){const d=Af[l]||l;i+=`${d}(${s[l]}) `}}return t&&!s.z&&(i+="translateZ(0)"),i=i.trim(),n?i=n(s,a?"":i):r&&a&&(i="none"),i}const gc=s=>t=>typeof t=="string"&&t.startsWith(s),yc=gc("--"),en=gc("var(--"),Mf=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,If=(s,t)=>t&&typeof s=="number"?t.transform(s):s,Ct=(s,t,r)=>Math.min(Math.max(r,s),t),Jt={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Ls={...Jt,transform:s=>Ct(0,1,s)},dr={...Jt,default:1},Rs=s=>Math.round(s*1e5)/1e5,Zr=/(-)?([\d]*\.?[\d])+/g,bc=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Df=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function er(s){return typeof s=="string"}const tr=s=>({test:t=>er(t)&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),gt=tr("deg"),et=tr("%"),K=tr("px"),Of=tr("vh"),$f=tr("vw"),Di={...et,parse:s=>et.parse(s)/100,transform:s=>et.transform(s*100)},Oi={...Jt,transform:Math.round},vc={borderWidth:K,borderTopWidth:K,borderRightWidth:K,borderBottomWidth:K,borderLeftWidth:K,borderRadius:K,radius:K,borderTopLeftRadius:K,borderTopRightRadius:K,borderBottomRightRadius:K,borderBottomLeftRadius:K,width:K,maxWidth:K,height:K,maxHeight:K,size:K,top:K,right:K,bottom:K,left:K,padding:K,paddingTop:K,paddingRight:K,paddingBottom:K,paddingLeft:K,margin:K,marginTop:K,marginRight:K,marginBottom:K,marginLeft:K,rotate:gt,rotateX:gt,rotateY:gt,rotateZ:gt,scale:dr,scaleX:dr,scaleY:dr,scaleZ:dr,skew:gt,skewX:gt,skewY:gt,distance:K,translateX:K,translateY:K,translateZ:K,x:K,y:K,z:K,perspective:K,transformPerspective:K,opacity:Ls,originX:Di,originY:Di,originZ:K,zIndex:Oi,fillOpacity:Ls,strokeOpacity:Ls,numOctaves:Oi};function Hn(s,t,r,a){const{style:n,vars:i,transform:o,transformOrigin:l}=s;let d=!1,c=!1,u=!0;for(const h in t){const m=t[h];if(yc(h)){i[h]=m;continue}const f=vc[h],g=If(m,f);if(Kt.has(h)){if(d=!0,o[h]=g,!u)continue;m!==(f.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,l[h]=g):n[h]=g}if(t.transform||(d||a?n.transform=Rf(s.transform,r,u,a):n.transform&&(n.transform="none")),c){const{originX:h="50%",originY:m="50%",originZ:f=0}=l;n.transformOrigin=`${h} ${m} ${f}`}}const Wn=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wc(s,t,r){for(const a in t)!Oe(t[a])&&!pc(a,r)&&(s[a]=t[a])}function Ff({transformTemplate:s},t,r){return x.useMemo(()=>{const a=Wn();return Hn(a,t,{enableHardwareAcceleration:!r},s),Object.assign({},a.vars,a.style)},[t])}function Uf(s,t,r){const a=s.style||{},n={};return wc(n,a,s),Object.assign(n,Ff(s,t,r)),s.transformValues?s.transformValues(n):n}function Vf(s,t,r){const a={},n=Uf(s,t,r);return s.drag&&s.dragListener!==!1&&(a.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(a.tabIndex=0),a.style=n,a}const zf=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mr(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||zf.has(s)}let jc=s=>!Mr(s);function Bf(s){s&&(jc=t=>t.startsWith("on")?!Mr(t):s(t))}try{Bf(require("@emotion/is-prop-valid").default)}catch{}function qf(s,t,r){const a={};for(const n in s)n==="values"&&typeof s.values=="object"||(jc(n)||r===!0&&Mr(n)||!t&&!Mr(n)||s.draggable&&n.startsWith("onDrag"))&&(a[n]=s[n]);return a}function $i(s,t,r){return typeof s=="string"?s:K.transform(t+r*s)}function Gf(s,t,r){const a=$i(t,s.x,s.width),n=$i(r,s.y,s.height);return`${a} ${n}`}const Hf={offset:"stroke-dashoffset",array:"stroke-dasharray"},Wf={offset:"strokeDashoffset",array:"strokeDasharray"};function Kf(s,t,r=1,a=0,n=!0){s.pathLength=1;const i=n?Hf:Wf;s[i.offset]=K.transform(-a);const o=K.transform(t),l=K.transform(r);s[i.array]=`${o} ${l}`}function Kn(s,{attrX:t,attrY:r,attrScale:a,originX:n,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:d=0,...c},u,h,m){if(Hn(s,c,u,m),h){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:f,style:g,dimensions:y}=s;f.transform&&(y&&(g.transform=f.transform),delete f.transform),y&&(n!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=Gf(y,n!==void 0?n:.5,i!==void 0?i:.5)),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),a!==void 0&&(f.scale=a),o!==void 0&&Kf(f,o,l,d,!1)}const Nc=()=>({...Wn(),attrs:{}}),Jn=s=>typeof s=="string"&&s.toLowerCase()==="svg";function Jf(s,t,r,a){const n=x.useMemo(()=>{const i=Nc();return Kn(i,t,{enableHardwareAcceleration:!1},Jn(a),s.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(s.style){const i={};wc(i,s.style,s),n.style={...i,...n.style}}return n}function Xf(s=!1){return(r,a,n,{latestValues:i},o)=>{const d=(Gn(r)?Jf:Vf)(a,i,o,r),u={...qf(a,typeof r=="string",s),...d,ref:n},{children:h}=a,m=x.useMemo(()=>Oe(h)?h.get():h,[h]);return x.createElement(r,{...u,children:m})}}function _c(s,{style:t,vars:r},a,n){Object.assign(s.style,t,n&&n.getProjectionStyles(a));for(const i in r)s.style.setProperty(i,r[i])}const kc=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Sc(s,t,r,a){_c(s,t,void 0,a);for(const n in t.attrs)s.setAttribute(kc.has(n)?n:Vn(n),t.attrs[n])}function Xn(s,t){const{style:r}=s,a={};for(const n in r)(Oe(r[n])||t.style&&Oe(t.style[n])||pc(n,s))&&(a[n]=r[n]);return a}function Cc(s,t){const r=Xn(s,t);for(const a in s)if(Oe(s[a])||Oe(t[a])){const n=Zs.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[n]=s[a]}return r}function Yn(s,t,r,a={},n={}){return typeof t=="function"&&(t=t(r!==void 0?r:s.custom,a,n)),typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:s.custom,a,n)),t}function Tc(s){const t=x.useRef(null);return t.current===null&&(t.current=s()),t.current}const Ir=s=>Array.isArray(s),Yf=s=>!!(s&&typeof s=="object"&&s.mix&&s.toValue),Qf=s=>Ir(s)?s[s.length-1]||0:s;function Sr(s){const t=Oe(s)?s.get():s;return Yf(t)?t.toValue():t}function Zf({scrapeMotionValuesFromProps:s,createRenderState:t,onMount:r},a,n,i){const o={latestValues:ex(a,n,i,s),renderState:t()};return r&&(o.mount=l=>r(a,l,o)),o}const Ec=s=>(t,r)=>{const a=x.useContext(Kr),n=x.useContext(Jr),i=()=>Zf(s,t,a,n);return r?i():Tc(i)};function ex(s,t,r,a){const n={},i=a(s,{});for(const m in i)n[m]=Sr(i[m]);let{initial:o,animate:l}=s;const d=Qr(s),c=fc(s);t&&c&&!d&&s.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?l:o;return h&&typeof h!="boolean"&&!Yr(h)&&(Array.isArray(h)?h:[h]).forEach(f=>{const g=Yn(s,f);if(!g)return;const{transitionEnd:y,transition:p,...v}=g;for(const w in v){let b=v[w];if(Array.isArray(b)){const _=u?b.length-1:0;b=b[_]}b!==null&&(n[w]=b)}for(const w in y)n[w]=y[w]}),n}const he=s=>s;class Fi{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function tx(s){let t=new Fi,r=new Fi,a=0,n=!1,i=!1;const o=new WeakSet,l={schedule:(d,c=!1,u=!1)=>{const h=u&&n,m=h?t:r;return c&&o.add(d),m.add(d)&&h&&n&&(a=t.order.length),d},cancel:d=>{r.remove(d),o.delete(d)},process:d=>{if(n){i=!0;return}if(n=!0,[t,r]=[r,t],r.clear(),a=t.order.length,a)for(let c=0;c<a;c++){const u=t.order[c];u(d),o.has(u)&&(l.schedule(u),s())}n=!1,i&&(i=!1,l.process(d))}};return l}const ur=["prepare","read","update","preRender","render","postRender"],sx=40;function rx(s,t){let r=!1,a=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=ur.reduce((h,m)=>(h[m]=tx(()=>r=!0),h),{}),o=h=>i[h].process(n),l=()=>{const h=performance.now();r=!1,n.delta=a?1e3/60:Math.max(Math.min(h-n.timestamp,sx),1),n.timestamp=h,n.isProcessing=!0,ur.forEach(o),n.isProcessing=!1,r&&t&&(a=!1,s(l))},d=()=>{r=!0,a=!0,n.isProcessing||s(l)};return{schedule:ur.reduce((h,m)=>{const f=i[m];return h[m]=(g,y=!1,p=!1)=>(r||d(),f.schedule(g,y,p)),h},{}),cancel:h=>ur.forEach(m=>i[m].cancel(h)),state:n,steps:i}}const{schedule:le,cancel:ft,state:Ne,steps:xa}=rx(typeof requestAnimationFrame<"u"?requestAnimationFrame:he,!0),ax={useVisualState:Ec({scrapeMotionValuesFromProps:Cc,createRenderState:Nc,onMount:(s,t,{renderState:r,latestValues:a})=>{le.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),le.render(()=>{Kn(r,a,{enableHardwareAcceleration:!1},Jn(t.tagName),s.transformTemplate),Sc(t,r)})}})},nx={useVisualState:Ec({scrapeMotionValuesFromProps:Xn,createRenderState:Wn})};function ix(s,{forwardMotionProps:t=!1},r,a){return{...Gn(s)?ax:nx,preloadedFeatures:r,useRender:Xf(t),createVisualElement:a,Component:s}}function ct(s,t,r,a={passive:!0}){return s.addEventListener(t,r,a),()=>s.removeEventListener(t,r)}const Pc=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1;function ea(s,t="page"){return{point:{x:s[t+"X"],y:s[t+"Y"]}}}const ox=s=>t=>Pc(t)&&s(t,ea(t));function dt(s,t,r,a){return ct(s,t,ox(r),a)}const lx=(s,t)=>r=>t(s(r)),Nt=(...s)=>s.reduce(lx);function Ac(s){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=s,r):!1}}const Ui=Ac("dragHorizontal"),Vi=Ac("dragVertical");function Lc(s){let t=!1;if(s==="y")t=Vi();else if(s==="x")t=Ui();else{const r=Ui(),a=Vi();r&&a?t=()=>{r(),a()}:(r&&r(),a&&a())}return t}function Rc(){const s=Lc(!0);return s?(s(),!1):!0}class Pt{constructor(t){this.isMounted=!1,this.node=t}update(){}}function zi(s,t){const r="pointer"+(t?"enter":"leave"),a="onHover"+(t?"Start":"End"),n=(i,o)=>{if(i.pointerType==="touch"||Rc())return;const l=s.getProps();s.animationState&&l.whileHover&&s.animationState.setActive("whileHover",t),l[a]&&le.update(()=>l[a](i,o))};return dt(s.current,r,n,{passive:!s.getProps()[a]})}class cx extends Pt{mount(){this.unmount=Nt(zi(this.node,!0),zi(this.node,!1))}unmount(){}}class dx extends Pt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Nt(ct(this.node.current,"focus",()=>this.onFocus()),ct(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Mc=(s,t)=>t?s===t?!0:Mc(s,t.parentElement):!1;function pa(s,t){if(!t)return;const r=new PointerEvent("pointer"+s);t(r,ea(r))}class ux extends Pt{constructor(){super(...arguments),this.removeStartListeners=he,this.removeEndListeners=he,this.removeAccessibleListeners=he,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const a=this.node.getProps(),i=dt(window,"pointerup",(l,d)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps();le.update(()=>{!h&&!Mc(this.node.current,l.target)?u&&u(l,d):c&&c(l,d)})},{passive:!(a.onTap||a.onPointerUp)}),o=dt(window,"pointercancel",(l,d)=>this.cancelPress(l,d),{passive:!(a.onTapCancel||a.onPointerCancel)});this.removeEndListeners=Nt(i,o),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||pa("up",(d,c)=>{const{onTap:u}=this.node.getProps();u&&le.update(()=>u(d,c))})};this.removeEndListeners(),this.removeEndListeners=ct(this.node.current,"keyup",o),pa("down",(l,d)=>{this.startPress(l,d)})},r=ct(this.node.current,"keydown",t),a=()=>{this.isPressing&&pa("cancel",(i,o)=>this.cancelPress(i,o))},n=ct(this.node.current,"blur",a);this.removeAccessibleListeners=Nt(r,n)}}startPress(t,r){this.isPressing=!0;const{onTapStart:a,whileTap:n}=this.node.getProps();n&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),a&&le.update(()=>a(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Rc()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:a}=this.node.getProps();a&&le.update(()=>a(t,r))}mount(){const t=this.node.getProps(),r=dt(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),a=ct(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Nt(r,a)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const tn=new WeakMap,ga=new WeakMap,hx=s=>{const t=tn.get(s.target);t&&t(s)},mx=s=>{s.forEach(hx)};function fx({root:s,...t}){const r=s||document;ga.has(r)||ga.set(r,{});const a=ga.get(r),n=JSON.stringify(t);return a[n]||(a[n]=new IntersectionObserver(mx,{root:s,...t})),a[n]}function xx(s,t,r){const a=fx(t);return tn.set(s,r),a.observe(s),()=>{tn.delete(s),a.unobserve(s)}}const px={some:0,all:1};class gx extends Pt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:a,amount:n="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:a,threshold:typeof n=="number"?n:px[n]},l=d=>{const{isIntersecting:c}=d;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=c?u:h;m&&m(d)};return xx(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(yx(t,r))&&this.startObserver()}unmount(){}}function yx({viewport:s={}},{viewport:t={}}={}){return r=>s[r]!==t[r]}const bx={inView:{Feature:gx},tap:{Feature:ux},focus:{Feature:dx},hover:{Feature:cx}};function Ic(s,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==s.length)return!1;for(let a=0;a<r;a++)if(t[a]!==s[a])return!1;return!0}function vx(s){const t={};return s.values.forEach((r,a)=>t[a]=r.get()),t}function wx(s){const t={};return s.values.forEach((r,a)=>t[a]=r.getVelocity()),t}function ta(s,t,r){const a=s.getProps();return Yn(a,t,r!==void 0?r:a.custom,vx(s),wx(s))}let jx=he,Qn=he;const _t=s=>s*1e3,ut=s=>s/1e3,Nx={current:!1},Dc=s=>Array.isArray(s)&&typeof s[0]=="number";function Oc(s){return!!(!s||typeof s=="string"&&$c[s]||Dc(s)||Array.isArray(s)&&s.every(Oc))}const Ps=([s,t,r,a])=>`cubic-bezier(${s}, ${t}, ${r}, ${a})`,$c={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ps([0,.65,.55,1]),circOut:Ps([.55,0,1,.45]),backIn:Ps([.31,.01,.66,-.59]),backOut:Ps([.33,1.53,.69,.99])};function Fc(s){if(s)return Dc(s)?Ps(s):Array.isArray(s)?s.map(Fc):$c[s]}function _x(s,t,r,{delay:a=0,duration:n,repeat:i=0,repeatType:o="loop",ease:l,times:d}={}){const c={[t]:r};d&&(c.offset=d);const u=Fc(l);return Array.isArray(u)&&(c.easing=u),s.animate(c,{delay:a,duration:n,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function kx(s,{repeat:t,repeatType:r="loop"}){const a=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[a]}const Uc=(s,t,r)=>(((1-3*r+3*t)*s+(3*r-6*t))*s+3*t)*s,Sx=1e-7,Cx=12;function Tx(s,t,r,a,n){let i,o,l=0;do o=t+(r-t)/2,i=Uc(o,a,n)-s,i>0?r=o:t=o;while(Math.abs(i)>Sx&&++l<Cx);return o}function sr(s,t,r,a){if(s===t&&r===a)return he;const n=i=>Tx(i,0,1,s,r);return i=>i===0||i===1?i:Uc(n(i),t,a)}const Ex=sr(.42,0,1,1),Px=sr(0,0,.58,1),Vc=sr(.42,0,.58,1),Ax=s=>Array.isArray(s)&&typeof s[0]!="number",zc=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,Bc=s=>t=>1-s(1-t),Zn=s=>1-Math.sin(Math.acos(s)),qc=Bc(Zn),Lx=zc(Zn),Gc=sr(.33,1.53,.69,.99),ei=Bc(Gc),Rx=zc(ei),Mx=s=>(s*=2)<1?.5*ei(s):.5*(2-Math.pow(2,-10*(s-1))),Ix={linear:he,easeIn:Ex,easeInOut:Vc,easeOut:Px,circIn:Zn,circInOut:Lx,circOut:qc,backIn:ei,backInOut:Rx,backOut:Gc,anticipate:Mx},Bi=s=>{if(Array.isArray(s)){Qn(s.length===4);const[t,r,a,n]=s;return sr(t,r,a,n)}else if(typeof s=="string")return Ix[s];return s},ti=(s,t)=>r=>!!(er(r)&&Df.test(r)&&r.startsWith(s)||t&&Object.prototype.hasOwnProperty.call(r,t)),Hc=(s,t,r)=>a=>{if(!er(a))return a;const[n,i,o,l]=a.match(Zr);return{[s]:parseFloat(n),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Dx=s=>Ct(0,255,s),ya={...Jt,transform:s=>Math.round(Dx(s))},Vt={test:ti("rgb","red"),parse:Hc("red","green","blue"),transform:({red:s,green:t,blue:r,alpha:a=1})=>"rgba("+ya.transform(s)+", "+ya.transform(t)+", "+ya.transform(r)+", "+Rs(Ls.transform(a))+")"};function Ox(s){let t="",r="",a="",n="";return s.length>5?(t=s.substring(1,3),r=s.substring(3,5),a=s.substring(5,7),n=s.substring(7,9)):(t=s.substring(1,2),r=s.substring(2,3),a=s.substring(3,4),n=s.substring(4,5),t+=t,r+=r,a+=a,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(a,16),alpha:n?parseInt(n,16)/255:1}}const sn={test:ti("#"),parse:Ox,transform:Vt.transform},as={test:ti("hsl","hue"),parse:Hc("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:r,alpha:a=1})=>"hsla("+Math.round(s)+", "+et.transform(Rs(t))+", "+et.transform(Rs(r))+", "+Rs(Ls.transform(a))+")"},Ee={test:s=>Vt.test(s)||sn.test(s)||as.test(s),parse:s=>Vt.test(s)?Vt.parse(s):as.test(s)?as.parse(s):sn.parse(s),transform:s=>er(s)?s:s.hasOwnProperty("red")?Vt.transform(s):as.transform(s)},de=(s,t,r)=>-r*s+r*t+s;function ba(s,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?s+(t-s)*6*r:r<1/2?t:r<2/3?s+(t-s)*(2/3-r)*6:s}function $x({hue:s,saturation:t,lightness:r,alpha:a}){s/=360,t/=100,r/=100;let n=0,i=0,o=0;if(!t)n=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,d=2*r-l;n=ba(d,l,s+1/3),i=ba(d,l,s),o=ba(d,l,s-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:a}}const va=(s,t,r)=>{const a=s*s;return Math.sqrt(Math.max(0,r*(t*t-a)+a))},Fx=[sn,Vt,as],Ux=s=>Fx.find(t=>t.test(s));function qi(s){const t=Ux(s);let r=t.parse(s);return t===as&&(r=$x(r)),r}const Wc=(s,t)=>{const r=qi(s),a=qi(t),n={...r};return i=>(n.red=va(r.red,a.red,i),n.green=va(r.green,a.green,i),n.blue=va(r.blue,a.blue,i),n.alpha=de(r.alpha,a.alpha,i),Vt.transform(n))};function Vx(s){var t,r;return isNaN(s)&&er(s)&&(((t=s.match(Zr))===null||t===void 0?void 0:t.length)||0)+(((r=s.match(bc))===null||r===void 0?void 0:r.length)||0)>0}const Kc={regex:Mf,countKey:"Vars",token:"${v}",parse:he},Jc={regex:bc,countKey:"Colors",token:"${c}",parse:Ee.parse},Xc={regex:Zr,countKey:"Numbers",token:"${n}",parse:Jt.parse};function wa(s,{regex:t,countKey:r,token:a,parse:n}){const i=s.tokenised.match(t);i&&(s["num"+r]=i.length,s.tokenised=s.tokenised.replace(t,a),s.values.push(...i.map(n)))}function Dr(s){const t=s.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&wa(r,Kc),wa(r,Jc),wa(r,Xc),r}function Yc(s){return Dr(s).values}function Qc(s){const{values:t,numColors:r,numVars:a,tokenised:n}=Dr(s),i=t.length;return o=>{let l=n;for(let d=0;d<i;d++)d<a?l=l.replace(Kc.token,o[d]):d<a+r?l=l.replace(Jc.token,Ee.transform(o[d])):l=l.replace(Xc.token,Rs(o[d]));return l}}const zx=s=>typeof s=="number"?0:s;function Bx(s){const t=Yc(s);return Qc(s)(t.map(zx))}const Tt={test:Vx,parse:Yc,createTransformer:Qc,getAnimatableNone:Bx},Zc=(s,t)=>r=>`${r>0?t:s}`;function ed(s,t){return typeof s=="number"?r=>de(s,t,r):Ee.test(s)?Wc(s,t):s.startsWith("var(")?Zc(s,t):sd(s,t)}const td=(s,t)=>{const r=[...s],a=r.length,n=s.map((i,o)=>ed(i,t[o]));return i=>{for(let o=0;o<a;o++)r[o]=n[o](i);return r}},qx=(s,t)=>{const r={...s,...t},a={};for(const n in r)s[n]!==void 0&&t[n]!==void 0&&(a[n]=ed(s[n],t[n]));return n=>{for(const i in a)r[i]=a[i](n);return r}},sd=(s,t)=>{const r=Tt.createTransformer(t),a=Dr(s),n=Dr(t);return a.numVars===n.numVars&&a.numColors===n.numColors&&a.numNumbers>=n.numNumbers?Nt(td(a.values,n.values),r):Zc(s,t)},Ws=(s,t,r)=>{const a=t-s;return a===0?1:(r-s)/a},Gi=(s,t)=>r=>de(s,t,r);function Gx(s){return typeof s=="number"?Gi:typeof s=="string"?Ee.test(s)?Wc:sd:Array.isArray(s)?td:typeof s=="object"?qx:Gi}function Hx(s,t,r){const a=[],n=r||Gx(s[0]),i=s.length-1;for(let o=0;o<i;o++){let l=n(s[o],s[o+1]);if(t){const d=Array.isArray(t)?t[o]||he:t;l=Nt(d,l)}a.push(l)}return a}function rd(s,t,{clamp:r=!0,ease:a,mixer:n}={}){const i=s.length;if(Qn(i===t.length),i===1)return()=>t[0];s[0]>s[i-1]&&(s=[...s].reverse(),t=[...t].reverse());const o=Hx(t,a,n),l=o.length,d=c=>{let u=0;if(l>1)for(;u<s.length-2&&!(c<s[u+1]);u++);const h=Ws(s[u],s[u+1],c);return o[u](h)};return r?c=>d(Ct(s[0],s[i-1],c)):d}function Wx(s,t){const r=s[s.length-1];for(let a=1;a<=t;a++){const n=Ws(0,t,a);s.push(de(r,1,n))}}function Kx(s){const t=[0];return Wx(t,s.length-1),t}function Jx(s,t){return s.map(r=>r*t)}function Xx(s,t){return s.map(()=>t||Vc).splice(0,s.length-1)}function Or({duration:s=300,keyframes:t,times:r,ease:a="easeInOut"}){const n=Ax(a)?a.map(Bi):Bi(a),i={done:!1,value:t[0]},o=Jx(r&&r.length===t.length?r:Kx(t),s),l=rd(o,t,{ease:Array.isArray(n)?n:Xx(t,n)});return{calculatedDuration:s,next:d=>(i.value=l(d),i.done=d>=s,i)}}function ad(s,t){return t?s*(1e3/t):0}const Yx=5;function nd(s,t,r){const a=Math.max(t-Yx,0);return ad(r-s(a),t-a)}const ja=.001,Qx=.01,Hi=10,Zx=.05,ep=1;function tp({duration:s=800,bounce:t=.25,velocity:r=0,mass:a=1}){let n,i;jx(s<=_t(Hi));let o=1-t;o=Ct(Zx,ep,o),s=Ct(Qx,Hi,ut(s)),o<1?(n=c=>{const u=c*o,h=u*s,m=u-r,f=rn(c,o),g=Math.exp(-h);return ja-m/f*g},i=c=>{const h=c*o*s,m=h*r+r,f=Math.pow(o,2)*Math.pow(c,2)*s,g=Math.exp(-h),y=rn(Math.pow(c,2),o);return(-n(c)+ja>0?-1:1)*((m-f)*g)/y}):(n=c=>{const u=Math.exp(-c*s),h=(c-r)*s+1;return-ja+u*h},i=c=>{const u=Math.exp(-c*s),h=(r-c)*(s*s);return u*h});const l=5/s,d=rp(n,i,l);if(s=_t(s),isNaN(d))return{stiffness:100,damping:10,duration:s};{const c=Math.pow(d,2)*a;return{stiffness:c,damping:o*2*Math.sqrt(a*c),duration:s}}}const sp=12;function rp(s,t,r){let a=r;for(let n=1;n<sp;n++)a=a-s(a)/t(a);return a}function rn(s,t){return s*Math.sqrt(1-t*t)}const ap=["duration","bounce"],np=["stiffness","damping","mass"];function Wi(s,t){return t.some(r=>s[r]!==void 0)}function ip(s){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...s};if(!Wi(s,np)&&Wi(s,ap)){const r=tp(s);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function id({keyframes:s,restDelta:t,restSpeed:r,...a}){const n=s[0],i=s[s.length-1],o={done:!1,value:n},{stiffness:l,damping:d,mass:c,duration:u,velocity:h,isResolvedFromDuration:m}=ip({...a,velocity:-ut(a.velocity||0)}),f=h||0,g=d/(2*Math.sqrt(l*c)),y=i-n,p=ut(Math.sqrt(l/c)),v=Math.abs(y)<5;r||(r=v?.01:2),t||(t=v?.005:.5);let w;if(g<1){const b=rn(p,g);w=_=>{const N=Math.exp(-g*p*_);return i-N*((f+g*p*y)/b*Math.sin(b*_)+y*Math.cos(b*_))}}else if(g===1)w=b=>i-Math.exp(-p*b)*(y+(f+p*y)*b);else{const b=p*Math.sqrt(g*g-1);w=_=>{const N=Math.exp(-g*p*_),P=Math.min(b*_,300);return i-N*((f+g*p*y)*Math.sinh(P)+b*y*Math.cosh(P))/b}}return{calculatedDuration:m&&u||null,next:b=>{const _=w(b);if(m)o.done=b>=u;else{let N=f;b!==0&&(g<1?N=nd(w,b,_):N=0);const P=Math.abs(N)<=r,j=Math.abs(i-_)<=t;o.done=P&&j}return o.value=o.done?i:_,o}}}function Ki({keyframes:s,velocity:t=0,power:r=.8,timeConstant:a=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:d,restDelta:c=.5,restSpeed:u}){const h=s[0],m={done:!1,value:h},f=k=>l!==void 0&&k<l||d!==void 0&&k>d,g=k=>l===void 0?d:d===void 0||Math.abs(l-k)<Math.abs(d-k)?l:d;let y=r*t;const p=h+y,v=o===void 0?p:o(p);v!==p&&(y=v-h);const w=k=>-y*Math.exp(-k/a),b=k=>v+w(k),_=k=>{const O=w(k),B=b(k);m.done=Math.abs(O)<=c,m.value=m.done?v:B};let N,P;const j=k=>{f(m.value)&&(N=k,P=id({keyframes:[m.value,g(m.value)],velocity:nd(b,k,m.value),damping:n,stiffness:i,restDelta:c,restSpeed:u}))};return j(0),{calculatedDuration:null,next:k=>{let O=!1;return!P&&N===void 0&&(O=!0,_(k),j(k)),N!==void 0&&k>N?P.next(k-N):(!O&&_(k),m)}}}const op=s=>{const t=({timestamp:r})=>s(r);return{start:()=>le.update(t,!0),stop:()=>ft(t),now:()=>Ne.isProcessing?Ne.timestamp:performance.now()}},Ji=2e4;function Xi(s){let t=0;const r=50;let a=s.next(t);for(;!a.done&&t<Ji;)t+=r,a=s.next(t);return t>=Ji?1/0:t}const lp={decay:Ki,inertia:Ki,tween:Or,keyframes:Or,spring:id};function $r({autoplay:s=!0,delay:t=0,driver:r=op,keyframes:a,type:n="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:d,onStop:c,onComplete:u,onUpdate:h,...m}){let f=1,g=!1,y,p;const v=()=>{p=new Promise(S=>{y=S})};v();let w;const b=lp[n]||Or;let _;b!==Or&&typeof a[0]!="number"&&(_=rd([0,100],a,{clamp:!1}),a=[0,100]);const N=b({...m,keyframes:a});let P;l==="mirror"&&(P=b({...m,keyframes:[...a].reverse(),velocity:-(m.velocity||0)}));let j="idle",k=null,O=null,B=null;N.calculatedDuration===null&&i&&(N.calculatedDuration=Xi(N));const{calculatedDuration:$}=N;let L=1/0,G=1/0;$!==null&&(L=$+o,G=L*(i+1)-o);let M=0;const F=S=>{if(O===null)return;f>0&&(O=Math.min(O,S)),f<0&&(O=Math.min(S-G/f,O)),k!==null?M=k:M=Math.round(S-O)*f;const I=M-t*(f>=0?1:-1),D=f>=0?I<0:I>G;M=Math.max(I,0),j==="finished"&&k===null&&(M=G);let H=M,W=N;if(i){const ye=Math.min(M,G)/L;let at=Math.floor(ye),nt=ye%1;!nt&&ye>=1&&(nt=1),nt===1&&at--,at=Math.min(at,i+1),!!(at%2)&&(l==="reverse"?(nt=1-nt,o&&(nt-=o/L)):l==="mirror"&&(W=P)),H=Ct(0,1,nt)*L}const X=D?{done:!1,value:a[0]}:W.next(H);_&&(X.value=_(X.value));let{done:ie}=X;!D&&$!==null&&(ie=f>=0?M>=G:M<=0);const Se=k===null&&(j==="finished"||j==="running"&&ie);return h&&h(X.value),Se&&q(),X},A=()=>{w&&w.stop(),w=void 0},z=()=>{j="idle",A(),y(),v(),O=B=null},q=()=>{j="finished",u&&u(),A(),y()},U=()=>{if(g)return;w||(w=r(F));const S=w.now();d&&d(),k!==null?O=S-k:(!O||j==="finished")&&(O=S),j==="finished"&&v(),B=O,k=null,j="running",w.start()};s&&U();const C={then(S,I){return p.then(S,I)},get time(){return ut(M)},set time(S){S=_t(S),M=S,k!==null||!w||f===0?k=S:O=w.now()-S/f},get duration(){const S=N.calculatedDuration===null?Xi(N):N.calculatedDuration;return ut(S)},get speed(){return f},set speed(S){S===f||!w||(f=S,C.time=ut(M))},get state(){return j},play:U,pause:()=>{j="paused",k=M},stop:()=>{g=!0,j!=="idle"&&(j="idle",c&&c(),z())},cancel:()=>{B!==null&&F(B),z()},complete:()=>{j="finished"},sample:S=>(O=0,F(S))};return C}function cp(s){let t;return()=>(t===void 0&&(t=s()),t)}const dp=cp(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),up=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),hr=10,hp=2e4,mp=(s,t)=>t.type==="spring"||s==="backgroundColor"||!Oc(t.ease);function fp(s,t,{onUpdate:r,onComplete:a,...n}){if(!(dp()&&up.has(t)&&!n.repeatDelay&&n.repeatType!=="mirror"&&n.damping!==0&&n.type!=="inertia"))return!1;let o=!1,l,d,c=!1;const u=()=>{d=new Promise(b=>{l=b})};u();let{keyframes:h,duration:m=300,ease:f,times:g}=n;if(mp(t,n)){const b=$r({...n,repeat:0,delay:0});let _={done:!1,value:h[0]};const N=[];let P=0;for(;!_.done&&P<hp;)_=b.sample(P),N.push(_.value),P+=hr;g=void 0,h=N,m=P-hr,f="linear"}const y=_x(s.owner.current,t,h,{...n,duration:m,ease:f,times:g}),p=()=>{c=!1,y.cancel()},v=()=>{c=!0,le.update(p),l(),u()};return y.onfinish=()=>{c||(s.set(kx(h,n)),a&&a(),v())},{then(b,_){return d.then(b,_)},attachTimeline(b){return y.timeline=b,y.onfinish=null,he},get time(){return ut(y.currentTime||0)},set time(b){y.currentTime=_t(b)},get speed(){return y.playbackRate},set speed(b){y.playbackRate=b},get duration(){return ut(m)},play:()=>{o||(y.play(),ft(p))},pause:()=>y.pause(),stop:()=>{if(o=!0,y.playState==="idle")return;const{currentTime:b}=y;if(b){const _=$r({...n,autoplay:!1});s.setWithVelocity(_.sample(b-hr).value,_.sample(b).value,hr)}v()},complete:()=>{c||y.finish()},cancel:v}}function xp({keyframes:s,delay:t,onUpdate:r,onComplete:a}){const n=()=>(r&&r(s[s.length-1]),a&&a(),{time:0,speed:1,duration:0,play:he,pause:he,stop:he,then:i=>(i(),Promise.resolve()),cancel:he,complete:he});return t?$r({keyframes:[0,1],duration:0,delay:t,onComplete:n}):n()}const pp={type:"spring",stiffness:500,damping:25,restSpeed:10},gp=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),yp={type:"keyframes",duration:.8},bp={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vp=(s,{keyframes:t})=>t.length>2?yp:Kt.has(s)?s.startsWith("scale")?gp(t[1]):pp:bp,an=(s,t)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Tt.test(t)||t==="0")&&!t.startsWith("url(")),wp=new Set(["brightness","contrast","saturate","opacity"]);function jp(s){const[t,r]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[a]=r.match(Zr)||[];if(!a)return s;const n=r.replace(a,"");let i=wp.has(t)?1:0;return a!==r&&(i*=100),t+"("+i+n+")"}const Np=/([a-z-]*)\(.*?\)/g,nn={...Tt,getAnimatableNone:s=>{const t=s.match(Np);return t?t.map(jp).join(" "):s}},_p={...vc,color:Ee,backgroundColor:Ee,outlineColor:Ee,fill:Ee,stroke:Ee,borderColor:Ee,borderTopColor:Ee,borderRightColor:Ee,borderBottomColor:Ee,borderLeftColor:Ee,filter:nn,WebkitFilter:nn},si=s=>_p[s];function od(s,t){let r=si(s);return r!==nn&&(r=Tt),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const ld=s=>/^0[^.\s]+$/.test(s);function kp(s){if(typeof s=="number")return s===0;if(s!==null)return s==="none"||s==="0"||ld(s)}function Sp(s,t,r,a){const n=an(t,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const o=a.from!==void 0?a.from:s.get();let l;const d=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),kp(i[c])&&d.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(l=i[c]);if(n&&d.length&&l)for(let c=0;c<d.length;c++){const u=d[c];i[u]=od(t,l)}return i}function Cp({when:s,delay:t,delayChildren:r,staggerChildren:a,staggerDirection:n,repeat:i,repeatType:o,repeatDelay:l,from:d,elapsed:c,...u}){return!!Object.keys(u).length}function ri(s,t){return s[t]||s.default||s}const Tp={skipAnimations:!1},ai=(s,t,r,a={})=>n=>{const i=ri(a,s)||{},o=i.delay||a.delay||0;let{elapsed:l=0}=a;l=l-_t(o);const d=Sp(t,s,r,i),c=d[0],u=d[d.length-1],h=an(s,c),m=an(s,u);let f={keyframes:d,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:g=>{t.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{n(),i.onComplete&&i.onComplete()}};if(Cp(i)||(f={...f,...vp(s,f)}),f.duration&&(f.duration=_t(f.duration)),f.repeatDelay&&(f.repeatDelay=_t(f.repeatDelay)),!h||!m||Nx.current||i.type===!1||Tp.skipAnimations)return xp(f);if(!a.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=fp(t,s,f);if(g)return g}return $r(f)};function Fr(s){return!!(Oe(s)&&s.add)}const cd=s=>/^\-?\d*\.?\d+$/.test(s);function ni(s,t){s.indexOf(t)===-1&&s.push(t)}function ii(s,t){const r=s.indexOf(t);r>-1&&s.splice(r,1)}class oi{constructor(){this.subscriptions=[]}add(t){return ni(this.subscriptions,t),()=>ii(this.subscriptions,t)}notify(t,r,a){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,r,a);else for(let i=0;i<n;i++){const o=this.subscriptions[i];o&&o(t,r,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ep=s=>!isNaN(parseFloat(s));class Pp{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(a,n=!0)=>{this.prev=this.current,this.current=a;const{delta:i,timestamp:o}=Ne;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,le.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),n&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>le.postRender(this.velocityCheck),this.velocityCheck=({timestamp:a})=>{a!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Ep(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new oi);const a=this.events[t].add(r);return t==="change"?()=>{a(),le.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,a){this.set(r),this.prev=t,this.timeDelta=a}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?ad(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ps(s,t){return new Pp(s,t)}const dd=s=>t=>t.test(s),Ap={test:s=>s==="auto",parse:s=>s},ud=[Jt,K,et,gt,$f,Of,Ap],Ss=s=>ud.find(dd(s)),Lp=[...ud,Ee,Tt],Rp=s=>Lp.find(dd(s));function Mp(s,t,r){s.hasValue(t)?s.getValue(t).set(r):s.addValue(t,ps(r))}function Ip(s,t){const r=ta(s,t);let{transitionEnd:a={},transition:n={},...i}=r?s.makeTargetAnimatable(r,!1):{};i={...i,...a};for(const o in i){const l=Qf(i[o]);Mp(s,o,l)}}function Dp(s,t,r){var a,n;const i=Object.keys(t).filter(l=>!s.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const d=i[l],c=t[d];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(n=(a=r[d])!==null&&a!==void 0?a:s.readValue(d))!==null&&n!==void 0?n:t[d]),u!=null&&(typeof u=="string"&&(cd(u)||ld(u))?u=parseFloat(u):!Rp(u)&&Tt.test(c)&&(u=od(d,c)),s.addValue(d,ps(u,{owner:s})),r[d]===void 0&&(r[d]=u),u!==null&&s.setBaseTarget(d,u))}}function Op(s,t){return t?(t[s]||t.default||t).from:void 0}function $p(s,t,r){const a={};for(const n in s){const i=Op(n,t);if(i!==void 0)a[n]=i;else{const o=r.getValue(n);o&&(a[n]=o.get())}}return a}function Fp({protectedKeys:s,needsAnimating:t},r){const a=s.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,a}function Up(s,t){const r=s.get();if(Array.isArray(t)){for(let a=0;a<t.length;a++)if(t[a]!==r)return!0}else return r!==t}function hd(s,t,{delay:r=0,transitionOverride:a,type:n}={}){let{transition:i=s.getDefaultTransition(),transitionEnd:o,...l}=s.makeTargetAnimatable(t);const d=s.getValue("willChange");a&&(i=a);const c=[],u=n&&s.animationState&&s.animationState.getState()[n];for(const h in l){const m=s.getValue(h),f=l[h];if(!m||f===void 0||u&&Fp(u,h))continue;const g={delay:r,elapsed:0,...ri(i||{},h)};if(window.HandoffAppearAnimations){const v=s.getProps()[mc];if(v){const w=window.HandoffAppearAnimations(v,h,m,le);w!==null&&(g.elapsed=w,g.isHandoff=!0)}}let y=!g.isHandoff&&!Up(m,f);if(g.type==="spring"&&(m.getVelocity()||g.velocity)&&(y=!1),m.animation&&(y=!1),y)continue;m.start(ai(h,m,f,s.shouldReduceMotion&&Kt.has(h)?{type:!1}:g));const p=m.animation;Fr(d)&&(d.add(h),p.then(()=>d.remove(h))),c.push(p)}return o&&Promise.all(c).then(()=>{o&&Ip(s,o)}),c}function on(s,t,r={}){const a=ta(s,t,r.custom);let{transition:n=s.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(n=r.transitionOverride);const i=a?()=>Promise.all(hd(s,a,r)):()=>Promise.resolve(),o=s.variantChildren&&s.variantChildren.size?(d=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:h}=n;return Vp(s,t,c+d,u,h,r)}:()=>Promise.resolve(),{when:l}=n;if(l){const[d,c]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>c())}else return Promise.all([i(),o(r.delay)])}function Vp(s,t,r=0,a=0,n=1,i){const o=[],l=(s.variantChildren.size-1)*a,d=n===1?(c=0)=>c*a:(c=0)=>l-c*a;return Array.from(s.variantChildren).sort(zp).forEach((c,u)=>{c.notify("AnimationStart",t),o.push(on(c,t,{...i,delay:r+d(u)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(o)}function zp(s,t){return s.sortNodePosition(t)}function Bp(s,t,r={}){s.notify("AnimationStart",t);let a;if(Array.isArray(t)){const n=t.map(i=>on(s,i,r));a=Promise.all(n)}else if(typeof t=="string")a=on(s,t,r);else{const n=typeof t=="function"?ta(s,t,r.custom):t;a=Promise.all(hd(s,n,r))}return a.then(()=>s.notify("AnimationComplete",t))}const qp=[...zn].reverse(),Gp=zn.length;function Hp(s){return t=>Promise.all(t.map(({animation:r,options:a})=>Bp(s,r,a)))}function Wp(s){let t=Hp(s);const r=Jp();let a=!0;const n=(d,c)=>{const u=ta(s,c);if(u){const{transition:h,transitionEnd:m,...f}=u;d={...d,...f,...m}}return d};function i(d){t=d(s)}function o(d,c){const u=s.getProps(),h=s.getVariantContext(!0)||{},m=[],f=new Set;let g={},y=1/0;for(let v=0;v<Gp;v++){const w=qp[v],b=r[w],_=u[w]!==void 0?u[w]:h[w],N=Gs(_),P=w===c?b.isActive:null;P===!1&&(y=v);let j=_===h[w]&&_!==u[w]&&N;if(j&&a&&s.manuallyAnimateOnMount&&(j=!1),b.protectedKeys={...g},!b.isActive&&P===null||!_&&!b.prevProp||Yr(_)||typeof _=="boolean")continue;let O=Kp(b.prevProp,_)||w===c&&b.isActive&&!j&&N||v>y&&N,B=!1;const $=Array.isArray(_)?_:[_];let L=$.reduce(n,{});P===!1&&(L={});const{prevResolvedValues:G={}}=b,M={...G,...L},F=A=>{O=!0,f.has(A)&&(B=!0,f.delete(A)),b.needsAnimating[A]=!0};for(const A in M){const z=L[A],q=G[A];if(g.hasOwnProperty(A))continue;let U=!1;Ir(z)&&Ir(q)?U=!Ic(z,q):U=z!==q,U?z!==void 0?F(A):f.add(A):z!==void 0&&f.has(A)?F(A):b.protectedKeys[A]=!0}b.prevProp=_,b.prevResolvedValues=L,b.isActive&&(g={...g,...L}),a&&s.blockInitialAnimation&&(O=!1),O&&(!j||B)&&m.push(...$.map(A=>({animation:A,options:{type:w,...d}})))}if(f.size){const v={};f.forEach(w=>{const b=s.getBaseTarget(w);b!==void 0&&(v[w]=b)}),m.push({animation:v})}let p=!!m.length;return a&&(u.initial===!1||u.initial===u.animate)&&!s.manuallyAnimateOnMount&&(p=!1),a=!1,p?t(m):Promise.resolve()}function l(d,c,u){var h;if(r[d].isActive===c)return Promise.resolve();(h=s.variantChildren)===null||h===void 0||h.forEach(f=>{var g;return(g=f.animationState)===null||g===void 0?void 0:g.setActive(d,c)}),r[d].isActive=c;const m=o(u,d);for(const f in r)r[f].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r}}function Kp(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!Ic(t,s):!1}function Lt(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Jp(){return{animate:Lt(!0),whileInView:Lt(),whileHover:Lt(),whileTap:Lt(),whileDrag:Lt(),whileFocus:Lt(),exit:Lt()}}class Xp extends Pt{constructor(t){super(t),t.animationState||(t.animationState=Wp(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Yr(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let Yp=0;class Qp extends Pt{constructor(){super(...arguments),this.id=Yp++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:a}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t,{custom:a??this.node.getProps().custom});r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Zp={animation:{Feature:Xp},exit:{Feature:Qp}},Yi=(s,t)=>Math.abs(s-t);function eg(s,t){const r=Yi(s.x,t.x),a=Yi(s.y,t.y);return Math.sqrt(r**2+a**2)}class md{constructor(t,r,{transformPagePoint:a,contextWindow:n,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=_a(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,f=eg(h.offset,{x:0,y:0})>=3;if(!m&&!f)return;const{point:g}=h,{timestamp:y}=Ne;this.history.push({...g,timestamp:y});const{onStart:p,onMove:v}=this.handlers;m||(p&&p(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Na(m,this.transformPagePoint),le.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:f,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=_a(h.type==="pointercancel"?this.lastMoveEventInfo:Na(m,this.transformPagePoint),this.history);this.startEvent&&f&&f(h,p),g&&g(h,p)},!Pc(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=a,this.contextWindow=n||window;const o=ea(t),l=Na(o,this.transformPagePoint),{point:d}=l,{timestamp:c}=Ne;this.history=[{...d,timestamp:c}];const{onSessionStart:u}=r;u&&u(t,_a(l,this.history)),this.removeListeners=Nt(dt(this.contextWindow,"pointermove",this.handlePointerMove),dt(this.contextWindow,"pointerup",this.handlePointerUp),dt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ft(this.updatePoint)}}function Na(s,t){return t?{point:t(s.point)}:s}function Qi(s,t){return{x:s.x-t.x,y:s.y-t.y}}function _a({point:s},t){return{point:s,delta:Qi(s,fd(t)),offset:Qi(s,tg(t)),velocity:sg(t,.1)}}function tg(s){return s[0]}function fd(s){return s[s.length-1]}function sg(s,t){if(s.length<2)return{x:0,y:0};let r=s.length-1,a=null;const n=fd(s);for(;r>=0&&(a=s[r],!(n.timestamp-a.timestamp>_t(t)));)r--;if(!a)return{x:0,y:0};const i=ut(n.timestamp-a.timestamp);if(i===0)return{x:0,y:0};const o={x:(n.x-a.x)/i,y:(n.y-a.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ue(s){return s.max-s.min}function ln(s,t=0,r=.01){return Math.abs(s-t)<=r}function Zi(s,t,r,a=.5){s.origin=a,s.originPoint=de(t.min,t.max,s.origin),s.scale=Ue(r)/Ue(t),(ln(s.scale,1,1e-4)||isNaN(s.scale))&&(s.scale=1),s.translate=de(r.min,r.max,s.origin)-s.originPoint,(ln(s.translate)||isNaN(s.translate))&&(s.translate=0)}function Ms(s,t,r,a){Zi(s.x,t.x,r.x,a?a.originX:void 0),Zi(s.y,t.y,r.y,a?a.originY:void 0)}function eo(s,t,r){s.min=r.min+t.min,s.max=s.min+Ue(t)}function rg(s,t,r){eo(s.x,t.x,r.x),eo(s.y,t.y,r.y)}function to(s,t,r){s.min=t.min-r.min,s.max=s.min+Ue(t)}function Is(s,t,r){to(s.x,t.x,r.x),to(s.y,t.y,r.y)}function ag(s,{min:t,max:r},a){return t!==void 0&&s<t?s=a?de(t,s,a.min):Math.max(s,t):r!==void 0&&s>r&&(s=a?de(r,s,a.max):Math.min(s,r)),s}function so(s,t,r){return{min:t!==void 0?s.min+t:void 0,max:r!==void 0?s.max+r-(s.max-s.min):void 0}}function ng(s,{top:t,left:r,bottom:a,right:n}){return{x:so(s.x,r,n),y:so(s.y,t,a)}}function ro(s,t){let r=t.min-s.min,a=t.max-s.max;return t.max-t.min<s.max-s.min&&([r,a]=[a,r]),{min:r,max:a}}function ig(s,t){return{x:ro(s.x,t.x),y:ro(s.y,t.y)}}function og(s,t){let r=.5;const a=Ue(s),n=Ue(t);return n>a?r=Ws(t.min,t.max-a,s.min):a>n&&(r=Ws(s.min,s.max-n,t.min)),Ct(0,1,r)}function lg(s,t){const r={};return t.min!==void 0&&(r.min=t.min-s.min),t.max!==void 0&&(r.max=t.max-s.min),r}const cn=.35;function cg(s=cn){return s===!1?s=0:s===!0&&(s=cn),{x:ao(s,"left","right"),y:ao(s,"top","bottom")}}function ao(s,t,r){return{min:no(s,t),max:no(s,r)}}function no(s,t){return typeof s=="number"?s:s[t]||0}const io=()=>({translate:0,scale:1,origin:0,originPoint:0}),ns=()=>({x:io(),y:io()}),oo=()=>({min:0,max:0}),pe=()=>({x:oo(),y:oo()});function ze(s){return[s("x"),s("y")]}function xd({top:s,left:t,right:r,bottom:a}){return{x:{min:t,max:r},y:{min:s,max:a}}}function dg({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function ug(s,t){if(!t)return s;const r=t({x:s.left,y:s.top}),a=t({x:s.right,y:s.bottom});return{top:r.y,left:r.x,bottom:a.y,right:a.x}}function ka(s){return s===void 0||s===1}function dn({scale:s,scaleX:t,scaleY:r}){return!ka(s)||!ka(t)||!ka(r)}function Mt(s){return dn(s)||pd(s)||s.z||s.rotate||s.rotateX||s.rotateY}function pd(s){return lo(s.x)||lo(s.y)}function lo(s){return s&&s!=="0%"}function Ur(s,t,r){const a=s-r,n=t*a;return r+n}function co(s,t,r,a,n){return n!==void 0&&(s=Ur(s,n,a)),Ur(s,r,a)+t}function un(s,t=0,r=1,a,n){s.min=co(s.min,t,r,a,n),s.max=co(s.max,t,r,a,n)}function gd(s,{x:t,y:r}){un(s.x,t.translate,t.scale,t.originPoint),un(s.y,r.translate,r.scale,r.originPoint)}function hg(s,t,r,a=!1){const n=r.length;if(!n)return;t.x=t.y=1;let i,o;for(let l=0;l<n;l++){i=r[l],o=i.projectionDelta;const d=i.instance;d&&d.style&&d.style.display==="contents"||(a&&i.options.layoutScroll&&i.scroll&&i!==i.root&&is(s,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,gd(s,o)),a&&Mt(i.latestValues)&&is(s,i.latestValues))}t.x=uo(t.x),t.y=uo(t.y)}function uo(s){return Number.isInteger(s)||s>1.0000000000001||s<.999999999999?s:1}function bt(s,t){s.min=s.min+t,s.max=s.max+t}function ho(s,t,[r,a,n]){const i=t[n]!==void 0?t[n]:.5,o=de(s.min,s.max,i);un(s,t[r],t[a],o,t.scale)}const mg=["x","scaleX","originX"],fg=["y","scaleY","originY"];function is(s,t){ho(s.x,t,mg),ho(s.y,t,fg)}function yd(s,t){return xd(ug(s.getBoundingClientRect(),t))}function xg(s,t,r){const a=yd(s,r),{scroll:n}=t;return n&&(bt(a.x,n.offset.x),bt(a.y,n.offset.y)),a}const bd=({current:s})=>s?s.ownerDocument.defaultView:null,pg=new WeakMap;class gg{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pe(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const n=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(ea(u,"page").point)},i=(u,h)=>{const{drag:m,dragPropagation:f,onDragStart:g}=this.getProps();if(m&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Lc(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ze(p=>{let v=this.getAxisMotionValue(p).get()||0;if(et.test(v)){const{projection:w}=this.visualElement;if(w&&w.layout){const b=w.layout.layoutBox[p];b&&(v=Ue(b)*(parseFloat(v)/100))}}this.originPoint[p]=v}),g&&le.update(()=>g(u,h),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:m,dragDirectionLock:f,onDirectionLock:g,onDrag:y}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:p}=h;if(f&&this.currentDirection===null){this.currentDirection=yg(p),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,p),this.updateAxis("y",h.point,p),this.visualElement.render(),y&&y(u,h)},l=(u,h)=>this.stop(u,h),d=()=>ze(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new md(t,{onSessionStart:n,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:bd(this.visualElement)})}stop(t,r){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:n}=r;this.startAnimation(n);const{onDragEnd:i}=this.getProps();i&&le.update(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,a){const{drag:n}=this.getProps();if(!a||!mr(t,n,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+a[t];this.constraints&&this.constraints[t]&&(o=ag(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:a}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&rs(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&n?this.constraints=ng(n.layoutBox,r):this.constraints=!1,this.elastic=cg(a),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ze(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=lg(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!rs(t))return!1;const a=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=xg(a,n.root,this.visualElement.getTransformPagePoint());let o=ig(n.layout.layoutBox,i);if(r){const l=r(dg(o));this.hasMutatedConstraints=!!l,l&&(o=xd(l))}return o}startAnimation(t){const{drag:r,dragMomentum:a,dragElastic:n,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},c=ze(u=>{if(!mr(u,r,this.currentDirection))return;let h=d&&d[u]||{};o&&(h={min:0,max:0});const m=n?200:1e6,f=n?40:1e7,g={type:"inertia",velocity:a?t[u]:0,bounceStiffness:m,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(l)}startAxisValueAnimation(t,r){const a=this.getAxisMotionValue(t);return a.start(ai(t,a,0,r))}stopAnimation(){ze(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ze(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),a=this.visualElement.getProps(),n=a[r];return n||this.visualElement.getValue(t,(a.initial?a.initial[t]:void 0)||0)}snapToCursor(t){ze(r=>{const{drag:a}=this.getProps();if(!mr(r,a,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(r);if(n&&n.layout){const{min:o,max:l}=n.layout.layoutBox[r];i.set(t[r]-de(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:a}=this.visualElement;if(!rs(r)||!a||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};ze(o=>{const l=this.getAxisMotionValue(o);if(l){const d=l.get();n[o]=og({min:d,max:d},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),ze(o=>{if(!mr(o,t,null))return;const l=this.getAxisMotionValue(o),{min:d,max:c}=this.constraints[o];l.set(de(d,c,n[o]))})}addListeners(){if(!this.visualElement.current)return;pg.set(this.visualElement,this);const t=this.visualElement.current,r=dt(t,"pointerdown",d=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(d)}),a=()=>{const{dragConstraints:d}=this.getProps();rs(d)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",a);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),a();const o=ct(window,"resize",()=>this.scalePositionWithinConstraints()),l=n.addEventListener("didUpdate",({delta:d,hasLayoutChanged:c})=>{this.isDragging&&c&&(ze(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=d[u].translate,h.set(h.get()+d[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:a=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:o=cn,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:a,dragPropagation:n,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function mr(s,t,r){return(t===!0||t===s)&&(r===null||r===s)}function yg(s,t=10){let r=null;return Math.abs(s.y)>t?r="y":Math.abs(s.x)>t&&(r="x"),r}class bg extends Pt{constructor(t){super(t),this.removeGroupControls=he,this.removeListeners=he,this.controls=new gg(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||he}unmount(){this.removeGroupControls(),this.removeListeners()}}const mo=s=>(t,r)=>{s&&le.update(()=>s(t,r))};class vg extends Pt{constructor(){super(...arguments),this.removePointerDownListener=he}onPointerDown(t){this.session=new md(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bd(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:a,onPanEnd:n}=this.node.getProps();return{onSessionStart:mo(t),onStart:mo(r),onMove:a,onEnd:(i,o)=>{delete this.session,n&&le.update(()=>n(i,o))}}}mount(){this.removePointerDownListener=dt(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function wg(){const s=x.useContext(Jr);if(s===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:a}=s,n=x.useId();return x.useEffect(()=>a(n),[]),!t&&r?[!1,()=>r&&r(n)]:[!0]}const Cr={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fo(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const Cs={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(K.test(s))s=parseFloat(s);else return s;const r=fo(s,t.target.x),a=fo(s,t.target.y);return`${r}% ${a}%`}},jg={correct:(s,{treeScale:t,projectionDelta:r})=>{const a=s,n=Tt.parse(s);if(n.length>5)return a;const i=Tt.createTransformer(s),o=typeof n[0]!="number"?1:0,l=r.x.scale*t.x,d=r.y.scale*t.y;n[0+o]/=l,n[1+o]/=d;const c=de(l,d,.5);return typeof n[2+o]=="number"&&(n[2+o]/=c),typeof n[3+o]=="number"&&(n[3+o]/=c),i(n)}};class Ng extends te.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a,layoutId:n}=this.props,{projection:i}=t;Pf(_g),i&&(r.group&&r.group.add(i),a&&a.register&&n&&a.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Cr.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:a,drag:n,isPresent:i}=this.props,o=a.projection;return o&&(o.isPresent=i,n||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||le.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:a}=this.props,{projection:n}=t;n&&(n.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(n),a&&a.deregister&&a.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function vd(s){const[t,r]=wg(),a=x.useContext(qn);return te.createElement(Ng,{...s,layoutGroup:a,switchLayoutGroup:x.useContext(xc),isPresent:t,safeToRemove:r})}const _g={borderRadius:{...Cs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cs,borderTopRightRadius:Cs,borderBottomLeftRadius:Cs,borderBottomRightRadius:Cs,boxShadow:jg},wd=["TopLeft","TopRight","BottomLeft","BottomRight"],kg=wd.length,xo=s=>typeof s=="string"?parseFloat(s):s,po=s=>typeof s=="number"||K.test(s);function Sg(s,t,r,a,n,i){n?(s.opacity=de(0,r.opacity!==void 0?r.opacity:1,Cg(a)),s.opacityExit=de(t.opacity!==void 0?t.opacity:1,0,Tg(a))):i&&(s.opacity=de(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,a));for(let o=0;o<kg;o++){const l=`border${wd[o]}Radius`;let d=go(t,l),c=go(r,l);if(d===void 0&&c===void 0)continue;d||(d=0),c||(c=0),d===0||c===0||po(d)===po(c)?(s[l]=Math.max(de(xo(d),xo(c),a),0),(et.test(c)||et.test(d))&&(s[l]+="%")):s[l]=c}(t.rotate||r.rotate)&&(s.rotate=de(t.rotate||0,r.rotate||0,a))}function go(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const Cg=jd(0,.5,qc),Tg=jd(.5,.95,he);function jd(s,t,r){return a=>a<s?0:a>t?1:r(Ws(s,t,a))}function yo(s,t){s.min=t.min,s.max=t.max}function Ve(s,t){yo(s.x,t.x),yo(s.y,t.y)}function bo(s,t,r,a,n){return s-=t,s=Ur(s,1/r,a),n!==void 0&&(s=Ur(s,1/n,a)),s}function Eg(s,t=0,r=1,a=.5,n,i=s,o=s){if(et.test(t)&&(t=parseFloat(t),t=de(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=de(i.min,i.max,a);s===i&&(l-=t),s.min=bo(s.min,t,r,l,n),s.max=bo(s.max,t,r,l,n)}function vo(s,t,[r,a,n],i,o){Eg(s,t[r],t[a],t[n],t.scale,i,o)}const Pg=["x","scaleX","originX"],Ag=["y","scaleY","originY"];function wo(s,t,r,a){vo(s.x,t,Pg,r?r.x:void 0,a?a.x:void 0),vo(s.y,t,Ag,r?r.y:void 0,a?a.y:void 0)}function jo(s){return s.translate===0&&s.scale===1}function Nd(s){return jo(s.x)&&jo(s.y)}function Lg(s,t){return s.x.min===t.x.min&&s.x.max===t.x.max&&s.y.min===t.y.min&&s.y.max===t.y.max}function _d(s,t){return Math.round(s.x.min)===Math.round(t.x.min)&&Math.round(s.x.max)===Math.round(t.x.max)&&Math.round(s.y.min)===Math.round(t.y.min)&&Math.round(s.y.max)===Math.round(t.y.max)}function No(s){return Ue(s.x)/Ue(s.y)}class Rg{constructor(){this.members=[]}add(t){ni(this.members,t),t.scheduleRender()}remove(t){if(ii(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(n=>t===n);if(r===0)return!1;let a;for(let n=r;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){a=i;break}}return a?(this.promote(a),!0):!1}promote(t,r){const a=this.lead;if(t!==a&&(this.prevLead=a,this.lead=t,t.show(),a)){a.instance&&a.scheduleRender(),t.scheduleRender(),t.resumeFrom=a,r&&(t.resumeFrom.preserveOpacity=!0),a.snapshot&&(t.snapshot=a.snapshot,t.snapshot.latestValues=a.animationValues||a.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;n===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:a}=t;r.onExitComplete&&r.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _o(s,t,r){let a="";const n=s.x.translate/t.x,i=s.y.translate/t.y;if((n||i)&&(a=`translate3d(${n}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(a+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:d,rotateX:c,rotateY:u}=r;d&&(a+=`rotate(${d}deg) `),c&&(a+=`rotateX(${c}deg) `),u&&(a+=`rotateY(${u}deg) `)}const o=s.x.scale*t.x,l=s.y.scale*t.y;return(o!==1||l!==1)&&(a+=`scale(${o}, ${l})`),a||"none"}const Mg=(s,t)=>s.depth-t.depth;class Ig{constructor(){this.children=[],this.isDirty=!1}add(t){ni(this.children,t),this.isDirty=!0}remove(t){ii(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Mg),this.isDirty=!1,this.children.forEach(t)}}function Dg(s,t){const r=performance.now(),a=({timestamp:n})=>{const i=n-r;i>=t&&(ft(a),s(i-t))};return le.read(a,!0),()=>ft(a)}function Og(s){window.MotionDebug&&window.MotionDebug.record(s)}function $g(s){return s instanceof SVGElement&&s.tagName!=="svg"}function Fg(s,t,r){const a=Oe(s)?s:ps(s);return a.start(ai("",a,t,r)),a.animation}const ko=["","X","Y","Z"],Ug={visibility:"hidden"},So=1e3;let Vg=0;const It={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function kd({attachResizeListener:s,defaultParent:t,measureScroll:r,checkIsScrollRoot:a,resetTransform:n}){return class{constructor(o={},l=t==null?void 0:t()){this.id=Vg++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,It.totalNodes=It.resolvedTargetDeltas=It.recalculatedProjection=0,this.nodes.forEach(qg),this.nodes.forEach(Jg),this.nodes.forEach(Xg),this.nodes.forEach(Gg),Og(It)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ig)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new oi),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const d=this.eventHandlers.get(o);d&&d.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=$g(o),this.instance=o;const{layoutId:d,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||d)&&(this.isLayoutDirty=!0),s){let h;const m=()=>this.root.updateBlockedByResize=!1;s(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Dg(m,250),Cr.hasAnimatedSinceResize&&(Cr.hasAnimatedSinceResize=!1,this.nodes.forEach(To))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&u&&(d||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||t0,{onLayoutAnimationStart:p,onLayoutAnimationComplete:v}=u.getProps(),w=!this.targetLayout||!_d(this.targetLayout,g)||f,b=!m&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||m&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,b);const _={...ri(y,"layout"),onPlay:p,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else m||To(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ft(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Yg),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Co);return}this.isUpdating||this.nodes.forEach(Wg),this.isUpdating=!1,this.nodes.forEach(Kg),this.nodes.forEach(zg),this.nodes.forEach(Bg),this.clearAllSnapshots();const l=performance.now();Ne.delta=Ct(0,1e3/60,l-Ne.timestamp),Ne.timestamp=l,Ne.isProcessing=!0,xa.update.process(Ne),xa.preRender.process(Ne),xa.render.process(Ne),Ne.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Hg),this.sharedNodes.forEach(Qg)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,le.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){le.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:a(this.instance),offset:r(this.instance)})}resetTransform(){if(!n)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!Nd(this.projectionDelta),d=this.getTransformTemplate(),c=d?d(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(l||Mt(this.latestValues)||u)&&(n(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return o&&(d=this.removeTransform(d)),s0(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return pe();const l=o.measureViewportBox(),{scroll:d}=this.root;return d&&(bt(l.x,d.offset.x),bt(l.y,d.offset.y)),l}removeElementScroll(o){const l=pe();Ve(l,o);for(let d=0;d<this.path.length;d++){const c=this.path[d],{scroll:u,options:h}=c;if(c!==this.root&&u&&h.layoutScroll){if(u.isRoot){Ve(l,o);const{scroll:m}=this.root;m&&(bt(l.x,-m.offset.x),bt(l.y,-m.offset.y))}bt(l.x,u.offset.x),bt(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const d=pe();Ve(d,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&is(d,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Mt(u.latestValues)&&is(d,u.latestValues)}return Mt(this.latestValues)&&is(d,this.latestValues),d}removeTransform(o){const l=pe();Ve(l,o);for(let d=0;d<this.path.length;d++){const c=this.path[d];if(!c.instance||!Mt(c.latestValues))continue;dn(c.latestValues)&&c.updateSnapshot();const u=pe(),h=c.measurePageBox();Ve(u,h),wo(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Mt(this.latestValues)&&wo(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ne.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==d;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=Ne.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pe(),this.relativeTargetOrigin=pe(),Is(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Ve(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pe(),this.targetWithTransforms=pe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rg(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ve(this.target,this.layout.layoutBox),gd(this.target,this.targetDelta)):Ve(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pe(),this.relativeTargetOrigin=pe(),Is(this.relativeTargetOrigin,this.target,f.target),Ve(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}It.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||dn(this.parent.latestValues)||pd(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ne.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Ve(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,f=this.treeScale.y;hg(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:g}=l;if(!g){this.projectionTransform&&(this.projectionDelta=ns(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ns(),this.projectionDeltaWithTransform=ns());const y=this.projectionTransform;Ms(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=_o(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==m||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),It.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const d=this.snapshot,c=d?d.latestValues:{},u={...this.latestValues},h=ns();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=pe(),f=d?d.source:void 0,g=this.layout?this.layout.source:void 0,y=f!==g,p=this.getStack(),v=!p||p.members.length<=1,w=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(e0));this.animationProgress=0;let b;this.mixTargetDelta=_=>{const N=_/1e3;Eo(h.x,o.x,N),Eo(h.y,o.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Is(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Zg(this.relativeTarget,this.relativeTargetOrigin,m,N),b&&Lg(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=pe()),Ve(b,this.relativeTarget)),y&&(this.animationValues=u,Sg(u,c,this.latestValues,N,w,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ft(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=le.update(()=>{Cr.hasAnimatedSinceResize=!0,this.currentAnimation=Fg(0,So,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(So),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:d,layout:c,latestValues:u}=o;if(!(!l||!d||!c)){if(this!==o&&this.layout&&c&&Sd(this.options.animationType,this.layout.layoutBox,c.layoutBox)){d=this.target||pe();const h=Ue(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+h;const m=Ue(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+m}Ve(l,d),is(l,u),Ms(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Rg),this.sharedNodes.get(o).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:d}={}){const c=this.getStack();c&&c.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:d}=o;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(l=!0),!l)return;const c={};for(let u=0;u<ko.length;u++){const h="rotate"+ko[u];d[h]&&(c[h]=d[h],o.setStaticValue(h,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var l,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ug;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Sr(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Sr(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Mt(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=_o(this.projectionDeltaWithTransform,this.treeScale,m),u&&(c.transform=u(m,c.transform));const{x:f,y:g}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,h.animationValues?c.opacity=h===this?(d=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const y in Rr){if(m[y]===void 0)continue;const{correct:p,applyTo:v}=Rr[y],w=c.transform==="none"?m[y]:p(m[y],h);if(v){const b=v.length;for(let _=0;_<b;_++)c[v[_]]=w}else c[y]=w}return this.options.layoutId&&(c.pointerEvents=h===this?Sr(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Co),this.root.sharedNodes.clear()}}}function zg(s){s.updateLayout()}function Bg(s){var t;const r=((t=s.resumeFrom)===null||t===void 0?void 0:t.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&r&&s.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=s.layout,{animationType:i}=s.options,o=r.source!==s.layout.source;i==="size"?ze(h=>{const m=o?r.measuredBox[h]:r.layoutBox[h],f=Ue(m);m.min=a[h].min,m.max=m.min+f}):Sd(i,r.layoutBox,a)&&ze(h=>{const m=o?r.measuredBox[h]:r.layoutBox[h],f=Ue(a[h]);m.max=m.min+f,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[h].max=s.relativeTarget[h].min+f)});const l=ns();Ms(l,a,r.layoutBox);const d=ns();o?Ms(d,s.applyTransform(n,!0),r.measuredBox):Ms(d,a,r.layoutBox);const c=!Nd(l);let u=!1;if(!s.resumeFrom){const h=s.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:f}=h;if(m&&f){const g=pe();Is(g,r.layoutBox,m.layoutBox);const y=pe();Is(y,a,f.layoutBox),_d(g,y)||(u=!0),h.options.layoutRoot&&(s.relativeTarget=y,s.relativeTargetOrigin=g,s.relativeParent=h)}}}s.notifyListeners("didUpdate",{layout:a,snapshot:r,delta:d,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(s.isLead()){const{onExitComplete:a}=s.options;a&&a()}s.options.transition=void 0}function qg(s){It.totalNodes++,s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function Gg(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function Hg(s){s.clearSnapshot()}function Co(s){s.clearMeasurements()}function Wg(s){s.isLayoutDirty=!1}function Kg(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function To(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function Jg(s){s.resolveTargetDelta()}function Xg(s){s.calcProjection()}function Yg(s){s.resetRotation()}function Qg(s){s.removeLeadSnapshot()}function Eo(s,t,r){s.translate=de(t.translate,0,r),s.scale=de(t.scale,1,r),s.origin=t.origin,s.originPoint=t.originPoint}function Po(s,t,r,a){s.min=de(t.min,r.min,a),s.max=de(t.max,r.max,a)}function Zg(s,t,r,a){Po(s.x,t.x,r.x,a),Po(s.y,t.y,r.y,a)}function e0(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const t0={duration:.45,ease:[.4,0,.1,1]},Ao=s=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(s),Lo=Ao("applewebkit/")&&!Ao("chrome/")?Math.round:he;function Ro(s){s.min=Lo(s.min),s.max=Lo(s.max)}function s0(s){Ro(s.x),Ro(s.y)}function Sd(s,t,r){return s==="position"||s==="preserve-aspect"&&!ln(No(t),No(r),.2)}const r0=kd({attachResizeListener:(s,t)=>ct(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sa={current:void 0},Cd=kd({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Sa.current){const s=new r0({});s.mount(window),s.setOptions({layoutScroll:!0}),Sa.current=s}return Sa.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),a0={pan:{Feature:vg},drag:{Feature:bg,ProjectionNode:Cd,MeasureLayout:vd}},n0=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function i0(s){const t=n0.exec(s);if(!t)return[,];const[,r,a]=t;return[r,a]}function hn(s,t,r=1){const[a,n]=i0(s);if(!a)return;const i=window.getComputedStyle(t).getPropertyValue(a);if(i){const o=i.trim();return cd(o)?parseFloat(o):o}else return en(n)?hn(n,t,r+1):n}function o0(s,{...t},r){const a=s.current;if(!(a instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),s.values.forEach(n=>{const i=n.get();if(!en(i))return;const o=hn(i,a);o&&n.set(o)});for(const n in t){const i=t[n];if(!en(i))continue;const o=hn(i,a);o&&(t[n]=o,r||(r={}),r[n]===void 0&&(r[n]=i))}return{target:t,transitionEnd:r}}const l0=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Td=s=>l0.has(s),c0=s=>Object.keys(s).some(Td),Mo=s=>s===Jt||s===K,Io=(s,t)=>parseFloat(s.split(", ")[t]),Do=(s,t)=>(r,{transform:a})=>{if(a==="none"||!a)return 0;const n=a.match(/^matrix3d\((.+)\)$/);if(n)return Io(n[1],t);{const i=a.match(/^matrix\((.+)\)$/);return i?Io(i[1],s):0}},d0=new Set(["x","y","z"]),u0=Zs.filter(s=>!d0.has(s));function h0(s){const t=[];return u0.forEach(r=>{const a=s.getValue(r);a!==void 0&&(t.push([r,a.get()]),a.set(r.startsWith("scale")?1:0))}),t.length&&s.render(),t}const gs={width:({x:s},{paddingLeft:t="0",paddingRight:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),height:({y:s},{paddingTop:t="0",paddingBottom:r="0"})=>s.max-s.min-parseFloat(t)-parseFloat(r),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:Do(4,13),y:Do(5,14)};gs.translateX=gs.x;gs.translateY=gs.y;const m0=(s,t,r)=>{const a=t.measureViewportBox(),n=t.current,i=getComputedStyle(n),{display:o}=i,l={};o==="none"&&t.setStaticValue("display",s.display||"block"),r.forEach(c=>{l[c]=gs[c](a,i)}),t.render();const d=t.measureViewportBox();return r.forEach(c=>{const u=t.getValue(c);u&&u.jump(l[c]),s[c]=gs[c](d,i)}),s},f0=(s,t,r={},a={})=>{t={...t},a={...a};const n=Object.keys(t).filter(Td);let i=[],o=!1;const l=[];if(n.forEach(d=>{const c=s.getValue(d);if(!s.hasValue(d))return;let u=r[d],h=Ss(u);const m=t[d];let f;if(Ir(m)){const g=m.length,y=m[0]===null?1:0;u=m[y],h=Ss(u);for(let p=y;p<g&&m[p]!==null;p++)f?Qn(Ss(m[p])===f):f=Ss(m[p])}else f=Ss(m);if(h!==f)if(Mo(h)&&Mo(f)){const g=c.get();typeof g=="string"&&c.set(parseFloat(g)),typeof m=="string"?t[d]=parseFloat(m):Array.isArray(m)&&f===K&&(t[d]=m.map(parseFloat))}else h!=null&&h.transform&&(f!=null&&f.transform)&&(u===0||m===0)?u===0?c.set(f.transform(u)):t[d]=h.transform(m):(o||(i=h0(s),o=!0),l.push(d),a[d]=a[d]!==void 0?a[d]:t[d],c.jump(m))}),l.length){const d=l.indexOf("height")>=0?window.pageYOffset:null,c=m0(t,s,l);return i.length&&i.forEach(([u,h])=>{s.getValue(u).set(h)}),s.render(),Xr&&d!==null&&window.scrollTo({top:d}),{target:c,transitionEnd:a}}else return{target:t,transitionEnd:a}};function x0(s,t,r,a){return c0(t)?f0(s,t,r,a):{target:t,transitionEnd:a}}const p0=(s,t,r,a)=>{const n=o0(s,t,a);return t=n.target,a=n.transitionEnd,x0(s,t,r,a)},mn={current:null},Ed={current:!1};function g0(){if(Ed.current=!0,!!Xr)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>mn.current=s.matches;s.addListener(t),t()}else mn.current=!1}function y0(s,t,r){const{willChange:a}=t;for(const n in t){const i=t[n],o=r[n];if(Oe(i))s.addValue(n,i),Fr(a)&&a.add(n);else if(Oe(o))s.addValue(n,ps(i,{owner:s})),Fr(a)&&a.remove(n);else if(o!==i)if(s.hasValue(n)){const l=s.getValue(n);!l.hasAnimated&&l.set(i)}else{const l=s.getStaticValue(n);s.addValue(n,ps(l!==void 0?l:i,{owner:s}))}}for(const n in r)t[n]===void 0&&s.removeValue(n);return t}const Oo=new WeakMap,Pd=Object.keys(Hs),b0=Pd.length,$o=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],v0=Bn.length;class w0{constructor({parent:t,props:r,presenceContext:a,reducedMotionConfig:n,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>le.render(this.render,!1,!0);const{latestValues:l,renderState:d}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=d,this.parent=t,this.props=r,this.presenceContext=a,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=o,this.isControllingVariants=Qr(r),this.isVariantNode=fc(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(r,{});for(const h in u){const m=u[h];l[h]!==void 0&&Oe(m)&&(m.set(l[h],!1),Fr(c)&&c.add(h))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,Oo.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),Ed.current||g0(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:mn.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Oo.delete(this.current),this.projection&&this.projection.unmount(),ft(this.notifyUpdate),ft(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const a=Kt.has(t),n=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&le.update(this.notifyUpdate,!1,!0),a&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{n(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},a,n,i){let o,l;for(let d=0;d<b0;d++){const c=Pd[d],{isEnabled:u,Feature:h,ProjectionNode:m,MeasureLayout:f}=Hs[c];m&&(o=m),u(r)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),f&&(l=f))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:c,drag:u,dragConstraints:h,layoutScroll:m,layoutRoot:f}=r;this.projection.setOptions({layoutId:d,layout:c,alwaysMeasureLayout:!!u||h&&rs(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:f})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let a=0;a<$o.length;a++){const n=$o[a];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i=t["on"+n];i&&(this.propEventSubscriptions[n]=this.on(n,i))}this.prevMotionValues=y0(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const a=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(a.initial=this.props.initial),a}const r={};for(let a=0;a<v0;a++){const n=Bn[a],i=this.props[n];(Gs(i)||i===!1)&&(r[n]=i)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let a=this.values.get(t);return a===void 0&&r!==void 0&&(a=ps(r,{owner:this}),this.addValue(t,a)),a}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:a}=this.props,n=typeof a=="string"||typeof a=="object"?(r=Yn(this.props,a))===null||r===void 0?void 0:r[t]:void 0;if(a&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Oe(i)?i:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new oi),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class Ad extends w0{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:a}){delete r[t],delete a[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...a},{transformValues:n},i){let o=$p(a,t||{},this);if(n&&(r&&(r=n(r)),a&&(a=n(a)),o&&(o=n(o))),i){Dp(this,a,o);const l=p0(this,a,o,r);r=l.transitionEnd,a=l.target}return{transition:t,transitionEnd:r,...a}}}function j0(s){return window.getComputedStyle(s)}class N0 extends Ad{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(Kt.has(r)){const a=si(r);return a&&a.default||0}else{const a=j0(t),n=(yc(r)?a.getPropertyValue(r):a[r])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(t,{transformPagePoint:r}){return yd(t,r)}build(t,r,a,n){Hn(t,r,a,n.transformTemplate)}scrapeMotionValuesFromProps(t,r){return Xn(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Oe(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,a,n){_c(t,r,a,n)}}class _0 extends Ad{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Kt.has(r)){const a=si(r);return a&&a.default||0}return r=kc.has(r)?r:Vn(r),t.getAttribute(r)}measureInstanceViewportBox(){return pe()}scrapeMotionValuesFromProps(t,r){return Cc(t,r)}build(t,r,a,n){Kn(t,r,a,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,a,n){Sc(t,r,a,n)}mount(t){this.isSVGTag=Jn(t.tagName),super.mount(t)}}const k0=(s,t)=>Gn(s)?new _0(t,{enableHardwareAcceleration:!1}):new N0(t,{enableHardwareAcceleration:!0}),S0={layout:{ProjectionNode:Cd,MeasureLayout:vd}},C0={...Zp,...bx,...a0,...S0},R=Tf((s,t)=>ix(s,t,C0,k0));function Ld(){const s=x.useRef(!1);return Un(()=>(s.current=!0,()=>{s.current=!1}),[]),s}function T0(){const s=Ld(),[t,r]=x.useState(0),a=x.useCallback(()=>{s.current&&r(t+1)},[t]);return[x.useCallback(()=>le.postRender(a),[a]),t]}class E0 extends x.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function P0({children:s,isPresent:t}){const r=x.useId(),a=x.useRef(null),n=x.useRef({width:0,height:0,top:0,left:0});return x.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:d}=n.current;if(t||!a.current||!i||!o)return;a.current.dataset.motionPopId=r;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),x.createElement(E0,{isPresent:t,childRef:a,sizeRef:n},x.cloneElement(s,{ref:a}))}const Ca=({children:s,initial:t,isPresent:r,onExitComplete:a,custom:n,presenceAffectsLayout:i,mode:o})=>{const l=Tc(A0),d=x.useId(),c=x.useMemo(()=>({id:d,initial:t,isPresent:r,custom:n,onExitComplete:u=>{l.set(u,!0);for(const h of l.values())if(!h)return;a&&a()},register:u=>(l.set(u,!1),()=>l.delete(u))}),i?void 0:[r]);return x.useMemo(()=>{l.forEach((u,h)=>l.set(h,!1))},[r]),x.useEffect(()=>{!r&&!l.size&&a&&a()},[r]),o==="popLayout"&&(s=x.createElement(P0,{isPresent:r},s)),x.createElement(Jr.Provider,{value:c},s)};function A0(){return new Map}function L0(s){return x.useEffect(()=>()=>s(),[])}const Dt=s=>s.key||"";function R0(s,t){s.forEach(r=>{const a=Dt(r);t.set(a,r)})}function M0(s){const t=[];return x.Children.forEach(s,r=>{x.isValidElement(r)&&t.push(r)}),t}const xe=({children:s,custom:t,initial:r=!0,onExitComplete:a,exitBeforeEnter:n,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=x.useContext(qn).forceRender||T0()[0],d=Ld(),c=M0(s);let u=c;const h=x.useRef(new Map).current,m=x.useRef(u),f=x.useRef(new Map).current,g=x.useRef(!0);if(Un(()=>{g.current=!1,R0(c,f),m.current=u}),L0(()=>{g.current=!0,f.clear(),h.clear()}),g.current)return x.createElement(x.Fragment,null,u.map(w=>x.createElement(Ca,{key:Dt(w),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:o},w)));u=[...u];const y=m.current.map(Dt),p=c.map(Dt),v=y.length;for(let w=0;w<v;w++){const b=y[w];p.indexOf(b)===-1&&!h.has(b)&&h.set(b,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((w,b)=>{if(p.indexOf(b)!==-1)return;const _=f.get(b);if(!_)return;const N=y.indexOf(b);let P=w;if(!P){const j=()=>{h.delete(b);const k=Array.from(f.keys()).filter(O=>!p.includes(O));if(k.forEach(O=>f.delete(O)),m.current=c.filter(O=>{const B=Dt(O);return B===b||k.includes(B)}),!h.size){if(d.current===!1)return;l(),a&&a()}};P=x.createElement(Ca,{key:Dt(_),isPresent:!1,onExitComplete:j,custom:t,presenceAffectsLayout:i,mode:o},_),h.set(b,P)}u.splice(N,0,P)}),u=u.map(w=>{const b=w.key;return h.has(b)?w:x.createElement(Ca,{key:Dt(w),isPresent:!0,presenceAffectsLayout:i,mode:o},w)}),x.createElement(x.Fragment,null,h.size?u:u.map(w=>x.cloneElement(w)))},I0=()=>{const{toasts:s,removeToast:t}=Et(),r=n=>{switch(n){case"destructive":return e.jsx(se,{className:"w-5 h-5 text-red-500"});case"success":return e.jsx(be,{className:"w-5 h-5 text-green-500"});case"warning":return e.jsx(kt,{className:"w-5 h-5 text-yellow-500"});default:return e.jsx(Um,{className:"w-5 h-5 text-blue-500"})}},a=n=>{switch(n){case"destructive":return"bg-red-50 border-red-200 text-red-800";case"success":return"bg-green-50 border-green-200 text-green-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}};return e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.jsx(xe,{children:s.map(n=>e.jsxs(R.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{duration:.3},className:`flex items-start space-x-3 p-4 rounded-lg border shadow-lg max-w-sm ${a(n.variant)}`,children:[r(n.variant),e.jsxs("div",{className:"flex-1",children:[n.title&&e.jsx("h4",{className:"font-semibold text-sm mb-1",children:n.title}),n.description&&e.jsx("p",{className:"text-sm opacity-90",children:n.description})]}),e.jsx("button",{onClick:()=>t(n.id),className:"flex-shrink-0 opacity-60 hover:opacity-100 transition-opacity",children:e.jsx(ve,{className:"w-4 h-4"})})]},n.id))})})},D0="modulepreload",O0=function(s){return"/"+s},Fo={},rr=function(t,r,a){if(!r||r.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=O0(i),i in Fo)return;Fo[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!a)for(let u=n.length-1;u>=0;u--){const h=n[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":D0,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},$0=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...r)=>rr(()=>Promise.resolve().then(()=>bs),void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)};class li extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}}class F0 extends li{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class U0 extends li{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class V0 extends li{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var fn;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(fn||(fn={}));var z0=globalThis&&globalThis.__awaiter||function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(a.next(u))}catch(h){o(h)}}function d(u){try{c(a.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):n(u.value).then(l,d)}c((a=a.apply(s,t||[])).next())})};class B0{constructor(t,{headers:r={},customFetch:a,region:n=fn.Any}={}){this.url=t,this.headers=r,this.region=n,this.fetch=$0(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var a;return z0(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=r;let l={},{region:d}=r;d||(d=this.region),d&&d!=="any"&&(l["x-region"]=d);let c;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:c}).catch(g=>{throw new F0(g)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new U0(u);if(!u.ok)throw new V0(u);let m=((a=u.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),f;return m==="application/json"?f=yield u.json():m==="application/octet-stream"?f=yield u.blob():m==="text/event-stream"?f=u:m==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(n){return{data:null,error:n}}})}}var Re={},ci={},sa={},ar={},ra={},aa={},q0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ys=q0();const G0=ys.fetch,Rd=ys.fetch.bind(ys),Md=ys.Headers,H0=ys.Request,W0=ys.Response,bs=Object.freeze(Object.defineProperty({__proto__:null,Headers:Md,Request:H0,Response:W0,default:Rd,fetch:G0},Symbol.toStringTag,{value:"Module"})),K0=yu(bs);var na={};Object.defineProperty(na,"__esModule",{value:!0});let J0=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};na.default=J0;var Id=Ge&&Ge.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(aa,"__esModule",{value:!0});const X0=Id(K0),Y0=Id(na);let Q0=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=X0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let n=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,d;let c=null,u=null,h=null,m=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),p=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&p&&p.length>1&&(h=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,m=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await i.text();try{c=JSON.parse(y),Array.isArray(c)&&i.status===404&&(u=[],c=null,m=200,f="OK")}catch{i.status===404&&y===""?(m=204,f="No Content"):c={message:y}}if(c&&this.isMaybeSingle&&(!((d=c==null?void 0:c.details)===null||d===void 0)&&d.includes("0 rows"))&&(c=null,m=200,f="OK"),c&&this.shouldThrowOnError)throw new Y0.default(c)}return{error:c,data:u,count:h,status:m,statusText:f}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,l,d;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(d=i==null?void 0:i.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,r)}returns(){return this}overrideTypes(){return this}};aa.default=Q0;var Z0=Ge&&Ge.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ra,"__esModule",{value:!0});const ey=Z0(aa);let ty=class extends ey.default{select(t){let r=!1;const a=(t??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:a,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:a=r}={}){const n=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,r,{foreignTable:a,referencedTable:n=a}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:a=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var l;const d=[t?"analyze":null,r?"verbose":null,a?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${d};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ra.default=ty;var sy=Ge&&Ge.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ar,"__esModule",{value:!0});const ry=sy(ra);let ay=class extends ry.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const a=Array.from(new Set(r)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${a})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:a,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=a===void 0?"":`(${a})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,a])=>{this.url.searchParams.append(r,`eq.${a}`)}),this}not(t,r,a){return this.url.searchParams.append(t,`not.${r}.${a}`),this}or(t,{foreignTable:r,referencedTable:a=r}={}){const n=a?`${a}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,r,a){return this.url.searchParams.append(t,`${r}.${a}`),this}};ar.default=ay;var ny=Ge&&Ge.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(sa,"__esModule",{value:!0});const Ts=ny(ar);let iy=class{constructor(t,{headers:r={},schema:a,fetch:n}){this.url=t,this.headers=r,this.schema=a,this.fetch=n}select(t,{head:r=!1,count:a}={}){const n=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),a&&(this.headers.Prefer=`count=${a}`),new Ts.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:a=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),a||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(o.length>0){const l=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ts.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:a=!1,count:n,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${a?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const d=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ts.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const a="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),this.headers.Prefer=n.join(","),new Ts.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",a=[];return t&&a.push(`count=${t}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new Ts.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};sa.default=iy;var ia={},oa={};Object.defineProperty(oa,"__esModule",{value:!0});oa.version=void 0;oa.version="0.0.0-automated";Object.defineProperty(ia,"__esModule",{value:!0});ia.DEFAULT_HEADERS=void 0;const oy=oa;ia.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${oy.version}`};var Dd=Ge&&Ge.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ci,"__esModule",{value:!0});const ly=Dd(sa),cy=Dd(ar),dy=ia;let uy=class Od{constructor(t,{headers:r={},schema:a,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},dy.DEFAULT_HEADERS),r),this.schemaName=a,this.fetch=n}from(t){const r=new URL(`${this.url}/${t}`);return new ly.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Od(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:a=!1,get:n=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let d;a||n?(o=a?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",d=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new cy.default({method:o,url:l,headers:c,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};ci.default=uy;var vs=Ge&&Ge.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Re,"__esModule",{value:!0});Re.PostgrestError=Re.PostgrestBuilder=Re.PostgrestTransformBuilder=Re.PostgrestFilterBuilder=Re.PostgrestQueryBuilder=Re.PostgrestClient=void 0;const $d=vs(ci);Re.PostgrestClient=$d.default;const Fd=vs(sa);Re.PostgrestQueryBuilder=Fd.default;const Ud=vs(ar);Re.PostgrestFilterBuilder=Ud.default;const Vd=vs(ra);Re.PostgrestTransformBuilder=Vd.default;const zd=vs(aa);Re.PostgrestBuilder=zd.default;const Bd=vs(na);Re.PostgrestError=Bd.default;var hy=Re.default={PostgrestClient:$d.default,PostgrestQueryBuilder:Fd.default,PostgrestFilterBuilder:Ud.default,PostgrestTransformBuilder:Vd.default,PostgrestBuilder:zd.default,PostgrestError:Bd.default};const{PostgrestClient:my,PostgrestQueryBuilder:Nj,PostgrestFilterBuilder:_j,PostgrestTransformBuilder:kj,PostgrestBuilder:Sj,PostgrestError:Cj}=hy;let xn;typeof window>"u"?xn=require("ws"):xn=window.WebSocket;const fy=xn,xy="2.11.10",py={"X-Client-Info":`realtime-js/${xy}`},gy="1.0.0",qd=1e4,yy=1e3;var ds;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(ds||(ds={}));var Ce;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Ce||(Ce={}));var Ke;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Ke||(Ke={}));var pn;(function(s){s.websocket="websocket"})(pn||(pn={}));var $t;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})($t||($t={}));class by{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,r,a)}_decodeBroadcast(t,r,a){const n=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=a.decode(t.slice(o,o+n));o=o+n;const d=a.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(a.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:d,payload:c}}}class Gd{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var oe;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(oe||(oe={}));const Uo=(s,t,r={})=>{var a;const n=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((i,o)=>(i[o]=vy(o,s,t,n),i),{})},vy=(s,t,r,a)=>{const n=t.find(l=>l.name===s),i=n==null?void 0:n.type,o=r[s];return i&&!a.includes(i)?Hd(i,o):gn(o)},Hd=(s,t)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return _y(t,r)}switch(s){case oe.bool:return wy(t);case oe.float4:case oe.float8:case oe.int2:case oe.int4:case oe.int8:case oe.numeric:case oe.oid:return jy(t);case oe.json:case oe.jsonb:return Ny(t);case oe.timestamp:return ky(t);case oe.abstime:case oe.date:case oe.daterange:case oe.int4range:case oe.int8range:case oe.money:case oe.reltime:case oe.text:case oe.time:case oe.timestamptz:case oe.timetz:case oe.tsrange:case oe.tstzrange:return gn(t);default:return gn(t)}},gn=s=>s,wy=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},jy=s=>{if(typeof s=="string"){const t=parseFloat(s);if(!Number.isNaN(t))return t}return s},Ny=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(t){return console.log(`JSON parse error: ${t}`),s}return s},_y=(s,t)=>{if(typeof s!="string")return s;const r=s.length-1,a=s[r];if(s[0]==="{"&&a==="}"){let i;const o=s.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Hd(t,l))}return s},ky=s=>typeof s=="string"?s.replace(" ","T"):s,Wd=s=>{let t=s;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Ta{constructor(t,r,a={},n=qd){this.channel=t,this.event=r,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Vo;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Vo||(Vo={}));class Ds{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ds.syncState(this.state,n,i,o),this.pendingDiffs.forEach(d=>{this.state=Ds.syncDiff(this.state,d,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Ds.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,n){const i=this.cloneDeep(t),o=this.transformState(r),l={},d={};return this.map(i,(c,u)=>{o[c]||(d[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const m=u.map(p=>p.presence_ref),f=h.map(p=>p.presence_ref),g=u.filter(p=>f.indexOf(p.presence_ref)<0),y=h.filter(p=>m.indexOf(p.presence_ref)<0);g.length>0&&(l[c]=g),y.length>0&&(d[c]=y)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:d},a,n)}static syncDiff(t,r,a,n){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(i,(l,d)=>{var c;const u=(c=t[l])!==null&&c!==void 0?c:[];if(t[l]=this.cloneDeep(d),u.length>0){const h=t[l].map(f=>f.presence_ref),m=u.filter(f=>h.indexOf(f.presence_ref)<0);t[l].unshift(...m)}a(l,u,d)}),this.map(o,(l,d)=>{let c=t[l];if(!c)return;const u=d.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=c,n(l,c,d),c.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const n=t[a];return"metas"in n?r[a]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[a]=n,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zo;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(zo||(zo={}));var Bo;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Bo||(Bo={}));var lt;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(lt||(lt={}));class di{constructor(t,r={config:{}},a){this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=Ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ta(this,Ke.join,this.params,this.timeout),this.rejoinTimer=new Gd(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ce.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ke.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Ds(this),this.broadcastEndpointURL=Wd(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var a,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>t==null?void 0:t(lt.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(lt.CLOSED));const d={},c={broadcast:i,presence:o,postgres_changes:(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(u=>u.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t==null||t(lt.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,f=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,g=[];for(let y=0;y<f;y++){const p=m[y],{filter:{event:v,schema:w,table:b,filter:_}}=p,N=u&&u[y];if(N&&N.event===v&&N.schema===w&&N.table===b&&N.filter===_)g.push(Object.assign(Object.assign({},p),{id:N.id}));else{this.unsubscribe(),this.state=Ce.errored,t==null||t(lt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(lt.SUBSCRIBED);return}}).receive("error",u=>{this.state=Ce.errored,t==null||t(lt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(lt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this._on(t,r,a)}async send(t,r={}){var a,n;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,d;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ce.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ke.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(a=>{const n=new Ta(this,Ke.leave,{},t);n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,a){const n=new AbortController,i=setTimeout(()=>n.abort(),a),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),o}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Ta(this,t,r,a);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var n,i;const o=t.toLocaleLowerCase(),{close:l,error:d,leave:c,join:u}=Ke;if(a&&[l,d,c,u].indexOf(o)>=0&&a!==this._joinRef())return;let m=this._onMessage(o,r,a);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var g,y,p;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((p=(y=f.filter)===null||y===void 0?void 0:y.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(f=>f.callback(m,a)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var g,y,p,v,w,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,N=(g=f.filter)===null||g===void 0?void 0:g.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((p=r.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const _=(w=(v=f==null?void 0:f.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return _==="*"||_===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const g=m.data,{schema:y,table:p,commit_timestamp:v,type:w,errors:b}=g;m=Object.assign(Object.assign({},{schema:y,table:p,commit_timestamp:v,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(g))}f.callback(m,a)})}_isClosed(){return this.state===Ce.closed}_isJoined(){return this.state===Ce.joined}_isJoining(){return this.state===Ce.joining}_isLeaving(){return this.state===Ce.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const n=t.toLocaleLowerCase(),i={type:n,filter:r,callback:a};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&di.isEqual(n.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ke.close,{},t)}_onError(t){this._on(Ke.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ce.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Uo(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Uo(t.columns,t.old_record)),r}}const qo=()=>{},Sy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Cy{constructor(t,r){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=py,this.params={},this.timeout=qd,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qo,this.ref=0,this.logger=qo,this.conn=null,this.sendBuffer=[],this.serializer=new by,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>rr(()=>Promise.resolve().then(()=>bs),void 0).then(({default:d})=>d(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${pn.websocket}`,this.httpEndpoint=Wd(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const n=(a=r==null?void 0:r.params)===null||a===void 0?void 0:a.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Gd(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=fy),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Ty(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:gy}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(a=>a.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels=this.channels.filter(a=>a._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case ds.connecting:return $t.Connecting;case ds.open:return $t.Open;case ds.closing:return $t.Closing;default:return $t.Closed}}isConnected(){return this.connectionState()===$t.Open}channel(t,r={config:{}}){const a=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===a);if(n)return n;{const i=new di(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:a,payload:n,ref:i}=t,o=()=>{this.encode(t,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${r} ${a} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{r&&a.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),a.joinedOnce&&a._isJoined()&&a._push(Ke.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(yy,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:a,event:n,payload:i,ref:o}=r;a==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${a} ${n} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(a)).forEach(l=>l._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ke.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${t}${a}${n}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([Sy],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}}class Ty{constructor(t,r,a){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ds.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=a.close}}class ui extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function we(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class Ey extends ui{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class yn extends ui{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Py=globalThis&&globalThis.__awaiter||function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(a.next(u))}catch(h){o(h)}}function d(u){try{c(a.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):n(u.value).then(l,d)}c((a=a.apply(s,t||[])).next())})};const Kd=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...r)=>rr(()=>Promise.resolve().then(()=>bs),void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},Ay=()=>Py(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield rr(()=>Promise.resolve().then(()=>bs),void 0)).Response:Response}),bn=s=>{if(Array.isArray(s))return s.map(r=>bn(r));if(typeof s=="function"||s!==Object(s))return s;const t={};return Object.entries(s).forEach(([r,a])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=bn(a)}),t};var Xt=globalThis&&globalThis.__awaiter||function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(a.next(u))}catch(h){o(h)}}function d(u){try{c(a.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):n(u.value).then(l,d)}c((a=a.apply(s,t||[])).next())})};const Ea=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Ly=(s,t,r)=>Xt(void 0,void 0,void 0,function*(){const a=yield Ay();s instanceof a&&!(r!=null&&r.noResolveJson)?s.json().then(n=>{t(new Ey(Ea(n),s.status||500))}).catch(n=>{t(new yn(Ea(n),n))}):t(new yn(Ea(s),s))}),Ry=(s,t,r,a)=>{const n={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a&&(n.body=JSON.stringify(a)),Object.assign(Object.assign({},n),r))};function nr(s,t,r,a,n,i){return Xt(this,void 0,void 0,function*(){return new Promise((o,l)=>{s(r,Ry(t,a,n,i)).then(d=>{if(!d.ok)throw d;return a!=null&&a.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>Ly(d,l,a))})})}function Vr(s,t,r,a){return Xt(this,void 0,void 0,function*(){return nr(s,"GET",t,r,a)})}function vt(s,t,r,a,n){return Xt(this,void 0,void 0,function*(){return nr(s,"POST",t,a,n,r)})}function My(s,t,r,a,n){return Xt(this,void 0,void 0,function*(){return nr(s,"PUT",t,a,n,r)})}function Iy(s,t,r,a){return Xt(this,void 0,void 0,function*(){return nr(s,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function Jd(s,t,r,a,n){return Xt(this,void 0,void 0,function*(){return nr(s,"DELETE",t,a,n,r)})}var Le=globalThis&&globalThis.__awaiter||function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(a.next(u))}catch(h){o(h)}}function d(u){try{c(a.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):n(u.value).then(l,d)}c((a=a.apply(s,t||[])).next())})};const Dy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Go={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Oy{constructor(t,r={},a,n){this.url=t,this.headers=r,this.bucketId=a,this.fetch=Kd(n)}uploadOrUpdate(t,r,a,n){return Le(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Go),n);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=a,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:c,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(we(i))return{data:null,error:i};throw i}})}upload(t,r,a){return Le(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,a)})}uploadToSignedUrl(t,r,a,n){return Le(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let d;const c=Object.assign({upsert:Go.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&a instanceof Blob?(d=new FormData,d.append("cacheControl",c.cacheControl),d.append("",a)):typeof FormData<"u"&&a instanceof FormData?(d=a,d.append("cacheControl",c.cacheControl)):(d=a,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:d,headers:u}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(d){if(we(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Le(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const i=yield vt(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new ui("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(a){if(we(a))return{data:null,error:a};throw a}})}update(t,r,a){return Le(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,a)})}move(t,r,a){return Le(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}})}copy(t,r,a){return Le(this,void 0,void 0,function*(){try{return{data:{path:(yield vt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}})}createSignedUrl(t,r,a){return Le(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield vt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const o=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}})}createSignedUrls(t,r,a){return Le(this,void 0,void 0,function*(){try{const n=yield vt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}})}download(t,r){return Le(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Vr(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(we(l))return{data:null,error:l};throw l}})}info(t){return Le(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const a=yield Vr(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:bn(a),error:null}}catch(a){if(we(a))return{data:null,error:a};throw a}})}exists(t){return Le(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Iy(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(we(a)&&a instanceof yn){const n=a.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,r){const a=this._getFinalPath(t),n=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&n.push(d);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${a}${c}`)}}}remove(t){return Le(this,void 0,void 0,function*(){try{return{data:yield Jd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}list(t,r,a){return Le(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Dy),r),{prefix:t||""});return{data:yield vt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const $y="2.7.1",Fy={"X-Client-Info":`storage-js/${$y}`};var Qt=globalThis&&globalThis.__awaiter||function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(a.next(u))}catch(h){o(h)}}function d(u){try{c(a.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):n(u.value).then(l,d)}c((a=a.apply(s,t||[])).next())})};class Uy{constructor(t,r={},a){this.url=t,this.headers=Object.assign(Object.assign({},Fy),r),this.fetch=Kd(a)}listBuckets(){return Qt(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(we(t))return{data:null,error:t};throw t}})}getBucket(t){return Qt(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Qt(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(we(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return Qt(this,void 0,void 0,function*(){try{return{data:yield My(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(we(a))return{data:null,error:a};throw a}})}emptyBucket(t){return Qt(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Qt(this,void 0,void 0,function*(){try{return{data:yield Jd(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}})}}class Vy extends Uy{constructor(t,r={},a){super(t,r,a)}from(t){return new Oy(this.url,this.headers,t,this.fetch)}}const zy="2.50.0";let As="";typeof Deno<"u"?As="deno":typeof document<"u"?As="web":typeof navigator<"u"&&navigator.product==="ReactNative"?As="react-native":As="node";const By={"X-Client-Info":`supabase-js-${As}/${zy}`},qy={headers:By},Gy={schema:"public"},Hy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wy={};var Ky=globalThis&&globalThis.__awaiter||function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(a.next(u))}catch(h){o(h)}}function d(u){try{c(a.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):n(u.value).then(l,d)}c((a=a.apply(s,t||[])).next())})};const Jy=s=>{let t;return s?t=s:typeof fetch>"u"?t=Rd:t=fetch,(...r)=>t(...r)},Xy=()=>typeof Headers>"u"?Md:Headers,Yy=(s,t,r)=>{const a=Jy(r),n=Xy();return(i,o)=>Ky(void 0,void 0,void 0,function*(){var l;const d=(l=yield t())!==null&&l!==void 0?l:s;let c=new n(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",s),c.has("Authorization")||c.set("Authorization",`Bearer ${d}`),a(i,Object.assign(Object.assign({},o),{headers:c}))})};var Qy=globalThis&&globalThis.__awaiter||function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(a.next(u))}catch(h){o(h)}}function d(u){try{c(a.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):n(u.value).then(l,d)}c((a=a.apply(s,t||[])).next())})};function Zy(s){return s.endsWith("/")?s:s+"/"}function eb(s,t){var r,a;const{db:n,auth:i,realtime:o,global:l}=s,{db:d,auth:c,realtime:u,global:h}=t,m={db:Object.assign(Object.assign({},d),n),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(a=l==null?void 0:l.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>Qy(this,void 0,void 0,function*(){return""})};return s.accessToken?m.accessToken=s.accessToken:delete m.accessToken,m}const Xd="2.70.0",ss=30*1e3,vn=3,Pa=vn*ss,tb="http://localhost:9999",sb="supabase.auth.token",rb={"X-Client-Info":`gotrue-js/${Xd}`},wn="X-Supabase-Api-Version",Yd={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ab=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,nb=6e5;class hi extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function Y(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class ib extends hi{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function ob(s){return Y(s)&&s.name==="AuthApiError"}class Qd extends hi{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class At extends hi{constructor(t,r,a,n){super(t,a,n),this.name=r,this.status=a}}class yt extends At{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function lb(s){return Y(s)&&s.name==="AuthSessionMissingError"}class fr extends At{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xr extends At{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class pr extends At{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function cb(s){return Y(s)&&s.name==="AuthImplicitGrantRedirectError"}class Ho extends At{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jn extends At{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Aa(s){return Y(s)&&s.name==="AuthRetryableFetchError"}class Wo extends At{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class Os extends At{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const zr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ko=` 	
\r=`.split(""),db=(()=>{const s=new Array(128);for(let t=0;t<s.length;t+=1)s[t]=-1;for(let t=0;t<Ko.length;t+=1)s[Ko[t].charCodeAt(0)]=-2;for(let t=0;t<zr.length;t+=1)s[zr[t].charCodeAt(0)]=t;return s})();function Jo(s,t,r){if(s!==null)for(t.queue=t.queue<<8|s,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(zr[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(zr[a]),t.queuedBits-=6}}function Zd(s,t,r){const a=db[s];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Xo(s){const t=[],r=o=>{t.push(String.fromCodePoint(o))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{mb(o,a,r)};for(let o=0;o<s.length;o+=1)Zd(s.charCodeAt(o),n,i);return t.join("")}function ub(s,t){if(s<=127){t(s);return}else if(s<=2047){t(192|s>>6),t(128|s&63);return}else if(s<=65535){t(224|s>>12),t(128|s>>6&63),t(128|s&63);return}else if(s<=1114111){t(240|s>>18),t(128|s>>12&63),t(128|s>>6&63),t(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function hb(s,t){for(let r=0;r<s.length;r+=1){let a=s.charCodeAt(r);if(a>55295&&a<=56319){const n=(a-55296)*1024&65535;a=(s.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}ub(a,t)}}function mb(s,t,r){if(t.utf8seq===0){if(s<=127){r(s);return}for(let a=1;a<6;a+=1)if(!(s>>7-a&1)){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=s&31;else if(t.utf8seq===3)t.codepoint=s&15;else if(t.utf8seq===4)t.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|s&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function fb(s){const t=[],r={queue:0,queuedBits:0},a=n=>{t.push(n)};for(let n=0;n<s.length;n+=1)Zd(s.charCodeAt(n),r,a);return new Uint8Array(t)}function xb(s){const t=[];return hb(s,r=>t.push(r)),new Uint8Array(t)}function pb(s){const t=[],r={queue:0,queuedBits:0},a=n=>{t.push(n)};return s.forEach(n=>Jo(n,r,a)),Jo(null,r,a),t.join("")}function gb(s){return Math.round(Date.now()/1e3)+s}function yb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const t=Math.random()*16|0;return(s=="x"?t:t&3|8).toString(16)})}const We=()=>typeof window<"u"&&typeof document<"u",Rt={tested:!1,writable:!1},$s=()=>{if(!We())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rt.tested)return Rt.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Rt.tested=!0,Rt.writable=!0}catch{Rt.tested=!0,Rt.writable=!1}return Rt.writable};function bb(s){const t={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return r.searchParams.forEach((a,n)=>{t[n]=a}),t}const eu=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...r)=>rr(()=>Promise.resolve().then(()=>bs),void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},vb=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",tu=async(s,t,r)=>{await s.setItem(t,JSON.stringify(r))},gr=async(s,t)=>{const r=await s.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},yr=async(s,t)=>{await s.removeItem(t)};class la{constructor(){this.promise=new la.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}la.promiseConstructor=Promise;function La(s){const t=s.split(".");if(t.length!==3)throw new Os("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!ab.test(t[a]))throw new Os("JWT not in base64url format");return{header:JSON.parse(Xo(t[0])),payload:JSON.parse(Xo(t[1])),signature:fb(t[2]),raw:{header:t[0],payload:t[1]}}}async function wb(s){return await new Promise(t=>{setTimeout(()=>t(null),s)})}function jb(s,t){return new Promise((a,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!t(i,null,o)){a(o);return}}catch(o){if(!t(i,o)){n(o);return}}})()})}function Nb(s){return("0"+s.toString(16)).substr(-2)}function _b(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(t),Array.from(t,Nb).join("")}async function kb(s){const r=new TextEncoder().encode(s),a=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(a);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function Sb(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await kb(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zt(s,t,r=!1){const a=_b();let n=a;r&&(n+="/PASSWORD_RECOVERY"),await tu(s,`${t}-code-verifier`,n);const i=await Sb(a);return[i,a===i?"plain":"s256"]}const Cb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Tb(s){const t=s.headers.get(wn);if(!t||!t.match(Cb))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Eb(s){if(!s)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(s<=t)throw new Error("JWT has expired")}function Pb(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ab=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function es(s){if(!Ab.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Lb=globalThis&&globalThis.__rest||function(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(s);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(s,a[n])&&(r[a[n]]=s[a[n]]);return r};const Ot=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Rb=[502,503,504];async function Yo(s){var t;if(!vb(s))throw new jn(Ot(s),0);if(Rb.includes(s.status))throw new jn(Ot(s),s.status);let r;try{r=await s.json()}catch(i){throw new Qd(Ot(i),i)}let a;const n=Tb(s);if(n&&n.getTime()>=Yd["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new Wo(Ot(r),s.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new yt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Wo(Ot(r),s.status,r.weak_password.reasons);throw new ib(Ot(r),s.status||500,a)}const Mb=(s,t,r,a)=>{const n={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),r))};async function Z(s,t,r,a){var n;const i=Object.assign({},a==null?void 0:a.headers);i[wn]||(i[wn]=Yd["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const o=(n=a==null?void 0:a.query)!==null&&n!==void 0?n:{};a!=null&&a.redirectTo&&(o.redirect_to=a.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await Ib(s,t,r+l,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(d):{data:Object.assign({},d),error:null}}async function Ib(s,t,r,a,n,i){const o=Mb(t,a,n,i);let l;try{l=await s(r,Object.assign({},o))}catch(d){throw console.error(d),new jn(Ot(d),0)}if(l.ok||await Yo(l),a!=null&&a.noResolveJson)return l;try{return await l.json()}catch(d){await Yo(d)}}function ot(s){var t;let r=null;Fb(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=gb(s.expires_in)));const a=(t=s.user)!==null&&t!==void 0?t:s;return{data:{session:r,user:a},error:null}}function Qo(s){const t=ot(s);return!t.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=s.weak_password),t}function wt(s){var t;return{data:{user:(t=s.user)!==null&&t!==void 0?t:s},error:null}}function Db(s){return{data:s,error:null}}function Ob(s){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:n,verification_type:i}=s,o=Lb(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:a,redirect_to:n,verification_type:i},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function $b(s){return s}function Fb(s){return s.access_token&&s.refresh_token&&s.expires_in}const Ra=["global","local","others"];var Ub=globalThis&&globalThis.__rest||function(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(s);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(s,a[n])&&(r[a[n]]=s[a[n]]);return r};class Vb{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=eu(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Ra[0]){if(Ra.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ra.join(", ")}`);try{return await Z(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Y(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await Z(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:wt})}catch(a){if(Y(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=Ub(t,["options"]),n=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(n.new_email=a==null?void 0:a.newEmail,delete n.newEmail),await Z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Ob,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Y(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Z(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:wt})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,n,i,o,l,d;try{const c={nextPage:null,lastPage:0,total:0},u=await Z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:$b});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(d=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return f.length>0&&(f.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(g.split(";")[1].split("=")[1]);c[`${p}Page`]=y}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Y(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){es(t);try{return await Z(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:wt})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){es(t);try{return await Z(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:wt})}catch(a){if(Y(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){es(t);try{return await Z(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:wt})}catch(a){if(Y(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){es(t.userId);try{const{data:r,error:a}=await Z(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:a}}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _deleteFactor(t){es(t.userId),es(t.id);try{return{data:await Z(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}}}const zb={getItem:s=>$s()?globalThis.localStorage.getItem(s):null,setItem:(s,t)=>{$s()&&globalThis.localStorage.setItem(s,t)},removeItem:s=>{$s()&&globalThis.localStorage.removeItem(s)}};function Zo(s={}){return{getItem:t=>s[t]||null,setItem:(t,r)=>{s[t]=r},removeItem:t=>{delete s[t]}}}function Bb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ts={debug:!!(globalThis&&$s()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class su extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class qb extends su{}async function Gb(s,t,r){ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),ts.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,n.name);try{return await r()}finally{ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,n.name)}}else{if(t===0)throw ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new qb(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(ts.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Bb();const Hb={url:tb,storageKey:sb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function el(s,t,r){return await r()}class Ks{constructor(t){var r,a;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ks.nextInstanceID,Ks.nextInstanceID+=1,this.instanceID>0&&We()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Hb),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Vb({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=eu(n.fetch),this.lock=n.lock||el,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:We()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Gb:this.lock=el,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:$s()?this.storage=zb:(this.memoryStorage={},this.storage=Zo(this.memoryStorage)):(this.memoryStorage={},this.storage=Zo(this.memoryStorage)),We()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Xd}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=bb(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),We()&&this.detectSessionInUrl&&a!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),cb(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Y(r)?{error:r}:{error:new Qd("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,n;try{const i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:ot}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(Y(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,a,n;try{let i;if("email"in t){const{email:u,password:h,options:m}=t;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Zt(this.storage,this.storageKey)),i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:g},xform:ot})}else if("phone"in t){const{phone:u,password:h,options:m}=t;i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(a=m==null?void 0:m.data)!==null&&a!==void 0?a:{},channel:(n=m==null?void 0:m.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ot})}else throw new xr("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(Y(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qo})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qo})}else throw new xr("You must provide either an email or phone number and a password");const{data:a,error:n}=r;return n?{data:{user:null,session:null},error:n}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new fr}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:n})}catch(r){if(Y(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,a,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,a,n,i,o,l,d,c,u,h,m,f;let g,y;if("message"in t)g=t.message,y=t.signature;else{const{chain:p,wallet:v,statement:w,options:b}=t;let _;if(We())if(typeof v=="object")_=v;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))_=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const N=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const P=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),w?{statement:w}:null));let j;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")j=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)j=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)g=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),y=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${N.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(n=(a=b==null?void 0:b.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const P=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=P}}try{const{data:p,error:v}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:pb(y)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ot});if(v)throw v;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new fr}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:v})}catch(p){if(Y(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(t){const r=await gr(this.storage,`${this.storageKey}-code-verifier`),[a,n]=(r??"").split("/");try{const{data:i,error:o}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:ot});if(await yr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(Y(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:a,token:n,access_token:i,nonce:o}=t,l=await Z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ot}),{data:d,error:c}=l;return c?{data:{user:null,session:null},error:c}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new fr}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:c})}catch(r){if(Y(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,a,n,i,o;try{if("email"in t){const{email:l,options:d}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Zt(this.storage,this.storageKey));const{error:h}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:d}=t,{data:c,error:u}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new xr("You must provide either an email or phone number.")}catch(l){if(Y(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,a;try{let n,i;"options"in t&&(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:o,error:l}=await Z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:ot});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,c=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(n){if(Y(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var r,a,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Zt(this.storage,this.storageKey)),await Z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Db})}catch(i){if(Y(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new yt;const{error:n}=await Z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(Y(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:n,options:i}=t,{error:o}=await Z(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:a,type:n,options:i}=t,{data:o,error:l}=await Z(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new xr("You must provide either an email or phone number and a type")}catch(r){if(Y(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await gr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Pa:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,c,u))})}return{data:{session:t},error:null}}const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:wt}):await this._useSession(async r=>{var a,n,i;const{data:o,error:l}=r;if(l)throw l;return!(!((a=o.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yt}:await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:wt})})}catch(r){if(Y(r))return lb(r)&&(await this._removeSession(),await yr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:n,error:i}=a;if(i)throw i;if(!n.session)throw new yt;const o=n.session;let l=null,d=null;this.flowType==="pkce"&&t.email!=null&&([l,d]=await Zt(this.storage,this.storageKey));const{data:c,error:u}=await Z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:wt});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(a){if(Y(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new yt;const r=Date.now()/1e3;let a=r,n=!0,i=null;const{payload:o}=La(t.access_token);if(o.exp&&(a=o.exp,n=a<=r),n){const{session:l,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Y(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(a=o.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new yt;const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Y(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!We())throw new pr("No browser detected.");if(t.error||t.error_description||t.error_code)throw new pr(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ho("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ho("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:d,token_type:c}=t;if(!i||!l||!o||!c)throw new pr("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;d&&(m=parseInt(d));const f=m-u;f*1e3<=ss&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const g=m-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,m,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,m,u);const{data:y,error:p}=await this._getUser(i);if(p)throw p;const v={provider_token:a,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(a){if(Y(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await gr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return{error:i};const o=(a=n.session)===null||a===void 0?void 0:a.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(ob(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await yr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=yb(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,n;try{const{data:{session:i},error:o}=r;if(o)throw o;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let a=null,n=null;this.flowType==="pkce"&&([a,n]=await Zt(this.storage,this.storageKey,!0));try{return await Z(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Y(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:a,error:n}=await this._useSession(async i=>{var o,l,d,c,u;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Z(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return We()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(Y(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,n;const{data:i,error:o}=r;if(o)throw o;return await Z(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await jb(async n=>(n>0&&await wb(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await Z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ot})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Aa(i)&&Date.now()+o-a<ss})}catch(a){if(this._debug(r,"error",a),Y(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),We()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await gr(this.storage,this.storageKey);if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const n=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Pa;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${Pa}s`),n){if(this.autoRefreshToken&&a.refresh_token){const{error:i}=await this._callRefreshToken(a.refresh_token);i&&(console.error(i),Aa(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new yt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new la;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new yt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),Y(i)){const o={session:null,error:i};return Aa(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,r,a=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await tu(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await yr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&We()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ss);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((a.expires_at*1e3-t)/ss);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ss}ms, refresh threshold is ${vn} ticks`),n<=vn&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof su)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!We()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const n=[`provider=${encodeURIComponent(r)}`];if(a!=null&&a.redirectTo&&n.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&n.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,o]=await Zt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);n.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&n.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;return i?{data:null,error:i}:await Z(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,n;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:c}=await Z(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((n=d==null?void 0:d.totp)===null||n===void 0)&&n.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await Z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(Y(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;return i?{data:null,error:i}:await Z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(Y(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=(t==null?void 0:t.factors)||[],n=a.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=a.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:a,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,a;const{data:{session:n},error:i}=t;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=La(n.access_token);let l=null;o.aal&&(l=o.aal);let d=l;((a=(r=n.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(d="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(o=>o.kid===t);if(a||(a=this.jwks.keys.find(o=>o.kid===t),a&&this.jwks_cached_at+nb>Date.now()))return a;const{data:n,error:i}=await Z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new Os("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),a=n.keys.find(o=>o.kid===t),!a)throw new Os("No matching signing key found in JWKS");return a}async getClaims(t,r={keys:[]}){try{let a=t;if(!a){const{data:f,error:g}=await this.getSession();if(g||!f.session)return{data:null,error:g};a=f.session.access_token}const{header:n,payload:i,signature:o,raw:{header:l,payload:d}}=La(a);if(Eb(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(a);if(f)throw f;return{data:{claims:i,header:n,signature:o},error:null}}const c=Pb(n.alg),u=await this.fetchJwk(n.kid,r),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,xb(`${l}.${d}`)))throw new Os("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(a){if(Y(a))return{data:null,error:a};throw a}}}Ks.nextInstanceID=0;const Wb=Ks;class Kb extends Wb{constructor(t){super(t)}}var Jb=globalThis&&globalThis.__awaiter||function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(a.next(u))}catch(h){o(h)}}function d(u){try{c(a.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):n(u.value).then(l,d)}c((a=a.apply(s,t||[])).next())})};class Xb{constructor(t,r,a){var n,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=Zy(t),d=new URL(l);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const c=`sb-${d.hostname.split(".")[0]}-auth-token`,u={db:Gy,realtime:Wy,auth:Object.assign(Object.assign({},Hy),{storageKey:c}),global:qy},h=eb(a??{},u);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Yy(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new my(new URL("rest/v1",d).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new B0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Vy(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},a={}){return this.rest.rpc(t,r,a)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Jb(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:n,storageKey:i,flowType:o,lock:l,debug:d},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Kb({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:n,flowType:o,lock:l,debug:d,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Cy(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,r,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Yb=(s,t,r)=>new Xb(s,t,r),Qb="https://vuitwzisazvikrhtfthh.supabase.co",Zb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ1aXR3emlzYXp2aWtyaHRmdGhoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzOTU4ODIsImV4cCI6MjA2Njk3MTg4Mn0.VXCqythCUualJ7S9jVvnQUYe9BKnfMvbihtZT5c3qyE";console.log("Supabase URL:","Set");console.log("Supabase Key:","Set");const E=Yb(Qb,Zb);E||console.error("Supabase client not initialized. Check environment variables.");const ev="login-learning.com",ru=x.createContext(),je={SUPER_ADMIN:"super_admin",BRANCH_MANAGER:"branch_manager",INSTRUCTOR:"instructor",STUDENT:"student",PARENT:"parent",GUEST:"guest"},tl=s=>s?s.toLowerCase().endsWith(`@${ev}`):!1,tv=({children:s})=>{const[t,r]=x.useState(null),[a,n]=x.useState(!0),[i,o]=x.useState(!1),[l,d]=x.useState(je.GUEST),{toast:c}=Et();x.useEffect(()=>{(async()=>{try{if(!E){console.warn("Supabase client is not initialized. This might be because Supabase URL or Anon Key are missing or incorrect."),c&&c({title:" Supabase ",description:" Supabase URL  Anon Key",variant:"destructive",duration:1e4}),n(!1);return}(()=>{try{const _=localStorage.getItem("sb-vuitwzisazvikrhtfthh-auth-token");if(_){const N=JSON.parse(_);(!N.refresh_token||!N.access_token)&&(localStorage.removeItem("sb-vuitwzisazvikrhtfthh-auth-token"),console.log("Cleared invalid stored auth data"))}}catch{localStorage.removeItem("sb-vuitwzisazvikrhtfthh-auth-token"),console.log("Cleared corrupted stored auth data")}})(),(async()=>{try{const{data:{session:_},error:N}=await E.auth.getSession();if(N){if(console.error("Error getting session:",N),N.message.includes("Invalid Refresh Token")||N.message.includes("Refresh Token Not Found")){await E.auth.signOut(),localStorage.removeItem("sb-vuitwzisazvikrhtfthh-auth-token"),console.log("Cleared invalid session");return}c&&c({title:"",description:N.message,variant:"destructive"})}const P=(_==null?void 0:_.user)??null;if(r(P),P)if(tl(P.email))o(!0),d(je.SUPER_ADMIN);else try{const{data:j}=await E.from("user_profiles").select("role").eq("user_id",P.id).single(),k=(j==null?void 0:j.role)||"student",O=k==="admin"?je.SUPER_ADMIN:k==="instructor"?je.INSTRUCTOR:je.STUDENT;o(k==="admin"||k==="instructor"),d(O)}catch{console.log("Could not fetch user role from database, using default"),o(!1),d(je.STUDENT)}else o(!1),d(je.GUEST)}catch(_){console.error("Exception in getSession:",_),c({title:"",description:_.message,variant:"destructive"})}finally{n(!1)}})();const{data:b}=E.auth.onAuthStateChange(async(_,N)=>{console.log("Auth state change:",_,N);const P=(N==null?void 0:N.user)??null;if(r(P),P)if(tl(P.email))o(!0),d(je.SUPER_ADMIN);else try{const{data:j}=await E.from("user_profiles").select("role").eq("user_id",P.id).single(),k=(j==null?void 0:j.role)||"student",O=k==="admin"?je.SUPER_ADMIN:k==="instructor"?je.INSTRUCTOR:je.STUDENT;o(k==="admin"||k==="instructor"),d(O)}catch{console.log("Could not fetch user role from database, using default"),o(!1),d(je.STUDENT)}else o(!1),d(je.GUEST);_==="SIGNED_IN"&&P?c({title:` ${l}!`}):_==="PASSWORD_RECOVERY"?c({title:"",description:""}):_==="USER_UPDATED"&&c({title:""}),n(!1)});return()=>{b==null||b.subscription.unsubscribe()}}catch(v){console.error("Error initializing auth:",v),n(!1)}})()},[c]);const y={user:t,isAdmin:i,userRole:l,ROLES:je,hasRole:p=>t?l===je.SUPER_ADMIN?!0:l===p:!1,signInWithPassword:async(p,v)=>{if(!E)return c({title:"Supabase ",description:" Supabase ",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};n(!0);const{data:w,error:b}=await E.auth.signInWithPassword({email:p,password:v});return n(!1),{data:w,error:b}},signUpWithPassword:async(p,v,w)=>{if(!E)return c({title:"Supabase ",description:" Supabase ",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};n(!0);const{data:b,error:_}=await E.auth.signUp({email:p,password:v,options:{data:{full_name:w,role:je.STUDENT}}});return n(!1),{data:b,error:_}},signInWithGoogle:async()=>{if(!E)return c({title:"Supabase ",description:" Supabase ",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};n(!0);const{data:p,error:v}=await E.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});return n(!1),{data:p,error:v}},signOut:async()=>{if(!E)return c({title:"Supabase ",description:" Supabase ",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};n(!0);const{error:p}=await E.auth.signOut();return n(!1),p||(r(null),o(!1),d(je.GUEST)),{error:p}},loading:a,isSupabaseConnected:!!E};return e.jsx(ru.Provider,{value:y,children:s})},Ae=()=>{const s=x.useContext(ru);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},sv=Yl("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),T=te.forwardRef(({className:s,variant:t,size:r,asChild:a=!1,...n},i)=>{const o=a?Ah:"button";return e.jsx(o,{className:xt(sv({variant:t,size:r,className:s})),ref:i,...n})});T.displayName="Button";const rv=async()=>{try{const{data:s,error:t}=await E.from("courses").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(t)throw t;return{data:s.map(a=>({...a,enrollment_count:0})),error:null}}catch(s){return console.error("Error fetching courses:",s),{data:null,error:s}}},mi=async s=>{try{console.log("getCourseById: Fetching course with ID:",s);const{data:t,error:r}=await E.from("courses").select(`
        *,
        course_content(*)
      `).eq("id",s).eq("is_active",!0).maybeSingle();if(console.log("getCourseById: Database result:",{data:t,error:r}),r)throw console.error("getCourseById: Database error:",r),r;if(!t)return console.log("getCourseById: Course not found or inactive"),{data:null,error:{message:"",code:"COURSE_NOT_FOUND"}};let a=0;try{const{count:i}=await E.from("enrollments").select("*",{count:"exact",head:!0}).eq("course_id",s);a=i||0,console.log("getCourseById: Enrollment count:",a)}catch(i){console.warn("Could not fetch enrollment count:",i)}const n={data:{...t,enrollment_count:a,content:t.course_content||[]},error:null};return console.log("getCourseById: Final result:",n),n}catch(t){return console.error("getCourseById: Error fetching course:",t),{data:null,error:t}}},av=async s=>{try{const{data:t,error:r}=await E.from("courses").select(`
        *,
        course_content(*)
      `).eq("id",s).maybeSingle();if(r)throw r;if(!t)return{data:null,error:{message:"",code:"COURSE_NOT_FOUND"}};let a=0;try{const{count:n}=await E.from("enrollments").select("*",{count:"exact",head:!0}).eq("course_id",s);a=n||0}catch(n){console.warn("Could not fetch enrollment count:",n)}return{data:{...t,enrollment_count:a,content:t.course_content||[]},error:null}}catch(t){return console.error("Error fetching course for admin:",t),{data:null,error:t}}},nv=async s=>{try{const{data:{user:t},error:r}=await E.auth.getUser();if(r||!t)throw new Error("User not authenticated");const{data:a,error:n}=await E.from("user_profiles").select("user_id").eq("user_id",t.id).maybeSingle();if(n)throw console.error("Error checking user profile:",n),new Error("");if(!a)throw new Error(" ");const{data:i,error:o}=await E.from("courses").insert([{...s,instructor_id:t.id}]).select().single();if(o)throw o;return{data:i,error:null}}catch(t){return console.error("Error creating course:",t),{data:null,error:t}}},iv=async(s,t)=>{try{const{data:r,error:a}=await E.from("courses").update(t).eq("id",s).select().single();if(a)throw a;return{data:r,error:null}}catch(r){return console.error("Error updating course:",r),{data:null,error:r}}},ov=async(s,t)=>{try{const{error:r}=await E.from("courses").update({is_active:t}).eq("id",s);if(r)throw r;return{error:null}}catch(r){return console.error("Error toggling course status:",r),{error:r}}},lv=async()=>{try{if(console.log("Fetching admin courses..."),!E)throw new Error("Supabase client not initialized");const{data:s,error:t}=await E.from("courses").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Supabase error:",t),new Error(`Database error: ${t.message}`);return console.log("Admin courses fetched successfully:",(s==null?void 0:s.length)||0,"courses"),{data:s||[],error:null}}catch(s){return console.error("Error fetching admin courses:",s),{data:null,error:{message:s.message||"Unknown error occurred",details:s}}}},cv=async()=>{try{const{data:s,error:t}=await E.from("courses").select("*").eq("is_active",!0).eq("is_featured",!0).order("created_at",{ascending:!1}).limit(4);if(t)throw t;return{data:s.map(a=>({...a,enrollment_count:0})),error:null}}catch(s){return console.error("Error fetching featured courses:",s),{data:null,error:s}}},dv=async(s,t)=>{try{const{error:r}=await E.from("courses").update({is_featured:t}).eq("id",s);if(r)throw r;return{error:null}}catch(r){return console.error("Error toggling course featured status:",r),{error:r}}},uv=async()=>{try{const{count:s,error:t}=await E.from("courses").select("*",{count:"exact",head:!0}).eq("is_active",!0);if(t)throw t;const{count:r,error:a}=await E.from("enrollments").select("*",{count:"exact",head:!0});if(a)throw a;const{count:n,error:i}=await E.from("enrollments").select("*",{count:"exact",head:!0}).eq("is_active",!0);if(i)throw i;const{count:o,error:l}=await E.from("enrollments").select("*",{count:"exact",head:!0}).not("completed_at","is",null);if(l)throw l;return{data:{totalCourses:s||0,totalEnrollments:r||0,activeEnrollments:n||0,completedEnrollments:o||0,completionRate:r>0?(o/r*100).toFixed(1):0},error:null}}catch(s){return console.error("Error fetching course stats:",s),{data:null,error:s}}},hv=()=>{const{toast:s}=Et(),{user:t}=Ae(),[r,a]=x.useState([]),[n,i]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const{data:h,error:m}=await cv();m?(console.error("Error loading featured courses:",m),s({title:"",description:m.message,variant:"destructive"})):a(h||[])}catch(h){console.error("Error:",h)}finally{i(!1)}})()},[s]);const o=()=>{s({title:" ",description:"! ! "})},l=[{icon:ae,value:"100+",label:""},{icon:fe,value:"10+",label:""},{icon:Me,value:"90%",label:""},{icon:_e,value:"4.8",label:""}],d={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},c={type:"tween",ease:"anticipate",duration:.5};return e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:d,transition:c,children:[e.jsxs(ge,{children:[e.jsx("title",{children:" - Login Learning"}),e.jsx("meta",{name:"description",content:" Login Learning "})]}),e.jsxs("div",{className:"pt-24",children:[" ",e.jsx("section",{className:"pt-16 pb-20 px-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[e.jsxs(R.div,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,delay:.2},children:[e.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold mb-6 leading-tight text-black",children:["",e.jsx("span",{className:"block gradient-text",children:""}),""]}),e.jsx("p",{className:"text-xl text-black mb-8 leading-relaxed",children:"Login Learning  "}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(T,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 text-lg px-8 py-6 pulse-glow",children:e.jsxs(J,{to:t?"/dashboard":"/signup",children:[e.jsx(Ya,{className:"w-5 h-5 mr-2"}),t?"":""]})}),e.jsx(T,{asChild:!0,size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50 text-lg px-8 py-6",children:e.jsxs(J,{to:"/courses",children:["",e.jsx(Wa,{className:"w-5 h-5 ml-2"})]})})]})]}),e.jsxs(R.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,delay:.4},className:"relative",children:[e.jsx("div",{className:"floating-animation",children:e.jsx("img",{className:"rounded-2xl shadow-2xl w-full",alt:"",src:"https://images.unsplash.com/photo-1596496181861-5fc5346995ba"})}),e.jsx("div",{className:"absolute -bottom-6 -left-6 glass-effect rounded-xl p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(Fn,{className:"w-6 h-6 text-blue-800"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-black font-semibold",children:""}),e.jsx("p",{className:"text-black opacity-70",children:""})]})]})})]})]})})}),e.jsx("section",{className:"py-16 px-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(R.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:l.map((u,h)=>e.jsxs(R.div,{initial:{scale:.8,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.5,delay:h*.1},viewport:{once:!0},className:"glass-effect rounded-xl p-6 text-center hover:scale-105 transition-transform",children:[e.jsx(u.icon,{className:"w-8 h-8 text-blue-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-3xl font-bold text-black mb-2",children:u.value}),e.jsx("p",{className:"text-black",children:u.label})]},h))})})}),e.jsx("section",{className:"py-20 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(R.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-black mb-6",children:""}),e.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:""})]}),n?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"..."})]}):r.length>0?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:r.slice(0,4).map((u,h)=>{var m;return e.jsx(R.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:h*.1},viewport:{once:!0},className:"course-card rounded-xl overflow-hidden",children:e.jsxs(J,{to:`/courses/${u.id}`,className:"block",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{className:"w-full h-48 object-cover",alt:` ${u.title}`,src:u.image_url||u.thumbnail_url||"https://images.unsplash.com/photo-1635251595512-dc52146d5ae8",onError:f=>{f.target.src="https://images.unsplash.com/photo-1635251595512-dc52146d5ae8"}}),e.jsx("div",{className:"absolute top-4 right-4 bg-black/50 backdrop-blur-sm rounded-full px-3 py-1",children:e.jsx("span",{className:"text-white text-sm font-medium",children:u.level||u.difficulty_level||""})}),u.is_featured&&e.jsx("div",{className:"absolute top-4 left-4 bg-yellow-500 rounded-full px-3 py-1",children:e.jsx(_e,{className:"w-4 h-4 text-white fill-current"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-black mb-3 line-clamp-2",children:u.title}),e.jsx("p",{className:"text-black mb-4 line-clamp-2",children:u.description}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(_e,{className:"w-4 h-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-black font-medium",children:u.rating||"4.5"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-black",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:((m=u.students)==null?void 0:m.toLocaleString())||u.enrolled_count||"0"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-black",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:u.duration||`${u.duration_weeks||8} `})]}),e.jsx(T,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:""})]})]})]})},u.id)})}):e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-12 max-w-md mx-auto border border-blue-200",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(_e,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:""}),e.jsx("p",{className:"text-gray-600 mb-6",children:""}),e.jsx(T,{asChild:!0,variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:e.jsx(J,{to:"/courses",children:""})})]})}),e.jsx("div",{className:"text-center mt-12",children:e.jsx(T,{asChild:!0,size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50 text-lg px-8 py-4",children:e.jsxs(J,{to:"/courses",children:["",e.jsx(Wa,{className:"w-5 h-5 ml-2"})]})})})]})}),e.jsx("section",{className:"py-20 px-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(R.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-black mb-6",children:" Login Learning?"}),e.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:" "})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:Wr,title:"",description:""},{icon:ae,title:"",description:" "},{icon:On,title:"",description:"  "}].map((u,h)=>e.jsxs(R.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:h*.2},viewport:{once:!0},className:"glass-effect rounded-xl p-8 text-center hover:scale-105 transition-transform cursor-pointer",onClick:o,children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-700 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(u.icon,{className:"w-8 h-8 text-blue-800"})}),e.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:u.title}),e.jsx("p",{className:"text-black leading-relaxed",children:u.description})]},h))})]})}),e.jsx("section",{className:"py-20 px-6",children:e.jsx("div",{className:"max-w-4xl mx-auto text-center",children:e.jsxs(R.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"glass-effect rounded-2xl p-12 shadow-xl",children:[e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-black mb-6",children:" ?"}),e.jsx("p",{className:"text-xl text-black mb-8",children:"  15,000   Login Learning"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(T,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 text-lg px-8 py-6",children:e.jsx(J,{to:t?"/dashboard":"/signup",children:t?"":""})}),e.jsx(T,{asChild:!0,size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50 text-lg px-8 py-6",children:e.jsx(J,{to:"/contact",children:" "})})]})]})})})]})]})},mv=()=>{const s={name:"LOGIN LEARNING Co.",mission:" - /",address:"917  75  ",contacts:[{name:"",phone:"090-969-9578"},{name:"",phone:"083-436-0294"}],lineGroup:"https://line.me/ti/g/TbTTLXEkRS",email:"info@loginlearning.com"},t=[{name:"",address:" ,  10520",image:"Ladkrabang branch of Login Learning with students"},{name:"",address:"400 . 75 ,  10700",image:"Bang Phlat branch of Login Learning with modern classroom"},{name:"",address:"165/31   20110",image:"Sriracha branch of Login Learning, coastal city view"},{name:"",address:"84/48   21000",image:"Rayong branch of Login Learning, industrial area context"}],r=[{icon:Fn,title:"",description:" "},{icon:Wr,title:"",description:"  , TESA Top Gun Rally"},{icon:Zl,title:" Professional Skills",description:"   (Python, C++), Arduino, IoT,  DOBOT, PLC"},{icon:Vm,title:"Engineering Services",description:"  , , "},{icon:ae,title:"",description:" "}],a=[" IOT"," IOT  AI"," AI  PID Control","","","",""],n={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},i={type:"tween",ease:"anticipate",duration:.5};return e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:n,transition:i,className:"pt-24 pb-16 px-6",children:[e.jsxs(ge,{children:[e.jsx("title",{children:" - Login Learning"}),e.jsx("meta",{name:"description",content:` ${s.name}   `})]}),e.jsxs("section",{className:"text-center mb-16 pt-8",children:[e.jsxs(R.h1,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-4",children:[" ",e.jsx("span",{className:"gradient-text",children:"Login Learning"})]}),e.jsx(R.p,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.4},className:"text-xl text-gray-700 max-w-3xl mx-auto",children:s.mission})]}),e.jsx("section",{className:"mb-16",children:e.jsxs("div",{className:"max-w-4xl mx-auto glass-effect p-8 rounded-xl shadow-lg",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 text-center",children:""}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("img",{className:"rounded-lg shadow-md w-full h-64 object-cover mb-4",alt:" Login Learning ",src:"https://images.unsplash.com/photo-1701229404076-5629809b331d"}),e.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[e.jsx(fs,{className:"w-6 h-6 text-blue-400 mt-1 shrink-0"}),e.jsx("p",{className:"text-gray-800",children:s.address})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(ht,{className:"w-6 h-6 text-blue-400 shrink-0"}),e.jsx("a",{href:`mailto:${s.email}`,className:"text-gray-800 hover:text-blue-600 transition-colors",children:s.email})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:":"}),s.contacts.map((o,l)=>e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(zt,{className:"w-6 h-6 text-blue-400 shrink-0"}),e.jsxs("p",{className:"text-gray-800",children:[o.name,": ",o.phone]})]},l)),e.jsxs("div",{className:"flex items-center space-x-3 mt-4",children:[e.jsx(ae,{className:"w-6 h-6 text-green-400 shrink-0"}),e.jsx("a",{href:s.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"text-gray-800 hover:text-green-600 transition-colors underline",children:" Line Group "})]}),e.jsx("img",{className:"rounded-lg shadow-md w-full h-40 object-cover mt-4",alt:" Login Learning",src:"https://images.unsplash.com/photo-1645001399108-e5c236218018"})]})]})]})}),e.jsxs("section",{className:"mb-16",id:"branches",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-10 text-center",children:""}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((o,l)=>e.jsxs(R.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.5,delay:l*.1},viewport:{once:!0},className:"course-card rounded-xl overflow-hidden p-6 text-center",children:[e.jsx("img",{className:"w-full h-40 object-cover rounded-md mb-4",alt:` ${o.name}  Login Learning`,src:"https://images.unsplash.com/photo-1683419405479-e79a7a6a1d53"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:o.name}),e.jsx("p",{className:"text-gray-600 text-sm",children:o.address})]},l))})]}),e.jsxs("section",{className:"mb-16",id:"services",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-10 text-center",children:""}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map((o,l)=>e.jsxs(R.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:l*.1},viewport:{once:!0},className:"glass-effect rounded-xl p-6 hover:shadow-xl transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mb-6 mx-auto",children:e.jsx(o.icon,{className:"w-8 h-8 text-blue-800"})}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-3 text-center",children:o.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed text-center",children:o.description})]},l))})]}),e.jsxs("section",{id:"projects",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-10 text-center",children:"  2568"}),e.jsxs("div",{className:"max-w-3xl mx-auto glass-effect p-8 rounded-xl shadow-lg",children:[e.jsx("ul",{className:"list-disc list-inside space-y-3 text-gray-800",children:a.map((o,l)=>e.jsx(R.li,{initial:{x:-20,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.3,delay:l*.05},viewport:{once:!0},className:"text-lg",children:o},l))}),e.jsx("p",{className:"text-gray-600 mt-6 text-sm italic",children:" "})]})]})]})},Q=te.forwardRef(({className:s,type:t,...r},a)=>e.jsx("input",{type:t,className:xt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...r}));Q.displayName="Input";const fv=()=>{const{toast:s}=ne(),[t,r]=x.useState([]),[a,n]=x.useState(!0),[i,o]=x.useState(""),[l,d]=x.useState(""),c=x.useCallback(async()=>{n(!0);const{data:g,error:y}=await rv();y?s({title:"",description:y.message,variant:"destructive"}):r(g||[]),n(!1)},[s]);x.useEffect(()=>{c()},[c]);const u=["",...new Set(t.map(g=>g.category).filter(Boolean))],h=t.filter(g=>{var v;const y=g.title.toLowerCase().includes(i.toLowerCase())||((v=g.description)==null?void 0:v.toLowerCase().includes(i.toLowerCase())),p=l===""||g.category===l;return y&&p}),m={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},f={type:"tween",ease:"anticipate",duration:.5};return e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:m,transition:f,className:"pt-24 pb-16 px-6",children:[e.jsxs(ge,{children:[e.jsx("title",{children:" - Login Learning"}),e.jsx("meta",{name:"description",content:"  "})]}),e.jsx("section",{className:"pt-8 mb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(R.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-center mb-10",children:[e.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-blue-900 mb-4",children:[" ",e.jsx("span",{className:"gradient-text",children:""})]}),e.jsx("p",{className:"text-xl text-blue-800 max-w-2xl mx-auto",children:"   Login Learning"})]}),e.jsxs(R.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.4},className:"flex flex-col md:flex-row gap-4 mb-8 p-4 glass-effect rounded-lg",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(Q,{type:"text",placeholder:"...",className:"pl-10 text-black bg-white/90 focus:bg-white",value:i,onChange:g=>o(g.target.value)}),e.jsx(Wt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})]}),e.jsx("select",{className:"px-4 py-2 rounded-lg bg-white/90 text-black border border-white/30 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",value:l,onChange:g=>d(g.target.value),children:u.map(g=>e.jsx("option",{value:g,children:g},g))})]}),a?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#667eea] mx-auto mb-4"}),e.jsx("p",{className:"text-blue-700",children:"..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 text-blue-700",children:[" ",h.length," ",i&&`  "${i}"`,l!==""&&`  "${l}"`]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:h.map((g,y)=>e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:y*.05+.5},className:"course-card rounded-xl overflow-hidden hover:scale-105 transition-transform duration-300",children:e.jsxs(J,{to:`/courses/${g.id}`,className:"block",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{className:"w-full h-48 object-cover",alt:` ${g.title}`,src:g.image_url||"https://images.unsplash.com/photo-1635251595512-dc52146d5ae8"}),e.jsx("div",{className:"absolute top-3 right-3 bg-blue-800/80 backdrop-blur-sm rounded-full px-3 py-1 text-xs font-medium text-white-800",children:g.level==="beginner"?"":g.level==="intermediate"?"":g.level==="advanced"?"":""}),e.jsx("div",{className:"absolute bottom-3 left-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white-800 px-2 py-1 rounded text-xs font-semibold",children:g.category||""})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-2 line-clamp-2 h-14",children:g.title}),e.jsx("p",{className:"text-sm text-blue-700 mb-3 line-clamp-3 h-[60px]",children:g.description||""}),e.jsxs("div",{className:"flex items-center justify-between mb-3 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ut,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-blue-900 font-medium",children:g.instructor_name||""})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-blue-700",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{children:g.enrollment_count||0})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-blue-700 text-sm",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsxs("span",{children:[g.duration_hours||0," "]})]}),e.jsx("div",{className:"text-blue-900 font-bold",children:g.price>0?`${g.price.toLocaleString()}`:""})]}),e.jsx(T,{className:"w-full mt-4 bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-gray-800",children:""})]})]})},g.id))}),h.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fe,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-blue-900 mb-2",children:""}),e.jsx("p",{className:"text-blue-700 mb-4",children:""}),e.jsx(T,{onClick:()=>{o(""),d("")},variant:"outline",className:"text-blue-900 border-blue-300 hover:bg-blue-100",children:""})]})]})]})})]})},xv=async(s=null)=>{var t,r,a;try{let n=s;if(!n){const{data:{user:u},error:h}=await E.auth.getUser();if(h||!u)throw new Error("User not authenticated");n=u}console.log("ensureUserProfile: Checking profile for user:",n.id);const{data:i,error:o}=await E.from("user_profiles").select("user_id, full_name, email, role").eq("user_id",n.id).maybeSingle();if(o)throw console.error("ensureUserProfile: Error checking profile:",o),o;if(i)return console.log("ensureUserProfile: Profile exists:",i),{data:i,error:null,created:!1};console.log("ensureUserProfile: Creating new profile for user:",n.id);const l={user_id:n.id,full_name:((t=n.user_metadata)==null?void 0:t.full_name)||((r=n.user_metadata)==null?void 0:r.name)||((a=n.email)==null?void 0:a.split("@")[0])||"",email:n.email,role:"student",is_active:!0},{data:d,error:c}=await E.from("user_profiles").insert([l]).select().single();if(c)throw console.error("ensureUserProfile: Error creating profile:",c),c;return console.log("ensureUserProfile: Profile created successfully:",d),{data:d,error:null,created:!0}}catch(n){return console.error("ensureUserProfile: Error:",n),{data:null,error:n,created:!1}}},pv=async s=>{try{console.log("enrollmentService: Starting enrollment for courseId:",s);const{data:{user:t},error:r}=await E.auth.getUser();if(r||!t)throw console.error("enrollmentService: User authentication error:",r),new Error("User not authenticated");console.log("enrollmentService: User authenticated:",t.id),console.log("enrollmentService: Ensuring user profile exists...");const{data:a,error:n,created:i}=await xv(t);if(n)throw console.error("enrollmentService: Error ensuring user profile:",n),new Error(" ");i?console.log("enrollmentService: New user profile created for enrollment"):console.log("enrollmentService: User profile confirmed:",a.user_id),console.log("enrollmentService: Checking for existing enrollment...");const{data:o,error:l}=await E.from("enrollments").select("*").eq("user_id",t.id).eq("course_id",s).maybeSingle();if(console.log("enrollmentService: Existing enrollment check:",{existingEnrollment:o,checkError:l}),l)throw console.error("enrollmentService: Error checking existing enrollment:",l),l;if(o)return console.log("enrollmentService: User already enrolled"),{data:null,error:{message:""}};console.log("enrollmentService: Creating new enrollment...");const d={user_id:t.id,course_id:s,is_active:!0,progress_percentage:0};console.log("enrollmentService: Enrollment data:",d);const{data:c,error:u}=await E.from("enrollments").insert([d]).select(`
        *,
        courses(
          title,
          user_profiles!courses_instructor_id_fkey(full_name)
        )
      `).single();if(console.log("enrollmentService: Enrollment creation result:",{data:c,error:u}),u)throw console.error("enrollmentService: Enrollment creation failed:",u),u;return console.log("enrollmentService: Enrollment created successfully:",c),{data:c,error:null}}catch(t){return console.error("enrollmentService: Error enrolling in course:",t),{data:null,error:t}}},au=async s=>{try{console.log("enrollmentService: Checking enrollment for courseId:",s);const{data:{user:t},error:r}=await E.auth.getUser();if(r||!t)return console.log("enrollmentService: No user found or error:",r),{isEnrolled:!1,error:null};console.log("enrollmentService: Checking for user:",t.id);const{data:a,error:n}=await E.from("enrollments").select("id, is_active, enrolled_at, progress_percentage, completed_at").eq("user_id",t.id).eq("course_id",s).maybeSingle();if(console.log("enrollmentService: Database query result:",{data:a,error:n}),n)throw console.error("enrollmentService: Database error:",n),n;const i={isEnrolled:!!a,status:a?{...a,enrollment_id:a.id}:null,error:null};return console.log("enrollmentService: Final result:",i),i}catch(t){return console.error("enrollmentService: Error checking enrollment:",t),{isEnrolled:!1,error:t}}},nu=async s=>{try{const{data:t,error:r}=await E.from("attachments").select("*").eq("entity_type","course_content").eq("entity_id",s).order("upload_order",{ascending:!0});if(r)throw r;return{data:t||[],error:null}}catch(t){return console.error("Error fetching content attachments:",t),{data:[],error:t}}},gv=async(s,t,r=1)=>{try{console.log("Starting file upload:",{fileName:s.name,contentId:t,fileSize:s.size});const{data:{user:a},error:n}=await E.auth.getUser();if(n)throw console.error("User authentication error:",n),new Error(`Authentication error: ${n.message}`);if(!a)throw new Error("User not authenticated - please login first");if(console.log("User authenticated:",a.id),!s)throw new Error("No file provided");if(!t)throw new Error("Content ID is required");const i=Date.now(),o=s.name.split(".").pop(),l=s.name.replace(/[^a-zA-Z0-9.-]/g,"_"),d=`${i}_${l}`,c=`attachments/${t}/${d}`;console.log("Generated file path:",c),console.log("Checking storage bucket access...");let u=!1;try{const{data:b,error:_}=await E.storage.listBuckets();if(_)console.warn("Cannot list buckets, trying direct access:",_.message);else{const N=b.find(P=>P.name==="course-files");N&&(console.log("Storage bucket found in list:",N.name),u=!0)}if(!u){console.log("Testing direct bucket access...");const{error:N}=await E.storage.from("course-files").list("",{limit:1});if(N)throw console.error("Direct bucket access failed:",N),new Error(`Storage bucket "course-files" is not accessible: ${N.message}. Please check bucket exists and permissions are correct.`);console.log("Direct bucket access successful"),u=!0}}catch(b){throw console.error("Storage bucket check failed:",b),new Error(`Storage setup error: ${b.message}`)}if(!u)throw new Error('Storage bucket "course-files" not found or not accessible. Please setup storage first.');console.log("Uploading file to storage...");const{data:h,error:m}=await E.storage.from("course-files").upload(c,s,{cacheControl:"3600",upsert:!1});if(m)throw console.error("Storage upload error:",m),new Error(`File upload failed: ${m.message}`);console.log("File uploaded successfully:",h);const{data:{publicUrl:f}}=E.storage.from("course-files").getPublicUrl(c);console.log("Generated public URL:",f);const{error:g}=await E.from("attachments").select("count").limit(1);if(g&&g.code==="42P01")throw new Error('Database table "attachments" not found. Please run the database schema setup.');console.log("Saving attachment record to database...");let y=1;if(typeof r=="number"&&r>0&&r<=2147483647)y=Math.floor(r);else if(typeof r=="string"){const b=parseInt(r);!isNaN(b)&&b>0&&b<=2147483647&&(y=b)}console.log("Original uploadOrder:",r,"Valid uploadOrder:",y);const p={entity_type:"course_content",entity_id:t,filename:s.name,original_filename:s.name,file_url:f,file_path:c,file_size:s.size,file_extension:(o==null?void 0:o.toLowerCase())||"unknown",mime_type:s.type||"application/octet-stream",upload_order:y,is_public:!1,uploaded_by:a.id};console.log("Attachment record:",p);const{data:v,error:w}=await E.from("attachments").insert([p]).select().single();if(w){console.error("Database insert error:",w);try{await E.storage.from("course-files").remove([c]),console.log("Cleaned up uploaded file after database error")}catch(b){console.error("Failed to cleanup file:",b)}throw new Error(`Database error: ${w.message}`)}return console.log("Attachment record saved:",v),{data:{...v,url:f,file_path:c},error:null}}catch(a){return console.error("Error uploading attachment:",a),{data:null,error:{message:a.message,details:a}}}},ca=async s=>{var t;try{console.log("Starting course image upload:",{fileName:s.name,fileSize:s.size});const{data:{user:r},error:a}=await E.auth.getUser();if(a||!r)throw new Error("User not authenticated");if(!s)throw new Error("No image file provided");if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(s.type))throw new Error(" (JPG, PNG, WebP )");const i=5*1024*1024;if(s.size>i)throw new Error(" 5MB");const o=(t=s.name.split(".").pop())==null?void 0:t.toLowerCase(),l=`course-cover-${Date.now()}-${Math.random().toString(36).substring(2)}.${o}`,d=`course-covers/${l}`;console.log("Uploading image to path:",d);const{data:c,error:u}=await E.storage.from("course-files").upload(d,s,{cacheControl:"3600",upsert:!1});if(u)throw console.error("Storage upload error:",u),new Error(`: ${u.message}`);console.log("Image upload successful:",c);const{data:h}=E.storage.from("course-files").getPublicUrl(d);if(!(h!=null&&h.publicUrl))throw new Error(" URL ");return console.log("Public URL generated:",h.publicUrl),{data:{filePath:d,publicUrl:h.publicUrl,fileName:l},error:null}}catch(r){return console.error("Error uploading course image:",r),{data:null,error:r}}},yv=async s=>{var t;try{console.log("Starting profile image upload:",{fileName:s.name,fileSize:s.size});const{data:{user:r},error:a}=await E.auth.getUser();if(a||!r)throw new Error("User not authenticated");if(!s)throw new Error("No image file provided");if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(s.type))throw new Error(" (JPG, PNG, WebP )");const i=2*1024*1024;if(s.size>i)throw new Error(" 2MB");const o=(t=s.name.split(".").pop())==null?void 0:t.toLowerCase(),l=`profile-${r.id}-${Date.now()}.${o}`,d=`profile-images/${l}`;console.log("Uploading profile image to path:",d);try{const{data:m}=await E.storage.from("course-files").list("profile-images",{search:`profile-${r.id}-`});if(m&&m.length>0){const f=m.map(g=>`profile-images/${g.name}`);await E.storage.from("course-files").remove(f),console.log("Removed old profile images:",f)}}catch(m){console.warn("Could not cleanup old profile images:",m)}const{data:c,error:u}=await E.storage.from("course-files").upload(d,s,{cacheControl:"3600",upsert:!1});if(u)throw console.error("Storage upload error:",u),new Error(`: ${u.message}`);console.log("Profile image upload successful:",c);const{data:h}=E.storage.from("course-files").getPublicUrl(d);if(!(h!=null&&h.publicUrl))throw new Error(" URL ");return console.log("Profile image URL generated:",h.publicUrl),{data:{filePath:d,publicUrl:h.publicUrl,fileName:l},error:null}}catch(r){return console.error("Error uploading profile image:",r),{data:null,error:r}}},bv=async(s,t={})=>{try{const{categoryId:r=null,topicType:a=null,search:n=null,sortBy:i="last_reply_at",sortOrder:o="desc",page:l=1,limit:d=20}=t;let c=E.from("forum_topics").select("*").eq("course_id",s);n&&(c=c.textSearch("search_vector",n)),c=c.order("is_pinned",{ascending:!1}),c=c.order(i,{ascending:o==="asc"});const u=(l-1)*d,h=u+d-1;c=c.range(u,h);const{data:m,error:f,count:g}=await c;if(f)throw f;if(!m||m.length===0)return{data:[],error:null,pagination:{page:l,limit:d,total:0,hasMore:!1}};const y=[...new Set(m.map(w=>w.author_id).filter(Boolean))];let p={};if(y.length>0){const{data:w}=await E.from("user_profiles").select("user_id, full_name, avatar_url, role").in("user_id",y);w&&w.forEach(b=>{p[b.user_id]=b})}return{data:m.map(w=>({...w,user_profiles:p[w.author_id]||null})),error:null,pagination:{page:l,limit:d,total:g,hasMore:g>h+1}}}catch(r){return console.error("Error fetching course topics:",r),{data:null,error:r,pagination:null}}},vv=async s=>{try{const{data:t,error:r}=await E.from("forum_topics").select("*").eq("id",s).single();if(r)throw r;let a=null;if(t.author_id){const{data:h}=await E.from("user_profiles").select("user_id, full_name, avatar_url, role").eq("user_id",t.author_id).single();a=h}let n=null,i=null;if(t.course_id){const{data:h}=await E.from("courses").select("id, title").eq("id",t.course_id).single();i=h}const{data:o,error:l}=await E.from("forum_replies").select("*").eq("topic_id",s).order("created_at",{ascending:!0});if(l)throw l;let d={};if(o&&o.length>0){const h=[...new Set(o.map(m=>m.author_id).filter(Boolean))];if(h.length>0){const{data:m}=await E.from("user_profiles").select("user_id, full_name, avatar_url, role").in("user_id",h);m&&m.forEach(f=>{d[f.user_id]=f})}}const c=(o||[]).map(h=>({...h,user_profiles:d[h.author_id]||null}));return await Sv(s),{data:{...t,user_profiles:a,forum_categories:n,courses:i,replies:c},error:null}}catch(t){return console.error("Error fetching topic with replies:",t),{data:null,error:t}}},wv=async s=>{var t;try{const a=(t=(await E.auth.getUser()).data.user)==null?void 0:t.id,{data:n,error:i}=await E.from("forum_topics").insert([{...s,author_id:a}]).select("*").single();if(i)throw i;let o=null;if(a){const{data:c}=await E.from("user_profiles").select("user_id, full_name, avatar_url, role").eq("user_id",a).single();o=c}return{data:{...n,user_profiles:o,forum_categories:null},error:null}}catch(r){return console.error("Error creating topic:",r),{data:null,error:r}}},jv=async s=>{try{const{error:t}=await E.from("forum_topics").delete().eq("id",s);if(t)throw t;return{error:null}}catch(t){return console.error("Error deleting topic:",t),{error:t}}},Nv=async(s,t)=>{try{const{data:r,error:a}=await E.from("forum_topics").update({is_pinned:t}).eq("id",s).select().single();if(a)throw a;return{data:r,error:null}}catch(r){return console.error("Error toggling topic pin:",r),{data:null,error:r}}},_v=async(s,t)=>{try{const{data:r,error:a}=await E.from("forum_topics").update({is_locked:t}).eq("id",s).select().single();if(a)throw a;return{data:r,error:null}}catch(r){return console.error("Error toggling topic lock:",r),{data:null,error:r}}},kv=async(s,t=null)=>{try{const{data:r,error:a}=await E.from("forum_topics").update({is_solved:!0,solved_reply_id:t}).eq("id",s).select().single();if(a)throw a;return{data:r,error:null}}catch(r){return console.error("Error marking topic as solved:",r),{data:null,error:r}}},Sv=async s=>{try{const{data:t}=await E.from("forum_topics").select("view_count").eq("id",s).single(),r=(t==null?void 0:t.view_count)||0,{error:a}=await E.from("forum_topics").update({view_count:r+1}).eq("id",s);if(a)throw a;return{error:null}}catch(t){return console.warn("Error incrementing view count:",t),{error:t}}},Cv=async s=>{var t;try{const a=(t=(await E.auth.getUser()).data.user)==null?void 0:t.id,{data:n,error:i}=await E.from("forum_replies").insert([{...s,author_id:a}]).select("*").single();if(i)throw i;let o=null;if(a){const{data:d}=await E.from("user_profiles").select("user_id, full_name, avatar_url, role").eq("user_id",a).single();o=d}return{data:{...n,user_profiles:o},error:null}}catch(r){return console.error("Error creating reply:",r),{data:null,error:r}}},Tv=async(s,t)=>{try{await E.from("forum_replies").update({is_best_answer:!1}).eq("topic_id",t);const{data:r,error:a}=await E.from("forum_replies").update({is_best_answer:!0}).eq("id",s).select().single();if(a)throw a;return await kv(t,s),{data:r,error:null}}catch(r){return console.error("Error marking reply as best answer:",r),{data:null,error:r}}},iu=async(s,t)=>{var r;try{const a=(r=(await E.auth.getUser()).data.user)==null?void 0:r.id;if(!a)throw new Error("User not authenticated");const{data:n,error:i}=await E.from("forum_likes").select("id").eq("user_id",a).eq("target_type",s).eq("target_id",t).maybeSingle();if(i&&i.code!=="PGRST116")throw i;if(n){const{error:o}=await E.from("forum_likes").delete().eq("id",n.id);if(o)throw o;return{data:{liked:!1},error:null}}else{const{data:o,error:l}=await E.from("forum_likes").insert([{user_id:a,target_type:s,target_id:t}]).select().single();if(l)throw l;return{data:{liked:!0},error:null}}}catch(a){return console.error("Error toggling like:",a),{data:null,error:a}}},Ev=async(s,t="all")=>{var r;try{const a=(r=(await E.auth.getUser()).data.user)==null?void 0:r.id;if(!a)throw new Error("User not authenticated");const{data:n,error:i}=await E.from("forum_subscriptions").upsert([{user_id:a,topic_id:s,notification_type:t}]).select().single();if(i)throw i;return{data:n,error:null}}catch(a){return console.error("Error subscribing to topic:",a),{data:null,error:a}}},Pv=async s=>{var t;try{const r=(t=(await E.auth.getUser()).data.user)==null?void 0:t.id;if(!r)throw new Error("User not authenticated");const{error:a}=await E.from("forum_subscriptions").delete().eq("user_id",r).eq("topic_id",s);if(a)throw a;return{error:null}}catch(r){return console.error("Error unsubscribing from topic:",r),{error:r}}},Tr=s=>{const t=new Date(s),a=Math.floor((new Date-t)/1e3);return a<60?"":a<3600?`${Math.floor(a/60)} `:a<86400?`${Math.floor(a/3600)} `:a<604800?`${Math.floor(a/86400)} `:t.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"})},ou=s=>({discussion:"",question:"",announcement:"",assignment_help:""})[s]||s,lu=s=>({discussion:"blue",question:"yellow",announcement:"red",assignment_help:"green"})[s]||"gray",Av=({topic:s,onTopicClick:t,onLike:r,onPin:a,onLock:n,onDelete:i,onEdit:o,userRole:l="student",currentUserId:d})=>{var $,L,G;const[c,u]=x.useState(!1),[h,m]=x.useState(s.user_liked||!1),[f,g]=x.useState(s.like_count||0),y=d===s.author_id,p=l==="instructor"||l==="admin",v=p,w=y||p,b=y||p,_=lu(s.topic_type),N={blue:"bg-blue-100 text-blue-800 border-blue-200",yellow:"bg-yellow-100 text-yellow-800 border-yellow-200",red:"bg-red-100 text-red-800 border-red-200",green:"bg-green-100 text-green-800 border-green-200",gray:"bg-gray-100 text-gray-800 border-gray-200"},P=async M=>{M.stopPropagation();try{await r(s.id),m(!h),g(F=>h?F-1:F+1)}catch(F){console.error("Error liking topic:",F)}},j=async M=>{M.stopPropagation();try{await a(s.id,!s.is_pinned)}catch(F){console.error("Error pinning topic:",F)}},k=async M=>{M.stopPropagation();try{await n(s.id,!s.is_locked)}catch(F){console.error("Error locking topic:",F)}},O=M=>{M.stopPropagation(),o(s)},B=async M=>{if(M.stopPropagation(),window.confirm("?"))try{await i(s.id)}catch(F){console.error("Error deleting topic:",F)}};return e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer relative ${s.is_pinned?"ring-2 ring-yellow-200 bg-yellow-50":""}`,onClick:()=>t(s.id),children:[e.jsx("div",{className:"flex items-start justify-between p-6 pb-3",children:e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:($=s.user_profiles)!=null&&$.avatar_url?e.jsx("img",{src:s.user_profiles.avatar_url,alt:s.user_profiles.full_name,className:"w-full h-full rounded-full object-cover"}):e.jsx(tt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("h3",{className:`text-lg font-semibold text-gray-900 line-clamp-2 ${s.is_locked?"opacity-60":""}`,children:s.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${N[_]}`,children:ou(s.topic_type)}),s.forum_categories&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700 border border-gray-200",children:s.forum_categories.name}),s.is_pinned&&e.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 border border-yellow-200",children:[e.jsx(Xa,{className:"w-3 h-3"}),e.jsx("span",{children:""})]}),s.is_locked&&e.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 border border-red-200",children:[e.jsx(St,{className:"w-3 h-3"}),e.jsx("span",{children:""})]}),s.is_solved&&e.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 border border-green-200",children:[e.jsx(be,{className:"w-3 h-3"}),e.jsx("span",{children:""})]})]})]}),(w||b||v)&&e.jsxs("div",{className:"relative",children:[e.jsx(T,{variant:"ghost",size:"sm",onClick:M=>{M.stopPropagation(),u(!c)},className:"p-1 h-8 w-8",children:e.jsx(Gm,{className:"w-4 h-4"})}),c&&e.jsxs("div",{className:"absolute right-0 top-8 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[150px]",children:[w&&e.jsxs("button",{onClick:O,className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(Qs,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),v&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:j,className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(Xa,{className:"w-4 h-4"}),e.jsx("span",{children:s.is_pinned?"":""})]}),e.jsxs("button",{onClick:k,className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(St,{className:"w-4 h-4"}),e.jsx("span",{children:s.is_locked?"":""})]})]}),b&&e.jsxs("button",{onClick:B,className:"w-full px-3 py-2 text-left text-sm hover:bg-red-50 text-red-600 flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs("button",{onClick:M=>{M.stopPropagation(),u(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 border-t border-gray-100",children:[e.jsx(Dm,{className:"w-4 h-4"}),e.jsx("span",{children:""})]})]})]})]}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3",children:s.content}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-3",children:[e.jsx("span",{className:"font-medium",children:((L=s.user_profiles)==null?void 0:L.full_name)||""}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(me,{className:"w-3 h-3"}),e.jsx("span",{children:Tr(s.created_at)})]}),((G=s.user_profiles)==null?void 0:G.role)==="instructor"&&e.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:""})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-t border-gray-100 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(_r,{className:"w-4 h-4"}),e.jsx("span",{children:s.reply_count||0})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:s.view_count||0})]})]}),e.jsxs("button",{onClick:P,className:`flex items-center space-x-1 px-3 py-1.5 rounded-full transition-all duration-200 ${h?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[e.jsx(Ja,{className:`w-4 h-4 ${h?"fill-current":""}`}),e.jsx("span",{className:"text-sm font-medium",children:f})]})]}),c&&e.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>u(!1)})]})},us={maxFileSize:50*1024*1024,allowedTypes:{"image/jpeg":{icon:"",preview:!0},"image/png":{icon:"",preview:!0},"image/gif":{icon:"",preview:!0},"image/webp":{icon:"",preview:!0},"application/pdf":{icon:"",preview:!1},"text/plain":{icon:"",preview:!1},"application/msword":{icon:"",preview:!1},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{icon:"",preview:!1},"application/vnd.ms-excel":{icon:"",preview:!1},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{icon:"",preview:!1},"application/zip":{icon:"",preview:!1},"application/x-zip-compressed":{icon:"",preview:!1}}},cu=s=>{const t=[];return s.size>us.maxFileSize&&t.push(` ( ${us.maxFileSize/1024/1024}MB)`),us.allowedTypes[s.type]||t.push(`: ${s.type}`),s.name.length>255&&t.push(" ( 255 )"),{isValid:t.length===0,errors:t}},Lv=(s,t,r,a)=>{const n=Date.now(),i=Math.random().toString(36).substring(2);a.split(".").pop();const o=a.replace(/[^a-zA-Z0-9._-]/g,"_");return`${s}/${t}/${r}/${n}_${i}_${o}`},Rv=async(s,t,r)=>{try{const a=cu(s);if(!a.isValid)throw new Error(a.errors.join(", "));const{data:{user:n},error:i}=await E.auth.getUser();if(i||!n)throw new Error("");const o=Lv(n.id,t,r,s.name),{data:l,error:d}=await E.storage.from("content-attachments").upload(o,s,{cacheControl:"3600",upsert:!1});if(d)throw d;const{data:c,error:u}=await E.from("attachments").insert([{entity_type:t,entity_id:r,filename:s.name,file_url:l.path,file_size:s.size,mime_type:s.type,uploaded_by:n.id}]).select("*").single();if(u)throw await E.storage.from("content-attachments").remove([l.path]),u;return{data:c,error:null}}catch(a){return console.error("Error uploading file:",a),{data:null,error:a}}},Mv=async(s,t,r)=>{try{const a=await Promise.allSettled(s.map(o=>Rv(o,t,r))),n=[],i=[];return a.forEach((o,l)=>{var d;o.status==="fulfilled"&&o.value.data?n.push(o.value.data):i.push({file:s[l].name,error:o.reason||((d=o.value)==null?void 0:d.error)})}),{data:{successful:n,failed:i},error:i.length>0?`${i.length} `:null}}catch(a){return console.error("Error uploading multiple files:",a),{data:null,error:a}}},Iv=async(s,t)=>{try{const{data:r,error:a}=await E.from("attachments").select("*").eq("entity_type",s).eq("entity_id",t).order("created_at",{ascending:!0});if(a)throw a;let n={};if(r&&r.length>0){const o=[...new Set(r.map(l=>l.uploaded_by).filter(Boolean))];if(o.length>0){const{data:l}=await E.from("user_profiles").select("user_id, full_name, avatar_url").in("user_id",o);l&&l.forEach(d=>{n[d.user_id]=d})}}return{data:r.map(o=>({...o,config:us.allowedTypes[o.mime_type]||{icon:"",preview:!1},formattedSize:du(o.file_size),uploader:n[o.uploaded_by]||null,publicUrl:null})),error:null}}catch(r){return console.error("Error getting attachments:",r),{data:[],error:r}}},Dv=async s=>{try{const{data:t}=E.storage.from("content-attachments").getPublicUrl(s);return t.publicUrl}catch(t){return console.error("Error getting file URL:",t),null}},Ov=async s=>{try{const{data:t,error:r}=await E.from("attachments").select("*").eq("id",s).single();if(r)throw r;const{data:a,error:n}=await E.storage.from("content-attachments").download(t.file_url);if(n)throw n;const i=URL.createObjectURL(a),o=document.createElement("a");return o.href=i,o.download=t.filename,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),{error:null}}catch(t){return console.error("Error downloading file:",t),{error:t}}},$v=async s=>{try{const{data:t,error:r}=await E.from("attachments").select("*").eq("id",s).single();if(r)throw r;const{data:{user:a}}=await E.auth.getUser();if(!a||a.id!==t.uploaded_by)throw new Error("");const{error:n}=await E.storage.from("content-attachments").remove([t.file_url]);n&&console.warn("Error deleting from storage:",n);const{error:i}=await E.from("attachments").delete().eq("id",s);if(i)throw i;return{error:null}}catch(t){return console.error("Error deleting attachment:",t),{error:t}}},Fv=async s=>new Promise(t=>{if(!s.type.startsWith("image/")){t(null);return}const r=document.createElement("canvas"),a=r.getContext("2d"),n=new Image;n.onload=()=>{const o=Math.min(200/n.width,200/n.height);r.width=n.width*o,r.height=n.height*o,a.drawImage(n,0,0,r.width,r.height),r.toBlob(t,"image/jpeg",.8)},n.onerror=()=>t(null),n.src=URL.createObjectURL(s)}),du=s=>{if(s===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,a)).toFixed(2))+" "+r[a]},Nn=s=>{var t;return((t=us.allowedTypes[s])==null?void 0:t.icon)||""},_n=s=>{var t;return((t=us.allowedTypes[s])==null?void 0:t.preview)||!1},Uv=({targetType:s,targetId:t,currentUserId:r,userRole:a="student",onAttachmentDeleted:n})=>{const[i,o]=x.useState([]),[l,d]=x.useState(!0),[c,u]=x.useState(null),[h,m]=x.useState(null),{toast:f}=ne(),g=a==="instructor"||a==="admin";x.useEffect(()=>{y()},[s,t]);const y=async()=>{d(!0);try{const{data:N,error:P}=await Iv(s,t);if(P)throw P;o(N||[])}catch(N){console.error("Error loading attachments:",N),f({title:"",description:"",variant:"destructive"})}d(!1)},p=async N=>{try{const{error:P}=await Ov(N.id);if(P)throw P;f({title:"",description:` ${N.file_name} `})}catch{f({title:"",description:"",variant:"destructive"})}},v=async N=>{if(!(r===N.uploaded_by||g)){f({title:"",description:"",variant:"destructive"});return}if(confirm(` "${N.file_name}"?`))try{const{error:j}=await $v(N.id);if(j)throw j;o(k=>k.filter(O=>O.id!==N.id)),n==null||n(N),f({title:"",description:` ${N.file_name} `})}catch{f({title:"",description:"",variant:"destructive"})}},w=async N=>{if(!_n(N.file_type)){p(N);return}try{const P=await Dv(N.file_url);u(P),m(N)}catch{f({title:"",description:"",variant:"destructive"})}},b=()=>{u(null),m(null)},_=N=>new Date(N).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return l?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"})}):i.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{children:""})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(xe,{children:i.map(N=>{var j,k;const P=r===N.uploaded_by||g;return N.file_type.startsWith("image/"),e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center text-xl",children:Nn(N.file_type)})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:N.file_name}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs text-gray-500",children:[e.jsx("span",{children:N.formattedSize}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(tt,{className:"w-3 h-3"}),e.jsx("span",{children:((k=(j=N.uploader)==null?void 0:j.user_profiles)==null?void 0:k.full_name)||""})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(De,{className:"w-3 h-3"}),e.jsx("span",{children:_(N.created_at)})]}),N.download_count>0&&e.jsxs("span",{children:[" ",N.download_count," "]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-3",children:[_n(N.file_type)&&e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>w(N),className:"p-2",title:"",children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>p(N),className:"p-2",title:"",children:e.jsx(jt,{className:"w-4 h-4"})}),P&&e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>v(N),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50",title:"",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]})})]})},N.id)})}),e.jsx(xe,{children:c&&h&&e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:b,children:e.jsxs(R.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg max-w-4xl max-h-[90vh] overflow-hidden",onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:h.file_name}),e.jsx("p",{className:"text-sm text-gray-500",children:h.formattedSize})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>p(h),children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),""]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:b,children:""})]})]}),e.jsx("div",{className:"p-4 max-h-[70vh] overflow-auto",children:h.file_type.startsWith("image/")?e.jsx("img",{src:c,alt:h.file_name,className:"max-w-full h-auto rounded"}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:Nn(h.file_type)}),e.jsx("p",{className:"text-gray-600",children:""}),e.jsxs(T,{onClick:()=>p(h),className:"mt-4",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),""]})]})})]})})})]})},Vv=({topicId:s,onBack:t,currentUserId:r,userRole:a="student"})=>{var L,G,M,F;const[n,i]=x.useState(null),[o,l]=x.useState([]),[d,c]=x.useState(!0),[u,h]=x.useState(!1),[m,f]=x.useState(""),[g,y]=x.useState(null),[p,v]=x.useState(!1),{toast:w}=ne(),_=a==="instructor"||a==="admin";x.useEffect(()=>{N()},[s]);const N=async()=>{try{c(!0);const{data:A,error:z}=await vv(s);if(z)throw z;i(A),l(A.replies||[])}catch(A){console.error("Error loading topic:",A),w({title:"",description:"",variant:"destructive"})}finally{c(!1)}},P=async A=>{if(A.preventDefault(),!!m.trim())try{h(!0);const{data:z,error:q}=await Cv({topic_id:s,content:m,parent_reply_id:(g==null?void 0:g.id)||null});if(q)throw q;l(U=>[...U,z]),f(""),y(null),i(U=>({...U,reply_count:(U.reply_count||0)+1})),w({title:"",description:""})}catch(z){console.error("Error creating reply:",z),w({title:"",description:"",variant:"destructive"})}finally{h(!1)}},j=async(A,z)=>{try{const{data:q,error:U}=await iu(A,z);if(U)throw U;A==="topic"?i(C=>({...C,like_count:q.liked?(C.like_count||0)+1:Math.max((C.like_count||0)-1,0),user_liked:q.liked})):l(C=>C.map(S=>S.id===z?{...S,like_count:q.liked?(S.like_count||0)+1:Math.max((S.like_count||0)-1,0),user_liked:q.liked}:S))}catch(q){console.error("Error toggling like:",q)}},k=async A=>{try{const{error:z}=await Tv(A,s);if(z)throw z;l(q=>q.map(U=>({...U,is_best_answer:U.id===A}))),i(q=>({...q,is_solved:!0,solved_reply_id:A})),w({title:"",description:""})}catch(z){console.error("Error marking best answer:",z),w({title:"",description:"",variant:"destructive"})}},O=async()=>{try{p?(await Pv(s),v(!1),w({title:"",description:""})):(await Ev(s),v(!0),w({title:"",description:""}))}catch(A){console.error("Error toggling subscription:",A)}};if(d)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});if(!n)return e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500",children:""}),e.jsxs(T,{onClick:t,className:"mt-4",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),""]})]});const B=lu(n.topic_type),$={blue:"bg-blue-100 text-blue-800 border-blue-200",yellow:"bg-yellow-100 text-yellow-800 border-yellow-200",red:"bg-red-100 text-red-800 border-red-200",green:"bg-green-100 text-green-800 border-green-200",gray:"bg-gray-100 text-gray-800 border-gray-200"};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(T,{variant:"ghost",onClick:t,className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsx(T,{variant:"outline",onClick:O,className:"flex items-center space-x-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx(Sm,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}):e.jsxs(e.Fragment,{children:[e.jsx(Mn,{className:"w-4 h-4"}),e.jsx("span",{children:""})]})})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-xl shadow-sm",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:(L=n.user_profiles)!=null&&L.avatar_url?e.jsx("img",{src:n.user_profiles.avatar_url,alt:n.user_profiles.full_name,className:"w-full h-full rounded-full object-cover"}):e.jsx(tt,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full border ${$[B]}`,children:ou(n.topic_type)}),n.forum_categories&&e.jsx("span",{className:"px-3 py-1 text-sm font-medium rounded-full bg-gray-100 text-gray-700 border border-gray-200",children:n.forum_categories.name}),n.is_pinned&&e.jsxs("span",{className:"flex items-center space-x-1 px-3 py-1 text-sm font-medium rounded-full bg-yellow-100 text-yellow-800 border border-yellow-200",children:[e.jsx(Xa,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),n.is_locked&&e.jsxs("span",{className:"flex items-center space-x-1 px-3 py-1 text-sm font-medium rounded-full bg-red-100 text-red-800 border border-red-200",children:[e.jsx(St,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),n.is_solved&&e.jsxs("span",{className:"flex items-center space-x-1 px-3 py-1 text-sm font-medium rounded-full bg-green-100 text-green-800 border border-green-200",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{children:""})]})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-3",children:n.title}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:[e.jsx("span",{className:"font-medium",children:((G=n.user_profiles)==null?void 0:G.full_name)||""}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{children:Tr(n.created_at)})]}),((M=n.user_profiles)==null?void 0:M.role)==="instructor"&&e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:""})]})]})]})}),e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:n.content})}),e.jsx("div",{className:"mt-6",children:e.jsx(Uv,{targetType:"topic",targetId:n.id,currentUserId:r,userRole:a})})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(_r,{className:"w-4 h-4"}),e.jsxs("span",{children:[n.reply_count||0," "]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsxs("span",{children:[n.view_count||0," "]})]})]}),e.jsxs("button",{onClick:()=>j("topic",n.id),className:`flex items-center space-x-1 px-4 py-2 rounded-full transition-all duration-200 ${n.user_liked?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[e.jsx(Ja,{className:`w-4 h-4 ${n.user_liked?"fill-current":""}`}),e.jsx("span",{className:"font-medium",children:n.like_count||0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(_r,{className:"w-5 h-5 mr-2"})," (",o.length,")"]}),!n.is_locked&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[g&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[": ",(F=g.user_profiles)==null?void 0:F.full_name]}),e.jsx("button",{onClick:()=>y(null),className:"text-blue-600 hover:text-blue-800",children:""})]}),e.jsx("p",{className:"text-sm text-blue-700 line-clamp-2",children:g.content})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsx("textarea",{value:m,onChange:A=>f(A.target.value),placeholder:"...",className:"w-full p-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",rows:4,required:!0}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:g?"":""}),e.jsxs(T,{type:"submit",disabled:u||!m.trim(),className:"flex items-center space-x-2",children:[e.jsx(Dn,{className:"w-4 h-4"}),e.jsx("span",{children:u?"...":""})]})]})]})]}),e.jsx(xe,{children:o.map((A,z)=>{var q,U,C;return e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:z*.1},className:`bg-white border border-gray-200 rounded-xl p-6 ${A.is_best_answer?"ring-2 ring-green-200 bg-green-50":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(q=A.user_profiles)!=null&&q.avatar_url?e.jsx("img",{src:A.author.user_profiles.profile_image_url,alt:A.author.user_profiles.full_name,className:"w-full h-full rounded-full object-cover"}):e.jsx(tt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:((U=A.user_profiles)==null?void 0:U.full_name)||""}),((C=A.user_profiles)==null?void 0:C.role)==="instructor"&&e.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:""}),A.is_best_answer&&e.jsxs("span",{className:"flex items-center space-x-1 px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[e.jsx(Me,{className:"w-3 h-3"}),e.jsx("span",{children:""})]})]}),e.jsx("span",{className:"text-sm text-gray-500",children:Tr(A.created_at)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[_&&!A.is_best_answer&&n.topic_type==="question"&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>k(A.id),className:"flex items-center space-x-1",children:[e.jsx(Me,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),e.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>y(A),className:"flex items-center space-x-1",children:[e.jsx(Jm,{className:"w-4 h-4"}),e.jsx("span",{children:""})]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:A.content})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:A.updated_at!==A.created_at&&e.jsxs("span",{children:[" ",Tr(A.updated_at)]})}),e.jsxs("button",{onClick:()=>j("reply",A.id),className:`flex items-center space-x-1 px-3 py-1.5 rounded-full transition-all duration-200 ${A.user_liked?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[e.jsx(Ja,{className:`w-4 h-4 ${A.user_liked?"fill-current":""}`}),e.jsx("span",{className:"text-sm font-medium",children:A.like_count||0})]})]})]},A.id)})}),o.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(_r,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:""}),e.jsx("p",{className:"text-sm",children:""})]})]})]})},zv=({targetType:s,targetId:t,onFilesUploaded:r,maxFiles:a=5,disabled:n=!1})=>{const[i,o]=x.useState([]),[l,d]=x.useState(!1),[c,u]=x.useState(!1),[h,m]=x.useState({}),f=x.useRef(null),{toast:g}=ne(),y=k=>{k.preventDefault(),n||d(!0)},p=k=>{k.preventDefault(),d(!1)},v=k=>{if(k.preventDefault(),d(!1),n)return;const O=Array.from(k.dataTransfer.files);b(O)},w=k=>{const O=Array.from(k.target.files);b(O)},b=async k=>{if(i.length+k.length>a){g({title:"",description:` ${a} `,variant:"destructive"});return}const O=[],B=[];for(const $ of k){const L=cu($);L.isValid?O.push({file:$,id:Math.random().toString(36),status:"pending",error:null}):B.push({name:$.name,errors:L.errors})}if(B.length>0&&g({title:"",description:B.map($=>`${$.name}: ${$.errors.join(", ")}`).join(`
`),variant:"destructive"}),O.length>0){o($=>[...$,...O]);for(const $ of O)if(_n($.file.type)){const L=await Fv($.file);L&&m(G=>({...G,[$.id]:URL.createObjectURL(L)}))}}},_=k=>{o(O=>O.filter(B=>B.id!==k)),m(O=>{const B={...O};return B[k]&&(URL.revokeObjectURL(B[k]),delete B[k]),B})},N=async()=>{if(i.length!==0){u(!0);try{const k=i.filter(B=>B.status==="pending").map(B=>B.file),O=await Mv(k,s,t);if(O.data){const{successful:B,failed:$}=O.data;o(L=>L.map(G=>{const M=B.find(A=>A.file_name===G.file.name),F=$.find(A=>A.file===G.file.name);return M?{...G,status:"completed"}:F?{...G,status:"error",error:F.error}:G})),B.length>0&&(g({title:"",description:` ${B.length} `}),r==null||r(B)),$.length>0&&g({title:"",description:`${$.length} `,variant:"destructive"})}}catch{g({title:"",description:"",variant:"destructive"})}u(!1)}},P=()=>{const k=i.filter(O=>O.status==="completed").map(O=>O.id);k.forEach(O=>{h[O]&&URL.revokeObjectURL(h[O])}),o(O=>O.filter(B=>B.status!=="completed")),m(O=>{const B={...O};return k.forEach($=>delete B[$]),B})},j=(k,O)=>{switch(k){case"completed":return e.jsx(Am,{className:"w-4 h-4 text-green-600"});case"error":return e.jsx(se,{className:"w-4 h-4 text-red-600"});default:return null}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200 ${l?"border-indigo-500 bg-indigo-50":n?"border-gray-200 bg-gray-50 cursor-not-allowed":"border-gray-300 hover:border-gray-400 cursor-pointer"}`,onDragOver:y,onDragLeave:p,onDrop:v,onClick:()=>{var k;return!n&&((k=f.current)==null?void 0:k.click())},children:[e.jsx("input",{ref:f,type:"file",multiple:!0,className:"hidden",onChange:w,disabled:n}),e.jsx(xs,{className:`w-8 h-8 mx-auto mb-3 ${n?"text-gray-400":"text-gray-600"}`}),e.jsx("p",{className:`text-sm font-medium ${n?"text-gray-400":"text-gray-700"}`,children:l?"":""}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:": , PDF,  ( 50MB )"})]}),e.jsx(xe,{children:i.length>0&&e.jsx(R.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2",children:i.map(k=>e.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:`flex items-center space-x-3 p-3 bg-gray-50 rounded-lg ${k.status==="error"?"border border-red-200":""}`,children:[e.jsx("div",{className:"flex-shrink-0",children:h[k.id]?e.jsx("img",{src:h[k.id],alt:k.file.name,className:"w-10 h-10 object-cover rounded"}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center text-lg",children:Nn(k.file.type)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:k.file.name}),e.jsx("p",{className:"text-xs text-gray-500",children:du(k.file.size)}),k.error&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:k.error.message||""})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[j(k.status,k.error),k.status==="pending"&&e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>_(k.id),className:"p-1 h-auto",children:e.jsx(ve,{className:"w-4 h-4"})})]})]},k.id))})}),i.length>0&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[i.length,"  (",i.filter(k=>k.status==="pending").length," )"]}),e.jsxs("div",{className:"flex space-x-2",children:[i.some(k=>k.status==="completed")&&e.jsx(T,{variant:"outline",size:"sm",onClick:P,disabled:c,children:""}),e.jsx(T,{onClick:N,disabled:c||i.filter(k=>k.status==="pending").length===0,size:"sm",className:"bg-indigo-600 hover:bg-indigo-700",children:c?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"w-4 h-4 mr-2"})," (",i.filter(k=>k.status==="pending").length,")"]})})]})]})]})},Bv=({isOpen:s,onClose:t,courseId:r,onTopicCreated:a})=>{const[n,i]=x.useState({title:"",content:""}),[o,l]=x.useState(!1),{toast:d}=ne();x.useEffect(()=>{s&&i({title:"",content:""})},[s]);const c=async h=>{if(h.preventDefault(),!n.title.trim()||!n.content.trim()){d({title:"",description:"",variant:"destructive"});return}try{l(!0);const m={course_id:r,title:n.title.trim(),content:n.content.trim()},{data:f,error:g}=await wv(m);if(g)throw g;d({title:"",description:""}),a(f),t()}catch(m){console.error("Error creating topic:",m),d({title:"",description:m.message||"",variant:"destructive"})}finally{l(!1)}},u=(h,m)=>{i(f=>({...f,[h]:m}))};return s?e.jsx(xe,{children:e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t,children:e.jsxs(R.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:h=>h.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:e.jsx(cs,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:""}),e.jsx("p",{className:"text-indigo-100 mt-1",children:""})]})]}),e.jsx(T,{variant:"ghost",size:"icon",onClick:t,className:"text-white hover:bg-white/20 rounded-lg",children:e.jsx(ve,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:" *"}),e.jsx("input",{type:"text",value:n.title,onChange:h=>u("title",h.target.value),placeholder:"  React Hooks ",className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-lg",maxLength:200,required:!0}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:""}),e.jsxs("span",{className:"text-sm text-gray-400",children:[n.title.length,"/200"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:" *"}),e.jsx("textarea",{value:n.content,onChange:h=>u("content",h.target.value),placeholder:"  ...",className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",rows:8,maxLength:5e3,required:!0}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:" Markdown "}),e.jsxs("span",{className:"text-sm text-gray-400",children:[n.content.length,"/5000"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:" ()"}),e.jsx(zv,{targetType:"topic",targetId:null,onFilesUploaded:h=>{console.log("Files uploaded:",h)},maxFiles:5,disabled:o})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:" "}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:" "}),e.jsx("li",{children:" "}),e.jsx("li",{children:"  "}),e.jsx("li",{children:" "}),e.jsx("li",{children:"  "})]})]})]})}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"* "}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(T,{type:"button",variant:"outline",onClick:t,disabled:o,className:"px-6",children:""}),e.jsxs(T,{type:"button",onClick:c,disabled:o||!n.title.trim()||!n.content.trim(),className:"px-6 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),o?"...":""]})]})]})})]})})}):null},qv=()=>{var q,U;const{courseId:s}=Js(),{toast:t}=ne(),{user:r}=Ae(),[a,n]=x.useState(null),[i,o]=x.useState(!0),[l,d]=x.useState({isEnrolled:!1,status:null}),[c,u]=x.useState(!1),[h,m]=x.useState("forum"),[f,g]=x.useState([]),[y,p]=x.useState(null),[v,w]=x.useState(!1),[b,_]=x.useState(!1),N=x.useCallback(async()=>{o(!0),console.log("Loading course with ID:",s);const{data:C,error:S}=await mi(s);console.log("Course data:",C,"Error:",S),S?(console.error("Course loading error:",S),t({title:"",description:S.message,variant:"destructive"})):n(C),o(!1)},[s,t]),P=x.useCallback(async()=>{if(!r)return;console.log("CourseDetailPage: Checking enrollment status for user:",r==null?void 0:r.id,"course:",s);const{isEnrolled:C,status:S,error:I}=await au(s);console.log("CourseDetailPage: Enrollment check result:",{isEnrolled:C,status:S,error:I}),I?console.error("CourseDetailPage: Enrollment check error:",I):(d({isEnrolled:C,status:S}),console.log("CourseDetailPage: Enrollment status updated:",{isEnrolled:C,status:S}))},[s,r]);x.useEffect(()=>{N(),r&&P()},[N,P,r]),x.useEffect(()=>{h==="forum"&&l.isEnrolled&&k()},[h,l.isEnrolled]);const j=async()=>{if(!r){t({title:"",description:"",variant:"destructive"});return}console.log("CourseDetailPage: Starting enrollment for user:",r.id,"course:",s),u(!0);const{data:C,error:S}=await pv(s);console.log("CourseDetailPage: Enrollment result:",{data:C,error:S}),S?(console.error("CourseDetailPage: Enrollment failed:",S),t({title:"",description:S.message,variant:"destructive"})):(console.log("CourseDetailPage: Enrollment successful, updating state"),t({title:"!",description:` "${a==null?void 0:a.title}" `}),d({isEnrolled:!0,status:"active"}),console.log("CourseDetailPage: Enrollment status set to:",{isEnrolled:!0,status:"active"}),setTimeout(()=>{console.log("CourseDetailPage: Re-checking enrollment status after enrollment"),P()},1e3)),u(!1)},k=async()=>{try{_(!0);const{data:C,error:S}=await bv(s,{sortBy:"last_reply_at",sortOrder:"desc",limit:50});if(S)throw S;g(C||[])}catch(C){console.error("Error loading forum topics:",C),t({title:"",description:"",variant:"destructive"})}finally{_(!1)}},O=C=>{p(C)},B=()=>{p(null),k()},$=C=>{g(S=>[C,...S]),t({title:"",description:""})},L=async C=>{try{await iu("topic",C),g(S=>S.map(I=>I.id===C?{...I,like_count:I.user_liked?(I.like_count||0)-1:(I.like_count||0)+1,user_liked:!I.user_liked}:I))}catch(S){console.error("Error liking topic:",S)}},G=async(C,S)=>{try{await Nv(C,S),g(I=>I.map(D=>D.id===C?{...D,is_pinned:S}:D)),t({title:S?"":"",description:""})}catch(I){console.error("Error pinning topic:",I)}},M=async(C,S)=>{try{await _v(C,S),g(I=>I.map(D=>D.id===C?{...D,is_locked:S}:D)),t({title:S?"":"",description:""})}catch(I){console.error("Error locking topic:",I)}},F=async C=>{try{await jv(C),g(S=>S.filter(I=>I.id!==C)),t({title:"",description:""})}catch(S){console.error("Error deleting topic:",S)}},A={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},z={type:"tween",ease:"anticipate",duration:.5};return i?e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#667eea] mx-auto mb-4"}),e.jsx("p",{className:"text-emerald-700",children:"..."})]})}):a?e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:A,transition:z,className:"container mx-auto px-4 py-12",children:[e.jsxs(ge,{children:[e.jsxs("title",{children:[a.title," - Login Learning"]}),e.jsx("meta",{name:"description",content:a.description})]}),e.jsx("div",{className:"mb-8",children:e.jsxs(J,{to:"/courses",className:"flex items-center text-emerald-700 hover:text-emerald-900 transition-colors",children:[e.jsx(Xe,{className:"w-5 h-5 mr-2"}),""]})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-emerald-900 mb-4",children:a.title}),e.jsx("p",{className:"text-emerald-800 text-lg leading-relaxed mb-6",children:a.description}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"w-5 h-5 text-[#667eea]"}),e.jsxs("span",{className:"text-emerald-800",children:[": ",a.instructor_name||""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"w-5 h-5 text-[#667eea]"}),e.jsxs("span",{className:"text-emerald-800",children:[": ",a.duration_hours||0," "]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"w-5 h-5 text-[#667eea]"}),e.jsxs("span",{className:"text-emerald-800",children:[": ",a.enrollment_count||0," "]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-5 h-5 text-[#667eea]"}),e.jsxs("span",{className:"text-emerald-800",children:[": ",a.level||""]})]})]}),e.jsx("img",{className:"w-full h-64 sm:h-96 object-cover rounded-lg mb-6 shadow-md",alt:a.title,src:a.image_url||"https://images.unsplash.com/photo-1635251595512-dc52146d5ae8",onError:C=>{C.target.src="https://images.unsplash.com/photo-1635251595512-dc52146d5ae8"}})]}),e.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h2",{className:"text-2xl font-semibold text-emerald-900 flex items-center",children:[e.jsx(cs,{className:"w-6 h-6 mr-2"}),""]})}),l.isEnrolled?e.jsx("div",{children:y?e.jsx(Vv,{topicId:y,onBack:B,currentUserId:r==null?void 0:r.id,userRole:((q=r==null?void 0:r.user_profiles)==null?void 0:q.role)||"student"}):e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-end mb-6",children:e.jsxs(T,{onClick:()=>w(!0),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),""]})}),b?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):f.length>0?e.jsx("div",{className:"space-y-4",children:f.map(C=>{var S;return e.jsx(Av,{topic:C,onTopicClick:O,onLike:L,onPin:G,onLock:M,onDelete:F,onEdit:I=>{console.log("Edit topic:",I)},userRole:((S=r==null?void 0:r.user_profiles)==null?void 0:S.role)||"student",currentUserId:r==null?void 0:r.id},C.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(cs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:""}),e.jsx("p",{className:"text-gray-500 mb-6",children:""}),e.jsxs(T,{onClick:()=>w(!0),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),""]})]})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(cs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:""}),e.jsx("p",{className:"text-gray-500 mb-6",children:""}),e.jsx("p",{className:"text-sm text-gray-400",children:""})]})]})]}),e.jsxs(R.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h2",{className:"text-3xl font-bold text-emerald-900",children:["",((U=a.price)==null?void 0:U.toLocaleString())||"0"]}),e.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((C,S)=>e.jsx(_e,{className:"w-5 h-5 text-yellow-400 fill-current"},S)),e.jsx("span",{className:"ml-2 text-sm text-emerald-800",children:"(5.0)"})]})]}),e.jsx("p",{className:"text-sm text-emerald-700 mb-6",children:" Login Learning"}),l.isEnrolled&&e.jsxs("div",{className:"flex items-center space-x-2 mb-4 p-3 bg-green-500/20 rounded-lg border border-green-500/30",children:[e.jsx(nf,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-green-400 font-medium",children:""})]}),l.isEnrolled?e.jsx(J,{to:`/courses/${s}/learn`,className:"block w-full",children:e.jsxs(T,{size:"lg",className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white text-lg py-3",children:[e.jsx(fe,{className:"w-5 h-5 mr-2"}),""]})}):e.jsxs(T,{size:"lg",className:"w-full bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-gray-800 text-lg py-3",onClick:j,disabled:c,children:[e.jsx(tf,{className:"w-5 h-5 mr-2"}),c?"...":""]}),e.jsx("p",{className:"text-xs text-slate-500 mt-4 text-center",children:"  7 "})]}),e.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[e.jsx("h3",{className:"text-xl font-semibold text-emerald-900 mb-3",children:""}),e.jsx("ul",{className:"space-y-2 text-emerald-800 text-sm list-disc list-inside",children:a.learning_outcomes&&a.learning_outcomes.length>0?(()=>{try{return(typeof a.learning_outcomes=="string"?JSON.parse(a.learning_outcomes):a.learning_outcomes).filter(S=>S.trim()!=="").map((S,I)=>e.jsx("li",{children:S},I))}catch(C){return console.warn("Error parsing learning outcomes:",C),[e.jsx("li",{children:""},"default-1"),e.jsx("li",{children:""},"default-2"),e.jsx("li",{children:""},"default-3"),e.jsx("li",{children:""},"default-4"),e.jsx("li",{children:""},"default-5")]}})():e.jsxs(e.Fragment,{children:[e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:""}),e.jsx("li",{children:""})]})})]}),a.tools_required&&(()=>{try{const S=(typeof a.tools_required=="string"?JSON.parse(a.tools_required):a.tools_required).filter(I=>I.trim()!=="");if(S.length>0)return e.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[e.jsx("h3",{className:"text-xl font-semibold text-emerald-900 mb-3",children:""}),e.jsx("ul",{className:"space-y-2 text-emerald-800 text-sm list-disc list-inside",children:S.map((I,D)=>e.jsx("li",{children:I},D))})]})}catch(C){console.warn("Error parsing tools required:",C)}return null})()]})]}),e.jsx(Bv,{isOpen:v,onClose:()=>w(!1),courseId:s,onTopicCreated:$})]}):e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(se,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-emerald-900 mb-2",children:""}),e.jsx("p",{className:"text-emerald-700 mb-4",children:""}),e.jsx(J,{to:"/courses",children:e.jsx(T,{variant:"outline",className:"text-emerald-900 border-emerald-300 hover:bg-emerald-100",children:""})})]})})},Gv=s=>{if(!s)return"unknown";const t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/youtube\.com\/v\/([a-zA-Z0-9_-]{11})/];for(const n of t){const i=s.match(n);if(i)return{type:"youtube",id:i[1]}}return[".mp4",".webm",".ogg",".mov",".avi"].some(n=>s.toLowerCase().includes(n))||s.startsWith("blob:")||s.startsWith("data:")?{type:"direct",url:s}:{type:"unknown"}},Hv=(s,t=!1)=>{const r=new URLSearchParams({enablejsapi:"1",origin:window.location.origin,autoplay:t?"1":"0",rel:"0",modestbranding:"1",iv_load_policy:"3",cc_load_policy:"0",disablekb:"1",fs:"1",playsinline:"1"});return`https://www.youtube.com/embed/${s}?${r.toString()}`},Wv=({src:s,contentId:t,title:r,autoPlay:a=!1,initialTime:n=0,onComplete:i})=>{const o=x.useRef(null),l=x.useRef(null),d=Gv(s),c=d.type==="youtube",u=d.type==="direct",[h,m]=x.useState(!1),[f,g]=x.useState(n),[y,p]=x.useState(0),[v,w]=x.useState(1),[b,_]=x.useState(!1),[N,P]=x.useState(!1),[j,k]=x.useState(!0),[O,B]=x.useState(!0),[$,L]=x.useState(1);x.useEffect(()=>{const I=o.current;if(!I||!u)return;n>0&&(I.currentTime=n);const D=()=>{p(I.duration),k(!1)},H=()=>{g(I.currentTime)},W=()=>{m(!0)},X=()=>{m(!1)},ie=()=>{m(!1)},Se=()=>{w(I.volume),_(I.muted)},ye=()=>k(!0),at=()=>k(!1);return I.addEventListener("loadedmetadata",D),I.addEventListener("timeupdate",H),I.addEventListener("play",W),I.addEventListener("pause",X),I.addEventListener("ended",ie),I.addEventListener("volumechange",Se),I.addEventListener("waiting",ye),I.addEventListener("canplay",at),()=>{I.removeEventListener("loadedmetadata",D),I.removeEventListener("timeupdate",H),I.removeEventListener("play",W),I.removeEventListener("pause",X),I.removeEventListener("ended",ie),I.removeEventListener("volumechange",Se),I.removeEventListener("waiting",ye),I.removeEventListener("canplay",at)}},[n,u]),x.useEffect(()=>{if(!u)return;let I;const D=()=>{B(!0),clearTimeout(I),I=setTimeout(()=>{h&&B(!1)},3e3)},H=l.current;return H&&(H.addEventListener("mousemove",D),H.addEventListener("mouseleave",()=>{h&&B(!1)})),()=>{clearTimeout(I),H&&H.removeEventListener("mousemove",D)}},[h,u]);const G=()=>{if(!u)return;const I=o.current;I&&I.paused?I.play():I&&I.pause()},M=I=>{if(!u)return;const D=o.current;if(!D)return;const H=I.currentTarget.getBoundingClientRect(),W=(I.clientX-H.left)/H.width;D.currentTime=W*y},F=()=>{if(!u)return;const I=o.current;I&&(I.muted=!I.muted)},A=I=>{if(!u)return;const D=o.current;if(!D)return;const H=parseFloat(I.target.value);D.volume=H,w(H),_(H===0)},z=()=>{const I=l.current;document.fullscreenElement?document.exitFullscreen().then(()=>{P(!1)}):I.requestFullscreen().then(()=>{P(!0)})},q=I=>{if(!u)return;const D=o.current;D&&(D.currentTime=Math.max(0,Math.min(y,D.currentTime+I)))},U=I=>{if(!u)return;const D=o.current;D&&(D.playbackRate=I,L(I))},C=I=>{const D=Math.floor(I/60),H=Math.floor(I%60);return`${D}:${H.toString().padStart(2,"0")}`},S=u&&y>0?f/y*100:0;return d.type==="unknown"?e.jsx("div",{className:"relative bg-gray-900 rounded-lg overflow-hidden p-8 text-center",children:e.jsxs("div",{className:"text-white",children:[e.jsx(ms,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:""}),e.jsx("p",{className:"text-gray-300 mb-4",children:" YouTube URL  (.mp4, .webm, .ogg)"}),e.jsx("p",{className:"text-xs text-gray-400 break-all",children:s}),s&&e.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(ms,{className:"w-4 h-4 mr-2"}),""]})]})}):e.jsxs("div",{ref:l,className:"relative bg-black rounded-lg overflow-hidden group cursor-pointer",onClick:u?G:void 0,children:[c&&e.jsxs(e.Fragment,{children:[e.jsx("iframe",{src:Hv(d.id,a),className:"w-full h-[400px] lg:h-[500px]",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen",allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin",onLoad:()=>{console.log(" Iframe loaded"),k(!1)}}),e.jsx("div",{className:"absolute top-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded",children:"YouTube"})]}),u&&e.jsx("video",{ref:o,src:s,className:"w-full h-auto max-h-[500px] object-contain",autoPlay:a,preload:"metadata",onClick:I=>I.stopPropagation()}),u&&j&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:e.jsx(Ze,{className:"w-12 h-12 text-white animate-spin"})}),u&&!h&&!j&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:e.jsx(R.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white/20 backdrop-blur-sm rounded-full p-4",children:e.jsx(Ya,{className:"w-16 h-16 text-white ml-2"})})}),u&&e.jsxs(R.div,{initial:{opacity:1},animate:{opacity:O?1:0},transition:{duration:.3},className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",onClick:I=>I.stopPropagation(),children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"w-full h-2 bg-white/20 rounded-full cursor-pointer",onClick:M,children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full relative",style:{width:`${S}%`},children:e.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-4 h-4 bg-blue-500 rounded-full -mr-2"})})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:G,children:h?e.jsx(Hm,{className:"w-6 h-6"}):e.jsx(Ya,{className:"w-6 h-6"})}),e.jsx(T,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>q(-10),children:e.jsx(sf,{className:"w-5 h-5"})}),e.jsx(T,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>q(10),children:e.jsx(rf,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:F,children:b||v===0?e.jsx(lf,{className:"w-5 h-5"}):e.jsx(of,{className:"w-5 h-5"})}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:b?0:v,onChange:A,className:"w-20 h-1 bg-white/20 rounded-lg appearance-none slider"})]}),e.jsxs("span",{className:"text-white text-sm font-mono",children:[C(f)," / ",C(y)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:$,onChange:I=>U(parseFloat(I.target.value)),className:"bg-transparent text-white text-sm border border-white/20 rounded px-2 py-1",children:[e.jsx("option",{value:"0.5",className:"bg-black",children:"0.5x"}),e.jsx("option",{value:"0.75",className:"bg-black",children:"0.75x"}),e.jsx("option",{value:"1",className:"bg-black",children:"1x"}),e.jsx("option",{value:"1.25",className:"bg-black",children:"1.25x"}),e.jsx("option",{value:"1.5",className:"bg-black",children:"1.5x"}),e.jsx("option",{value:"2",className:"bg-black",children:"2x"})]}),e.jsx(T,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:z,children:e.jsx(qm,{className:"w-5 h-5"})})]})]})]}),r&&e.jsx(R.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`absolute top-4 left-4 right-4 ${c?"z-10":""}`,children:e.jsx("h3",{className:"text-white text-lg font-semibold bg-black/50 backdrop-blur-sm rounded px-3 py-2",children:r})}),t&&i&&e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"absolute bottom-20 right-4 z-20",children:e.jsxs(T,{onClick:()=>i(t),className:"bg-green-600 hover:bg-green-700 text-white shadow-lg",size:"sm",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),""]})})]})},kn=async s=>{try{const{data:t,error:r}=await E.from("quizzes").select("*").eq("content_id",s).eq("is_active",!0).order("id",{ascending:!1}).limit(1);if(r)throw r;return{data:t&&t.length>0?t[0]:null,error:null}}catch(t){return console.error("Error fetching quiz:",t),{data:null,error:t}}},Kv=async s=>{try{const{data:{user:t},error:r}=await E.auth.getUser();if(r||!t)return{data:[],error:null};const{data:a,error:n}=await E.from("quiz_attempts").select("*").eq("user_id",t.id).eq("quiz_id",s).order("started_at",{ascending:!1});if(n)throw n;return{data:a||[],error:null}}catch(t){return console.error("Error fetching quiz attempts:",t),{data:[],error:t}}},Jv=async s=>{try{const{data:{user:t},error:r}=await E.auth.getUser();if(r||!t)throw new Error("User not authenticated");const{data:a,error:n}=await E.from("quizzes").select("*").eq("id",s).single();if(n)throw n;const{data:i,error:o}=await Kv(s);if(o)throw o;const l=Date.now(),{data:d,error:c}=await E.from("quiz_attempts").insert([{user_id:t.id,quiz_id:s,answers:{},score:0,started_at:new Date().toISOString()}]).select().single();if(c)throw c;return{data:{...d,quiz:a},error:null}}catch(t){return console.error("Error starting quiz attempt:",t),{data:null,error:t}}},Xv=async(s,t)=>{try{const{data:{user:r},error:a}=await E.auth.getUser();if(a||!r)throw new Error("User not authenticated");const{data:n,error:i}=await E.from("quiz_attempts").select("*").eq("id",s).eq("user_id",r.id).single();if(i)throw i;const{data:o,error:l}=await E.from("quizzes").select("*").eq("id",n.quiz_id).single();if(l)throw l;const d=Yv(o.questions,t),c=d.percentage>=o.passing_score,u=new Date().toISOString(),h=new Date(n.started_at),m=new Date(u),f=Math.round((m-h)/(1e3*60)),{data:g,error:y}=await E.from("quiz_attempts").update({answers:t,score:d.percentage,completed_at:u}).eq("id",s).eq("user_id",r.id).select("*").single();if(y)throw y;return{data:{...g,score_details:d},error:null}}catch(r){return console.error("Error submitting quiz attempt:",r),{data:null,error:r}}},Yv=(s,t)=>{let r=0;const a={};s.forEach((i,o)=>{const l=i.id||o.toString(),d=t[l],c=Qv(i,d);c&&r++,a[l]={is_correct:c,correct_answer:Zv(i),user_answer:d,explanation:i.explanation||null}});const n=s.length>0?Math.round(r/s.length*100):0;return{correct_count:r,total_questions:s.length,percentage:n,feedback:a}},Qv=(s,t)=>{switch(s.type){case"multiple_choice":return t===s.correct_answer;case"true_false":return t===s.correct_answer;case"fill_blank":return(Array.isArray(s.correct_answer)?s.correct_answer:[s.correct_answer]).some(i=>(t==null?void 0:t.toLowerCase().trim())===i.toLowerCase().trim());case"multiple_select":if(!Array.isArray(t)||!Array.isArray(s.correct_answer))return!1;const a=new Set(t.sort()),n=new Set(s.correct_answer.sort());return a.size===n.size&&[...a].every(i=>n.has(i));default:return!1}},Zv=s=>{switch(s.type){case"multiple_choice":case"true_false":return s.correct_answer;case"fill_blank":return Array.isArray(s.correct_answer)?s.correct_answer[0]:s.correct_answer;case"multiple_select":return s.correct_answer;default:return null}},ew=async(s,t,r)=>{try{const{data:{user:a},error:n}=await E.auth.getUser();if(n||!a)throw new Error("User not authenticated");if((await kn(s)).data)throw new Error("");const o={title:r.title,description:r.description||"",questions:r.questions,is_active:!0};try{o.content_id=s;const{data:l,error:d}=await E.from("quizzes").insert([o]).select().single();if(d)throw d;return{data:l,error:null}}catch{console.log("content_id column not found, using course_id fallback"),delete o.content_id,o.course_id=t;const{data:d,error:c}=await E.from("quizzes").insert([o]).select().single();if(c)throw c;return{data:d,error:null}}}catch(a){return console.error("Error creating quiz for content:",a),{data:null,error:a}}},tw=({quiz:s,onComplete:t,onClose:r})=>{var L,G,M;const{toast:a}=ne(),[n,i]=x.useState(null),[o,l]=x.useState(0),[d,c]=x.useState({}),[u,h]=x.useState(0),[m,f]=x.useState(!1),[g,y]=x.useState(null),[p,v]=x.useState(!1),w=x.useCallback(async()=>{if(!n)return;v(!0);const{data:F,error:A}=await Xv(n.id,d);if(A){a({title:"",description:A.message,variant:"destructive"}),v(!1);return}y(F),f(!0),v(!1),a({title:F.is_passed?"! ":"",description:`: ${F.score}/${F.max_score} (${F.score}%)`,variant:F.is_passed?"default":"destructive"}),t==null||t(F)},[n,d,a,t]),b=x.useCallback(async()=>{v(!0);const{data:F,error:A}=await Jv(s.id);if(A){a({title:"",description:A.message,variant:"destructive"}),r==null||r();return}i(F),s.time_limit>0&&h(s.time_limit*60),v(!1)},[s.id,s.time_limit,a,r]);x.useEffect(()=>{b()},[b]),x.useEffect(()=>{if(u>0&&!m){const F=setTimeout(()=>{h(u-1)},1e3);return()=>clearTimeout(F)}else u===0&&s.time_limit>0&&!m&&w()},[u,m,s.time_limit,w]);const _=(F,A)=>{c(z=>({...z,[F]:A}))},N=()=>{o<s.questions.length-1&&l(o+1)},P=()=>{o>0&&l(o-1)},j=F=>{const A=Math.floor(F/60),z=F%60;return`${A}:${z.toString().padStart(2,"0")}`},k=()=>Object.keys(d).length;if(p&&!n)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700",children:"..."})]})});if(m&&g)return e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:`mx-auto w-16 h-16 rounded-full flex items-center justify-center ${g.is_passed?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:g.is_passed?e.jsx(ac,{className:"w-8 h-8"}):e.jsx(Ri,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:g.is_passed?"! ":" "}),e.jsxs("p",{className:"text-gray-700",children:[": ",g.score,"% | : ",s.passing_score,"%"]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 shadow-sm p-6 rounded-xl",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:((L=g.score_details)==null?void 0:L.correct_count)||0}),e.jsx("div",{className:"text-sm text-gray-700",children:""})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-300",children:((G=g.score_details)==null?void 0:G.total_questions)||0}),e.jsx("div",{className:"text-sm text-gray-700",children:""})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[g.score,"%"]}),e.jsx("div",{className:"text-sm text-gray-700",children:""})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:g.time_spent_minutes||0}),e.jsx("div",{className:"text-sm text-gray-700",children:""})]})]})]}),s.show_correct_answers&&((M=g.score_details)==null?void 0:M.feedback)&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:""}),s.questions.map((F,A)=>{const z=F.id||A.toString(),q=g.score_details.feedback[z];return e.jsx(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:A*.1},className:`bg-white border border-gray-200 shadow-sm p-4 rounded-lg border-l-4 ${q!=null&&q.is_correct?"border-green-500":"border-red-500"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`mt-1 ${q!=null&&q.is_correct?"text-green-400":"text-red-400"}`,children:q!=null&&q.is_correct?e.jsx(be,{className:"w-5 h-5"}):e.jsx(Ri,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-900 font-medium mb-2",children:F.question}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-700",children:": "}),e.jsx("span",{className:q!=null&&q.is_correct?"text-green-400":"text-red-400",children:Array.isArray(q==null?void 0:q.user_answer)?q.user_answer.join(", "):(q==null?void 0:q.user_answer)||""})]}),!(q!=null&&q.is_correct)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-700",children:": "}),e.jsx("span",{className:"text-green-400",children:Array.isArray(q==null?void 0:q.correct_answer)?q.correct_answer.join(", "):q==null?void 0:q.correct_answer})]}),(q==null?void 0:q.explanation)&&e.jsxs("div",{className:"mt-2 p-2 bg-blue-500/10 rounded text-blue-300",children:[e.jsx("strong",{children:":"})," ",q.explanation]})]})]})]})},z)})]}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(T,{onClick:r,variant:"outline",children:""}),!g.is_passed&&(n==null?void 0:n.attempt_number)<s.max_attempts&&e.jsxs(T,{onClick:()=>{f(!1),y(null),l(0),c({}),b()},className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx(Xm,{className:"w-4 h-4 mr-2"}),""]})]})]});const O=s.questions[o],B=O.id||o.toString(),$=d[B];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s.title}),e.jsxs("p",{className:"text-gray-700",children:[" ",o+1,"  ",s.questions.length]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[s.time_limit>0&&e.jsxs("div",{className:`flex items-center space-x-2 ${u<300?"text-red-400":"text-gray-700"}`,children:[e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"font-mono",children:j(u)})]}),e.jsxs("div",{className:"text-gray-700 text-sm",children:[": ",k(),"/",s.questions.length]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(o+1)/s.questions.length*100}%`}})}),e.jsx(xe,{mode:"wait",children:e.jsx(R.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"bg-white border border-gray-200 shadow-sm p-6 rounded-xl",children:e.jsx(sw,{question:O,questionId:B,userAnswer:$,onAnswerChange:_})},o)}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(T,{onClick:P,disabled:o===0,variant:"outline",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),""]}),e.jsx("div",{className:"flex items-center space-x-2",children:o===s.questions.length-1?e.jsx(T,{onClick:w,disabled:p||k()===0,className:"bg-green-500 hover:bg-green-600",children:p?"...":""}):e.jsxs(T,{onClick:N,children:["",e.jsx(km,{className:"w-4 h-4 ml-2"})]})})]}),k()<s.questions.length&&e.jsxs("div",{className:"flex items-center space-x-2 text-amber-400 text-sm",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsxs("span",{children:[" (",s.questions.length-k()," )"]})]})]})},sw=({question:s,questionId:t,userAnswer:r,onAnswerChange:a})=>{const n=()=>{switch(s.type){case"multiple_choice":return e.jsx("div",{className:"space-y-3",children:s.options.map((i,o)=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-gray-100 transition-colors bg-gray-50 border border-gray-200",children:[e.jsx("input",{type:"radio",name:t,value:i,checked:r===i,onChange:l=>a(t,l.target.value),className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-gray-900",children:i})]},o))});case"multiple_select":return e.jsx("div",{className:"space-y-3",children:s.options.map((i,o)=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-gray-100 transition-colors bg-gray-50 border border-gray-200",children:[e.jsx("input",{type:"checkbox",value:i,checked:Array.isArray(r)&&r.includes(i),onChange:l=>{const d=Array.isArray(r)?r:[];l.target.checked?a(t,[...d,i]):a(t,d.filter(c=>c!==i))},className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-gray-900",children:i})]},o))});case"true_false":return e.jsx("div",{className:"space-y-3",children:[!0,!1].map(i=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-gray-100 transition-colors bg-gray-50 border border-gray-200",children:[e.jsx("input",{type:"radio",name:t,value:i,checked:r===i,onChange:o=>a(t,o.target.value==="true"),className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-gray-900",children:i?"":""})]},i.toString()))});case"fill_blank":return e.jsx("input",{type:"text",value:r||"",onChange:i=>a(t,i.target.value),placeholder:"...",className:"w-full p-3 bg-white border border-gray-300 rounded-lg text-gray-900 focus:border-blue-500 focus:outline-none"});default:return e.jsx("p",{className:"text-red-400",children:""})}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:s.question}),s.image&&e.jsx("img",{src:s.image,alt:"Question",className:"max-w-full h-auto rounded-lg"}),n(),s.hint&&e.jsxs("div",{className:"text-sm text-blue-300 bg-blue-500/10 p-3 rounded-lg",children:[e.jsx("strong",{children:":"})," ",s.hint]})]})},Br=async s=>{try{console.log("Using course_id approach for assignment lookup to avoid schema issues");const{data:t,error:r}=await E.from("course_content").select("course_id, title").eq("id",s).single();if(r||!t)return{data:null,error:null};const a=await E.from("assignments").select("*").eq("course_id",t.course_id).eq("is_active",!0).order("id",{ascending:!1}).limit(1);if(a.error)return console.error("Error fetching assignments by course_id:",a.error),{data:null,error:null};const n=a.data||[];return{data:n.length>0?n[0]:null,error:null}}catch(t){return console.error("Error fetching assignment:",t),{data:null,error:null}}},uu=async s=>{try{const{data:{user:t},error:r}=await E.auth.getUser();if(r||!t)return{data:[],error:null};const{data:a,error:n}=await E.from("assignment_submissions").select("*").eq("user_id",t.id).eq("assignment_id",s).order("id",{ascending:!1});if(n)throw n;return{data:a||[],error:null}}catch(t){return console.error("Error fetching user submissions:",t),{data:[],error:t}}},sl=async(s,t)=>{try{const{data:{user:r},error:a}=await E.auth.getUser();if(a||!r)throw new Error("User not authenticated");const{data:n,error:i}=await E.from("assignments").select("*").eq("id",s).single();if(i)throw i;const{data:o,error:l}=await uu(s);if(l)throw l;const d=n.due_date?new Date>new Date(n.due_date):!1,{data:c,error:u}=await E.from("assignment_submissions").insert([{user_id:r.id,assignment_id:s,submission_text:t.text||""}]).select().single();if(u)throw u;return{data:c,error:null}}catch(r){return console.error("Error creating submission:",r),{data:null,error:r}}},rl=async(s,t)=>{try{const{data:{user:r},error:a}=await E.auth.getUser();if(a||!r)throw new Error("User not authenticated");const{data:n,error:i}=await E.from("assignment_submissions").update({submission_text:t.text||""}).eq("id",s).eq("user_id",r.id).select().single();if(i)throw i;return{data:n,error:null}}catch(r){return console.error("Error updating submission:",r),{data:null,error:r}}},al=async s=>{try{const{data:{user:t},error:r}=await E.auth.getUser();if(r||!t)throw new Error("User not authenticated");const{data:a,error:n}=await E.from("assignment_submissions").update({submitted_at:new Date().toISOString()}).eq("id",s).eq("user_id",t.id).select().single();if(n)throw n;return{data:a,error:null}}catch(t){return console.error("Error submitting final submission:",t),{data:null,error:t}}},rw=async(s,t,r)=>{try{const{data:{user:a},error:n}=await E.auth.getUser();if(n||!a)throw new Error("User not authenticated");if((await Br(s)).data)throw new Error("");const o={title:r.title,description:r.description||"",instructions:r.instructions||"",due_date:r.due_date,max_score:r.max_score||100,is_active:!0};try{o.content_id=s;const{data:l,error:d}=await E.from("assignments").insert([o]).select().single();if(d)throw d;return{data:l,error:null}}catch{console.log("content_id column not found, using course_id fallback"),delete o.content_id,o.course_id=t;const{data:d,error:c}=await E.from("assignments").insert([o]).select().single();if(c)throw c;return{data:d,error:null}}}catch(a){return console.error("Error creating assignment for content:",a),{data:null,error:a}}},aw=async s=>{try{const{data:t,error:r}=await E.from("assignments").select("*").eq("id",s).single();if(r)throw r;return{data:t,error:null}}catch(t){return console.error("Error fetching assignment:",t),{data:null,error:t}}},nw=async s=>{try{const{data:t,error:r}=await E.from("assignment_submissions").select(`
        *,
        user_profiles!assignment_submissions_user_id_fkey(full_name, email, avatar_url)
      `).eq("assignment_id",s).order("submitted_at",{ascending:!1});if(r)throw r;return{data:t,error:null}}catch(t){return console.error("Error fetching assignment submissions:",t),{data:null,error:t}}},iw=async(s,t)=>{try{const{data:{user:r},error:a}=await E.auth.getUser();if(a||!r)throw new Error("User not authenticated");const{data:n,error:i}=await E.from("assignment_submissions").update({score:t.score,feedback:t.feedback,graded_at:t.graded_at||new Date().toISOString(),graded_by:t.graded_by||r.id,grading_rubric_scores:t.grading_rubric_scores||null}).eq("id",s).select().single();if(i)throw i;return{data:n,error:null}}catch(r){return console.error("Error updating submission grade:",r),{data:null,error:r}}},ow=({contentId:s,assignment:t,onComplete:r,onClose:a})=>{const{toast:n}=ne(),i=M=>M?M.graded_at&&M.score!==null?"graded":M.submitted_at?"submitted":"draft":"draft",[o,l]=x.useState(!0),[d,c]=x.useState(t),[u,h]=x.useState([]),[m,f]=x.useState(null),[g,y]=x.useState(""),[p,v]=x.useState([]),[w,b]=x.useState(!1),[_,N]=x.useState(!1),[P,j]=x.useState("submit"),k=x.useCallback(async()=>{l(!0);try{let M=d;if(!M){const{data:F,error:A}=await Br(s);if(A)throw A;c(F),M=F}if(M!=null&&M.id){const{data:F,error:A}=await uu(M.id);if(A)throw A;if(h(F),F.length>0){const z=F[0];f(z),y(z.submission_text||""),v([]),z.submitted_at||i(z)==="submitted"||i(z)==="graded"?j("view"):j("edit")}}}catch(M){console.error("Error loading assignment data:",M),n({title:"",description:M.message,variant:"destructive"})}finally{l(!1)}},[s,d,n]);x.useEffect(()=>{k()},[k]);const O=async()=>{if(d){b(!0);try{const M={text:g};let F;if(m&&!m.submitted_at?F=await rl(m.id,M):F=await sl(d.id,M),F.error)throw F.error;f(F.data),n({title:"",description:""}),k()}catch(M){console.error("Error saving draft:",M),n({title:"",description:M.message,variant:"destructive"})}finally{b(!1)}}},B=async()=>{if(d){if(!g.trim()){n({title:"",description:"",variant:"destructive"});return}N(!0);try{const M={text:g};let F;if(m&&!m.submitted_at?(await rl(m.id,M),F=await al(m.id)):(F=await sl(d.id,M),F.error||(F=await al(F.data.id))),F.error)throw F.error;n({title:"! ",description:""}),r==null||r(F.data),j("view"),k()}catch(M){console.error("Error submitting assignment:",M),n({title:"",description:M.message,variant:"destructive"})}finally{N(!1)}}},$=(d==null?void 0:d.due_date)&&new Date>new Date(d.due_date),L=P==="submit"||P==="edit",G=(m==null?void 0:m.submitted_at)||i(m)==="submitted"||i(m)==="graded";return o?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700",children:"..."})]})}):d?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:d.title}),e.jsx("p",{className:"text-gray-800",children:d.description})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[G&&e.jsxs("div",{className:"flex items-center space-x-1 text-green-400 text-sm",children:[e.jsx(Pm,{className:"w-4 h-4"}),e.jsx("span",{children:""})]}),$&&!G&&e.jsxs("div",{className:"flex items-center space-x-1 text-red-400 text-sm",children:[e.jsx(kt,{className:"w-4 h-4"}),e.jsx("span",{children:""})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 p-4 bg-white border border-gray-300/30 rounded-lg",children:[d.due_date&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(De,{className:"w-4 h-4 text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-700",children:""}),e.jsx("p",{className:"text-gray-900",children:new Date(d.due_date).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Me,{className:"w-4 h-4 text-yellow-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-700",children:""}),e.jsxs("p",{className:"text-gray-900",children:[d.max_score||100," "]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(re,{className:"w-4 h-4 text-purple-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-700",children:""}),e.jsxs("p",{className:"text-gray-900",children:[d.max_files||5," "]})]})]})]})]}),d.instructions&&e.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:""}),e.jsx("div",{className:"text-gray-800 whitespace-pre-wrap leading-relaxed",children:d.instructions})]}),u.length>0&&e.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:""}),e.jsx("div",{className:"space-y-2",children:u.map((M,F)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-300/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-800",children:""}),e.jsx("span",{className:"ml-2 text-xs text-gray-700",children:M.submitted_at?new Date(M.submitted_at).toLocaleDateString("th-TH"):""})]}),e.jsxs("div",{className:`px-2 py-1 rounded text-xs ${i(M)==="submitted"?"bg-green-500/20 text-green-400":i(M)==="graded"?"bg-blue-500/20 text-blue-400":"bg-yellow-500/20 text-yellow-400"}`,children:[i(M)==="submitted"&&"",i(M)==="graded"&&` (${M.score}/${(d==null?void 0:d.max_score)||100})`,i(M)==="draft"&&""]})]}),e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>{f(M),y(M.submission_text||""),v([]),j("view")},children:e.jsx(ke,{className:"w-4 h-4"})})]},M.id))})]}),e.jsx(xe,{mode:"wait",children:e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass-effect rounded-lg overflow-hidden",children:[m&&e.jsx("div",{className:"border-b border-white/10 p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(T,{size:"sm",variant:P==="view"?"default":"ghost",onClick:()=>j("view"),children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),""]}),!G&&e.jsxs(T,{size:"sm",variant:P==="edit"?"default":"ghost",onClick:()=>j("edit"),children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),""]})]})}),e.jsx("div",{className:"p-6",children:P==="view"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:""}),(m==null?void 0:m.submission_text)&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"p-4 bg-white border border-gray-300/30 rounded-lg text-gray-900 whitespace-pre-wrap",children:m.submission_text})]}),(m==null?void 0:m.feedback)&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg text-blue-800",children:m.feedback})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:m?"":""}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"/"}),e.jsx("textarea",{value:g,onChange:M=>y(M.target.value),disabled:!L,rows:8,className:"w-full p-3 bg-white border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none resize-none",placeholder:"..."})]}),e.jsx("div",{className:"text-xs text-gray-500",children:":  "}),L&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/10",children:[e.jsx("div",{className:"text-xs text-gray-500",children:$&&e.jsxs("div",{className:"flex items-center space-x-1 text-amber-400",children:[e.jsx(kt,{className:"w-3 h-3"}),e.jsx("span",{children:""})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(T,{variant:"outline",onClick:O,disabled:w||_,children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),""]})}),e.jsx(T,{onClick:B,disabled:w||_,className:"bg-green-500 hover:bg-green-600",children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Dn,{className:"w-4 h-4 mr-2"}),""]})})]})]})]})})]},P)})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(re,{className:"w-16 h-16 text-gray-700 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:""}),e.jsx("p",{className:"text-gray-700",children:""})]})},lw=({isOpen:s,onClose:t,contentId:r,courseId:a})=>{const{toast:n}=ne(),[i,o]=x.useState({title:"",description:"",time_limit:30,passing_score:70,questions:[{id:1,question:"",type:"multiple_choice",options:["","","",""],correct_answer:0}]}),l=()=>{const m={id:Date.now(),question:"",type:"multiple_choice",options:["","","",""],correct_answer:0};o(f=>({...f,questions:[...f.questions,m]}))},d=m=>{o(f=>({...f,questions:f.questions.filter(g=>g.id!==m)}))},c=(m,f,g)=>{o(y=>({...y,questions:y.questions.map(p=>p.id===m?{...p,[f]:g}:p)}))},u=(m,f,g)=>{o(y=>({...y,questions:y.questions.map(p=>p.id===m?{...p,options:p.options.map((v,w)=>w===f?g:v)}:p)}))},h=async()=>{try{if(!i.title.trim()){n({title:"",variant:"destructive"});return}for(const g of i.questions){if(!g.question.trim()){n({title:"",variant:"destructive"});return}if(g.options.some(y=>!y.trim())){n({title:"",variant:"destructive"});return}}const{data:m,error:f}=await ew(r,a,i);if(f)throw f;n({title:"",description:` "${i.title}" `}),t()}catch(m){console.error("Error saving quiz:",m),n({title:"",description:m.message||"",variant:"destructive"})}};return s?e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t,children:e.jsxs(R.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:""}),e.jsx(T,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(ve,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),e.jsx("input",{type:"text",value:i.title,onChange:m=>o(f=>({...f,title:m.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:" ()"}),e.jsx("input",{type:"number",value:i.time_limit,onChange:m=>o(f=>({...f,time_limit:parseInt(m.target.value)})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),e.jsx("textarea",{value:i.description,onChange:m=>o(f=>({...f,description:m.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:" (%)"}),e.jsx("input",{type:"number",value:i.passing_score,onChange:m=>o(f=>({...f,passing_score:parseInt(m.target.value)})),className:"w-32 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:""}),e.jsxs(T,{onClick:l,size:"sm",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),""]})]}),e.jsx("div",{className:"space-y-6",children:i.questions.map((m,f)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium",children:[" ",f+1]}),i.questions.length>1&&e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>d(m.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Ie,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),e.jsx("textarea",{value:m.question,onChange:g=>c(m.id,"question",g.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),e.jsx("div",{className:"space-y-2",children:m.options.map((g,y)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`correct-${m.id}`,checked:m.correct_answer===y,onChange:()=>c(m.id,"correct_answer",y),className:"text-blue-600"}),e.jsx("input",{type:"text",value:g,onChange:p=>u(m.id,y,p.target.value),className:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:` ${y+1}`})]},y))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]})]})]},m.id))})]})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t",children:[e.jsx(T,{variant:"outline",onClick:t,children:""}),e.jsxs(T,{onClick:h,children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),""]})]})]})}):null},cw=({isOpen:s,onClose:t,contentId:r,courseId:a})=>{const{toast:n}=ne(),[i,o]=x.useState({title:"",description:"",instructions:"",due_date:"",max_score:100,submission_type:"file",allowed_file_types:[".pdf",".doc",".docx"],max_file_size:10,allow_late_submission:!0,late_penalty:10}),l=[{value:"file",label:""},{value:"text",label:""},{value:"url",label:""},{value:"both",label:""}],d=[".pdf",".doc",".docx",".txt",".rtf",".jpg",".jpeg",".png",".gif",".zip",".rar",".7z",".ppt",".pptx",".xls",".xlsx"],c=h=>{o(m=>({...m,allowed_file_types:m.allowed_file_types.includes(h)?m.allowed_file_types.filter(f=>f!==h):[...m.allowed_file_types,h]}))},u=async()=>{try{if(!i.title.trim()){n({title:"",variant:"destructive"});return}if(!i.description.trim()){n({title:"",variant:"destructive"});return}if(!i.due_date){n({title:"",variant:"destructive"});return}if(new Date(i.due_date)<=new Date){n({title:"",variant:"destructive"});return}const{data:f,error:g}=await rw(r,a,i);if(g)throw g;n({title:"",description:` "${i.title}" `}),t()}catch(h){console.error("Error saving assignment:",h),n({title:"",description:h.message||"",variant:"destructive"})}};return s?e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t,children:e.jsxs(R.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:""}),e.jsx(T,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(ve,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),e.jsx("input",{type:"text",value:i.title,onChange:h=>o(m=>({...m,title:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),e.jsx("input",{type:"datetime-local",value:i.due_date,onChange:h=>o(m=>({...m,due_date:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),e.jsx("input",{type:"number",value:i.max_score,onChange:h=>o(m=>({...m,max_score:parseInt(h.target.value)})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),e.jsx("textarea",{value:i.description,onChange:h=>o(m=>({...m,description:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),e.jsx("textarea",{value:i.instructions,onChange:h=>o(m=>({...m,instructions:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"4",placeholder:""})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:l.map(h=>e.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"submission_type",value:h.value,checked:i.submission_type===h.value,onChange:m=>o(f=>({...f,submission_type:m.target.value})),className:"text-blue-600"}),e.jsx("span",{className:"text-sm",children:h.label})]},h.value))})]}),(i.submission_type==="file"||i.submission_type==="both")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:""}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:d.map(h=>e.jsxs("label",{className:"flex items-center space-x-1 text-xs",children:[e.jsx("input",{type:"checkbox",checked:i.allowed_file_types.includes(h),onChange:()=>c(h),className:"text-blue-600"}),e.jsx("span",{children:h})]},h))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:" (MB)"}),e.jsx("input",{type:"number",value:i.max_file_size,onChange:h=>o(m=>({...m,max_file_size:parseInt(h.target.value)})),className:"w-32 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"100"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:i.allow_late_submission,onChange:h=>o(m=>({...m,allow_late_submission:h.target.checked})),className:"text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:""})]}),i.allow_late_submission&&e.jsxs("div",{className:"ml-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:" (%)"}),e.jsx("input",{type:"number",value:i.late_penalty,onChange:h=>o(m=>({...m,late_penalty:parseInt(h.target.value)})),className:"w-32 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",max:"100"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:""})]})]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t",children:[e.jsx(T,{variant:"outline",onClick:t,children:""}),e.jsxs(T,{onClick:u,children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),""]})]})]})}):null},dw=async(s,t="video")=>{try{const{data:{user:r},error:a}=await E.auth.getUser();if(a||!r)throw new Error("User not authenticated");const{data:n,error:i}=await E.from("course_content").select("course_id").eq("id",s).single();if(i)throw i;if(!n)throw new Error("Content not found");let o=null,l=null;try{const d=await E.from("user_progress").upsert([{user_id:r.id,course_id:n.course_id,content_id:s,completed_at:new Date().toISOString(),is_completed:!0,completion_percentage:100,last_accessed_at:new Date().toISOString()}],{onConflict:"user_id,course_id,content_id"}).select().single();o=d.data,l=d.error}catch(d){console.log("Falling back to basic user_progress structure:",d);const c=await E.from("user_progress").upsert([{user_id:r.id,course_id:n.course_id,content_id:s,completed_at:new Date().toISOString(),time_spent_minutes:0}],{onConflict:"user_id,course_id,content_id"}).select().single();o=c.data,l=c.error}if(l)throw l;return{data:o,error:null}}catch(r){return console.error("Error marking content complete:",r),{data:null,error:r}}},br=async s=>{try{const{data:{user:t},error:r}=await E.auth.getUser();if(r||!t)return{data:null,error:null};const{data:a,error:n}=await E.from("enrollments").select("id, progress_percentage, completed_at, is_active").eq("user_id",t.id).eq("course_id",s).maybeSingle();if(n)throw n;if(!a)return{data:{enrolled:!1},error:null};const{data:i,error:o}=await E.from("course_content").select("id, title, content_type, order_index").eq("course_id",s).order("order_index");if(o)throw o;const l=i.map(b=>b.id),{data:d,error:c}=await E.from("user_progress").select("content_id, completed_at, is_completed, completion_percentage").eq("user_id",t.id).eq("course_id",s).in("content_id",l);if(c)throw c;const{data:u,error:h}=await E.from("quiz_attempts").select("quiz_id, is_passed, completed_at").eq("user_id",t.id);h&&console.warn("Quiz attempts table not available:",h);const{data:m,error:f}=await E.from("assignment_submissions").select("assignment_id, submitted_at, score, graded_at").eq("user_id",t.id);f&&console.warn("Assignment submissions table not available:",f);const g=new Map((d||[]).map(b=>[b.content_id,b])),y=i.map(b=>{const _=g.get(b.id);let N=!1;if(_&&_.is_completed)N=!0;else switch(b.content_type){case"video":N=!!(_!=null&&_.is_completed);break;case"quiz":N=(u||[]).some(P=>P.is_passed);break;case"assignment":N=(m||[]).some(P=>P.submitted_at!==null);break;default:N=!!(_!=null&&_.is_completed)}return{...b,is_completed:N,completion_percentage:(_==null?void 0:_.completion_percentage)||(N?100:0),completed_at:_==null?void 0:_.completed_at}}),p=y.filter(b=>b.is_completed).length,v=y.length,w=v>0?Math.round(p/v*100):0;return{data:{enrolled:!0,enrollment:a,content_progress:y,completed_count:p,total_count:v,progress_percentage:w,calculated_progress:w},error:null}}catch(t){return console.error("Error fetching course progress:",t),{data:null,error:t}}},hu=async s=>{try{const{data:t,error:r}=await E.from("course_content").select("*").eq("course_id",s).order("order_index",{ascending:!0});if(r)throw r;return{data:t||[],error:null}}catch(t){return console.error("Error fetching content with progress:",t),{data:[],error:t}}};async function nl(s,t){var r,a;try{console.log(" Checking course content accessibility:",{courseId:s,userId:t});const{data:n,error:i}=await E.from("course_content").select(`
        id,
        title,
        order_index,
        content_type,
        lock_enabled,
        requires_previous_completion,
        lock_message
      `).eq("course_id",s).order("order_index",{ascending:!0});if(i)return console.error("Error fetching course contents:",i),{error:i};const{data:o}=await E.from("enrollments").select("id").eq("user_id",t).eq("course_id",s).single();if(!o){console.log(" User not enrolled in course");const h={};return n.forEach((m,f)=>{h[m.id]={isAccessible:f===0||m.content_type==="video",reason:f===0?"First content available":m.content_type==="video"?"Video content freely accessible":"User not enrolled"}}),{accessibility:h}}let l=null,d=null;try{const h=await E.from("user_progress").select("content_id, is_completed, completed_at").eq("user_id",t);l=h.data,d=h.error}catch(h){console.log("Falling back to completed_at only check for all progress:",h);const m=await E.from("user_progress").select("content_id, completed_at").eq("user_id",t);l=((r=m.data)==null?void 0:r.map(f=>({content_id:f.content_id,is_completed:!!f.completed_at,completed_at:f.completed_at})))||[],d=m.error}console.log(" All progress records:",{progressRecords:l,progressError:d});const c=new Set(((a=l==null?void 0:l.filter(h=>h.is_completed))==null?void 0:a.map(h=>h.content_id))||[]);console.log(" Completed content IDs:",Array.from(c));const u={};for(let h=0;h<n.length;h++){const m=n[h];if(m.content_type==="video"){u[m.id]={isAccessible:!0,reason:"Video content freely accessible"};continue}if(!m.lock_enabled||!m.requires_previous_completion){u[m.id]={isAccessible:!0,reason:"Content lock disabled"};continue}if(h===0){u[m.id]={isAccessible:!0,reason:"First content"};continue}const f=n[h-1];f&&c.has(f.id)?u[m.id]={isAccessible:!0,reason:"Previous content completed"}:u[m.id]={isAccessible:!1,reason:m.lock_message||"",blockingContent:f}}return console.log(" Content accessibility results:",u),{accessibility:u}}catch(n){return console.error("Error checking course content accessibility:",n),{error:n}}}const vr=({contentId:s,className:t=""})=>{const{toast:r}=ne(),[a,n]=x.useState([]),[i,o]=x.useState(!0),[l,d]=x.useState(null),c=g=>{const y=g==null?void 0:g.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(y)?e.jsx(Fe,{className:"w-5 h-5 text-blue-500"}):["mp4","avi","mov","wmv","flv"].includes(y)?e.jsx($n,{className:"w-5 h-5 text-purple-500"}):["zip","rar","7z","tar","gz"].includes(y)?e.jsx(ec,{className:"w-5 h-5 text-orange-500"}):["pdf"].includes(y)?e.jsx(re,{className:"w-5 h-5 text-red-500"}):["doc","docx"].includes(y)?e.jsx(re,{className:"w-5 h-5 text-blue-600"}):["ppt","pptx"].includes(y)?e.jsx(re,{className:"w-5 h-5 text-orange-600"}):["xls","xlsx"].includes(y)?e.jsx(re,{className:"w-5 h-5 text-green-600"}):e.jsx(tc,{className:"w-5 h-5 text-slate-500"})},u=g=>{if(g===0)return"0 Bytes";const y=1024,p=["Bytes","KB","MB","GB"],v=Math.floor(Math.log(g)/Math.log(y));return parseFloat((g/Math.pow(y,v)).toFixed(2))+" "+p[v]};x.useEffect(()=>{(async()=>{if(s){o(!0);try{console.log("Loading attachments for content:",s);const{data:y,error:p}=await nu(s);if(p){console.error("Error loading attachments:",p),r({title:"",description:"",variant:"destructive"});return}console.log("Loaded attachments:",y),n(y||[])}catch(y){console.error("Error in loadAttachments:",y),r({title:"",description:"",variant:"destructive"})}finally{o(!1)}}})()},[s,r]);const h=async g=>{d(g.id);try{if(console.log("Downloading file:",g),g.file_url){const y=document.createElement("a");y.href=g.file_url,y.download=g.original_filename||g.filename,y.target="_blank",document.body.appendChild(y),y.click(),document.body.removeChild(y),r({title:"",description:` ${g.original_filename||g.filename}`})}else throw new Error(" URL ")}catch(y){console.error("Download error:",y),r({title:"",description:y.message||"",variant:"destructive"})}finally{d(null)}},m=g=>{g.file_url&&window.open(g.file_url,"_blank")},f=(g,y)=>{const p=["application/pdf","image/jpeg","image/png","image/gif","image/webp","text/plain"],v=["pdf","jpg","jpeg","png","gif","webp","txt"];return p.includes(g)||v.includes(y==null?void 0:y.toLowerCase())};return i?e.jsxs("div",{className:`flex items-center justify-center p-8 ${t}`,children:[e.jsx(Ze,{className:"w-6 h-6 animate-spin text-gray-400"}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"..."})]}):!a||a.length===0?null:e.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-6 ${t}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(kr,{className:"w-5 h-5 text-orange-500"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[" (",a.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:a.map(g=>e.jsxs(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-100 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:c(g.file_extension)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:g.original_filename||g.filename}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsx("span",{children:u(g.file_size)}),g.file_extension&&e.jsx("span",{className:"uppercase",children:g.file_extension}),g.download_count>0&&e.jsxs("span",{children:[" ",g.download_count," "]})]}),g.description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:g.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[f(g.mime_type,g.file_extension)&&e.jsx(T,{size:"sm",variant:"outline",onClick:()=>m(g),className:"text-blue-600 border-blue-200 hover:bg-blue-50",title:"",children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsx(T,{size:"sm",onClick:()=>h(g),disabled:l===g.id,className:"bg-green-600 hover:bg-green-700 text-white",title:"",children:l===g.id?e.jsx(Ze,{className:"w-4 h-4 animate-spin"}):e.jsx(jt,{className:"w-4 h-4"})})]})]},g.id))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-500 text-center",children:" "})})]})},uw=()=>{const{courseId:s}=Js(),{user:t,isAdmin:r}=Ae(),{toast:a}=ne(),[n,i]=x.useState(null),[o,l]=x.useState(!0),[d,c]=x.useState({isEnrolled:!1}),[u,h]=x.useState(null),[m,f]=x.useState(null),[g,y]=x.useState({}),[p,v]=x.useState(null),[w,b]=x.useState(null),[_,N]=x.useState(!1),[P,j]=x.useState(null),[k,O]=x.useState(!1),[B,$]=x.useState(!1),[L,G]=x.useState(!1),M=x.useCallback(async()=>{if(t)try{console.log("Checking enrollment for user:",t==null?void 0:t.id,"course:",s);const{isEnrolled:D,status:H,error:W}=await au(s);if(console.log("Enrollment result:",{isEnrolled:D,status:H,error:W}),W){console.error("Enrollment check error:",W),a({title:"",description:W.message,variant:"destructive"}),c({isEnrolled:!1,status:null});return}if(c({isEnrolled:D,status:H}),H!=null&&H.enrollment_id?(f(H.enrollment_id),console.log("Enrollment ID set:",H.enrollment_id)):H!=null&&H.id&&(f(H.id),console.log("Enrollment ID set from status.id:",H.id)),D){console.log("User is enrolled, loading progress...");const{data:X}=await br(s);console.log("Course progress data:",X),h(X);const{data:ie}=await hu(s);if(ie&&ie.length>0){console.log("Loading course content",ie.length,"items");const{accessibility:Se,error:ye}=await nl(s,t.id);ye?console.error("Error loading content accessibility:",ye):(console.log(" Content accessibility loaded:",Se),y(Se))}}else console.log("User is not enrolled")}catch(D){console.error("Error in checkEnrollmentAndProgress:",D),a({title:"",description:D.message,variant:"destructive"})}},[t,s,a]),F=x.useCallback(async()=>{l(!0),console.log("CourseLearningPage: Loading course with ID:",s);const D=setTimeout(()=>{console.error("CourseLearningPage: Course loading timeout after 10 seconds"),l(!1),a({title:"",description:"",variant:"destructive"})},1e4);try{const{data:H,error:W}=await mi(s);clearTimeout(D),console.log("CourseLearningPage: Course data received:",H,"Error:",W),W?(console.error("CourseLearningPage: Course loading error:",W),a({title:"",description:W.message,variant:"destructive"})):H?(i(H),console.log("CourseLearningPage: Course set successfully:",H),H!=null&&H.content&&H.content.length>0?(console.log("CourseLearningPage: Auto-selecting first content:",H.content[0]),v(H.content[0])):(console.log("CourseLearningPage: No content found in course"),console.log("CourseLearningPage: Course data structure:",H),console.log("CourseLearningPage: Content array:",H==null?void 0:H.content))):(console.log("CourseLearningPage: No course data returned"),a({title:"",description:"",variant:"destructive"}))}catch(H){clearTimeout(D),console.error("CourseLearningPage: Unexpected error loading course:",H),a({title:"",description:H.message,variant:"destructive"})}finally{l(!1)}},[s,a]);x.useEffect(()=>{F()},[s]),x.useEffect(()=>{t&&n&&(console.log("useEffect: Checking enrollment and progress",{user:t==null?void 0:t.id,courseId:n==null?void 0:n.id}),M())},[t,n==null?void 0:n.id]);const A=async D=>{const H=n.content.findIndex(W=>W.id===D.id);if(I(D,H)){const W=g[D.id],X=(W==null?void 0:W.reason)||"",ie=W==null?void 0:W.blockingContent;a({title:"",description:ie?` "${ie.title}" `:X,variant:"destructive"});return}if(v(D),N(!1),b(null),O(!1),j(null),D.content_type==="quiz"){const{data:W}=await kn(D.id);W&&(b(W),N(!0))}if(D.content_type==="assignment")try{const{data:W,error:X}=await Br(D.id);W&&!X&&(j(W),O(!0))}catch{console.log(`: ${D.title}`)}},z=D=>{a({title:D.is_passed?"!  ":"",description:`: ${D.score}%`,variant:D.is_passed?"default":"destructive"}),t&&n&&(async()=>{try{const{data:W}=await br(s);h(W)}catch(W){console.error("Error refreshing progress:",W)}})(),N(!1)},q=D=>{a({title:"! ",description:""}),t&&n&&(async()=>{try{const{data:W}=await br(s);h(W)}catch(W){console.error("Error refreshing progress:",W)}})(),O(!1)},U=async(D,H="general")=>{var W;try{const X=(W=n==null?void 0:n.content)==null?void 0:W.find(Se=>Se.id===D),ie=(X==null?void 0:X.content_type)==="video"?"":(X==null?void 0:X.content_type)==="text"?"":(X==null?void 0:X.content_type)==="quiz"?"":(X==null?void 0:X.content_type)==="assignment"?"":"";if(a({title:`${ie}! `,description:`${ie}`}),t&&D){const{data:Se,error:ye}=await dw(D,H);ye?console.error("Error marking content as completed:",ye):console.log("Content marked as completed:",Se)}t&&n&&(async()=>{try{const{data:ye}=await br(s);h(ye);const{accessibility:at,error:nt}=await nl(s,t.id);nt||y(at)}catch(ye){console.error("Error refreshing progress:",ye)}})()}catch(X){console.error("Error in handleContentComplete:",X),a({title:"",description:"",variant:"destructive"})}},C=D=>U(D,"video"),S=D=>{if(console.log(" getContentProgress called for:",D.content_type,D.id),console.log(" Current courseProgress:",u),!(u!=null&&u.content_progress))return console.log(" No courseProgress.content_progress found"),0;const H=u.content_progress.find(X=>X.id===D.id),W=H!=null&&H.is_completed?100:0;return console.log(" Content progress:",W),W},I=(D,H)=>{if(g.hasOwnProperty(D.id)){const ie=g[D.id];return console.log(" Content lock check:",{contentId:D.id,accessInfo:ie,isAccessible:ie==null?void 0:ie.isAccessible}),!(ie!=null&&ie.isAccessible)}if(H===0)return!1;const W=n.content[H-1];return S(W)<100};return o?e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#667eea] mx-auto mb-4"}),e.jsx("p",{className:"text-teal-700",children:"..."}),e.jsxs("p",{className:"text-teal-700 text-sm mt-2",children:["Course ID: ",s]})]})}):n?d.isEnrolled?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0a192f] to-[#172a46]",children:[e.jsx(ge,{children:e.jsxs("title",{children:[n.title," -  | Login Learning"]})}),e.jsx("div",{className:"bg-black/20 backdrop-blur-sm border-b border-white/10",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(J,{to:`/courses/${s}`,children:e.jsx(T,{variant:"ghost",size:"icon",className:"text-teal-900",children:e.jsx(Xe,{className:"w-5 h-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-teal-900",children:n.title}),u&&e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-teal-800",children:[e.jsxs("span",{children:[": ",u.progress_percentage,"%"]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[u.completed_count,"/",u.total_count," "]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-teal-800",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsxs("span",{children:[n.enrollment_count||0," "]})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 sticky top-24",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-3 rounded-xl mr-4",children:e.jsx(fe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:""}),e.jsx("p",{className:"text-sm text-gray-600",children:""})]})]}),u&&e.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between text-sm font-semibold text-gray-700 mb-3",children:[e.jsx("span",{children:" "}),e.jsxs("span",{className:"text-indigo-600",children:[u.progress_percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 shadow-inner",children:e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 h-3 rounded-full transition-all duration-500 shadow-sm",style:{width:`${u.progress_percentage}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:""})]})]}),e.jsx("div",{className:"space-y-3",children:n!=null&&n.content&&n.content.length>0?n.content.map((D,H)=>{var Se,ye;const W=S(D),X=I(D,H),ie=(p==null?void 0:p.id)===D.id;return e.jsx(R.div,{whileHover:X?{}:{scale:1.02,y:-2},className:`group relative overflow-hidden rounded-xl border-2 transition-all duration-300 cursor-pointer ${ie?"border-blue-500 bg-blue-50 shadow-md":X?"border-gray-200 bg-gray-50 opacity-60":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,onClick:()=>!X&&A(D),children:e.jsx("div",{className:"relative p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${X?"bg-gray-300":W>=100?"bg-gradient-to-r from-green-500 to-emerald-500":ie?"bg-gradient-to-r from-blue-500 to-indigo-500":"bg-gradient-to-r from-gray-400 to-gray-500"}`,children:X?e.jsx(St,{className:"w-5 h-5 text-white"}):W>=100?e.jsx(be,{className:"w-5 h-5 text-white"}):D.content_type==="video"?e.jsx(qs,{className:"w-5 h-5 text-white"}):D.content_type==="quiz"?e.jsx(Es,{className:"w-5 h-5 text-white"}):D.content_type==="assignment"?e.jsx(fe,{className:"w-5 h-5 text-white"}):e.jsx(re,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`text-sm font-bold mb-1 line-clamp-2 ${X?"text-gray-500":ie?"text-blue-800":"text-gray-800"}`,children:D.title}),e.jsxs("div",{className:"flex items-center justify-between text-xs mb-2",children:[e.jsx("span",{className:`${X?"text-gray-400":"text-gray-600"}`,children:D.content_type==="video"?" ":D.content_type==="quiz"?" ":D.content_type==="assignment"?" ":" "}),D.duration_minutes&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(me,{className:"w-3 h-3"}),e.jsxs("span",{children:[D.duration_minutes," "]})]})]}),X?e.jsxs("div",{className:"text-xs text-red-600 bg-red-50 border border-red-200 rounded-md p-2 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(St,{className:"w-3 h-3"}),e.jsx("span",{className:"font-medium",children:""})]}),e.jsx("div",{className:"mt-1 text-gray-600",children:((Se=g[D.id])==null?void 0:Se.reason)||""}),((ye=g[D.id])==null?void 0:ye.blockingContent)&&e.jsxs("div",{className:"mt-1 text-blue-600",children:[': "',g[D.id].blockingContent.title,'"']})]}):e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${W>=100?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-blue-500 to-indigo-500"}`,style:{width:`${Math.min(W,100)}%`}})})]})]})})},D.id)}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(re,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:""})]})})]})}),e.jsx("div",{className:"lg:col-span-3",children:p?e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-6 text-white",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:[p.content_type==="video"&&e.jsx(qs,{className:"w-6 h-6 text-white"}),p.content_type==="text"&&e.jsx(re,{className:"w-6 h-6 text-white"}),p.content_type==="quiz"&&e.jsx(Es,{className:"w-6 h-6 text-white"}),p.content_type==="assignment"&&e.jsx(fe,{className:"w-6 h-6 text-white"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:p.title}),e.jsxs("div",{className:"flex items-center text-blue-100 mt-1",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[p.duration_minutes||0," "]})]})]})]})})}),e.jsxs("div",{className:"p-6",children:[p.content_type==="video"&&(p.content_url||p.video_url)&&e.jsxs("div",{children:[e.jsx(Wv,{src:p.content_url||p.video_url,contentId:p.id,title:p.title,autoPlay:!1,onComplete:C}),e.jsxs("div",{className:"mt-6 border-t pt-6",children:[S(p)>=100?e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-lg",children:[e.jsx(be,{className:"w-5 h-5 mr-2"}),""]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"text-center p-4 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:""}),e.jsx("div",{className:"text-sm text-gray-600",children:""})]})}),r&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{variant:"outline",size:"sm",className:"bg-red-500 text-white border-red-500 hover:bg-red-600 hover:border-red-600 font-medium",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/admin/courses/${n.id}/content`),a({title:" link ",description:" link  admin "})},children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),""]}),e.jsxs(T,{variant:"outline",size:"sm",className:"bg-purple-500 text-white border-purple-500 hover:bg-purple-600 hover:border-purple-600 font-medium",onClick:()=>{navigator.clipboard.writeText(window.location.href),a({title:" link ",description:" link "})},children:[e.jsx(ks,{className:"w-4 h-4 mr-2"}),""]})]})]})]})]}),p.content_type==="text"&&e.jsxs("div",{children:[e.jsx("div",{className:"prose max-w-none mb-8",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:p.content||""}})}),e.jsx(vr,{contentId:p.id,className:"mb-8"}),e.jsxs("div",{className:"border-t pt-6",children:[S(p)>=100?e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-lg",children:[e.jsx(be,{className:"w-5 h-5 mr-2"}),""]})}):e.jsx("div",{className:"text-center",children:e.jsxs(T,{onClick:()=>U(p.id,"text"),className:"bg-green-600 hover:bg-green-700 text-white",size:"lg",children:[e.jsx(be,{className:"w-5 h-5 mr-2"}),""]})}),r&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{variant:"outline",size:"sm",className:"bg-indigo-500 text-white border-indigo-500 hover:bg-indigo-600 hover:border-indigo-600 font-medium",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/admin/courses/${n.id}/content`),a({title:" link ",description:" link  admin "})},children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),""]}),e.jsxs(T,{variant:"outline",size:"sm",className:"bg-purple-500 text-white border-purple-500 hover:bg-purple-600 hover:border-purple-600 font-medium",onClick:()=>{navigator.clipboard.writeText(window.location.href),a({title:" link ",description:" link "})},children:[e.jsx(ks,{className:"w-4 h-4 mr-2"}),""]})]})]})]})]}),p.content_type==="quiz"&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Es,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:""}),e.jsx("p",{className:"text-gray-600 mb-6",children:p.content||""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(T,{className:"bg-blue-500 hover:bg-blue-600 text-white",onClick:async()=>{const{data:D}=await kn(p.id);D?(b(D),N(!0)):a({title:"",description:"",variant:"destructive"})},children:[e.jsx(Es,{className:"w-4 h-4 mr-2"}),""]}),S(p)<100&&e.jsx("div",{children:e.jsxs(T,{variant:"outline",className:"bg-green-600 hover:bg-green-700 text-white border-green-600",onClick:()=>U(p.id,"quiz"),children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),""]})}),r&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{variant:"outline",size:"sm",className:"bg-blue-500 text-white border-blue-500 hover:bg-blue-600 hover:border-blue-600 font-medium",onClick:()=>$(!0),children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),""]}),e.jsxs(T,{variant:"outline",size:"sm",className:"bg-purple-500 text-white border-purple-500 hover:bg-purple-600 hover:border-purple-600 font-medium",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/admin/courses/${n.id}/content`),a({title:" link ",description:" link  admin "})},children:[e.jsx(ks,{className:"w-4 h-4 mr-2"}),""]})]})]})]})]}),e.jsx(vr,{contentId:p.id,className:"mt-8"})]}),p.content_type==="assignment"&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fe,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:""}),e.jsx("p",{className:"text-gray-600 mb-6",children:p.content||""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(T,{className:"bg-green-500 hover:bg-green-600 text-white",onClick:async()=>{const{data:D}=await Br(p.id);D?(j(D),O(!0)):a({title:"",description:"",variant:"destructive"})},children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),""]}),S(p)<100&&e.jsx("div",{children:e.jsxs(T,{variant:"outline",className:"bg-green-600 hover:bg-green-700 text-white border-green-600",onClick:()=>U(p.id,"assignment"),children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),""]})}),r&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(T,{variant:"outline",size:"sm",className:"bg-orange-500 text-white border-orange-500 hover:bg-orange-600 hover:border-orange-600 font-medium",onClick:()=>G(!0),children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),""]}),e.jsxs(T,{variant:"outline",size:"sm",className:"bg-green-500 text-white border-green-500 hover:bg-green-600 hover:border-green-600 font-medium",onClick:()=>{a({title:"",description:" "})},children:[e.jsx(Ka,{className:"w-4 h-4 mr-2"}),""]}),e.jsxs(T,{variant:"outline",size:"sm",className:"bg-purple-500 text-white border-purple-500 hover:bg-purple-600 hover:border-purple-600 font-medium",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/admin/courses/${n.id}/content`),a({title:" link ",description:" link  admin "})},children:[e.jsx(ks,{className:"w-4 h-4 mr-2"}),""]})]})]})]})]}),e.jsx(vr,{contentId:p.id,className:"mt-8"})]}),(p.content_type==="document"||p.content_type==="lesson")&&e.jsxs("div",{children:[p.content&&e.jsx("div",{className:"prose max-w-none mb-8",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:p.content}})}),e.jsx(vr,{contentId:p.id,className:"mb-8"}),e.jsxs("div",{className:"border-t pt-6",children:[S(p)>=100?e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-lg",children:[e.jsx(be,{className:"w-5 h-5 mr-2"}),""]})}):e.jsx("div",{className:"text-center",children:e.jsxs(T,{onClick:()=>U(p.id,p.content_type),className:"bg-green-600 hover:bg-green-700 text-white",size:"lg",children:[e.jsx(be,{className:"w-5 h-5 mr-2"}),""]})}),r&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{variant:"outline",size:"sm",className:"bg-teal-500 text-white border-teal-500 hover:bg-teal-600 hover:border-teal-600 font-medium",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/admin/courses/${n.id}/content`),a({title:" link ",description:" link  admin "})},children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),""]}),e.jsxs(T,{variant:"outline",size:"sm",className:"bg-purple-500 text-white border-purple-500 hover:bg-purple-600 hover:border-purple-600 font-medium",onClick:()=>{navigator.clipboard.writeText(window.location.href),a({title:" link ",description:" link "})},children:[e.jsx(ks,{className:"w-4 h-4 mr-2"}),""]})]})]})]})]})]})]}):e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(fe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:""}),e.jsx("p",{className:"text-gray-600",children:""})]})})})]})}),e.jsx(xe,{children:_&&w&&e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>N(!1),children:e.jsx(R.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:D=>D.stopPropagation(),children:e.jsx("div",{className:"p-6",children:e.jsx(tw,{quiz:w,onComplete:z,onClose:()=>N(!1)})})})})}),e.jsx(xe,{children:k&&P&&e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>O(!1),children:e.jsx(R.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:D=>D.stopPropagation(),children:e.jsx("div",{className:"p-6",children:e.jsx(ow,{contentId:p==null?void 0:p.id,assignment:P,onComplete:q,onClose:()=>O(!1)})})})})}),e.jsx(lw,{isOpen:B,onClose:()=>$(!1),contentId:p==null?void 0:p.id,courseId:s}),e.jsx(cw,{isOpen:L,onClose:()=>G(!1),contentId:p==null?void 0:p.id,courseId:s})]}):e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-teal-900 mb-2",children:""}),e.jsx("p",{className:"text-teal-700 mb-4",children:""}),e.jsxs("div",{className:"text-teal-700 text-sm mb-4",children:[e.jsxs("p",{children:["Course: ",n==null?void 0:n.title]}),e.jsxs("p",{children:["User: ",t==null?void 0:t.email]}),e.jsxs("p",{children:["Enrollment Status: ",JSON.stringify(d)]})]}),e.jsx(J,{to:`/courses/${s}`,children:e.jsx(T,{children:""})})]})}):e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-teal-900 mb-2",children:""}),e.jsxs("p",{className:"text-teal-700 mb-4",children:["Course ID: ",s]}),e.jsxs("p",{className:"text-teal-700 text-sm mb-4",children:["Loading: ",o?"true":"false"]}),e.jsx(J,{to:"/courses",children:e.jsx(T,{variant:"outline",children:""})})]})})},hw=()=>{const s={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},t=[{title:"Arduino & IoT Workshop",duration:"5 ",participants:"15-20 ",description:" IoT  Arduino",features:["","",""],price:"12,500 ",category:"Electronics"},{title:"React Native Mobile Development",duration:"7 ",participants:"12-18 ",description:" React Native ",features:["","Deploy  Store","Portfolio Project"],price:"18,000 ",category:"Software"},{title:"Structural Design Intensive",duration:"10 ",participants:"10-15 ",description:"",features:["AutoCAD + SAP2000","",""],price:"25,000 ",category:"Civil Engineering"}],r=[{icon:ae,title:"",description:" "},{icon:Wr,title:"",description:"70%  30%  "},{icon:Me,title:"",description:""},{icon:fe,title:"",description:" E-book "}],a=[" ","","Wi-Fi  ","",""];return e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:s,className:"min-h-screen pt-20",children:[e.jsxs(ge,{children:[e.jsx("title",{children:" Onsite - Login Learning"}),e.jsx("meta",{name:"description",content:" Onsite   Login Learning "})]}),e.jsxs("section",{className:"relative overflow-hidden py-20",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-100/50 to-blue-200/30"}),e.jsx("div",{className:"container mx-auto px-4 relative",children:e.jsxs(R.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8},className:"text-center max-w-4xl mx-auto",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-700 to-blue-500 rounded-full flex items-center justify-center",children:e.jsx(fs,{className:"w-10 h-10 text-blue-800"})})}),e.jsxs("h1",{className:"text-4xl lg:text-6xl font-bold text-black mb-6",children:[" ",e.jsx("span",{className:"gradient-text",children:"Onsite"})]}),e.jsx("p",{className:"text-xl text-black mb-8 leading-relaxed",children:"     Login Learning"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(T,{size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600",children:[e.jsx(De,{className:"w-5 h-5 mr-2"})," Onsite"]}),e.jsxs(T,{size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[e.jsx(zt,{className:"w-5 h-5 mr-2"}),""]})]})]})})]}),e.jsx("section",{className:"py-20",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(R.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},className:"text-center mb-16",children:[e.jsxs("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:[" ",e.jsx("span",{className:"gradient-text",children:"Onsite"})]}),e.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:" Onsite "})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:r.map((n,i)=>e.jsxs(R.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.6,delay:i*.1},className:"glass-effect p-6 rounded-xl text-center hover:transform hover:scale-105 transition-all duration-300",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-700 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(n.icon,{className:"w-8 h-8 text-blue-800"})}),e.jsx("h3",{className:"text-xl font-bold text-black mb-3",children:n.title}),e.jsx("p",{className:"text-black",children:n.description})]},i))})]})}),e.jsx("section",{className:"py-20 bg-gradient-to-r from-blue-50/80 to-blue-100/60",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(R.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},className:"text-center mb-16",children:[e.jsxs("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:[" ",e.jsx("span",{className:"gradient-text",children:"Onsite"})," "]}),e.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:" "})]}),e.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:t.map((n,i)=>e.jsxs(R.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.6,delay:i*.2},className:"glass-effect p-6 rounded-xl hover:transform hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-blue-700 to-blue-500 text-gray-800 text-sm rounded-full",children:n.category}),e.jsxs("div",{className:"flex items-center text-yellow-400",children:[e.jsx(_e,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm",children:""})]})]}),e.jsx("h3",{className:"text-xl font-bold text-black mb-3",children:n.title}),e.jsx("p",{className:"text-black mb-4",children:n.description}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsxs("div",{className:"flex items-center text-black",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:[": ",n.duration]})]}),e.jsxs("div",{className:"flex items-center text-black",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:[": ",n.participants]})]})]}),e.jsx("div",{className:"space-y-2 mb-6",children:n.features.map((o,l)=>e.jsxs("div",{className:"flex items-center text-blue-600",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:o})]},l))}),e.jsxs("div",{className:"border-t border-slate-300 pt-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-black",children:n.price}),e.jsx("span",{className:"text-black text-sm block",children:""})]}),e.jsx(T,{className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600",children:""})]})]},i))})]})}),e.jsx("section",{className:"py-20",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[e.jsxs(R.div,{initial:{x:-30,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.8},children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:""}),e.jsx("p",{className:"text-xl text-black mb-8",children:" "}),e.jsx("div",{className:"space-y-4",children:a.map((n,i)=>e.jsxs(R.div,{initial:{x:-20,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.6,delay:i*.1},className:"flex items-center",children:[e.jsx(be,{className:"w-5 h-5 text-blue-600 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-black",children:n})]},i))})]}),e.jsx(R.div,{initial:{x:30,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.8},className:"glass-effect p-8 rounded-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Tm,{className:"w-16 h-16 text-blue-600 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:""}),e.jsxs("div",{className:"space-y-3 text-black",children:[e.jsx("p",{children:e.jsx("strong",{children:":"})}),e.jsxs("p",{children:["123  ",e.jsx("br",{}),"  10400"]}),e.jsx("div",{className:"pt-4 border-t border-slate-300",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(zt,{className:"w-4 h-4 mr-2 text-blue-600"}),e.jsx("span",{children:"02-xxx-xxxx"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ht,{className:"w-4 h-4 mr-2 text-blue-600"}),e.jsx("span",{children:"onsite@loginlearning.com"})]})]})})]})]})})]})})}),e.jsx("section",{className:"py-20 bg-gradient-to-r from-blue-100/60 to-blue-200/40",children:e.jsx("div",{className:"container mx-auto px-4 text-center",children:e.jsxs(R.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},className:"max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:" Onsite ?"}),e.jsx("p",{className:"text-xl text-black mb-8",children:""}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(T,{size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600",children:[e.jsx(zt,{className:"w-5 h-5 mr-2"}),""]}),e.jsx(T,{size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50",asChild:!0,children:e.jsxs(J,{to:"/contact",children:[e.jsx(ht,{className:"w-5 h-5 mr-2"}),""]})})]})]})})})]})},mw=()=>{const[s,t]=x.useState({}),r=(l,d)=>{const c=`${l}-${d}`;t(u=>({...u,[c]:!u[c]}))},a=[{faculty:" ()",icon:Ym,subtitle:" Portfolio ()",universities:[{name:"",shortName:"",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",gpax:" 3.00-3.50",exams:"TPAT3, TGAT",intake:"~600-700 ",fee:"~21,000 /",website:"https://www.eng.chula.ac.th/",websiteText:" ",recommendedMajors:[": GPAX  3.50, Portfolio , TPAT3",": GPAX  3.25, Portfolio, TPAT3"],portfolioRounds:"~327 ",quotaRounds:"~38 ",admissionRounds:"~240 "},{name:"",shortName:"",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/5/51/Logo_ku_th.svg/1200px-Logo_ku_th.svg.png",fallbackLogo:"https://placehold.co/60x60/D4A017/FFFFFF?text=KU&font=bold",gpax:" 2.75-3.25",exams:"TPAT3, TGAT",intake:"~1400+ ",fee:"~17,000 /",website:"https://www.eng.ku.ac.th/",websiteText:" ",recommendedMajors:[": GPAX  3.25, Portfolio",": GPAX  3.00, Portfolio"],portfolioRounds:"~791 ",quotaRounds:"~181 ",admissionRounds:"~390 "},{name:"",shortName:".",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/7/76/Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg/1200px-Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg.png",fallbackLogo:"https://placehold.co/60x60/F28500/FFFFFF?text=KMUTT&font=bold",gpax:" 2.75-3.00",exams:"TGAT, TPAT3 ()",intake:"~900+ ",fee:"~25,000 /",website:"https://eng.kmutt.ac.th/",websiteText:" .",recommendedMajors:[": GPAX  3.00, Portfolio"],portfolioRounds:"~725 ",quotaRounds:"~170 ",admissionRounds:"~63 "},{name:"",shortName:".",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/e/e4/Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg/1200px-Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg.png",fallbackLogo:"https://placehold.co/60x60/E36414/FFFFFF?text=KMITL&font=bold",gpax:" 2.75",exams:"TPAT3, TGAT",intake:"~600+ ",fee:"~20,000 /",website:"https://www.reg.kmitl.ac.th/index/faculty_engineer.php",websiteText:" .",recommendedMajors:[": GPAX  3.00, Portfolio"],portfolioRounds:"~200 ",quotaRounds:"~54 ",admissionRounds:"~403 "},{name:"",shortName:".",logo:"https://www.eng.kmutnb.ac.th/wp-content/uploads/2019/08/LOGO-KMUTNB--300x300.png",fallbackLogo:"https://placehold.co/60x60/C00000/FFFFFF?text=KMUTNB&font=bold",gpax:" 2.75",exams:"TGAT/TPAT ()",intake:"~600+ ",fee:"~18,000 /",website:"https://www.eng.kmutnb.ac.th/",websiteText:" .",recommendedMajors:[": GPAX  2.75, Portfolio"],portfolioRounds:"~371 ",quotaRounds:"~124 ",admissionRounds:"~40 "},{name:"",shortName:".",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/d/db/Chiang_Mai_University.svg/1200px-Chiang_Mai_University.svg.png",fallbackLogo:"https://placehold.co/60x60/7B1FA2/FFFFFF?text=CMU&font=bold",gpax:" 2.75-3.00",exams:"TGAT, TPAT3",intake:"~1100+ ",fee:"~20,000 /",website:"https://www.eng.cmu.ac.th/",websiteText:" .",recommendedMajors:[": GPAX  3.00, Portfolio"],portfolioRounds:"~352 ",quotaRounds:"~225 ",admissionRounds:"~350 "},{name:"",shortName:".",logo:"https://www.kku.ac.th/wp-content/uploads/2022/01/1.-official-logo-2022-26.png",fallbackLogo:"https://placehold.co/60x60/D32F2F/FFFFFF?text=KKU&font=bold",gpax:" 2.75",exams:"TGAT/TPAT ()",intake:"~600+ ",fee:"~18,000 /",website:"https://eng.kku.ac.th/",websiteText:" .",recommendedMajors:[": GPAX  3.00, Portfolio"],portfolioRounds:"~326 ",quotaRounds:"~152 ",admissionRounds:"~118 "},{name:"",shortName:".",logo:"https://huso.psu.ac.th/th/wp-content/uploads/2023/04/PSU_Logo_text_Eng_Color_2.png",fallbackLogo:"https://placehold.co/60x60/0277BD/FFFFFF?text=PSU&font=bold",gpax:" 2.75",exams:"TGAT/TPAT ()",intake:"~1000+ ",fee:"~22,000 /",website:"https://www.eng.psu.ac.th/",websiteText:" .",recommendedMajors:[": GPAX  3.00, Portfolio"],portfolioRounds:"~594 ",quotaRounds:"~210 ",admissionRounds:"~100 "}]},{faculty:" ()",icon:Ys,subtitle:" Portfolio ()",universities:[{name:"",shortName:"ISE Chula",subtitle:"ISE (International School of Engineering)",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",requirements:"IELTS:  6.0, TOEFL iBT:  80, SAT Math:  620",intake:"~180-200  ()",fee:"~84,000 /",website:"https://www.google.com/search?client=safari&rls=en&q=ISE+Chula&ie=UTF-8&oe=UTF-8",websiteText:" ISE Chula",recommendedMajors:["Aerospace Engineering: GPAX  3.5, Strong Math/Physics, IELTS  6.5, SAT Math  650","Robotics and AI: GPAX  3.5, Strong Math/Programming, IELTS  6.5, SAT Math  650"]},{name:"",shortName:"IUP Kasetsart",subtitle:"IUP (International Undergraduate Program)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/5/51/Logo_ku_th.svg/1200px-Logo_ku_th.svg.png",fallbackLogo:"https://placehold.co/60x60/D4A017/FFFFFF?text=KU&font=bold",gpax:" 2.75",requirements:"IELTS:  5.5, TOEFL iBT:  61",intake:"~100-150  ()",fee:"~70,000 /",website:"https://iup.eng.ku.ac.th",websiteText:" IUP Kasetsart",recommendedMajors:["Software and Knowledge Engineering: GPAX  3.00, IELTS  5.5, Portfolio ( Project  Software)","Electrical Engineering: GPAX  2.75, IELTS  5.5, Portfolio ()"]},{name:"",shortName:"Mahidol Eng",subtitle:"Faculty of Engineering (International Programs)",logo:"https://upload.wikimedia.org/wikipedia/commons/4/45/Mahidol_U.png",fallbackLogo:"https://placehold.co/60x60/1565C0/FFFFFF?text=MU&font=bold",gpax:" 3.00",requirements:"IELTS:  6.0, TOEFL iBT:  64",intake:"~80-120  ()",fee:"~90,000 /",website:"https://www.eg.mahidol.ac.th",websiteText:" EG Mahidol Inter",recommendedMajors:["Biomedical Engineering: GPAX  3.25, IELTS  6.0, Portfolio (, )","Computer Engineering: GPAX  3.00, IELTS  6.0, Portfolio ( Programming, Math)"]},{name:"",shortName:"SIIE KMUTT",subtitle:"SIIE (School of International and Interdisciplinary Engineering)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/7/76/Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg/1200px-Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg.png",fallbackLogo:"https://placehold.co/60x60/F28500/FFFFFF?text=KMUTT&font=bold",gpax:" 3.00",requirements:"IELTS  5.5 / TOEFL",intake:"~150-200 ",fee:"~80,000 /",website:"https://www.eng.kmitl.ac.th/siie-international-programs/",websiteText:" SIIE KMUTT",recommendedMajors:["Computer Engineering (Inter): GPAX  3.00, IELTS  5.5, Portfolio"]},{name:"",shortName:"Inter KMITL",subtitle:"School of Engineering (International Programs)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/e/e4/Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg/1200px-Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg.png",fallbackLogo:"https://placehold.co/60x60/E36414/FFFFFF?text=KMITL&font=bold",gpax:" 3.00",requirements:"IELTS  5.5 / TOEFL",intake:"~100-150 ",fee:"~75,000 /",website:"https://oia.kmitl.ac.th/oia/international-programs/",websiteText:" Inter KMITL",recommendedMajors:["Robotics & AI Engineering (Inter): GPAX  3.00, IELTS  5.5, Portfolio"]}]},{faculty:" ()",icon:Cm,subtitle:" Portfolio ()",universities:[{name:"",shortName:" ",subtitle:" ",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",gpax:" 3.25-3.5 ()",intake:"~20-30 ",fee:"~21,000 /",website:"https://www.chula.ac.th/academic/faculty-of-science/",websiteText:" ",recommendedMajors:["AI & Machine Learning: GPAX  3.5, Portfolio ( AI/ML),  . ","Software Development: GPAX  3.25, Portfolio ( Application/Web)"]},{name:"",shortName:" ",subtitle:" ",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/5/51/Logo_ku_th.svg/1200px-Logo_ku_th.svg.png",fallbackLogo:"https://placehold.co/60x60/D4A017/FFFFFF?text=KU&font=bold",gpax:" 3.00 ()",intake:"~30-50 ",fee:"~17,000 /",website:"https://sci.ku.ac.th/web2024/",websiteText:" ",recommendedMajors:["Data Science: GPAX  3.00, Portfolio (), /","Game Development: GPAX  3.00, Portfolio (, Art, Story)"]},{name:"",shortName:". ",subtitle:"  ()",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/7/76/Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg/1200px-Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg.png",fallbackLogo:"https://placehold.co/60x60/F28500/FFFFFF?text=KMUTT&font=bold",gpax:" 3.00",requirements:"IELTS  5.5 / TOEFL iBT  61",intake:"~50 ",fee:"~40,000 /",website:"https://www.kmutt.ac.th/education/curriculum/faculty-of-science/",websiteText:" .",recommendedMajors:["Computer Science (English Program): ","AI & Data Analytics:    AI"]}]},{faculty:" (ICT)",icon:Bs,subtitle:" Portfolio ()",universities:[{name:"",shortName:"ICT Mahidol",subtitle:" ICT ()",logo:"https://upload.wikimedia.org/wikipedia/commons/4/45/Mahidol_U.png",fallbackLogo:"https://placehold.co/60x60/1565C0/FFFFFF?text=MU&font=bold",gpax:" 3.00",requirements:"IELTS  6.0 / TOEFL iBT  64",intake:"~150-200 ",fee:"~60,000 /",website:"https://www.ict.mahidol.ac.th",websiteText:" ICT Mahidol",recommendedMajors:["Cybersecurity: GPAX  3.00, IELTS  6.0, Portfolio ()","Data Science (Track): GPAX  3.25, IELTS  6.0, Portfolio ( Data)"]},{name:"",shortName:"CEDT Chula",subtitle:" (CEDT - Inter)",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",gpax:" 3.50",requirements:"IELTS  6.5 / TOEFL iBT  80, SAT Math  700",intake:"~40-50 ",fee:"~110,000 /",website:"https://www.cp.eng.chula.ac.th/cedt",websiteText:" CEDT Chula",recommendedMajors:["Digital Technology & Innovation: GPAX  3.5, IELTS  6.5, SAT Math  700, Portfolio ()"]},{name:"",shortName:"IT KMITL",subtitle:" (IT KMITL)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/e/e4/Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg/1200px-Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg.png",fallbackLogo:"https://placehold.co/60x60/E36414/FFFFFF?text=KMITL&font=bold",gpax:" 2.75-3.00 ()",intake:"~100-200 ",fee:"~35,000 /",website:"https://www.it.kmitl.ac.th/th/program/",websiteText:" IT KMITL",recommendedMajors:[" (IT): GPAX  2.75, Portfolio"," (Data Science): GPAX  3.00, Portfolio"]}]}],n={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},i={type:"tween",ease:"anticipate",duration:.5},o=["from-blue-500 to-indigo-500","from-green-500 to-teal-500","from-purple-500 to-violet-500","from-orange-500 to-red-500"];return e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:n,transition:i,className:"pt-24 pb-16 px-6",children:[e.jsxs(ge,{children:[e.jsx("title",{children:" - Login Learning"}),e.jsx("meta",{name:"description",content:"  Portfolio ()"})]}),e.jsxs("section",{className:"pt-8 mb-12",children:[e.jsxs(R.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-center mb-10",children:[e.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-4",children:[" ",e.jsx("span",{className:"gradient-text",children:""})]}),e.jsx("p",{className:"text-xl text-gray-700 max-w-3xl mx-auto",children:" ( Portfolio )"})]}),a.map((l,d)=>e.jsxs(R.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:d*.1+.3},viewport:{once:!0},className:"mb-16",children:[e.jsxs("div",{className:`flex items-center mb-6 p-6 rounded-xl bg-gradient-to-r ${o[d%o.length]} shadow-lg`,children:[e.jsx(l.icon,{className:"w-10 h-10 text-white mr-4"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:l.faculty}),e.jsx("p",{className:"text-white/90 text-sm mt-1",children:l.subtitle})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:l.universities.map((c,u)=>{const h=`${d}-${u}`,m=s[h];return e.jsxs(R.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:u*.05},viewport:{once:!0},className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("img",{className:"w-12 h-12 mr-4 rounded-full object-contain bg-white p-1 shadow-sm border-2 border-white",alt:` ${c.name}`,src:c.logo,onError:f=>{f.target.src=c.fallbackLogo}}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:c.shortName}),c.subtitle&&e.jsx("p",{className:"text-blue-600 text-sm font-medium",children:c.subtitle})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-3 text-sm text-gray-700 mb-4",children:[c.gpax&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(On,{className:"w-4 h-4 mr-3 text-blue-500"}),e.jsxs("span",{children:[e.jsx("strong",{children:"GPAX:"})," ",c.gpax]})]}),c.exams&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Bs,{className:"w-4 h-4 mr-3 text-green-500"}),e.jsxs("span",{children:[e.jsx("strong",{children:":"})," ",c.exams]})]}),c.requirements&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Wr,{className:"w-4 h-4 mr-3 text-yellow-500"}),e.jsxs("span",{children:[e.jsx("strong",{children:":"})," ",c.requirements]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"w-4 h-4 mr-3 text-purple-500"}),e.jsxs("span",{children:[e.jsx("strong",{children:":"})," ",c.intake]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Vs,{className:"w-4 h-4 mr-3 text-red-500"}),e.jsxs("span",{children:[e.jsx("strong",{children:":"})," ",c.fee]})]})]}),c.recommendedMajors&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("button",{onClick:()=>r(d,u),className:"flex items-center justify-between w-full p-3 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Me,{className:"w-4 h-4 mr-2 text-indigo-600"}),e.jsx("span",{className:"text-sm font-medium text-indigo-800",children:""})]}),m?e.jsx(Rm,{className:"w-4 h-4 text-indigo-600"}):e.jsx(In,{className:"w-4 h-4 text-indigo-600"})]}),m&&e.jsxs(R.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"mt-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:":"}),e.jsx("ul",{className:"space-y-2 text-xs text-gray-700",children:c.recommendedMajors.map((f,g)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"w-2 h-2 bg-indigo-400 rounded-full mt-1.5 mr-2 flex-shrink-0"}),e.jsx("span",{children:f})]},g))}),c.portfolioRounds&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:" Portfolio:"}),e.jsxs("div",{className:"text-xs text-gray-700 space-y-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-3 h-3 mr-2 text-blue-500"}),e.jsxs("span",{children:[" 1 Portfolio: ",c.portfolioRounds]})]}),c.quotaRounds&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-3 h-3 mr-2 text-green-500"}),e.jsxs("span",{children:[" 2 Quota: ",c.quotaRounds]})]}),c.admissionRounds&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-3 h-3 mr-2 text-orange-500"}),e.jsxs("span",{children:[" 3 Admission: ",c.admissionRounds]})]})]})]})]})]}),c.website&&e.jsxs(T,{onClick:()=>window.open(c.website,"_blank","noopener,noreferrer"),className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white py-3 rounded-xl font-semibold transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(ms,{className:"w-4 h-4 mr-2"}),c.websiteText]})]})]},u)})})]},d)),e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5+a.length*.1},className:"mt-12 text-center p-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:""}),e.jsxs("p",{className:"text-gray-700 text-sm leading-relaxed max-w-4xl mx-auto",children:["  ",e.jsx("strong",{children:"TCAS"})," ",e.jsx("strong",{children:""}),""]}),e.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:"Portfolio"}),e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"GPAX"}),e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium",children:""}),e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-medium",children:""})]})]})]})]})},mu=te.forwardRef(({className:s,...t},r)=>e.jsx("textarea",{className:xt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...t}));mu.displayName="Textarea";const fw=()=>{const{toast:s}=ne(),t={address:"917  75  , ",contacts:[{name:"",phone:"090-969-9578"},{name:"",phone:"083-436-0294"}],email:"info@loginlearning.com",lineGroup:"https://line.me/ti/g/TbTTLXEkRS"},r=[{name:"",address:" ,  10520"},{name:"",address:"400 . 75 ,  10700"},{name:"",address:"165/31   20110"},{name:"",address:"84/48   21000"}],a=o=>{o.preventDefault(),s({title:" ",description:"  "})},n={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},i={type:"tween",ease:"anticipate",duration:.5};return e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:n,transition:i,className:"pt-24 pb-16 px-6",children:[e.jsxs(ge,{children:[e.jsx("title",{children:" - Login Learning"}),e.jsx("meta",{name:"description",content:" Login Learning   "})]}),e.jsxs("section",{className:"pt-8 mb-12",children:[e.jsxs(R.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-center mb-10",children:[e.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-4",children:[" ",e.jsx("span",{className:"gradient-text",children:"Login Learning"})]}),e.jsx("p",{className:"text-xl text-gray-700 max-w-2xl mx-auto",children:"? ? ? !"})]}),e.jsxs("div",{className:"max-w-6xl mx-auto grid lg:grid-cols-2 gap-12",children:[e.jsxs(R.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.7,delay:.4},className:"glass-effect p-8 rounded-xl shadow-xl",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-6",children:""}),e.jsxs("form",{onSubmit:a,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-800 mb-1",children:"-"}),e.jsx(Q,{type:"text",id:"name",placeholder:"  ",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-800 mb-1",children:""}),e.jsx(Q,{type:"email",id:"email",placeholder:" somchai.j@example.com",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-800 mb-1",children:""}),e.jsx(Q,{type:"text",id:"subject",placeholder:"  Arduino",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-800 mb-1",children:""}),e.jsx(mu,{id:"message",rows:"4",placeholder:"...",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),e.jsxs(T,{type:"submit",size:"lg",className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[e.jsx(Dn,{className:"w-5 h-5 mr-2"}),""]})]})]}),e.jsxs(R.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.7,delay:.6},className:"space-y-8",children:[e.jsxs("div",{className:"glass-effect p-8 rounded-xl shadow-xl",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-6",children:""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(fs,{className:"w-6 h-6 text-blue-400 mt-1 shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),e.jsx("p",{className:"text-gray-700",children:t.address})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(zt,{className:"w-6 h-6 text-green-400 mt-1 shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),t.contacts.map(o=>e.jsxs("p",{className:"text-gray-700",children:[o.name,": ",o.phone]},o.name))]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ht,{className:"w-6 h-6 text-yellow-400 mt-1 shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),e.jsx("a",{href:`mailto:${t.email}`,className:"text-gray-700 hover:text-yellow-600 transition-colors",children:t.email})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ae,{className:"w-6 h-6 text-teal-400 mt-1 shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Line Group"}),e.jsx("a",{href:t.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"text-gray-700 hover:text-teal-600 transition-colors underline",children:" Line"})]})]})]})]}),e.jsxs("div",{className:"glass-effect p-8 rounded-xl shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:""}),e.jsx("div",{className:"space-y-3",children:r.map(o=>e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(fs,{className:"w-5 h-5 text-purple-400 mt-1 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-md font-medium text-gray-800",children:o.name}),e.jsx("p",{className:"text-sm text-gray-600",children:o.address})]})]},o.name))})]})]})]})]}),e.jsxs("section",{className:"mt-16",children:[e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.7,delay:.8},className:"text-center mb-6",children:e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:""})}),e.jsx(R.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.7,delay:1},className:"glass-effect rounded-xl p-4 shadow-xl h-96 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-700 text-lg",children:"  ! "})})]})]})},xw=()=>{const[s,t]=x.useState(""),[r,a]=x.useState(""),[n,i]=x.useState(!1),[o,l]=x.useState(""),{signInWithPassword:d,signInWithGoogle:c,isSupabaseConnected:u}=Ae(),h=st(),{toast:m}=ne(),f=async v=>{if(v.preventDefault(),l(""),!u){m({title:"  Supabase",description:" Supabase ",variant:"destructive"});return}i(!0);const{error:w}=await d(s,r);i(!1),w?(l(w.message),m({title:"",description:w.message,variant:"destructive"})):(m({title:"!"}),h("/dashboard"))},g=async()=>{if(l(""),!u){m({title:"  Supabase",description:" Supabase  Google",variant:"destructive"});return}i(!0);const{error:v}=await c();i(!1),v&&(l(v.message),m({title:" Google ",description:v.message,variant:"destructive"}))},y={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},p={type:"tween",ease:"anticipate",duration:.5};return e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:y,transition:p,className:"min-h-screen flex items-center justify-center pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs(ge,{children:[e.jsx("title",{children:" - Login Learning"}),e.jsx("meta",{name:"description",content:" Login Learning "})]}),e.jsxs("div",{className:"max-w-md w-full space-y-8 glass-effect p-10 rounded-xl shadow-2xl",children:[e.jsxs("div",{children:[e.jsx(R.h2,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mt-6 text-center text-4xl font-extrabold text-gray-900",children:""}),e.jsxs(R.p,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"mt-2 text-center text-sm text-gray-700",children:[""," ",e.jsx(J,{to:"/signup",className:"font-medium text-blue-400 hover:text-blue-300",children:""})]})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[o&&e.jsxs(R.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 p-3 rounded-md flex items-center text-red-300 text-sm",children:[e.jsx(se,{className:"w-5 h-5 mr-2"}),o]}),e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs(R.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.3},children:[e.jsx("label",{htmlFor:"email-address",className:"sr-only",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-t-md",placeholder:"",value:s,onChange:v=>t(v.target.value)}),e.jsx(ht,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),e.jsxs(R.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.4},children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-b-md",placeholder:"",value:r,onChange:v=>a(v.target.value)}),e.jsx(St,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]})]}),e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},className:"flex items-center justify-between",children:e.jsx("div",{className:"text-sm",children:e.jsx("button",{onClick:()=>m({title:" "}),className:"font-medium text-blue-400 hover:text-blue-300",children:"?"})})}),e.jsx(R.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.6},children:e.jsxs(T,{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-gray-800 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:n||!u,children:[e.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:e.jsx(Bm,{className:"h-5 w-5 text-blue-300 group-hover:text-blue-200","aria-hidden":"true"})}),n?"...":""]})})]}),e.jsxs(R.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.7},className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-gray-800 text-gray-400 rounded-md",children:""})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(T,{onClick:g,variant:"outline",className:"w-full flex justify-center py-3 px-4 border-gray-300 text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:n||!u,children:[e.jsx("svg",{className:"w-5 h-5 mr-2","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:e.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.7 512 244 512 110.3 512 0 401.7 0 265.2S110.3 18.3 244 18.3c67.4 0 120.9 24.8 160.4 60.3l-64.8 63.1c-20.1-18.9-48.4-30.8-89.3-30.8-70.1 0-128.2 57.2-128.2 128.2s58.1 128.2 128.2 128.2c80.3 0 110.1-58.8 113.8-87.9H244v-74.6h236.7c2.3 12.7 3.8 25.9 3.8 39.9z"})})," Google"]})})]}),!u&&e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-4 text-center text-yellow-400 text-sm p-3 bg-yellow-500/10 rounded-md",children:" Supabase !  Supabase  Login"})]})]})},pw=()=>{const[s,t]=x.useState(""),[r,a]=x.useState(""),[n,i]=x.useState(""),[o,l]=x.useState(""),[d,c]=x.useState(!1),[u,h]=x.useState(""),{signUpWithPassword:m,signInWithGoogle:f,isSupabaseConnected:g}=Ae(),y=st(),{toast:p}=ne(),v=async N=>{if(N.preventDefault(),h(""),!g){p({title:"  Supabase",description:" Supabase ",variant:"destructive"});return}if(r!==n){h(""),p({title:"",description:"",variant:"destructive"});return}c(!0);const{error:P}=await m(s,r,o);c(!1),P?(h(P.message),p({title:"",description:P.message,variant:"destructive"})):(p({title:"!",description:""}),y("/login"))},w=async()=>{if(h(""),!g){p({title:"  Supabase",description:" Supabase  Google",variant:"destructive"});return}c(!0);const{error:N}=await f();c(!1),N&&(h(N.message),p({title:" Google ",description:N.message,variant:"destructive"}))},b={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},_={type:"tween",ease:"anticipate",duration:.5};return e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:b,transition:_,className:"min-h-screen flex items-center justify-center pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs(ge,{children:[e.jsx("title",{children:" - Login Learning"}),e.jsx("meta",{name:"description",content:" Login Learning "})]}),e.jsxs("div",{className:"max-w-md w-full space-y-8 glass-effect p-10 rounded-xl shadow-2xl",children:[e.jsxs("div",{children:[e.jsx(R.h2,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mt-6 text-center text-4xl font-extrabold text-gray-900",children:""}),e.jsxs(R.p,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"mt-2 text-center text-sm text-gray-700",children:[""," ",e.jsx(J,{to:"/login",className:"font-medium text-blue-400 hover:text-blue-300",children:""})]})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:v,children:[u&&e.jsxs(R.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 p-3 rounded-md flex items-center text-red-300 text-sm",children:[e.jsx(se,{className:"w-5 h-5 mr-2"}),u]}),e.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[e.jsxs(R.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.3},children:[e.jsx("label",{htmlFor:"full-name",className:"sr-only",children:"-"}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{id:"full-name",name:"fullName",type:"text",autoComplete:"name",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"-",value:o,onChange:N=>l(N.target.value)}),e.jsx(tt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),e.jsxs(R.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.4},children:[e.jsx("label",{htmlFor:"email-address",className:"sr-only",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"",value:s,onChange:N=>t(N.target.value)}),e.jsx(ht,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),e.jsxs(R.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.5},children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:" ( 6 )",value:r,onChange:N=>a(N.target.value)}),e.jsx(St,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),e.jsxs(R.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.6},children:[e.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{id:"confirm-password",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"",value:n,onChange:N=>i(N.target.value)}),e.jsx(St,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]})]}),e.jsx(R.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.7},children:e.jsxs(T,{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-gray-800 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:d||!g,children:[e.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:e.jsx(Lr,{className:"h-5 w-5 text-blue-300 group-hover:text-blue-200","aria-hidden":"true"})}),d?"...":""]})})]}),e.jsxs(R.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.8},className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-gray-800 text-gray-400 rounded-md",children:""})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(T,{onClick:w,variant:"outline",className:"w-full flex justify-center py-3 px-4 border-gray-300 text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:d||!g,children:[e.jsx("svg",{className:"w-5 h-5 mr-2","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:e.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.7 512 244 512 110.3 512 0 401.7 0 265.2S110.3 18.3 244 18.3c67.4 0 120.9 24.8 160.4 60.3l-64.8 63.1c-20.1-18.9-48.4-30.8-89.3-30.8-70.1 0-128.2 57.2-128.2 128.2s58.1 128.2 128.2 128.2c80.3 0 110.1-58.8 113.8-87.9H244v-74.6h236.7c2.3 12.7 3.8 25.9 3.8 39.9z"})})," Google"]})})]}),!g&&e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"mt-4 text-center text-yellow-400 text-sm p-3 bg-yellow-500/10 rounded-md",children:" Supabase !  Supabase "})]})]})},gw=()=>{var d;const{user:s,isAdmin:t}=Ae(),{toast:r}=ne(),a=st(),n=(c,u)=>{u?a(u):r({title:`  "${c}" `,description:" ! "})},i={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};if(!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center pt-24 pb-12 px-4",children:e.jsx("p",{className:"text-green-900 text-xl",children:"..."})});const o=[{name:"",icon:Ka,color:"blue",description:"  ",path:"/admin/courses",action:"manage-courses"},{name:"",icon:ae,color:"orange",description:"",path:"/admin/users",action:"manage-users"}],l=[{name:"",icon:fe,color:"blue",description:"",path:"/courses"},{name:"",icon:Za,color:"green",description:"",path:"/settings"},{name:"",icon:Ka,color:"purple",description:"",path:"/admissions"},{name:"",icon:Ql,color:"orange",description:"",path:null},{name:"",icon:Mn,color:"yellow",description:"",path:null}];return t&&l.push({name:"",icon:zs,color:"red",description:", , ",path:"/admin",gridSpan:"lg:col-span-2"}),e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:i,className:"container mx-auto px-4 py-12",children:[e.jsxs(ge,{children:[e.jsx("title",{children:" - Login Learning"}),e.jsx("meta",{name:"description",content:" Login Learning "})]}),e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs(R.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mb-10",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-green-900",children:[", ",e.jsx("span",{className:"gradient-text",children:((d=s.user_metadata)==null?void 0:d.full_name)||s.email}),"!"]}),t&&e.jsx("p",{className:"text-yellow-400 text-md sm:text-lg mt-2",children:""})]}),t&&e.jsxs(R.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"mb-12",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Fn,{className:"w-6 h-6 text-yellow-500 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-green-900",children:""})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:o.map((c,u)=>e.jsx(R.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3,delay:.25+u*.05},className:"group bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg p-4 hover:bg-white/20 transition-all duration-300 cursor-pointer hover:scale-105",onClick:()=>n(c.name,c.path),children:e.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[e.jsx("div",{className:`p-3 rounded-full bg-${c.color}-100 group-hover:bg-${c.color}-200 transition-colors`,children:e.jsx(c.icon,{className:`w-6 h-6 text-${c.color}-600`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-900 text-sm",children:c.name}),e.jsx("p",{className:"text-green-700 text-xs mt-1",children:c.description})]})]})},c.name))})]}),e.jsxs(R.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:t?.4:.2},children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(zs,{className:"w-6 h-6 text-blue-500 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-green-900",children:""})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((c,u)=>e.jsxs(R.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,delay:(t?.45:.25)+u*.05},className:`glass-effect p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 ease-in-out transform hover:-translate-y-1 cursor-pointer ${c.gridSpan||""}`,onClick:()=>n(c.name,c.path),children:[e.jsxs("div",{className:`flex items-center text-${c.color}-400 mb-3`,children:[e.jsx(c.icon,{className:"w-7 h-7 mr-3"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-green-900",children:c.name})]}),e.jsx("p",{className:"text-green-700 text-sm mb-4",children:c.description}),e.jsx(T,{variant:"outline",className:`w-full border-${c.color}-500/60 text-${c.color}-400 hover:bg-${c.color}-500/20`,children:c.path?c.name===""?"":`${c.name}`:""})]},c.name))})]})]})]})},yw=()=>{var f,g,y;const{user:s,isAdmin:t}=Ae(),{toast:r}=ne(),[a,n]=te.useState(!1),[i,o]=te.useState(((f=s==null?void 0:s.user_metadata)==null?void 0:f.full_name)||""),[l,d]=te.useState((s==null?void 0:s.email)||""),c=()=>{r({title:" ",description:"! "}),n(!1)},u=p=>{r({title:`  "${p}" `,description:" ! "})},h={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},m={type:"tween",ease:"anticipate",duration:.5};return s?e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:h,transition:m,className:"container mx-auto px-4 py-12",children:[e.jsxs(ge,{children:[e.jsx("title",{children:" - Login Learning"}),e.jsx("meta",{name:"description",content:" Login Learning"})]}),e.jsxs(R.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mb-10 text-center",children:[e.jsxs("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900",children:[" ",e.jsx("span",{className:"gradient-text",children:((g=s.user_metadata)==null?void 0:g.full_name)||s.email})]}),t&&e.jsx("p",{className:"text-yellow-400 mt-2",children:": "})]}),e.jsxs("div",{className:"max-w-2xl mx-auto glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:""}),e.jsxs(T,{variant:"outline",onClick:()=>n(!a),className:"text-gray-700 border-gray-400 hover:bg-gray-100 hover:text-gray-900",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"}),a?"":""]})]}),a?e.jsxs("form",{onSubmit:p=>{p.preventDefault(),c()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"-"}),e.jsxs("div",{className:"relative",children:[e.jsx(tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),e.jsx(Q,{id:"fullName",type:"text",value:i,onChange:p=>o(p.target.value),className:"pl-10 bg-white border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-200"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),e.jsxs("div",{className:"relative",children:[e.jsx(ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),e.jsx(Q,{id:"email",type:"email",value:l,onChange:p=>d(p.target.value),disabled:!0,className:"pl-10 bg-gray-100 border-gray-300 text-gray-600 cursor-not-allowed"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:""})]}),e.jsx(T,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:""})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(tt,{className:"w-5 h-5 mr-3 text-[#667eea]"}),e.jsxs("span",{className:"text-gray-800",children:["-: ",((y=s.user_metadata)==null?void 0:y.full_name)||""]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ht,{className:"w-5 h-5 mr-3 text-[#667eea]"}),e.jsxs("span",{className:"text-gray-800",children:[": ",s.email]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qa,{className:"w-5 h-5 mr-3 text-[#667eea]"}),e.jsx("span",{className:"text-gray-800",children:": "})]})]})]}),e.jsxs("div",{className:"max-w-2xl mx-auto mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-effect p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>u(""),children:[e.jsxs("div",{className:"flex items-center text-blue-300 mb-3",children:[e.jsx(fe,{className:"w-7 h-7 mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""})]}),e.jsx("p",{className:"text-gray-700 text-sm",children:""})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-effect p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>u(""),children:[e.jsxs("div",{className:"flex items-center text-green-300 mb-3",children:[e.jsx(Ql,{className:"w-7 h-7 mr-3"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""})]}),e.jsx("p",{className:"text-gray-700 text-sm",children:""})]})]})]}):e.jsx("div",{className:"text-center py-10",children:"..."})},bw=async(s=null)=>{try{let t=s;if(!t){const{data:{user:n},error:i}=await E.auth.getUser();if(i||!n)throw new Error("User not authenticated");t=n.id}const{data:r,error:a}=await E.from("user_profiles").select("*").eq("user_id",t).single();if(a&&a.code!=="PGRST116")throw a;return r?{data:r,error:null}:{data:{user_id:t,full_name:"",age:null,school_name:"",grade_level:"",phone:"",interested_fields:[],bio:"",avatar_url:""},error:null}}catch(t){return console.error("Error fetching user profile:",t),{data:null,error:t}}},vw=async s=>{try{const{data:{user:t},error:r}=await E.auth.getUser();if(r||!t)throw new Error("User not authenticated");const{data:a,error:n}=await E.from("user_profiles").update(s).eq("user_id",t.id).select().single();if(n)throw n;return{data:a,error:null}}catch(t){return console.error("Error updating user profile:",t),{data:null,error:t}}},ww=async()=>{try{const{data:s,error:t}=await E.from("user_profiles").select(`
        *,
        enrollments(count),
        achievements(count)
      `).order("created_at",{ascending:!1});return t?(console.error("Error fetching user profiles:",t),{data:[],error:t}):{data:s.map(a=>{var n,i,o,l;return{...a,enrollment_count:((i=(n=a.enrollments)==null?void 0:n[0])==null?void 0:i.count)||0,achievement_count:((l=(o=a.achievements)==null?void 0:o[0])==null?void 0:l.count)||0}}),error:null}}catch(s){return console.error("Error fetching users for admin:",s),{data:[],error:s}}},jw=async(s,t)=>{try{const{data:r,error:a}=await E.from("user_profiles").update({role:t}).eq("user_id",s).select().single();if(a)throw a;return{data:r,error:null}}catch(r){return console.error("Error updating user role:",r),{data:null,error:r}}},Nw=async()=>{try{const{data:{user:s}}=await E.auth.getUser();if(!s)throw new Error("User not authenticated");const{data:t,error:r}=await bw(s.id);if(r)throw r;return{data:t,error:null}}catch(s){return console.error("Error getting profile settings:",s),{data:null,error:s}}},_w=async s=>{try{const{data:{user:t}}=await E.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:r,error:a}=await vw(s);if(a)throw a;return{data:r,error:null}}catch(t){return console.error("Error saving profile settings:",t),{data:null,error:t}}},kw=async()=>{try{const{data:{user:s}}=await E.auth.getUser();if(!s)throw new Error("User not authenticated");const{error:t}=await E.from("user_settings").delete().eq("user_id",s.id);if(t)throw t;return{data:!0,error:null}}catch(s){return console.error("Error deleting user settings:",s),{data:null,error:s}}},Sw=()=>{const{user:s}=Ae(),{toast:t}=ne(),[r,a]=x.useState(!1),[n,i]=x.useState(!0);x.useState("profile");const[o,l]=x.useState(!1),[d,c]=x.useState({full_name:"",email:"",phone:"",bio:"",grade_level:"",school_name:"",age:"",interested_fields:[],avatar_url:""});x.useState({theme:"light",language:"th",compact_mode:!1,animations_enabled:!0}),x.useState({email_notifications:!0,push_notifications:!0,course_updates:!0,assignment_reminders:!0,forum_notifications:!1,sound_enabled:!0}),x.useEffect(()=>{(async()=>{var p;if(s){i(!0);try{const v=await Nw();v.data?c({full_name:v.data.full_name||((p=s.user_metadata)==null?void 0:p.full_name)||"",email:s.email||"",phone:v.data.phone||"",bio:v.data.bio||"",grade_level:v.data.grade_level||"",school_name:v.data.school_name||"",age:v.data.age||"",interested_fields:v.data.interested_fields||[],avatar_url:v.data.avatar_url||""}):c(w=>{var b;return{...w,email:s.email||"",full_name:((b=s.user_metadata)==null?void 0:b.full_name)||""}}),v.data&&Object.keys(v.data).length>0&&t({title:"",description:""})}catch(v){console.error("Error loading settings:",v),t({title:"",description:"",variant:"destructive"})}finally{i(!1)}}})()},[s,t]);const u=async y=>{const p=y.target.files[0];if(p){l(!0);try{const{data:v,error:w}=await yv(p);if(w)throw new Error(w.message||"");c(b=>({...b,avatar_url:v.publicUrl})),t({title:"",description:""}),await h()}catch(v){console.error("Error uploading profile image:",v),t({title:"",description:v.message,variant:"destructive"})}finally{l(!1),y.target.value=""}}},h=async()=>{if(s){a(!0);try{const{email:y,...p}=d,{error:v}=await _w(p);if(v)throw new Error(v);t({title:"",description:""})}catch(y){console.error("Error saving profile:",y),t({title:"",description:`: ${y.message}`,variant:"destructive"})}finally{a(!1)}}},m=async()=>{var y;if(s&&window.confirm("?")){a(!0);try{const{error:p}=await kw();if(p)throw new Error(p);c({full_name:((y=s.user_metadata)==null?void 0:y.full_name)||"",email:s.email||"",phone:"",bio:"",grade_level:"",school_name:"",age:"",interested_fields:[],avatar_url:""}),t({title:"",description:""})}catch(p){console.error("Error clearing settings:",p),t({title:"",description:`: ${p.message}`,variant:"destructive"})}finally{a(!1)}}};if(n)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ze,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),e.jsx("p",{className:"text-gray-600",children:"..."})]})});const f=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:[d.avatar_url?e.jsx("img",{src:d.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx(tt,{className:"w-8 h-8 text-gray-400"}),o&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center rounded-full",children:e.jsx(Ze,{className:"w-6 h-6 text-white animate-spin"})})]}),e.jsx("input",{type:"file",id:"profile-image-upload",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:u,className:"hidden",disabled:o}),e.jsx(T,{size:"sm",variant:"outline",className:"absolute -bottom-1 -right-1 rounded-full w-8 h-8 p-0",onClick:()=>{var y;return(y=document.getElementById("profile-image-upload"))==null?void 0:y.click()},disabled:o,children:o?e.jsx(Ze,{className:"w-4 h-4 animate-spin"}):e.jsx(Em,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:""}),e.jsx("p",{className:"text-sm text-gray-500",children:" JPG, PNG  2MB"}),o&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"-"}),e.jsx("input",{type:"text",value:d.full_name||"",onChange:y=>c({...d,full_name:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"email",value:d.email||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed",placeholder:""}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:" "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"tel",value:d.phone||"",onChange:y=>c({...d,phone:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"number",value:d.age||"",onChange:y=>c({...d,age:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"",min:"1",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:d.grade_level||"",onChange:y=>c({...d,grade_level:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:""}),e.jsx("option",{value:".1",children:" 1"}),e.jsx("option",{value:".2",children:" 2"}),e.jsx("option",{value:".3",children:" 3"}),e.jsx("option",{value:".4",children:" 4"}),e.jsx("option",{value:".5",children:" 5"}),e.jsx("option",{value:".6",children:" 6"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"text",value:d.school_name||"",onChange:y=>c({...d,school_name:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:d.bio||"",onChange:y=>c({...d,bio:y.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"..."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(T,{onClick:h,disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),""]})})})]})}),g=()=>f();return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:""}),e.jsx("p",{className:"text-gray-600 mt-2",children:" ()"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx(T,{variant:"outline",onClick:m,disabled:r,className:"text-red-600 border-red-300 hover:bg-red-50 hover:border-red-400",children:r?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):""})})]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:g()})]})})},Cw=async()=>{try{console.log("Fetching dashboard statistics...");const{count:s,error:t}=await E.from("user_profiles").select("*",{count:"exact",head:!0});t&&console.warn("Could not fetch user count:",t);const r=new Date;r.setDate(r.getDate()-7);const{count:a,error:n}=await E.from("user_profiles").select("*",{count:"exact",head:!0}).gte("created_at",r.toISOString());n&&console.warn("Could not fetch new users count:",n);const{count:i,error:o}=await E.from("courses").select("*",{count:"exact",head:!0});o&&console.warn("Could not fetch courses count:",o);const{count:l,error:d}=await E.from("courses").select("*",{count:"exact",head:!0}).eq("is_active",!0);d&&console.warn("Could not fetch active courses count:",d);const{count:c,error:u}=await E.from("projects").select("*",{count:"exact",head:!0});u&&console.warn("Could not fetch projects count:",u);const{count:h,error:m}=await E.from("projects").select("*",{count:"exact",head:!0}).eq("is_approved",!0);m&&console.warn("Could not fetch approved projects count:",m);const{count:f,error:g}=await E.from("projects").select("*",{count:"exact",head:!0}).eq("is_approved",!1);g&&console.warn("Could not fetch pending projects count:",g);const{count:y,error:p}=await E.from("enrollments").select("*",{count:"exact",head:!0});p&&console.warn("Could not fetch enrollments count:",p);const{count:v,error:w}=await E.from("enrollments").select("*",{count:"exact",head:!0}).eq("is_active",!0);w&&console.warn("Could not fetch active enrollments count:",w);const b=s>0?Math.round(a/s*100):0,{data:_,error:N}=await E.from("projects").select("view_count");let P=0;!N&&_&&(P=_.reduce((k,O)=>k+(O.view_count||0),0));const j={totalUsers:s||0,activeUsers:Math.round((s||0)*.15),newUsersToday:Math.round((a||0)/7),userGrowth:b,newUsersWeek:a||0,totalCourses:i||0,activeCourses:l||0,draftCourses:(i||0)-(l||0),courseEnrollments:y||0,totalProjects:c||0,approvedProjects:h||0,pendingApproval:f||0,featuredProjects:Math.round((h||0)*.2),projectViews:P,systemUptime:99.8,serverLoad:Math.round(Math.random()*30+40),storageUsed:2.4,activeSessions:Math.round((s||0)*.1)};return console.log("Dashboard stats calculated:",j),{data:j,error:null}}catch(s){return console.error("Error fetching dashboard stats:",s),{data:{totalUsers:0,activeUsers:0,newUsersToday:0,userGrowth:0,totalCourses:0,activeCourses:0,draftCourses:0,courseEnrollments:0,totalProjects:0,approvedProjects:0,pendingApproval:0,featuredProjects:0,projectViews:0,systemUptime:0,serverLoad:0,storageUsed:0,activeSessions:0},error:s}}},Tw=async()=>{try{const s=[],{data:t,error:r}=await E.from("user_profiles").select("full_name, email, created_at").order("created_at",{ascending:!1}).limit(5);!r&&t&&t.forEach(d=>{s.push({type:"user_registration",title:"",description:`${d.full_name||d.email} `,timestamp:d.created_at,icon:"user-plus"})});const{data:a,error:n}=await E.from("courses").select("title, updated_at").order("updated_at",{ascending:!1}).limit(3);!n&&a&&a.forEach(d=>{s.push({type:"course_update",title:"",description:`"${d.title}" `,timestamp:d.updated_at,icon:"book-open"})});const{data:i,error:o}=await E.from("projects").select("title, created_at").order("created_at",{ascending:!1}).limit(3);return!o&&i&&i.forEach(d=>{s.push({type:"project_submission",title:"",description:`"${d.title}" `,timestamp:d.created_at,icon:"folder-plus"})}),{data:s.sort((d,c)=>new Date(c.timestamp)-new Date(d.timestamp)).slice(0,10),error:null}}catch(s){return console.error("Error fetching recent activity:",s),{data:[],error:s}}},Ew=async()=>{try{const{error:s}=await E.from("user_profiles").select("id",{count:"exact",head:!0}).limit(1),t=s?"error":"healthy";return{data:{database:{status:t,responseTime:Math.round(Math.random()*50+10)},storage:{status:"healthy",usage:45},api:{status:"healthy",responseTime:Math.round(Math.random()*100+50)},overall:t==="healthy"?"healthy":"warning"},error:null}}catch(s){return console.error("Error fetching system health:",s),{data:{database:{status:"error",responseTime:0},storage:{status:"unknown",usage:0},api:{status:"error",responseTime:0},overall:"error"},error:s}}},Pw=()=>{const{user:s}=Ae(),{toast:t}=ne(),r=st(),[a,n]=x.useState("overview"),[i,o]=x.useState(null),[l,d]=x.useState(!0),[c,u]=x.useState([]),[h,m]=x.useState(null);x.useEffect(()=>{(async()=>{try{d(!0);const{data:_,error:N}=await Cw();N?(console.error("Error loading dashboard stats:",N),t({title:"",description:"",variant:"destructive"})):o(_);const{data:P,error:j}=await Tw();j||u(P);const{data:k,error:O}=await Ew();O||m(k)}catch(_){console.error("Error loading dashboard:",_),t({title:"",description:"",variant:"destructive"})}finally{d(!1)}})()},[t]);const f=[{id:"overview",label:"",icon:Us},{id:"users",label:"",icon:ae},{id:"courses",label:"",icon:Ut},{id:"projects",label:"",icon:Pe},{id:"customize",label:"",icon:qe}],g=i?[{title:"",value:i.totalUsers.toLocaleString(),change:`+${i.userGrowth}%`,changeType:"positive",subtitle:`${i.activeUsers} `,icon:ae,color:"blue",path:"/admin/users"},{title:"",value:i.totalCourses,change:`${i.activeCourses} `,changeType:"neutral",subtitle:`${i.courseEnrollments.toLocaleString()} `,icon:Ut,color:"green",path:"/admin/courses"},{title:"",value:i.totalProjects,change:`${i.featuredProjects} `,changeType:"neutral",subtitle:`${i.projectViews.toLocaleString()} `,icon:Pe,color:"purple",path:"/admin/projects"},{title:"",value:`${i.systemUptime}%`,change:`${i.serverLoad}% load`,changeType:i.serverLoad>80?"negative":"positive",subtitle:`${i.activeSessions} sessions`,icon:Qm,color:"emerald"}]:[],y=i?[{title:"",value:i.newUsersToday,icon:Lr,color:"bg-blue-50 text-blue-600",trend:"up"},{title:"",value:i.draftCourses,icon:me,color:"bg-orange-50 text-orange-600",trend:"neutral"},{title:"",value:i.pendingApproval,icon:kt,color:"bg-yellow-50 text-yellow-600",trend:"neutral"},{title:"",value:`${i.storageUsed}GB`,icon:Mm,color:"bg-purple-50 text-purple-600",trend:"up"}]:[],p=()=>l?e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[1,2,3,4].map(b=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"w-16 h-6 bg-gray-200 rounded-full"})]}),e.jsx("div",{className:"w-24 h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"w-16 h-8 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"w-20 h-4 bg-gray-200 rounded"})]})},b))}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"w-32 h-6 bg-gray-200 rounded mb-6"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(b=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg mx-auto mb-2"}),e.jsx("div",{className:"w-16 h-4 bg-gray-200 rounded mx-auto mb-1"}),e.jsx("div",{className:"w-12 h-6 bg-gray-200 rounded mx-auto"})]},b))})]})})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:g.map((b,_)=>e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:_*.1},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>b.path&&r(b.path),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg bg-${b.color}-100`,children:e.jsx(b.icon,{className:`w-6 h-6 text-${b.color}-600`})}),e.jsx("div",{className:`text-sm font-medium px-2 py-1 rounded-full ${b.changeType==="positive"?"bg-green-100 text-green-800":b.changeType==="negative"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:b.change})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:b.title}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:b.value}),e.jsx("p",{className:"text-sm text-gray-500",children:b.subtitle})]}),b.path&&e.jsxs("div",{className:"mt-4 flex items-center text-sm text-blue-600",children:[e.jsx("span",{children:""}),e.jsx(ke,{className:"w-4 h-4 ml-1"})]})]},b.title))}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(_m,{className:"w-5 h-5 mr-2 text-blue-600"}),""]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:y.map((b,_)=>e.jsxs(R.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.5+_*.1},className:"text-center p-4 rounded-lg border border-gray-100 hover:border-gray-200 transition-colors",children:[e.jsx("div",{className:`inline-flex p-3 rounded-full ${b.color} mb-3`,children:e.jsx(b.icon,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:b.value}),e.jsx("p",{className:"text-sm text-gray-600",children:b.title})]},b.title))})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"xl:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(me,{className:"w-5 h-5 mr-2 text-green-600"}),""]}),e.jsx(T,{variant:"outline",size:"sm",children:""})]}),e.jsx("div",{className:"space-y-4",children:c.length>0?c.map((b,_)=>e.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+_*.1},className:"flex items-center space-x-4 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:`p-2 rounded-full ${b.type==="user_registration"?"bg-blue-100 text-blue-600":b.type==="course_update"?"bg-green-100 text-green-600":b.type==="project_submission"?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600"}`,children:[b.icon==="user-plus"&&e.jsx(ae,{className:"w-4 h-4"}),b.icon==="book-open"&&e.jsx(Ut,{className:"w-4 h-4"}),b.icon==="folder-plus"&&e.jsx(Pe,{className:"w-4 h-4"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:b.title}),e.jsx("p",{className:"text-sm text-gray-600",children:b.description})]}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(b.timestamp).toLocaleString("th-TH")})]},_)):e.jsx("div",{className:"text-center py-4 text-gray-500",children:""})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(On,{className:"w-5 h-5 mr-2 text-purple-600"}),""]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(J,{to:"/admin/users",children:e.jsxs(T,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Lr,{className:"w-4 h-4 mr-2"}),""]})}),e.jsx(J,{to:"/admin/courses",children:e.jsxs(T,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Ar,{className:"w-4 h-4 mr-2"}),""]})}),e.jsx(J,{to:"/admin/projects",children:e.jsxs(T,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),""]})}),e.jsxs(T,{variant:"outline",className:"w-full justify-start",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),""]}),e.jsxs(T,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),""]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:""}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-4 h-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-green-600",children:""})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[e.jsx("span",{className:"text-gray-600",children:""}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(cf,{className:"w-4 h-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-green-600",children:[(i==null?void 0:i.activeSessions)||0," sessions"]})]})]})]})]})]})]}),v=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(Ut,{className:"w-5 h-5 mr-2 text-blue-600"}),""]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{title:"",desc:"",icon:Pi,color:"purple"},{title:"",desc:"",icon:Fe,color:"green"},{title:"",desc:"",icon:Li,color:"orange"},{title:"",desc:"",icon:qe,color:"gray"},{title:"",desc:"",icon:xs,color:"blue"},{title:"",desc:"",icon:ke,color:"indigo"}].map(b=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(b.icon,{className:`w-5 h-5 text-${b.color}-600`}),e.jsx("h3",{className:"font-medium text-gray-900",children:b.title})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:b.desc}),e.jsx(T,{variant:"outline",size:"sm",className:"w-full",children:""})]},b.title))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(Pe,{className:"w-5 h-5 mr-2 text-purple-600"}),""]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{title:"",desc:"",icon:Pi,color:"purple"},{title:"",desc:"",icon:Fe,color:"green"},{title:"",desc:"",icon:Li,color:"orange"},{title:"",desc:"",icon:qe,color:"gray"},{title:"",desc:"",icon:xs,color:"blue"},{title:"",desc:"",icon:ke,color:"indigo"}].map(b=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(b.icon,{className:`w-5 h-5 text-${b.color}-600`}),e.jsx("h3",{className:"font-medium text-gray-900",children:b.title})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:b.desc}),e.jsx(T,{variant:"outline",size:"sm",className:"w-full",children:""})]},b.title))})]})]}),w=()=>{switch(a){case"overview":return p();case"users":return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),e.jsx("p",{className:"text-gray-600 mb-4",children:""}),e.jsx(J,{to:"/admin/users",children:e.jsx(T,{children:""})})]});case"courses":return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),e.jsx("p",{className:"text-gray-600 mb-4",children:""}),e.jsx(J,{to:"/admin/courses",children:e.jsx(T,{children:""})})]});case"projects":return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),e.jsx("p",{className:"text-gray-600 mb-4",children:""}),e.jsx(J,{to:"/admin/projects",children:e.jsx(T,{children:""})})]});case"customize":return v();default:return p()}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs(ge,{children:[e.jsx("title",{children:" - Login Learning"}),e.jsx("meta",{name:"description",content:" Login Learning"})]}),e.jsxs("div",{className:"w-full mx-auto",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 p-3 rounded-xl",children:e.jsx(ef,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:""}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[", ",s==null?void 0:s.email]})]}),e.jsx("div",{className:"ml-auto",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{children:new Date().toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})})]})})]}),e.jsx("div",{className:"flex space-x-1 border-b border-gray-200",children:f.map(b=>{const _=b.icon;return e.jsx("button",{onClick:()=>n(b.id),className:`px-6 py-3 text-sm font-medium rounded-t-lg transition-all duration-200 ${a===b.id?"bg-blue-50 text-blue-700 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:b.label})]})},b.id)})})]})}),e.jsx("div",{className:"px-6 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:w()},a)})})]})]})},Aw=()=>{const{toast:s}=ne(),t=st(),[r,a]=te.useState(""),[n,i]=te.useState([]),[o,l]=te.useState(!0);te.useEffect(()=>{(async()=>{var f;try{l(!0);const{data:g,error:y}=await ww();y&&(console.error("Database error:",y),y.code!=="PGRST200"&&s({title:"",description:"",variant:"destructive"})),i(g||[])}catch(g){console.error("Error loading users:",g),(f=g.message)!=null&&f.includes("relationship")||s({title:"",description:"",variant:"destructive"})}finally{l(!1)}})()},[s]);const d=async(m,f)=>{try{const{data:g,error:y}=await jw(m,f);if(y)throw y;i(p=>p.map(v=>v.user_id===m?{...v,role:f}:v)),s({title:"",description:` ${f} `})}catch(g){console.error("Error updating user role:",g),s({title:"",description:`: ${g.message}`,variant:"destructive"})}},c=m=>{s({title:`  "${m}" `,description:" ! "})},u=n.filter(m=>{var f,g;return((f=m.full_name)==null?void 0:f.toLowerCase().includes(r.toLowerCase()))||!1||((g=m.email)==null?void 0:g.toLowerCase().includes(r.toLowerCase()))||!1}),h={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};return e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:h,className:"container mx-auto px-4 py-12",children:[e.jsxs(ge,{children:[e.jsx("title",{children:" -  Login Learning"}),e.jsx("meta",{name:"description",content:" Login Learning"})]}),e.jsxs(R.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"flex flex-col sm:flex-row justify-between items-center mb-10",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>t("/admin"),className:"mr-4 text-gray-600 hover:text-gray-900",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),""]}),e.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-teal-900 mb-4 sm:mb-0",children:[e.jsx(ae,{className:"inline-block w-8 h-8 mr-3 text-[#667eea]"}),""]})]}),e.jsxs(T,{onClick:()=>c(""),className:"bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-gray-800",children:[e.jsx(Lr,{className:"w-5 h-5 mr-2"}),""]})]}),e.jsx("div",{className:"mb-6 glass-effect p-4 rounded-xl",children:e.jsxs("div",{className:"relative",children:[e.jsx(Wt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(Q,{type:"text",placeholder:" (, )...",value:r,onChange:m=>a(m.target.value),className:"pl-10 w-full bg-slate-200 border-slate-400 text-gray-900 focus:border-[#667eea]"})]})}),e.jsxs("div",{className:"glass-effect rounded-xl shadow-xl overflow-x-auto",children:[e.jsxs("table",{className:"w-full min-w-max text-left text-teal-800",children:[e.jsx("thead",{className:"border-b border-slate-700",children:e.jsxs("tr",{className:"bg-teal-100/30",children:[e.jsx("th",{className:"p-4",children:"-"}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4 text-center",children:""})]})}),e.jsx("tbody",{children:u.map((m,f)=>e.jsxs(R.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:f*.05},className:"border-b border-slate-700/50 hover:bg-slate-700/20 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:m.full_name||""}),m.school_name&&e.jsx("div",{className:"text-sm text-gray-500",children:m.school_name})]})}),e.jsx("td",{className:"p-4",children:m.email||""}),e.jsx("td",{className:"p-4",children:e.jsxs("select",{value:m.role||"student",onChange:g=>d(m.user_id,g.target.value),className:`px-2 py-1 text-xs rounded-full border-0 ${(m.role||"student")==="admin"?"bg-red-500/30 text-red-300":(m.role||"student")==="instructor"?"bg-blue-500/30 text-blue-300":(m.role||"student")==="branch_manager"?"bg-purple-500/30 text-purple-300":"bg-green-500/30 text-green-300"}`,children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"instructor",children:"Instructor"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"branch_manager",children:"Branch Manager"})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm",children:m.joinedDate}),e.jsxs("div",{className:"text-xs text-gray-500",children:[m.enrollmentCount," "]})]})}),e.jsxs("td",{className:"p-4 text-center space-x-2",children:[e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>c(` ${m.full_name||""}`),className:"text-blue-400 hover:bg-blue-500/20",children:e.jsx(Qs,{className:"w-4 h-4"})}),e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>c(` ${m.full_name||""}`),className:"text-red-400 hover:bg-red-500/20",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]},m.user_id))})]}),o?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"..."})]}):u.length===0?e.jsx("p",{className:"text-center p-6 text-teal-700",children:n.length===0?"":""}):null]})]})},Lw=({isOpen:s,onClose:t,onSuccess:r})=>{const{toast:a}=ne(),[n,i]=x.useState(!1),[o,l]=x.useState({title:"",description:"",category:"",level:"beginner",duration_hours:0,price:0,max_students:50,is_active:!0,thumbnail_url:""}),[d,c]=x.useState({}),[u,h]=x.useState(null),[m,f]=x.useState(!1),[g,y]=x.useState(null),p=j=>{const{name:k,value:O,type:B}=j.target;l($=>({...$,[k]:B==="number"?parseFloat(O)||0:O})),d[k]&&c($=>({...$,[k]:""}))},v=()=>{const j={};return o.title.trim()||(j.title=""),o.description.trim()||(j.description=""),o.category.trim()||(j.category=""),o.duration_hours<=0&&(j.duration_hours=" 0 "),o.price<0&&(j.price=""),o.max_students<=0&&(j.max_students=" 0"),c(j),Object.keys(j).length===0},w=async j=>{if(j.preventDefault(),!v()){a({title:"",description:"",variant:"destructive"});return}i(!0);try{let k={...o};if(u){f(!0);const{data:$,error:L}=await ca(u);if(L)throw new Error(`: ${L.message}`);k.thumbnail_url=$.publicUrl,f(!1)}const{data:O,error:B}=await nv(k);if(B)throw B;a({title:"! ",description:` "${o.title}" `}),l({title:"",description:"",category:"",level:"beginner",duration_hours:0,price:0,max_students:50,is_active:!0,thumbnail_url:""}),h(null),y(null),r&&r(O),t()}catch(k){console.error("Error creating course:",k),a({title:"",description:k.message,variant:"destructive"})}finally{i(!1),f(!1)}},b=j=>{const k=j.target.files[0];if(!k)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(k.type)){a({title:"",description:" (JPG, PNG, WebP )",variant:"destructive"});return}if(k.size>5*1024*1024){a({title:"",description:" 5MB",variant:"destructive"});return}h(k);const B=new FileReader;B.onload=$=>{y($.target.result)},B.readAsDataURL(k)},_=()=>{h(null),y(null);const j=document.getElementById("cover-image");j&&(j.value="")},N=["Electronics","Civil Engineering","Energy","Software","Design","Robotics","Mechanical","Chemical","Environmental"],P=[{value:"beginner",label:""},{value:"intermediate",label:""},{value:"advanced",label:""}];return s?e.jsx(xe,{children:e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t,children:e.jsxs(R.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:"bg-white shadow-2xl rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-gray-200",onClick:j=>j.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-8 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:e.jsx(fe,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:""}),e.jsx("p",{className:"text-indigo-100 mt-1",children:""})]})]}),e.jsx(T,{variant:"ghost",size:"icon",onClick:t,disabled:n,className:"text-white hover:bg-white/20 rounded-xl",children:e.jsx(ve,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"p-8",children:e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:e.jsx(fe,{className:"w-4 h-4 text-white"})})," *"]}),e.jsx(Q,{name:"title",value:o.title,onChange:p,placeholder:" Arduino Automation Systems",className:"bg-white border-gray-300 text-gray-800 text-lg h-12 focus:border-blue-500 focus:ring-blue-500 rounded-xl shadow-sm",error:d.title}),d.title&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),d.title]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-green-500 p-2 rounded-lg mr-3",children:e.jsx(re,{className:"w-4 h-4 text-white"})})," *"]}),e.jsx("textarea",{name:"description",value:o.description,onChange:p,placeholder:"...",rows:4,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-200 text-base shadow-sm resize-none"}),d.description&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),d.description]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-6 rounded-xl border border-purple-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:e.jsx(mt,{className:"w-4 h-4 text-white"})})," *"]}),e.jsxs("select",{name:"category",value:o.category,onChange:p,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 h-12 shadow-sm",children:[e.jsx("option",{value:"",children:""}),N.map(j=>e.jsx("option",{value:j,children:j},j))]}),d.category&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),d.category]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 p-6 rounded-xl border border-amber-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-amber-500 p-2 rounded-lg mr-3",children:e.jsx(ae,{className:"w-4 h-4 text-white"})}),""]}),e.jsx("select",{name:"level",value:o.level,onChange:p,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12 shadow-sm",children:P.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 p-6 rounded-xl border border-cyan-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-cyan-500 p-2 rounded-lg mr-3",children:e.jsx(me,{className:"w-4 h-4 text-white"})})," () *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(Q,{type:"number",name:"duration_hours",value:o.duration_hours,onChange:p,placeholder:"40",min:"0",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 rounded-xl shadow-sm text-lg"})]}),d.duration_hours&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),d.duration_hours]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 p-6 rounded-xl border border-emerald-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-emerald-500 p-2 rounded-lg mr-3",children:e.jsx(Vs,{className:"w-4 h-4 text-white"})})," ()"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Vs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(Q,{type:"number",name:"price",value:o.price,onChange:p,placeholder:"2500",min:"0",step:"0.01",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 rounded-xl shadow-sm text-lg"})]}),d.price&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),d.price]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-rose-50 to-pink-50 p-6 rounded-xl border border-rose-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-rose-500 p-2 rounded-lg mr-3",children:e.jsx(ae,{className:"w-4 h-4 text-white"})})," *"]}),e.jsxs("div",{className:"relative max-w-xs",children:[e.jsx(ae,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(Q,{type:"number",name:"max_students",value:o.max_students,onChange:p,placeholder:"50",min:"1",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-rose-500 focus:ring-2 focus:ring-rose-200 rounded-xl shadow-sm text-lg"})]}),d.max_students&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),d.max_students]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 p-6 rounded-xl border border-teal-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[e.jsx("div",{className:"bg-teal-500 p-2 rounded-lg mr-3",children:e.jsx(Fe,{className:"w-4 h-4 text-white"})}),""]}),e.jsxs("div",{className:"space-y-4",children:[g&&e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:g,alt:"Course cover preview",className:"w-48 h-32 object-cover rounded-xl border-2 border-gray-200 shadow-lg"}),e.jsx(T,{type:"button",variant:"ghost",size:"icon",onClick:_,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg",children:e.jsx(Ie,{className:"w-4 h-4"})})]}),!g&&e.jsxs("div",{className:"border-2 border-dashed border-teal-300 rounded-xl p-8 text-center hover:border-teal-400 transition-colors bg-white/50",children:[e.jsx("input",{type:"file",id:"cover-image",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:b,className:"hidden",disabled:m}),e.jsxs("label",{htmlFor:"cover-image",className:"cursor-pointer flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-400 to-cyan-500 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(Fe,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-800 font-semibold text-lg",children:""}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"JPG, PNG, WebP  5MB"}),e.jsx("p",{className:"text-teal-600 text-xs mt-2 font-medium",children:""})]})]})]}),m&&e.jsxs("div",{className:"flex items-center justify-center space-x-3 bg-blue-50 p-4 rounded-xl",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),e.jsx("span",{className:"text-blue-700 font-medium",children:"..."})]})]})]}),e.jsxs("div",{className:"flex justify-center space-x-4 pt-8",children:[e.jsx(T,{type:"button",variant:"outline",onClick:t,disabled:n,className:"px-8 py-3 text-gray-600 border-gray-300 hover:bg-gray-50 rounded-xl font-medium text-lg h-14 min-w-[120px]",children:""}),e.jsx(T,{type:"submit",disabled:n||m,className:"px-12 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg h-14 min-w-[160px] shadow-lg hover:shadow-xl transition-all duration-200",children:n||m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),m?"...":"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-5 h-5 mr-3"}),""]})})]})]})})]})})}):null},Rw=({isOpen:s,onClose:t,onSuccess:r,courseId:a})=>{const{toast:n}=ne(),[i,o]=x.useState(!1),[l,d]=x.useState(!0),[c,u]=x.useState({title:"",description:"",category:"",level:"beginner",duration_hours:0,price:0,instructor_name:"",instructor_email:"",max_students:50,is_active:!0,image_url:"",learning_outcomes:[""],tools_required:[""]}),[h,m]=x.useState({}),[f,g]=x.useState(null),[y,p]=x.useState(!1),[v,w]=x.useState(null),[b,_]=x.useState(!1);x.useEffect(()=>{s&&a&&N()},[s,a]);const N=async()=>{try{d(!0);const{data:C,error:S}=await mi(a);if(S)throw S;let I=[""],D=[""];try{C.learning_outcomes&&(I=typeof C.learning_outcomes=="string"?JSON.parse(C.learning_outcomes):C.learning_outcomes),C.tools_required&&(D=typeof C.tools_required=="string"?JSON.parse(C.tools_required):C.tools_required)}catch(H){console.warn("Error parsing course data:",H)}u({title:C.title||"",description:C.description||"",category:C.category||"",level:C.level||"beginner",duration_hours:C.duration_hours||0,price:C.price||0,instructor_name:C.instructor_name||"",instructor_email:C.instructor_email||"",max_students:C.max_students||50,is_active:C.is_active!==void 0?C.is_active:!0,image_url:C.image_url||"",learning_outcomes:I,tools_required:D}),C.image_url&&w(C.image_url)}catch(C){console.error("Error loading course:",C),n({title:"",description:C.message,variant:"destructive"})}finally{d(!1)}},P=C=>{const{name:S,value:I,type:D}=C.target;u(H=>({...H,[S]:D==="number"?parseFloat(I)||0:I})),h[S]&&m(H=>({...H,[S]:""}))},j=()=>{u(C=>({...C,learning_outcomes:[...C.learning_outcomes,""]}))},k=C=>{u(S=>({...S,learning_outcomes:S.learning_outcomes.filter((I,D)=>D!==C)}))},O=(C,S)=>{u(I=>({...I,learning_outcomes:I.learning_outcomes.map((D,H)=>H===C?S:D)}))},B=()=>{u(C=>({...C,tools_required:[...C.tools_required,""]}))},$=C=>{u(S=>({...S,tools_required:S.tools_required.filter((I,D)=>D!==C)}))},L=(C,S)=>{u(I=>({...I,tools_required:I.tools_required.map((D,H)=>H===C?S:D)}))},G=()=>{const C={};return c.title.trim()||(C.title=""),c.description.trim()||(C.description=""),c.category.trim()||(C.category=""),c.instructor_name.trim()||(C.instructor_name=""),c.duration_hours<=0&&(C.duration_hours=" 0 "),c.price<0&&(C.price=""),c.max_students<=0&&(C.max_students=" 0"),m(C),Object.keys(C).length===0},M=async C=>{if(C.preventDefault(),!G()){n({title:"",description:"",variant:"destructive"});return}o(!0);try{let S={...c};if(f){p(!0);const{data:H,error:W}=await ca(f);if(W)throw new Error(`: ${W.message}`);S.image_url=H.publicUrl,p(!1)}S.learning_outcomes=S.learning_outcomes.filter(H=>H.trim()!==""),S.tools_required=S.tools_required.filter(H=>H.trim()!=="");const{data:I,error:D}=await iv(a,S);if(D)throw D;n({title:"! ",description:` "${c.title}" `}),r&&r(I),t()}catch(S){console.error("Error updating course:",S),n({title:"",description:S.message,variant:"destructive"})}finally{o(!1),p(!1)}},F=C=>{const S=C.target.files[0];if(!S)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(S.type)){n({title:"",description:" (JPG, PNG, WebP )",variant:"destructive"});return}if(S.size>5*1024*1024){n({title:"",description:" 5MB",variant:"destructive"});return}g(S);const D=new FileReader;D.onload=H=>{w(H.target.result)},D.readAsDataURL(S)},A=()=>{g(null),w(c.image_url||null);const C=document.getElementById("edit-cover-image");C&&(C.value="")},z=["Electronics","Civil Engineering","Energy","Software","Design","Robotics","Mechanical","Chemical","Environmental"],q=[{value:"beginner",label:""},{value:"intermediate",label:""},{value:"advanced",label:""}],U=()=>{var C;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border",children:[e.jsx("h1",{className:"text-3xl font-bold text-emerald-900 mb-4",children:c.title||""}),e.jsx("p",{className:"text-emerald-800 text-lg leading-relaxed mb-6",children:c.description||""}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"w-5 h-5 text-[#667eea]"}),e.jsxs("span",{className:"text-emerald-800",children:[": ",c.instructor_name||""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"w-5 h-5 text-[#667eea]"}),e.jsxs("span",{className:"text-emerald-800",children:[": ",c.duration_hours||0," "]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"w-5 h-5 text-[#667eea]"}),e.jsx("span",{className:"text-emerald-800",children:": 0 "})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-5 h-5 text-[#667eea]"}),e.jsxs("span",{className:"text-emerald-800",children:[": ",c.level==="beginner"?"":c.level==="intermediate"?"":c.level==="advanced"?"":""]})]})]}),v&&e.jsx("img",{className:"w-full h-64 object-cover rounded-lg mb-6 shadow-md",alt:c.title,src:v})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h2",{className:"text-3xl font-bold text-emerald-900",children:["",((C=c.price)==null?void 0:C.toLocaleString())||"0"]}),e.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((S,I)=>e.jsx(_e,{className:"w-5 h-5 text-yellow-400 fill-current"},I)),e.jsx("span",{className:"ml-2 text-sm text-emerald-800",children:"(5.0)"})]})]}),e.jsx("p",{className:"text-sm text-emerald-700 mb-6",children:" Login Learning"}),e.jsx(T,{size:"lg",className:"w-full bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-white text-lg py-3",disabled:!0,children:""}),e.jsx("p",{className:"text-xs text-slate-500 mt-4 text-center",children:"  7 "})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border",children:[e.jsx("h3",{className:"text-xl font-semibold text-emerald-900 mb-3",children:""}),e.jsx("ul",{className:"space-y-2 text-emerald-800 text-sm list-disc list-inside",children:c.learning_outcomes&&c.learning_outcomes.length>0?c.learning_outcomes.filter(S=>S.trim()!=="").map((S,I)=>e.jsx("li",{children:S},I)):e.jsx("li",{className:"text-gray-400",children:""})})]}),c.tools_required&&c.tools_required.some(S=>S.trim()!=="")&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border",children:[e.jsx("h3",{className:"text-xl font-semibold text-emerald-900 mb-3",children:""}),e.jsx("ul",{className:"space-y-2 text-emerald-800 text-sm list-disc list-inside",children:c.tools_required.filter(S=>S.trim()!=="").map((S,I)=>e.jsx("li",{children:S},I))})]})]})};return s?e.jsx(xe,{children:e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t,children:e.jsxs(R.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:`bg-white shadow-2xl rounded-2xl w-full ${b?"max-w-7xl":"max-w-4xl"} max-h-[90vh] overflow-hidden border border-gray-200`,onClick:C=>C.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 p-8 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:e.jsx(qe,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:""}),e.jsx("p",{className:"text-emerald-100 mt-1",children:""})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(T,{variant:"ghost",onClick:()=>_(!b),className:"text-white hover:bg-white/20 rounded-xl flex items-center space-x-2",children:[e.jsx(ke,{className:"w-5 h-5"}),e.jsx("span",{children:b?"":""})]}),e.jsx(T,{variant:"ghost",size:"icon",onClick:t,disabled:i,className:"text-white hover:bg-white/20 rounded-xl",children:e.jsx(ve,{className:"w-6 h-6"})})]})]})}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)]",children:l?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"..."})]}):e.jsxs("div",{className:`${b?"grid grid-cols-1 lg:grid-cols-2 gap-8":"max-w-4xl mx-auto"} p-8`,children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("form",{onSubmit:M,className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:e.jsx(fe,{className:"w-4 h-4 text-white"})})," *"]}),e.jsx(Q,{name:"title",value:c.title,onChange:P,placeholder:" Arduino Automation Systems",className:"bg-white border-gray-300 text-gray-800 text-lg h-12 focus:border-blue-500 focus:ring-blue-500 rounded-xl shadow-sm",error:h.title}),h.title&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),h.title]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-green-500 p-2 rounded-lg mr-3",children:e.jsx(re,{className:"w-4 h-4 text-white"})})," *"]}),e.jsx("textarea",{name:"description",value:c.description,onChange:P,placeholder:"...",rows:4,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-200 text-base shadow-sm resize-none"}),h.description&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),h.description]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-6 rounded-xl border border-purple-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[e.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:e.jsx(Me,{className:"w-4 h-4 text-white"})}),""]}),e.jsxs("div",{className:"space-y-3",children:[c.learning_outcomes.map((C,S)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Q,{value:C,onChange:I=>O(S,I.target.value),placeholder:" ",className:"bg-white border-gray-300 text-gray-800 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 rounded-xl shadow-sm"}),c.learning_outcomes.length>1&&e.jsx(T,{type:"button",variant:"ghost",size:"icon",onClick:()=>k(S),className:"text-red-500 hover:text-red-600 hover:bg-red-50 rounded-xl",children:e.jsx(Ie,{className:"w-4 h-4"})})]},S)),e.jsxs(T,{type:"button",variant:"outline",onClick:j,className:"w-full border-dashed border-purple-300 text-purple-600 hover:bg-purple-50 rounded-xl",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),""]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 p-6 rounded-xl border border-orange-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[e.jsx("div",{className:"bg-orange-500 p-2 rounded-lg mr-3",children:e.jsx(qe,{className:"w-4 h-4 text-white"})}),""]}),e.jsxs("div",{className:"space-y-3",children:[c.tools_required.map((C,S)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Q,{value:C,onChange:I=>L(S,I.target.value),placeholder:" Arduino IDE, Breadboard, Jumper wires",className:"bg-white border-gray-300 text-gray-800 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 rounded-xl shadow-sm"}),c.tools_required.length>1&&e.jsx(T,{type:"button",variant:"ghost",size:"icon",onClick:()=>$(S),className:"text-red-500 hover:text-red-600 hover:bg-red-50 rounded-xl",children:e.jsx(Ie,{className:"w-4 h-4"})})]},S)),e.jsxs(T,{type:"button",variant:"outline",onClick:B,className:"w-full border-dashed border-orange-300 text-orange-600 hover:bg-orange-50 rounded-xl",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),""]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-6 rounded-xl border border-purple-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:e.jsx(mt,{className:"w-4 h-4 text-white"})})," *"]}),e.jsxs("select",{name:"category",value:c.category,onChange:P,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 h-12 shadow-sm",children:[e.jsx("option",{value:"",children:""}),z.map(C=>e.jsx("option",{value:C,children:C},C))]}),h.category&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),h.category]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 p-6 rounded-xl border border-amber-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-amber-500 p-2 rounded-lg mr-3",children:e.jsx(ae,{className:"w-4 h-4 text-white"})}),""]}),e.jsx("select",{name:"level",value:c.level,onChange:P,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12 shadow-sm",children:q.map(C=>e.jsx("option",{value:C.value,children:C.label},C.value))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 p-6 rounded-xl border border-cyan-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-cyan-500 p-2 rounded-lg mr-3",children:e.jsx(me,{className:"w-4 h-4 text-white"})})," () *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(Q,{type:"number",name:"duration_hours",value:c.duration_hours,onChange:P,placeholder:"40",min:"0",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 rounded-xl shadow-sm text-lg"})]}),h.duration_hours&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),h.duration_hours]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 p-6 rounded-xl border border-emerald-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-emerald-500 p-2 rounded-lg mr-3",children:e.jsx(Vs,{className:"w-4 h-4 text-white"})})," ()"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Vs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(Q,{type:"number",name:"price",value:c.price,onChange:P,placeholder:"2500",min:"0",step:"0.01",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 rounded-xl shadow-sm text-lg"})]}),h.price&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),h.price]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 p-6 rounded-xl border border-indigo-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx("div",{className:"bg-indigo-500 p-2 rounded-lg mr-3",children:e.jsx(ae,{className:"w-5 h-5 text-white"})}),""]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:" *"}),e.jsx(Q,{name:"instructor_name",value:c.instructor_name,onChange:P,placeholder:"",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 rounded-xl shadow-sm"}),h.instructor_name&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),h.instructor_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:""}),e.jsx(Q,{type:"email",name:"instructor_email",value:c.instructor_email,onChange:P,placeholder:"teacher@loginlearning.com",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 rounded-xl shadow-sm"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-rose-50 to-pink-50 p-6 rounded-xl border border-rose-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-rose-500 p-2 rounded-lg mr-3",children:e.jsx(ae,{className:"w-4 h-4 text-white"})})," *"]}),e.jsxs("div",{className:"relative max-w-xs",children:[e.jsx(ae,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(Q,{type:"number",name:"max_students",value:c.max_students,onChange:P,placeholder:"50",min:"1",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-rose-500 focus:ring-2 focus:ring-rose-200 rounded-xl shadow-sm text-lg"})]}),h.max_students&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),h.max_students]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 p-6 rounded-xl border border-teal-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[e.jsx("div",{className:"bg-teal-500 p-2 rounded-lg mr-3",children:e.jsx(Fe,{className:"w-4 h-4 text-white"})}),""]}),e.jsxs("div",{className:"space-y-4",children:[v&&e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:v,alt:"Course cover preview",className:"w-48 h-32 object-cover rounded-xl border-2 border-gray-200 shadow-lg"}),e.jsx(T,{type:"button",variant:"ghost",size:"icon",onClick:A,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg",children:e.jsx(Ie,{className:"w-4 h-4"})})]}),!v&&e.jsxs("div",{className:"border-2 border-dashed border-teal-300 rounded-xl p-8 text-center hover:border-teal-400 transition-colors bg-white/50",children:[e.jsx("input",{type:"file",id:"edit-cover-image",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:F,className:"hidden",disabled:y}),e.jsxs("label",{htmlFor:"edit-cover-image",className:"cursor-pointer flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-400 to-cyan-500 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(Fe,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-800 font-semibold text-lg",children:""}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"JPG, PNG, WebP  5MB"}),e.jsx("p",{className:"text-teal-600 text-xs mt-2 font-medium",children:""})]})]})]}),v&&!f&&e.jsxs("div",{className:"text-center",children:[e.jsx("input",{type:"file",id:"edit-cover-image",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:F,className:"hidden",disabled:y}),e.jsxs("label",{htmlFor:"edit-cover-image",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-teal-300 text-teal-700 bg-white hover:bg-teal-50 rounded-lg font-medium transition-colors",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),""]})]}),y&&e.jsxs("div",{className:"flex items-center justify-center space-x-3 bg-blue-50 p-4 rounded-xl",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),e.jsx("span",{className:"text-blue-700 font-medium",children:"..."})]})]})]}),e.jsxs("div",{className:"flex justify-center space-x-4 pt-8",children:[e.jsx(T,{type:"button",variant:"outline",onClick:t,disabled:i,className:"px-8 py-3 text-gray-600 border-gray-300 hover:bg-gray-50 rounded-xl font-medium text-lg h-14 min-w-[120px]",children:""}),e.jsx(T,{type:"submit",disabled:i||y,className:"px-12 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white rounded-xl font-semibold text-lg h-14 min-w-[160px] shadow-lg hover:shadow-xl transition-all duration-200",children:i||y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),y?"...":"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-5 h-5 mr-3"}),""]})})]})]})}),b&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"sticky top-0 bg-white z-10 pb-4",children:[e.jsxs("h3",{className:"text-2xl font-bold text-emerald-900 flex items-center",children:[e.jsx(ke,{className:"w-6 h-6 mr-3"}),""]}),e.jsx("p",{className:"text-gray-600 text-sm",children:" Real-time"})]}),e.jsx("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 p-6 rounded-xl border-2 border-emerald-200 max-h-[calc(90vh-300px)] overflow-y-auto",children:e.jsx(U,{})})]})]})})]})})}):null},Mw=()=>{const{toast:s}=Et(),t=st(),[r,a]=x.useState(""),[n,i]=x.useState([]),[o,l]=x.useState(!0),[d,c]=x.useState(null),[u,h]=x.useState(!1),[m,f]=x.useState(!1),[g,y]=x.useState(null),p=x.useCallback(async()=>{l(!0);const{data:$,error:L}=await lv();L?s({title:"",description:L.message,variant:"destructive"}):i($||[]),l(!1)},[s]),v=x.useCallback(async()=>{const{data:$,error:L}=await uv();!L&&$&&c($)},[]);x.useEffect(()=>{p(),v()},[p,v]);const w=async($,L,G)=>{const M=!G,F=M?"":"";if(!confirm(`${F} "${L}"?`))return;const{error:A}=await ov($,M);A?s({title:`${F}`,description:A.message,variant:"destructive"}):(s({title:`${F}`,description:` "${L}" ${F}`}),p(),v())},b=async($,L,G)=>{const M=!G,F=M?"":"",{error:A}=await dv($,M);A?s({title:`${F}`,description:A.message,variant:"destructive"}):(s({title:`${F}`,description:` "${L}" ${F}`}),p(),v())},_=()=>{p(),v()},N=()=>{p(),v()},P=$=>{y($),f(!0)},j=()=>{f(!1),y(null)},k=$=>{s({title:"",description:`${$} `,variant:"info"})},O=n.filter($=>$.title.toLowerCase().includes(r.toLowerCase())||$.category.toLowerCase().includes(r.toLowerCase())),B={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};return e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:B,className:"container mx-auto px-4 py-12",children:[e.jsxs(ge,{children:[e.jsx("title",{children:" -  Login Learning"}),e.jsx("meta",{name:"description",content:" Login Learning"})]}),e.jsxs(R.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"flex flex-col sm:flex-row justify-between items-center mb-10",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>t("/admin"),className:"mr-4 text-gray-600 hover:text-gray-900",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),""]}),e.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-purple-900 mb-4 sm:mb-0",children:[e.jsx(Ut,{className:"inline-block w-8 h-8 mr-3 text-[#667eea]"}),""]})]}),e.jsxs(T,{onClick:()=>h(!0),className:"bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-white-800",children:[e.jsx(Ar,{className:"w-5 h-5 mr-2"}),""]})]}),d&&e.jsxs(R.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"glass-effect p-6 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-700 text-sm",children:""}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:d.totalCourses})]}),e.jsx(Ut,{className:"w-8 h-8 text-[#667eea]"})]})}),e.jsx("div",{className:"glass-effect p-6 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-700 text-sm",children:""}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:d.totalEnrollments})]}),e.jsx(ae,{className:"w-8 h-8 text-green-400"})]})}),e.jsx("div",{className:"glass-effect p-6 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-700 text-sm",children:""}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:d.activeEnrollments})]}),e.jsx(Us,{className:"w-8 h-8 text-blue-400"})]})}),e.jsx("div",{className:"glass-effect p-6 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-700 text-sm",children:""}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[d.completionRate,"%"]})]}),e.jsx(ke,{className:"w-8 h-8 text-purple-400"})]})})]}),e.jsx("div",{className:"mb-6 glass-effect p-4 rounded-xl",children:e.jsxs("div",{className:"relative",children:[e.jsx(Wt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(Q,{type:"text",placeholder:" (, )...",value:r,onChange:$=>a($.target.value),className:"pl-10 w-full bg-slate-200 border-slate-400 text-gray-900 focus:border-[#667eea]"})]})}),e.jsxs("div",{className:"glass-effect rounded-xl shadow-xl overflow-x-auto",children:[o?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#667eea] mx-auto mb-4"}),e.jsx("p",{className:"text-purple-700",children:"..."})]}):e.jsxs("table",{className:"w-full min-w-max text-left text-purple-800",children:[e.jsx("thead",{className:"border-b border-slate-700",children:e.jsxs("tr",{className:"bg-purple-100/30",children:[e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4 text-center",children:""})]})}),e.jsx("tbody",{children:O.map(($,L)=>e.jsxs(R.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:L*.05},className:"border-b border-slate-700/50 hover:bg-slate-700/20 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-900",children:$.title}),e.jsx("p",{className:"text-sm text-purple-700 truncate max-w-xs",children:$.description||""})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-500/30 text-blue-300",children:$.category||""})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"w-4 h-4 mr-1 text-purple-700"}),$.enrollment_count||0]})}),e.jsxs("td",{className:"p-4",children:[$.duration_hours||0," "]}),e.jsx("td",{className:"p-4",children:$.price?`${$.price.toLocaleString()}`:""}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${$.is_active?"bg-green-500/30 text-green-300":"bg-red-500/30 text-red-300"}`,children:$.is_active?"":""})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:`w-4 h-4 mr-1 ${$.is_featured?"text-yellow-400 fill-current":"text-gray-400"}`}),e.jsx("span",{className:`text-xs ${$.is_featured?"text-yellow-400":"text-gray-500"}`,children:$.is_featured?"":""})]})}),e.jsx("td",{className:"p-4",children:new Date($.created_at).toLocaleDateString("th-TH")}),e.jsxs("td",{className:"p-4 text-center space-x-2",children:[e.jsx(J,{to:`/admin/courses/${$.id}/content`,children:e.jsx(T,{variant:"ghost",size:"icon",className:"text-green-400 hover:bg-green-500/20",title:"",children:e.jsx(re,{className:"w-4 h-4"})})}),e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>P($.id),className:"text-blue-400 hover:bg-blue-500/20",title:"",children:e.jsx(Qs,{className:"w-4 h-4"})}),e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>b($.id,$.title,$.is_featured),className:$.is_featured?"text-yellow-400 hover:bg-yellow-500/20":"text-gray-400 hover:bg-gray-500/20",title:$.is_featured?"":"",children:e.jsx(_e,{className:`w-4 h-4 ${$.is_featured?"fill-current":""}`})}),e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>w($.id,$.title,$.is_active),className:$.is_active?"text-orange-400 hover:bg-orange-500/20":"text-green-400 hover:bg-green-500/20",title:$.is_active?"":"",children:$.is_active?e.jsx(Wm,{className:"w-4 h-4"}):e.jsx(Km,{className:"w-4 h-4"})}),!$.is_active&&e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>k(` ${$.title}`),className:"text-red-400 hover:bg-red-500/20",title:"",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]},$.id))})]}),!o&&O.length===0&&e.jsxs("div",{className:"text-center p-8",children:[e.jsx(kt,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-purple-700 text-lg",children:""}),e.jsx("p",{className:"text-purple-600 text-sm mt-2",children:""})]})]}),e.jsx(Lw,{isOpen:u,onClose:()=>h(!1),onSuccess:_}),e.jsx(Rw,{isOpen:m,onClose:j,onSuccess:N,courseId:g})]})},Iw=async s=>{try{const{data:{user:t},error:r}=await E.auth.getUser();if(r||!t)throw new Error("User not authenticated");const{data:a,error:n}=await E.from("course_content").insert([{...s}]).select().single();if(n)throw n;return{data:a,error:null}}catch(t){return console.error("Error creating content:",t),{data:null,error:t}}},Dw=async(s,t)=>{try{const{data:{user:r},error:a}=await E.auth.getUser();if(a||!r)throw new Error("User not authenticated");const{data:n,error:i}=await E.from("course_content").update({...t}).eq("id",s).select().single();if(i)throw i;return{data:n,error:null}}catch(r){return console.error("Error updating content:",r),{data:null,error:r}}},Ow=async s=>{try{const{data:{user:t},error:r}=await E.auth.getUser();if(r||!t)throw new Error("User not authenticated");const{data:a}=await E.from("quizzes").select("id").eq("content_id",s),{data:n}=await E.from("assignments").select("id").eq("content_id",s);if(a&&a.length>0){for(const o of a)await E.from("quiz_attempts").delete().eq("quiz_id",o.id);await E.from("quizzes").delete().eq("content_id",s)}if(n&&n.length>0){for(const o of n)await E.from("assignment_submissions").delete().eq("assignment_id",o.id);await E.from("assignments").delete().eq("content_id",s)}await E.from("video_progress").delete().eq("content_id",s);const{error:i}=await E.from("course_content").delete().eq("id",s);if(i)throw i;return{error:null}}catch(t){return console.error("Error deleting content:",t),{error:t}}},$w=({contentId:s,existingFiles:t=[],onFilesChange:r,maxFiles:a=10,maxFileSize:n=50*1024*1024,allowedTypes:i=["pdf","doc","docx","ppt","pptx","xls","xlsx","jpg","jpeg","png","gif","mp4","mp3","zip","rar","txt"],uploadMode:o="admin",className:l=""})=>{const{toast:d}=ne(),c=x.useRef(null),[u,h]=x.useState(t),[m,f]=x.useState(!1),[g,y]=x.useState(!1),p=L=>{const G=L==null?void 0:L.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(G)?e.jsx(Fe,{className:"w-5 h-5 text-blue-500"}):["mp4","avi","mov","wmv","flv"].includes(G)?e.jsx($n,{className:"w-5 h-5 text-purple-500"}):["zip","rar","7z","tar","gz"].includes(G)?e.jsx(ec,{className:"w-5 h-5 text-orange-500"}):["pdf"].includes(G)?e.jsx(re,{className:"w-5 h-5 text-red-500"}):["doc","docx"].includes(G)?e.jsx(re,{className:"w-5 h-5 text-blue-600"}):["ppt","pptx"].includes(G)?e.jsx(re,{className:"w-5 h-5 text-orange-600"}):["xls","xlsx"].includes(G)?e.jsx(re,{className:"w-5 h-5 text-green-600"}):e.jsx(tc,{className:"w-5 h-5 text-slate-500"})},v=L=>{if(L===0)return"0 Bytes";const G=1024,M=["Bytes","KB","MB","GB"],F=Math.floor(Math.log(L)/Math.log(G));return parseFloat((L/Math.pow(G,F)).toFixed(2))+" "+M[F]},w=L=>{var F;const G=[];L.size>n&&G.push(` ${L.name}  (${v(n)})`);const M=(F=L.name.split(".").pop())==null?void 0:F.toLowerCase();return i.includes(M)||G.push(` ${L.name} `),{isValid:G.length===0,errors:G}},b=L=>{if(!L||L.length===0)return;const G=Array.from(L);if(u.length+G.length>a){d({title:"",description:` ${a} `,variant:"destructive"});return}const M=[],F=[];if(G.forEach(A=>{var q;const z=w(A);if(z.isValid){const U=`file_${Date.now()}_${Math.floor(Math.random()*1e3)}`;M.push({id:U,file:A,name:A.name,size:A.size,type:(q=A.name.split(".").pop())==null?void 0:q.toLowerCase(),mimeType:A.type,isUploading:!1,isUploaded:!1,progress:0,url:null,path:null})}else F.push(...z.errors)}),F.length>0&&d({title:"",description:F.join(`
`),variant:"destructive"}),M.length>0){const A=[...u,...M];h(A),r==null||r(A)}},_=L=>{L.preventDefault(),y(!1),b(L.dataTransfer.files)},N=L=>{L.preventDefault(),L.stopPropagation(),L.type==="dragenter"||L.type==="dragover"?y(!0):L.type==="dragleave"&&y(!1)},P=L=>{const G=u.filter(M=>M.id!==L);h(G),r==null||r(G)},j=async(L,G=1)=>{var M;h(F=>F.map(A=>A.id===L.id?{...A,isUploading:!0,progress:0}:A));try{const F=setInterval(()=>{h(q=>q.map(U=>U.id===L.id?{...U,progress:Math.min(U.progress+10,90)}:U))},200),{data:A,error:z}=await gv(L.file,s,G);if(clearInterval(F),z)throw z;return h(q=>q.map(U=>U.id===L.id?{...U,isUploading:!1,isUploaded:!0,progress:100,url:A.url,path:A.file_path,attachmentId:A.id}:U)),{success:!0,data:A}}catch(F){console.error("Upload error details:",F);const A=((M=F==null?void 0:F.error)==null?void 0:M.message)||(F==null?void 0:F.message)||"";throw h(z=>z.map(q=>q.id===L.id?{...q,isUploading:!1,isUploaded:!1,progress:0,error:A}:q)),d({title:"",description:A,variant:"destructive"}),F}},k=async()=>{if(!s){d({title:"",description:" Content ID",variant:"destructive"});return}f(!0);const L=u.filter(G=>!G.isUploaded&&!G.isUploading);if(L.length===0){d({title:"",description:""}),f(!1);return}try{const G=await Promise.allSettled(L.map((A,z)=>j(A,z+1))),M=G.filter(A=>A.status==="fulfilled").length,F=G.filter(A=>A.status==="rejected").length;M>0&&F===0?d({title:" ",description:` ${M} `}):M>0&&F>0?d({title:"",description:` ${M} ,  ${F} `,variant:"destructive"}):d({title:"",description:" ",variant:"destructive"}),r==null||r(u)}catch{d({title:"",description:"",variant:"destructive"})}finally{f(!1)}},O=L=>{if(L.url){const G=document.createElement("a");G.href=L.url,G.download=L.name,document.body.appendChild(G),G.click(),document.body.removeChild(G)}},B=u.filter(L=>!L.isUploaded),$=u.filter(L=>L.isUploaded);return e.jsxs("div",{className:`space-y-4 ${l}`,children:[e.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 transition-colors ${g?"border-blue-500 bg-blue-500/10":"border-slate-600 hover:border-slate-500"}`,onDragEnter:N,onDragLeave:N,onDragOver:N,onDrop:_,children:[e.jsx("input",{ref:c,type:"file",multiple:!0,accept:i.map(L=>`.${L}`).join(","),onChange:L=>b(L.target.files),className:"hidden"}),e.jsxs("div",{className:"text-center",children:[e.jsx(xs,{className:"w-8 h-8 text-slate-400 mx-auto mb-3"}),e.jsxs("p",{className:"text-slate-300 mb-2",children:[" "," ",e.jsx("button",{type:"button",onClick:()=>{var L;return(L=c.current)==null?void 0:L.click()},className:"text-blue-400 hover:text-blue-300 underline",children:""})]}),e.jsxs("p",{className:"text-xs text-slate-500",children:[": ",i.join(", ")," | : ",v(n)," | : ",a," "]})]})]}),u.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-medium text-slate-300",children:[" (",u.length,"/",a,")"]}),B.length>0&&e.jsx(T,{size:"sm",onClick:k,disabled:m,className:"bg-blue-500 hover:bg-blue-600",children:m?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"w-4 h-4 mr-2"}),""]})})]}),e.jsx("div",{className:"grid gap-2",children:e.jsx(xe,{children:u.map(L=>e.jsxs(R.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center space-x-3 p-3 bg-slate-700/30 rounded-lg border border-slate-600",children:[e.jsx("div",{className:"flex-shrink-0",children:p(L.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:L.name}),L.isUploaded&&e.jsx(be,{className:"w-4 h-4 text-green-400"})]}),e.jsx("p",{className:"text-xs text-slate-400",children:v(L.size)}),L.isUploading&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"w-full bg-slate-600 rounded-full h-1",children:e.jsx("div",{className:"bg-blue-500 h-1 rounded-full transition-all duration-300",style:{width:`${L.progress}%`}})}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[L.progress,"%"]})]}),L.error&&e.jsx("div",{className:"mt-2 p-2 bg-red-500/20 border border-red-500/30 rounded text-xs",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(se,{className:"w-3 h-3 text-red-400 mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-red-400",children:L.error})})]})})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[L.isUploaded&&e.jsxs(e.Fragment,{children:[e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>O(L),title:"",children:e.jsx(jt,{className:"w-4 h-4"})}),L.type&&["jpg","jpeg","png","gif","pdf"].includes(L.type)&&e.jsx(T,{size:"sm",variant:"ghost",title:"",children:e.jsx(ke,{className:"w-4 h-4"})})]}),e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>P(L.id),className:"text-red-400 hover:text-red-300",title:"",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]},L.id))})})]}),u.length>0&&e.jsxs("div",{className:"text-xs text-slate-500 text-center",children:[$.length>0&&e.jsxs("span",{className:"text-green-400",children:[" ",$.length," "]}),B.length>0&&$.length>0&&e.jsx("span",{className:"mx-2",children:""}),B.length>0&&e.jsxs("span",{className:"text-yellow-400",children:[" ",B.length," "]})]})]})},Fw=({mode:s,content:t,onSave:r,onClose:a})=>{const{toast:n}=ne(),[i,o]=x.useState({title:(t==null?void 0:t.title)||"",content_type:(t==null?void 0:t.content_type)||"video",content:(t==null?void 0:t.content)||"",video_url:(t==null?void 0:t.video_url)||"",duration_minutes:(t==null?void 0:t.duration_minutes)||0,order_index:(t==null?void 0:t.order_index)||0,is_preview:(t==null?void 0:t.is_preview)||!1,completion_requirement:(t==null?void 0:t.completion_requirement)||"full_watch",min_watch_time:(t==null?void 0:t.min_watch_time)||60,allow_manual_completion:(t==null?void 0:t.allow_manual_completion)!==!1,requires_previous_completion:(t==null?void 0:t.requires_previous_completion)!==!1,lock_enabled:(t==null?void 0:t.lock_enabled)!==!1,lock_message:(t==null?void 0:t.lock_message)||""}),[l,d]=x.useState(!1),[c,u]=x.useState([]),[h,m]=x.useState((t==null?void 0:t.id)||null),[f,g]=x.useState(!1),y=[{value:"video",label:"",icon:$n,color:"blue"},{value:"lesson",label:"",icon:fe,color:"green"},{value:"document",label:"",icon:kr,color:"orange"},{value:"quiz",label:"",icon:re,color:"yellow"},{value:"assignment",label:"",icon:re,color:"purple"}];x.useEffect(()=>{(async()=>{if(h){g(!0);try{console.log("Loading attachments for content:",h);const{data:b,error:_}=await nu(h);if(_){console.error("Error loading attachments:",_),n({title:"",description:"",variant:"destructive"});return}console.log("Loaded attachments:",b);const N=b.map(P=>({id:P.id,name:P.original_filename||P.filename,size:P.file_size,type:P.file_extension,mimeType:P.mime_type,isUploading:!1,isUploaded:!0,progress:100,url:P.file_url,path:P.file_path,attachmentId:P.id}));u(N),console.log("Set attached files:",N)}catch(b){console.error("Error in loadAttachments:",b)}finally{g(!1)}}})()},[h,n]);const p=async w=>{if(w.preventDefault(),!i.title.trim()){n({title:"",description:"",variant:"destructive"});return}d(!0);try{const b=await r(i);s==="create"&&(b!=null&&b.id)&&m(b.id);let _=`${s==="create"?"":""}`;if((i.lock_enabled||i.requires_previous_completion)&&(_+=`
 `),n({title:"",description:_}),s==="create"&&(b!=null&&b.id)&&c.length>0){n({title:"",description:""});return}a()}catch(b){console.error("Error saving content:",b),n({title:"",description:b.message||"",variant:"destructive"})}finally{d(!1)}},v=(w,b)=>{o(_=>({..._,[w]:b}))};return e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:a,children:e.jsxs(R.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:w=>w.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:e.jsx(fe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:s==="create"?"":""}),e.jsx("p",{className:"text-indigo-100 mt-1",children:""})]})]}),e.jsx(T,{variant:"ghost",size:"icon",onClick:a,className:"text-white hover:bg-white/20 rounded-lg",children:e.jsx(ve,{className:"w-6 h-6"})})]})}),e.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:" *"}),e.jsx("input",{type:"text",value:i.title,onChange:w=>v("title",w.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-lg",placeholder:"  React Hooks",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:y.map(w=>{const b=w.icon,_=i.content_type===w.value;return e.jsxs("button",{type:"button",onClick:()=>v("content_type",w.value),className:`p-3 rounded-lg border-2 transition-all ${_?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 bg-white hover:border-gray-300 text-gray-600"}`,children:[e.jsx(b,{className:`w-5 h-5 mx-auto mb-1 ${_?"text-indigo-600":"text-gray-500"}`}),e.jsx("div",{className:"text-sm font-medium",children:w.label})]},w.value)})})]}),i.content_type==="video"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"URL "}),e.jsx("input",{type:"url",value:i.video_url,onChange:w=>v("video_url",w.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"https://www.youtube.com/watch?v=..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:""}),e.jsx("textarea",{value:i.content,onChange:w=>v("content",w.target.value),className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",rows:6,placeholder:" ..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"number",value:i.duration_minutes,onChange:w=>v("duration_minutes",parseInt(w.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",min:"0",placeholder:"15"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("input",{type:"number",value:i.order_index,onChange:w=>v("order_index",parseInt(w.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",min:"0",placeholder:"1"})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"is_preview",checked:i.is_preview,onChange:w=>v("is_preview",w.target.checked),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"is_preview",className:"text-sm font-medium text-gray-700",children:""})]})})]}),["document","assignment","lesson"].includes(i.content_type)&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(kr,{className:"w-5 h-5 mr-2 text-orange-500"}),""]}),e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[" ",e.jsx("strong",{children:":"}),!h&&e.jsxs("span",{className:"text-orange-600",children:[" "," "]}),h&&!f&&e.jsxs("span",{className:"text-green-600",children:[" ","",c.filter(w=>w.isUploaded).length>0&&e.jsxs("span",{className:"ml-2",children:["(",c.filter(w=>w.isUploaded).length," )"]})]}),f&&e.jsxs("span",{className:"text-blue-600",children:[" ","..."]})]})}),e.jsx($w,{contentId:h,existingFiles:c,onFilesChange:u,maxFiles:5,maxFileSize:25*1024*1024,allowedTypes:["pdf","doc","docx","ppt","pptx","xls","xlsx","txt","jpg","jpeg","png","gif"],uploadMode:"admin",className:"bg-white"})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"lock_enabled",checked:i.lock_enabled,onChange:w=>v("lock_enabled",w.target.checked),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"lock_enabled",className:"text-sm font-medium text-gray-700",children:""})]}),i.lock_enabled&&e.jsxs("div",{className:"ml-7 space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"requires_previous_completion",checked:i.requires_previous_completion,onChange:w=>v("requires_previous_completion",w.target.checked),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"requires_previous_completion",className:"text-sm font-medium text-gray-700",children:""})]}),i.requires_previous_completion&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsx("textarea",{value:i.lock_message,onChange:w=>v("lock_message",w.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",rows:2,placeholder:""})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[e.jsxs("p",{className:"text-xs text-yellow-800",children:[" ",e.jsx("strong",{children:":"}),!i.lock_enabled&&"  - ",i.lock_enabled&&!i.requires_previous_completion&&"  ",i.lock_enabled&&i.requires_previous_completion&&" "]}),e.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:[" ",e.jsx("strong",{children:":"}),"  SQL  add-lock-columns.sql "]})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:""}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:i.completion_requirement,onChange:w=>v("completion_requirement",w.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"manual_only",children:""}),e.jsx("option",{value:"full_watch",children:" 90%"}),e.jsx("option",{value:"time_based",children:""}),e.jsx("option",{value:"end_reach",children:" (95%)"}),e.jsx("option",{value:"any_watch",children:" (10%)"})]})]}),i.completion_requirement==="time_based"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ()"}),e.jsx("input",{type:"number",value:i.min_watch_time,onChange:w=>v("min_watch_time",parseInt(w.target.value)||0),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",min:"0",placeholder:"60"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"  120 = 2 "})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"allow_manual_completion",checked:i.allow_manual_completion,onChange:w=>v("allow_manual_completion",w.target.checked),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"allow_manual_completion",className:"text-sm font-medium text-gray-700",children:' ( "")'})]}),e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[" ",e.jsx("strong",{children:":"}),i.completion_requirement==="manual_only"&&" ",i.completion_requirement==="full_watch"&&"  90% ",i.completion_requirement==="time_based"&&" ",i.completion_requirement==="end_reach"&&"  (95%) ",i.completion_requirement==="any_watch"&&"  10% "]})})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("div",{className:"flex space-x-3",children:e.jsx(T,{type:"button",variant:"outline",onClick:a,disabled:l,children:""})}),e.jsxs("div",{className:"flex space-x-3",children:[c.length>0&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mr-4",children:[e.jsx(kr,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[c.filter(w=>w.isUploaded).length,"/",c.length," "]})]}),e.jsxs(T,{type:"submit",disabled:l,className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),l?"...":h?"":""]}),h&&c.some(w=>w.isUploaded)&&e.jsx(T,{type:"button",variant:"outline",onClick:a,className:"border-green-500 text-green-600 hover:bg-green-50",children:""})]})]})]})]})})},Uw=()=>{const{courseId:s}=Js(),{isAdmin:t}=Ae(),{toast:r}=ne(),[a,n]=x.useState(null),[i,o]=x.useState([]),[l,d]=x.useState(!0),[c,u]=x.useState(!1),[h,m]=x.useState(null),[f,g]=x.useState("create"),y=x.useCallback(async()=>{d(!0);try{const{data:j,error:k}=await av(s);if(k)throw k;n(j);const{data:O,error:B}=await hu(s);if(B)throw B;o(O||[])}catch(j){console.error("Error loading course data:",j),r({title:"",description:j.message,variant:"destructive"})}finally{d(!1)}},[s,r]);x.useEffect(()=>{t&&y()},[t,y]);const p=()=>{m(null),g("create"),u(!0)},v=j=>{m(j),g("edit"),u(!0)},w=async j=>{if(confirm("?"))try{const{error:k}=await Ow(j);if(k)throw k;r({title:"",description:""}),y()}catch(k){console.error("Error deleting content:",k),r({title:"",description:k.message,variant:"destructive"})}},b=async j=>{try{let k;if(f==="create"?k=await Iw({...j,course_id:s,order_index:i.length+1}):k=await Dw(h.id,j),k.error)throw k.error;r({title:f==="create"?"":"",description:""}),u(!1),y()}catch(k){console.error("Error saving content:",k),r({title:"",description:k.message,variant:"destructive"})}},_=j=>{switch(j){case"video":return e.jsx(qs,{className:"w-5 h-5 text-blue-500"});case"quiz":return e.jsx(ac,{className:"w-5 h-5 text-yellow-500"});case"assignment":return e.jsx(re,{className:"w-5 h-5 text-purple-500"});case"document":return e.jsx(re,{className:"w-5 h-5 text-green-500"});default:return e.jsx(re,{className:"w-5 h-5 text-gray-500"})}},N=j=>({video:"",quiz:"",assignment:"",document:"",text:""})[j]||j,P=j=>({manual:"",quiz_required:"",assignment_required:"",time_based:"",video_complete:"",sequential:""})[j]||j;return t?l?e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-orange-700",children:"..."})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsx(ge,{children:e.jsx("title",{children:a!=null&&a.title?` - ${a.title} | Admin`:" | Admin"})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx(J,{to:"/admin/courses",children:e.jsx(T,{variant:"ghost",size:"icon",children:e.jsx(Xe,{className:"w-5 h-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-orange-900",children:""}),e.jsx("p",{className:"text-orange-700",children:a==null?void 0:a.title}),a&&e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${a.is_active?"bg-green-500/30 text-green-700":"bg-red-500/30 text-red-700"}`,children:a.is_active?"":""}),!a.is_active&&e.jsx("span",{className:"text-xs text-red-600 bg-red-50 px-2 py-1 rounded-full",children:"  - "})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-orange-700",children:[": ",i.length," "]}),e.jsxs(T,{onClick:p,className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),""]})]})]}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsxs("div",{className:"glass-effect p-12 rounded-xl text-center",children:[e.jsx(re,{className:"w-16 h-16 text-orange-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-orange-900 mb-2",children:""}),e.jsx("p",{className:"text-orange-700 mb-4",children:""}),e.jsxs(T,{onClick:p,children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),""]})]}):i.map((j,k)=>e.jsx(R.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass-effect p-4 rounded-xl",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"cursor-move text-orange-600 hover:text-orange-500",children:e.jsx($m,{className:"w-5 h-5"})}),e.jsx("div",{className:"text-sm font-medium text-orange-700 w-8",children:j.order_index}),e.jsx("div",{className:"flex-shrink-0",children:_(j.content_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-900 truncate",children:j.title}),e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-orange-200 text-orange-800",children:N(j.content_type)})]}),j.description&&e.jsx("p",{className:"text-orange-700 text-sm mt-1 truncate",children:j.description}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-orange-600",children:[j.duration_minutes>0&&e.jsxs("span",{children:[": ",j.duration_minutes," "]}),j.is_free&&e.jsx("span",{className:"text-green-400",children:""}),j.completion_type&&j.completion_type!=="manual"&&e.jsx("span",{className:"px-2 py-1 rounded bg-blue-100 text-blue-700",children:P(j.completion_type)}),!j.is_required&&e.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-600",children:""})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{to:`/courses/${s}/learn`,target:"_blank",children:e.jsx(T,{size:"sm",variant:"ghost",title:"",children:e.jsx(ke,{className:"w-4 h-4"})})}),j.content_type==="assignment"&&j.assignment_id&&e.jsx(J,{to:`/admin/assignments/${j.assignment_id}/grading`,children:e.jsx(T,{size:"sm",variant:"ghost",className:"text-orange-800 hover:text-orange-700",title:"",children:e.jsx(Es,{className:"w-4 h-4"})})}),e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>v(j),title:"",children:e.jsx(Bs,{className:"w-4 h-4"})}),e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>w(j.id),className:"text-red-800 hover:text-red-700",title:"",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]})},j.id))}),e.jsx(xe,{children:c&&e.jsx(Fw,{mode:f,content:h,onSave:b,onClose:()=>u(!1)})})]}):e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-orange-900 mb-2",children:""}),e.jsx("p",{className:"text-orange-700",children:""})]})})},Vw=({submission:s,assignment:t,onGrade:r})=>{var h,m;const a=s.score!==null,n=s.is_late,i=new Date(s.submitted_at),o=n&&t.due_date?Math.ceil((i-new Date(t.due_date))/(1e3*60*60*24)):0,l=async(f,g)=>{try{const{data:y,error:p}=await E.storage.from("course-files").download(g);if(p)throw p;const v=URL.createObjectURL(y),w=document.createElement("a");w.href=v,w.download=f,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(v)}catch(y){console.error("Download error:",y),alert("")}},d=()=>a?"text-green-400":n?"text-red-400":"text-yellow-400",c=()=>a?e.jsx(be,{className:"w-4 h-4"}):n?e.jsx(kt,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"}),u=()=>a?` (${s.score}/${t.max_score})`:n?` ${o} `:"";return e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-6 rounded-xl hover:bg-slate-700/30 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mr-3",children:e.jsx(tt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:((h=s.user_profiles)==null?void 0:h.full_name)||""}),e.jsx("p",{className:"text-sm text-slate-400",children:((m=s.user_profiles)==null?void 0:m.email)||""})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-slate-400",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),": ",i.toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:`flex items-center text-sm ${d()}`,children:[c(),e.jsx("span",{className:"ml-2",children:u()})]})]}),s.notes&&e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(cs,{className:"w-4 h-4 text-slate-400 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-300 mb-1",children:":"}),e.jsx("p",{className:"text-sm text-slate-400",children:s.notes})]})]})})}),s.file_paths&&s.file_paths.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-300 mb-2",children:":"}),e.jsx("div",{className:"space-y-2",children:s.file_paths.map((f,g)=>{const y=f.split("/").pop();return e.jsxs("div",{className:"flex items-center justify-between bg-slate-700/50 p-2 rounded",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"w-4 h-4 text-blue-400 mr-2"}),e.jsx("span",{className:"text-sm text-slate-300",children:y})]}),e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>l(y,f),className:"text-blue-400 hover:text-blue-300",children:e.jsx(jt,{className:"w-4 h-4"})})]},g)})})]}),a&&s.feedback&&e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"bg-green-500/10 border border-green-500/20 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Me,{className:"w-4 h-4 text-green-400 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-300 mb-1",children:":"}),e.jsx("p",{className:"text-sm text-green-200",children:s.feedback})]})]})})})]}),e.jsxs("div",{className:"ml-6 flex flex-col space-y-2",children:[e.jsxs(T,{onClick:r,className:`${a?"bg-blue-500 hover:bg-blue-600":"bg-green-500 hover:bg-green-600"}`,children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),a?"":""]}),s.file_paths&&s.file_paths.length>0&&e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>{s.file_paths.forEach(f=>{const g=f.split("/").pop();l(g,f)})},children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),""]})]})]}),a&&e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Me,{className:"w-5 h-5 text-yellow-400 mr-2"}),e.jsx("span",{className:"text-sm text-slate-400",children:":"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl font-bold text-white mr-1",children:s.score}),e.jsxs("span",{className:"text-lg text-slate-400",children:["/ ",t.max_score]}),e.jsxs("span",{className:"ml-2 text-sm text-slate-400",children:["(",Math.round(s.score/t.max_score*100),"%)"]})]})]})})]})},zw=({submission:s,assignment:t,onSave:r,onClose:a})=>{var g,y;const{toast:n}=ne(),[i,o]=x.useState({score:s.score||"",feedback:s.feedback||"",grading_rubric_scores:s.grading_rubric_scores||{}}),[l,d]=x.useState(!1),c=["! "," "," "," ",""," "],u=async p=>{if(p.preventDefault(),!i.score||i.score===""){n({title:"",variant:"destructive"});return}const v=parseFloat(i.score);if(isNaN(v)||v<0||v>t.max_score){n({title:"",description:` 0-${t.max_score}`,variant:"destructive"});return}d(!0);try{await r({...i,score:v,graded_at:new Date().toISOString(),graded_by:"admin"})}catch(w){console.error("Grading error:",w)}finally{d(!1)}},h=async(p,v)=>{try{const{data:w,error:b}=await E.storage.from("course-files").download(v);if(b)throw b;const _=URL.createObjectURL(w),N=document.createElement("a");N.href=_,N.download=p,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(_)}catch(w){console.error("Download error:",w),n({title:"",variant:"destructive"})}},m=p=>{const v=p/t.max_score*100;return v>=80?"text-green-400":v>=70?"text-yellow-400":v>=60?"text-orange-400":"text-red-400"},f=p=>{const v=p/t.max_score*100;return v>=80?"A":v>=70?"B":v>=60?"C":v>=50?"D":"F"};return e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:a,children:e.jsxs(R.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-effect rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:p=>p.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:""}),e.jsx("p",{className:"text-slate-400 mt-1",children:t.title})]}),e.jsx(T,{variant:"ghost",size:"icon",onClick:a,children:e.jsx(ve,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row h-full max-h-[calc(90vh-88px)]",children:[e.jsxs("div",{className:"lg:w-1/2 p-6 border-r border-white/10 overflow-y-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mr-3",children:e.jsx(tt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:((g=s.user_profiles)==null?void 0:g.full_name)||""}),e.jsx("p",{className:"text-sm text-slate-400",children:(y=s.user_profiles)==null?void 0:y.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-slate-400",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),": ",new Date(s.submitted_at).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),s.is_late&&e.jsxs("div",{className:"flex items-center text-sm text-red-400",children:[e.jsx(kt,{className:"w-4 h-4 mr-2"}),""]})]})]}),s.notes&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:":"}),e.jsx("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-slate-300",children:s.notes})})]}),s.file_paths&&s.file_paths.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:":"}),e.jsx("div",{className:"space-y-2",children:s.file_paths.map((p,v)=>{const w=p.split("/").pop();return e.jsxs("div",{className:"flex items-center justify-between bg-slate-700/50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"w-4 h-4 text-blue-400 mr-2"}),e.jsx("span",{className:"text-sm text-slate-300",children:w})]}),e.jsx(T,{size:"sm",variant:"ghost",onClick:()=>h(w,p),className:"text-blue-400 hover:text-blue-300",children:e.jsx(jt,{className:"w-4 h-4"})})]},v)})})]}),e.jsxs("div",{className:"bg-slate-700/30 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:":"}),e.jsx("p",{className:"text-sm text-slate-400 mb-3",children:t.instructions}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-400",children:":"}),e.jsxs("span",{className:"text-white font-semibold",children:[t.max_score," "]})]})]})]}),e.jsx("div",{className:"lg:w-1/2 p-6 overflow-y-auto",children:e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:" *"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"number",min:"0",max:t.max_score,step:"0.5",value:i.score,onChange:p=>o(v=>({...v,score:p.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white text-center text-xl font-bold",placeholder:"0",required:!0})}),e.jsxs("div",{className:"text-xl text-slate-400",children:["/ ",t.max_score]}),i.score&&e.jsx("div",{className:`text-lg font-bold ${m(parseFloat(i.score))}`,children:f(parseFloat(i.score))})]}),i.score&&e.jsx("div",{className:"mt-2 text-center",children:e.jsxs("span",{className:`text-sm ${m(parseFloat(i.score))}`,children:[Math.round(parseFloat(i.score)/t.max_score*100),"%"]})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400 mb-2",children:":"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[25,50,75,100].map(p=>{const v=Math.round(p/100*t.max_score);return e.jsxs(T,{type:"button",variant:"outline",size:"sm",onClick:()=>o(w=>({...w,score:v.toString()})),className:"text-xs",children:[p,"%"]},p)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"/"}),e.jsx("textarea",{value:i.feedback,onChange:p=>o(v=>({...v,feedback:p.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:6,placeholder:"..."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400 mb-2",children:":"}),e.jsx("div",{className:"space-y-2",children:c.map((p,v)=>e.jsx("button",{type:"button",onClick:()=>o(w=>({...w,feedback:w.feedback?`${w.feedback}

${p}`:p})),className:"w-full text-left p-2 text-xs bg-slate-700/50 hover:bg-slate-700 rounded text-slate-300 hover:text-white transition-colors",children:p},v))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-white/10",children:[e.jsx(T,{type:"button",variant:"outline",onClick:a,children:""}),e.jsx(T,{type:"submit",className:"bg-green-500 hover:bg-green-600",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),""]})})]})]})})]})]})})},Bw=()=>{const{assignmentId:s}=Js(),{toast:t}=ne(),[r,a]=x.useState(null),[n,i]=x.useState([]),[o,l]=x.useState(!0),[d,c]=x.useState(""),[u,h]=x.useState("all"),[m,f]=x.useState(null),[g,y]=x.useState(!1),p=x.useCallback(async()=>{l(!0);try{const{data:N,error:P}=await aw(s);if(P)throw P;a(N);const{data:j,error:k}=await nw(s);if(k)throw k;i(j||[])}catch(N){t({title:"",description:N.message,variant:"destructive"})}finally{l(!1)}},[s,t]);x.useEffect(()=>{p()},[p]);const v=N=>{f(N),y(!0)},w=async N=>{try{const{error:P}=await iw(m.id,N);if(P)throw P;t({title:"",description:` ${N.score}/${r.max_score} `}),p(),y(!1),f(null)}catch(P){t({title:"",description:P.message,variant:"destructive"})}},b=n.filter(N=>{var k,O;const P=((O=(k=N.user_profiles)==null?void 0:k.full_name)==null?void 0:O.toLowerCase().includes(d.toLowerCase()))||!1,j=u==="all"||u==="graded"&&N.score!==null||u==="ungraded"&&N.score===null||u==="late"&&N.is_late;return P&&j}),_={total:n.length,graded:n.filter(N=>N.score!==null).length,ungraded:n.filter(N=>N.score===null).length,average:n.length>0&&Math.round(n.filter(N=>N.score!==null).reduce((N,P)=>N+(P.score||0),0)/n.filter(N=>N.score!==null).length)||0};return o?e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-slate-400",children:"..."})]})}):e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto px-4 py-12",children:[e.jsx(ge,{children:e.jsx("title",{children:" -  Login Learning"})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(J,{to:"/admin/courses",className:"text-slate-400 hover:text-white transition-colors mr-4",children:e.jsx(Xe,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:""})]}),r&&e.jsx("div",{className:"glass-effect p-6 rounded-xl",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:r.title}),e.jsx("p",{className:"text-slate-400 mb-4",children:r.description}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-slate-400",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Me,{className:"w-4 h-4 mr-1"}),": ",r.max_score]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),": ",r.due_date?new Date(r.due_date).toLocaleDateString("th-TH"):""]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"w-4 h-4 mr-1"}),": ",_.total," "]})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"glass-effect p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:""}),e.jsx("p",{className:"text-2xl font-bold text-white",children:_.total})]}),e.jsx(re,{className:"w-8 h-8 text-blue-400"})]})}),e.jsx("div",{className:"glass-effect p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:""}),e.jsx("p",{className:"text-2xl font-bold text-green-400",children:_.graded})]}),e.jsx(be,{className:"w-8 h-8 text-green-400"})]})}),e.jsx("div",{className:"glass-effect p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:""}),e.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:_.ungraded})]}),e.jsx(se,{className:"w-8 h-8 text-yellow-400"})]})}),e.jsx("div",{className:"glass-effect p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm",children:""}),e.jsx("p",{className:"text-2xl font-bold text-purple-400",children:_.average})]}),e.jsx(Me,{className:"w-8 h-8 text-purple-400"})]})})]}),e.jsx("div",{className:"glass-effect p-4 rounded-lg mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Wt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(Q,{type:"text",placeholder:"...",value:d,onChange:N=>c(N.target.value),className:"pl-10 bg-slate-700/50 border-slate-600 text-white"})]})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs("select",{value:u,onChange:N=>h(N.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:[e.jsx("option",{value:"all",children:""}),e.jsx("option",{value:"ungraded",children:""}),e.jsx("option",{value:"graded",children:""}),e.jsx("option",{value:"late",children:""})]})})]})}),e.jsx("div",{className:"space-y-4",children:b.length===0?e.jsxs("div",{className:"glass-effect p-8 rounded-lg text-center",children:[e.jsx(re,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400 text-lg",children:d||u!=="all"?"":""})]}):b.map(N=>e.jsx(Vw,{submission:N,assignment:r,onGrade:()=>v(N)},N.id))}),e.jsx(xe,{children:g&&m&&e.jsx(zw,{submission:m,assignment:r,onSave:w,onClose:()=>{y(!1),f(null)}})})]})},qw=async()=>{try{const{data:s,error:t}=await E.from("projects").select(`
        id,
        title,
        description,
        short_description,
        category,
        difficulty_level,
        is_featured,
        technologies,
        project_url,
        github_url,
        cover_image_url,
        image_url,
        featured_image_url,
        technology,
        demo_url,
        thumbnail_url,
        creator_id,
        created_at,
        updated_at,
        is_approved
      `).eq("is_approved",!0).order("created_at",{ascending:!1});if(t)throw t;return{data:s||[],error:null}}catch(s){return console.error("Error fetching projects:",s),{data:null,error:s}}},Gw=async s=>{try{const{data:t,error:r}=await E.from("projects").select("*").eq("id",s).eq("is_approved",!0).single();if(r)throw r;return{data:t,error:null}}catch(t){return console.error("Error fetching project:",t),{data:null,error:t}}},Hw=async s=>{try{const{data:t,error:r}=await E.from("projects").select("*").eq("id",s).single();if(r)throw r;return{data:t,error:null}}catch(t){return console.error("Error fetching project for edit:",t),{data:null,error:t}}},Ww=async()=>{try{const{data:s,error:t}=await E.from("projects").select(`
        id,
        title,
        description,
        short_description,
        category,
        difficulty_level,
        is_featured,
        technologies,
        project_url,
        github_url,
        cover_image_url,
        image_url,
        featured_image_url,
        technology,
        demo_url,
        thumbnail_url,
        creator_id,
        created_at,
        updated_at,
        is_approved
      `).eq("is_featured",!0).eq("is_approved",!0).order("created_at",{ascending:!1}).limit(6);if(t)throw t;return{data:s||[],error:null}}catch(s){return console.error("Error fetching featured projects:",s),{data:null,error:s}}},Kw=async s=>{try{const{data:{user:t},error:r}=await E.auth.getUser();if(r||!t)throw new Error("User not authenticated");const{data:a,error:n}=await E.from("projects").insert([{...s,creator_id:t.id}]).select().single();if(n)throw n;return{data:a,error:null}}catch(t){return console.error("Error creating project:",t),{data:null,error:t}}},Jw=async(s,t)=>{try{const{data:r,error:a}=await E.from("projects").update(t).eq("id",s).select().single();if(a)throw a;return{data:r,error:null}}catch(r){return console.error("Error updating project:",r),{data:null,error:r}}},Xw=async s=>{try{const{error:t}=await E.from("projects").update({is_approved:!1}).eq("id",s);if(t)throw t;return{error:null}}catch(t){return console.error("Error deleting project:",t),{error:t}}},Yw=async(s,t)=>{try{const{error:r}=await E.from("projects").update({is_approved:t}).eq("id",s);if(r)throw r;return{error:null}}catch(r){return console.error("Error toggling project approval:",r),{error:r}}},Qw=async(s,t)=>{try{const{error:r}=await E.from("projects").update({is_featured:t}).eq("id",s);if(r)throw r;return{error:null}}catch(r){return console.error("Error toggling project featured status:",r),{error:r}}},Zw=async()=>{try{const{data:s,error:t}=await E.from("projects").select("*").order("created_at",{ascending:!1});if(t)throw t;return{data:s||[],error:null}}catch(s){return console.error("Error fetching admin projects:",s),{data:null,error:s}}},ej=async()=>{try{const{count:s,error:t}=await E.from("projects").select("*",{count:"exact",head:!0}).eq("is_approved",!0);if(t)throw t;const{count:r,error:a}=await E.from("projects").select("*",{count:"exact",head:!0}).eq("is_featured",!0).eq("is_approved",!0);if(a)throw a;const{data:n,error:i}=await E.from("projects").select("category").eq("is_approved",!0);if(i)throw i;const o=new Set((n==null?void 0:n.map(l=>l.category))||[]);return{data:{totalProjects:s||0,featuredProjects:r||0,totalCategories:o.size,categories:Array.from(o)},error:null}}catch(s){return console.error("Error fetching project stats:",s),{data:null,error:s}}},il=({project:s,onView:t,onEdit:r,featured:a=!1,currentUserId:n,isAdmin:i=!1})=>{const o={initial:{opacity:0,y:20},animate:{opacity:1,y:0},hover:{y:-8,scale:1.02}},l=d=>new Date(d).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"});return e.jsxs(R.div,{variants:o,initial:"initial",animate:"animate",whileHover:"hover",transition:{duration:.3},className:`group relative bg-white rounded-2xl shadow-lg hover:shadow-2xl border border-gray-200 overflow-hidden ${a?"ring-2 ring-yellow-400 ring-opacity-50":""}`,children:[a&&e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-xs font-semibold flex items-center shadow-lg",children:[e.jsx(_e,{className:"w-3 h-3 mr-1 fill-current"}),"Featured"]})}),e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[s.cover_image_url||s.featured_image_url||s.image_url||s.thumbnail_url?e.jsx("img",{src:s.cover_image_url||s.featured_image_url||s.image_url||s.thumbnail_url,alt:s.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",onError:d=>{d.target.src="https://images.unsplash.com/photo-1461749280684-dccba630e2f6?ixlib=rb-4.0.3"}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",children:e.jsx(Ei,{className:"w-16 h-16 text-white opacity-50"})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300"}),e.jsxs("div",{className:"absolute top-4 left-4 flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[(s.project_url||s.demo_url)&&e.jsx(T,{size:"icon",variant:"ghost",className:"bg-white/90 hover:bg-white text-gray-800 rounded-full shadow-lg",onClick:d=>{d.stopPropagation(),window.open(s.project_url||s.demo_url,"_blank")},children:e.jsx(Ys,{className:"w-4 h-4"})}),s.github_url&&e.jsx(T,{size:"icon",variant:"ghost",className:"bg-white/90 hover:bg-white text-gray-800 rounded-full shadow-lg",onClick:d=>{d.stopPropagation(),window.open(s.github_url,"_blank")},children:e.jsx(Gt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 group-hover:text-indigo-600 transition-colors duration-200",children:s.title}),s.category&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:[e.jsx(mt,{className:"w-3 h-3 mr-1"}),s.category]})]}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 leading-relaxed",children:s.short_description||s.description||""})]}),s.technologies&&s.technologies.length>0?e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.technologies.slice(0,4).map((d,c)=>e.jsx("span",{className:"px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800",children:d},c)),s.technologies.length>4&&e.jsxs("span",{className:"px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-600",children:["+",s.technologies.length-4]})]})}):s.technology&&e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsxs("span",{className:"px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx(Ei,{className:"w-3 h-3 mr-1 inline"}),s.technology]})})}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(De,{className:"w-4 h-4 mr-1"}),l(s.created_at)]}),s.status&&e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="published"?"bg-green-100 text-green-800":s.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:s.status==="published"?"":s.status==="draft"?"":""})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(s.difficulty_level||s.difficulty)&&e.jsx("span",{className:`px-2 py-1 rounded-md font-medium ${(s.difficulty_level||s.difficulty)==="beginner"?"bg-green-100 text-green-700":(s.difficulty_level||s.difficulty)==="intermediate"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:(s.difficulty_level||s.difficulty)==="beginner"?"":(s.difficulty_level||s.difficulty)==="intermediate"?"":""}),s.duration_hours&&e.jsxs("span",{className:"text-gray-500 flex items-center",children:[e.jsx(De,{className:"w-3 h-3 mr-1"}),s.duration_hours," ."]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(T,{onClick:()=>t&&t(s),className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl",size:"sm",children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),""]}),(i||n&&s.creator_id===n)&&r&&e.jsx(T,{variant:"outline",onClick:d=>{d.stopPropagation(),r(s)},className:"border-blue-300 text-blue-600 hover:bg-blue-50 rounded-xl",size:"sm",title:"",children:e.jsx(Qs,{className:"w-4 h-4"})}),(s.project_url||s.demo_url)&&e.jsx(T,{variant:"outline",onClick:d=>{d.stopPropagation(),window.open(s.project_url||s.demo_url,"_blank")},className:"border-indigo-300 text-indigo-600 hover:bg-indigo-50 rounded-xl",size:"sm",children:e.jsx(ms,{className:"w-4 h-4"})}),s.github_url&&e.jsx(T,{variant:"outline",onClick:d=>{d.stopPropagation(),window.open(s.github_url,"_blank")},className:"border-gray-300 text-gray-600 hover:bg-gray-50 rounded-xl",size:"sm",children:e.jsx(Gt,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-indigo-500 to-purple-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})},tj=({isOpen:s,onClose:t,onSuccess:r,projectId:a})=>{const{toast:n}=Et(),[i,o]=x.useState(!1),[l,d]=x.useState(!0),[c,u]=x.useState({title:"",description:"",short_description:"",category:"",difficulty_level:"beginner",duration_hours:"",is_featured:!1,technologies:[],project_url:"",github_url:"",video_url:"",cover_image_url:"",content_html:"",tags:[],status:"published"}),[h,m]=x.useState({}),[f,g]=x.useState(null),[y,p]=x.useState(!1),[v,w]=x.useState(null),[b,_]=x.useState(""),[N,P]=x.useState("");x.useEffect(()=>{s&&a&&(async()=>{if(a){d(!0);try{const{data:C,error:S}=await Hw(a);if(S){n({title:"",description:S.message,variant:"destructive"}),t();return}u({title:C.title||"",description:C.description||"",short_description:C.short_description||"",category:C.category||"",difficulty_level:C.difficulty_level||"beginner",duration_hours:C.duration_hours||"",is_featured:C.is_featured||!1,technologies:C.technologies||[],project_url:C.project_url||"",github_url:C.github_url||"",video_url:C.video_url||"",cover_image_url:C.cover_image_url||"",content_html:C.content_html||"",tags:C.tags||[],status:C.status||"published"}),C.cover_image_url&&w(C.cover_image_url)}catch(C){console.error("Error loading project:",C),n({title:"",description:"",variant:"destructive"}),t()}finally{d(!1)}}})()},[a,s,n,t]);const j=U=>{const{name:C,value:S,type:I,checked:D}=U.target;u(H=>({...H,[C]:I==="checkbox"?D:S})),h[C]&&m(H=>({...H,[C]:""}))},k=()=>{b.trim()&&!c.technologies.includes(b.trim())&&(u(U=>({...U,technologies:[...U.technologies,b.trim()]})),_(""))},O=U=>{u(C=>({...C,technologies:C.technologies.filter(S=>S!==U)}))},B=()=>{N.trim()&&!c.tags.includes(N.trim())&&(u(U=>({...U,tags:[...U.tags,N.trim()]})),P(""))},$=U=>{u(C=>({...C,tags:C.tags.filter(S=>S!==U)}))},L=()=>{const U={};return c.title.trim()||(U.title=""),c.description.trim()||(U.description=""),c.category.trim()||(U.category=""),c.project_url&&!G(c.project_url)&&(U.project_url=" URL "),c.github_url&&!G(c.github_url)&&(U.github_url=" URL "),m(U),Object.keys(U).length===0},G=U=>{try{return new URL(U),!0}catch{return!1}},M=async U=>{if(U.preventDefault(),!L()){n({title:"",description:"",variant:"destructive"});return}o(!0);try{let C={...c};if(C.duration_hours===""||C.duration_hours==="0"?C.duration_hours=null:C.duration_hours&&(C.duration_hours=parseInt(C.duration_hours)),Object.keys(C).forEach(D=>{C[D]===""&&D!=="title"&&D!=="description"&&D!=="category"&&(C[D]=null)}),(!C.technologies||C.technologies.length===0)&&(C.technologies=[]),(!C.tags||C.tags.length===0)&&(C.tags=[]),f){p(!0);const{data:D,error:H}=await ca(f);if(H)throw new Error(`: ${H.message}`);C.cover_image_url=D.publicUrl,p(!1)}const{data:S,error:I}=await Jw(a,C);if(I)throw I;n({title:"! ",description:` "${c.title}" `}),r&&r(S),t()}catch(C){console.error("Error updating project:",C),n({title:"",description:C.message,variant:"destructive"})}finally{o(!1),p(!1)}},F=U=>{const C=U.target.files[0];if(!C)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(C.type)){n({title:"",description:" (JPG, PNG, WebP )",variant:"destructive"});return}if(C.size>5*1024*1024){n({title:"",description:" 5MB",variant:"destructive"});return}g(C);const I=new FileReader;I.onload=D=>{w(D.target.result)},I.readAsDataURL(C)},A=()=>{g(null),w(c.cover_image_url);const U=document.getElementById("edit-project-image");U&&(U.value="")},z=["Web Development","Mobile App","Desktop App","IoT/Hardware","AI/Machine Learning","Data Science","Game Development","Other"],q=[{value:"beginner",label:""},{value:"intermediate",label:""},{value:"advanced",label:""}];return s?l?e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"..."})]})}):e.jsx(xe,{children:e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t,children:e.jsxs(R.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:"bg-white shadow-2xl rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-gray-200",onClick:U=>U.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-8 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:e.jsx(Pe,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:""}),e.jsx("p",{className:"text-indigo-100 mt-1",children:""})]})]}),e.jsx(T,{variant:"ghost",size:"icon",onClick:t,disabled:i,className:"text-white hover:bg-white/20 rounded-xl",children:e.jsx(ve,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"p-8",children:e.jsxs("form",{onSubmit:M,className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:e.jsx(Pe,{className:"w-4 h-4 text-white"})})," *"]}),e.jsx(Q,{name:"title",value:c.title,onChange:j,placeholder:" ",className:"bg-white border-gray-300 text-gray-800 text-lg h-12 focus:border-blue-500 focus:ring-blue-500 rounded-xl shadow-sm",error:h.title}),h.title&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),h.title]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-green-500 p-2 rounded-lg mr-3",children:e.jsx(re,{className:"w-4 h-4 text-white"})})," *"]}),e.jsx("textarea",{name:"description",value:c.description,onChange:j,placeholder:"  ...",rows:4,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-200 text-base shadow-sm resize-none"}),h.description&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),h.description]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-sky-50 p-6 rounded-xl border border-blue-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:e.jsx(re,{className:"w-4 h-4 text-white"})}),""]}),e.jsx("textarea",{name:"short_description",value:c.short_description,onChange:j,placeholder:" ...",rows:4,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-base shadow-sm resize-none"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-6 rounded-xl border border-purple-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[e.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:e.jsx(sc,{className:"w-4 h-4 text-white"})}),""]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Q,{name:"newTechnology",value:b,onChange:U=>_(U.target.value),placeholder:" React, Node.js, MongoDB",className:"bg-white border-gray-300 text-gray-800 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 rounded-xl shadow-sm",onKeyPress:U=>U.key==="Enter"&&(U.preventDefault(),k())}),e.jsx(T,{type:"button",onClick:k,className:"px-4 py-2 bg-purple-500 text-white rounded-xl",children:e.jsx(Ye,{className:"w-4 h-4"})})]}),c.technologies.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:c.technologies.map((U,C)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm",children:[U,e.jsx("button",{type:"button",onClick:()=>O(U),className:"ml-2 text-purple-600 hover:text-purple-800",children:e.jsx(ve,{className:"w-3 h-3"})})]},C))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 p-6 rounded-xl border border-pink-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[e.jsx("div",{className:"bg-pink-500 p-2 rounded-lg mr-3",children:e.jsx(mt,{className:"w-4 h-4 text-white"})}),""]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Q,{name:"newTag",value:N,onChange:U=>P(U.target.value),placeholder:" React, Frontend, Responsive",className:"bg-white border-gray-300 text-gray-800 focus:border-pink-500 focus:ring-2 focus:ring-pink-200 rounded-xl shadow-sm",onKeyPress:U=>U.key==="Enter"&&(U.preventDefault(),B())}),e.jsx(T,{type:"button",onClick:B,className:"px-4 py-2 bg-pink-500 text-white rounded-xl",children:e.jsx(Ye,{className:"w-4 h-4"})})]}),c.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:c.tags.map((U,C)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-pink-100 text-pink-800 rounded-full text-sm",children:[U,e.jsx("button",{type:"button",onClick:()=>$(U),className:"ml-2 text-pink-600 hover:text-pink-800",children:e.jsx(ve,{className:"w-3 h-3"})})]},C))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 p-6 rounded-xl border border-orange-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-orange-500 p-2 rounded-lg mr-3",children:e.jsx(mt,{className:"w-4 h-4 text-white"})})," *"]}),e.jsxs("select",{name:"category",value:c.category,onChange:j,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 h-12 shadow-sm",children:[e.jsx("option",{value:"",children:""}),z.map(U=>e.jsx("option",{value:U,children:U},U))]}),h.category&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),h.category]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 p-6 rounded-xl border border-teal-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-teal-500 p-2 rounded-lg mr-3",children:e.jsx(De,{className:"w-4 h-4 text-white"})}),""]}),e.jsx("select",{name:"difficulty_level",value:c.difficulty_level,onChange:j,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 h-12 shadow-sm",children:q.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 p-6 rounded-xl border border-indigo-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-indigo-500 p-2 rounded-lg mr-3",children:e.jsx(De,{className:"w-4 h-4 text-white"})})," ()"]}),e.jsx(Q,{name:"duration_hours",type:"number",value:c.duration_hours,onChange:j,placeholder:" 40",min:"0",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 rounded-xl shadow-sm"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 p-6 rounded-xl border border-cyan-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-cyan-500 p-2 rounded-lg mr-3",children:e.jsx(Ys,{className:"w-4 h-4 text-white"})}),"Project URL"]}),e.jsx(Q,{name:"project_url",value:c.project_url,onChange:j,placeholder:"https://example.com",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 rounded-xl shadow-sm"}),h.project_url&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),h.project_url]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 p-6 rounded-xl border border-gray-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-gray-500 p-2 rounded-lg mr-3",children:e.jsx(Gt,{className:"w-4 h-4 text-white"})}),"GitHub URL"]}),e.jsx(Q,{name:"github_url",value:c.github_url,onChange:j,placeholder:"https://github.com/username/repo",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 rounded-xl shadow-sm"}),h.github_url&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),h.github_url]})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 p-6 rounded-xl border border-yellow-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-yellow-500 p-2 rounded-lg",children:e.jsx(_e,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-gray-800 font-semibold",children:""}),e.jsx("p",{className:"text-sm text-gray-600",children:""})]}),e.jsx("input",{type:"checkbox",name:"is_featured",checked:c.is_featured,onChange:j,className:"w-5 h-5 text-yellow-600 rounded focus:ring-yellow-500 focus:ring-2"})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-rose-50 to-pink-50 p-6 rounded-xl border border-rose-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[e.jsx("div",{className:"bg-rose-500 p-2 rounded-lg mr-3",children:e.jsx(Fe,{className:"w-4 h-4 text-white"})}),""]}),e.jsxs("div",{className:"space-y-4",children:[v&&e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:v,alt:"Project preview",className:"w-48 h-32 object-cover rounded-xl border-2 border-gray-200 shadow-lg"}),e.jsx(T,{type:"button",variant:"ghost",size:"icon",onClick:A,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg",children:e.jsx(Ie,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"border-2 border-dashed border-rose-300 rounded-xl p-8 text-center hover:border-rose-400 transition-colors bg-white/50",children:[e.jsx("input",{type:"file",id:"edit-project-image",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:F,className:"hidden",disabled:y}),e.jsxs("label",{htmlFor:"edit-project-image",className:"cursor-pointer flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-rose-400 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(Fe,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-800 font-semibold text-lg",children:v?"":""}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"JPG, PNG, WebP  5MB"}),e.jsx("p",{className:"text-rose-600 text-xs mt-2 font-medium",children:""})]})]})]}),y&&e.jsxs("div",{className:"flex items-center justify-center space-x-3 bg-blue-50 p-4 rounded-xl",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),e.jsx("span",{className:"text-blue-700 font-medium",children:"..."})]})]})]}),e.jsxs("div",{className:"flex justify-center space-x-4 pt-8",children:[e.jsx(T,{type:"button",variant:"outline",onClick:t,disabled:i,className:"px-8 py-3 text-gray-600 border-gray-300 hover:bg-gray-50 rounded-xl font-medium text-lg h-14 min-w-[120px]",children:""}),e.jsx(T,{type:"submit",disabled:i||y,className:"px-12 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg h-14 min-w-[160px] shadow-lg hover:shadow-xl transition-all duration-200",children:i||y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),y?"...":"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-5 h-5 mr-3"}),""]})})]})]})})]})})}):null},sj=()=>{const s=st(),{toast:t}=Et(),{user:r,userProfile:a}=Ae(),[n,i]=x.useState([]),[o,l]=x.useState([]),[d,c]=x.useState(!0),[u,h]=x.useState(""),[m,f]=x.useState("all"),[g,y]=x.useState("all"),[p,v]=x.useState("newest"),[w,b]=x.useState("grid"),[_,N]=x.useState(!1),[P,j]=x.useState(null),[k,O]=x.useState(!1),[B,$]=x.useState(null),L=x.useCallback(async()=>{c(!0);try{const[S,I]=await Promise.all([qw(),Ww()]);if(S.error)throw S.error;if(I.error)throw I.error;i(S.data||[]),l(I.data||[])}catch(S){console.error("Error loading projects:",S),t({title:"",description:S.message,variant:"destructive"})}finally{c(!1)}},[t]);x.useEffect(()=>{L()},[L]);const G=[...new Set(n.map(S=>S.category).filter(Boolean))],M=[...new Set(n.flatMap(S=>S.technologies||[]).filter(Boolean))],F=n.filter(S=>{var W;const I=S.title.toLowerCase().includes(u.toLowerCase())||((W=S.description)==null?void 0:W.toLowerCase().includes(u.toLowerCase())),D=m==="all"||S.category===m,H=g==="all"||S.technologies&&S.technologies.includes(g);return I&&D&&H}).sort((S,I)=>{switch(p){case"newest":return new Date(I.created_at)-new Date(S.created_at);case"oldest":return new Date(S.created_at)-new Date(I.created_at);case"name":return S.title.localeCompare(I.title);default:return 0}}),A=S=>{s(`/projects/${S.id}`)},z=S=>{$(S.id),O(!0)},q=()=>{L(),O(!1),$(null),t({title:"",description:""})},U=()=>{O(!1),$(null)},C={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};return e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:C,transition:{duration:.5},className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[e.jsxs(ge,{children:[e.jsx("title",{children:" - Login Learning"}),e.jsx("meta",{name:"description",content:" Login Learning"})]}),e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs(R.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl mb-6 shadow-lg",children:e.jsx(Pe,{className:"w-10 h-10 text-white"})}),e.jsxs("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:["",e.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:" & "})]}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed",children:" "})]}),o.length>0&&e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-12",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(_e,{className:"w-6 h-6 text-yellow-500 mr-3 fill-current"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:""})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map((S,I)=>e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*I},children:e.jsx(il,{project:S,featured:!0,onView:A})},S.id))})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Wt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(Q,{type:"text",placeholder:"...",value:u,onChange:S=>h(S.target.value),className:"pl-10 h-12 bg-gray-50 border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-xl"})]}),e.jsxs(T,{variant:"outline",onClick:()=>N(!_),className:"h-12 px-6 border-gray-300 hover:bg-gray-50 rounded-xl",children:[e.jsx(Im,{className:"w-5 h-5 mr-2"}),"",e.jsx(In,{className:`w-4 h-4 ml-2 transition-transform ${_?"rotate-180":""}`})]}),e.jsxs("div",{className:"flex rounded-xl overflow-hidden border border-gray-300",children:[e.jsx(T,{variant:w==="grid"?"default":"ghost",onClick:()=>b("grid"),className:"rounded-none h-12 px-4",children:e.jsx(Om,{className:"w-5 h-5"})}),e.jsx(T,{variant:w==="list"?"default":"ghost",onClick:()=>b("list"),className:"rounded-none h-12 px-4",children:e.jsx(zm,{className:"w-5 h-5"})})]})]}),e.jsx(xe,{children:_&&e.jsx(R.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:m,onChange:S=>f(S.target.value),className:"w-full h-10 px-3 bg-gray-50 border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:""}),G.map(S=>e.jsx("option",{value:S,children:S},S))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:g,onChange:S=>y(S.target.value),className:"w-full h-10 px-3 bg-gray-50 border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:""}),M.map(S=>e.jsx("option",{value:S,children:S},S))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),e.jsxs("select",{value:p,onChange:S=>v(S.target.value),className:"w-full h-10 px-3 bg-gray-50 border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"newest",children:""}),e.jsx("option",{value:"oldest",children:""}),e.jsx("option",{value:"name",children:" A-Z"})]})]})]})})})]}),e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:d?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"..."})]}):F.length>0?e.jsx("div",{className:`grid gap-6 ${w==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:F.map((S,I)=>e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*I},children:e.jsx(il,{project:S,onView:A,onEdit:z,currentUserId:r==null?void 0:r.id,isAdmin:(a==null?void 0:a.role)==="admin"})},S.id))}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx(Pe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:""}),e.jsx("p",{className:"text-gray-500",children:""})]})}),!d&&F.length>0&&e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-center mt-8 text-gray-600",children:[" ",F.length,"  ",n.length," "]})]}),e.jsx(xe,{children:P&&e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>j(null),children:e.jsxs(R.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:S=>S.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:P.title}),e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>j(null),className:"text-gray-500 hover:text-gray-700",children:e.jsx(ve,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6",children:[P.image_url&&e.jsx("img",{src:P.image_url,alt:P.title,className:"w-full h-64 object-cover rounded-xl mb-6"}),e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("p",{className:"text-gray-600 text-lg leading-relaxed mb-6",children:P.description}),P.technologies&&P.technologies.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2",children:P.technologies.map((S,I)=>e.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm font-medium",children:S},I))})]}),e.jsxs("div",{className:"flex space-x-4 pt-6",children:[(P.project_url||P.demo_url)&&e.jsxs(T,{onClick:()=>window.open(P.project_url||P.demo_url,"_blank"),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700",children:[e.jsx(ms,{className:"w-5 h-5 mr-2"}),""]}),P.github_url&&e.jsxs(T,{variant:"outline",onClick:()=>window.open(P.github_url,"_blank"),children:[e.jsx(Gt,{className:"w-5 h-5 mr-2"}),"GitHub"]})]})]})]})]})})}),e.jsx(tj,{isOpen:k,onClose:U,onSuccess:q,projectId:B})]})},rj=()=>{const{projectId:s}=Js(),t=st(),{toast:r}=Et(),[a,n]=x.useState(null),[i,o]=x.useState(!0),[l,d]=x.useState(0),[c,u]=x.useState(!1);x.useEffect(()=>{h()},[s]);const h=async()=>{o(!0);try{const{data:p,error:v}=await Gw(s);if(v)throw v;n(p)}catch(p){console.error("Error fetching project:",p),r({title:"",description:"",variant:"destructive"}),t("/projects")}finally{o(!1)}},m=p=>new Date(p).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"}),f=p=>({React:"bg-blue-100 text-blue-800 border-blue-200",Vue:"bg-green-100 text-green-800 border-green-200",Angular:"bg-red-100 text-red-800 border-red-200","Node.js":"bg-emerald-100 text-emerald-800 border-emerald-200",Python:"bg-yellow-100 text-yellow-800 border-yellow-200",JavaScript:"bg-amber-100 text-amber-800 border-amber-200",TypeScript:"bg-indigo-100 text-indigo-800 border-indigo-200",PHP:"bg-purple-100 text-purple-800 border-purple-200",Java:"bg-orange-100 text-orange-800 border-orange-200",Arduino:"bg-teal-100 text-teal-800 border-teal-200",ESP32:"bg-cyan-100 text-cyan-800 border-cyan-200","Raspberry Pi":"bg-pink-100 text-pink-800 border-pink-200"})[p]||"bg-gray-100 text-gray-800 border-gray-200",g=async()=>{if(navigator.share)try{await navigator.share({title:a.title,text:a.short_description||a.description,url:window.location.href})}catch{}else navigator.clipboard.writeText(window.location.href),r({title:"",description:""})};if(i)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"..."})]})});if(!a)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:""}),e.jsx(T,{onClick:()=>t("/projects"),children:""})]})});const y=[a.cover_image_url||a.featured_image_url||a.image_url,...a.gallery_images||[]].filter(Boolean);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(T,{variant:"ghost",onClick:()=>t("/projects"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),""]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:g,className:"flex items-center",children:[e.jsx(Zm,{className:"w-4 h-4 mr-2"}),""]}),a.is_featured&&e.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-xs font-semibold flex items-center",children:[e.jsx(_e,{className:"w-3 h-3 mr-1 fill-current"}),"Featured"]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[y.length>0&&e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"aspect-video relative",children:[e.jsx("img",{src:y[l],alt:a.title,className:"w-full h-full object-cover",onError:p=>{p.target.src="https://images.unsplash.com/photo-1461749280684-dccba630e2f6?ixlib=rb-4.0.3"}}),a.video_url&&l===0&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(T,{size:"lg",className:"bg-black/50 hover:bg-black/70 text-white rounded-full",onClick:()=>window.open(a.video_url,"_blank"),children:e.jsx(qs,{className:"w-12 h-12"})})})]}),y.length>1&&e.jsx("div",{className:"p-4 bg-gray-50",children:e.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:y.map((p,v)=>e.jsx("button",{onClick:()=>d(v),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 ${l===v?"border-indigo-500":"border-gray-200"}`,children:e.jsx("img",{src:p,alt:`${a.title} ${v+1}`,className:"w-full h-full object-cover"})},v))})})]}),e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg p-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:a.title}),a.short_description&&e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:a.short_description})]}),a.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:""}),e.jsxs("div",{className:"prose prose-gray max-w-none",children:[e.jsx("p",{className:`text-gray-700 leading-relaxed ${!c&&a.description.length>300?"line-clamp-6":""}`,children:a.description}),a.description.length>300&&e.jsx(T,{variant:"link",onClick:()=>u(!c),className:"p-0 h-auto text-indigo-600",children:c?"":""})]})]}),a.content_html&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:""}),e.jsx("div",{className:"prose prose-gray max-w-none",dangerouslySetInnerHTML:{__html:a.content_html}})]}),a.technologies&&a.technologies.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.technologies.map((p,v)=>e.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-medium border ${f(p)}`,children:p},v))})]}),a.tags&&a.tags.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.tags.map((p,v)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-700",children:[e.jsx(mt,{className:"w-3 h-3 mr-1"}),p]},v))})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(R.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),e.jsxs("div",{className:"space-y-4",children:[a.category&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:""}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:a.category})]}),a.difficulty_level&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:""}),e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${a.difficulty_level==="beginner"?"bg-green-100 text-green-800":a.difficulty_level==="intermediate"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:a.difficulty_level==="beginner"?"":a.difficulty_level==="intermediate"?"":""})]}),a.duration_hours&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:""}),e.jsxs("span",{className:"text-sm text-gray-900 flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),a.duration_hours," "]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:""}),e.jsxs("span",{className:"text-sm text-gray-900 flex items-center",children:[e.jsx(De,{className:"w-4 h-4 mr-1"}),m(a.created_at)]})]}),a.status&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:""}),e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${a.status==="published"?"bg-green-100 text-green-800":a.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:a.status==="published"?"":a.status==="draft"?"":""})]})]})]}),e.jsxs(R.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),e.jsxs("div",{className:"space-y-3",children:[(a.project_url||a.demo_url)&&e.jsxs(T,{className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",onClick:()=>window.open(a.project_url||a.demo_url,"_blank"),children:[e.jsx(Ys,{className:"w-4 h-4 mr-2"}),""]}),a.github_url&&e.jsxs(T,{variant:"outline",className:"w-full border-gray-300 text-gray-700 hover:bg-gray-50",onClick:()=>window.open(a.github_url,"_blank"),children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),""]}),a.video_url&&e.jsxs(T,{variant:"outline",className:"w-full border-red-300 text-red-600 hover:bg-red-50",onClick:()=>window.open(a.video_url,"_blank"),children:[e.jsx(qs,{className:"w-4 h-4 mr-2"}),""]})]})]})]})]})})]})},aj=({isOpen:s,onClose:t,onSuccess:r})=>{const{toast:a}=Et(),[n,i]=x.useState(!1),[o,l]=x.useState({title:"",description:"",short_description:"",category:"",difficulty_level:"beginner",duration_hours:"",is_featured:!1,technologies:[],project_url:"",github_url:"",video_url:"",cover_image_url:"",content_html:"",tags:[],status:"published"}),[d,c]=x.useState({}),[u,h]=x.useState(null),[m,f]=x.useState(!1),[g,y]=x.useState(null),[p,v]=x.useState(""),[w,b]=x.useState(""),_=A=>{const{name:z,value:q,type:U,checked:C}=A.target;l(S=>({...S,[z]:U==="checkbox"?C:q})),d[z]&&c(S=>({...S,[z]:""}))},N=()=>{p.trim()&&!o.technologies.includes(p.trim())&&(l(A=>({...A,technologies:[...A.technologies,p.trim()]})),v(""))},P=A=>{l(z=>({...z,technologies:z.technologies.filter(q=>q!==A)}))},j=()=>{w.trim()&&!o.tags.includes(w.trim())&&(l(A=>({...A,tags:[...A.tags,w.trim()]})),b(""))},k=A=>{l(z=>({...z,tags:z.tags.filter(q=>q!==A)}))},O=()=>{const A={};return o.title.trim()||(A.title=""),o.description.trim()||(A.description=""),o.category.trim()||(A.category=""),o.project_url&&!B(o.project_url)&&(A.project_url=" URL "),o.github_url&&!B(o.github_url)&&(A.github_url=" URL "),c(A),Object.keys(A).length===0},B=A=>{try{return new URL(A),!0}catch{return!1}},$=async A=>{if(A.preventDefault(),!O()){a({title:"",description:"",variant:"destructive"});return}i(!0);try{let z={...o};if(z.duration_hours===""||z.duration_hours==="0"?z.duration_hours=null:z.duration_hours&&(z.duration_hours=parseInt(z.duration_hours)),Object.keys(z).forEach(C=>{z[C]===""&&C!=="title"&&C!=="description"&&C!=="category"&&(z[C]=null)}),(!z.technologies||z.technologies.length===0)&&(z.technologies=[]),(!z.tags||z.tags.length===0)&&(z.tags=[]),u){f(!0);const{data:C,error:S}=await ca(u);if(S)throw new Error(`: ${S.message}`);z.cover_image_url=C.publicUrl,f(!1)}const{data:q,error:U}=await Kw(z);if(U)throw U;a({title:"! ",description:` "${o.title}" `}),l({title:"",description:"",short_description:"",category:"",difficulty_level:"beginner",duration_hours:"",is_featured:!1,technologies:[],project_url:"",github_url:"",video_url:"",cover_image_url:"",content_html:"",tags:[],status:"published"}),h(null),y(null),r&&r(q),t()}catch(z){console.error("Error creating project:",z),a({title:"",description:z.message,variant:"destructive"})}finally{i(!1),f(!1)}},L=A=>{const z=A.target.files[0];if(!z)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(z.type)){a({title:"",description:" (JPG, PNG, WebP )",variant:"destructive"});return}if(z.size>5*1024*1024){a({title:"",description:" 5MB",variant:"destructive"});return}h(z);const U=new FileReader;U.onload=C=>{y(C.target.result)},U.readAsDataURL(z)},G=()=>{h(null),y(null);const A=document.getElementById("project-image");A&&(A.value="")},M=["Web Development","Mobile App","Desktop App","IoT/Hardware","AI/Machine Learning","Data Science","Game Development","Other"],F=[{value:"beginner",label:""},{value:"intermediate",label:""},{value:"advanced",label:""}];return s?e.jsx(xe,{children:e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t,children:e.jsxs(R.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:"bg-white shadow-2xl rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-gray-200",onClick:A=>A.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-8 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:e.jsx(Pe,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:""}),e.jsx("p",{className:"text-indigo-100 mt-1",children:""})]})]}),e.jsx(T,{variant:"ghost",size:"icon",onClick:t,disabled:n,className:"text-white hover:bg-white/20 rounded-xl",children:e.jsx(ve,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"p-8",children:e.jsxs("form",{onSubmit:$,className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:e.jsx(Pe,{className:"w-4 h-4 text-white"})})," *"]}),e.jsx(Q,{name:"title",value:o.title,onChange:_,placeholder:" ",className:"bg-white border-gray-300 text-gray-800 text-lg h-12 focus:border-blue-500 focus:ring-blue-500 rounded-xl shadow-sm",error:d.title}),d.title&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),d.title]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-green-500 p-2 rounded-lg mr-3",children:e.jsx(re,{className:"w-4 h-4 text-white"})})," *"]}),e.jsx("textarea",{name:"description",value:o.description,onChange:_,placeholder:"  ...",rows:4,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-200 text-base shadow-sm resize-none"}),d.description&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),d.description]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-sky-50 p-6 rounded-xl border border-blue-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:e.jsx(re,{className:"w-4 h-4 text-white"})}),""]}),e.jsx("textarea",{name:"short_description",value:o.short_description,onChange:_,placeholder:" ...",rows:4,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-base shadow-sm resize-none"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-6 rounded-xl border border-purple-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[e.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:e.jsx(sc,{className:"w-4 h-4 text-white"})}),""]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Q,{name:"newTechnology",value:p,onChange:A=>v(A.target.value),placeholder:" React, Node.js, MongoDB",className:"bg-white border-gray-300 text-gray-800 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 rounded-xl shadow-sm",onKeyPress:A=>A.key==="Enter"&&(A.preventDefault(),N())}),e.jsx(T,{type:"button",onClick:N,className:"px-4 py-2 bg-purple-500 text-white rounded-xl",children:e.jsx(Ye,{className:"w-4 h-4"})})]}),o.technologies.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:o.technologies.map((A,z)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm",children:[A,e.jsx("button",{type:"button",onClick:()=>P(A),className:"ml-2 text-purple-600 hover:text-purple-800",children:e.jsx(ve,{className:"w-3 h-3"})})]},z))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-rose-50 p-6 rounded-xl border border-pink-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[e.jsx("div",{className:"bg-pink-500 p-2 rounded-lg mr-3",children:e.jsx(mt,{className:"w-4 h-4 text-white"})}),""]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Q,{name:"newTag",value:w,onChange:A=>b(A.target.value),placeholder:" React, Frontend, Responsive",className:"bg-white border-gray-300 text-gray-800 focus:border-pink-500 focus:ring-2 focus:ring-pink-200 rounded-xl shadow-sm",onKeyPress:A=>A.key==="Enter"&&(A.preventDefault(),j())}),e.jsx(T,{type:"button",onClick:j,className:"px-4 py-2 bg-pink-500 text-white rounded-xl",children:e.jsx(Ye,{className:"w-4 h-4"})})]}),o.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:o.tags.map((A,z)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-pink-100 text-pink-800 rounded-full text-sm",children:[A,e.jsx("button",{type:"button",onClick:()=>k(A),className:"ml-2 text-pink-600 hover:text-pink-800",children:e.jsx(ve,{className:"w-3 h-3"})})]},z))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 p-6 rounded-xl border border-orange-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-orange-500 p-2 rounded-lg mr-3",children:e.jsx(mt,{className:"w-4 h-4 text-white"})})," *"]}),e.jsxs("select",{name:"category",value:o.category,onChange:_,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 h-12 shadow-sm",children:[e.jsx("option",{value:"",children:""}),M.map(A=>e.jsx("option",{value:A,children:A},A))]}),d.category&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),d.category]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 p-6 rounded-xl border border-teal-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-teal-500 p-2 rounded-lg mr-3",children:e.jsx(De,{className:"w-4 h-4 text-white"})}),""]}),e.jsx("select",{name:"difficulty_level",value:o.difficulty_level,onChange:_,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 h-12 shadow-sm",children:F.map(A=>e.jsx("option",{value:A.value,children:A.label},A.value))})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 p-6 rounded-xl border border-indigo-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-indigo-500 p-2 rounded-lg mr-3",children:e.jsx(De,{className:"w-4 h-4 text-white"})})," ()"]}),e.jsx(Q,{name:"duration_hours",type:"number",value:o.duration_hours,onChange:_,placeholder:" 40",min:"0",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 rounded-xl shadow-sm"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 p-6 rounded-xl border border-cyan-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-cyan-500 p-2 rounded-lg mr-3",children:e.jsx(Ys,{className:"w-4 h-4 text-white"})}),"Project URL"]}),e.jsx(Q,{name:"project_url",value:o.project_url,onChange:_,placeholder:"https://example.com",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 rounded-xl shadow-sm"}),d.project_url&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),d.project_url]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 p-6 rounded-xl border border-gray-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[e.jsx("div",{className:"bg-gray-500 p-2 rounded-lg mr-3",children:e.jsx(Gt,{className:"w-4 h-4 text-white"})}),"GitHub URL"]}),e.jsx(Q,{name:"github_url",value:o.github_url,onChange:_,placeholder:"https://github.com/username/repo",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 rounded-xl shadow-sm"}),d.github_url&&e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),d.github_url]})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 p-6 rounded-xl border border-yellow-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-yellow-500 p-2 rounded-lg",children:e.jsx(_e,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-gray-800 font-semibold",children:""}),e.jsx("p",{className:"text-sm text-gray-600",children:""})]}),e.jsx("input",{type:"checkbox",name:"is_featured",checked:o.is_featured,onChange:_,className:"w-5 h-5 text-yellow-600 rounded focus:ring-yellow-500 focus:ring-2"})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-rose-50 to-pink-50 p-6 rounded-xl border border-rose-200",children:[e.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[e.jsx("div",{className:"bg-rose-500 p-2 rounded-lg mr-3",children:e.jsx(Fe,{className:"w-4 h-4 text-white"})}),""]}),e.jsxs("div",{className:"space-y-4",children:[g&&e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:g,alt:"Project preview",className:"w-48 h-32 object-cover rounded-xl border-2 border-gray-200 shadow-lg"}),e.jsx(T,{type:"button",variant:"ghost",size:"icon",onClick:G,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg",children:e.jsx(Ie,{className:"w-4 h-4"})})]}),!g&&e.jsxs("div",{className:"border-2 border-dashed border-rose-300 rounded-xl p-8 text-center hover:border-rose-400 transition-colors bg-white/50",children:[e.jsx("input",{type:"file",id:"project-image",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:L,className:"hidden",disabled:m}),e.jsxs("label",{htmlFor:"project-image",className:"cursor-pointer flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-rose-400 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(Fe,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-800 font-semibold text-lg",children:""}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"JPG, PNG, WebP  5MB"}),e.jsx("p",{className:"text-rose-600 text-xs mt-2 font-medium",children:""})]})]})]}),m&&e.jsxs("div",{className:"flex items-center justify-center space-x-3 bg-blue-50 p-4 rounded-xl",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),e.jsx("span",{className:"text-blue-700 font-medium",children:"..."})]})]})]}),e.jsxs("div",{className:"flex justify-center space-x-4 pt-8",children:[e.jsx(T,{type:"button",variant:"outline",onClick:t,disabled:n,className:"px-8 py-3 text-gray-600 border-gray-300 hover:bg-gray-50 rounded-xl font-medium text-lg h-14 min-w-[120px]",children:""}),e.jsx(T,{type:"submit",disabled:n||m,className:"px-12 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg h-14 min-w-[160px] shadow-lg hover:shadow-xl transition-all duration-200",children:n||m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),m?"...":"..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-5 h-5 mr-3"}),""]})})]})]})})]})})}):null},nj=()=>{const{toast:s}=ne(),t=st(),r=qr(),[a,n]=x.useState(""),[i,o]=x.useState([]),[l,d]=x.useState(!0),[c,u]=x.useState(null),[h,m]=x.useState(!1),f=x.useCallback(async()=>{d(!0);const{data:j,error:k}=await Zw();k?s({title:"",description:k.message,variant:"destructive"}):o(j||[]),d(!1)},[s]),g=x.useCallback(async()=>{const{data:j,error:k}=await ej();!k&&j&&u(j)},[]);x.useEffect(()=>{var j;console.log("AdminProjectsPage mounted"),f(),g(),(j=r.state)!=null&&j.openCreateModal&&(console.log("Opening create modal from navigation state"),m(!0),t(r.pathname,{replace:!0}))},[f,g,r.state,t,r.pathname]),x.useEffect(()=>{console.log("Current state:",{loading:l,projects:i.length,showCreateForm:h,stats:c})},[l,i,h,c]);const y=async(j,k,O)=>{const B=!O,$=B?"":"";if(!confirm(`${$} "${k}"?`))return;const{error:L}=await Yw(j,B);L?s({title:`${$}`,description:L.message,variant:"destructive"}):(s({title:`${$}`,description:` "${k}" ${$}`}),f(),g())},p=async(j,k,O)=>{const B=!O,$=B?"":"",{error:L}=await Qw(j,B);L?s({title:`${$}`,description:L.message,variant:"destructive"}):(s({title:`${$}`,description:` "${k}" ${$}`}),f(),g())},v=async(j,k)=>{if(!confirm(` "${k}"?

 `))return;const{error:O}=await Xw(j);O?s({title:"",description:O.message,variant:"destructive"}):(s({title:"",description:` "${k}" `}),f(),g())},w=()=>{f(),g()},b=j=>{s({title:"",description:`${j} `,variant:"info"})},_=j=>new Date(j).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"}),N=i.filter(j=>{var k,O;return j.title.toLowerCase().includes(a.toLowerCase())||((k=j.category)==null?void 0:k.toLowerCase().includes(a.toLowerCase()))||((O=j.technologies)==null?void 0:O.some(B=>B.toLowerCase().includes(a.toLowerCase())))}),P={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};return e.jsxs(R.div,{initial:"initial",animate:"in",exit:"out",variants:P,className:"container mx-auto px-4 py-12",children:[e.jsxs(ge,{children:[e.jsx("title",{children:" -  Login Learning"}),e.jsx("meta",{name:"description",content:" Login Learning"})]}),e.jsxs(R.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"flex flex-col sm:flex-row justify-between items-center mb-10",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>t("/admin"),className:"mr-4 text-gray-600 hover:text-gray-900",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),""]}),e.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-purple-900 mb-4 sm:mb-0",children:[e.jsx(Pe,{className:"inline-block w-8 h-8 mr-3 text-[#667eea]"}),""]})]}),e.jsxs(T,{onClick:()=>{console.log("Create project button clicked"),m(!0)},className:"bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-white font-semibold shadow-lg",size:"lg",children:[e.jsx(Ar,{className:"w-5 h-5 mr-2"}),""]})]}),c&&e.jsxs(R.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"glass-effect p-6 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-700 text-sm",children:""}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:c.totalProjects})]}),e.jsx(Pe,{className:"w-8 h-8 text-[#667eea]"})]})}),e.jsx("div",{className:"glass-effect p-6 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-700 text-sm",children:""}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:c.featuredProjects})]}),e.jsx(_e,{className:"w-8 h-8 text-yellow-400 fill-current"})]})}),e.jsx("div",{className:"glass-effect p-6 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-700 text-sm",children:""}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:c.totalCategories})]}),e.jsx(mt,{className:"w-8 h-8 text-green-400"})]})}),e.jsx("div",{className:"glass-effect p-6 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-700 text-sm",children:""}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:"--"})]}),e.jsx(Us,{className:"w-8 h-8 text-blue-400"})]})})]}),e.jsx("div",{className:"mb-6 glass-effect p-4 rounded-xl",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Wt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx(Q,{type:"text",placeholder:" (, , )...",value:a,onChange:j=>n(j.target.value),className:"pl-10 w-full bg-slate-200 border-slate-400 text-gray-900 focus:border-[#667eea]"})]}),e.jsxs(T,{onClick:()=>{console.log("Search area create button clicked"),m(!0)},className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-6 py-2",children:[e.jsx(Ar,{className:"w-4 h-4 mr-2"}),""]})]})}),e.jsxs("div",{className:"glass-effect rounded-xl shadow-xl overflow-x-auto",children:[l?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#667eea] mx-auto mb-4"}),e.jsx("p",{className:"text-purple-700",children:"..."})]}):e.jsxs("table",{className:"w-full min-w-max text-left text-purple-800",children:[e.jsx("thead",{className:"border-b border-slate-700",children:e.jsxs("tr",{className:"bg-purple-100/30",children:[e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4",children:""}),e.jsx("th",{className:"p-4 text-center",children:""})]})}),e.jsx("tbody",{children:N.map((j,k)=>{var O,B;return e.jsxs(R.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:k*.05},className:"border-b border-slate-700/50 hover:bg-slate-700/20 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[j.image_url&&e.jsx("img",{src:j.image_url,alt:j.title,className:"w-12 h-12 object-cover rounded-lg",onError:$=>{$.target.style.display="none"}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-900",children:j.title}),e.jsx("p",{className:"text-sm text-purple-700 truncate max-w-xs",children:j.description||""})]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-500/30 text-blue-800",children:j.category||""})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1 max-w-32",children:[(O=j.technologies)==null?void 0:O.slice(0,2).map(($,L)=>e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",children:$},L)),((B=j.technologies)==null?void 0:B.length)>2&&e.jsxs("span",{className:"px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",children:["+",j.technologies.length-2]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.is_approved?"bg-green-500/30 text-green-800":"bg-red-500/30 text-red-800"}`,children:j.is_approved?"":""})}),e.jsx("td",{className:"p-4",children:e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>p(j.id,j.title,j.is_featured),className:j.is_featured?"text-yellow-500 hover:bg-yellow-500/20":"text-gray-400 hover:bg-yellow-500/20",title:j.is_featured?"":"",children:j.is_featured?e.jsx(_e,{className:"w-4 h-4 fill-current"}):e.jsx(af,{className:"w-4 h-4"})})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(De,{className:"w-4 h-4 mr-1"}),_(j.created_at)]})}),e.jsx("td",{className:"p-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[j.demo_url&&e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>window.open(j.demo_url,"_blank"),className:"text-green-400 hover:bg-green-500/20",title:"",children:e.jsx(ms,{className:"w-4 h-4"})}),j.github_url&&e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>window.open(j.github_url,"_blank"),className:"text-gray-400 hover:bg-gray-500/20",title:" GitHub",children:e.jsx(Gt,{className:"w-4 h-4"})}),e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>b(` ${j.title}`),className:"text-blue-400 hover:bg-blue-500/20",title:"",children:e.jsx(Qs,{className:"w-4 h-4"})}),e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>y(j.id,j.title,j.is_approved),className:j.is_approved?"text-orange-400 hover:bg-orange-500/20":"text-green-400 hover:bg-green-500/20",title:j.is_approved?"":"",children:e.jsx(ke,{className:"w-4 h-4"})}),e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>v(j.id,j.title),className:"text-red-400 hover:bg-red-500/20",title:"",children:e.jsx(Ie,{className:"w-4 h-4"})})]})})]},j.id)})})]}),!l&&N.length===0&&e.jsxs("div",{className:"text-center p-8",children:[e.jsx(kt,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-purple-700 text-lg",children:""}),e.jsx("p",{className:"text-purple-600 text-sm mt-2",children:""})]})]}),e.jsx(aj,{isOpen:h,onClose:()=>m(!1),onSuccess:w})]})},ij=()=>{var u,h,m,f,g,y,p;const[s,t]=x.useState(!1),[r,a]=x.useState(!1),n=qr(),{user:i,signOut:o}=Ae(),l=[{title:"Dashboard",icon:zs,path:"/admin",description:""},{title:"",icon:ae,path:"/admin/users",description:"   Admin"},{title:"",icon:fe,path:"/admin/courses",description:""},{title:"",icon:Pe,path:"/admin/projects",description:""},{title:"",icon:Us,path:"/admin/analytics",description:""},{title:"",icon:re,path:"/admin/content",description:""},{title:"",icon:cs,path:"/admin/communications",description:""},{title:"",icon:Qa,path:"/admin/security",description:""},{title:"",icon:qe,path:"/admin/settings",description:""}],d=v=>v==="/admin"?n.pathname==="/admin":n.pathname.startsWith(v),c=async()=>{try{await o()}catch(v){console.error("Error signing out:",v)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsx(xe,{children:r&&e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 lg:hidden",onClick:()=>a(!1)})}),e.jsxs(R.div,{animate:{width:s?80:280,x:r?0:-280},transition:{duration:.3,ease:"easeInOut"},className:`fixed lg:relative left-0 top-0 h-full bg-white border-r border-gray-200 shadow-lg z-50 flex flex-col ${r?"block":"hidden lg:flex"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[!s&&e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(Qa,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Admin Panel"}),e.jsx("p",{className:"text-xs text-gray-500",children:""})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>t(!s),className:"hidden lg:flex p-2",children:s?e.jsx(Wa,{className:"w-4 h-4"}):e.jsx(Lm,{className:"w-4 h-4"})}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>a(!1),className:"lg:hidden p-2",children:e.jsx(ve,{className:"w-4 h-4"})})]})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:e.jsx("div",{className:"space-y-1 px-3",children:l.map(v=>{const w=v.icon,b=d(v.path);return e.jsxs(J,{to:v.path,onClick:()=>a(!1),className:`group flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${b?"bg-indigo-50 text-indigo-700 border-r-2 border-indigo-600":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(w,{className:`flex-shrink-0 w-5 h-5 ${b?"text-indigo-600":"text-gray-400 group-hover:text-gray-600"}`}),!s&&e.jsxs(R.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"ml-3 flex-1",children:[e.jsx("div",{className:"font-medium",children:v.title}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:v.description})]})]},v.path)})})}),e.jsx("div",{className:"border-t border-gray-200 p-4",children:s?e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:((g=(f=i==null?void 0:i.user_profiles)==null?void 0:f.full_name)==null?void 0:g.charAt(0))||"A"}),e.jsx(T,{variant:"ghost",size:"sm",onClick:c,className:"p-2 text-gray-400 hover:text-red-600",title:"",children:e.jsx(Pr,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:((h=(u=i==null?void 0:i.user_profiles)==null?void 0:u.full_name)==null?void 0:h.charAt(0))||"A"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:((m=i==null?void 0:i.user_profiles)==null?void 0:m.full_name)||"Admin User"}),e.jsx("p",{className:"text-xs text-gray-500",children:""})]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:c,className:"p-2 text-gray-400 hover:text-red-600",title:"",children:e.jsx(Pr,{className:"w-4 h-4"})})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("header",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>a(!0),className:"lg:hidden p-2",children:e.jsx(rc,{className:"w-5 h-5"})}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:((y=l.find(v=>d(v.path)))==null?void 0:y.title)||"Admin Panel"}),e.jsx("p",{className:"text-sm text-gray-600",children:((p=l.find(v=>d(v.path)))==null?void 0:p.description)||""})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"hidden md:flex items-center space-x-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Wt,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent w-64"})]})}),e.jsxs(T,{variant:"ghost",size:"sm",className:"relative p-2",children:[e.jsx(Mn,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full text-xs flex items-center justify-center text-white",children:"3"})]}),e.jsx("div",{className:"hidden md:flex items-center space-x-2",children:e.jsx(J,{to:"/courses",children:e.jsx(T,{variant:"outline",size:"sm",children:""})})})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:e.jsx(bu,{})})]})]})},oj=()=>{const{toast:s}=ne(),{user:t,signOut:r,isAdmin:a}=Ae(),n=st(),[i,o]=x.useState(!1),l=async()=>{try{await r(),s({title:""}),n("/")}catch(c){s({title:"",description:c.message,variant:"destructive"})}},d=[{to:"/",label:"",icon:Fm},{to:"/courses",label:"",icon:Zl},{to:"/projects",label:"",icon:Pe},{to:"/onsite",label:" Onsite",icon:fs},{to:"/about",label:"",icon:Za},{to:"/contact",label:"",icon:zt}];return e.jsxs(R.nav,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8},className:"glass-effect fixed top-0 left-0 right-0 z-50 px-4 sm:px-6 py-2 sm:py-3 shadow-lg",children:[e.jsxs("div",{className:"max-w-screen-xl mx-auto flex items-center justify-between",children:[e.jsxs(J,{to:"/",className:"flex items-center space-x-2 flex-shrink-0",children:[e.jsx("img",{src:"/Logo.png",alt:"Login Learning Logo",className:"w-8 h-8 sm:w-10 sm:h-10 object-contain"}),e.jsx("span",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-black hidden sm:block",children:"Login Learning"})]}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-3 xl:space-x-4",children:[d.map(c=>e.jsxs(J,{to:c.to,className:"text-black hover:text-blue-700 transition-colors flex items-center space-x-1 px-2 py-1 rounded-md hover:bg-blue-50",children:[e.jsx(c.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:c.label})]},c.to)),a&&e.jsxs(J,{to:"/admin",className:"text-blue-600 hover:text-blue-800 transition-colors flex items-center space-x-1 px-2 py-1 rounded-md hover:bg-blue-50",children:[e.jsx(Ai,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:""})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 flex-shrink-0",children:[t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[e.jsx(T,{variant:"ghost",size:"sm",className:"text-black hover:bg-blue-50 hover:text-blue-700",asChild:!0,children:e.jsxs(J,{to:"/dashboard",className:"flex items-center space-x-1",children:[e.jsx(zs,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden lg:inline text-sm",children:""})]})}),e.jsxs(T,{variant:"outline",size:"sm",className:"text-black border-slate-300 hover:bg-blue-50 hover:text-blue-700 hover:border-blue-300",onClick:l,children:[e.jsx(Pr,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden lg:inline ml-1 text-sm",children:""})]})]}),e.jsx("div",{className:"md:hidden relative",children:e.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>o(!i),className:"flex items-center space-x-1 text-black hover:bg-blue-50",children:[e.jsx(Za,{className:"w-5 h-5"}),e.jsx(In,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]})})]}):e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[e.jsx(T,{variant:"ghost",size:"sm",className:"text-black hover:bg-blue-50 hover:text-blue-700 text-sm",asChild:!0,children:e.jsx(J,{to:"/login",children:""})}),e.jsx(T,{size:"sm",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 text-white text-sm",asChild:!0,children:e.jsx(J,{to:"/signup",children:""})})]}),e.jsx(T,{variant:"ghost",size:"sm",className:"lg:hidden ml-2 text-black hover:bg-blue-50",onClick:()=>o(!i),children:i?e.jsx(ve,{className:"w-5 h-5"}):e.jsx(rc,{className:"w-5 h-5"})})]})]}),e.jsx(xe,{children:i&&e.jsx(R.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"lg:hidden mt-2 px-2 pb-4 border-t border-gray-200 bg-white/95 backdrop-blur-sm",children:e.jsxs("div",{className:"space-y-2 pt-4",children:[d.map(c=>e.jsxs(J,{to:c.to,onClick:()=>o(!1),className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-black hover:bg-blue-50 hover:text-blue-700 transition-colors",children:[e.jsx(c.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:c.label})]},c.to)),a&&e.jsxs(J,{to:"/admin",onClick:()=>o(!1),className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-blue-600 hover:bg-blue-50 hover:text-blue-700 transition-colors",children:[e.jsx(Ai,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:""})]}),t&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"border-t border-gray-200 pt-2 mt-2",children:[e.jsxs(J,{to:"/dashboard",onClick:()=>o(!1),className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-black hover:bg-blue-50 hover:text-blue-700 transition-colors",children:[e.jsx(zs,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:""})]}),e.jsxs("button",{onClick:()=>{l(),o(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Pr,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:""})]})]})})]})})})]})},lj=()=>{const s={name:"Login Learning",description:" - /",address:"917  75  ",contacts:[{name:"",phone:"090-969-9578"},{name:"",phone:"083-436-0294"}],lineGroup:"https://line.me/ti/g/TbTTLXEkRS",email:"info@loginlearning.com"},t=[{name:"",address:" ,  10520"},{name:"",address:"400 . 75 ,  10700"},{name:"",address:"165/31   20110"},{name:"",address:"84/48   21000"}];return e.jsx("footer",{className:"py-12 px-6 border-t border-slate-200 bg-slate-50 backdrop-blur-md",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12",children:[e.jsxs("div",{children:[e.jsxs(J,{to:"/",className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-700 to-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(fe,{className:"w-6 h-6 text-blue-800"})}),e.jsx("span",{className:"text-2xl font-bold text-black",children:s.name})]}),e.jsx("p",{className:"text-black opacity-80 leading-relaxed mb-4",children:s.description}),e.jsxs("div",{className:"flex items-start space-x-2 text-black mb-2",children:[e.jsx(fs,{className:"w-5 h-5 mt-1 text-blue-600 shrink-0"}),e.jsx("span",{children:s.address})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-black mb-2",children:[e.jsx(ht,{className:"w-5 h-5 text-blue-600 shrink-0"}),e.jsx("a",{href:`mailto:${s.email}`,className:"hover:text-blue-700 transition-colors",children:s.email})]}),s.contacts.map(r=>e.jsxs("div",{className:"flex items-center space-x-2 text-black mb-1",children:[e.jsx(zt,{className:"w-5 h-5 text-blue-600 shrink-0"}),e.jsxs("span",{children:[r.name,": ",r.phone]})]},r.name)),e.jsxs("div",{className:"flex items-center space-x-2 text-black mt-2",children:[e.jsx(ae,{className:"w-5 h-5 text-blue-600 shrink-0"}),e.jsx("a",{href:s.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-700 transition-colors",children:"Line Group"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-black font-semibold mb-4 text-lg",children:""}),e.jsx("ul",{className:"space-y-3",children:t.map(r=>e.jsxs("li",{children:[e.jsx("p",{className:"font-medium text-black",children:r.name}),e.jsx("p",{className:"text-black text-sm",children:r.address})]},r.name))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-black font-semibold mb-4 text-lg",children:""}),e.jsxs("ul",{className:"space-y-2 text-black",children:[e.jsx("li",{children:e.jsx(J,{to:"/courses",className:"hover:text-blue-700 transition-colors",children:""})}),e.jsx("li",{children:e.jsx(J,{to:"/admissions",className:"hover:text-blue-700 transition-colors",children:""})}),e.jsx("li",{children:e.jsx(J,{to:"/about#services",className:"hover:text-blue-700 transition-colors",children:""})}),e.jsx("li",{children:e.jsx(J,{to:"/about#projects",className:"hover:text-blue-700 transition-colors",children:""})}),e.jsx("li",{children:e.jsx(J,{to:"/contact",className:"hover:text-blue-700 transition-colors",children:""})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-black font-semibold mb-4 text-lg",children:""}),e.jsxs("ul",{className:"space-y-2 text-black",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>alert(" "),className:"hover:text-blue-700 transition-colors",children:"Facebook"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>alert(" "),className:"hover:text-blue-700 transition-colors",children:"Instagram"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>alert(" "),className:"hover:text-blue-700 transition-colors",children:"YouTube"})}),e.jsx("li",{children:e.jsx("a",{href:s.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-700 transition-colors",children:"Line Official"})})]})]})]}),e.jsxs("div",{className:"border-t border-slate-300 mt-8 pt-8 text-center",children:[e.jsxs("p",{className:"text-black",children:[" ",new Date().getFullYear()," ",s.name,". ."]}),e.jsx("p",{className:"text-xs text-black mt-1",children:" "})]})]})})},wr=({children:s})=>{const{user:t,loading:r,isSupabaseConnected:a}=Ae(),n=qr();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{className:"text-white text-xl",children:"..."})}):a?t?s:e.jsx(Ia,{to:"/login",state:{from:n},replace:!0}):e.jsx(Ia,{to:"/login",state:{from:n,message:" Supabase "},replace:!0})},cj=({children:s})=>{const{user:t,loading:r,isAdmin:a,userRole:n}=Ae(),i=qr();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"..."})]})}):t?a||n==="instructor"||n==="super_admin"||n==="branch_manager"?s:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:""}),e.jsx("p",{className:"text-gray-600 mb-6",children:" "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:""})]})}):e.jsx(Ia,{to:"/login",state:{from:i},replace:!0})};class dj extends te.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Error caught by boundary:",t,r)}render(){var t;return this.state.hasError?e.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#e74c3c"},children:[e.jsx("h1",{children:"Something went wrong"}),e.jsxs("p",{children:["Error: ",(t=this.state.error)==null?void 0:t.message]}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),children:"Try Again"})]}):this.props.children}}function uj(){return e.jsx(dj,{children:e.jsxs(xl,{children:[e.jsxs(ge,{children:[e.jsx("title",{children:"Login Learning - "}),e.jsx("meta",{name:"description",content:"    24 "})]}),e.jsx(yf,{children:e.jsx(vu,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(tv,{children:e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-white to-slate-50 text-black",children:[e.jsx(oj,{}),e.jsx("main",{className:"flex-grow pt-20",children:e.jsxs(wu,{children:[e.jsx(ue,{path:"/",element:e.jsx(hv,{})}),e.jsx(ue,{path:"/about",element:e.jsx(mv,{})}),e.jsx(ue,{path:"/courses",element:e.jsx(fv,{})}),e.jsx(ue,{path:"/courses/:courseId",element:e.jsx(qv,{})}),e.jsx(ue,{path:"/projects",element:e.jsx(sj,{})}),e.jsx(ue,{path:"/projects/:projectId",element:e.jsx(rj,{})}),e.jsx(ue,{path:"/courses/:courseId/learn",element:e.jsx(wr,{children:e.jsx(uw,{})})}),e.jsx(ue,{path:"/onsite",element:e.jsx(hw,{})}),e.jsx(ue,{path:"/admissions",element:e.jsx(mw,{})}),e.jsx(ue,{path:"/contact",element:e.jsx(fw,{})}),e.jsx(ue,{path:"/login",element:e.jsx(xw,{})}),e.jsx(ue,{path:"/signup",element:e.jsx(pw,{})}),e.jsx(ue,{path:"/dashboard",element:e.jsx(wr,{children:e.jsx(gw,{})})}),e.jsx(ue,{path:"/profile",element:e.jsx(wr,{children:e.jsx(yw,{})})}),e.jsx(ue,{path:"/settings",element:e.jsx(wr,{children:e.jsx(Sw,{})})}),e.jsxs(ue,{path:"/admin/*",element:e.jsx(cj,{children:e.jsx(ij,{})}),children:[e.jsx(ue,{index:!0,element:e.jsx(Pw,{})}),e.jsx(ue,{path:"users",element:e.jsx(Aw,{})}),e.jsx(ue,{path:"courses",element:e.jsx(Mw,{})}),e.jsx(ue,{path:"courses/:courseId/content",element:e.jsx(Uw,{})}),e.jsx(ue,{path:"assignments/:assignmentId/grading",element:e.jsx(Bw,{})}),e.jsx(ue,{path:"projects",element:e.jsx(nj,{})})]})]})}),e.jsx(lj,{}),e.jsx(pf,{}),e.jsx(I0,{})]})})})})]})})}Da.createRoot(document.getElementById("root")).render(e.jsx(te.StrictMode,{children:e.jsx(uj,{})}));
