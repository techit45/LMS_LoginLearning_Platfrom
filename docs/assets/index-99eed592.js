var ju=Object.defineProperty;var Nu=(s,e,r)=>e in s?ju(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var rt=(s,e,r)=>(Nu(s,typeof e!="symbol"?e+"":e,r),r);import{r as p,a as Na,g as _a,b as re,c as _u,R as ku,d as Su,e as Be}from"./vendor-48cd178f.js";import{L as te,u as Br,a as zr,b as nl,N as Rs,B as Cu,R as Tu,c as je}from"./router-95e73c68.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var al={exports:{}},qr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eu=p,Pu=Symbol.for("react.element"),Au=Symbol.for("react.fragment"),Lu=Object.prototype.hasOwnProperty,Ru=Eu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mu={key:!0,ref:!0,__self:!0,__source:!0};function il(s,e,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Lu.call(e,n)&&!Mu.hasOwnProperty(n)&&(a[n]=e[n]);if(s&&s.defaultProps)for(n in e=s.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Pu,type:s,key:i,ref:o,props:a,_owner:Ru.current}}qr.Fragment=Au;qr.jsx=il;qr.jsxs=il;al.exports=qr;var t=al.exports,$n={},fi=Na;$n.createRoot=fi.createRoot,$n.hydrateRoot=fi.hydrateRoot;var Iu=typeof Element<"u",Ou=typeof Map=="function",Du=typeof Set=="function",$u=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function br(s,e){if(s===e)return!0;if(s&&e&&typeof s=="object"&&typeof e=="object"){if(s.constructor!==e.constructor)return!1;var r,n,a;if(Array.isArray(s)){if(r=s.length,r!=e.length)return!1;for(n=r;n--!==0;)if(!br(s[n],e[n]))return!1;return!0}var i;if(Ou&&s instanceof Map&&e instanceof Map){if(s.size!==e.size)return!1;for(i=s.entries();!(n=i.next()).done;)if(!e.has(n.value[0]))return!1;for(i=s.entries();!(n=i.next()).done;)if(!br(n.value[1],e.get(n.value[0])))return!1;return!0}if(Du&&s instanceof Set&&e instanceof Set){if(s.size!==e.size)return!1;for(i=s.entries();!(n=i.next()).done;)if(!e.has(n.value[0]))return!1;return!0}if($u&&ArrayBuffer.isView(s)&&ArrayBuffer.isView(e)){if(r=s.length,r!=e.length)return!1;for(n=r;n--!==0;)if(s[n]!==e[n])return!1;return!0}if(s.constructor===RegExp)return s.source===e.source&&s.flags===e.flags;if(s.valueOf!==Object.prototype.valueOf&&typeof s.valueOf=="function"&&typeof e.valueOf=="function")return s.valueOf()===e.valueOf();if(s.toString!==Object.prototype.toString&&typeof s.toString=="function"&&typeof e.toString=="function")return s.toString()===e.toString();if(a=Object.keys(s),r=a.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,a[n]))return!1;if(Iu&&s instanceof Element)return!1;for(n=r;n--!==0;)if(!((a[n]==="_owner"||a[n]==="__v"||a[n]==="__o")&&s.$$typeof)&&!br(s[a[n]],e[a[n]]))return!1;return!0}return s!==s&&e!==e}var Fu=function(e,r){try{return br(e,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Uu=_a(Fu);var Vu=function(s,e,r,n,a,i,o,l){if(!s){var d;if(e===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,a,i,o,l],u=0;d=new Error(e.replace(/%s/g,function(){return c[u++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}},Bu=Vu;const pi=_a(Bu);var zu=function(e,r,n,a){var i=n?n.call(a,e,r):void 0;if(i!==void 0)return!!i;if(e===r)return!0;if(typeof e!="object"||!e||typeof r!="object"||!r)return!1;var o=Object.keys(e),l=Object.keys(r);if(o.length!==l.length)return!1;for(var d=Object.prototype.hasOwnProperty.bind(r),c=0;c<o.length;c++){var u=o[c];if(!d(u))return!1;var h=e[u],m=r[u];if(i=n?n.call(a,h,m,u):void 0,i===!1||i===void 0&&h!==m)return!1}return!0};const qu=_a(zu);var ol=(s=>(s.BASE="base",s.BODY="body",s.HEAD="head",s.HTML="html",s.LINK="link",s.META="meta",s.NOSCRIPT="noscript",s.SCRIPT="script",s.STYLE="style",s.TITLE="title",s.FRAGMENT="Symbol(react.fragment)",s))(ol||{}),un={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},xi=Object.values(ol),ka={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Gu=Object.entries(ka).reduce((s,[e,r])=>(s[r]=e,s),{}),Je="data-rh",ns={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},as=(s,e)=>{for(let r=s.length-1;r>=0;r-=1){const n=s[r];if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}return null},Hu=s=>{let e=as(s,"title");const r=as(s,ns.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),r&&e)return r.replace(/%s/g,()=>e);const n=as(s,ns.DEFAULT_TITLE);return e||n||void 0},Wu=s=>as(s,ns.ON_CHANGE_CLIENT_STATE)||(()=>{}),hn=(s,e)=>e.filter(r=>typeof r[s]<"u").map(r=>r[s]).reduce((r,n)=>({...r,...n}),{}),Ku=(s,e)=>e.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,n)=>{if(!r.length){const a=Object.keys(n);for(let i=0;i<a.length;i+=1){const l=a[i].toLowerCase();if(s.indexOf(l)!==-1&&n[l])return r.concat(n)}}return r},[]),Xu=s=>console&&typeof console.warn=="function"&&console.warn(s),Ns=(s,e,r)=>{const n={};return r.filter(a=>Array.isArray(a[s])?!0:(typeof a[s]<"u"&&Xu(`Helmet: ${s} should be of type "Array". Instead found type "${typeof a[s]}"`),!1)).map(a=>a[s]).reverse().reduce((a,i)=>{const o={};i.filter(d=>{let c;const u=Object.keys(d);for(let m=0;m<u.length;m+=1){const f=u[m],x=f.toLowerCase();e.indexOf(x)!==-1&&!(c==="rel"&&d[c].toLowerCase()==="canonical")&&!(x==="rel"&&d[x].toLowerCase()==="stylesheet")&&(c=x),e.indexOf(f)!==-1&&(f==="innerHTML"||f==="cssText"||f==="itemprop")&&(c=f)}if(!c||!d[c])return!1;const h=d[c].toLowerCase();return n[c]||(n[c]={}),o[c]||(o[c]={}),n[c][h]?!1:(o[c][h]=!0,!0)}).reverse().forEach(d=>a.push(d));const l=Object.keys(o);for(let d=0;d<l.length;d+=1){const c=l[d],u={...n[c],...o[c]};n[c]=u}return a},[]).reverse()},Ju=(s,e)=>{if(Array.isArray(s)&&s.length){for(let r=0;r<s.length;r+=1)if(s[r][e])return!0}return!1},Yu=s=>({baseTag:Ku(["href"],s),bodyAttributes:hn("bodyAttributes",s),defer:as(s,ns.DEFER),encode:as(s,ns.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:hn("htmlAttributes",s),linkTags:Ns("link",["rel","href"],s),metaTags:Ns("meta",["name","charset","http-equiv","property","itemprop"],s),noscriptTags:Ns("noscript",["innerHTML"],s),onChangeClientState:Wu(s),scriptTags:Ns("script",["src","innerHTML"],s),styleTags:Ns("style",["cssText"],s),title:Hu(s),titleAttributes:hn("titleAttributes",s),prioritizeSeoTags:Ju(s,ns.PRIORITIZE_SEO_TAGS)}),ll=s=>Array.isArray(s)?s.join(""):s,Zu=(s,e)=>{const r=Object.keys(s);for(let n=0;n<r.length;n+=1)if(e[r[n]]&&e[r[n]].includes(s[r[n]]))return!0;return!1},mn=(s,e)=>Array.isArray(s)?s.reduce((r,n)=>(Zu(n,e)?r.priority.push(n):r.default.push(n),r),{priority:[],default:[]}):{default:s,priority:[]},gi=(s,e)=>({...s,[e]:void 0}),Qu=["noscript","script","style"],Fn=(s,e=!0)=>e===!1?String(s):String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),cl=s=>Object.keys(s).reduce((e,r)=>{const n=typeof s[r]<"u"?`${r}="${s[r]}"`:`${r}`;return e?`${e} ${n}`:n},""),eh=(s,e,r,n)=>{const a=cl(r),i=ll(e);return a?`<${s} ${Je}="true" ${a}>${Fn(i,n)}</${s}>`:`<${s} ${Je}="true">${Fn(i,n)}</${s}>`},th=(s,e,r=!0)=>e.reduce((n,a)=>{const i=a,o=Object.keys(i).filter(c=>!(c==="innerHTML"||c==="cssText")).reduce((c,u)=>{const h=typeof i[u]>"u"?u:`${u}="${Fn(i[u],r)}"`;return c?`${c} ${h}`:h},""),l=i.innerHTML||i.cssText||"",d=Qu.indexOf(s)===-1;return`${n}<${s} ${Je}="true" ${o}${d?"/>":`>${l}</${s}>`}`},""),dl=(s,e={})=>Object.keys(s).reduce((r,n)=>{const a=ka[n];return r[a||n]=s[n],r},e),sh=(s,e,r)=>{const n={key:e,[Je]:!0},a=dl(r,n);return[re.createElement("title",a,e)]},vr=(s,e)=>e.map((r,n)=>{const a={key:n,[Je]:!0};return Object.keys(r).forEach(i=>{const l=ka[i]||i;if(l==="innerHTML"||l==="cssText"){const d=r.innerHTML||r.cssText;a.dangerouslySetInnerHTML={__html:d}}else a[l]=r[i]}),re.createElement(s,a)}),Ue=(s,e,r=!0)=>{switch(s){case"title":return{toComponent:()=>sh(s,e.title,e.titleAttributes),toString:()=>eh(s,e.title,e.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>dl(e),toString:()=>cl(e)};default:return{toComponent:()=>vr(s,e),toString:()=>th(s,e,r)}}},rh=({metaTags:s,linkTags:e,scriptTags:r,encode:n})=>{const a=mn(s,un.meta),i=mn(e,un.link),o=mn(r,un.script);return{priorityMethods:{toComponent:()=>[...vr("meta",a.priority),...vr("link",i.priority),...vr("script",o.priority)],toString:()=>`${Ue("meta",a.priority,n)} ${Ue("link",i.priority,n)} ${Ue("script",o.priority,n)}`},metaTags:a.default,linkTags:i.default,scriptTags:o.default}},nh=s=>{const{baseTag:e,bodyAttributes:r,encode:n=!0,htmlAttributes:a,noscriptTags:i,styleTags:o,title:l="",titleAttributes:d,prioritizeSeoTags:c}=s;let{linkTags:u,metaTags:h,scriptTags:m}=s,f={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:f,linkTags:u,metaTags:h,scriptTags:m}=rh(s)),{priority:f,base:Ue("base",e,n),bodyAttributes:Ue("bodyAttributes",r,n),htmlAttributes:Ue("htmlAttributes",a,n),link:Ue("link",u,n),meta:Ue("meta",h,n),noscript:Ue("noscript",i,n),script:Ue("script",m,n),style:Ue("style",o,n),title:Ue("title",{title:l,titleAttributes:d},n)}},Un=nh,ir=[],ul=!!(typeof window<"u"&&window.document&&window.document.createElement),Vn=class{constructor(s,e){rt(this,"instances",[]);rt(this,"canUseDOM",ul);rt(this,"context");rt(this,"value",{setHelmet:s=>{this.context.helmet=s},helmetInstances:{get:()=>this.canUseDOM?ir:this.instances,add:s=>{(this.canUseDOM?ir:this.instances).push(s)},remove:s=>{const e=(this.canUseDOM?ir:this.instances).indexOf(s);(this.canUseDOM?ir:this.instances).splice(e,1)}}});this.context=s,this.canUseDOM=e||!1,e||(s.helmet=Un({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},ah={},hl=re.createContext(ah),cs,ml=(cs=class extends p.Component{constructor(r){super(r);rt(this,"helmetData");this.helmetData=new Vn(this.props.context||{},cs.canUseDOM)}render(){return re.createElement(hl.Provider,{value:this.helmetData.value},this.props.children)}},rt(cs,"canUseDOM",ul),cs),Kt=(s,e)=>{const r=document.head||document.querySelector("head"),n=r.querySelectorAll(`${s}[${Je}]`),a=[].slice.call(n),i=[];let o;return e&&e.length&&e.forEach(l=>{const d=document.createElement(s);for(const c in l)if(Object.prototype.hasOwnProperty.call(l,c))if(c==="innerHTML")d.innerHTML=l.innerHTML;else if(c==="cssText")d.styleSheet?d.styleSheet.cssText=l.cssText:d.appendChild(document.createTextNode(l.cssText));else{const u=c,h=typeof l[u]>"u"?"":l[u];d.setAttribute(c,h)}d.setAttribute(Je,"true"),a.some((c,u)=>(o=u,d.isEqualNode(c)))?a.splice(o,1):i.push(d)}),a.forEach(l=>{var d;return(d=l.parentNode)==null?void 0:d.removeChild(l)}),i.forEach(l=>r.appendChild(l)),{oldTags:a,newTags:i}},Bn=(s,e)=>{const r=document.getElementsByTagName(s)[0];if(!r)return;const n=r.getAttribute(Je),a=n?n.split(","):[],i=[...a],o=Object.keys(e);for(const l of o){const d=e[l]||"";r.getAttribute(l)!==d&&r.setAttribute(l,d),a.indexOf(l)===-1&&a.push(l);const c=i.indexOf(l);c!==-1&&i.splice(c,1)}for(let l=i.length-1;l>=0;l-=1)r.removeAttribute(i[l]);a.length===i.length?r.removeAttribute(Je):r.getAttribute(Je)!==o.join(",")&&r.setAttribute(Je,o.join(","))},ih=(s,e)=>{typeof s<"u"&&document.title!==s&&(document.title=ll(s)),Bn("title",e)},yi=(s,e)=>{const{baseTag:r,bodyAttributes:n,htmlAttributes:a,linkTags:i,metaTags:o,noscriptTags:l,onChangeClientState:d,scriptTags:c,styleTags:u,title:h,titleAttributes:m}=s;Bn("body",n),Bn("html",a),ih(h,m);const f={baseTag:Kt("base",r),linkTags:Kt("link",i),metaTags:Kt("meta",o),noscriptTags:Kt("noscript",l),scriptTags:Kt("script",c),styleTags:Kt("style",u)},x={},g={};Object.keys(f).forEach(y=>{const{newTags:v,oldTags:b}=f[y];v.length&&(x[y]=v),b.length&&(g[y]=f[y].oldTags)}),e&&e(),d(s,x,g)},_s=null,oh=s=>{_s&&cancelAnimationFrame(_s),s.defer?_s=requestAnimationFrame(()=>{yi(s,()=>{_s=null})}):(yi(s),_s=null)},lh=oh,bi=class extends p.Component{constructor(){super(...arguments);rt(this,"rendered",!1)}shouldComponentUpdate(e){return!qu(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:r}=this.props.context;let n=null;const a=Yu(e.get().map(i=>{const o={...i.props};return delete o.context,o}));ml.canUseDOM?lh(a):Un&&(n=Un(a)),r(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Dn,we=(Dn=class extends p.Component{shouldComponentUpdate(s){return!Uu(gi(this.props,"helmetData"),gi(s,"helmetData"))}mapNestedChildrenToProps(s,e){if(!e)return null;switch(s.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${s.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(s,e,r,n){return{...e,[s.type]:[...e[s.type]||[],{...r,...this.mapNestedChildrenToProps(s,n)}]}}mapObjectTypeChildren(s,e,r,n){switch(s.type){case"title":return{...e,[s.type]:n,titleAttributes:{...r}};case"body":return{...e,bodyAttributes:{...r}};case"html":return{...e,htmlAttributes:{...r}};default:return{...e,[s.type]:{...r}}}}mapArrayTypeChildrenToProps(s,e){let r={...e};return Object.keys(s).forEach(n=>{r={...r,[n]:s[n]}}),r}warnOnInvalidChildren(s,e){return pi(xi.some(r=>s.type===r),typeof s.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${xi.join(", ")} are allowed. Helmet does not support rendering <${s.type}> elements. Refer to our API for more information.`),pi(!e||typeof e=="string"||Array.isArray(e)&&!e.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${s.type}>. Did you forget to wrap your children in braces? ( <${s.type}>{\`\`}</${s.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(s,e){let r={};return re.Children.forEach(s,n=>{if(!n||!n.props)return;const{children:a,...i}=n.props,o=Object.keys(i).reduce((d,c)=>(d[Gu[c]||c]=i[c],d),{});let{type:l}=n;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(n,a),l){case"Symbol(react.fragment)":e=this.mapChildrenToProps(a,e);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(n,r,o,a);break;default:e=this.mapObjectTypeChildren(n,e,o,a);break}}),this.mapArrayTypeChildrenToProps(r,e)}render(){const{children:s,...e}=this.props;let r={...e},{helmetData:n}=e;if(s&&(r=this.mapChildrenToProps(s,r)),n&&!(n instanceof Vn)){const a=n;n=new Vn(a.context,!0),delete r.helmetData}return n?re.createElement(bi,{...r,context:n.value}):re.createElement(hl.Consumer,null,a=>re.createElement(bi,{...r,context:a}))}},rt(Dn,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Dn);function fl(s){var e,r,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var a=s.length;for(e=0;e<a;e++)s[e]&&(r=fl(s[e]))&&(n&&(n+=" "),n+=r)}else for(r in s)s[r]&&(n&&(n+=" "),n+=r);return n}function pl(){for(var s,e,r=0,n="",a=arguments.length;r<a;r++)(s=arguments[r])&&(e=fl(s))&&(n&&(n+=" "),n+=e);return n}function ch(){for(var s=0,e,r,n="";s<arguments.length;)(e=arguments[s++])&&(r=xl(e))&&(n&&(n+=" "),n+=r);return n}function xl(s){if(typeof s=="string")return s;for(var e,r="",n=0;n<s.length;n++)s[n]&&(e=xl(s[n]))&&(r&&(r+=" "),r+=e);return r}var Sa="-";function dh(s){var e=hh(s),r=s.conflictingClassGroups,n=s.conflictingClassGroupModifiers,a=n===void 0?{}:n;function i(l){var d=l.split(Sa);return d[0]===""&&d.length!==1&&d.shift(),gl(d,e)||uh(l)}function o(l,d){var c=r[l]||[];return d&&a[l]?[].concat(c,a[l]):c}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function gl(s,e){var o;if(s.length===0)return e.classGroupId;var r=s[0],n=e.nextPart.get(r),a=n?gl(s.slice(1),n):void 0;if(a)return a;if(e.validators.length!==0){var i=s.join(Sa);return(o=e.validators.find(function(l){var d=l.validator;return d(i)}))==null?void 0:o.classGroupId}}var vi=/^\[(.+)\]$/;function uh(s){if(vi.test(s)){var e=vi.exec(s)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}}function hh(s){var e=s.theme,r=s.prefix,n={nextPart:new Map,validators:[]},a=fh(Object.entries(s.classGroups),r);return a.forEach(function(i){var o=i[0],l=i[1];zn(l,n,o,e)}),n}function zn(s,e,r,n){s.forEach(function(a){if(typeof a=="string"){var i=a===""?e:wi(e,a);i.classGroupId=r;return}if(typeof a=="function"){if(mh(a)){zn(a(n),e,r,n);return}e.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(function(o){var l=o[0],d=o[1];zn(d,wi(e,l),r,n)})})}function wi(s,e){var r=s;return e.split(Sa).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function mh(s){return s.isThemeGetter}function fh(s,e){return e?s.map(function(r){var n=r[0],a=r[1],i=a.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var d=l[0],c=l[1];return[e+d,c]})):o});return[n,i]}):s}function ph(s){if(s<1)return{get:function(){},set:function(){}};var e=0,r=new Map,n=new Map;function a(i,o){r.set(i,o),e++,e>s&&(e=0,n=r,r=new Map)}return{get:function(o){var l=r.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return a(o,l),l},set:function(o,l){r.has(o)?r.set(o,l):a(o,l)}}}var yl="!";function xh(s){var e=s.separator||":",r=e.length===1,n=e[0],a=e.length;return function(o){for(var l=[],d=0,c=0,u,h=0;h<o.length;h++){var m=o[h];if(d===0){if(m===n&&(r||o.slice(h,h+a)===e)){l.push(o.slice(c,h)),c=h+a;continue}if(m==="/"){u=h;continue}}m==="["?d++:m==="]"&&d--}var f=l.length===0?o:o.substring(c),x=f.startsWith(yl),g=x?f.substring(1):f,y=u&&u>c?u-c:void 0;return{modifiers:l,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:y}}}function gh(s){if(s.length<=1)return s;var e=[],r=[];return s.forEach(function(n){var a=n[0]==="[";a?(e.push.apply(e,r.sort().concat([n])),r=[]):r.push(n)}),e.push.apply(e,r.sort()),e}function yh(s){return{cache:ph(s.cacheSize),splitModifiers:xh(s),...dh(s)}}var bh=/\s+/;function vh(s,e){var r=e.splitModifiers,n=e.getClassGroupId,a=e.getConflictingClassGroupIds,i=new Set;return s.trim().split(bh).map(function(o){var l=r(o),d=l.modifiers,c=l.hasImportantModifier,u=l.baseClassName,h=l.maybePostfixModifierPosition,m=n(h?u.substring(0,h):u),f=!!h;if(!m){if(!h)return{isTailwindClass:!1,originalClassName:o};if(m=n(u),!m)return{isTailwindClass:!1,originalClassName:o};f=!1}var x=gh(d).join(":"),g=c?x+yl:x;return{isTailwindClass:!0,modifierId:g,classGroupId:m,originalClassName:o,hasPostfixModifier:f}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,d=o.classGroupId,c=o.hasPostfixModifier,u=l+d;return i.has(u)?!1:(i.add(u),a(d,c).forEach(function(h){return i.add(l+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function wh(){for(var s=arguments.length,e=new Array(s),r=0;r<s;r++)e[r]=arguments[r];var n,a,i,o=l;function l(c){var u=e[0],h=e.slice(1),m=h.reduce(function(f,x){return x(f)},u());return n=yh(m),a=n.cache.get,i=n.cache.set,o=d,d(c)}function d(c){var u=a(c);if(u)return u;var h=vh(c,n);return i(c,h),h}return function(){return o(ch.apply(null,arguments))}}function ie(s){var e=function(n){return n[s]||[]};return e.isThemeGetter=!0,e}var bl=/^\[(?:([a-z-]+):)?(.+)\]$/i,jh=/^\d+\/\d+$/,Nh=new Set(["px","full","screen"]),_h=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,kh=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Sh=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function He(s){return Ot(s)||Nh.has(s)||jh.test(s)||qn(s)}function qn(s){return qt(s,"length",Lh)}function Ch(s){return qt(s,"size",vl)}function Th(s){return qt(s,"position",vl)}function Eh(s){return qt(s,"url",Rh)}function or(s){return qt(s,"number",Ot)}function Ot(s){return!Number.isNaN(Number(s))}function Ph(s){return s.endsWith("%")&&Ot(s.slice(0,-1))}function ks(s){return ji(s)||qt(s,"number",ji)}function ee(s){return bl.test(s)}function Ss(){return!0}function ft(s){return _h.test(s)}function Ah(s){return qt(s,"",Mh)}function qt(s,e,r){var n=bl.exec(s);return n?n[1]?n[1]===e:r(n[2]):!1}function Lh(s){return kh.test(s)}function vl(){return!1}function Rh(s){return s.startsWith("url(")}function ji(s){return Number.isInteger(Number(s))}function Mh(s){return Sh.test(s)}function Ih(){var s=ie("colors"),e=ie("spacing"),r=ie("blur"),n=ie("brightness"),a=ie("borderColor"),i=ie("borderRadius"),o=ie("borderSpacing"),l=ie("borderWidth"),d=ie("contrast"),c=ie("grayscale"),u=ie("hueRotate"),h=ie("invert"),m=ie("gap"),f=ie("gradientColorStops"),x=ie("gradientColorStopPositions"),g=ie("inset"),y=ie("margin"),v=ie("opacity"),b=ie("padding"),w=ie("saturate"),k=ie("scale"),j=ie("sepia"),T=ie("skew"),N=ie("space"),_=ie("translate"),P=function(){return["auto","contain","none"]},$=function(){return["auto","hidden","clip","visible","scroll"]},G=function(){return["auto",ee,e]},U=function(){return[ee,e]},L=function(){return["",He]},S=function(){return["auto",Ot,ee]},R=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},M=function(){return["solid","dashed","dotted","double","none"]},F=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},I=function(){return["start","end","center","between","around","evenly","stretch"]},W=function(){return["","0",ee]},B=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},D=function(){return[Ot,or]},X=function(){return[Ot,ee]};return{cacheSize:500,theme:{colors:[Ss],spacing:[He],blur:["none","",ft,ee],brightness:D(),borderColor:[s],borderRadius:["none","","full",ft,ee],borderSpacing:U(),borderWidth:L(),contrast:D(),grayscale:W(),hueRotate:X(),invert:W(),gap:U(),gradientColorStops:[s],gradientColorStopPositions:[Ph,qn],inset:G(),margin:G(),opacity:D(),padding:U(),saturate:D(),scale:D(),sepia:W(),skew:X(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",ee]}],container:["container"],columns:[{columns:[ft]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(R(),[ee])}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ks]}],basis:[{basis:G()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ee]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",ks]}],"grid-cols":[{"grid-cols":[Ss]}],"col-start-end":[{col:["auto",{span:["full",ks]},ee]}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":[Ss]}],"row-start-end":[{row:["auto",{span:[ks]},ee]}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ee]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ee]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(I())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(I(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(I(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",ee,e]}],"min-w":[{"min-w":["min","max","fit",ee,He]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[ft]},ft,ee]}],h:[{h:[ee,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ee,He]}],"max-h":[{"max-h":[ee,e,"min","max","fit"]}],"font-size":[{text:["base",ft,qn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",or]}],"font-family":[{font:[Ss]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ee]}],"line-clamp":[{"line-clamp":["none",Ot,or]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ee,He]}],"list-image":[{"list-image":["none",ee]}],"list-style-type":[{list:["none","disc","decimal",ee]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(M(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",He]}],"underline-offset":[{"underline-offset":["auto",ee,He]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(R(),[Th])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ch]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Eh]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(M(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:M()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:[""].concat(M())}],"outline-offset":[{"outline-offset":[ee,He]}],"outline-w":[{outline:[He]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[He]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",ft,Ah]}],"shadow-color":[{shadow:[Ss]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":F()}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",ft,ee]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ee]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",ee]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",ee]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[ks,ee]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ee]}],accent:[{accent:["auto",s]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ee]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ee]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[He,or]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Oh=wh(Ih);function ht(...s){return Oh(pl(s))}function Ie(s,e,{checkForDefaultPrevented:r=!0}={}){return function(a){if(s==null||s(a),r===!1||!a.defaultPrevented)return e==null?void 0:e(a)}}function Ni(s,e){if(typeof s=="function")return s(e);s!=null&&(s.current=e)}function wl(...s){return e=>{let r=!1;const n=s.map(a=>{const i=Ni(a,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():Ni(s[a],null)}}}}function Ut(...s){return p.useCallback(wl(...s),s)}function jl(s,e=[]){let r=[];function n(i,o){const l=p.createContext(o),d=r.length;r=[...r,o];const c=h=>{var v;const{scope:m,children:f,...x}=h,g=((v=m==null?void 0:m[s])==null?void 0:v[d])||l,y=p.useMemo(()=>x,Object.values(x));return t.jsx(g.Provider,{value:y,children:f})};c.displayName=i+"Provider";function u(h,m){var g;const f=((g=m==null?void 0:m[s])==null?void 0:g[d])||l,x=p.useContext(f);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,u]}const a=()=>{const i=r.map(o=>p.createContext(o));return function(l){const d=(l==null?void 0:l[s])||i;return p.useMemo(()=>({[`__scope${s}`]:{...l,[s]:d}}),[l,d])}};return a.scopeName=s,[n,Dh(a,...e)]}function Dh(...s){const e=s[0];if(s.length===1)return e;const r=()=>{const n=s.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:d,scopeName:c})=>{const h=d(i)[`__scope${c}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function kr(s){const e=Fh(s),r=p.forwardRef((n,a)=>{const{children:i,...o}=n,l=p.Children.toArray(i),d=l.find(Vh);if(d){const c=d.props.children,u=l.map(h=>h===d?p.Children.count(c)>1?p.Children.only(null):p.isValidElement(c)?c.props.children:null:h);return t.jsx(e,{...o,ref:a,children:p.isValidElement(c)?p.cloneElement(c,void 0,u):null})}return t.jsx(e,{...o,ref:a,children:i})});return r.displayName=`${s}.Slot`,r}var $h=kr("Slot");function Fh(s){const e=p.forwardRef((r,n)=>{const{children:a,...i}=r;if(p.isValidElement(a)){const o=zh(a),l=Bh(i,a.props);return a.type!==p.Fragment&&(l.ref=n?wl(n,o):o),p.cloneElement(a,l)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var Uh=Symbol("radix.slottable");function Vh(s){return p.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===Uh}function Bh(s,e){const r={...e};for(const n in e){const a=s[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const d=i(...l);return a(...l),d}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...s,...r}}function zh(s){var n,a;let e=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?s.ref:(e=(a=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:a.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?s.props.ref:s.props.ref||s.ref)}function qh(s){const e=s+"CollectionProvider",[r,n]=jl(e),[a,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:v}=g,b=re.useRef(null),w=re.useRef(new Map).current;return t.jsx(a,{scope:y,itemMap:w,collectionRef:b,children:v})};o.displayName=e;const l=s+"CollectionSlot",d=kr(l),c=re.forwardRef((g,y)=>{const{scope:v,children:b}=g,w=i(l,v),k=Ut(y,w.collectionRef);return t.jsx(d,{ref:k,children:b})});c.displayName=l;const u=s+"CollectionItemSlot",h="data-radix-collection-item",m=kr(u),f=re.forwardRef((g,y)=>{const{scope:v,children:b,...w}=g,k=re.useRef(null),j=Ut(y,k),T=i(u,v);return re.useEffect(()=>(T.itemMap.set(k,{ref:k,...w}),()=>void T.itemMap.delete(k))),t.jsx(m,{[h]:"",ref:j,children:b})});f.displayName=u;function x(g){const y=i(s+"CollectionConsumer",g);return re.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((T,N)=>w.indexOf(T.ref.current)-w.indexOf(N.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},x,n]}var Gh=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],st=Gh.reduce((s,e)=>{const r=kr(`Primitive.${e}`),n=p.forwardRef((a,i)=>{const{asChild:o,...l}=a,d=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(d,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...s,[e]:n}},{});function Nl(s,e){s&&Na.flushSync(()=>s.dispatchEvent(e))}function Vt(s){const e=p.useRef(s);return p.useEffect(()=>{e.current=s}),p.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function Hh(s,e=globalThis==null?void 0:globalThis.document){const r=Vt(s);p.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var Wh="DismissableLayer",Gn="dismissableLayer.update",Kh="dismissableLayer.pointerDownOutside",Xh="dismissableLayer.focusOutside",_i,_l=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),kl=p.forwardRef((s,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...d}=s,c=p.useContext(_l),[u,h]=p.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=p.useState({}),x=Ut(e,N=>h(N)),g=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(y),b=u?g.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,k=b>=v,j=Yh(N=>{const _=N.target,P=[...c.branches].some($=>$.contains(_));!k||P||(a==null||a(N),o==null||o(N),N.defaultPrevented||l==null||l())},m),T=Zh(N=>{const _=N.target;[...c.branches].some($=>$.contains(_))||(i==null||i(N),o==null||o(N),N.defaultPrevented||l==null||l())},m);return Hh(N=>{b===c.layers.size-1&&(n==null||n(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},m),p.useEffect(()=>{if(u)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(_i=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),ki(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=_i)}},[u,m,r,c]),p.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),ki())},[u,c]),p.useEffect(()=>{const N=()=>f({});return document.addEventListener(Gn,N),()=>document.removeEventListener(Gn,N)},[]),t.jsx(st.div,{...d,ref:x,style:{pointerEvents:w?k?"auto":"none":void 0,...s.style},onFocusCapture:Ie(s.onFocusCapture,T.onFocusCapture),onBlurCapture:Ie(s.onBlurCapture,T.onBlurCapture),onPointerDownCapture:Ie(s.onPointerDownCapture,j.onPointerDownCapture)})});kl.displayName=Wh;var Jh="DismissableLayerBranch",Sl=p.forwardRef((s,e)=>{const r=p.useContext(_l),n=p.useRef(null),a=Ut(e,n);return p.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),t.jsx(st.div,{...s,ref:a})});Sl.displayName=Jh;function Yh(s,e=globalThis==null?void 0:globalThis.document){const r=Vt(s),n=p.useRef(!1),a=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let d=function(){Cl(Kh,r,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=d,e.addEventListener("click",a.current,{once:!0})):d()}else e.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",a.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function Zh(s,e=globalThis==null?void 0:globalThis.document){const r=Vt(s),n=p.useRef(!1);return p.useEffect(()=>{const a=i=>{i.target&&!n.current&&Cl(Xh,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function ki(){const s=new CustomEvent(Gn);document.dispatchEvent(s)}function Cl(s,e,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:r});e&&a.addEventListener(s,e,{once:!0}),n?Nl(a,i):a.dispatchEvent(i)}var Qh=kl,em=Sl,zs=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},tm="Portal",Tl=p.forwardRef((s,e)=>{var l;const{container:r,...n}=s,[a,i]=p.useState(!1);zs(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?_u.createPortal(t.jsx(st.div,{...n,ref:e}),o):null});Tl.displayName=tm;function sm(s,e){return p.useReducer((r,n)=>e[r][n]??r,s)}var El=s=>{const{present:e,children:r}=s,n=rm(e),a=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),i=Ut(n.ref,nm(a));return typeof r=="function"||n.isPresent?p.cloneElement(a,{ref:i}):null};El.displayName="Presence";function rm(s){const[e,r]=p.useState(),n=p.useRef(null),a=p.useRef(s),i=p.useRef("none"),o=s?"mounted":"unmounted",[l,d]=sm(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=lr(n.current);i.current=l==="mounted"?c:"none"},[l]),zs(()=>{const c=n.current,u=a.current;if(u!==s){const m=i.current,f=lr(c);s?d("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?d("UNMOUNT"):d(u&&m!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=s}},[s,d]),zs(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=f=>{const g=lr(n.current).includes(f.animationName);if(f.target===e&&g&&(d("ANIMATION_END"),!a.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},m=f=>{f.target===e&&(i.current=lr(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(c=>{n.current=c?getComputedStyle(c):null,r(c)},[])}}function lr(s){return(s==null?void 0:s.animationName)||"none"}function nm(s){var n,a;let e=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?s.ref:(e=(a=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:a.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?s.props.ref:s.props.ref||s.ref)}var am=ku[" useInsertionEffect ".trim().toString()]||zs;function im({prop:s,defaultProp:e,onChange:r=()=>{},caller:n}){const[a,i,o]=om({defaultProp:e,onChange:r}),l=s!==void 0,d=l?s:a;{const u=p.useRef(s!==void 0);p.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const c=p.useCallback(u=>{var h;if(l){const m=lm(u)?u(s):u;m!==s&&((h=o.current)==null||h.call(o,m))}else i(u)},[l,s,i,o]);return[d,c]}function om({defaultProp:s,onChange:e}){const[r,n]=p.useState(s),a=p.useRef(r),i=p.useRef(e);return am(()=>{i.current=e},[e]),p.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function lm(s){return typeof s=="function"}var cm=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),dm="VisuallyHidden",Ca=p.forwardRef((s,e)=>t.jsx(st.span,{...s,ref:e,style:{...cm,...s.style}}));Ca.displayName=dm;var Ta="ToastProvider",[Ea,um,hm]=qh("Toast"),[Pl,oj]=jl("Toast",[hm]),[mm,Gr]=Pl(Ta),Al=s=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=s,[l,d]=p.useState(null),[c,u]=p.useState(0),h=p.useRef(!1),m=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ta}\`. Expected non-empty \`string\`.`),t.jsx(Ea.Provider,{scope:e,children:t.jsx(mm,{scope:e,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:c,viewport:l,onViewportChange:d,onToastAdd:p.useCallback(()=>u(f=>f+1),[]),onToastRemove:p.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};Al.displayName=Ta;var Ll="ToastViewport",fm=["F8"],Hn="toast.viewportPause",Wn="toast.viewportResume",Rl=p.forwardRef((s,e)=>{const{__scopeToast:r,hotkey:n=fm,label:a="Notifications ({hotkey})",...i}=s,o=Gr(Ll,r),l=um(r),d=p.useRef(null),c=p.useRef(null),u=p.useRef(null),h=p.useRef(null),m=Ut(e,h,o.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;p.useEffect(()=>{const y=v=>{var w;n.length!==0&&n.every(k=>v[k]||v.code===k)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),p.useEffect(()=>{const y=d.current,v=h.current;if(x&&y&&v){const b=()=>{if(!o.isClosePausedRef.current){const T=new CustomEvent(Hn);v.dispatchEvent(T),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const T=new CustomEvent(Wn);v.dispatchEvent(T),o.isClosePausedRef.current=!1}},k=T=>{!y.contains(T.relatedTarget)&&w()},j=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",b),y.addEventListener("focusout",k),y.addEventListener("pointermove",b),y.addEventListener("pointerleave",j),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",b),y.removeEventListener("focusout",k),y.removeEventListener("pointermove",b),y.removeEventListener("pointerleave",j),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[x,o.isClosePausedRef]);const g=p.useCallback(({tabbingDirection:y})=>{const b=l().map(w=>{const k=w.ref.current,j=[k,...Cm(k)];return y==="forwards"?j:j.reverse()});return(y==="forwards"?b.reverse():b).flat()},[l]);return p.useEffect(()=>{const y=h.current;if(y){const v=b=>{var j,T,N;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const _=document.activeElement,P=b.shiftKey;if(b.target===y&&P){(j=c.current)==null||j.focus();return}const U=g({tabbingDirection:P?"backwards":"forwards"}),L=U.findIndex(S=>S===_);fn(U.slice(L+1))?b.preventDefault():P?(T=c.current)==null||T.focus():(N=u.current)==null||N.focus()}};return y.addEventListener("keydown",v),()=>y.removeEventListener("keydown",v)}},[l,g]),t.jsxs(em,{ref:d,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&t.jsx(Kn,{ref:c,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});fn(y)}}),t.jsx(Ea.Slot,{scope:r,children:t.jsx(st.ol,{tabIndex:-1,...i,ref:m})}),x&&t.jsx(Kn,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});fn(y)}})]})});Rl.displayName=Ll;var Ml="ToastFocusProxy",Kn=p.forwardRef((s,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=s,i=Gr(Ml,r);return t.jsx(Ca,{"aria-hidden":!0,tabIndex:0,...a,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const l=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(l))&&n()}})});Kn.displayName=Ml;var Zs="Toast",pm="toast.swipeStart",xm="toast.swipeMove",gm="toast.swipeCancel",ym="toast.swipeEnd",Il=p.forwardRef((s,e)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=s,[l,d]=im({prop:n,defaultProp:a??!0,onChange:i,caller:Zs});return t.jsx(El,{present:r||l,children:t.jsx(wm,{open:l,...o,ref:e,onClose:()=>d(!1),onPause:Vt(s.onPause),onResume:Vt(s.onResume),onSwipeStart:Ie(s.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ie(s.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ie(s.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ie(s.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),d(!1)})})})});Il.displayName=Zs;var[bm,vm]=Pl(Zs,{onClose(){}}),wm=p.forwardRef((s,e)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:d,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:f,...x}=s,g=Gr(Zs,r),[y,v]=p.useState(null),b=Ut(e,S=>v(S)),w=p.useRef(null),k=p.useRef(null),j=a||g.duration,T=p.useRef(0),N=p.useRef(j),_=p.useRef(0),{onToastAdd:P,onToastRemove:$}=g,G=Vt(()=>{var R;(y==null?void 0:y.contains(document.activeElement))&&((R=g.viewport)==null||R.focus()),o()}),U=p.useCallback(S=>{!S||S===1/0||(window.clearTimeout(_.current),T.current=new Date().getTime(),_.current=window.setTimeout(G,S))},[G]);p.useEffect(()=>{const S=g.viewport;if(S){const R=()=>{U(N.current),c==null||c()},M=()=>{const F=new Date().getTime()-T.current;N.current=N.current-F,window.clearTimeout(_.current),d==null||d()};return S.addEventListener(Hn,M),S.addEventListener(Wn,R),()=>{S.removeEventListener(Hn,M),S.removeEventListener(Wn,R)}}},[g.viewport,j,d,c,U]),p.useEffect(()=>{i&&!g.isClosePausedRef.current&&U(j)},[i,j,g.isClosePausedRef,U]),p.useEffect(()=>(P(),()=>$()),[P,$]);const L=p.useMemo(()=>y?Bl(y):null,[y]);return g.viewport?t.jsxs(t.Fragment,{children:[L&&t.jsx(jm,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:L}),t.jsx(bm,{scope:r,onClose:G,children:Na.createPortal(t.jsx(Ea.ItemSlot,{scope:r,children:t.jsx(Qh,{asChild:!0,onEscapeKeyDown:Ie(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||G(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:t.jsx(st.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...x,ref:b,style:{userSelect:"none",touchAction:"none",...s.style},onKeyDown:Ie(s.onKeyDown,S=>{S.key==="Escape"&&(l==null||l(S.nativeEvent),S.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,G()))}),onPointerDown:Ie(s.onPointerDown,S=>{S.button===0&&(w.current={x:S.clientX,y:S.clientY})}),onPointerMove:Ie(s.onPointerMove,S=>{if(!w.current)return;const R=S.clientX-w.current.x,M=S.clientY-w.current.y,F=!!k.current,I=["left","right"].includes(g.swipeDirection),W=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,B=I?W(0,R):0,D=I?0:W(0,M),X=S.pointerType==="touch"?10:2,Z={x:B,y:D},Ze={originalEvent:S,delta:Z};F?(k.current=Z,cr(xm,h,Ze,{discrete:!1})):Si(Z,g.swipeDirection,X)?(k.current=Z,cr(pm,u,Ze,{discrete:!1}),S.target.setPointerCapture(S.pointerId)):(Math.abs(R)>X||Math.abs(M)>X)&&(w.current=null)}),onPointerUp:Ie(s.onPointerUp,S=>{const R=k.current,M=S.target;if(M.hasPointerCapture(S.pointerId)&&M.releasePointerCapture(S.pointerId),k.current=null,w.current=null,R){const F=S.currentTarget,I={originalEvent:S,delta:R};Si(R,g.swipeDirection,g.swipeThreshold)?cr(ym,f,I,{discrete:!0}):cr(gm,m,I,{discrete:!0}),F.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),jm=s=>{const{__scopeToast:e,children:r,...n}=s,a=Gr(Zs,e),[i,o]=p.useState(!1),[l,d]=p.useState(!1);return km(()=>o(!0)),p.useEffect(()=>{const c=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(c)},[]),l?null:t.jsx(Tl,{asChild:!0,children:t.jsx(Ca,{...n,children:i&&t.jsxs(t.Fragment,{children:[a.label," ",r]})})})},Nm="ToastTitle",Ol=p.forwardRef((s,e)=>{const{__scopeToast:r,...n}=s;return t.jsx(st.div,{...n,ref:e})});Ol.displayName=Nm;var _m="ToastDescription",Dl=p.forwardRef((s,e)=>{const{__scopeToast:r,...n}=s;return t.jsx(st.div,{...n,ref:e})});Dl.displayName=_m;var $l="ToastAction",Fl=p.forwardRef((s,e)=>{const{altText:r,...n}=s;return r.trim()?t.jsx(Vl,{altText:r,asChild:!0,children:t.jsx(Pa,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${$l}\`. Expected non-empty \`string\`.`),null)});Fl.displayName=$l;var Ul="ToastClose",Pa=p.forwardRef((s,e)=>{const{__scopeToast:r,...n}=s,a=vm(Ul,r);return t.jsx(Vl,{asChild:!0,children:t.jsx(st.button,{type:"button",...n,ref:e,onClick:Ie(s.onClick,a.onClose)})})});Pa.displayName=Ul;var Vl=p.forwardRef((s,e)=>{const{__scopeToast:r,altText:n,...a}=s;return t.jsx(st.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:e})});function Bl(s){const e=[];return Array.from(s.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),Sm(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Bl(n))}}),e}function cr(s,e,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:r});e&&a.addEventListener(s,e,{once:!0}),n?Nl(a,i):a.dispatchEvent(i)}var Si=(s,e,r=0)=>{const n=Math.abs(s.x),a=Math.abs(s.y),i=n>a;return e==="left"||e==="right"?i&&n>r:!i&&a>r};function km(s=()=>{}){const e=Vt(s);zs(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function Sm(s){return s.nodeType===s.ELEMENT_NODE}function Cm(s){const e=[],r=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function fn(s){const e=document.activeElement;return s.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var Tm=Al,zl=Rl,ql=Il,Gl=Ol,Hl=Dl,Wl=Fl,Kl=Pa;const Ci=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,Ti=pl,Xl=(s,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return Ti(s,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=e,o=Object.keys(a).map(c=>{const u=r==null?void 0:r[c],h=i==null?void 0:i[c];if(u===null)return null;const m=Ci(u)||Ci(h);return a[c][m]}),l=r&&Object.entries(r).reduce((c,u)=>{let[h,m]=u;return m===void 0||(c[h]=m),c},{}),d=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:h,className:m,...f}=u;return Object.entries(f).every(x=>{let[g,y]=x;return Array.isArray(y)?y.includes({...i,...l}[g]):{...i,...l}[g]===y})?[...c,h,m]:c},[]);return Ti(s,o,d,r==null?void 0:r.class,r==null?void 0:r.className)};var Em={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Pm=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),O=(s,e)=>{const r=p.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...d},c)=>p.createElement("svg",{ref:c,...Em,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:`lucide lucide-${Pm(s)}`,...d},[...e.map(([u,h])=>p.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${s}`,r},ye=O("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),jt=O("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Bt=O("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Jl=O("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ge=O("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),Yl=O("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),Zl=O("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Am=O("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Ql=O("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Sr=O("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]]),oe=O("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Lm=O("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),ec=O("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Rm=O("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),xs=O("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),tc=O("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Pe=O("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ds=O("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Mm=O("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),sc=O("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Ei=O("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),rc=O("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ce=O("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Xn=O("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Aa=O("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Cr=O("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ve=O("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Tr=O("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Im=O("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ze=O("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),nc=O("FileArchive",[["path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2",key:"1u864v"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]),Y=O("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Er=O("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Om=O("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),Dm=O("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),$m=O("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Fm=O("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),Um=O("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Vm=O("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),Jn=O("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Bm=O("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),zm=O("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),qs=O("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),La=O("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ac=O("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),qm=O("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Pi=O("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Gs=O("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Oe=O("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Gm=O("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Hm=O("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ct=O("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),us=O("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ic=O("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),Wm=O("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]),wr=O("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),is=O("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Km=O("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Xm=O("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),hs=O("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Ra=O("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),$t=O("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Yn=O("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]),Ms=O("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),Pr=O("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Jm=O("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),zt=O("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ym=O("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Zm=O("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),oc=O("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Qm=O("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),ef=O("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),tf=O("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),gs=O("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),sf=O("School",[["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4",key:"cpkuc4"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),Hr=O("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ma=O("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ys=O("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),rf=O("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),nf=O("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),af=O("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),of=O("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),lf=O("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),cf=O("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),Ar=O("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),df=O("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Wr=O("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Ye=O("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),lc=O("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ft=O("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Zn=O("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Hs=O("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),uf=O("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),cc=O("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),dc=O("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),dt=O("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),de=O("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),uc=O("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),hf=O("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),mf=O("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),Ws=O("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),tt=O("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),hc=O("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),ff=O("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),pf=O("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),xf=Tm,mc=re.forwardRef(({className:s,...e},r)=>t.jsx(zl,{ref:r,className:ht("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...e}));mc.displayName=zl.displayName;const gf=Xl("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),fc=re.forwardRef(({className:s,variant:e,...r},n)=>t.jsx(ql,{ref:n,className:ht(gf({variant:e}),s),...r}));fc.displayName=ql.displayName;const yf=re.forwardRef(({className:s,...e},r)=>t.jsx(Wl,{ref:r,className:ht("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...e}));yf.displayName=Wl.displayName;const pc=re.forwardRef(({className:s,...e},r)=>t.jsx(Kl,{ref:r,className:ht("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...e,children:t.jsx(tt,{className:"h-4 w-4"})}));pc.displayName=Kl.displayName;const xc=re.forwardRef(({className:s,...e},r)=>t.jsx(Gl,{ref:r,className:ht("text-sm font-semibold",s),...e}));xc.displayName=Gl.displayName;const gc=re.forwardRef(({className:s,...e},r)=>t.jsx(Hl,{ref:r,className:ht("text-sm opacity-90",s),...e}));gc.displayName=Hl.displayName;const bf=1;let pn=0;function vf(){return pn=(pn+1)%Number.MAX_VALUE,pn.toString()}const ke={state:{toasts:[]},listeners:[],getState:()=>ke.state,setState:s=>{typeof s=="function"?ke.state=s(ke.state):ke.state={...ke.state,...s},ke.listeners.forEach(e=>e(ke.state))},subscribe:s=>(ke.listeners.push(s),()=>{ke.listeners=ke.listeners.filter(e=>e!==s)})},wf=({...s})=>{const e=vf(),r=a=>ke.setState(i=>({...i,toasts:i.toasts.map(o=>o.id===e?{...o,...a}:o)})),n=()=>ke.setState(a=>({...a,toasts:a.toasts.filter(i=>i.id!==e)}));return ke.setState(a=>({...a,toasts:[{...s,id:e,dismiss:n},...a.toasts].slice(0,bf)})),{id:e,dismiss:n,update:r}};function se(){const[s,e]=p.useState(ke.getState());return p.useEffect(()=>ke.subscribe(n=>{e(n)}),[]),p.useEffect(()=>{const r=[];return s.toasts.forEach(n=>{if(n.duration===1/0)return;const a=setTimeout(()=>{n.dismiss()},n.duration||5e3);r.push(a)}),()=>{r.forEach(n=>clearTimeout(n))}},[s.toasts]),{toast:wf,toasts:s.toasts}}function jf(){const{toasts:s}=se();return t.jsxs(xf,{children:[s.map(({id:e,title:r,description:n,action:a,dismiss:i,...o})=>t.jsxs(fc,{...o,children:[t.jsxs("div",{className:"grid gap-1",children:[r&&t.jsx(xc,{children:r}),n&&t.jsx(gc,{children:n})]}),a,t.jsx(pc,{})]},e)),t.jsx(mc,{})]})}const Nf="modulepreload",_f=function(s){return"/TestLogin/"+s},Ai={},Qs=function(e,r,n){if(!r||r.length===0)return e();const a=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=_f(i),i in Ai)return;Ai[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let u=a.length-1;u>=0;u--){const h=a[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Nf,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},kf=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...r)=>Qs(()=>Promise.resolve().then(()=>bs),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Ia extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Sf extends Ia{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Cf extends Ia{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Tf extends Ia{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qn;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Qn||(Qn={}));var Ef=globalThis&&globalThis.__awaiter||function(s,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};class Pf{constructor(e,{headers:r={},customFetch:n,region:a=Qn.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=kf(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return Ef(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:d}=r;d||(d=this.region),d&&d!=="any"&&(l["x-region"]=d);let c;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:c}).catch(x=>{throw new Sf(x)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new Cf(u);if(!u.ok)throw new Tf(u);let m=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),f;return m==="application/json"?f=yield u.json():m==="application/octet-stream"?f=yield u.blob():m==="text/event-stream"?f=u:m==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(a){return{data:null,error:a}}})}}var Ee={},Oa={},Kr={},er={},Xr={},Jr={},Af=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ms=Af();const Lf=ms.fetch,yc=ms.fetch.bind(ms),bc=ms.Headers,Rf=ms.Request,Mf=ms.Response,bs=Object.freeze(Object.defineProperty({__proto__:null,Headers:bc,Request:Rf,Response:Mf,default:yc,fetch:Lf},Symbol.toStringTag,{value:"Module"})),If=Su(bs);var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});let Of=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Yr.default=Of;var vc=Be&&Be.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Jr,"__esModule",{value:!0});const Df=vc(If),$f=vc(Yr);let Ff=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Df.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,d;let c=null,u=null,h=null,m=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&y&&y.length>1&&(h=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,m=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{c=JSON.parse(g),Array.isArray(c)&&i.status===404&&(u=[],c=null,m=200,f="OK")}catch{i.status===404&&g===""?(m=204,f="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((d=c==null?void 0:c.details)===null||d===void 0)&&d.includes("0 rows"))&&(c=null,m=200,f="OK"),c&&this.shouldThrowOnError)throw new $f.default(c)}return{error:c,data:u,count:h,status:m,statusText:f}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,d;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(d=i==null?void 0:i.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,r)}returns(){return this}overrideTypes(){return this}};Jr.default=Ff;var Uf=Be&&Be.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Xr,"__esModule",{value:!0});const Vf=Uf(Jr);let Bf=class extends Vf.default{select(e){let r=!1;const n=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const d=[e?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${d};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Xr.default=Bf;var zf=Be&&Be.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(er,"__esModule",{value:!0});const qf=zf(Xr);let Gf=class extends qf.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};er.default=Gf;var Hf=Be&&Be.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Kr,"__esModule",{value:!0});const Cs=Hf(er);let Wf=class{constructor(e,{headers:r={},schema:n,fetch:a}){this.url=e,this.headers=r,this.schema=n,this.fetch=a}select(e,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Cs.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(o.length>0){const l=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",l.join(","))}}return new Cs.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const d=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Cs.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new Cs.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Cs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Kr.default=Wf;var Zr={},Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.version=void 0;Qr.version="0.0.0-automated";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.DEFAULT_HEADERS=void 0;const Kf=Qr;Zr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Kf.version}`};var wc=Be&&Be.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Oa,"__esModule",{value:!0});const Xf=wc(Kr),Jf=wc(er),Yf=Zr;let Zf=class jc{constructor(e,{headers:r={},schema:n,fetch:a}={}){this.url=e,this.headers=Object.assign(Object.assign({},Yf.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(e){const r=new URL(`${this.url}/${e}`);return new Xf.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new jc(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:a=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let d;n||a?(o=n?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",d=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Jf.default({method:o,url:l,headers:c,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};Oa.default=Zf;var vs=Be&&Be.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.PostgrestError=Ee.PostgrestBuilder=Ee.PostgrestTransformBuilder=Ee.PostgrestFilterBuilder=Ee.PostgrestQueryBuilder=Ee.PostgrestClient=void 0;const Nc=vs(Oa);Ee.PostgrestClient=Nc.default;const _c=vs(Kr);Ee.PostgrestQueryBuilder=_c.default;const kc=vs(er);Ee.PostgrestFilterBuilder=kc.default;const Sc=vs(Xr);Ee.PostgrestTransformBuilder=Sc.default;const Cc=vs(Jr);Ee.PostgrestBuilder=Cc.default;const Tc=vs(Yr);Ee.PostgrestError=Tc.default;var Qf=Ee.default={PostgrestClient:Nc.default,PostgrestQueryBuilder:_c.default,PostgrestFilterBuilder:kc.default,PostgrestTransformBuilder:Sc.default,PostgrestBuilder:Cc.default,PostgrestError:Tc.default};const{PostgrestClient:ep,PostgrestQueryBuilder:mj,PostgrestFilterBuilder:fj,PostgrestTransformBuilder:pj,PostgrestBuilder:xj,PostgrestError:gj}=Qf;let ea;typeof window>"u"?ea=require("ws"):ea=window.WebSocket;const tp=ea,sp="2.11.10",rp={"X-Client-Info":`realtime-js/${sp}`},np="1.0.0",Ec=1e4,ap=1e3;var os;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(os||(os={}));var _e;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(_e||(_e={}));var Xe;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Xe||(Xe={}));var ta;(function(s){s.websocket="websocket"})(ta||(ta={}));var It;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(It||(It={}));class ip{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+a));o=o+a;const d=n.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:d,payload:c}}}class Pc{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ne;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(ne||(ne={}));const Li=(s,e,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=op(o,s,e,a),i),{})},op=(s,e,r,n)=>{const a=e.find(l=>l.name===s),i=a==null?void 0:a.type,o=r[s];return i&&!n.includes(i)?Ac(i,o):sa(o)},Ac=(s,e)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return up(e,r)}switch(s){case ne.bool:return lp(e);case ne.float4:case ne.float8:case ne.int2:case ne.int4:case ne.int8:case ne.numeric:case ne.oid:return cp(e);case ne.json:case ne.jsonb:return dp(e);case ne.timestamp:return hp(e);case ne.abstime:case ne.date:case ne.daterange:case ne.int4range:case ne.int8range:case ne.money:case ne.reltime:case ne.text:case ne.time:case ne.timestamptz:case ne.timetz:case ne.tsrange:case ne.tstzrange:return sa(e);default:return sa(e)}},sa=s=>s,lp=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},cp=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},dp=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},up=(s,e)=>{if(typeof s!="string")return s;const r=s.length-1,n=s[r];if(s[0]==="{"&&n==="}"){let i;const o=s.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Ac(e,l))}return s},hp=s=>typeof s=="string"?s.replace(" ","T"):s,Lc=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class xn{constructor(e,r,n={},a=Ec){this.channel=e,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ri;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Ri||(Ri={}));class Is{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Is.syncState(this.state,a,i,o),this.pendingDiffs.forEach(d=>{this.state=Is.syncDiff(this.state,d,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Is.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,a){const i=this.cloneDeep(e),o=this.transformState(r),l={},d={};return this.map(i,(c,u)=>{o[c]||(d[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const m=u.map(y=>y.presence_ref),f=h.map(y=>y.presence_ref),x=u.filter(y=>f.indexOf(y.presence_ref)<0),g=h.filter(y=>m.indexOf(y.presence_ref)<0);x.length>0&&(l[c]=x),g.length>0&&(d[c]=g)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:d},n,a)}static syncDiff(e,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,d)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(d),u.length>0){const h=e[l].map(f=>f.presence_ref),m=u.filter(f=>h.indexOf(f.presence_ref)<0);e[l].unshift(...m)}n(l,u,d)}),this.map(o,(l,d)=>{let c=e[l];if(!c)return;const u=d.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=c,a(l,c,d),c.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const a=e[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mi;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Mi||(Mi={}));var Ii;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Ii||(Ii={}));var at;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(at||(at={}));class Da{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=_e.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new xn(this,Xe.join,this.params,this.timeout),this.rejoinTimer=new Pc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_e.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_e.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xe.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Is(this),this.broadcastEndpointURL=Lc(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(at.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(at.CLOSED));const d={},c={broadcast:i,presence:o,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(at.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,f=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,x=[];for(let g=0;g<f;g++){const y=m[g],{filter:{event:v,schema:b,table:w,filter:k}}=y,j=u&&u[g];if(j&&j.event===v&&j.schema===b&&j.table===w&&j.filter===k)x.push(Object.assign(Object.assign({},y),{id:j.id}));else{this.unsubscribe(),this.state=_e.errored,e==null||e(at.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(at.SUBSCRIBED);return}}).receive("error",u=>{this.state=_e.errored,e==null||e(at.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(at.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,d;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=_e.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xe.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const a=new xn(this,Xe.leave,{},e);a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new xn(this,e,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var a,i;const o=e.toLocaleLowerCase(),{close:l,error:d,leave:c,join:u}=Xe;if(n&&[l,d,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(f=>{var x,g,y;return((x=f.filter)===null||x===void 0?void 0:x.event)==="*"||((y=(g=f.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var x,g,y,v,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const k=f.id,j=(x=f.filter)===null||x===void 0?void 0:x.event;return k&&((g=r.ids)===null||g===void 0?void 0:g.includes(k))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const k=(b=(v=f==null?void 0:f.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return k==="*"||k===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:g,table:y,commit_timestamp:v,type:b,errors:w}=x;m=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:v,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(x))}f.callback(m,n)})}_isClosed(){return this.state===_e.closed}_isJoined(){return this.state===_e.joined}_isJoining(){return this.state===_e.joining}_isLeaving(){return this.state===_e.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const a=e.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Da.isEqual(a.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Xe.close,{},e)}_onError(e){this._on(Xe.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_e.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Li(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Li(e.columns,e.old_record)),r}}const Oi=()=>{},mp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fp{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=rp,this.params={},this.timeout=Ec,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Oi,this.ref=0,this.logger=Oi,this.conn=null,this.sendBuffer=[],this.serializer=new ip,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Qs(()=>Promise.resolve().then(()=>bs),void 0).then(({default:d})=>d(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${ta.websocket}`,this.httpEndpoint=Lc(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Pc(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=tp),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new pp(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:np}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case os.connecting:return It.Connecting;case os.open:return It.Open;case os.closing:return It.Closing;default:return It.Closed}}isConnected(){return this.connectionState()===It.Open}channel(e,r={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Da(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:a,ref:i}=e,o=()=>{this.encode(e,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(Xe.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(ap,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:a,payload:i,ref:o}=r;n==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Xe.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${n}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([mp],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class pp{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=os.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class $a extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ve(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class xp extends $a{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ra extends $a{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var gp=globalThis&&globalThis.__awaiter||function(s,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};const Rc=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...r)=>Qs(()=>Promise.resolve().then(()=>bs),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},yp=()=>gp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Qs(()=>Promise.resolve().then(()=>bs),void 0)).Response:Response}),na=s=>{if(Array.isArray(s))return s.map(r=>na(r));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=na(n)}),e};var Gt=globalThis&&globalThis.__awaiter||function(s,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};const gn=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),bp=(s,e,r)=>Gt(void 0,void 0,void 0,function*(){const n=yield yp();s instanceof n&&!(r!=null&&r.noResolveJson)?s.json().then(a=>{e(new xp(gn(a),s.status||500))}).catch(a=>{e(new ra(gn(a),a))}):e(new ra(gn(s),s))}),vp=(s,e,r,n)=>{const a={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function tr(s,e,r,n,a,i){return Gt(this,void 0,void 0,function*(){return new Promise((o,l)=>{s(r,vp(e,n,a,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>bp(d,l,n))})})}function Lr(s,e,r,n){return Gt(this,void 0,void 0,function*(){return tr(s,"GET",e,r,n)})}function gt(s,e,r,n,a){return Gt(this,void 0,void 0,function*(){return tr(s,"POST",e,n,a,r)})}function wp(s,e,r,n,a){return Gt(this,void 0,void 0,function*(){return tr(s,"PUT",e,n,a,r)})}function jp(s,e,r,n){return Gt(this,void 0,void 0,function*(){return tr(s,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Mc(s,e,r,n,a){return Gt(this,void 0,void 0,function*(){return tr(s,"DELETE",e,n,a,r)})}var Te=globalThis&&globalThis.__awaiter||function(s,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};const Np={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Di={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _p{constructor(e,r={},n,a){this.url=e,this.headers=r,this.bucketId=n,this.fetch=Rc(a)}uploadOrUpdate(e,r,n,a){return Te(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Di),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:c,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(ve(i))return{data:null,error:i};throw i}})}upload(e,r,n){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,a){return Te(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let d;const c=Object.assign({upsert:Di.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",c.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",c.cacheControl)):(d=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:d,headers:u}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(d){if(ve(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,r){return Te(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield gt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new $a("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}})}update(e,r,n){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Te(this,void 0,void 0,function*(){try{return{data:yield gt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(ve(a))return{data:null,error:a};throw a}})}copy(e,r,n){return Te(this,void 0,void 0,function*(){try{return{data:{path:(yield gt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(ve(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,n){return Te(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield gt(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(ve(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,n){return Te(this,void 0,void 0,function*(){try{const a=yield gt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(ve(a))return{data:null,error:a};throw a}})}download(e,r){return Te(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Lr(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ve(l))return{data:null,error:l};throw l}})}info(e){return Te(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Lr(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:na(n),error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}})}exists(e){return Te(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield jp(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ve(n)&&n instanceof ra){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&a.push(d);let c=a.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${c}`)}}}remove(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Mc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}})}list(e,r,n){return Te(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Np),r),{prefix:e||""});return{data:yield gt(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(ve(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const kp="2.7.1",Sp={"X-Client-Info":`storage-js/${kp}`};var Xt=globalThis&&globalThis.__awaiter||function(s,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};class Cp{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},Sp),r),this.fetch=Rc(n)}listBuckets(){return Xt(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ve(e))return{data:null,error:e};throw e}})}getBucket(e){return Xt(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Xt(this,void 0,void 0,function*(){try{return{data:yield gt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Xt(this,void 0,void 0,function*(){try{return{data:yield wp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Xt(this,void 0,void 0,function*(){try{return{data:yield gt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Xt(this,void 0,void 0,function*(){try{return{data:yield Mc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}})}}class Tp extends Cp{constructor(e,r={},n){super(e,r,n)}from(e){return new _p(this.url,this.headers,e,this.fetch)}}const Ep="2.50.0";let As="";typeof Deno<"u"?As="deno":typeof document<"u"?As="web":typeof navigator<"u"&&navigator.product==="ReactNative"?As="react-native":As="node";const Pp={"X-Client-Info":`supabase-js-${As}/${Ep}`},Ap={headers:Pp},Lp={schema:"public"},Rp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mp={};var Ip=globalThis&&globalThis.__awaiter||function(s,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};const Op=s=>{let e;return s?e=s:typeof fetch>"u"?e=yc:e=fetch,(...r)=>e(...r)},Dp=()=>typeof Headers>"u"?bc:Headers,$p=(s,e,r)=>{const n=Op(r),a=Dp();return(i,o)=>Ip(void 0,void 0,void 0,function*(){var l;const d=(l=yield e())!==null&&l!==void 0?l:s;let c=new a(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",s),c.has("Authorization")||c.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var Fp=globalThis&&globalThis.__awaiter||function(s,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};function Up(s){return s.endsWith("/")?s:s+"/"}function Vp(s,e){var r,n;const{db:a,auth:i,realtime:o,global:l}=s,{db:d,auth:c,realtime:u,global:h}=e,m={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Fp(this,void 0,void 0,function*(){return""})};return s.accessToken?m.accessToken=s.accessToken:delete m.accessToken,m}const Ic="2.70.0",Qt=30*1e3,aa=3,yn=aa*Qt,Bp="http://localhost:9999",zp="supabase.auth.token",qp={"X-Client-Info":`gotrue-js/${Ic}`},ia="X-Supabase-Api-Version",Oc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Gp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Hp=6e5;class Fa extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function J(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class Wp extends Fa{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Kp(s){return J(s)&&s.name==="AuthApiError"}class Dc extends Fa{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class kt extends Fa{constructor(e,r,n,a){super(e,n,a),this.name=r,this.status=n}}class pt extends kt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Xp(s){return J(s)&&s.name==="AuthSessionMissingError"}class dr extends kt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ur extends kt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class hr extends kt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Jp(s){return J(s)&&s.name==="AuthImplicitGrantRedirectError"}class $i extends kt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class oa extends kt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function bn(s){return J(s)&&s.name==="AuthRetryableFetchError"}class Fi extends kt{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Os extends kt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ui=` 	
\r=`.split(""),Yp=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<Ui.length;e+=1)s[Ui[e].charCodeAt(0)]=-2;for(let e=0;e<Rr.length;e+=1)s[Rr[e].charCodeAt(0)]=e;return s})();function Vi(s,e,r){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Rr[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Rr[n]),e.queuedBits-=6}}function $c(s,e,r){const n=Yp[s];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Bi(s){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{ex(o,n,r)};for(let o=0;o<s.length;o+=1)$c(s.charCodeAt(o),a,i);return e.join("")}function Zp(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function Qp(s,e){for(let r=0;r<s.length;r+=1){let n=s.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(s.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Zp(n,e)}}function ex(s,e,r){if(e.utf8seq===0){if(s<=127){r(s);return}for(let n=1;n<6;n+=1)if(!(s>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function tx(s){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<s.length;a+=1)$c(s.charCodeAt(a),r,n);return new Uint8Array(e)}function sx(s){const e=[];return Qp(s,r=>e.push(r)),new Uint8Array(e)}function rx(s){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};return s.forEach(a=>Vi(a,r,n)),Vi(null,r,n),e.join("")}function nx(s){return Math.round(Date.now()/1e3)+s}function ax(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Ke=()=>typeof window<"u"&&typeof document<"u",Et={tested:!1,writable:!1},Ds=()=>{if(!Ke())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Et.tested)return Et.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Et.tested=!0,Et.writable=!0}catch{Et.tested=!0,Et.writable=!1}return Et.writable};function ix(s){const e={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{e[a]=n}),e}const Fc=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...r)=>Qs(()=>Promise.resolve().then(()=>bs),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},ox=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Uc=async(s,e,r)=>{await s.setItem(e,JSON.stringify(r))},mr=async(s,e)=>{const r=await s.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},fr=async(s,e)=>{await s.removeItem(e)};class en{constructor(){this.promise=new en.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}en.promiseConstructor=Promise;function vn(s){const e=s.split(".");if(e.length!==3)throw new Os("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Gp.test(e[n]))throw new Os("JWT not in base64url format");return{header:JSON.parse(Bi(e[0])),payload:JSON.parse(Bi(e[1])),signature:tx(e[2]),raw:{header:e[0],payload:e[1]}}}async function lx(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function cx(s,e){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function dx(s){return("0"+s.toString(16)).substr(-2)}function ux(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,dx).join("")}async function hx(s){const r=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function mx(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await hx(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jt(s,e,r=!1){const n=ux();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Uc(s,`${e}-code-verifier`,a);const i=await mx(n);return[i,n===i?"plain":"s256"]}const fx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function px(s){const e=s.headers.get(ia);if(!e||!e.match(fx))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function xx(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function gx(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yt(s){if(!yx.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var bx=globalThis&&globalThis.__rest||function(s,e){var r={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(r[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(s);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(s,n[a])&&(r[n[a]]=s[n[a]]);return r};const At=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),vx=[502,503,504];async function zi(s){var e;if(!ox(s))throw new oa(At(s),0);if(vx.includes(s.status))throw new oa(At(s),s.status);let r;try{r=await s.json()}catch(i){throw new Dc(At(i),i)}let n;const a=px(s);if(a&&a.getTime()>=Oc["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Fi(At(r),s.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new pt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Fi(At(r),s.status,r.weak_password.reasons);throw new Wp(At(r),s.status||500,n)}const wx=(s,e,r,n)=>{const a={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Q(s,e,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[ia]||(i[ia]=Oc["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await jx(s,e,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function jx(s,e,r,n,a,i){const o=wx(e,n,a,i);let l;try{l=await s(r,Object.assign({},o))}catch(d){throw console.error(d),new oa(At(d),0)}if(l.ok||await zi(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(d){await zi(d)}}function nt(s){var e;let r=null;Sx(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=nx(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:r,user:n},error:null}}function qi(s){const e=nt(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function bt(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function Nx(s){return{data:s,error:null}}function _x(s){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=s,o=bx(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function kx(s){return s}function Sx(s){return s.access_token&&s.refresh_token&&s.expires_in}const wn=["global","local","others"];var Cx=globalThis&&globalThis.__rest||function(s,e){var r={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(r[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(s);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(s,n[a])&&(r[n[a]]=s[n[a]]);return r};class Tx{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Fc(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=wn[0]){if(wn.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wn.join(", ")}`);try{return await Q(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:bt})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Cx(e,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:_x,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(J(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:bt})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,a,i,o,l,d;try{const c={nextPage:null,lastPage:0,total:0},u=await Q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:kx});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(d=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return f.length>0&&(f.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(x.split(";")[1].split("=")[1]);c[`${y}Page`]=g}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(J(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Yt(e);try{return await Q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:bt})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Yt(e);try{return await Q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:bt})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Yt(e);try{return await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:bt})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Yt(e.userId);try{const{data:r,error:n}=await Q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(J(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Yt(e.userId),Yt(e.id);try{return{data:await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}}const Ex={getItem:s=>Ds()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{Ds()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{Ds()&&globalThis.localStorage.removeItem(s)}};function Gi(s={}){return{getItem:e=>s[e]||null,setItem:(e,r)=>{s[e]=r},removeItem:e=>{delete s[e]}}}function Px(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Zt={debug:!!(globalThis&&Ds()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ax extends Vc{}async function Lx(s,e,r){Zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Zt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,a.name);try{return await r()}finally{Zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,a.name)}}else{if(e===0)throw Zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Ax(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Zt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Px();const Rx={url:Bp,storageKey:zp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Hi(s,e,r){return await r()}class Ks{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ks.nextInstanceID,Ks.nextInstanceID+=1,this.instanceID>0&&Ke()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Rx),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Tx({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Fc(a.fetch),this.lock=a.lock||Hi,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Ke()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Lx:this.lock=Hi,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Ds()?this.storage=Ex:(this.memoryStorage={},this.storage=Gi(this.memoryStorage)):(this.memoryStorage={},this.storage=Gi(this.memoryStorage)),Ke()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ic}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=ix(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ke()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Jp(i)){const d=(e=i.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return J(r)?{error:r}:{error:new Dc("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,a;try{const i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:nt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(J(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,a;try{let i;if("email"in e){const{email:u,password:h,options:m}=e;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await Jt(this.storage,this.storageKey)),i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:x},xform:nt})}else if("phone"in e){const{phone:u,password:h,options:m}=e;i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:nt})}else throw new ur("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(J(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:qi})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:qi})}else throw new ur("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new dr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(J(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,a,i,o,l,d,c,u,h,m,f;let x,g;if("message"in e)x=e.message,g=e.signature;else{const{chain:y,wallet:v,statement:b,options:w}=e;let k;if(Ke())if(typeof v=="object")k=v;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))k=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=v}const j=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const T=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),b?{statement:b}:null));let N;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")N=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)N=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)x=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${j.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const T=await k.signMessage(new TextEncoder().encode(x),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=T}}try{const{data:y,error:v}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:rx(g)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:nt});if(v)throw v;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new dr}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:v})}catch(y){if(J(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const r=await mr(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:nt});if(await fr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new dr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(J(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=e,l=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:nt}),{data:d,error:c}=l;return c?{data:{user:null,session:null},error:c}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new dr}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:c})}catch(r){if(J(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,a,i,o;try{if("email"in e){const{email:l,options:d}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Jt(this.storage,this.storageKey));const{error:h}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:d}=e,{data:c,error:u}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new ur("You must provide either an email or phone number.")}catch(l){if(J(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let a,i;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:nt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,c=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(a){if(J(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Jt(this.storage,this.storageKey)),await Q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Nx})}catch(i){if(J(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new pt;const{error:a}=await Q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(J(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:i}=e,{error:o}=await Q(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:a,options:i}=e,{data:o,error:l}=await Q(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new ur("You must provide either an email or phone number and a type")}catch(r){if(J(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await mr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<yn:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,c,u))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:bt}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pt}:await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:bt})})}catch(r){if(J(r))return Xp(r)&&(await this._removeSession(),await fr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new pt;const o=a.session;let l=null,d=null;this.flowType==="pkce"&&e.email!=null&&([l,d]=await Jt(this.storage,this.storageKey));const{data:c,error:u}=await Q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:bt});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new pt;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=vn(e.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:d}=await this._getUser(e.access_token);if(d)throw d;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(J(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new pt;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(J(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Ke())throw new hr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new hr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new $i("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new $i("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:d,token_type:c}=e;if(!i||!l||!o||!c)throw new hr("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;d&&(m=parseInt(d));const f=m-u;f*1e3<=Qt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const x=m-h;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,u);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const v={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(n){if(J(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await mr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Kp(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await fr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=ax(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Jt(this.storage,this.storageKey,!0));try{return await Q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(J(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,d,c,u;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Q(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Ke()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(J(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await Q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(J(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await cx(async a=>(a>0&&await lx(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:nt})),(a,i)=>{const o=200*Math.pow(2,a);return i&&bn(i)&&Date.now()+o-n<Qt})}catch(n){if(this._debug(r,"error",n),J(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ke()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await mr(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<yn;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${yn}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),bn(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new pt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new en;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new pt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),J(i)){const o={session:null,error:i};return bn(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(d){i.push(d)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Uc(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await fr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ke()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/Qt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Qt}ms, refresh threshold is ${aa} ticks`),a<=aa&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Vc)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ke()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Jt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await Q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(J(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:c}=await Q(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(J(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(J(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(J(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=vn(a.access_token);let l=null;o.aal&&(l=o.aal);let d=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+Hp>Date.now()))return n;const{data:a,error:i}=await Q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new Os("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),n=a.keys.find(o=>o.kid===e),!n)throw new Os("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:f,error:x}=await this.getSession();if(x||!f.session)return{data:null,error:x};n=f.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:d}}=vn(n);if(xx(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:i,header:a,signature:o},error:null}}const c=gx(a.alg),u=await this.fetchJwk(a.kid,r),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,sx(`${l}.${d}`)))throw new Os("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}}Ks.nextInstanceID=0;const Mx=Ks;class Ix extends Mx{constructor(e){super(e)}}var Ox=globalThis&&globalThis.__awaiter||function(s,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(s,e||[])).next())})};class Dx{constructor(e,r,n){var a,i,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=Up(e),d=new URL(l);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const c=`sb-${d.hostname.split(".")[0]}-auth-token`,u={db:Lp,realtime:Mp,auth:Object.assign(Object.assign({},Rp),{storageKey:c}),global:Ap},h=Vp(n??{},u);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=$p(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new ep(new URL("rest/v1",d).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Pf(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Tp(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Ox(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:o,lock:l,debug:d},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ix({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,flowType:o,lock:l,debug:d,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new fp(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $x=(s,e,r)=>new Dx(s,e,r),Fx="https://wjjgnspqiakolhgeqkkz.supabase.co",Ux="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indqamduc3BxaWFrb2xoZ2Vxa2t6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxNTUyMDUsImV4cCI6MjA2NTczMTIwNX0.eooKPqp-iCZWMC5Jz8vzAwADkDqhkrs9-s2A_Of5md0",C=$x(Fx,Ux),Vx="login-learning.com",Bc=p.createContext(),We={SUPER_ADMIN:"super_admin",BRANCH_MANAGER:"branch_manager",INSTRUCTOR:"instructor",STUDENT:"student",PARENT:"parent",GUEST:"guest"},Wi=s=>s?s.toLowerCase().endsWith(`@${Vx}`):!1,Bx=({children:s})=>{const[e,r]=p.useState(null),[n,a]=p.useState(!0),[i,o]=p.useState(!1),[l,d]=p.useState(We.GUEST),{toast:c}=se();p.useEffect(()=>{if(!C){console.warn("Supabase client is not initialized. This might be because Supabase URL or Anon Key are missing or incorrect."),c({title:" Supabase ",description:" Supabase URL  Anon Key",variant:"destructive",duration:1e4}),a(!1);return}(async()=>{var b;try{const{data:{session:w},error:k}=await C.auth.getSession();k&&(console.error("Error getting session:",k),c({title:"",description:k.message,variant:"destructive"}));const j=(w==null?void 0:w.user)??null;r(j),j?Wi(j.email)?(o(!0),d(We.SUPER_ADMIN)):(o(!1),d(((b=j.user_metadata)==null?void 0:b.role)||We.STUDENT)):(o(!1),d(We.GUEST))}catch(w){console.error("Exception in getSession:",w),c({title:"",description:w.message,variant:"destructive"})}finally{a(!1)}})();const{data:v}=C.auth.onAuthStateChange(async(b,w)=>{var j;const k=(w==null?void 0:w.user)??null;r(k),k?Wi(k.email)?(o(!0),d(We.SUPER_ADMIN)):(o(!1),d(((j=k.user_metadata)==null?void 0:j.role)||We.STUDENT)):(o(!1),d(We.GUEST)),b==="SIGNED_IN"&&k?c({title:` ${l}!`}):b==="PASSWORD_RECOVERY"?c({title:"",description:""}):b==="USER_UPDATED"&&c({title:""}),a(!1)});return()=>{v==null||v.subscription.unsubscribe()}},[c,l]);const g={user:e,isAdmin:i,userRole:l,ROLES:We,hasRole:y=>e?l===We.SUPER_ADMIN?!0:l===y:!1,signInWithPassword:async(y,v)=>{if(!C)return c({title:"Supabase ",description:" Supabase ",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};a(!0);const{data:b,error:w}=await C.auth.signInWithPassword({email:y,password:v});return a(!1),{data:b,error:w}},signUpWithPassword:async(y,v,b)=>{if(!C)return c({title:"Supabase ",description:" Supabase ",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};a(!0);const{data:w,error:k}=await C.auth.signUp({email:y,password:v,options:{data:{full_name:b,role:We.STUDENT}}});return a(!1),{data:w,error:k}},signInWithGoogle:async()=>{if(!C)return c({title:"Supabase ",description:" Supabase ",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};a(!0);const{data:y,error:v}=await C.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});return a(!1),{data:y,error:v}},signOut:async()=>{if(!C)return c({title:"Supabase ",description:" Supabase ",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};a(!0);const{error:y}=await C.auth.signOut();return a(!1),y||(r(null),o(!1),d(We.GUEST)),{error:y}},loading:n,isSupabaseConnected:!!C};return t.jsx(Bc.Provider,{value:g,children:s})},Le=()=>p.useContext(Bc),zc=p.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"}),tn=p.createContext({}),sn=p.createContext(null),rn=typeof document<"u",Ua=rn?p.useLayoutEffect:p.useEffect,qc=p.createContext({strict:!1}),Va=s=>s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),zx="framerAppearId",Gc="data-"+Va(zx);function qx(s,e,r,n){const{visualElement:a}=p.useContext(tn),i=p.useContext(qc),o=p.useContext(sn),l=p.useContext(zc).reducedMotion,d=p.useRef();n=n||i.renderer,!d.current&&n&&(d.current=n(s,{visualState:e,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=d.current;p.useInsertionEffect(()=>{c&&c.update(r,o)});const u=p.useRef(!!(r[Gc]&&!window.HandoffComplete));return Ua(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),p.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function es(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function Gx(s,e,r){return p.useCallback(n=>{n&&s.mount&&s.mount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):es(r)&&(r.current=n))},[e])}function Xs(s){return typeof s=="string"||Array.isArray(s)}function nn(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}const Ba=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],za=["initial",...Ba];function an(s){return nn(s.animate)||za.some(e=>Xs(s[e]))}function Hc(s){return!!(an(s)||s.variants)}function Hx(s,e){if(an(s)){const{initial:r,animate:n}=s;return{initial:r===!1||Xs(r)?r:void 0,animate:Xs(n)?n:void 0}}return s.inherit!==!1?e:{}}function Wx(s){const{initial:e,animate:r}=Hx(s,p.useContext(tn));return p.useMemo(()=>({initial:e,animate:r}),[Ki(e),Ki(r)])}function Ki(s){return Array.isArray(s)?s.join(" "):s}const Xi={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Js={};for(const s in Xi)Js[s]={isEnabled:e=>Xi[s].some(r=>!!e[r])};function Kx(s){for(const e in s)Js[e]={...Js[e],...s[e]}}const qa=p.createContext({}),Wc=p.createContext({}),Xx=Symbol.for("motionComponentSymbol");function Jx({preloadedFeatures:s,createVisualElement:e,useRender:r,useVisualState:n,Component:a}){s&&Kx(s);function i(l,d){let c;const u={...p.useContext(zc),...l,layoutId:Yx(l)},{isStatic:h}=u,m=Wx(l),f=n(l,h);if(!h&&rn){m.visualElement=qx(a,f,u,e);const x=p.useContext(Wc),g=p.useContext(qc).strict;m.visualElement&&(c=m.visualElement.loadFeatures(u,g,s,x))}return p.createElement(tn.Provider,{value:m},c&&m.visualElement?p.createElement(c,{visualElement:m.visualElement,...u}):null,r(a,l,Gx(f,m.visualElement,d),f,h,m.visualElement))}const o=p.forwardRef(i);return o[Xx]=a,o}function Yx({layoutId:s}){const e=p.useContext(qa).id;return e&&s!==void 0?e+"-"+s:s}function Zx(s){function e(n,a={}){return Jx(s(n,a))}if(typeof Proxy>"u")return e;const r=new Map;return new Proxy(e,{get:(n,a)=>(r.has(a)||r.set(a,e(a)),r.get(a))})}const Qx=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ga(s){return typeof s!="string"||s.includes("-")?!1:!!(Qx.indexOf(s)>-1||/[A-Z]/.test(s))}const Mr={};function e0(s){Object.assign(Mr,s)}const sr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ht=new Set(sr);function Kc(s,{layout:e,layoutId:r}){return Ht.has(s)||s.startsWith("origin")||(e||r!==void 0)&&(!!Mr[s]||s==="opacity")}const Ae=s=>!!(s&&s.getVelocity),t0={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},s0=sr.length;function r0(s,{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},n,a){let i="";for(let o=0;o<s0;o++){const l=sr[o];if(s[l]!==void 0){const d=t0[l]||l;i+=`${d}(${s[l]}) `}}return e&&!s.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(s,n?"":i):r&&n&&(i="none"),i}const Xc=s=>e=>typeof e=="string"&&e.startsWith(s),Jc=Xc("--"),la=Xc("var(--"),n0=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,a0=(s,e)=>e&&typeof s=="number"?e.transform(s):s,Nt=(s,e,r)=>Math.min(Math.max(r,s),e),Wt={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},$s={...Wt,transform:s=>Nt(0,1,s)},pr={...Wt,default:1},Fs=s=>Math.round(s*1e5)/1e5,on=/(-)?([\d]*\.?[\d])+/g,Yc=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,i0=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function rr(s){return typeof s=="string"}const nr=s=>({test:e=>rr(e)&&e.endsWith(s)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${s}`}),xt=nr("deg"),et=nr("%"),K=nr("px"),o0=nr("vh"),l0=nr("vw"),Ji={...et,parse:s=>et.parse(s)/100,transform:s=>et.transform(s*100)},Yi={...Wt,transform:Math.round},Zc={borderWidth:K,borderTopWidth:K,borderRightWidth:K,borderBottomWidth:K,borderLeftWidth:K,borderRadius:K,radius:K,borderTopLeftRadius:K,borderTopRightRadius:K,borderBottomRightRadius:K,borderBottomLeftRadius:K,width:K,maxWidth:K,height:K,maxHeight:K,size:K,top:K,right:K,bottom:K,left:K,padding:K,paddingTop:K,paddingRight:K,paddingBottom:K,paddingLeft:K,margin:K,marginTop:K,marginRight:K,marginBottom:K,marginLeft:K,rotate:xt,rotateX:xt,rotateY:xt,rotateZ:xt,scale:pr,scaleX:pr,scaleY:pr,scaleZ:pr,skew:xt,skewX:xt,skewY:xt,distance:K,translateX:K,translateY:K,translateZ:K,x:K,y:K,z:K,perspective:K,transformPerspective:K,opacity:$s,originX:Ji,originY:Ji,originZ:K,zIndex:Yi,fillOpacity:$s,strokeOpacity:$s,numOctaves:Yi};function Ha(s,e,r,n){const{style:a,vars:i,transform:o,transformOrigin:l}=s;let d=!1,c=!1,u=!0;for(const h in e){const m=e[h];if(Jc(h)){i[h]=m;continue}const f=Zc[h],x=a0(m,f);if(Ht.has(h)){if(d=!0,o[h]=x,!u)continue;m!==(f.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,l[h]=x):a[h]=x}if(e.transform||(d||n?a.transform=r0(s.transform,r,u,n):a.transform&&(a.transform="none")),c){const{originX:h="50%",originY:m="50%",originZ:f=0}=l;a.transformOrigin=`${h} ${m} ${f}`}}const Wa=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Qc(s,e,r){for(const n in e)!Ae(e[n])&&!Kc(n,r)&&(s[n]=e[n])}function c0({transformTemplate:s},e,r){return p.useMemo(()=>{const n=Wa();return Ha(n,e,{enableHardwareAcceleration:!r},s),Object.assign({},n.vars,n.style)},[e])}function d0(s,e,r){const n=s.style||{},a={};return Qc(a,n,s),Object.assign(a,c0(s,e,r)),s.transformValues?s.transformValues(a):a}function u0(s,e,r){const n={},a=d0(s,e,r);return s.drag&&s.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(n.tabIndex=0),n.style=a,n}const h0=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ir(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||h0.has(s)}let ed=s=>!Ir(s);function m0(s){s&&(ed=e=>e.startsWith("on")?!Ir(e):s(e))}try{m0(require("@emotion/is-prop-valid").default)}catch{}function f0(s,e,r){const n={};for(const a in s)a==="values"&&typeof s.values=="object"||(ed(a)||r===!0&&Ir(a)||!e&&!Ir(a)||s.draggable&&a.startsWith("onDrag"))&&(n[a]=s[a]);return n}function Zi(s,e,r){return typeof s=="string"?s:K.transform(e+r*s)}function p0(s,e,r){const n=Zi(e,s.x,s.width),a=Zi(r,s.y,s.height);return`${n} ${a}`}const x0={offset:"stroke-dashoffset",array:"stroke-dasharray"},g0={offset:"strokeDashoffset",array:"strokeDasharray"};function y0(s,e,r=1,n=0,a=!0){s.pathLength=1;const i=a?x0:g0;s[i.offset]=K.transform(-n);const o=K.transform(e),l=K.transform(r);s[i.array]=`${o} ${l}`}function Ka(s,{attrX:e,attrY:r,attrScale:n,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:d=0,...c},u,h,m){if(Ha(s,c,u,m),h){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:f,style:x,dimensions:g}=s;f.transform&&(g&&(x.transform=f.transform),delete f.transform),g&&(a!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=p0(g,a!==void 0?a:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),o!==void 0&&y0(f,o,l,d,!1)}const td=()=>({...Wa(),attrs:{}}),Xa=s=>typeof s=="string"&&s.toLowerCase()==="svg";function b0(s,e,r,n){const a=p.useMemo(()=>{const i=td();return Ka(i,e,{enableHardwareAcceleration:!1},Xa(n),s.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(s.style){const i={};Qc(i,s.style,s),a.style={...i,...a.style}}return a}function v0(s=!1){return(r,n,a,{latestValues:i},o)=>{const d=(Ga(r)?b0:u0)(n,i,o,r),u={...f0(n,typeof r=="string",s),...d,ref:a},{children:h}=n,m=p.useMemo(()=>Ae(h)?h.get():h,[h]);return p.createElement(r,{...u,children:m})}}function sd(s,{style:e,vars:r},n,a){Object.assign(s.style,e,a&&a.getProjectionStyles(n));for(const i in r)s.style.setProperty(i,r[i])}const rd=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nd(s,e,r,n){sd(s,e,void 0,n);for(const a in e.attrs)s.setAttribute(rd.has(a)?a:Va(a),e.attrs[a])}function Ja(s,e){const{style:r}=s,n={};for(const a in r)(Ae(r[a])||e.style&&Ae(e.style[a])||Kc(a,s))&&(n[a]=r[a]);return n}function ad(s,e){const r=Ja(s,e);for(const n in s)if(Ae(s[n])||Ae(e[n])){const a=sr.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[a]=s[n]}return r}function Ya(s,e,r,n={},a={}){return typeof e=="function"&&(e=e(r!==void 0?r:s.custom,n,a)),typeof e=="string"&&(e=s.variants&&s.variants[e]),typeof e=="function"&&(e=e(r!==void 0?r:s.custom,n,a)),e}function id(s){const e=p.useRef(null);return e.current===null&&(e.current=s()),e.current}const Or=s=>Array.isArray(s),w0=s=>!!(s&&typeof s=="object"&&s.mix&&s.toValue),j0=s=>Or(s)?s[s.length-1]||0:s;function jr(s){const e=Ae(s)?s.get():s;return w0(e)?e.toValue():e}function N0({scrapeMotionValuesFromProps:s,createRenderState:e,onMount:r},n,a,i){const o={latestValues:_0(n,a,i,s),renderState:e()};return r&&(o.mount=l=>r(n,l,o)),o}const od=s=>(e,r)=>{const n=p.useContext(tn),a=p.useContext(sn),i=()=>N0(s,e,n,a);return r?i():id(i)};function _0(s,e,r,n){const a={},i=n(s,{});for(const m in i)a[m]=jr(i[m]);let{initial:o,animate:l}=s;const d=an(s),c=Hc(s);e&&c&&!d&&s.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?l:o;return h&&typeof h!="boolean"&&!nn(h)&&(Array.isArray(h)?h:[h]).forEach(f=>{const x=Ya(s,f);if(!x)return;const{transitionEnd:g,transition:y,...v}=x;for(const b in v){let w=v[b];if(Array.isArray(w)){const k=u?w.length-1:0;w=w[k]}w!==null&&(a[b]=w)}for(const b in g)a[b]=g[b]}),a}const pe=s=>s;class Qi{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function k0(s){let e=new Qi,r=new Qi,n=0,a=!1,i=!1;const o=new WeakSet,l={schedule:(d,c=!1,u=!1)=>{const h=u&&a,m=h?e:r;return c&&o.add(d),m.add(d)&&h&&a&&(n=e.order.length),d},cancel:d=>{r.remove(d),o.delete(d)},process:d=>{if(a){i=!0;return}if(a=!0,[e,r]=[r,e],r.clear(),n=e.order.length,n)for(let c=0;c<n;c++){const u=e.order[c];u(d),o.has(u)&&(l.schedule(u),s())}a=!1,i&&(i=!1,l.process(d))}};return l}const xr=["prepare","read","update","preRender","render","postRender"],S0=40;function C0(s,e){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=xr.reduce((h,m)=>(h[m]=k0(()=>r=!0),h),{}),o=h=>i[h].process(a),l=()=>{const h=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(h-a.timestamp,S0),1),a.timestamp=h,a.isProcessing=!0,xr.forEach(o),a.isProcessing=!1,r&&e&&(n=!1,s(l))},d=()=>{r=!0,n=!0,a.isProcessing||s(l)};return{schedule:xr.reduce((h,m)=>{const f=i[m];return h[m]=(x,g=!1,y=!1)=>(r||d(),f.schedule(x,g,y)),h},{}),cancel:h=>xr.forEach(m=>i[m].cancel(h)),state:a,steps:i}}const{schedule:ae,cancel:ut,state:Ne,steps:jn}=C0(typeof requestAnimationFrame<"u"?requestAnimationFrame:pe,!0),T0={useVisualState:od({scrapeMotionValuesFromProps:ad,createRenderState:td,onMount:(s,e,{renderState:r,latestValues:n})=>{ae.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),ae.render(()=>{Ka(r,n,{enableHardwareAcceleration:!1},Xa(e.tagName),s.transformTemplate),nd(e,r)})}})},E0={useVisualState:od({scrapeMotionValuesFromProps:Ja,createRenderState:Wa})};function P0(s,{forwardMotionProps:e=!1},r,n){return{...Ga(s)?T0:E0,preloadedFeatures:r,useRender:v0(e),createVisualElement:n,Component:s}}function it(s,e,r,n={passive:!0}){return s.addEventListener(e,r,n),()=>s.removeEventListener(e,r)}const ld=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1;function ln(s,e="page"){return{point:{x:s[e+"X"],y:s[e+"Y"]}}}const A0=s=>e=>ld(e)&&s(e,ln(e));function ot(s,e,r,n){return it(s,e,A0(r),n)}const L0=(s,e)=>r=>e(s(r)),vt=(...s)=>s.reduce(L0);function cd(s){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=s,r):!1}}const eo=cd("dragHorizontal"),to=cd("dragVertical");function dd(s){let e=!1;if(s==="y")e=to();else if(s==="x")e=eo();else{const r=eo(),n=to();r&&n?e=()=>{r(),n()}:(r&&r(),n&&n())}return e}function ud(){const s=dd(!0);return s?(s(),!1):!0}class St{constructor(e){this.isMounted=!1,this.node=e}update(){}}function so(s,e){const r="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End"),a=(i,o)=>{if(i.pointerType==="touch"||ud())return;const l=s.getProps();s.animationState&&l.whileHover&&s.animationState.setActive("whileHover",e),l[n]&&ae.update(()=>l[n](i,o))};return ot(s.current,r,a,{passive:!s.getProps()[n]})}class R0 extends St{mount(){this.unmount=vt(so(this.node,!0),so(this.node,!1))}unmount(){}}class M0 extends St{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vt(it(this.node.current,"focus",()=>this.onFocus()),it(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const hd=(s,e)=>e?s===e?!0:hd(s,e.parentElement):!1;function Nn(s,e){if(!e)return;const r=new PointerEvent("pointer"+s);e(r,ln(r))}class I0 extends St{constructor(){super(...arguments),this.removeStartListeners=pe,this.removeEndListeners=pe,this.removeAccessibleListeners=pe,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=ot(window,"pointerup",(l,d)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps();ae.update(()=>{!h&&!hd(this.node.current,l.target)?u&&u(l,d):c&&c(l,d)})},{passive:!(n.onTap||n.onPointerUp)}),o=ot(window,"pointercancel",(l,d)=>this.cancelPress(l,d),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=vt(i,o),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Nn("up",(d,c)=>{const{onTap:u}=this.node.getProps();u&&ae.update(()=>u(d,c))})};this.removeEndListeners(),this.removeEndListeners=it(this.node.current,"keyup",o),Nn("down",(l,d)=>{this.startPress(l,d)})},r=it(this.node.current,"keydown",e),n=()=>{this.isPressing&&Nn("cancel",(i,o)=>this.cancelPress(i,o))},a=it(this.node.current,"blur",n);this.removeAccessibleListeners=vt(r,a)}}startPress(e,r){this.isPressing=!0;const{onTapStart:n,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&ae.update(()=>n(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ud()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&ae.update(()=>n(e,r))}mount(){const e=this.node.getProps(),r=ot(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=it(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=vt(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ca=new WeakMap,_n=new WeakMap,O0=s=>{const e=ca.get(s.target);e&&e(s)},D0=s=>{s.forEach(O0)};function $0({root:s,...e}){const r=s||document;_n.has(r)||_n.set(r,{});const n=_n.get(r),a=JSON.stringify(e);return n[a]||(n[a]=new IntersectionObserver(D0,{root:s,...e})),n[a]}function F0(s,e,r){const n=$0(e);return ca.set(s,r),n.observe(s),()=>{ca.delete(s),n.unobserve(s)}}const U0={some:0,all:1};class V0 extends St{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:U0[a]},l=d=>{const{isIntersecting:c}=d;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=c?u:h;m&&m(d)};return F0(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(B0(e,r))&&this.startObserver()}unmount(){}}function B0({viewport:s={}},{viewport:e={}}={}){return r=>s[r]!==e[r]}const z0={inView:{Feature:V0},tap:{Feature:I0},focus:{Feature:M0},hover:{Feature:R0}};function md(s,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==s.length)return!1;for(let n=0;n<r;n++)if(e[n]!==s[n])return!1;return!0}function q0(s){const e={};return s.values.forEach((r,n)=>e[n]=r.get()),e}function G0(s){const e={};return s.values.forEach((r,n)=>e[n]=r.getVelocity()),e}function cn(s,e,r){const n=s.getProps();return Ya(n,e,r!==void 0?r:n.custom,q0(s),G0(s))}let H0=pe,Za=pe;const wt=s=>s*1e3,lt=s=>s/1e3,W0={current:!1},fd=s=>Array.isArray(s)&&typeof s[0]=="number";function pd(s){return!!(!s||typeof s=="string"&&xd[s]||fd(s)||Array.isArray(s)&&s.every(pd))}const Ls=([s,e,r,n])=>`cubic-bezier(${s}, ${e}, ${r}, ${n})`,xd={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ls([0,.65,.55,1]),circOut:Ls([.55,0,1,.45]),backIn:Ls([.31,.01,.66,-.59]),backOut:Ls([.33,1.53,.69,.99])};function gd(s){if(s)return fd(s)?Ls(s):Array.isArray(s)?s.map(gd):xd[s]}function K0(s,e,r,{delay:n=0,duration:a,repeat:i=0,repeatType:o="loop",ease:l,times:d}={}){const c={[e]:r};d&&(c.offset=d);const u=gd(l);return Array.isArray(u)&&(c.easing=u),s.animate(c,{delay:n,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function X0(s,{repeat:e,repeatType:r="loop"}){const n=e&&r!=="loop"&&e%2===1?0:s.length-1;return s[n]}const yd=(s,e,r)=>(((1-3*r+3*e)*s+(3*r-6*e))*s+3*e)*s,J0=1e-7,Y0=12;function Z0(s,e,r,n,a){let i,o,l=0;do o=e+(r-e)/2,i=yd(o,n,a)-s,i>0?r=o:e=o;while(Math.abs(i)>J0&&++l<Y0);return o}function ar(s,e,r,n){if(s===e&&r===n)return pe;const a=i=>Z0(i,0,1,s,r);return i=>i===0||i===1?i:yd(a(i),e,n)}const Q0=ar(.42,0,1,1),eg=ar(0,0,.58,1),bd=ar(.42,0,.58,1),tg=s=>Array.isArray(s)&&typeof s[0]!="number",vd=s=>e=>e<=.5?s(2*e)/2:(2-s(2*(1-e)))/2,wd=s=>e=>1-s(1-e),Qa=s=>1-Math.sin(Math.acos(s)),jd=wd(Qa),sg=vd(Qa),Nd=ar(.33,1.53,.69,.99),ei=wd(Nd),rg=vd(ei),ng=s=>(s*=2)<1?.5*ei(s):.5*(2-Math.pow(2,-10*(s-1))),ag={linear:pe,easeIn:Q0,easeInOut:bd,easeOut:eg,circIn:Qa,circInOut:sg,circOut:jd,backIn:ei,backInOut:rg,backOut:Nd,anticipate:ng},ro=s=>{if(Array.isArray(s)){Za(s.length===4);const[e,r,n,a]=s;return ar(e,r,n,a)}else if(typeof s=="string")return ag[s];return s},ti=(s,e)=>r=>!!(rr(r)&&i0.test(r)&&r.startsWith(s)||e&&Object.prototype.hasOwnProperty.call(r,e)),_d=(s,e,r)=>n=>{if(!rr(n))return n;const[a,i,o,l]=n.match(on);return{[s]:parseFloat(a),[e]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},ig=s=>Nt(0,255,s),kn={...Wt,transform:s=>Math.round(ig(s))},Dt={test:ti("rgb","red"),parse:_d("red","green","blue"),transform:({red:s,green:e,blue:r,alpha:n=1})=>"rgba("+kn.transform(s)+", "+kn.transform(e)+", "+kn.transform(r)+", "+Fs($s.transform(n))+")"};function og(s){let e="",r="",n="",a="";return s.length>5?(e=s.substring(1,3),r=s.substring(3,5),n=s.substring(5,7),a=s.substring(7,9)):(e=s.substring(1,2),r=s.substring(2,3),n=s.substring(3,4),a=s.substring(4,5),e+=e,r+=r,n+=n,a+=a),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const da={test:ti("#"),parse:og,transform:Dt.transform},ts={test:ti("hsl","hue"),parse:_d("hue","saturation","lightness"),transform:({hue:s,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(s)+", "+et.transform(Fs(e))+", "+et.transform(Fs(r))+", "+Fs($s.transform(n))+")"},Se={test:s=>Dt.test(s)||da.test(s)||ts.test(s),parse:s=>Dt.test(s)?Dt.parse(s):ts.test(s)?ts.parse(s):da.parse(s),transform:s=>rr(s)?s:s.hasOwnProperty("red")?Dt.transform(s):ts.transform(s)},le=(s,e,r)=>-r*s+r*e+s;function Sn(s,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?s+(e-s)*6*r:r<1/2?e:r<2/3?s+(e-s)*(2/3-r)*6:s}function lg({hue:s,saturation:e,lightness:r,alpha:n}){s/=360,e/=100,r/=100;let a=0,i=0,o=0;if(!e)a=i=o=r;else{const l=r<.5?r*(1+e):r+e-r*e,d=2*r-l;a=Sn(d,l,s+1/3),i=Sn(d,l,s),o=Sn(d,l,s-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}const Cn=(s,e,r)=>{const n=s*s;return Math.sqrt(Math.max(0,r*(e*e-n)+n))},cg=[da,Dt,ts],dg=s=>cg.find(e=>e.test(s));function no(s){const e=dg(s);let r=e.parse(s);return e===ts&&(r=lg(r)),r}const kd=(s,e)=>{const r=no(s),n=no(e),a={...r};return i=>(a.red=Cn(r.red,n.red,i),a.green=Cn(r.green,n.green,i),a.blue=Cn(r.blue,n.blue,i),a.alpha=le(r.alpha,n.alpha,i),Dt.transform(a))};function ug(s){var e,r;return isNaN(s)&&rr(s)&&(((e=s.match(on))===null||e===void 0?void 0:e.length)||0)+(((r=s.match(Yc))===null||r===void 0?void 0:r.length)||0)>0}const Sd={regex:n0,countKey:"Vars",token:"${v}",parse:pe},Cd={regex:Yc,countKey:"Colors",token:"${c}",parse:Se.parse},Td={regex:on,countKey:"Numbers",token:"${n}",parse:Wt.parse};function Tn(s,{regex:e,countKey:r,token:n,parse:a}){const i=s.tokenised.match(e);i&&(s["num"+r]=i.length,s.tokenised=s.tokenised.replace(e,n),s.values.push(...i.map(a)))}function Dr(s){const e=s.toString(),r={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Tn(r,Sd),Tn(r,Cd),Tn(r,Td),r}function Ed(s){return Dr(s).values}function Pd(s){const{values:e,numColors:r,numVars:n,tokenised:a}=Dr(s),i=e.length;return o=>{let l=a;for(let d=0;d<i;d++)d<n?l=l.replace(Sd.token,o[d]):d<n+r?l=l.replace(Cd.token,Se.transform(o[d])):l=l.replace(Td.token,Fs(o[d]));return l}}const hg=s=>typeof s=="number"?0:s;function mg(s){const e=Ed(s);return Pd(s)(e.map(hg))}const _t={test:ug,parse:Ed,createTransformer:Pd,getAnimatableNone:mg},Ad=(s,e)=>r=>`${r>0?e:s}`;function Ld(s,e){return typeof s=="number"?r=>le(s,e,r):Se.test(s)?kd(s,e):s.startsWith("var(")?Ad(s,e):Md(s,e)}const Rd=(s,e)=>{const r=[...s],n=r.length,a=s.map((i,o)=>Ld(i,e[o]));return i=>{for(let o=0;o<n;o++)r[o]=a[o](i);return r}},fg=(s,e)=>{const r={...s,...e},n={};for(const a in r)s[a]!==void 0&&e[a]!==void 0&&(n[a]=Ld(s[a],e[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}},Md=(s,e)=>{const r=_t.createTransformer(e),n=Dr(s),a=Dr(e);return n.numVars===a.numVars&&n.numColors===a.numColors&&n.numNumbers>=a.numNumbers?vt(Rd(n.values,a.values),r):Ad(s,e)},Ys=(s,e,r)=>{const n=e-s;return n===0?1:(r-s)/n},ao=(s,e)=>r=>le(s,e,r);function pg(s){return typeof s=="number"?ao:typeof s=="string"?Se.test(s)?kd:Md:Array.isArray(s)?Rd:typeof s=="object"?fg:ao}function xg(s,e,r){const n=[],a=r||pg(s[0]),i=s.length-1;for(let o=0;o<i;o++){let l=a(s[o],s[o+1]);if(e){const d=Array.isArray(e)?e[o]||pe:e;l=vt(d,l)}n.push(l)}return n}function Id(s,e,{clamp:r=!0,ease:n,mixer:a}={}){const i=s.length;if(Za(i===e.length),i===1)return()=>e[0];s[0]>s[i-1]&&(s=[...s].reverse(),e=[...e].reverse());const o=xg(e,n,a),l=o.length,d=c=>{let u=0;if(l>1)for(;u<s.length-2&&!(c<s[u+1]);u++);const h=Ys(s[u],s[u+1],c);return o[u](h)};return r?c=>d(Nt(s[0],s[i-1],c)):d}function gg(s,e){const r=s[s.length-1];for(let n=1;n<=e;n++){const a=Ys(0,e,n);s.push(le(r,1,a))}}function yg(s){const e=[0];return gg(e,s.length-1),e}function bg(s,e){return s.map(r=>r*e)}function vg(s,e){return s.map(()=>e||bd).splice(0,s.length-1)}function $r({duration:s=300,keyframes:e,times:r,ease:n="easeInOut"}){const a=tg(n)?n.map(ro):ro(n),i={done:!1,value:e[0]},o=bg(r&&r.length===e.length?r:yg(e),s),l=Id(o,e,{ease:Array.isArray(a)?a:vg(e,a)});return{calculatedDuration:s,next:d=>(i.value=l(d),i.done=d>=s,i)}}function Od(s,e){return e?s*(1e3/e):0}const wg=5;function Dd(s,e,r){const n=Math.max(e-wg,0);return Od(r-s(n),e-n)}const En=.001,jg=.01,io=10,Ng=.05,_g=1;function kg({duration:s=800,bounce:e=.25,velocity:r=0,mass:n=1}){let a,i;H0(s<=wt(io));let o=1-e;o=Nt(Ng,_g,o),s=Nt(jg,io,lt(s)),o<1?(a=c=>{const u=c*o,h=u*s,m=u-r,f=ua(c,o),x=Math.exp(-h);return En-m/f*x},i=c=>{const h=c*o*s,m=h*r+r,f=Math.pow(o,2)*Math.pow(c,2)*s,x=Math.exp(-h),g=ua(Math.pow(c,2),o);return(-a(c)+En>0?-1:1)*((m-f)*x)/g}):(a=c=>{const u=Math.exp(-c*s),h=(c-r)*s+1;return-En+u*h},i=c=>{const u=Math.exp(-c*s),h=(r-c)*(s*s);return u*h});const l=5/s,d=Cg(a,i,l);if(s=wt(s),isNaN(d))return{stiffness:100,damping:10,duration:s};{const c=Math.pow(d,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:s}}}const Sg=12;function Cg(s,e,r){let n=r;for(let a=1;a<Sg;a++)n=n-s(n)/e(n);return n}function ua(s,e){return s*Math.sqrt(1-e*e)}const Tg=["duration","bounce"],Eg=["stiffness","damping","mass"];function oo(s,e){return e.some(r=>s[r]!==void 0)}function Pg(s){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...s};if(!oo(s,Eg)&&oo(s,Tg)){const r=kg(s);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function $d({keyframes:s,restDelta:e,restSpeed:r,...n}){const a=s[0],i=s[s.length-1],o={done:!1,value:a},{stiffness:l,damping:d,mass:c,duration:u,velocity:h,isResolvedFromDuration:m}=Pg({...n,velocity:-lt(n.velocity||0)}),f=h||0,x=d/(2*Math.sqrt(l*c)),g=i-a,y=lt(Math.sqrt(l/c)),v=Math.abs(g)<5;r||(r=v?.01:2),e||(e=v?.005:.5);let b;if(x<1){const w=ua(y,x);b=k=>{const j=Math.exp(-x*y*k);return i-j*((f+x*y*g)/w*Math.sin(w*k)+g*Math.cos(w*k))}}else if(x===1)b=w=>i-Math.exp(-y*w)*(g+(f+y*g)*w);else{const w=y*Math.sqrt(x*x-1);b=k=>{const j=Math.exp(-x*y*k),T=Math.min(w*k,300);return i-j*((f+x*y*g)*Math.sinh(T)+w*g*Math.cosh(T))/w}}return{calculatedDuration:m&&u||null,next:w=>{const k=b(w);if(m)o.done=w>=u;else{let j=f;w!==0&&(x<1?j=Dd(b,w,k):j=0);const T=Math.abs(j)<=r,N=Math.abs(i-k)<=e;o.done=T&&N}return o.value=o.done?i:k,o}}}function lo({keyframes:s,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:d,restDelta:c=.5,restSpeed:u}){const h=s[0],m={done:!1,value:h},f=_=>l!==void 0&&_<l||d!==void 0&&_>d,x=_=>l===void 0?d:d===void 0||Math.abs(l-_)<Math.abs(d-_)?l:d;let g=r*e;const y=h+g,v=o===void 0?y:o(y);v!==y&&(g=v-h);const b=_=>-g*Math.exp(-_/n),w=_=>v+b(_),k=_=>{const P=b(_),$=w(_);m.done=Math.abs(P)<=c,m.value=m.done?v:$};let j,T;const N=_=>{f(m.value)&&(j=_,T=$d({keyframes:[m.value,x(m.value)],velocity:Dd(w,_,m.value),damping:a,stiffness:i,restDelta:c,restSpeed:u}))};return N(0),{calculatedDuration:null,next:_=>{let P=!1;return!T&&j===void 0&&(P=!0,k(_),N(_)),j!==void 0&&_>j?T.next(_-j):(!P&&k(_),m)}}}const Ag=s=>{const e=({timestamp:r})=>s(r);return{start:()=>ae.update(e,!0),stop:()=>ut(e),now:()=>Ne.isProcessing?Ne.timestamp:performance.now()}},co=2e4;function uo(s){let e=0;const r=50;let n=s.next(e);for(;!n.done&&e<co;)e+=r,n=s.next(e);return e>=co?1/0:e}const Lg={decay:lo,inertia:lo,tween:$r,keyframes:$r,spring:$d};function Fr({autoplay:s=!0,delay:e=0,driver:r=Ag,keyframes:n,type:a="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:d,onStop:c,onComplete:u,onUpdate:h,...m}){let f=1,x=!1,g,y;const v=()=>{y=new Promise(D=>{g=D})};v();let b;const w=Lg[a]||$r;let k;w!==$r&&typeof n[0]!="number"&&(k=Id([0,100],n,{clamp:!1}),n=[0,100]);const j=w({...m,keyframes:n});let T;l==="mirror"&&(T=w({...m,keyframes:[...n].reverse(),velocity:-(m.velocity||0)}));let N="idle",_=null,P=null,$=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=uo(j));const{calculatedDuration:G}=j;let U=1/0,L=1/0;G!==null&&(U=G+o,L=U*(i+1)-o);let S=0;const R=D=>{if(P===null)return;f>0&&(P=Math.min(P,D)),f<0&&(P=Math.min(D-L/f,P)),_!==null?S=_:S=Math.round(D-P)*f;const X=S-e*(f>=0?1:-1),Z=f>=0?X<0:X>L;S=Math.max(X,0),N==="finished"&&_===null&&(S=L);let Ze=S,Ct=j;if(i){const qe=Math.min(S,L)/U;let Qe=Math.floor(qe),Re=qe%1;!Re&&qe>=1&&(Re=1),Re===1&&Qe--,Qe=Math.min(Qe,i+1),!!(Qe%2)&&(l==="reverse"?(Re=1-Re,o&&(Re-=o/U)):l==="mirror"&&(Ct=T)),Ze=Nt(0,1,Re)*U}const q=Z?{done:!1,value:n[0]}:Ct.next(Ze);k&&(q.value=k(q.value));let{done:ue}=q;!Z&&G!==null&&(ue=f>=0?S>=L:S<=0);const he=_===null&&(N==="finished"||N==="running"&&ue);return h&&h(q.value),he&&I(),q},M=()=>{b&&b.stop(),b=void 0},F=()=>{N="idle",M(),g(),v(),P=$=null},I=()=>{N="finished",u&&u(),M(),g()},W=()=>{if(x)return;b||(b=r(R));const D=b.now();d&&d(),_!==null?P=D-_:(!P||N==="finished")&&(P=D),N==="finished"&&v(),$=P,_=null,N="running",b.start()};s&&W();const B={then(D,X){return y.then(D,X)},get time(){return lt(S)},set time(D){D=wt(D),S=D,_!==null||!b||f===0?_=D:P=b.now()-D/f},get duration(){const D=j.calculatedDuration===null?uo(j):j.calculatedDuration;return lt(D)},get speed(){return f},set speed(D){D===f||!b||(f=D,B.time=lt(S))},get state(){return N},play:W,pause:()=>{N="paused",_=S},stop:()=>{x=!0,N!=="idle"&&(N="idle",c&&c(),F())},cancel:()=>{$!==null&&R($),F()},complete:()=>{N="finished"},sample:D=>(P=0,R(D))};return B}function Rg(s){let e;return()=>(e===void 0&&(e=s()),e)}const Mg=Rg(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ig=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),gr=10,Og=2e4,Dg=(s,e)=>e.type==="spring"||s==="backgroundColor"||!pd(e.ease);function $g(s,e,{onUpdate:r,onComplete:n,...a}){if(!(Mg()&&Ig.has(e)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let o=!1,l,d,c=!1;const u=()=>{d=new Promise(w=>{l=w})};u();let{keyframes:h,duration:m=300,ease:f,times:x}=a;if(Dg(e,a)){const w=Fr({...a,repeat:0,delay:0});let k={done:!1,value:h[0]};const j=[];let T=0;for(;!k.done&&T<Og;)k=w.sample(T),j.push(k.value),T+=gr;x=void 0,h=j,m=T-gr,f="linear"}const g=K0(s.owner.current,e,h,{...a,duration:m,ease:f,times:x}),y=()=>{c=!1,g.cancel()},v=()=>{c=!0,ae.update(y),l(),u()};return g.onfinish=()=>{c||(s.set(X0(h,a)),n&&n(),v())},{then(w,k){return d.then(w,k)},attachTimeline(w){return g.timeline=w,g.onfinish=null,pe},get time(){return lt(g.currentTime||0)},set time(w){g.currentTime=wt(w)},get speed(){return g.playbackRate},set speed(w){g.playbackRate=w},get duration(){return lt(m)},play:()=>{o||(g.play(),ut(y))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:w}=g;if(w){const k=Fr({...a,autoplay:!1});s.setWithVelocity(k.sample(w-gr).value,k.sample(w).value,gr)}v()},complete:()=>{c||g.finish()},cancel:v}}function Fg({keyframes:s,delay:e,onUpdate:r,onComplete:n}){const a=()=>(r&&r(s[s.length-1]),n&&n(),{time:0,speed:1,duration:0,play:pe,pause:pe,stop:pe,then:i=>(i(),Promise.resolve()),cancel:pe,complete:pe});return e?Fr({keyframes:[0,1],duration:0,delay:e,onComplete:a}):a()}const Ug={type:"spring",stiffness:500,damping:25,restSpeed:10},Vg=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),Bg={type:"keyframes",duration:.8},zg={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},qg=(s,{keyframes:e})=>e.length>2?Bg:Ht.has(s)?s.startsWith("scale")?Vg(e[1]):Ug:zg,ha=(s,e)=>s==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(_t.test(e)||e==="0")&&!e.startsWith("url(")),Gg=new Set(["brightness","contrast","saturate","opacity"]);function Hg(s){const[e,r]=s.slice(0,-1).split("(");if(e==="drop-shadow")return s;const[n]=r.match(on)||[];if(!n)return s;const a=r.replace(n,"");let i=Gg.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+a+")"}const Wg=/([a-z-]*)\(.*?\)/g,ma={..._t,getAnimatableNone:s=>{const e=s.match(Wg);return e?e.map(Hg).join(" "):s}},Kg={...Zc,color:Se,backgroundColor:Se,outlineColor:Se,fill:Se,stroke:Se,borderColor:Se,borderTopColor:Se,borderRightColor:Se,borderBottomColor:Se,borderLeftColor:Se,filter:ma,WebkitFilter:ma},si=s=>Kg[s];function Fd(s,e){let r=si(s);return r!==ma&&(r=_t),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const Ud=s=>/^0[^.\s]+$/.test(s);function Xg(s){if(typeof s=="number")return s===0;if(s!==null)return s==="none"||s==="0"||Ud(s)}function Jg(s,e,r,n){const a=ha(e,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const o=n.from!==void 0?n.from:s.get();let l;const d=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),Xg(i[c])&&d.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(l=i[c]);if(a&&d.length&&l)for(let c=0;c<d.length;c++){const u=d[c];i[u]=Fd(e,l)}return i}function Yg({when:s,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:d,elapsed:c,...u}){return!!Object.keys(u).length}function ri(s,e){return s[e]||s.default||s}const Zg={skipAnimations:!1},ni=(s,e,r,n={})=>a=>{const i=ri(n,s)||{},o=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-wt(o);const d=Jg(e,s,r,i),c=d[0],u=d[d.length-1],h=ha(s,c),m=ha(s,u);let f={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:x=>{e.set(x),i.onUpdate&&i.onUpdate(x)},onComplete:()=>{a(),i.onComplete&&i.onComplete()}};if(Yg(i)||(f={...f,...qg(s,f)}),f.duration&&(f.duration=wt(f.duration)),f.repeatDelay&&(f.repeatDelay=wt(f.repeatDelay)),!h||!m||W0.current||i.type===!1||Zg.skipAnimations)return Fg(f);if(!n.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const x=$g(e,s,f);if(x)return x}return Fr(f)};function Ur(s){return!!(Ae(s)&&s.add)}const Vd=s=>/^\-?\d*\.?\d+$/.test(s);function ai(s,e){s.indexOf(e)===-1&&s.push(e)}function ii(s,e){const r=s.indexOf(e);r>-1&&s.splice(r,1)}class oi{constructor(){this.subscriptions=[]}add(e){return ai(this.subscriptions,e),()=>ii(this.subscriptions,e)}notify(e,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,r,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Qg=s=>!isNaN(parseFloat(s));class ey{constructor(e,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,a=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:o}=Ne;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,ae.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ae.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=Qg(this.current),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new oi);const n=this.events[e].add(r);return e==="change"?()=>{n(),ae.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Od(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fs(s,e){return new ey(s,e)}const Bd=s=>e=>e.test(s),ty={test:s=>s==="auto",parse:s=>s},zd=[Wt,K,et,xt,l0,o0,ty],Ts=s=>zd.find(Bd(s)),sy=[...zd,Se,_t],ry=s=>sy.find(Bd(s));function ny(s,e,r){s.hasValue(e)?s.getValue(e).set(r):s.addValue(e,fs(r))}function ay(s,e){const r=cn(s,e);let{transitionEnd:n={},transition:a={},...i}=r?s.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const o in i){const l=j0(i[o]);ny(s,o,l)}}function iy(s,e,r){var n,a;const i=Object.keys(e).filter(l=>!s.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const d=i[l],c=e[d];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(a=(n=r[d])!==null&&n!==void 0?n:s.readValue(d))!==null&&a!==void 0?a:e[d]),u!=null&&(typeof u=="string"&&(Vd(u)||Ud(u))?u=parseFloat(u):!ry(u)&&_t.test(c)&&(u=Fd(d,c)),s.addValue(d,fs(u,{owner:s})),r[d]===void 0&&(r[d]=u),u!==null&&s.setBaseTarget(d,u))}}function oy(s,e){return e?(e[s]||e.default||e).from:void 0}function ly(s,e,r){const n={};for(const a in s){const i=oy(a,e);if(i!==void 0)n[a]=i;else{const o=r.getValue(a);o&&(n[a]=o.get())}}return n}function cy({protectedKeys:s,needsAnimating:e},r){const n=s.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function dy(s,e){const r=s.get();if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(e[n]!==r)return!0}else return r!==e}function qd(s,e,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:i=s.getDefaultTransition(),transitionEnd:o,...l}=s.makeTargetAnimatable(e);const d=s.getValue("willChange");n&&(i=n);const c=[],u=a&&s.animationState&&s.animationState.getState()[a];for(const h in l){const m=s.getValue(h),f=l[h];if(!m||f===void 0||u&&cy(u,h))continue;const x={delay:r,elapsed:0,...ri(i||{},h)};if(window.HandoffAppearAnimations){const v=s.getProps()[Gc];if(v){const b=window.HandoffAppearAnimations(v,h,m,ae);b!==null&&(x.elapsed=b,x.isHandoff=!0)}}let g=!x.isHandoff&&!dy(m,f);if(x.type==="spring"&&(m.getVelocity()||x.velocity)&&(g=!1),m.animation&&(g=!1),g)continue;m.start(ni(h,m,f,s.shouldReduceMotion&&Ht.has(h)?{type:!1}:x));const y=m.animation;Ur(d)&&(d.add(h),y.then(()=>d.remove(h))),c.push(y)}return o&&Promise.all(c).then(()=>{o&&ay(s,o)}),c}function fa(s,e,r={}){const n=cn(s,e,r.custom);let{transition:a=s.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const i=n?()=>Promise.all(qd(s,n,r)):()=>Promise.resolve(),o=s.variantChildren&&s.variantChildren.size?(d=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:h}=a;return uy(s,e,c+d,u,h,r)}:()=>Promise.resolve(),{when:l}=a;if(l){const[d,c]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>c())}else return Promise.all([i(),o(r.delay)])}function uy(s,e,r=0,n=0,a=1,i){const o=[],l=(s.variantChildren.size-1)*n,d=a===1?(c=0)=>c*n:(c=0)=>l-c*n;return Array.from(s.variantChildren).sort(hy).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(fa(c,e,{...i,delay:r+d(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function hy(s,e){return s.sortNodePosition(e)}function my(s,e,r={}){s.notify("AnimationStart",e);let n;if(Array.isArray(e)){const a=e.map(i=>fa(s,i,r));n=Promise.all(a)}else if(typeof e=="string")n=fa(s,e,r);else{const a=typeof e=="function"?cn(s,e,r.custom):e;n=Promise.all(qd(s,a,r))}return n.then(()=>s.notify("AnimationComplete",e))}const fy=[...Ba].reverse(),py=Ba.length;function xy(s){return e=>Promise.all(e.map(({animation:r,options:n})=>my(s,r,n)))}function gy(s){let e=xy(s);const r=by();let n=!0;const a=(d,c)=>{const u=cn(s,c);if(u){const{transition:h,transitionEnd:m,...f}=u;d={...d,...f,...m}}return d};function i(d){e=d(s)}function o(d,c){const u=s.getProps(),h=s.getVariantContext(!0)||{},m=[],f=new Set;let x={},g=1/0;for(let v=0;v<py;v++){const b=fy[v],w=r[b],k=u[b]!==void 0?u[b]:h[b],j=Xs(k),T=b===c?w.isActive:null;T===!1&&(g=v);let N=k===h[b]&&k!==u[b]&&j;if(N&&n&&s.manuallyAnimateOnMount&&(N=!1),w.protectedKeys={...x},!w.isActive&&T===null||!k&&!w.prevProp||nn(k)||typeof k=="boolean")continue;let P=yy(w.prevProp,k)||b===c&&w.isActive&&!N&&j||v>g&&j,$=!1;const G=Array.isArray(k)?k:[k];let U=G.reduce(a,{});T===!1&&(U={});const{prevResolvedValues:L={}}=w,S={...L,...U},R=M=>{P=!0,f.has(M)&&($=!0,f.delete(M)),w.needsAnimating[M]=!0};for(const M in S){const F=U[M],I=L[M];if(x.hasOwnProperty(M))continue;let W=!1;Or(F)&&Or(I)?W=!md(F,I):W=F!==I,W?F!==void 0?R(M):f.add(M):F!==void 0&&f.has(M)?R(M):w.protectedKeys[M]=!0}w.prevProp=k,w.prevResolvedValues=U,w.isActive&&(x={...x,...U}),n&&s.blockInitialAnimation&&(P=!1),P&&(!N||$)&&m.push(...G.map(M=>({animation:M,options:{type:b,...d}})))}if(f.size){const v={};f.forEach(b=>{const w=s.getBaseTarget(b);w!==void 0&&(v[b]=w)}),m.push({animation:v})}let y=!!m.length;return n&&(u.initial===!1||u.initial===u.animate)&&!s.manuallyAnimateOnMount&&(y=!1),n=!1,y?e(m):Promise.resolve()}function l(d,c,u){var h;if(r[d].isActive===c)return Promise.resolve();(h=s.variantChildren)===null||h===void 0||h.forEach(f=>{var x;return(x=f.animationState)===null||x===void 0?void 0:x.setActive(d,c)}),r[d].isActive=c;const m=o(u,d);for(const f in r)r[f].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r}}function yy(s,e){return typeof e=="string"?e!==s:Array.isArray(e)?!md(e,s):!1}function Pt(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function by(){return{animate:Pt(!0),whileInView:Pt(),whileHover:Pt(),whileTap:Pt(),whileDrag:Pt(),whileFocus:Pt(),exit:Pt()}}class vy extends St{constructor(e){super(e),e.animationState||(e.animationState=gy(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),nn(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let wy=0;class jy extends St{constructor(){super(...arguments),this.id=wy++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===a)return;const i=this.node.animationState.setActive("exit",!e,{custom:n??this.node.getProps().custom});r&&!e&&i.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Ny={animation:{Feature:vy},exit:{Feature:jy}},ho=(s,e)=>Math.abs(s-e);function _y(s,e){const r=ho(s.x,e.x),n=ho(s.y,e.y);return Math.sqrt(r**2+n**2)}class Gd{constructor(e,r,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=An(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,f=_y(h.offset,{x:0,y:0})>=3;if(!m&&!f)return;const{point:x}=h,{timestamp:g}=Ne;this.history.push({...x,timestamp:g});const{onStart:y,onMove:v}=this.handlers;m||(y&&y(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Pn(m,this.transformPagePoint),ae.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:f,onSessionEnd:x,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=An(h.type==="pointercancel"?this.lastMoveEventInfo:Pn(m,this.transformPagePoint),this.history);this.startEvent&&f&&f(h,y),x&&x(h,y)},!ld(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=a||window;const o=ln(e),l=Pn(o,this.transformPagePoint),{point:d}=l,{timestamp:c}=Ne;this.history=[{...d,timestamp:c}];const{onSessionStart:u}=r;u&&u(e,An(l,this.history)),this.removeListeners=vt(ot(this.contextWindow,"pointermove",this.handlePointerMove),ot(this.contextWindow,"pointerup",this.handlePointerUp),ot(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ut(this.updatePoint)}}function Pn(s,e){return e?{point:e(s.point)}:s}function mo(s,e){return{x:s.x-e.x,y:s.y-e.y}}function An({point:s},e){return{point:s,delta:mo(s,Hd(e)),offset:mo(s,ky(e)),velocity:Sy(e,.1)}}function ky(s){return s[0]}function Hd(s){return s[s.length-1]}function Sy(s,e){if(s.length<2)return{x:0,y:0};let r=s.length-1,n=null;const a=Hd(s);for(;r>=0&&(n=s[r],!(a.timestamp-n.timestamp>wt(e)));)r--;if(!n)return{x:0,y:0};const i=lt(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function De(s){return s.max-s.min}function pa(s,e=0,r=.01){return Math.abs(s-e)<=r}function fo(s,e,r,n=.5){s.origin=n,s.originPoint=le(e.min,e.max,s.origin),s.scale=De(r)/De(e),(pa(s.scale,1,1e-4)||isNaN(s.scale))&&(s.scale=1),s.translate=le(r.min,r.max,s.origin)-s.originPoint,(pa(s.translate)||isNaN(s.translate))&&(s.translate=0)}function Us(s,e,r,n){fo(s.x,e.x,r.x,n?n.originX:void 0),fo(s.y,e.y,r.y,n?n.originY:void 0)}function po(s,e,r){s.min=r.min+e.min,s.max=s.min+De(e)}function Cy(s,e,r){po(s.x,e.x,r.x),po(s.y,e.y,r.y)}function xo(s,e,r){s.min=e.min-r.min,s.max=s.min+De(e)}function Vs(s,e,r){xo(s.x,e.x,r.x),xo(s.y,e.y,r.y)}function Ty(s,{min:e,max:r},n){return e!==void 0&&s<e?s=n?le(e,s,n.min):Math.max(s,e):r!==void 0&&s>r&&(s=n?le(r,s,n.max):Math.min(s,r)),s}function go(s,e,r){return{min:e!==void 0?s.min+e:void 0,max:r!==void 0?s.max+r-(s.max-s.min):void 0}}function Ey(s,{top:e,left:r,bottom:n,right:a}){return{x:go(s.x,r,a),y:go(s.y,e,n)}}function yo(s,e){let r=e.min-s.min,n=e.max-s.max;return e.max-e.min<s.max-s.min&&([r,n]=[n,r]),{min:r,max:n}}function Py(s,e){return{x:yo(s.x,e.x),y:yo(s.y,e.y)}}function Ay(s,e){let r=.5;const n=De(s),a=De(e);return a>n?r=Ys(e.min,e.max-n,s.min):n>a&&(r=Ys(s.min,s.max-a,e.min)),Nt(0,1,r)}function Ly(s,e){const r={};return e.min!==void 0&&(r.min=e.min-s.min),e.max!==void 0&&(r.max=e.max-s.min),r}const xa=.35;function Ry(s=xa){return s===!1?s=0:s===!0&&(s=xa),{x:bo(s,"left","right"),y:bo(s,"top","bottom")}}function bo(s,e,r){return{min:vo(s,e),max:vo(s,r)}}function vo(s,e){return typeof s=="number"?s:s[e]||0}const wo=()=>({translate:0,scale:1,origin:0,originPoint:0}),ss=()=>({x:wo(),y:wo()}),jo=()=>({min:0,max:0}),xe=()=>({x:jo(),y:jo()});function Fe(s){return[s("x"),s("y")]}function Wd({top:s,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:s,max:n}}}function My({x:s,y:e}){return{top:e.min,right:s.max,bottom:e.max,left:s.min}}function Iy(s,e){if(!e)return s;const r=e({x:s.left,y:s.top}),n=e({x:s.right,y:s.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Ln(s){return s===void 0||s===1}function ga({scale:s,scaleX:e,scaleY:r}){return!Ln(s)||!Ln(e)||!Ln(r)}function Lt(s){return ga(s)||Kd(s)||s.z||s.rotate||s.rotateX||s.rotateY}function Kd(s){return No(s.x)||No(s.y)}function No(s){return s&&s!=="0%"}function Vr(s,e,r){const n=s-r,a=e*n;return r+a}function _o(s,e,r,n,a){return a!==void 0&&(s=Vr(s,a,n)),Vr(s,r,n)+e}function ya(s,e=0,r=1,n,a){s.min=_o(s.min,e,r,n,a),s.max=_o(s.max,e,r,n,a)}function Xd(s,{x:e,y:r}){ya(s.x,e.translate,e.scale,e.originPoint),ya(s.y,r.translate,r.scale,r.originPoint)}function Oy(s,e,r,n=!1){const a=r.length;if(!a)return;e.x=e.y=1;let i,o;for(let l=0;l<a;l++){i=r[l],o=i.projectionDelta;const d=i.instance;d&&d.style&&d.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&rs(s,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Xd(s,o)),n&&Lt(i.latestValues)&&rs(s,i.latestValues))}e.x=ko(e.x),e.y=ko(e.y)}function ko(s){return Number.isInteger(s)||s>1.0000000000001||s<.999999999999?s:1}function yt(s,e){s.min=s.min+e,s.max=s.max+e}function So(s,e,[r,n,a]){const i=e[a]!==void 0?e[a]:.5,o=le(s.min,s.max,i);ya(s,e[r],e[n],o,e.scale)}const Dy=["x","scaleX","originX"],$y=["y","scaleY","originY"];function rs(s,e){So(s.x,e,Dy),So(s.y,e,$y)}function Jd(s,e){return Wd(Iy(s.getBoundingClientRect(),e))}function Fy(s,e,r){const n=Jd(s,r),{scroll:a}=e;return a&&(yt(n.x,a.offset.x),yt(n.y,a.offset.y)),n}const Yd=({current:s})=>s?s.ownerDocument.defaultView:null,Uy=new WeakMap;class Vy{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xe(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(ln(u,"page").point)},i=(u,h)=>{const{drag:m,dragPropagation:f,onDragStart:x}=this.getProps();if(m&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=dd(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Fe(y=>{let v=this.getAxisMotionValue(y).get()||0;if(et.test(v)){const{projection:b}=this.visualElement;if(b&&b.layout){const w=b.layout.layoutBox[y];w&&(v=De(w)*(parseFloat(v)/100))}}this.originPoint[y]=v}),x&&ae.update(()=>x(u,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:m,dragDirectionLock:f,onDirectionLock:x,onDrag:g}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:y}=h;if(f&&this.currentDirection===null){this.currentDirection=By(y),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),g&&g(u,h)},l=(u,h)=>this.stop(u,h),d=()=>Fe(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Gd(e,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Yd(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&ae.update(()=>i(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:a}=this.getProps();if(!n||!yr(e,a,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=Ty(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;r&&es(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=Ey(a.layoutBox,r):this.constraints=!1,this.elastic=Ry(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Fe(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=Ly(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!es(e))return!1;const n=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=Fy(n,a.root,this.visualElement.getTransformPagePoint());let o=Py(a.layout.layoutBox,i);if(r){const l=r(My(o));this.hasMutatedConstraints=!!l,l&&(o=Wd(l))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},c=Fe(u=>{if(!yr(u,r,this.currentDirection))return;let h=d&&d[u]||{};o&&(h={min:0,max:0});const m=a?200:1e6,f=a?40:1e7,x={type:"inertia",velocity:n?e[u]:0,bounceStiffness:m,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,x)});return Promise.all(c).then(l)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return n.start(ni(e,n,0,r))}stopAnimation(){Fe(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Fe(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Fe(r=>{const{drag:n}=this.getProps();if(!yr(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];i.set(e[r]-le(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!es(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Fe(o=>{const l=this.getAxisMotionValue(o);if(l){const d=l.get();a[o]=Ay({min:d,max:d},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Fe(o=>{if(!yr(o,e,null))return;const l=this.getAxisMotionValue(o),{min:d,max:c}=this.constraints[o];l.set(le(d,c,a[o]))})}addListeners(){if(!this.visualElement.current)return;Uy.set(this.visualElement,this);const e=this.visualElement.current,r=ot(e,"pointerdown",d=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();es(d)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),n();const o=it(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:d,hasLayoutChanged:c})=>{this.isDragging&&c&&(Fe(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=d[u].translate,h.set(h.get()+d[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=xa,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function yr(s,e,r){return(e===!0||e===s)&&(r===null||r===s)}function By(s,e=10){let r=null;return Math.abs(s.y)>e?r="y":Math.abs(s.x)>e&&(r="x"),r}class zy extends St{constructor(e){super(e),this.removeGroupControls=pe,this.removeListeners=pe,this.controls=new Vy(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pe}unmount(){this.removeGroupControls(),this.removeListeners()}}const Co=s=>(e,r)=>{s&&ae.update(()=>s(e,r))};class qy extends St{constructor(){super(...arguments),this.removePointerDownListener=pe}onPointerDown(e){this.session=new Gd(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Yd(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:Co(e),onStart:Co(r),onMove:n,onEnd:(i,o)=>{delete this.session,a&&ae.update(()=>a(i,o))}}}mount(){this.removePointerDownListener=ot(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Gy(){const s=p.useContext(sn);if(s===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:n}=s,a=p.useId();return p.useEffect(()=>n(a),[]),!e&&r?[!1,()=>r&&r(a)]:[!0]}const Nr={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function To(s,e){return e.max===e.min?0:s/(e.max-e.min)*100}const Es={correct:(s,e)=>{if(!e.target)return s;if(typeof s=="string")if(K.test(s))s=parseFloat(s);else return s;const r=To(s,e.target.x),n=To(s,e.target.y);return`${r}% ${n}%`}},Hy={correct:(s,{treeScale:e,projectionDelta:r})=>{const n=s,a=_t.parse(s);if(a.length>5)return n;const i=_t.createTransformer(s),o=typeof a[0]!="number"?1:0,l=r.x.scale*e.x,d=r.y.scale*e.y;a[0+o]/=l,a[1+o]/=d;const c=le(l,d,.5);return typeof a[2+o]=="number"&&(a[2+o]/=c),typeof a[3+o]=="number"&&(a[3+o]/=c),i(a)}};class Wy extends re.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=e;e0(Ky),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Nr.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,a||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||ae.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Zd(s){const[e,r]=Gy(),n=p.useContext(qa);return re.createElement(Wy,{...s,layoutGroup:n,switchLayoutGroup:p.useContext(Wc),isPresent:e,safeToRemove:r})}const Ky={borderRadius:{...Es,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Es,borderTopRightRadius:Es,borderBottomLeftRadius:Es,borderBottomRightRadius:Es,boxShadow:Hy},Qd=["TopLeft","TopRight","BottomLeft","BottomRight"],Xy=Qd.length,Eo=s=>typeof s=="string"?parseFloat(s):s,Po=s=>typeof s=="number"||K.test(s);function Jy(s,e,r,n,a,i){a?(s.opacity=le(0,r.opacity!==void 0?r.opacity:1,Yy(n)),s.opacityExit=le(e.opacity!==void 0?e.opacity:1,0,Zy(n))):i&&(s.opacity=le(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<Xy;o++){const l=`border${Qd[o]}Radius`;let d=Ao(e,l),c=Ao(r,l);if(d===void 0&&c===void 0)continue;d||(d=0),c||(c=0),d===0||c===0||Po(d)===Po(c)?(s[l]=Math.max(le(Eo(d),Eo(c),n),0),(et.test(c)||et.test(d))&&(s[l]+="%")):s[l]=c}(e.rotate||r.rotate)&&(s.rotate=le(e.rotate||0,r.rotate||0,n))}function Ao(s,e){return s[e]!==void 0?s[e]:s.borderRadius}const Yy=eu(0,.5,jd),Zy=eu(.5,.95,pe);function eu(s,e,r){return n=>n<s?0:n>e?1:r(Ys(s,e,n))}function Lo(s,e){s.min=e.min,s.max=e.max}function $e(s,e){Lo(s.x,e.x),Lo(s.y,e.y)}function Ro(s,e,r,n,a){return s-=e,s=Vr(s,1/r,n),a!==void 0&&(s=Vr(s,1/a,n)),s}function Qy(s,e=0,r=1,n=.5,a,i=s,o=s){if(et.test(e)&&(e=parseFloat(e),e=le(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=le(i.min,i.max,n);s===i&&(l-=e),s.min=Ro(s.min,e,r,l,a),s.max=Ro(s.max,e,r,l,a)}function Mo(s,e,[r,n,a],i,o){Qy(s,e[r],e[n],e[a],e.scale,i,o)}const eb=["x","scaleX","originX"],tb=["y","scaleY","originY"];function Io(s,e,r,n){Mo(s.x,e,eb,r?r.x:void 0,n?n.x:void 0),Mo(s.y,e,tb,r?r.y:void 0,n?n.y:void 0)}function Oo(s){return s.translate===0&&s.scale===1}function tu(s){return Oo(s.x)&&Oo(s.y)}function sb(s,e){return s.x.min===e.x.min&&s.x.max===e.x.max&&s.y.min===e.y.min&&s.y.max===e.y.max}function su(s,e){return Math.round(s.x.min)===Math.round(e.x.min)&&Math.round(s.x.max)===Math.round(e.x.max)&&Math.round(s.y.min)===Math.round(e.y.min)&&Math.round(s.y.max)===Math.round(e.y.max)}function Do(s){return De(s.x)/De(s.y)}class rb{constructor(){this.members=[]}add(e){ai(this.members,e),e.scheduleRender()}remove(e){if(ii(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(a=>e===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $o(s,e,r){let n="";const a=s.x.translate/e.x,i=s.y.translate/e.y;if((a||i)&&(n=`translate3d(${a}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{rotate:d,rotateX:c,rotateY:u}=r;d&&(n+=`rotate(${d}deg) `),c&&(n+=`rotateX(${c}deg) `),u&&(n+=`rotateY(${u}deg) `)}const o=s.x.scale*e.x,l=s.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const nb=(s,e)=>s.depth-e.depth;class ab{constructor(){this.children=[],this.isDirty=!1}add(e){ai(this.children,e),this.isDirty=!0}remove(e){ii(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(nb),this.isDirty=!1,this.children.forEach(e)}}function ib(s,e){const r=performance.now(),n=({timestamp:a})=>{const i=a-r;i>=e&&(ut(n),s(i-e))};return ae.read(n,!0),()=>ut(n)}function ob(s){window.MotionDebug&&window.MotionDebug.record(s)}function lb(s){return s instanceof SVGElement&&s.tagName!=="svg"}function cb(s,e,r){const n=Ae(s)?s:fs(s);return n.start(ni("",n,e,r)),n.animation}const Fo=["","X","Y","Z"],db={visibility:"hidden"},Uo=1e3;let ub=0;const Rt={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function ru({attachResizeListener:s,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=e==null?void 0:e()){this.id=ub++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Rt.totalNodes=Rt.resolvedTargetDeltas=Rt.recalculatedProjection=0,this.nodes.forEach(fb),this.nodes.forEach(bb),this.nodes.forEach(vb),this.nodes.forEach(pb),ob(Rt)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new ab)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new oi),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const d=this.eventHandlers.get(o);d&&d.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=lb(o),this.instance=o;const{layoutId:d,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||d)&&(this.isLayoutDirty=!0),s){let h;const m=()=>this.root.updateBlockedByResize=!1;s(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=ib(m,250),Nr.hasAnimatedSinceResize&&(Nr.hasAnimatedSinceResize=!1,this.nodes.forEach(Bo))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&u&&(d||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:f,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||kb,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),b=!this.targetLayout||!su(this.targetLayout,x)||f,w=!m&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||m&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,w);const k={...ri(g,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else m||Bo(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ut(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(wb),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Vo);return}this.isUpdating||this.nodes.forEach(gb),this.isUpdating=!1,this.nodes.forEach(yb),this.nodes.forEach(hb),this.nodes.forEach(mb),this.clearAllSnapshots();const l=performance.now();Ne.delta=Nt(0,1e3/60,l-Ne.timestamp),Ne.timestamp=l,Ne.isProcessing=!0,jn.update.process(Ne),jn.preRender.process(Ne),jn.render.process(Ne),Ne.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(xb),this.sharedNodes.forEach(jb)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ae.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ae.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!tu(this.projectionDelta),d=this.getTransformTemplate(),c=d?d(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(l||Lt(this.latestValues)||u)&&(a(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return o&&(d=this.removeTransform(d)),Sb(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return xe();const l=o.measureViewportBox(),{scroll:d}=this.root;return d&&(yt(l.x,d.offset.x),yt(l.y,d.offset.y)),l}removeElementScroll(o){const l=xe();$e(l,o);for(let d=0;d<this.path.length;d++){const c=this.path[d],{scroll:u,options:h}=c;if(c!==this.root&&u&&h.layoutScroll){if(u.isRoot){$e(l,o);const{scroll:m}=this.root;m&&(yt(l.x,-m.offset.x),yt(l.y,-m.offset.y))}yt(l.x,u.offset.x),yt(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const d=xe();$e(d,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&rs(d,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Lt(u.latestValues)&&rs(d,u.latestValues)}return Lt(this.latestValues)&&rs(d,this.latestValues),d}removeTransform(o){const l=xe();$e(l,o);for(let d=0;d<this.path.length;d++){const c=this.path[d];if(!c.instance||!Lt(c.latestValues))continue;ga(c.latestValues)&&c.updateSnapshot();const u=xe(),h=c.measurePageBox();$e(u,h),Io(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Lt(this.latestValues)&&Io(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ne.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==d;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=Ne.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xe(),this.relativeTargetOrigin=xe(),Vs(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),$e(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=xe(),this.targetWithTransforms=xe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Cy(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$e(this.target,this.layout.layoutBox),Xd(this.target,this.targetDelta)):$e(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xe(),this.relativeTargetOrigin=xe(),Vs(this.relativeTargetOrigin,this.target,f.target),$e(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Rt.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ga(this.parent.latestValues)||Kd(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ne.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;$e(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,f=this.treeScale.y;Oy(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:x}=l;if(!x){this.projectionTransform&&(this.projectionDelta=ss(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ss(),this.projectionDeltaWithTransform=ss());const g=this.projectionTransform;Us(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=$o(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==m||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Rt.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const d=this.snapshot,c=d?d.latestValues:{},u={...this.latestValues},h=ss();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=xe(),f=d?d.source:void 0,x=this.layout?this.layout.source:void 0,g=f!==x,y=this.getStack(),v=!y||y.members.length<=1,b=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(_b));this.animationProgress=0;let w;this.mixTargetDelta=k=>{const j=k/1e3;zo(h.x,o.x,j),zo(h.y,o.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Vs(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Nb(this.relativeTarget,this.relativeTargetOrigin,m,j),w&&sb(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=xe()),$e(w,this.relativeTarget)),g&&(this.animationValues=u,Jy(u,c,this.latestValues,j,b,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ut(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ae.update(()=>{Nr.hasAnimatedSinceResize=!0,this.currentAnimation=cb(0,Uo,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Uo),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:d,layout:c,latestValues:u}=o;if(!(!l||!d||!c)){if(this!==o&&this.layout&&c&&nu(this.options.animationType,this.layout.layoutBox,c.layoutBox)){d=this.target||xe();const h=De(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+h;const m=De(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+m}$e(l,d),rs(l,u),Us(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new rb),this.sharedNodes.get(o).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:d}={}){const c=this.getStack();c&&c.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:d}=o;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(l=!0),!l)return;const c={};for(let u=0;u<Fo.length;u++){const h="rotate"+Fo[u];d[h]&&(c[h]=d[h],o.setStaticValue(h,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var l,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return db;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=jr(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=jr(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Lt(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=$o(this.projectionDeltaWithTransform,this.treeScale,m),u&&(c.transform=u(m,c.transform));const{x:f,y:x}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${x.origin*100}% 0`,h.animationValues?c.opacity=h===this?(d=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const g in Mr){if(m[g]===void 0)continue;const{correct:y,applyTo:v}=Mr[g],b=c.transform==="none"?m[g]:y(m[g],h);if(v){const w=v.length;for(let k=0;k<w;k++)c[v[k]]=b}else c[g]=b}return this.options.layoutId&&(c.pointerEvents=h===this?jr(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Vo),this.root.sharedNodes.clear()}}}function hb(s){s.updateLayout()}function mb(s){var e;const r=((e=s.resumeFrom)===null||e===void 0?void 0:e.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&r&&s.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=s.layout,{animationType:i}=s.options,o=r.source!==s.layout.source;i==="size"?Fe(h=>{const m=o?r.measuredBox[h]:r.layoutBox[h],f=De(m);m.min=n[h].min,m.max=m.min+f}):nu(i,r.layoutBox,n)&&Fe(h=>{const m=o?r.measuredBox[h]:r.layoutBox[h],f=De(n[h]);m.max=m.min+f,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[h].max=s.relativeTarget[h].min+f)});const l=ss();Us(l,n,r.layoutBox);const d=ss();o?Us(d,s.applyTransform(a,!0),r.measuredBox):Us(d,n,r.layoutBox);const c=!tu(l);let u=!1;if(!s.resumeFrom){const h=s.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:f}=h;if(m&&f){const x=xe();Vs(x,r.layoutBox,m.layoutBox);const g=xe();Vs(g,n,f.layoutBox),su(x,g)||(u=!0),h.options.layoutRoot&&(s.relativeTarget=g,s.relativeTargetOrigin=x,s.relativeParent=h)}}}s.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:d,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(s.isLead()){const{onExitComplete:n}=s.options;n&&n()}s.options.transition=void 0}function fb(s){Rt.totalNodes++,s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function pb(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function xb(s){s.clearSnapshot()}function Vo(s){s.clearMeasurements()}function gb(s){s.isLayoutDirty=!1}function yb(s){const{visualElement:e}=s.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),s.resetTransform()}function Bo(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function bb(s){s.resolveTargetDelta()}function vb(s){s.calcProjection()}function wb(s){s.resetRotation()}function jb(s){s.removeLeadSnapshot()}function zo(s,e,r){s.translate=le(e.translate,0,r),s.scale=le(e.scale,1,r),s.origin=e.origin,s.originPoint=e.originPoint}function qo(s,e,r,n){s.min=le(e.min,r.min,n),s.max=le(e.max,r.max,n)}function Nb(s,e,r,n){qo(s.x,e.x,r.x,n),qo(s.y,e.y,r.y,n)}function _b(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const kb={duration:.45,ease:[.4,0,.1,1]},Go=s=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(s),Ho=Go("applewebkit/")&&!Go("chrome/")?Math.round:pe;function Wo(s){s.min=Ho(s.min),s.max=Ho(s.max)}function Sb(s){Wo(s.x),Wo(s.y)}function nu(s,e,r){return s==="position"||s==="preserve-aspect"&&!pa(Do(e),Do(r),.2)}const Cb=ru({attachResizeListener:(s,e)=>it(s,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rn={current:void 0},au=ru({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Rn.current){const s=new Cb({});s.mount(window),s.setOptions({layoutScroll:!0}),Rn.current=s}return Rn.current},resetTransform:(s,e)=>{s.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),Tb={pan:{Feature:qy},drag:{Feature:zy,ProjectionNode:au,MeasureLayout:Zd}},Eb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Pb(s){const e=Eb.exec(s);if(!e)return[,];const[,r,n]=e;return[r,n]}function ba(s,e,r=1){const[n,a]=Pb(s);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return Vd(o)?parseFloat(o):o}else return la(a)?ba(a,e,r+1):a}function Ab(s,{...e},r){const n=s.current;if(!(n instanceof Element))return{target:e,transitionEnd:r};r&&(r={...r}),s.values.forEach(a=>{const i=a.get();if(!la(i))return;const o=ba(i,n);o&&a.set(o)});for(const a in e){const i=e[a];if(!la(i))continue;const o=ba(i,n);o&&(e[a]=o,r||(r={}),r[a]===void 0&&(r[a]=i))}return{target:e,transitionEnd:r}}const Lb=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),iu=s=>Lb.has(s),Rb=s=>Object.keys(s).some(iu),Ko=s=>s===Wt||s===K,Xo=(s,e)=>parseFloat(s.split(", ")[e]),Jo=(s,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/);if(a)return Xo(a[1],e);{const i=n.match(/^matrix\((.+)\)$/);return i?Xo(i[1],s):0}},Mb=new Set(["x","y","z"]),Ib=sr.filter(s=>!Mb.has(s));function Ob(s){const e=[];return Ib.forEach(r=>{const n=s.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e.length&&s.render(),e}const ps={width:({x:s},{paddingLeft:e="0",paddingRight:r="0"})=>s.max-s.min-parseFloat(e)-parseFloat(r),height:({y:s},{paddingTop:e="0",paddingBottom:r="0"})=>s.max-s.min-parseFloat(e)-parseFloat(r),top:(s,{top:e})=>parseFloat(e),left:(s,{left:e})=>parseFloat(e),bottom:({y:s},{top:e})=>parseFloat(e)+(s.max-s.min),right:({x:s},{left:e})=>parseFloat(e)+(s.max-s.min),x:Jo(4,13),y:Jo(5,14)};ps.translateX=ps.x;ps.translateY=ps.y;const Db=(s,e,r)=>{const n=e.measureViewportBox(),a=e.current,i=getComputedStyle(a),{display:o}=i,l={};o==="none"&&e.setStaticValue("display",s.display||"block"),r.forEach(c=>{l[c]=ps[c](n,i)}),e.render();const d=e.measureViewportBox();return r.forEach(c=>{const u=e.getValue(c);u&&u.jump(l[c]),s[c]=ps[c](d,i)}),s},$b=(s,e,r={},n={})=>{e={...e},n={...n};const a=Object.keys(e).filter(iu);let i=[],o=!1;const l=[];if(a.forEach(d=>{const c=s.getValue(d);if(!s.hasValue(d))return;let u=r[d],h=Ts(u);const m=e[d];let f;if(Or(m)){const x=m.length,g=m[0]===null?1:0;u=m[g],h=Ts(u);for(let y=g;y<x&&m[y]!==null;y++)f?Za(Ts(m[y])===f):f=Ts(m[y])}else f=Ts(m);if(h!==f)if(Ko(h)&&Ko(f)){const x=c.get();typeof x=="string"&&c.set(parseFloat(x)),typeof m=="string"?e[d]=parseFloat(m):Array.isArray(m)&&f===K&&(e[d]=m.map(parseFloat))}else h!=null&&h.transform&&(f!=null&&f.transform)&&(u===0||m===0)?u===0?c.set(f.transform(u)):e[d]=h.transform(m):(o||(i=Ob(s),o=!0),l.push(d),n[d]=n[d]!==void 0?n[d]:e[d],c.jump(m))}),l.length){const d=l.indexOf("height")>=0?window.pageYOffset:null,c=Db(e,s,l);return i.length&&i.forEach(([u,h])=>{s.getValue(u).set(h)}),s.render(),rn&&d!==null&&window.scrollTo({top:d}),{target:c,transitionEnd:n}}else return{target:e,transitionEnd:n}};function Fb(s,e,r,n){return Rb(e)?$b(s,e,r,n):{target:e,transitionEnd:n}}const Ub=(s,e,r,n)=>{const a=Ab(s,e,n);return e=a.target,n=a.transitionEnd,Fb(s,e,r,n)},va={current:null},ou={current:!1};function Vb(){if(ou.current=!0,!!rn)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),e=()=>va.current=s.matches;s.addListener(e),e()}else va.current=!1}function Bb(s,e,r){const{willChange:n}=e;for(const a in e){const i=e[a],o=r[a];if(Ae(i))s.addValue(a,i),Ur(n)&&n.add(a);else if(Ae(o))s.addValue(a,fs(i,{owner:s})),Ur(n)&&n.remove(a);else if(o!==i)if(s.hasValue(a)){const l=s.getValue(a);!l.hasAnimated&&l.set(i)}else{const l=s.getStaticValue(a);s.addValue(a,fs(l!==void 0?l:i,{owner:s}))}}for(const a in r)e[a]===void 0&&s.removeValue(a);return e}const Yo=new WeakMap,lu=Object.keys(Js),zb=lu.length,Zo=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],qb=za.length;class Gb{constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ae.render(this.render,!1,!0);const{latestValues:l,renderState:d}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=d,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.isControllingVariants=an(r),this.isVariantNode=Hc(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(r,{});for(const h in u){const m=u[h];l[h]!==void 0&&Ae(m)&&(m.set(l[h],!1),Ur(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){this.current=e,Yo.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),ou.current||Vb(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:va.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Yo.delete(this.current),this.projection&&this.projection.unmount(),ut(this.notifyUpdate),ut(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,r){const n=Ht.has(e),a=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ae.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{a(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...r},n,a,i){let o,l;for(let d=0;d<zb;d++){const c=lu[d],{isEnabled:u,Feature:h,ProjectionNode:m,MeasureLayout:f}=Js[c];m&&(o=m),u(r)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),f&&(l=f))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:c,drag:u,dragConstraints:h,layoutScroll:m,layoutRoot:f}=r;this.projection.setOptions({layoutId:d,layout:c,alwaysMeasureLayout:!!u||h&&es(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:f})}return l}updateFeatures(){for(const e in this.features){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<Zo.length;n++){const a=Zo[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i=e["on"+a];i&&(this.propEventSubscriptions[a]=this.on(a,i))}this.prevMotionValues=Bb(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<qb;n++){const a=za[n],i=this.props[a];(Xs(i)||i===!1)&&(r[a]=i)}return r}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=fs(r,{owner:this}),this.addValue(e,n)),n}readValue(e){var r;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props,a=typeof n=="string"||typeof n=="object"?(r=Ya(this.props,n))===null||r===void 0?void 0:r[e]:void 0;if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ae(i)?i:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new oi),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class cu extends Gb{sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...n},{transformValues:a},i){let o=ly(n,e||{},this);if(a&&(r&&(r=a(r)),n&&(n=a(n)),o&&(o=a(o))),i){iy(this,n,o);const l=Ub(this,n,o,r);r=l.transitionEnd,n=l.target}return{transition:e,transitionEnd:r,...n}}}function Hb(s){return window.getComputedStyle(s)}class Wb extends cu{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,r){if(Ht.has(r)){const n=si(r);return n&&n.default||0}else{const n=Hb(e),a=(Jc(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:r}){return Jd(e,r)}build(e,r,n,a){Ha(e,r,n,a.transformTemplate)}scrapeMotionValuesFromProps(e,r){return Ja(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ae(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(e,r,n,a){sd(e,r,n,a)}}class Kb extends cu{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Ht.has(r)){const n=si(r);return n&&n.default||0}return r=rd.has(r)?r:Va(r),e.getAttribute(r)}measureInstanceViewportBox(){return xe()}scrapeMotionValuesFromProps(e,r){return ad(e,r)}build(e,r,n,a){Ka(e,r,n,this.isSVGTag,a.transformTemplate)}renderInstance(e,r,n,a){nd(e,r,n,a)}mount(e){this.isSVGTag=Xa(e.tagName),super.mount(e)}}const Xb=(s,e)=>Ga(s)?new Kb(e,{enableHardwareAcceleration:!1}):new Wb(e,{enableHardwareAcceleration:!0}),Jb={layout:{ProjectionNode:au,MeasureLayout:Zd}},Yb={...Ny,...z0,...Tb,...Jb},A=Zx((s,e)=>P0(s,e,Yb,Xb));function du(){const s=p.useRef(!1);return Ua(()=>(s.current=!0,()=>{s.current=!1}),[]),s}function Zb(){const s=du(),[e,r]=p.useState(0),n=p.useCallback(()=>{s.current&&r(e+1)},[e]);return[p.useCallback(()=>ae.postRender(n),[n]),e]}class Qb extends p.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ev({children:s,isPresent:e}){const r=p.useId(),n=p.useRef(null),a=p.useRef({width:0,height:0,top:0,left:0});return p.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:d}=a.current;if(e||!n.current||!i||!o)return;n.current.dataset.motionPopId=r;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),p.createElement(Qb,{isPresent:e,childRef:n,sizeRef:a},p.cloneElement(s,{ref:n}))}const Mn=({children:s,initial:e,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o})=>{const l=id(tv),d=p.useId(),c=p.useMemo(()=>({id:d,initial:e,isPresent:r,custom:a,onExitComplete:u=>{l.set(u,!0);for(const h of l.values())if(!h)return;n&&n()},register:u=>(l.set(u,!1),()=>l.delete(u))}),i?void 0:[r]);return p.useMemo(()=>{l.forEach((u,h)=>l.set(h,!1))},[r]),p.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),o==="popLayout"&&(s=p.createElement(ev,{isPresent:r},s)),p.createElement(sn.Provider,{value:c},s)};function tv(){return new Map}function sv(s){return p.useEffect(()=>()=>s(),[])}const Mt=s=>s.key||"";function rv(s,e){s.forEach(r=>{const n=Mt(r);e.set(n,r)})}function nv(s){const e=[];return p.Children.forEach(s,r=>{p.isValidElement(r)&&e.push(r)}),e}const be=({children:s,custom:e,initial:r=!0,onExitComplete:n,exitBeforeEnter:a,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=p.useContext(qa).forceRender||Zb()[0],d=du(),c=nv(s);let u=c;const h=p.useRef(new Map).current,m=p.useRef(u),f=p.useRef(new Map).current,x=p.useRef(!0);if(Ua(()=>{x.current=!1,rv(c,f),m.current=u}),sv(()=>{x.current=!0,f.clear(),h.clear()}),x.current)return p.createElement(p.Fragment,null,u.map(b=>p.createElement(Mn,{key:Mt(b),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:o},b)));u=[...u];const g=m.current.map(Mt),y=c.map(Mt),v=g.length;for(let b=0;b<v;b++){const w=g[b];y.indexOf(w)===-1&&!h.has(w)&&h.set(w,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((b,w)=>{if(y.indexOf(w)!==-1)return;const k=f.get(w);if(!k)return;const j=g.indexOf(w);let T=b;if(!T){const N=()=>{h.delete(w);const _=Array.from(f.keys()).filter(P=>!y.includes(P));if(_.forEach(P=>f.delete(P)),m.current=c.filter(P=>{const $=Mt(P);return $===w||_.includes($)}),!h.size){if(d.current===!1)return;l(),n&&n()}};T=p.createElement(Mn,{key:Mt(k),isPresent:!1,onExitComplete:N,custom:e,presenceAffectsLayout:i,mode:o},k),h.set(w,T)}u.splice(j,0,T)}),u=u.map(b=>{const w=b.key;return h.has(w)?b:p.createElement(Mn,{key:Mt(b),isPresent:!0,presenceAffectsLayout:i,mode:o},b)}),p.createElement(p.Fragment,null,h.size?u:u.map(b=>p.cloneElement(b)))},av=Xl("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),E=re.forwardRef(({className:s,variant:e,size:r,asChild:n=!1,...a},i)=>{const o=n?$h:"button";return t.jsx(o,{className:ht(av({variant:e,size:r,className:s})),ref:i,...a})});E.displayName="Button";const iv=()=>{const{toast:s}=se(),{user:e}=Le(),r=()=>{s({title:" ",description:"! ! "})},n=[{id:1,title:"",description:" Arduino  IoT",duration:"8 ",students:1250,rating:4.8,level:"",image:"Engineering automation control system with Arduino and IoT sensors"},{id:2,title:"",description:"",duration:"12 ",students:890,rating:4.9,level:"",image:"Modern building structural design with engineering blueprints"},{id:3,title:"",description:"",duration:"10 ",students:2100,rating:4.7,level:"",image:"Solar panels and wind turbines renewable energy project"},{id:4,title:"",description:" React Native  Flutter",duration:"6 ",students:1680,rating:4.6,level:"",image:"Mobile app development with React Native and Flutter coding"}],a=[{icon:de,value:"15,000+",label:""},{icon:oe,value:"200+",label:""},{icon:ge,value:"95%",label:""},{icon:Ar,value:"4.8",label:""}],i={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},o={type:"tween",ease:"anticipate",duration:.5};return t.jsxs(A.div,{initial:"initial",animate:"in",exit:"out",variants:i,transition:o,children:[t.jsxs(we,{children:[t.jsx("title",{children:" - Login Learning"}),t.jsx("meta",{name:"description",content:" Login Learning "})]}),t.jsxs("div",{className:"pt-24",children:[" ",t.jsx("section",{className:"pt-16 pb-20 px-6",children:t.jsx("div",{className:"max-w-7xl mx-auto",children:t.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[t.jsxs(A.div,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,delay:.2},children:[t.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold mb-6 leading-tight text-black",children:["",t.jsx("span",{className:"block gradient-text",children:""}),""]}),t.jsx("p",{className:"text-xl text-black mb-8 leading-relaxed",children:"Login Learning  "}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsx(E,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 text-lg px-8 py-6 pulse-glow",children:t.jsxs(te,{to:e?"/dashboard":"/signup",children:[t.jsx(Pr,{className:"w-5 h-5 mr-2"}),e?"":""]})}),t.jsx(E,{asChild:!0,size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50 text-lg px-8 py-6",children:t.jsxs(te,{to:"/courses",children:["",t.jsx(Ei,{className:"w-5 h-5 ml-2"})]})})]})]}),t.jsxs(A.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,delay:.4},className:"relative",children:[t.jsx("div",{className:"floating-animation",children:t.jsx("img",{className:"rounded-2xl shadow-2xl w-full",alt:"",src:"https://images.unsplash.com/photo-1596496181861-5fc5346995ba"})}),t.jsx("div",{className:"absolute -bottom-6 -left-6 glass-effect rounded-xl p-4 shadow-lg",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center",children:t.jsx(hc,{className:"w-6 h-6 text-blue-800"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-black font-semibold",children:""}),t.jsx("p",{className:"text-black opacity-70",children:""})]})]})})]})]})})}),t.jsx("section",{className:"py-16 px-6",children:t.jsx("div",{className:"max-w-7xl mx-auto",children:t.jsx(A.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:a.map((l,d)=>t.jsxs(A.div,{initial:{scale:.8,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.5,delay:d*.1},viewport:{once:!0},className:"glass-effect rounded-xl p-6 text-center hover:scale-105 transition-transform",children:[t.jsx(l.icon,{className:"w-8 h-8 text-blue-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-3xl font-bold text-black mb-2",children:l.value}),t.jsx("p",{className:"text-black",children:l.label})]},d))})})}),t.jsx("section",{className:"py-20 px-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs(A.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[t.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-black mb-6",children:""}),t.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:""})]}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:n.slice(0,4).map((l,d)=>t.jsx(A.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:d*.1},viewport:{once:!0},className:"course-card rounded-xl overflow-hidden",children:t.jsxs(te,{to:"/courses",className:"block",onClick:r,children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{className:"w-full h-48 object-cover",alt:` ${l.title}`,src:"https://images.unsplash.com/photo-1635251595512-dc52146d5ae8"}),t.jsx("div",{className:"absolute top-4 right-4 bg-black/50 backdrop-blur-sm rounded-full px-3 py-1",children:t.jsx("span",{className:"text-gray-800 text-sm font-medium",children:l.level})})]}),t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-black mb-3 line-clamp-2",children:l.title}),t.jsx("p",{className:"text-black mb-4 line-clamp-2",children:l.description}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Ar,{className:"w-4 h-4 text-yellow-500 fill-current"}),t.jsx("span",{className:"text-black font-medium",children:l.rating})]}),t.jsxs("div",{className:"flex items-center space-x-1 text-black",children:[t.jsx(de,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm",children:l.students.toLocaleString()})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-1 text-black",children:[t.jsx(ce,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm",children:l.duration})]}),t.jsx(E,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:""})]})]})]})},l.id))}),t.jsx("div",{className:"text-center mt-12",children:t.jsx(E,{asChild:!0,size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50 text-lg px-8 py-4",children:t.jsxs(te,{to:"/courses",children:["",t.jsx(Ei,{className:"w-5 h-5 ml-2"})]})})})]})}),t.jsx("section",{className:"py-20 px-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs(A.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[t.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-black mb-6",children:" Login Learning?"}),t.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:" "})]}),t.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:Wr,title:"",description:""},{icon:de,title:"",description:" "},{icon:lc,title:"",description:"  "}].map((l,d)=>t.jsxs(A.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:d*.2},viewport:{once:!0},className:"glass-effect rounded-xl p-8 text-center hover:scale-105 transition-transform cursor-pointer",onClick:r,children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-700 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx(l.icon,{className:"w-8 h-8 text-blue-800"})}),t.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:l.title}),t.jsx("p",{className:"text-black leading-relaxed",children:l.description})]},d))})]})}),t.jsx("section",{className:"py-20 px-6",children:t.jsx("div",{className:"max-w-4xl mx-auto text-center",children:t.jsxs(A.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"glass-effect rounded-2xl p-12 shadow-xl",children:[t.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-black mb-6",children:" ?"}),t.jsx("p",{className:"text-xl text-black mb-8",children:"  15,000   Login Learning"}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t.jsx(E,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 text-lg px-8 py-6",children:t.jsx(te,{to:e?"/dashboard":"/signup",children:e?"":""})}),t.jsx(E,{asChild:!0,size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50 text-lg px-8 py-6",children:t.jsx(te,{to:"/contact",children:" "})})]})]})})})]})]})},ov=()=>{const s={name:"LOGIN LEARNING Co.",mission:" - /",address:"917  75  ",contacts:[{name:"",phone:"090-969-9578"},{name:"",phone:"083-436-0294"}],lineGroup:"https://line.me/ti/g/TbTTLXEkRS",email:"info@loginlearning.com"},e=[{name:"",address:" ,  10520",image:"Ladkrabang branch of Login Learning with students"},{name:"",address:"400 . 75 ,  10700",image:"Bang Phlat branch of Login Learning with modern classroom"},{name:"",address:"165/31   20110",image:"Sriracha branch of Login Learning, coastal city view"},{name:"",address:"84/48   21000",image:"Rayong branch of Login Learning, industrial area context"}],r=[{icon:hc,title:"",description:" "},{icon:Wr,title:"",description:"  , TESA Top Gun Rally"},{icon:ec,title:" Professional Skills",description:"   (Python, C++), Arduino, IoT,  DOBOT, PLC"},{icon:qm,title:"Engineering Services",description:"  , , "},{icon:de,title:"",description:" "}],n=[" IOT"," IOT  AI"," AI  PID Control","","","",""],a={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},i={type:"tween",ease:"anticipate",duration:.5};return t.jsxs(A.div,{initial:"initial",animate:"in",exit:"out",variants:a,transition:i,className:"pt-24 pb-16 px-6",children:[t.jsxs(we,{children:[t.jsx("title",{children:" - Login Learning"}),t.jsx("meta",{name:"description",content:` ${s.name}   `})]}),t.jsxs("section",{className:"text-center mb-16 pt-8",children:[t.jsxs(A.h1,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-4",children:[" ",t.jsx("span",{className:"gradient-text",children:"Login Learning"})]}),t.jsx(A.p,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.4},className:"text-xl text-gray-700 max-w-3xl mx-auto",children:s.mission})]}),t.jsx("section",{className:"mb-16",children:t.jsxs("div",{className:"max-w-4xl mx-auto glass-effect p-8 rounded-xl shadow-lg",children:[t.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 text-center",children:""}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[t.jsxs("div",{children:[t.jsx("img",{className:"rounded-lg shadow-md w-full h-64 object-cover mb-4",alt:" Login Learning ",src:"https://images.unsplash.com/photo-1701229404076-5629809b331d"}),t.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[t.jsx(us,{className:"w-6 h-6 text-blue-400 mt-1 shrink-0"}),t.jsx("p",{className:"text-gray-800",children:s.address})]}),t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx(ct,{className:"w-6 h-6 text-blue-400 shrink-0"}),t.jsx("a",{href:`mailto:${s.email}`,className:"text-gray-800 hover:text-blue-600 transition-colors",children:s.email})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:":"}),s.contacts.map((o,l)=>t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx($t,{className:"w-6 h-6 text-blue-400 shrink-0"}),t.jsxs("p",{className:"text-gray-800",children:[o.name,": ",o.phone]})]},l)),t.jsxs("div",{className:"flex items-center space-x-3 mt-4",children:[t.jsx(de,{className:"w-6 h-6 text-green-400 shrink-0"}),t.jsx("a",{href:s.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"text-gray-800 hover:text-green-600 transition-colors underline",children:" Line Group "})]}),t.jsx("img",{className:"rounded-lg shadow-md w-full h-40 object-cover mt-4",alt:" Login Learning",src:"https://images.unsplash.com/photo-1645001399108-e5c236218018"})]})]})]})}),t.jsxs("section",{className:"mb-16",id:"branches",children:[t.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-10 text-center",children:""}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((o,l)=>t.jsxs(A.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.5,delay:l*.1},viewport:{once:!0},className:"course-card rounded-xl overflow-hidden p-6 text-center",children:[t.jsx("img",{className:"w-full h-40 object-cover rounded-md mb-4",alt:` ${o.name}  Login Learning`,src:"https://images.unsplash.com/photo-1683419405479-e79a7a6a1d53"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:o.name}),t.jsx("p",{className:"text-gray-600 text-sm",children:o.address})]},l))})]}),t.jsxs("section",{className:"mb-16",id:"services",children:[t.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-10 text-center",children:""}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map((o,l)=>t.jsxs(A.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:l*.1},viewport:{once:!0},className:"glass-effect rounded-xl p-6 hover:shadow-xl transition-shadow",children:[t.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mb-6 mx-auto",children:t.jsx(o.icon,{className:"w-8 h-8 text-blue-800"})}),t.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-3 text-center",children:o.title}),t.jsx("p",{className:"text-gray-700 leading-relaxed text-center",children:o.description})]},l))})]}),t.jsxs("section",{id:"projects",children:[t.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-10 text-center",children:"  2568"}),t.jsxs("div",{className:"max-w-3xl mx-auto glass-effect p-8 rounded-xl shadow-lg",children:[t.jsx("ul",{className:"list-disc list-inside space-y-3 text-gray-800",children:n.map((o,l)=>t.jsx(A.li,{initial:{x:-20,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.3,delay:l*.05},viewport:{once:!0},className:"text-lg",children:o},l))}),t.jsx("p",{className:"text-gray-600 mt-6 text-sm italic",children:" "})]})]})]})},fe=re.forwardRef(({className:s,type:e,...r},n)=>t.jsx("input",{type:e,className:ht("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:n,...r}));fe.displayName="Input";const lv=async()=>{try{const{data:s,error:e}=await C.from("courses").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(e)throw e;return{data:s.map(n=>({...n,enrollment_count:0})),error:null}}catch(s){return console.error("Error fetching courses:",s),{data:null,error:s}}},uu=async s=>{try{console.log("getCourseById: Fetching course with ID:",s);const{data:e,error:r}=await C.from("courses").select(`
        *,
        course_content(*)
      `).eq("id",s).eq("is_active",!0).single();if(console.log("getCourseById: Database result:",{data:e,error:r}),r)throw console.error("getCourseById: Database error:",r),r;let n=0;try{const{count:i}=await C.from("enrollments").select("*",{count:"exact",head:!0}).eq("course_id",s);n=i||0,console.log("getCourseById: Enrollment count:",n)}catch(i){console.warn("Could not fetch enrollment count:",i)}const a={data:{...e,enrollment_count:n,content:e.course_content||[]},error:null};return console.log("getCourseById: Final result:",a),a}catch(e){return console.error("getCourseById: Error fetching course:",e),{data:null,error:e}}},cv=async s=>{try{const{data:e,error:r}=await C.from("courses").select(`
        *,
        course_content(*)
      `).eq("id",s).single();if(r)throw r;let n=0;try{const{count:a}=await C.from("enrollments").select("*",{count:"exact",head:!0}).eq("course_id",s);n=a||0}catch(a){console.warn("Could not fetch enrollment count:",a)}return{data:{...e,enrollment_count:n,content:e.course_content||[]},error:null}}catch(e){return console.error("Error fetching course for admin:",e),{data:null,error:e}}},dv=async s=>{var e;try{const{data:r,error:n}=await C.from("courses").insert([{...s,created_by:(e=(await C.auth.getUser()).data.user)==null?void 0:e.id}]).select().single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error creating course:",r),{data:null,error:r}}},uv=async(s,e)=>{try{const{error:r}=await C.from("courses").update({is_active:e}).eq("id",s);if(r)throw r;return{error:null}}catch(r){return console.error("Error toggling course status:",r),{error:r}}},hv=async()=>{try{if(console.log("Fetching admin courses..."),!C)throw new Error("Supabase client not initialized");const{data:s,error:e}=await C.from("courses").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Supabase error:",e),new Error(`Database error: ${e.message}`);return console.log("Admin courses fetched successfully:",(s==null?void 0:s.length)||0,"courses"),{data:s||[],error:null}}catch(s){return console.error("Error fetching admin courses:",s),{data:null,error:{message:s.message||"Unknown error occurred",details:s}}}},mv=async()=>{try{const{count:s,error:e}=await C.from("courses").select("*",{count:"exact",head:!0}).eq("is_active",!0);if(e)throw e;const{count:r,error:n}=await C.from("enrollments").select("*",{count:"exact",head:!0});if(n)throw n;const{count:a,error:i}=await C.from("enrollments").select("*",{count:"exact",head:!0}).eq("status","active");if(i)throw i;const{count:o,error:l}=await C.from("enrollments").select("*",{count:"exact",head:!0}).eq("status","completed");if(l)throw l;return{data:{totalCourses:s||0,totalEnrollments:r||0,activeEnrollments:a||0,completedEnrollments:o||0,completionRate:r>0?(o/r*100).toFixed(1):0},error:null}}catch(s){return console.error("Error fetching course stats:",s),{data:null,error:s}}},fv=()=>{const{toast:s}=se(),[e,r]=p.useState([]),[n,a]=p.useState(!0),[i,o]=p.useState(""),[l,d]=p.useState(""),c=p.useCallback(async()=>{a(!0);const{data:x,error:g}=await lv();g?s({title:"",description:g.message,variant:"destructive"}):r(x||[]),a(!1)},[s]);p.useEffect(()=>{c()},[c]);const u=["",...new Set(e.map(x=>x.category).filter(Boolean))],h=e.filter(x=>{var v;const g=x.title.toLowerCase().includes(i.toLowerCase())||((v=x.description)==null?void 0:v.toLowerCase().includes(i.toLowerCase())),y=l===""||x.category===l;return g&&y}),m={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},f={type:"tween",ease:"anticipate",duration:.5};return t.jsxs(A.div,{initial:"initial",animate:"in",exit:"out",variants:m,transition:f,className:"pt-24 pb-16 px-6",children:[t.jsxs(we,{children:[t.jsx("title",{children:" - Login Learning"}),t.jsx("meta",{name:"description",content:"  "})]}),t.jsx("section",{className:"pt-8 mb-12",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs(A.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-center mb-10",children:[t.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-blue-900 mb-4",children:[" ",t.jsx("span",{className:"gradient-text",children:""})]}),t.jsx("p",{className:"text-xl text-blue-800 max-w-2xl mx-auto",children:"   Login Learning"})]}),t.jsxs(A.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.4},className:"flex flex-col md:flex-row gap-4 mb-8 p-4 glass-effect rounded-lg",children:[t.jsxs("div",{className:"relative flex-grow",children:[t.jsx(fe,{type:"text",placeholder:"...",className:"pl-10 text-black bg-white/90 focus:bg-white",value:i,onChange:x=>o(x.target.value)}),t.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})]}),t.jsx("select",{className:"px-4 py-2 rounded-lg bg-white/90 text-black border border-white/30 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",value:l,onChange:x=>d(x.target.value),children:u.map(x=>t.jsx("option",{value:x,children:x},x))})]}),n?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#667eea] mx-auto mb-4"}),t.jsx("p",{className:"text-blue-700",children:"..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-6 text-blue-700",children:[" ",h.length," ",i&&`  "${i}"`,l!==""&&`  "${l}"`]}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:h.map((x,g)=>t.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:g*.05+.5},className:"course-card rounded-xl overflow-hidden hover:scale-105 transition-transform duration-300",children:t.jsxs(te,{to:`/courses/${x.id}`,className:"block",children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{className:"w-full h-48 object-cover",alt:` ${x.title}`,src:x.image_url||"https://images.unsplash.com/photo-1635251595512-dc52146d5ae8"}),t.jsx("div",{className:"absolute top-3 right-3 bg-blue-800/80 backdrop-blur-sm rounded-full px-3 py-1 text-xs font-medium text-white-800",children:x.difficulty_level==="beginner"?"":x.difficulty_level==="intermediate"?"":x.difficulty_level==="advanced"?"":""}),t.jsx("div",{className:"absolute bottom-3 left-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white-800 px-2 py-1 rounded text-xs font-semibold",children:x.category||""})]}),t.jsxs("div",{className:"p-5",children:[t.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-2 line-clamp-2 h-14",children:x.title}),t.jsx("p",{className:"text-sm text-blue-700 mb-3 line-clamp-3 h-[60px]",children:x.description||""}),t.jsxs("div",{className:"flex items-center justify-between mb-3 text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(Sr,{className:"w-4 h-4 text-blue-400"}),t.jsx("span",{className:"text-blue-900 font-medium",children:x.instructor_name||""})]}),t.jsxs("div",{className:"flex items-center space-x-1 text-blue-700",children:[t.jsx(de,{className:"w-4 h-4"}),t.jsx("span",{children:x.enrollment_count||0})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-1 text-blue-700 text-sm",children:[t.jsx(ce,{className:"w-4 h-4"}),t.jsxs("span",{children:[x.duration_hours||0," "]})]}),t.jsx("div",{className:"text-blue-900 font-bold",children:x.price>0?`${x.price.toLocaleString()}`:""})]}),t.jsx(E,{className:"w-full mt-4 bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-gray-800",children:""})]})]})},x.id))}),h.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(oe,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-blue-900 mb-2",children:""}),t.jsx("p",{className:"text-blue-700 mb-4",children:""}),t.jsx(E,{onClick:()=>{o(""),d("")},variant:"outline",className:"text-blue-900 border-blue-300 hover:bg-blue-100",children:""})]})]})]})})]})},hu=async s=>{try{console.log("enrollmentService: Starting enrollment for courseId:",s);const{data:{user:e},error:r}=await C.auth.getUser();if(r||!e)throw console.error("enrollmentService: User authentication error:",r),new Error("User not authenticated");console.log("enrollmentService: User authenticated:",e.id),console.log("enrollmentService: Checking for existing enrollment...");const{data:n,error:a}=await C.from("enrollments").select("*").eq("user_id",e.id).eq("course_id",s).maybeSingle();if(console.log("enrollmentService: Existing enrollment check:",{existingEnrollment:n,checkError:a}),a)throw console.error("enrollmentService: Error checking existing enrollment:",a),a;if(n)return console.log("enrollmentService: User already enrolled"),{data:null,error:{message:""}};console.log("enrollmentService: Creating new enrollment...");const i={user_id:e.id,course_id:s,status:"active",progress_percentage:0};console.log("enrollmentService: Enrollment data:",i);const{data:o,error:l}=await C.from("enrollments").insert([i]).select(`
        *,
        courses(title, instructor_name)
      `).single();if(console.log("enrollmentService: Enrollment creation result:",{data:o,error:l}),l)throw console.error("enrollmentService: Enrollment creation failed:",l),l;return console.log("enrollmentService: Enrollment created successfully:",o),{data:o,error:null}}catch(e){return console.error("enrollmentService: Error enrolling in course:",e),{data:null,error:e}}},li=async s=>{try{console.log("enrollmentService: Checking enrollment for courseId:",s);const{data:{user:e},error:r}=await C.auth.getUser();if(r||!e)return console.log("enrollmentService: No user found or error:",r),{isEnrolled:!1,error:null};console.log("enrollmentService: Checking for user:",e.id);const{data:n,error:a}=await C.from("enrollments").select("id, status, enrolled_at").eq("user_id",e.id).eq("course_id",s).maybeSingle();if(console.log("enrollmentService: Database query result:",{data:n,error:a}),a)throw console.error("enrollmentService: Database error:",a),a;const i={isEnrolled:!!n,status:n?{...n,enrollment_id:n.id}:null,error:null};return console.log("enrollmentService: Final result:",i),i}catch(e){return console.error("enrollmentService: Error checking enrollment:",e),{isEnrolled:!1,error:e}}},pv=async s=>{try{const{data:e,error:r}=await C.from("content_attachments").select("*").eq("content_id",s).order("upload_order",{ascending:!0});if(r)throw r;return{data:e||[],error:null}}catch(e){return console.error("Error fetching content attachments:",e),{data:[],error:e}}},xv=async(s,e,r=1)=>{try{console.log("Starting file upload:",{fileName:s.name,contentId:e,fileSize:s.size});const{data:{user:n},error:a}=await C.auth.getUser();if(a)throw console.error("User authentication error:",a),new Error(`Authentication error: ${a.message}`);if(!n)throw new Error("User not authenticated - please login first");if(console.log("User authenticated:",n.id),!s)throw new Error("No file provided");if(!e)throw new Error("Content ID is required");const i=Date.now(),o=s.name.split(".").pop(),l=s.name.replace(/[^a-zA-Z0-9.-]/g,"_"),d=`${i}_${l}`,c=`attachments/${e}/${d}`;console.log("Generated file path:",c),console.log("Checking storage bucket access...");let u=!1;try{const{data:w,error:k}=await C.storage.listBuckets();if(k)console.warn("Cannot list buckets, trying direct access:",k.message);else{const j=w.find(T=>T.name==="course-files");j&&(console.log("Storage bucket found in list:",j.name),u=!0)}if(!u){console.log("Testing direct bucket access...");const{error:j}=await C.storage.from("course-files").list("",{limit:1});if(j)throw console.error("Direct bucket access failed:",j),new Error(`Storage bucket "course-files" is not accessible: ${j.message}. Please check bucket exists and permissions are correct.`);console.log("Direct bucket access successful"),u=!0}}catch(w){throw console.error("Storage bucket check failed:",w),new Error(`Storage setup error: ${w.message}`)}if(!u)throw new Error('Storage bucket "course-files" not found or not accessible. Please setup storage first.');console.log("Uploading file to storage...");const{data:h,error:m}=await C.storage.from("course-files").upload(c,s,{cacheControl:"3600",upsert:!1});if(m)throw console.error("Storage upload error:",m),new Error(`File upload failed: ${m.message}`);console.log("File uploaded successfully:",h);const{data:{publicUrl:f}}=C.storage.from("course-files").getPublicUrl(c);console.log("Generated public URL:",f);const{error:x}=await C.from("content_attachments").select("count").limit(1);if(x&&x.code==="42P01")throw new Error('Database table "content_attachments" not found. Please run the database schema setup.');console.log("Saving attachment record to database...");let g=1;if(typeof r=="number"&&r>0&&r<=2147483647)g=Math.floor(r);else if(typeof r=="string"){const w=parseInt(r);!isNaN(w)&&w>0&&w<=2147483647&&(g=w)}console.log("Original uploadOrder:",r,"Valid uploadOrder:",g);const y={content_id:e,file_name:s.name,file_path:c,file_size:s.size,file_type:(o==null?void 0:o.toLowerCase())||"unknown",mime_type:s.type||"application/octet-stream",upload_order:g,is_downloadable:!0,is_preview_available:bv(s.type),uploaded_by:n.id};console.log("Attachment record:",y);const{data:v,error:b}=await C.from("content_attachments").insert([y]).select().single();if(b){console.error("Database insert error:",b);try{await C.storage.from("course-files").remove([c]),console.log("Cleaned up uploaded file after database error")}catch(w){console.error("Failed to cleanup file:",w)}throw new Error(`Database error: ${b.message}`)}return console.log("Attachment record saved:",v),{data:{...v,url:f},error:null}}catch(n){return console.error("Error uploading attachment:",n),{data:null,error:{message:n.message,details:n}}}},gv=async(s,e)=>{try{const{data:r,error:n}=await C.storage.from("course-files").download(s);if(n)throw n;const a=URL.createObjectURL(r),i=document.createElement("a");return i.href=a,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a),{error:null}}catch(r){return console.error("Error downloading attachment:",r),{error:r}}},yv=async(s,e=3600)=>{try{const{data:r,error:n}=await C.storage.from("course-files").createSignedUrl(s,e);if(n)throw n;return{data:r.signedUrl,error:null}}catch(r){return console.error("Error getting download URL:",r),{data:null,error:r}}},bv=s=>["application/pdf","image/jpeg","image/png","image/gif","image/webp","text/plain","text/html","application/json"].includes(s),Bs=s=>{const e={image:["jpg","jpeg","png","gif","webp","svg","bmp"],video:["mp4","avi","mov","wmv","flv","webm"],audio:["mp3","wav","ogg","aac","flac"],document:["pdf","doc","docx","txt","rtf"],presentation:["ppt","pptx","odp"],spreadsheet:["xls","xlsx","ods","csv"],archive:["zip","rar","7z","tar","gz"],code:["js","html","css","py","java","cpp","c","php","json","xml"]};for(const[r,n]of Object.entries(e))if(n.includes(s==null?void 0:s.toLowerCase()))return r;return"other"},ci=s=>{if(s===0)return"0 Bytes";const e=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,n)).toFixed(2))+" "+r[n]},vv=async s=>{try{console.log("Starting attachment deletion for ID:",s);const{data:{user:e},error:r}=await C.auth.getUser();if(r||!e)throw new Error("User not authenticated");console.log("User authenticated:",e.id);const{data:n,error:a}=await C.from("content_attachments").select("*").eq("id",s).single();if(a)throw console.error("Error fetching attachment:",a),new Error(`: ${a.message}`);if(!n)throw new Error("");console.log("Attachment to delete:",n),console.log("Deleting file from storage:",n.file_path);const{error:i}=await C.storage.from("course-files").remove([n.file_path]);i&&console.warn("Warning: Could not delete file from storage:",i),console.log("Deleting database record for attachment:",s);const{error:o}=await C.from("content_attachments").delete().eq("id",s);if(o)throw console.error("Database deletion error:",o),new Error(`: ${o.message}`);return console.log("Attachment deleted successfully"),{data:n,error:null}}catch(e){return console.error("Error deleting attachment:",e),{data:null,error:e}}},wv=async s=>{var e;try{console.log("Starting course image upload:",{fileName:s.name,fileSize:s.size});const{data:{user:r},error:n}=await C.auth.getUser();if(n||!r)throw new Error("User not authenticated");if(!s)throw new Error("No image file provided");if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(s.type))throw new Error(" (JPG, PNG, WebP )");const i=5*1024*1024;if(s.size>i)throw new Error(" 5MB");const o=(e=s.name.split(".").pop())==null?void 0:e.toLowerCase(),l=`course-cover-${Date.now()}-${Math.random().toString(36).substring(2)}.${o}`,d=`course-covers/${l}`;console.log("Uploading image to path:",d);const{data:c,error:u}=await C.storage.from("course-files").upload(d,s,{cacheControl:"3600",upsert:!1});if(u)throw console.error("Storage upload error:",u),new Error(`: ${u.message}`);console.log("Image upload successful:",c);const{data:h}=C.storage.from("course-files").getPublicUrl(d);if(!(h!=null&&h.publicUrl))throw new Error(" URL ");return console.log("Public URL generated:",h.publicUrl),{data:{filePath:d,publicUrl:h.publicUrl,fileName:l},error:null}}catch(r){return console.error("Error uploading course image:",r),{data:null,error:r}}},di=({contentId:s,showUploadButton:e=!1,onUploadClick:r,className:n="",compact:a=!1,isAdminView:i=!1})=>{const{toast:o}=se(),[l,d]=p.useState([]),[c,u]=p.useState(!0),[h,m]=p.useState(null),[f,x]=p.useState(!1),[g,y]=p.useState(!1),v=p.useCallback(async()=>{var N;u(!0);try{if(!s){d([]);return}const{data:_,error:P}=await pv(s);if(P)throw P;d(_||[])}catch(_){y(!0),(N=_.message)!=null&&N.includes('relation "content_attachments" does not exist')||o({title:"",description:_.message,variant:"destructive"}),d([])}finally{u(!1)}},[s,o]);p.useEffect(()=>{s?v():(d([]),u(!1))},[s,v]);const b=(N,_="w-5 h-5")=>{try{switch(Bs(N)){case"image":return t.jsx(qs,{className:`${_} text-blue-500`});case"video":return t.jsx(uc,{className:`${_} text-purple-500`});case"archive":return t.jsx(nc,{className:`${_} text-orange-500`});case"document":return t.jsx(Y,{className:`${_} text-red-500`});default:return t.jsx(Er,{className:`${_} text-slate-500`})}}catch(P){return console.error("AttachmentViewer: Error getting file icon:",P),t.jsx(Er,{className:`${_} text-slate-500`})}},w=async N=>{try{const{error:_}=await gv(N.file_path,N.file_name);if(_)throw _;o({title:"",description:` ${N.file_name} `})}catch(_){console.error("Download error:",_),o({title:"",description:_.message,variant:"destructive"})}},k=N=>{const _=Bs(N.file_type);["image","document"].includes(_)?(m(N),x(!0)):o({title:"",description:"",variant:"destructive"})},j=async N=>{try{const{data:_,error:P}=await yv(N.file_path);if(P)throw P;window.open(_,"_blank")}catch(_){console.error("External link error:",_),o({title:"",description:_.message,variant:"destructive"})}},T=async N=>{if(!i){o({title:"",description:" Admin ",variant:"destructive"});return}if(window.confirm(` "${N.file_name}" ?`))try{const{error:_}=await vv(N.id);if(_)throw _;o({title:"",description:` "${N.file_name}" `}),await v()}catch(_){o({title:"",description:_.message,variant:"destructive"})}};return c?t.jsx("div",{className:`${n}`,children:t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),t.jsx("span",{className:"ml-2 text-slate-400 text-sm",children:"..."})]})}):s?g?t.jsx("div",{className:n,children:t.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:""})}):a?t.jsx("div",{className:`${n}`,children:l.length>0?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 p-2 rounded-lg",children:t.jsx(Y,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:""}),t.jsxs("p",{className:"text-sm text-gray-600",children:[l.length," "]})]})]}),t.jsx("div",{className:"grid gap-3",children:l.map(N=>{var _;return t.jsx("div",{className:"group bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-xl p-4 hover:shadow-md transition-all duration-300 hover:border-blue-300",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-md",children:b(N.file_type,"w-6 h-6 text-white")})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h5",{className:"text-sm font-semibold text-gray-800 truncate group-hover:text-blue-700 transition-colors",children:N.file_name}),t.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[t.jsx("span",{className:"text-xs text-gray-600 bg-gray-200 px-2 py-1 rounded-full",children:ci(N.file_size)}),t.jsx("span",{className:"text-xs text-blue-600 font-medium",children:((_=N.file_type)==null?void 0:_.toUpperCase())||"FILE"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(E,{size:"sm",variant:"outline",onClick:()=>w(N),className:"text-blue-600 border-blue-300 hover:bg-blue-50 hover:border-blue-400 rounded-lg",title:"",children:[t.jsx(Ve,{className:"w-4 h-4 mr-1"}),t.jsx("span",{className:"text-xs",children:""})]}),["image","document"].includes(Bs(N.file_type))&&t.jsxs(E,{size:"sm",variant:"outline",onClick:()=>k(N),className:"text-green-600 border-green-300 hover:bg-green-50 hover:border-green-400 rounded-lg",title:"",children:[t.jsx(ze,{className:"w-4 h-4 mr-1"}),t.jsx("span",{className:"text-xs",children:""})]}),i&&t.jsx(E,{size:"sm",variant:"outline",onClick:()=>T(N),className:"text-red-600 border-red-300 hover:bg-red-50 hover:border-red-400 rounded-lg",title:"",children:t.jsx(Ye,{className:"w-4 h-4"})})]})]})},N.id)})})]}):t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(Y,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),t.jsx("p",{className:"text-sm",children:""})]})}):t.jsxs("div",{className:`space-y-4 ${n}`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[t.jsx(Y,{className:"w-5 h-5 mr-2"})," (",l.length,")"]}),e&&t.jsxs(E,{onClick:r,className:"bg-blue-500 hover:bg-blue-600",children:[t.jsx(Y,{className:"w-4 h-4 mr-2"}),""]})]}),l.length===0?t.jsxs("div",{className:"text-center py-8 bg-slate-700/20 rounded-lg border-2 border-dashed border-slate-600",children:[t.jsx(Y,{className:"w-12 h-12 text-slate-500 mx-auto mb-3"}),t.jsx("p",{className:"text-slate-400",children:""}),e&&t.jsx(E,{onClick:r,variant:"outline",className:"mt-3",children:""})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(N=>t.jsx(jv,{attachment:N,onDownload:()=>w(N),onPreview:()=>k(N),onExternalLink:()=>j(N),onDelete:()=>T(N),getFileIcon:b,isAdminView:i},N.id))}),t.jsx(be,{children:f&&h&&t.jsx(Nv,{file:h,onClose:()=>{x(!1),m(null)},getFileIcon:b})})]}):t.jsx("div",{className:n})},jv=({attachment:s,onDownload:e,onPreview:r,onExternalLink:n,onDelete:a,getFileIcon:i,isAdminView:o=!1})=>{var l;return t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-4 rounded-lg hover:bg-slate-700/30 transition-colors",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"flex-shrink-0",children:i(s.file_type,"w-8 h-8")}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"text-sm font-medium text-white truncate",children:s.file_name}),t.jsxs("p",{className:"text-xs text-slate-400",children:[ci(s.file_size),"  ",(l=s.file_type)==null?void 0:l.toUpperCase()]})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(E,{size:"sm",variant:"ghost",onClick:e,title:"",children:t.jsx(Ve,{className:"w-4 h-4"})}),["image","document"].includes(Bs(s.file_type))&&t.jsx(E,{size:"sm",variant:"ghost",onClick:r,title:"",children:t.jsx(ze,{className:"w-4 h-4"})}),t.jsx(E,{size:"sm",variant:"ghost",onClick:n,title:"",children:t.jsx(Tr,{className:"w-4 h-4"})})]}),t.jsx(E,{size:"sm",variant:"ghost",onClick:a,title:"",className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:t.jsx(Ye,{className:"w-4 h-4"})})]})]})},Nv=({file:s,onClose:e,getFileIcon:r})=>{var m;const[n,a]=p.useState(1),[i,o]=p.useState(0),l=Bs(s.file_type),d=()=>a(f=>Math.min(f+.25,3)),c=()=>a(f=>Math.max(f-.25,.25)),u=()=>o(f=>(f+90)%360),h=()=>{a(1),o(0)};return t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50",onClick:e,children:t.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative max-w-6xl max-h-[90vh] w-full h-full flex flex-col",onClick:f=>f.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[r(s.file_type),t.jsxs("div",{children:[t.jsx("h3",{className:"text-white font-medium",children:s.file_name}),t.jsxs("p",{className:"text-slate-400 text-sm",children:[ci(s.file_size),"  ",(m=s.file_type)==null?void 0:m.toUpperCase()]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[l==="image"&&t.jsxs(t.Fragment,{children:[t.jsx(E,{size:"sm",variant:"ghost",onClick:c,children:t.jsx(pf,{className:"w-4 h-4"})}),t.jsx(E,{size:"sm",variant:"ghost",onClick:d,children:t.jsx(ff,{className:"w-4 h-4"})}),t.jsx(E,{size:"sm",variant:"ghost",onClick:u,children:t.jsx(tf,{className:"w-4 h-4"})}),t.jsx(E,{size:"sm",variant:"ghost",onClick:h,children:t.jsx(ic,{className:"w-4 h-4"})})]}),t.jsx(E,{size:"sm",variant:"ghost",onClick:e,children:t.jsx(tt,{className:"w-4 h-4"})})]})]}),t.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-hidden",children:l==="image"?t.jsx("img",{src:`${{}.VITE_SUPABASE_URL}/storage/v1/object/public/course-files/${s.file_path}`,alt:s.file_name,className:"max-w-full max-h-full object-contain transition-transform duration-200",style:{transform:`scale(${n}) rotate(${i}deg)`}}):l==="document"&&s.file_type==="pdf"?t.jsx("iframe",{src:`${{}.VITE_SUPABASE_URL}/storage/v1/object/public/course-files/${s.file_path}`,className:"w-full h-full rounded-lg",title:s.file_name}):t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-24 h-24 mx-auto mb-4 flex items-center justify-center bg-slate-700 rounded-full",children:r(s.file_type,"w-12 h-12")}),t.jsx("p",{className:"text-white mb-2",children:""}),t.jsx("p",{className:"text-slate-400 text-sm",children:""})]})})]})})},_v=({courseId:s})=>{const{user:e}=Le(),[r,n]=p.useState(null),[a,i]=p.useState(!1),o=async()=>{i(!0);const c={timestamp:new Date().toISOString(),user:e?{id:e.id,email:e.email}:null,courseId:s};try{console.log(" Testing database connection...");const{error:u}=await C.from("enrollments").select("count").limit(1);if(c.databaseConnection={success:!u,error:u==null?void 0:u.message},e&&s){console.log(" Checking enrollment status...");const h=await li(s);c.enrollmentCheck=h,console.log(" Direct database query...");const{data:m,error:f}=await C.from("enrollments").select("*").eq("user_id",e.id).eq("course_id",s);c.directDatabaseQuery={data:m,error:f==null?void 0:f.message,count:(m==null?void 0:m.length)||0},console.log(" Checking if course exists...");const{data:x,error:g}=await C.from("courses").select("id, title, is_active").eq("id",s).single();c.courseExists={exists:!!x,data:x,error:g==null?void 0:g.message}}}catch(u){c.generalError=u.message,console.error("Diagnostics error:",u)}n(c),i(!1),console.log(" Enrollment Diagnostics Complete:",c)},l=async()=>{if(!e||!s)return;console.log(" Testing enrollment...");const c=await hu(s);console.log(" Enrollment test result:",c),await o()},d=()=>{localStorage.clear(),sessionStorage.clear(),console.log(" Cache cleared, please refresh the page")};return t.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" Enrollment Debugger"}),t.jsxs("div",{className:"space-y-3 mb-4",children:[t.jsx(E,{onClick:o,disabled:a,variant:"outline",children:a?"...":" "}),e&&s&&t.jsx(E,{onClick:l,variant:"outline",children:" "}),t.jsx(E,{onClick:d,variant:"outline",children:"  Cache"})]}),r&&t.jsxs("div",{className:"mt-4 p-4 bg-slate-800/50 rounded-lg text-xs font-mono",children:[t.jsx("h4",{className:"text-white font-semibold mb-2",children:" :"}),t.jsx("pre",{className:"text-slate-300 whitespace-pre-wrap overflow-auto max-h-96",children:JSON.stringify(r,null,2)})]}),t.jsxs("div",{className:"mt-4 p-3 bg-blue-500/20 rounded-lg text-sm",children:[t.jsx("p",{className:"text-blue-600 font-medium",children:" :"}),t.jsxs("ul",{className:"text-blue-600 text-xs mt-1 space-y-1",children:[t.jsx("li",{children:"  F12  Console  Log messages"}),t.jsx("li",{children:"  User ID  Course ID "}),t.jsx("li",{children:"  Database connection "}),t.jsx("li",{children:"  enrollmentCheck.isEnrolled = false  directDatabaseQuery  =  Service"})]})]})]})},kv=async s=>{try{const{data:e,error:r}=await C.from("forum_categories").select("*").eq("course_id",s).eq("is_active",!0).order("display_order",{ascending:!0});if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error fetching course categories:",e),{data:null,error:e}}},Sv=async(s,e={})=>{try{const{categoryId:r=null,topicType:n=null,search:a=null,sortBy:i="last_activity_at",sortOrder:o="desc",page:l=1,limit:d=20}=e;let c=C.from("forum_topics").select("*").eq("course_id",s);r&&(c=c.eq("category_id",r)),n&&(c=c.eq("topic_type",n)),a&&(c=c.textSearch("search_vector",a)),c=c.order("is_pinned",{ascending:!1}),c=c.order(i,{ascending:o==="asc"});const u=(l-1)*d,h=u+d-1;c=c.range(u,h);const{data:m,error:f,count:x}=await c;if(f)throw f;if(!m||m.length===0)return{data:[],error:null,pagination:{page:l,limit:d,total:0,hasMore:!1}};const g=[...new Set(m.map(k=>k.author_id).filter(Boolean))],y=[...new Set(m.map(k=>k.category_id).filter(Boolean))];let v={};if(g.length>0){const{data:k}=await C.from("user_profiles").select("user_id, full_name, avatar_url, user_role").in("user_id",g);k&&k.forEach(j=>{v[j.user_id]=j})}let b={};if(y.length>0){const{data:k}=await C.from("forum_categories").select("id, name").in("id",y);k&&k.forEach(j=>{b[j.id]=j})}return{data:m.map(k=>({...k,user_profiles:v[k.author_id]||null,forum_categories:b[k.category_id]||null})),error:null,pagination:{page:l,limit:d,total:x,hasMore:x>h+1}}}catch(r){return console.error("Error fetching course topics:",r),{data:null,error:r,pagination:null}}},Cv=async s=>{try{const{data:e,error:r}=await C.from("forum_topics").select("*").eq("id",s).single();if(r)throw r;let n=null;if(e.author_id){const{data:h}=await C.from("user_profiles").select("user_id, full_name, avatar_url, user_role").eq("user_id",e.author_id).single();n=h}let a=null;if(e.category_id){const{data:h}=await C.from("forum_categories").select("id, name").eq("id",e.category_id).single();a=h}let i=null;if(e.course_id){const{data:h}=await C.from("courses").select("id, title").eq("id",e.course_id).single();i=h}const{data:o,error:l}=await C.from("forum_replies").select("*").eq("topic_id",s).order("created_at",{ascending:!0});if(l)throw l;let d={};if(o&&o.length>0){const h=[...new Set(o.map(m=>m.author_id).filter(Boolean))];if(h.length>0){const{data:m}=await C.from("user_profiles").select("user_id, full_name, avatar_url, user_role").in("user_id",h);m&&m.forEach(f=>{d[f.user_id]=f})}}const c=(o||[]).map(h=>({...h,user_profiles:d[h.author_id]||null}));return await Rv(s),{data:{...e,user_profiles:n,forum_categories:a,courses:i,replies:c},error:null}}catch(e){return console.error("Error fetching topic with replies:",e),{data:null,error:e}}},Tv=async s=>{var e;try{const n=(e=(await C.auth.getUser()).data.user)==null?void 0:e.id,{data:a,error:i}=await C.from("forum_topics").insert([{...s,author_id:n}]).select("*").single();if(i)throw i;let o=null;if(n){const{data:c}=await C.from("user_profiles").select("user_id, full_name, avatar_url, user_role").eq("user_id",n).single();o=c}let l=null;if(a.category_id){const{data:c}=await C.from("forum_categories").select("id, name").eq("id",a.category_id).single();l=c}return{data:{...a,user_profiles:o,forum_categories:l},error:null}}catch(r){return console.error("Error creating topic:",r),{data:null,error:r}}},Ev=async s=>{try{const{error:e}=await C.from("forum_topics").delete().eq("id",s);if(e)throw e;return{error:null}}catch(e){return console.error("Error deleting topic:",e),{error:e}}},Pv=async(s,e)=>{try{const{data:r,error:n}=await C.from("forum_topics").update({is_pinned:e}).eq("id",s).select().single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error toggling topic pin:",r),{data:null,error:r}}},Av=async(s,e)=>{try{const{data:r,error:n}=await C.from("forum_topics").update({is_locked:e}).eq("id",s).select().single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error toggling topic lock:",r),{data:null,error:r}}},Lv=async(s,e=null)=>{try{const{data:r,error:n}=await C.from("forum_topics").update({is_solved:!0,solved_reply_id:e}).eq("id",s).select().single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error marking topic as solved:",r),{data:null,error:r}}},Rv=async s=>{try{const{data:e}=await C.from("forum_topics").select("view_count").eq("id",s).single(),r=(e==null?void 0:e.view_count)||0,{error:n}=await C.from("forum_topics").update({view_count:r+1}).eq("id",s);if(n)throw n;return{error:null}}catch(e){return console.warn("Error incrementing view count:",e),{error:e}}},Mv=async s=>{var e;try{const n=(e=(await C.auth.getUser()).data.user)==null?void 0:e.id,{data:a,error:i}=await C.from("forum_replies").insert([{...s,author_id:n}]).select("*").single();if(i)throw i;let o=null;if(n){const{data:d}=await C.from("user_profiles").select("user_id, full_name, avatar_url, user_role").eq("user_id",n).single();o=d}return{data:{...a,user_profiles:o},error:null}}catch(r){return console.error("Error creating reply:",r),{data:null,error:r}}},Iv=async(s,e)=>{try{await C.from("forum_replies").update({is_best_answer:!1}).eq("topic_id",e);const{data:r,error:n}=await C.from("forum_replies").update({is_best_answer:!0}).eq("id",s).select().single();if(n)throw n;return await Lv(e,s),{data:r,error:null}}catch(r){return console.error("Error marking reply as best answer:",r),{data:null,error:r}}},mu=async(s,e)=>{var r;try{const n=(r=(await C.auth.getUser()).data.user)==null?void 0:r.id;if(!n)throw new Error("User not authenticated");const{data:a,error:i}=await C.from("forum_likes").select("id").eq("user_id",n).eq("target_type",s).eq("target_id",e).maybeSingle();if(i&&i.code!=="PGRST116")throw i;if(a){const{error:o}=await C.from("forum_likes").delete().eq("id",a.id);if(o)throw o;return{data:{liked:!1},error:null}}else{const{data:o,error:l}=await C.from("forum_likes").insert([{user_id:n,target_type:s,target_id:e}]).select().single();if(l)throw l;return{data:{liked:!0},error:null}}}catch(n){return console.error("Error toggling like:",n),{data:null,error:n}}},Ov=async(s,e="all")=>{var r;try{const n=(r=(await C.auth.getUser()).data.user)==null?void 0:r.id;if(!n)throw new Error("User not authenticated");const{data:a,error:i}=await C.from("forum_subscriptions").upsert([{user_id:n,topic_id:s,notification_type:e}]).select().single();if(i)throw i;return{data:a,error:null}}catch(n){return console.error("Error subscribing to topic:",n),{data:null,error:n}}},Dv=async s=>{var e;try{const r=(e=(await C.auth.getUser()).data.user)==null?void 0:e.id;if(!r)throw new Error("User not authenticated");const{error:n}=await C.from("forum_subscriptions").delete().eq("user_id",r).eq("topic_id",s);if(n)throw n;return{error:null}}catch(r){return console.error("Error unsubscribing from topic:",r),{error:r}}},_r=s=>{const e=new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"":n<3600?`${Math.floor(n/60)} `:n<86400?`${Math.floor(n/3600)} `:n<604800?`${Math.floor(n/86400)} `:e.toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"})},fu=s=>({discussion:"",question:"",announcement:"",assignment_help:""})[s]||s,pu=s=>({discussion:"blue",question:"yellow",announcement:"red",assignment_help:"green"})[s]||"gray",$v=({topic:s,onTopicClick:e,onLike:r,onPin:n,onLock:a,onDelete:i,onEdit:o,userRole:l="student",currentUserId:d})=>{var G,U,L;const[c,u]=p.useState(!1),[h,m]=p.useState(s.user_liked||!1),[f,x]=p.useState(s.like_count||0),g=d===s.author_id,y=l==="instructor"||l==="admin",v=y,b=g||y,w=g||y,k=pu(s.topic_type),j={blue:"bg-blue-100 text-blue-800 border-blue-200",yellow:"bg-yellow-100 text-yellow-800 border-yellow-200",red:"bg-red-100 text-red-800 border-red-200",green:"bg-green-100 text-green-800 border-green-200",gray:"bg-gray-100 text-gray-800 border-gray-200"},T=async S=>{S.stopPropagation();try{await r(s.id),m(!h),x(R=>h?R-1:R+1)}catch(R){console.error("Error liking topic:",R)}},N=async S=>{S.stopPropagation();try{await n(s.id,!s.is_pinned)}catch(R){console.error("Error pinning topic:",R)}},_=async S=>{S.stopPropagation();try{await a(s.id,!s.is_locked)}catch(R){console.error("Error locking topic:",R)}},P=S=>{S.stopPropagation(),o(s)},$=async S=>{if(S.stopPropagation(),window.confirm("?"))try{await i(s.id)}catch(R){console.error("Error deleting topic:",R)}};return t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer relative ${s.is_pinned?"ring-2 ring-yellow-200 bg-yellow-50":""}`,onClick:()=>e(s.id),children:[t.jsx("div",{className:"flex items-start justify-between p-6 pb-3",children:t.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(G=s.user_profiles)!=null&&G.avatar_url?t.jsx("img",{src:s.author.user_profiles.profile_image_url,alt:s.author.user_profiles.full_name,className:"w-full h-full rounded-full object-cover"}):t.jsx(dt,{className:"w-5 h-5"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex-1 pr-4",children:[t.jsx("h3",{className:`text-lg font-semibold text-gray-900 line-clamp-2 ${s.is_locked?"opacity-60":""}`,children:s.title}),t.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${j[k]}`,children:fu(s.topic_type)}),s.forum_categories&&t.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700 border border-gray-200",children:s.forum_categories.name}),s.is_pinned&&t.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 border border-yellow-200",children:[t.jsx(Yn,{className:"w-3 h-3"}),t.jsx("span",{children:""})]}),s.is_locked&&t.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 border border-red-200",children:[t.jsx(Oe,{className:"w-3 h-3"}),t.jsx("span",{children:""})]}),s.is_solved&&t.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 border border-green-200",children:[t.jsx(Pe,{className:"w-3 h-3"}),t.jsx("span",{children:""})]})]})]}),(b||w||v)&&t.jsxs("div",{className:"relative",children:[t.jsx(E,{variant:"ghost",size:"sm",onClick:S=>{S.stopPropagation(),u(!c)},className:"p-1 h-8 w-8",children:t.jsx(Km,{className:"w-4 h-4"})}),c&&t.jsxs("div",{className:"absolute right-0 top-8 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[150px]",children:[b&&t.jsxs("button",{onClick:P,className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2",children:[t.jsx(Ra,{className:"w-4 h-4"}),t.jsx("span",{children:""})]}),v&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:N,className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2",children:[t.jsx(Yn,{className:"w-4 h-4"}),t.jsx("span",{children:s.is_pinned?"":""})]}),t.jsxs("button",{onClick:_,className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2",children:[t.jsx(Oe,{className:"w-4 h-4"}),t.jsx("span",{children:s.is_locked?"":""})]})]}),w&&t.jsxs("button",{onClick:$,className:"w-full px-3 py-2 text-left text-sm hover:bg-red-50 text-red-600 flex items-center space-x-2",children:[t.jsx(Ye,{className:"w-4 h-4"}),t.jsx("span",{children:""})]}),t.jsxs("button",{onClick:S=>{S.stopPropagation(),u(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center space-x-2 border-t border-gray-100",children:[t.jsx(Dm,{className:"w-4 h-4"}),t.jsx("span",{children:""})]})]})]})]}),t.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3",children:s.content}),t.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-3",children:[t.jsx("span",{className:"font-medium",children:((U=s.user_profiles)==null?void 0:U.full_name)||""}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(ce,{className:"w-3 h-3"}),t.jsx("span",{children:_r(s.created_at)})]}),((L=s.user_profiles)==null?void 0:L.user_role)==="instructor"&&t.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:""})]})]})]})}),t.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-t border-gray-100 bg-gray-50",children:[t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(wr,{className:"w-4 h-4"}),t.jsx("span",{children:s.reply_count||0})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(ze,{className:"w-4 h-4"}),t.jsx("span",{children:s.view_count||0})]})]}),t.jsxs("button",{onClick:T,className:`flex items-center space-x-1 px-3 py-1.5 rounded-full transition-all duration-200 ${h?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[t.jsx(Jn,{className:`w-4 h-4 ${h?"fill-current":""}`}),t.jsx("span",{className:"text-sm font-medium",children:f})]})]}),c&&t.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>u(!1)})]})},ls={maxFileSize:50*1024*1024,allowedTypes:{"image/jpeg":{icon:"",preview:!0},"image/png":{icon:"",preview:!0},"image/gif":{icon:"",preview:!0},"image/webp":{icon:"",preview:!0},"application/pdf":{icon:"",preview:!1},"text/plain":{icon:"",preview:!1},"application/msword":{icon:"",preview:!1},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{icon:"",preview:!1},"application/vnd.ms-excel":{icon:"",preview:!1},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{icon:"",preview:!1},"application/zip":{icon:"",preview:!1},"application/x-zip-compressed":{icon:"",preview:!1}}},xu=s=>{const e=[];return s.size>ls.maxFileSize&&e.push(` ( ${ls.maxFileSize/1024/1024}MB)`),ls.allowedTypes[s.type]||e.push(`: ${s.type}`),s.name.length>255&&e.push(" ( 255 )"),{isValid:e.length===0,errors:e}},Fv=(s,e,r,n)=>{const a=Date.now(),i=Math.random().toString(36).substring(2);n.split(".").pop();const o=n.replace(/[^a-zA-Z0-9._-]/g,"_");return`${s}/${e}/${r}/${a}_${i}_${o}`},Uv=async(s,e,r)=>{try{const n=xu(s);if(!n.isValid)throw new Error(n.errors.join(", "));const{data:{user:a},error:i}=await C.auth.getUser();if(i||!a)throw new Error("");const o=Fv(a.id,e,r,s.name),{data:l,error:d}=await C.storage.from("forum-attachments").upload(o,s,{cacheControl:"3600",upsert:!1});if(d)throw d;const{data:c,error:u}=await C.from("forum_attachments").insert([{target_type:e,target_id:r,file_name:s.name,file_url:l.path,file_size:s.size,file_type:s.type,uploaded_by:a.id}]).select("*").single();if(u)throw await C.storage.from("forum-attachments").remove([l.path]),u;return{data:c,error:null}}catch(n){return console.error("Error uploading file:",n),{data:null,error:n}}},Vv=async(s,e,r)=>{try{const n=await Promise.allSettled(s.map(o=>Uv(o,e,r))),a=[],i=[];return n.forEach((o,l)=>{var d;o.status==="fulfilled"&&o.value.data?a.push(o.value.data):i.push({file:s[l].name,error:o.reason||((d=o.value)==null?void 0:d.error)})}),{data:{successful:a,failed:i},error:i.length>0?`${i.length} `:null}}catch(n){return console.error("Error uploading multiple files:",n),{data:null,error:n}}},Bv=async(s,e)=>{try{const{data:r,error:n}=await C.from("forum_attachments").select(`
        *,
        uploader:uploaded_by (
          user_profiles (
            full_name,
            avatar_url
          )
        )
      `).eq("target_type",s).eq("target_id",e).order("created_at",{ascending:!0});if(n)throw n;return{data:r.map(i=>({...i,config:ls.allowedTypes[i.file_type]||{icon:"",preview:!1},formattedSize:gu(i.file_size),publicUrl:null})),error:null}}catch(r){return console.error("Error getting attachments:",r),{data:[],error:r}}},zv=async s=>{try{const{data:e}=C.storage.from("forum-attachments").getPublicUrl(s);return e.publicUrl}catch(e){return console.error("Error getting file URL:",e),null}},qv=async s=>{try{const{data:e,error:r}=await C.from("forum_attachments").select("*").eq("id",s).single();if(r)throw r;const{data:n,error:a}=await C.storage.from("forum-attachments").download(e.file_url);if(a)throw a;await C.from("forum_attachments").update({download_count:(e.download_count||0)+1}).eq("id",s);const i=URL.createObjectURL(n),o=document.createElement("a");return o.href=i,o.download=e.file_name,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),{error:null}}catch(e){return console.error("Error downloading file:",e),{error:e}}},Gv=async s=>{try{const{data:e,error:r}=await C.from("forum_attachments").select("*").eq("id",s).single();if(r)throw r;const{data:{user:n}}=await C.auth.getUser();if(!n||n.id!==e.uploaded_by)throw new Error("");const{error:a}=await C.storage.from("forum-attachments").remove([e.file_url]);a&&console.warn("Error deleting from storage:",a);const{error:i}=await C.from("forum_attachments").delete().eq("id",s);if(i)throw i;return{error:null}}catch(e){return console.error("Error deleting attachment:",e),{error:e}}},Hv=async s=>new Promise(e=>{if(!s.type.startsWith("image/")){e(null);return}const r=document.createElement("canvas"),n=r.getContext("2d"),a=new Image;a.onload=()=>{const o=Math.min(200/a.width,200/a.height);r.width=a.width*o,r.height=a.height*o,n.drawImage(a,0,0,r.width,r.height),r.toBlob(e,"image/jpeg",.8)},a.onerror=()=>e(null),a.src=URL.createObjectURL(s)}),gu=s=>{if(s===0)return"0 Bytes";const e=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,n)).toFixed(2))+" "+r[n]},wa=s=>{var e;return((e=ls.allowedTypes[s])==null?void 0:e.icon)||""},ja=s=>{var e;return((e=ls.allowedTypes[s])==null?void 0:e.preview)||!1},Wv=({targetType:s,targetId:e,currentUserId:r,userRole:n="student",onAttachmentDeleted:a})=>{const[i,o]=p.useState([]),[l,d]=p.useState(!0),[c,u]=p.useState(null),[h,m]=p.useState(null),{toast:f}=se(),x=n==="instructor"||n==="admin";p.useEffect(()=>{g()},[s,e]);const g=async()=>{d(!0);try{const{data:j,error:T}=await Bv(s,e);if(T)throw T;o(j||[])}catch(j){console.error("Error loading attachments:",j),f({title:"",description:"",variant:"destructive"})}d(!1)},y=async j=>{try{const{error:T}=await qv(j.id);if(T)throw T;f({title:"",description:` ${j.file_name} `})}catch{f({title:"",description:"",variant:"destructive"})}},v=async j=>{if(!(r===j.uploaded_by||x)){f({title:"",description:"",variant:"destructive"});return}if(confirm(` "${j.file_name}"?`))try{const{error:N}=await Gv(j.id);if(N)throw N;o(_=>_.filter(P=>P.id!==j.id)),a==null||a(j),f({title:"",description:` ${j.file_name} `})}catch{f({title:"",description:"",variant:"destructive"})}},b=async j=>{if(!ja(j.file_type)){y(j);return}try{const T=await zv(j.file_url);u(T),m(j)}catch{f({title:"",description:"",variant:"destructive"})}},w=()=>{u(null),m(null)},k=j=>new Date(j).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return l?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"})}):i.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-4xl mb-2",children:""}),t.jsx("p",{children:""})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsx(be,{children:i.map(j=>{var N,_;const T=r===j.uploaded_by||x;return j.file_type.startsWith("image/"),t.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center text-xl",children:wa(j.file_type)})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:j.file_name}),t.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs text-gray-500",children:[t.jsx("span",{children:j.formattedSize}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(dt,{className:"w-3 h-3"}),t.jsx("span",{children:((_=(N=j.uploader)==null?void 0:N.user_profiles)==null?void 0:_.full_name)||""})]}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(xs,{className:"w-3 h-3"}),t.jsx("span",{children:k(j.created_at)})]}),j.download_count>0&&t.jsxs("span",{children:[" ",j.download_count," "]})]})]}),t.jsxs("div",{className:"flex items-center space-x-1 ml-3",children:[ja(j.file_type)&&t.jsx(E,{variant:"ghost",size:"sm",onClick:()=>b(j),className:"p-2",title:"",children:t.jsx(ze,{className:"w-4 h-4"})}),t.jsx(E,{variant:"ghost",size:"sm",onClick:()=>y(j),className:"p-2",title:"",children:t.jsx(Ve,{className:"w-4 h-4"})}),T&&t.jsx(E,{variant:"ghost",size:"sm",onClick:()=>v(j),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50",title:"",children:t.jsx(Ye,{className:"w-4 h-4"})})]})]})})]})},j.id)})}),t.jsx(be,{children:c&&h&&t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:w,children:t.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg max-w-4xl max-h-[90vh] overflow-hidden",onClick:j=>j.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold",children:h.file_name}),t.jsx("p",{className:"text-sm text-gray-500",children:h.formattedSize})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(E,{variant:"outline",size:"sm",onClick:()=>y(h),children:[t.jsx(Ve,{className:"w-4 h-4 mr-2"}),""]}),t.jsx(E,{variant:"ghost",size:"sm",onClick:w,children:""})]})]}),t.jsx("div",{className:"p-4 max-h-[70vh] overflow-auto",children:h.file_type.startsWith("image/")?t.jsx("img",{src:c,alt:h.file_name,className:"max-w-full h-auto rounded"}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"text-6xl mb-4",children:wa(h.file_type)}),t.jsx("p",{className:"text-gray-600",children:""}),t.jsxs(E,{onClick:()=>y(h),className:"mt-4",children:[t.jsx(Ve,{className:"w-4 h-4 mr-2"}),""]})]})})]})})})]})},Kv=({topicId:s,onBack:e,currentUserId:r,userRole:n="student"})=>{var U,L,S,R;const[a,i]=p.useState(null),[o,l]=p.useState([]),[d,c]=p.useState(!0),[u,h]=p.useState(!1),[m,f]=p.useState(""),[x,g]=p.useState(null),[y,v]=p.useState(!1),{toast:b}=se(),k=n==="instructor"||n==="admin";p.useEffect(()=>{j()},[s]);const j=async()=>{try{c(!0);const{data:M,error:F}=await Cv(s);if(F)throw F;i(M),l(M.replies||[])}catch(M){console.error("Error loading topic:",M),b({title:"",description:"",variant:"destructive"})}finally{c(!1)}},T=async M=>{if(M.preventDefault(),!!m.trim())try{h(!0);const{data:F,error:I}=await Mv({topic_id:s,content:m,parent_reply_id:(x==null?void 0:x.id)||null});if(I)throw I;l(W=>[...W,F]),f(""),g(null),i(W=>({...W,reply_count:(W.reply_count||0)+1})),b({title:"",description:""})}catch(F){console.error("Error creating reply:",F),b({title:"",description:"",variant:"destructive"})}finally{h(!1)}},N=async(M,F)=>{try{const{data:I,error:W}=await mu(M,F);if(W)throw W;M==="topic"?i(B=>({...B,like_count:I.liked?(B.like_count||0)+1:Math.max((B.like_count||0)-1,0),user_liked:I.liked})):l(B=>B.map(D=>D.id===F?{...D,like_count:I.liked?(D.like_count||0)+1:Math.max((D.like_count||0)-1,0),user_liked:I.liked}:D))}catch(I){console.error("Error toggling like:",I)}},_=async M=>{try{const{error:F}=await Iv(M,s);if(F)throw F;l(I=>I.map(W=>({...W,is_best_answer:W.id===M}))),i(I=>({...I,is_solved:!0,solved_reply_id:M})),b({title:"",description:""})}catch(F){console.error("Error marking best answer:",F),b({title:"",description:"",variant:"destructive"})}},P=async()=>{try{y?(await Dv(s),v(!1),b({title:"",description:""})):(await Ov(s),v(!0),b({title:"",description:""}))}catch(M){console.error("Error toggling subscription:",M)}};if(d)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});if(!a)return t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-gray-500",children:""}),t.jsxs(E,{onClick:e,className:"mt-4",children:[t.jsx(Bt,{className:"w-4 h-4 mr-2"}),""]})]});const $=pu(a.topic_type),G={blue:"bg-blue-100 text-blue-800 border-blue-200",yellow:"bg-yellow-100 text-yellow-800 border-yellow-200",red:"bg-red-100 text-red-800 border-red-200",green:"bg-green-100 text-green-800 border-green-200",gray:"bg-gray-100 text-gray-800 border-gray-200"};return t.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(E,{variant:"ghost",onClick:e,className:"flex items-center space-x-2",children:[t.jsx(Bt,{className:"w-4 h-4"}),t.jsx("span",{children:""})]}),t.jsx(E,{variant:"outline",onClick:P,className:"flex items-center space-x-2",children:y?t.jsxs(t.Fragment,{children:[t.jsx(Am,{className:"w-4 h-4"}),t.jsx("span",{children:""})]}):t.jsxs(t.Fragment,{children:[t.jsx(Ql,{className:"w-4 h-4"}),t.jsx("span",{children:""})]})})]}),t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-xl shadow-sm",children:[t.jsx("div",{className:"p-6 border-b border-gray-100",children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:(U=a.user_profiles)!=null&&U.avatar_url?t.jsx("img",{src:a.author.user_profiles.profile_image_url,alt:a.author.user_profiles.full_name,className:"w-full h-full rounded-full object-cover"}):t.jsx(dt,{className:"w-6 h-6"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[t.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full border ${G[$]}`,children:fu(a.topic_type)}),a.forum_categories&&t.jsx("span",{className:"px-3 py-1 text-sm font-medium rounded-full bg-gray-100 text-gray-700 border border-gray-200",children:a.forum_categories.name}),a.is_pinned&&t.jsxs("span",{className:"flex items-center space-x-1 px-3 py-1 text-sm font-medium rounded-full bg-yellow-100 text-yellow-800 border border-yellow-200",children:[t.jsx(Yn,{className:"w-4 h-4"}),t.jsx("span",{children:""})]}),a.is_locked&&t.jsxs("span",{className:"flex items-center space-x-1 px-3 py-1 text-sm font-medium rounded-full bg-red-100 text-red-800 border border-red-200",children:[t.jsx(Oe,{className:"w-4 h-4"}),t.jsx("span",{children:""})]}),a.is_solved&&t.jsxs("span",{className:"flex items-center space-x-1 px-3 py-1 text-sm font-medium rounded-full bg-green-100 text-green-800 border border-green-200",children:[t.jsx(Pe,{className:"w-4 h-4"}),t.jsx("span",{children:""})]})]}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-3",children:a.title}),t.jsxs("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:[t.jsx("span",{className:"font-medium",children:((L=a.user_profiles)==null?void 0:L.full_name)||""}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(ce,{className:"w-4 h-4"}),t.jsx("span",{children:_r(a.created_at)})]}),((S=a.user_profiles)==null?void 0:S.user_role)==="instructor"&&t.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:""})]})]})]})}),t.jsxs("div",{className:"p-6 border-b border-gray-100",children:[t.jsx("div",{className:"prose max-w-none",children:t.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:a.content})}),t.jsx("div",{className:"mt-6",children:t.jsx(Wv,{targetType:"topic",targetId:a.id,currentUserId:r,userRole:n})})]}),t.jsxs("div",{className:"flex items-center justify-between p-6 bg-gray-50",children:[t.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(wr,{className:"w-4 h-4"}),t.jsxs("span",{children:[a.reply_count||0," "]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(ze,{className:"w-4 h-4"}),t.jsxs("span",{children:[a.view_count||0," "]})]})]}),t.jsxs("button",{onClick:()=>N("topic",a.id),className:`flex items-center space-x-1 px-4 py-2 rounded-full transition-all duration-200 ${a.user_liked?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[t.jsx(Jn,{className:`w-4 h-4 ${a.user_liked?"fill-current":""}`}),t.jsx("span",{className:"font-medium",children:a.like_count||0})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[t.jsx(wr,{className:"w-5 h-5 mr-2"})," (",o.length,")"]}),!a.is_locked&&t.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[x&&t.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[": ",(R=x.user_profiles)==null?void 0:R.full_name]}),t.jsx("button",{onClick:()=>g(null),className:"text-blue-600 hover:text-blue-800",children:""})]}),t.jsx("p",{className:"text-sm text-blue-700 line-clamp-2",children:x.content})]}),t.jsxs("form",{onSubmit:T,className:"space-y-4",children:[t.jsx("textarea",{value:m,onChange:M=>f(M.target.value),placeholder:"...",className:"w-full p-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",rows:4,required:!0}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:x?"":""}),t.jsxs(E,{type:"submit",disabled:u||!m.trim(),className:"flex items-center space-x-2",children:[t.jsx(Ma,{className:"w-4 h-4"}),t.jsx("span",{children:u?"...":""})]})]})]})]}),t.jsx(be,{children:o.map((M,F)=>{var I,W,B;return t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:F*.1},className:`bg-white border border-gray-200 rounded-xl p-6 ${M.is_best_answer?"ring-2 ring-green-200 bg-green-50":""}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(I=M.user_profiles)!=null&&I.avatar_url?t.jsx("img",{src:M.author.user_profiles.profile_image_url,alt:M.author.user_profiles.full_name,className:"w-full h-full rounded-full object-cover"}):t.jsx(dt,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx("span",{className:"font-semibold text-gray-900",children:((W=M.user_profiles)==null?void 0:W.full_name)||""}),((B=M.user_profiles)==null?void 0:B.user_role)==="instructor"&&t.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:""}),M.is_best_answer&&t.jsxs("span",{className:"flex items-center space-x-1 px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[t.jsx(ge,{className:"w-3 h-3"}),t.jsx("span",{children:""})]})]}),t.jsx("span",{className:"text-sm text-gray-500",children:_r(M.created_at)})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[k&&!M.is_best_answer&&a.topic_type==="question"&&t.jsxs(E,{variant:"outline",size:"sm",onClick:()=>_(M.id),className:"flex items-center space-x-1",children:[t.jsx(ge,{className:"w-4 h-4"}),t.jsx("span",{children:""})]}),t.jsxs(E,{variant:"ghost",size:"sm",onClick:()=>g(M),className:"flex items-center space-x-1",children:[t.jsx(Qm,{className:"w-4 h-4"}),t.jsx("span",{children:""})]})]})]}),t.jsx("div",{className:"mb-4",children:t.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:M.content})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-sm text-gray-500",children:M.updated_at!==M.created_at&&t.jsxs("span",{children:[" ",_r(M.updated_at)]})}),t.jsxs("button",{onClick:()=>N("reply",M.id),className:`flex items-center space-x-1 px-3 py-1.5 rounded-full transition-all duration-200 ${M.user_liked?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:[t.jsx(Jn,{className:`w-4 h-4 ${M.user_liked?"fill-current":""}`}),t.jsx("span",{className:"text-sm font-medium",children:M.like_count||0})]})]})]},M.id)})}),o.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(wr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:""}),t.jsx("p",{className:"text-sm",children:""})]})]})]})},Xv=({targetType:s,targetId:e,onFilesUploaded:r,maxFiles:n=5,disabled:a=!1})=>{const[i,o]=p.useState([]),[l,d]=p.useState(!1),[c,u]=p.useState(!1),[h,m]=p.useState({}),f=p.useRef(null),{toast:x}=se(),g=_=>{_.preventDefault(),a||d(!0)},y=_=>{_.preventDefault(),d(!1)},v=_=>{if(_.preventDefault(),d(!1),a)return;const P=Array.from(_.dataTransfer.files);w(P)},b=_=>{const P=Array.from(_.target.files);w(P)},w=async _=>{if(i.length+_.length>n){x({title:"",description:` ${n} `,variant:"destructive"});return}const P=[],$=[];for(const G of _){const U=xu(G);U.isValid?P.push({file:G,id:Math.random().toString(36),status:"pending",error:null}):$.push({name:G.name,errors:U.errors})}if($.length>0&&x({title:"",description:$.map(G=>`${G.name}: ${G.errors.join(", ")}`).join(`
`),variant:"destructive"}),P.length>0){o(G=>[...G,...P]);for(const G of P)if(ja(G.file.type)){const U=await Hv(G.file);U&&m(L=>({...L,[G.id]:URL.createObjectURL(U)}))}}},k=_=>{o(P=>P.filter($=>$.id!==_)),m(P=>{const $={...P};return $[_]&&(URL.revokeObjectURL($[_]),delete $[_]),$})},j=async()=>{if(i.length!==0){u(!0);try{const _=i.filter($=>$.status==="pending").map($=>$.file),P=await Vv(_,s,e);if(P.data){const{successful:$,failed:G}=P.data;o(U=>U.map(L=>{const S=$.find(M=>M.file_name===L.file.name),R=G.find(M=>M.file===L.file.name);return S?{...L,status:"completed"}:R?{...L,status:"error",error:R.error}:L})),$.length>0&&(x({title:"",description:` ${$.length} `}),r==null||r($)),G.length>0&&x({title:"",description:`${G.length} `,variant:"destructive"})}}catch{x({title:"",description:"",variant:"destructive"})}u(!1)}},T=()=>{const _=i.filter(P=>P.status==="completed").map(P=>P.id);_.forEach(P=>{h[P]&&URL.revokeObjectURL(h[P])}),o(P=>P.filter($=>$.status!=="completed")),m(P=>{const $={...P};return _.forEach(G=>delete $[G]),$})},N=(_,P)=>{switch(_){case"completed":return t.jsx(Mm,{className:"w-4 h-4 text-green-600"});case"error":return t.jsx(ye,{className:"w-4 h-4 text-red-600"});default:return null}};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200 ${l?"border-indigo-500 bg-indigo-50":a?"border-gray-200 bg-gray-50 cursor-not-allowed":"border-gray-300 hover:border-gray-400 cursor-pointer"}`,onDragOver:g,onDragLeave:y,onDrop:v,onClick:()=>{var _;return!a&&((_=f.current)==null?void 0:_.click())},children:[t.jsx("input",{ref:f,type:"file",multiple:!0,className:"hidden",onChange:b,disabled:a}),t.jsx(Hs,{className:`w-8 h-8 mx-auto mb-3 ${a?"text-gray-400":"text-gray-600"}`}),t.jsx("p",{className:`text-sm font-medium ${a?"text-gray-400":"text-gray-700"}`,children:l?"":""}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:": , PDF,  ( 50MB )"})]}),t.jsx(be,{children:i.length>0&&t.jsx(A.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2",children:i.map(_=>t.jsxs(A.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:`flex items-center space-x-3 p-3 bg-gray-50 rounded-lg ${_.status==="error"?"border border-red-200":""}`,children:[t.jsx("div",{className:"flex-shrink-0",children:h[_.id]?t.jsx("img",{src:h[_.id],alt:_.file.name,className:"w-10 h-10 object-cover rounded"}):t.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center text-lg",children:wa(_.file.type)})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:_.file.name}),t.jsx("p",{className:"text-xs text-gray-500",children:gu(_.file.size)}),_.error&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:_.error.message||""})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[N(_.status,_.error),_.status==="pending"&&t.jsx(E,{variant:"ghost",size:"sm",onClick:()=>k(_.id),className:"p-1 h-auto",children:t.jsx(tt,{className:"w-4 h-4"})})]})]},_.id))})}),i.length>0&&t.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[i.length,"  (",i.filter(_=>_.status==="pending").length," )"]}),t.jsxs("div",{className:"flex space-x-2",children:[i.some(_=>_.status==="completed")&&t.jsx(E,{variant:"outline",size:"sm",onClick:T,disabled:c,children:""}),t.jsx(E,{onClick:j,disabled:c||i.filter(_=>_.status==="pending").length===0,size:"sm",className:"bg-indigo-600 hover:bg-indigo-700",children:c?t.jsxs(t.Fragment,{children:[t.jsx(Gs,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Hs,{className:"w-4 h-4 mr-2"})," (",i.filter(_=>_.status==="pending").length,")"]})})]})]})]})},Jv=({isOpen:s,onClose:e,courseId:r,onTopicCreated:n})=>{const[a,i]=p.useState({title:"",content:"",topic_type:"discussion",category_id:""}),[o,l]=p.useState([]),[d,c]=p.useState(!1),[u,h]=p.useState(!1),{toast:m}=se(),f=[{value:"discussion",label:"",description:"",icon:is,color:"blue"},{value:"question",label:"",description:"",icon:Bm,color:"yellow"},{value:"announcement",label:"",description:"",icon:Wm,color:"red"},{value:"assignment_help",label:"",description:"",icon:oe,color:"green"}];p.useEffect(()=>{s&&r&&(x(),i({title:"",content:"",topic_type:"discussion",category_id:""}))},[s,r]);const x=async()=>{try{h(!0);const{data:v,error:b}=await kv(r);if(b)throw b;l(v||[]),v&&v.length>0&&i(w=>({...w,category_id:v[0].id}))}catch(v){console.error("Error loading categories:",v),m({title:"",description:"",variant:"destructive"})}finally{h(!1)}},g=async v=>{if(v.preventDefault(),!a.title.trim()||!a.content.trim()){m({title:"",description:"",variant:"destructive"});return}try{c(!0);const b={course_id:r,title:a.title.trim(),content:a.content.trim(),topic_type:a.topic_type,category_id:a.category_id||null},{data:w,error:k}=await Tv(b);if(k)throw k;m({title:"",description:""}),n(w),e()}catch(b){console.error("Error creating topic:",b),m({title:"",description:b.message||"",variant:"destructive"})}finally{c(!1)}},y=(v,b)=>{i(w=>({...w,[v]:b}))};return s?t.jsx(be,{children:t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:t.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:v=>v.stopPropagation(),children:[t.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:t.jsx(is,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:""}),t.jsx("p",{className:"text-indigo-100 mt-1",children:""})]})]}),t.jsx(E,{variant:"ghost",size:"icon",onClick:e,className:"text-white hover:bg-white/20 rounded-lg",children:t.jsx(tt,{className:"w-6 h-6"})})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:t.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:""}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(v=>{const b=v.icon,w=a.topic_type===v.value,k={blue:"border-blue-500 bg-blue-50 text-blue-700",yellow:"border-yellow-500 bg-yellow-50 text-yellow-700",red:"border-red-500 bg-red-50 text-red-700",green:"border-green-500 bg-green-50 text-green-700"};return t.jsxs("div",{onClick:()=>y("topic_type",v.value),className:`p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md ${w?k[v.color]:"border-gray-200 bg-white hover:border-gray-300"}`,children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx(b,{className:`w-5 h-5 ${w?`text-${v.color}-600`:"text-gray-500"}`}),t.jsx("span",{className:`font-semibold ${w?`text-${v.color}-800`:"text-gray-700"}`,children:v.label})]}),t.jsx("p",{className:`text-sm ${w?`text-${v.color}-600`:"text-gray-500"}`,children:v.description})]},v.value)})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:""}),u?t.jsx("div",{className:"flex items-center justify-center py-4",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"})}):t.jsxs("select",{value:a.category_id,onChange:v=>y("category_id",v.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:""}),o.map(v=>t.jsx("option",{value:v.id,children:v.name},v.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:" *"}),t.jsx("input",{type:"text",value:a.title,onChange:v=>y("title",v.target.value),placeholder:"  React Hooks ",className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-lg",maxLength:200,required:!0}),t.jsxs("div",{className:"flex justify-between mt-2",children:[t.jsx("span",{className:"text-sm text-gray-500",children:a.topic_type==="question"?"":""}),t.jsxs("span",{className:"text-sm text-gray-400",children:[a.title.length,"/200"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:" *"}),t.jsx("textarea",{value:a.content,onChange:v=>y("content",v.target.value),placeholder:a.topic_type==="question"?`...

- 
- 
- `:a.topic_type==="announcement"?"...":"  ...",className:"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",rows:8,maxLength:5e3,required:!0}),t.jsxs("div",{className:"flex justify-between mt-2",children:[t.jsx("span",{className:"text-sm text-gray-500",children:" Markdown "}),t.jsxs("span",{className:"text-sm text-gray-400",children:[a.content.length,"/5000"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:" ()"}),t.jsx(Xv,{targetType:"topic",targetId:null,onFilesUploaded:v=>{console.log("Files uploaded:",v)},maxFiles:5,disabled:d})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:" "}),t.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[t.jsx("li",{children:" "}),t.jsx("li",{children:" "}),t.jsx("li",{children:"  "}),t.jsx("li",{children:" "}),t.jsx("li",{children:"  "})]})]})]})}),t.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 flex-shrink-0",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-sm text-gray-500",children:"* "}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx(E,{type:"button",variant:"outline",onClick:e,disabled:d,className:"px-6",children:""}),t.jsxs(E,{type:"button",onClick:g,disabled:d||!a.title.trim()||!a.content.trim(),className:"px-6 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:[t.jsx(gs,{className:"w-4 h-4 mr-2"}),d?"...":""]})]})]})})]})})}):null},Yv=()=>{var I,W;const{courseId:s}=Br(),{toast:e}=se(),{user:r}=Le(),[n,a]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState({isEnrolled:!1,status:null}),[c,u]=p.useState(!1),[h,m]=p.useState("content"),[f,x]=p.useState([]),[g,y]=p.useState(null),[v,b]=p.useState(!1),[w,k]=p.useState(!1),j=p.useCallback(async()=>{o(!0),console.log("Loading course with ID:",s);const{data:B,error:D}=await uu(s);console.log("Course data:",B,"Error:",D),D?(console.error("Course loading error:",D),e({title:"",description:D.message,variant:"destructive"})):a(B),o(!1)},[s,e]),T=p.useCallback(async()=>{if(!r)return;console.log("CourseDetailPage: Checking enrollment status for user:",r==null?void 0:r.id,"course:",s);const{isEnrolled:B,status:D,error:X}=await li(s);console.log("CourseDetailPage: Enrollment check result:",{isEnrolled:B,status:D,error:X}),X?console.error("CourseDetailPage: Enrollment check error:",X):(d({isEnrolled:B,status:D}),console.log("CourseDetailPage: Enrollment status updated:",{isEnrolled:B,status:D}))},[s,r]);p.useEffect(()=>{j(),r&&T()},[j,T,r]),p.useEffect(()=>{h==="forum"&&l.isEnrolled&&_()},[h,l.isEnrolled]);const N=async()=>{if(!r){e({title:"",description:"",variant:"destructive"});return}console.log("CourseDetailPage: Starting enrollment for user:",r.id,"course:",s),u(!0);const{data:B,error:D}=await hu(s);console.log("CourseDetailPage: Enrollment result:",{data:B,error:D}),D?(console.error("CourseDetailPage: Enrollment failed:",D),e({title:"",description:D.message,variant:"destructive"})):(console.log("CourseDetailPage: Enrollment successful, updating state"),e({title:"!",description:` "${n==null?void 0:n.title}" `}),d({isEnrolled:!0,status:"active"}),console.log("CourseDetailPage: Enrollment status set to:",{isEnrolled:!0,status:"active"}),setTimeout(()=>{console.log("CourseDetailPage: Re-checking enrollment status after enrollment"),T()},1e3)),u(!1)},_=async()=>{try{k(!0);const{data:B,error:D}=await Sv(s,{sortBy:"last_activity_at",sortOrder:"desc",limit:50});if(D)throw D;x(B||[])}catch(B){console.error("Error loading forum topics:",B),e({title:"",description:"",variant:"destructive"})}finally{k(!1)}},P=B=>{y(B)},$=()=>{y(null),_()},G=B=>{x(D=>[B,...D]),e({title:"",description:""})},U=async B=>{try{await mu("topic",B),x(D=>D.map(X=>X.id===B?{...X,like_count:X.user_liked?(X.like_count||0)-1:(X.like_count||0)+1,user_liked:!X.user_liked}:X))}catch(D){console.error("Error liking topic:",D)}},L=async(B,D)=>{try{await Pv(B,D),x(X=>X.map(Z=>Z.id===B?{...Z,is_pinned:D}:Z)),e({title:D?"":"",description:""})}catch(X){console.error("Error pinning topic:",X)}},S=async(B,D)=>{try{await Av(B,D),x(X=>X.map(Z=>Z.id===B?{...Z,is_locked:D}:Z)),e({title:D?"":"",description:""})}catch(X){console.error("Error locking topic:",X)}},R=async B=>{try{await Ev(B),x(D=>D.filter(X=>X.id!==B)),e({title:"",description:""})}catch(D){console.error("Error deleting topic:",D)}},M={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},F={type:"tween",ease:"anticipate",duration:.5};return i?t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#667eea] mx-auto mb-4"}),t.jsx("p",{className:"text-emerald-700",children:"..."})]})}):n?t.jsxs(A.div,{initial:"initial",animate:"in",exit:"out",variants:M,transition:F,className:"container mx-auto px-4 py-12",children:[t.jsxs(we,{children:[t.jsxs("title",{children:[n.title," - Login Learning"]}),t.jsx("meta",{name:"description",content:n.description})]}),t.jsx("div",{className:"mb-8",children:t.jsxs(te,{to:"/courses",className:"flex items-center text-emerald-700 hover:text-emerald-900 transition-colors",children:[t.jsx(Bt,{className:"w-5 h-5 mr-2"}),""]})}),t.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[t.jsxs(A.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"lg:col-span-2 space-y-6",children:[t.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[t.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-emerald-900 mb-4",children:n.title}),t.jsx("p",{className:"text-emerald-800 text-lg leading-relaxed mb-6",children:n.description}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm mb-6",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(oe,{className:"w-5 h-5 text-[#667eea]"}),t.jsxs("span",{className:"text-emerald-800",children:[": ",n.instructor_name||""]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ce,{className:"w-5 h-5 text-[#667eea]"}),t.jsxs("span",{className:"text-emerald-800",children:[": ",n.duration_hours||0," "]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(de,{className:"w-5 h-5 text-[#667eea]"}),t.jsxs("span",{className:"text-emerald-800",children:[": ",n.enrollment_count||0," "]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ge,{className:"w-5 h-5 text-[#667eea]"}),t.jsxs("span",{className:"text-emerald-800",children:[": ",n.difficulty_level||""]})]})]}),t.jsx("img",{className:"w-full h-64 sm:h-96 object-cover rounded-lg mb-6 shadow-md",alt:n.title,src:"https://images.unsplash.com/photo-1635251595512-dc52146d5ae8"})]}),t.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[t.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg",children:[t.jsxs("button",{onClick:()=>m("content"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${h==="content"?"bg-white text-emerald-900 shadow-sm":"text-emerald-700 hover:text-emerald-900"}`,children:[t.jsx(oe,{className:"w-4 h-4 inline mr-2"}),""]}),l.isEnrolled&&t.jsxs("button",{onClick:()=>m("forum"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${h==="forum"?"bg-white text-emerald-900 shadow-sm":"text-emerald-700 hover:text-emerald-900"}`,children:[t.jsx(is,{className:"w-4 h-4 inline mr-2"}),""]})]}),h==="content"&&t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold text-emerald-900 mb-4",children:""}),n.content&&n.content.length>0?t.jsx("ul",{className:"space-y-3",children:n.content.map((B,D)=>t.jsxs(A.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2+D*.05},className:"p-4 bg-slate-700/30 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"flex-shrink-0",children:[B.content_type==="video"&&t.jsx(oe,{className:"w-5 h-5 text-blue-400"}),B.content_type==="quiz"&&t.jsx(ge,{className:"w-5 h-5 text-yellow-400"}),B.content_type==="assignment"&&t.jsx(de,{className:"w-5 h-5 text-purple-400"}),B.content_type==="document"&&t.jsx(oe,{className:"w-5 h-5 text-green-400"})]}),t.jsx("span",{className:"text-emerald-800 font-medium",children:B.title})]}),t.jsxs("div",{className:"text-sm text-emerald-700",children:[B.duration_minutes>0&&`${B.duration_minutes} `,B.content_type==="quiz"&&"",B.content_type==="assignment"&&""]})]}),B.description&&t.jsx("p",{className:"text-emerald-800 text-sm leading-relaxed",children:B.description}),t.jsx(di,{contentId:B.id,compact:!0,className:"mt-3"})]},B.id))}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(oe,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t.jsx("p",{className:"text-emerald-700",children:""})]})]}),h==="forum"&&l.isEnrolled&&t.jsx("div",{children:g?t.jsx(Kv,{topicId:g,onBack:$,currentUserId:r==null?void 0:r.id,userRole:((I=r==null?void 0:r.user_profiles)==null?void 0:I.user_role)||"student"}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-2xl font-semibold text-emerald-900 flex items-center",children:[t.jsx(is,{className:"w-6 h-6 mr-2"}),""]}),t.jsxs(E,{onClick:()=>b(!0),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:[t.jsx(zt,{className:"w-4 h-4 mr-2"}),""]})]}),w?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):f.length>0?t.jsx("div",{className:"space-y-4",children:f.map(B=>{var D;return t.jsx($v,{topic:B,onTopicClick:P,onLike:U,onPin:L,onLock:S,onDelete:R,onEdit:X=>{console.log("Edit topic:",X)},userRole:((D=r==null?void 0:r.user_profiles)==null?void 0:D.user_role)||"student",currentUserId:r==null?void 0:r.id},B.id)})}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(is,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:""}),t.jsx("p",{className:"text-gray-500 mb-6",children:""}),t.jsxs(E,{onClick:()=>b(!0),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white",children:[t.jsx(zt,{className:"w-4 h-4 mr-2"}),""]})]})]})})]})]}),t.jsxs(A.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"lg:col-span-1 space-y-6",children:[t.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h2",{className:"text-3xl font-bold text-emerald-900",children:["",((W=n.price)==null?void 0:W.toLocaleString())||"0"]}),t.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((B,D)=>t.jsx(Ar,{className:"w-5 h-5 text-yellow-400 fill-current"},D)),t.jsx("span",{className:"ml-2 text-sm text-emerald-800",children:"(5.0)"})]})]}),t.jsx("p",{className:"text-sm text-emerald-700 mb-6",children:" Login Learning"}),l.isEnrolled&&t.jsxs("div",{className:"flex items-center space-x-2 mb-4 p-3 bg-green-500/20 rounded-lg border border-green-500/30",children:[t.jsx(uf,{className:"w-5 h-5 text-green-400"}),t.jsx("span",{className:"text-green-400 font-medium",children:""})]}),l.isEnrolled?t.jsx(te,{to:`/courses/${s}/learn`,className:"block w-full",children:t.jsxs(E,{size:"lg",className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white text-lg py-3",children:[t.jsx(oe,{className:"w-5 h-5 mr-2"}),""]})}):t.jsxs(E,{size:"lg",className:"w-full bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-gray-800 text-lg py-3",onClick:N,disabled:c,children:[t.jsx(of,{className:"w-5 h-5 mr-2"}),c?"...":""]}),t.jsx("p",{className:"text-xs text-slate-500 mt-4 text-center",children:"  7 "})]}),t.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[t.jsx("h3",{className:"text-xl font-semibold text-emerald-900 mb-3",children:""}),t.jsxs("ul",{className:"space-y-2 text-emerald-800 text-sm list-disc list-inside",children:[t.jsx("li",{children:""}),t.jsx("li",{children:""}),t.jsx("li",{children:""}),t.jsx("li",{children:""}),t.jsx("li",{children:""})]})]}),r&&t.jsx(_v,{courseId:s})]})]}),t.jsx(Jv,{isOpen:v,onClose:()=>b(!1),courseId:s,onTopicCreated:G})]}):t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ye,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),t.jsx("h2",{className:"text-2xl font-bold text-emerald-900 mb-2",children:""}),t.jsx("p",{className:"text-emerald-700 mb-4",children:""}),t.jsx(te,{to:"/courses",children:t.jsx(E,{variant:"outline",className:"text-emerald-900 border-emerald-300 hover:bg-emerald-100",children:""})})]})})},Qo=async(s,e)=>{try{const{data:{user:r},error:n}=await C.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{currentTime:a=0,watchedDuration:i=0,totalDuration:o=0,isCompleted:l=!1}=e,d={start_time:new Date().toISOString(),end_time:new Date().toISOString(),duration:.25,position:a},{data:c}=await C.from("video_progress").select("*").eq("user_id",r.id).eq("content_id",s).single();let u=[],h=i;c&&(u=c.watch_sessions||[],h=Math.max(c.watched_duration||0,i)),u.push(d),u.length>100&&(u=u.slice(-100));const m={user_id:r.id,content_id:s,last_position:a,watched_duration:h,total_duration:o||(c==null?void 0:c.total_duration)||0,watch_sessions:u,updated_at:new Date().toISOString()};(l||o>0&&a/o>=.9)&&(m.completed_at=new Date().toISOString());const{data:f,error:x}=await C.from("video_progress").upsert([m],{onConflict:"user_id,content_id"}).select().single();if(x)throw x;return{data:f,error:null}}catch(r){return console.error("Error updating video progress:",r),{data:null,error:r}}},el=async s=>{try{const{data:{user:e},error:r}=await C.auth.getUser();if(r||!e)return{data:null,error:null};const{data:n,error:a}=await C.from("video_progress").select("*").eq("user_id",e.id).eq("content_id",s).single();if(a&&a.code!=="PGRST116")throw a;return{data:n||null,error:null}}catch(e){return console.error("Error fetching video progress:",e),{data:null,error:e}}},In=async s=>{try{const{data:{user:e},error:r}=await C.auth.getUser();if(r||!e)return{data:null,error:null};const{data:n,error:a}=await C.from("enrollments").select("id, progress_percentage, status").eq("user_id",e.id).eq("course_id",s).single();if(a&&a.code!=="PGRST116")throw a;if(!n)return{data:{enrolled:!1},error:null};const{data:i,error:o}=await C.from("course_content").select("id, title, content_type, order_index").eq("course_id",s).order("order_index");if(o)throw o;const l=i.map(w=>w.id),{data:d,error:c}=await C.from("video_progress").select("content_id, completed_at").eq("user_id",e.id).in("content_id",l);if(c)throw c;const{data:u,error:h}=await C.from("quiz_attempts").select("quiz_id, is_passed, completed_at").eq("user_id",e.id);if(h)throw h;const{data:m,error:f}=await C.from("assignment_submissions").select("assignment_id, status, submitted_at").eq("user_id",e.id);if(f)throw f;const x=new Map(d.map(w=>[w.content_id,!!w.completed_at])),g=i.map(w=>{let k=!1;switch(w.content_type){case"video":k=x.get(w.id)||!1;break;case"quiz":k=u.some(j=>j.is_passed);break;case"assignment":k=m.some(j=>j.status==="submitted"||j.status==="graded");break;default:k=!1}return{...w,is_completed:k}}),y=g.filter(w=>w.is_completed).length,v=g.length,b=v>0?Math.round(y/v*100):0;return{data:{enrolled:!0,enrollment:n,content_progress:g,completed_count:y,total_count:v,progress_percentage:b,calculated_progress:b},error:null}}catch(e){return console.error("Error fetching course progress:",e),{data:null,error:e}}},Zv=({src:s,contentId:e,title:r,onProgress:n,autoPlay:a=!1,initialTime:i=0})=>{const{user:o}=Le(),l=p.useRef(null),d=p.useRef(null),c=p.useRef(null),[u,h]=p.useState(!1),[m,f]=p.useState(i),[x,g]=p.useState(0),[y,v]=p.useState(1),[b,w]=p.useState(!1),[k,j]=p.useState(!1),[T,N]=p.useState(!0),[_,P]=p.useState(!0),[$,G]=p.useState(1),[U,L]=p.useState(0),[S,R]=p.useState(0);p.useEffect(()=>{const q=l.current;if(!q)return;i>0&&(q.currentTime=i);const ue=()=>{g(q.duration),N(!1)},he=()=>{f(q.currentTime),q.paused||L(Me=>Me+.25)},qe=()=>h(!0),Qe=()=>h(!1),Re=()=>{h(!1),o&&e&&Qo(e,{currentTime:q.duration,watchedDuration:q.duration,isCompleted:!0})},V=()=>{v(q.volume),w(q.muted)},z=()=>N(!0),H=()=>N(!1);return q.addEventListener("loadedmetadata",ue),q.addEventListener("timeupdate",he),q.addEventListener("play",qe),q.addEventListener("pause",Qe),q.addEventListener("ended",Re),q.addEventListener("volumechange",V),q.addEventListener("waiting",z),q.addEventListener("canplay",H),()=>{q.removeEventListener("loadedmetadata",ue),q.removeEventListener("timeupdate",he),q.removeEventListener("play",qe),q.removeEventListener("pause",Qe),q.removeEventListener("ended",Re),q.removeEventListener("volumechange",V),q.removeEventListener("waiting",z),q.removeEventListener("canplay",H)}},[e,o,i]),p.useEffect(()=>{let q;const ue=()=>{P(!0),clearTimeout(q),q=setTimeout(()=>{u&&P(!1)},3e3)},he=d.current;return he&&(he.addEventListener("mousemove",ue),he.addEventListener("mouseleave",()=>{u&&P(!1)})),()=>{clearTimeout(q),he&&he.removeEventListener("mousemove",ue)}},[u]),p.useEffect(()=>{if(!(!o||!e))return c.current=setInterval(()=>{const q=l.current;q&&Math.abs(q.currentTime-S)>5&&(Qo(e,{currentTime:q.currentTime,watchedDuration:U,totalDuration:q.duration}),R(q.currentTime))},1e4),()=>{c.current&&clearInterval(c.current)}},[o,e,U,S]);const M=()=>{const q=l.current;q.paused?q.play():q.pause()},F=q=>{const ue=l.current,he=q.currentTarget.getBoundingClientRect(),qe=(q.clientX-he.left)/he.width;ue.currentTime=qe*x},I=()=>{const q=l.current;q.muted=!q.muted},W=q=>{const ue=l.current,he=parseFloat(q.target.value);ue.volume=he,v(he),w(he===0)},B=()=>{const q=d.current;document.fullscreenElement?document.exitFullscreen().then(()=>{j(!1)}):q.requestFullscreen().then(()=>{j(!0)})},D=q=>{const ue=l.current;ue.currentTime=Math.max(0,Math.min(x,ue.currentTime+q))},X=q=>{const ue=l.current;ue.playbackRate=q,G(q)},Z=q=>{const ue=Math.floor(q/60),he=Math.floor(q%60);return`${ue}:${he.toString().padStart(2,"0")}`},Ze=x>0?m/x*100:0,Ct=x>0?U/x*100:0;return t.jsxs("div",{ref:d,className:"relative bg-black rounded-lg overflow-hidden group cursor-pointer",onClick:M,children:[t.jsx("video",{ref:l,src:s,className:"w-full h-auto max-h-[500px] object-contain",autoPlay:a,preload:"metadata",onClick:q=>q.stopPropagation()}),T&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:t.jsx(Gs,{className:"w-12 h-12 text-white animate-spin"})}),!u&&!T&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:t.jsx(A.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white/20 backdrop-blur-sm rounded-full p-4",children:t.jsx(Pr,{className:"w-16 h-16 text-white ml-2"})})}),t.jsxs(A.div,{initial:{opacity:1},animate:{opacity:_?1:0},transition:{duration:.3},className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",onClick:q=>q.stopPropagation(),children:[t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"w-full h-2 bg-white/20 rounded-full cursor-pointer",onClick:F,children:[t.jsx("div",{className:"h-full bg-white/40 rounded-full absolute",style:{width:`${Math.min(Ct,100)}%`}}),t.jsx("div",{className:"h-full bg-blue-500 rounded-full relative",style:{width:`${Ze}%`},children:t.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-4 h-4 bg-blue-500 rounded-full -mr-2"})})]})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(E,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:M,children:u?t.jsx(Xm,{className:"w-6 h-6"}):t.jsx(Pr,{className:"w-6 h-6"})}),t.jsx(E,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>D(-10),children:t.jsx(lf,{className:"w-5 h-5"})}),t.jsx(E,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>D(10),children:t.jsx(cf,{className:"w-5 h-5"})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(E,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:I,children:b||y===0?t.jsx(mf,{className:"w-5 h-5"}):t.jsx(hf,{className:"w-5 h-5"})}),t.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:b?0:y,onChange:W,className:"w-20 h-1 bg-white/20 rounded-lg appearance-none slider"})]}),t.jsxs("span",{className:"text-white text-sm font-mono",children:[Z(m)," / ",Z(x)]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("select",{value:$,onChange:q=>X(parseFloat(q.target.value)),className:"bg-transparent text-white text-sm border border-white/20 rounded px-2 py-1",children:[t.jsx("option",{value:"0.5",className:"bg-black",children:"0.5x"}),t.jsx("option",{value:"0.75",className:"bg-black",children:"0.75x"}),t.jsx("option",{value:"1",className:"bg-black",children:"1x"}),t.jsx("option",{value:"1.25",className:"bg-black",children:"1.25x"}),t.jsx("option",{value:"1.5",className:"bg-black",children:"1.5x"}),t.jsx("option",{value:"2",className:"bg-black",children:"2x"})]}),t.jsx(E,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:B,children:t.jsx(ic,{className:"w-5 h-5"})})]})]})]}),r&&_&&t.jsx(A.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"absolute top-4 left-4 right-4",children:t.jsx("h3",{className:"text-white text-lg font-semibold bg-black/50 backdrop-blur-sm rounded px-3 py-2",children:r})})]})},Qv=async s=>{try{const{data:e,error:r}=await C.from("quizzes").select("*").eq("content_id",s).eq("is_active",!0).single();if(r&&r.code!=="PGRST116")throw r;return{data:e||null,error:null}}catch(e){return console.error("Error fetching quiz:",e),{data:null,error:e}}},ew=async s=>{try{const{data:{user:e},error:r}=await C.auth.getUser();if(r||!e)return{data:[],error:null};const{data:n,error:a}=await C.from("quiz_attempts").select("*").eq("user_id",e.id).eq("quiz_id",s).order("attempt_number",{ascending:!1});if(a)throw a;return{data:n||[],error:null}}catch(e){return console.error("Error fetching quiz attempts:",e),{data:[],error:e}}},tw=async s=>{try{const{data:{user:e},error:r}=await C.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n,error:a}=await C.from("quizzes").select("*").eq("id",s).single();if(a)throw a;const{data:i,error:o}=await ew(s);if(o)throw o;const l=i.length+1;if(n.max_attempts>0&&i.length>=n.max_attempts)throw new Error(` (${n.max_attempts} )`);const{data:d,error:c}=await C.from("quiz_attempts").insert([{user_id:e.id,quiz_id:s,attempt_number:l,answers:{},score:0,started_at:new Date().toISOString()}]).select().single();if(c)throw c;return{data:{...d,quiz:n},error:null}}catch(e){return console.error("Error starting quiz attempt:",e),{data:null,error:e}}},sw=async(s,e)=>{try{const{data:{user:r},error:n}=await C.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:a,error:i}=await C.from("quiz_attempts").select(`
        *,
        quizzes(*)
      `).eq("id",s).eq("user_id",r.id).single();if(i)throw i;const o=a.quizzes,l=rw(o.questions,e),d=l.percentage>=o.passing_score,c=new Date().toISOString(),u=new Date(a.started_at),h=new Date(c),m=Math.round((h-u)/(1e3*60)),{data:f,error:x}=await C.from("quiz_attempts").update({answers:e,score:l.percentage,max_score:100,completed_at:c,time_spent_minutes:m,is_passed:d,feedback:l.feedback}).eq("id",s).eq("user_id",r.id).select(`
        *,
        quizzes(*)
      `).single();if(x)throw x;return{data:{...f,score_details:l},error:null}}catch(r){return console.error("Error submitting quiz attempt:",r),{data:null,error:r}}},rw=(s,e)=>{let r=0;const n={};s.forEach((i,o)=>{const l=i.id||o.toString(),d=e[l],c=nw(i,d);c&&r++,n[l]={is_correct:c,correct_answer:aw(i),user_answer:d,explanation:i.explanation||null}});const a=s.length>0?Math.round(r/s.length*100):0;return{correct_count:r,total_questions:s.length,percentage:a,feedback:n}},nw=(s,e)=>{switch(s.type){case"multiple_choice":return e===s.correct_answer;case"true_false":return e===s.correct_answer;case"fill_blank":return(Array.isArray(s.correct_answer)?s.correct_answer:[s.correct_answer]).some(i=>(e==null?void 0:e.toLowerCase().trim())===i.toLowerCase().trim());case"multiple_select":if(!Array.isArray(e)||!Array.isArray(s.correct_answer))return!1;const n=new Set(e.sort()),a=new Set(s.correct_answer.sort());return n.size===a.size&&[...n].every(i=>a.has(i));default:return!1}},aw=s=>{switch(s.type){case"multiple_choice":case"true_false":return s.correct_answer;case"fill_blank":return Array.isArray(s.correct_answer)?s.correct_answer[0]:s.correct_answer;case"multiple_select":return s.correct_answer;default:return null}},iw=s=>{var r;const e=[];return(r=s.title)!=null&&r.trim()||e.push(""),(!s.questions||!Array.isArray(s.questions)||s.questions.length===0)&&e.push(" 1 "),s.questions&&s.questions.forEach((n,a)=>{var i;(i=n.question)!=null&&i.trim()||e.push(` ${a+1}: `),n.type||e.push(` ${a+1}: `),n.type==="multiple_choice"&&((!n.options||n.options.length<2)&&e.push(` ${a+1}:  2 `),n.correct_answer||e.push(` ${a+1}: `)),n.type==="multiple_select"&&((!n.options||n.options.length<2)&&e.push(` ${a+1}:  2 `),(!n.correct_answer||!Array.isArray(n.correct_answer)||n.correct_answer.length===0)&&e.push(` ${a+1}:  1 `)),n.type==="fill_blank"&&(n.correct_answer||e.push(` ${a+1}: `)),n.type==="true_false"&&n.correct_answer!==!0&&n.correct_answer!==!1&&e.push(` ${a+1}:  true  false`)}),s.passing_score&&(s.passing_score<0||s.passing_score>100)&&e.push(" 0-100"),s.time_limit&&s.time_limit<0&&e.push(" 0"),s.max_attempts&&s.max_attempts<1&&e.push(" 0"),{isValid:e.length===0,errors:e}},ow=()=>[{id:"1",type:"multiple_choice",question:"?",options:["JavaScript","HTML","CSS","SQL"],correct_answer:"JavaScript",explanation:"JavaScript ",points:1},{id:"2",type:"true_false",question:"HTML  HyperText Markup Language",correct_answer:!0,explanation:" HTML  HyperText Markup Language",points:1},{id:"3",type:"fill_blank",question:" _______ ",correct_answer:["CSS","css"],explanation:"CSS (Cascading Style Sheets) ",points:1}],lw=({quiz:s,onComplete:e,onClose:r})=>{var U,L,S;const{toast:n}=se(),[a,i]=p.useState(null),[o,l]=p.useState(0),[d,c]=p.useState({}),[u,h]=p.useState(0),[m,f]=p.useState(!1),[x,g]=p.useState(null),[y,v]=p.useState(!1),b=p.useCallback(async()=>{if(!a)return;v(!0);const{data:R,error:M}=await sw(a.id,d);if(M){n({title:"",description:M.message,variant:"destructive"}),v(!1);return}g(R),f(!0),v(!1),n({title:R.is_passed?"! ":"",description:`: ${R.score}/${R.max_score} (${R.score}%)`,variant:R.is_passed?"default":"destructive"}),e==null||e(R)},[a,d,n,e]),w=p.useCallback(async()=>{v(!0);const{data:R,error:M}=await tw(s.id);if(M){n({title:"",description:M.message,variant:"destructive"}),r==null||r();return}i(R),s.time_limit>0&&h(s.time_limit*60),v(!1)},[s.id,s.time_limit,n,r]);p.useEffect(()=>{w()},[w]),p.useEffect(()=>{if(u>0&&!m){const R=setTimeout(()=>{h(u-1)},1e3);return()=>clearTimeout(R)}else u===0&&s.time_limit>0&&!m&&b()},[u,m,s.time_limit,b]);const k=(R,M)=>{c(F=>({...F,[R]:M}))},j=()=>{o<s.questions.length-1&&l(o+1)},T=()=>{o>0&&l(o-1)},N=R=>{const M=Math.floor(R/60),F=R%60;return`${M}:${F.toString().padStart(2,"0")}`},_=()=>Object.keys(d).length;if(y&&!a)return t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-400",children:"..."})]})});if(m&&x)return t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:`mx-auto w-16 h-16 rounded-full flex items-center justify-center ${x.is_passed?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:x.is_passed?t.jsx(Ft,{className:"w-8 h-8"}):t.jsx(Ws,{className:"w-8 h-8"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:x.is_passed?"! ":" "}),t.jsxs("p",{className:"text-slate-400",children:[": ",x.score,"% | : ",s.passing_score,"%"]})]})]}),t.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[t.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:""}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-400",children:((U=x.score_details)==null?void 0:U.correct_count)||0}),t.jsx("div",{className:"text-sm text-slate-400",children:""})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-slate-300",children:((L=x.score_details)==null?void 0:L.total_questions)||0}),t.jsx("div",{className:"text-sm text-slate-400",children:""})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[x.score,"%"]}),t.jsx("div",{className:"text-sm text-slate-400",children:""})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-400",children:x.time_spent_minutes||0}),t.jsx("div",{className:"text-sm text-slate-400",children:""})]})]})]}),s.show_correct_answers&&((S=x.score_details)==null?void 0:S.feedback)&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-lg font-semibold text-white",children:""}),s.questions.map((R,M)=>{const F=R.id||M.toString(),I=x.score_details.feedback[F];return t.jsx(A.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:M*.1},className:`glass-effect p-4 rounded-lg border-l-4 ${I!=null&&I.is_correct?"border-green-500":"border-red-500"}`,children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:`mt-1 ${I!=null&&I.is_correct?"text-green-400":"text-red-400"}`,children:I!=null&&I.is_correct?t.jsx(Pe,{className:"w-5 h-5"}):t.jsx(Ws,{className:"w-5 h-5"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-white font-medium mb-2",children:R.question}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:": "}),t.jsx("span",{className:I!=null&&I.is_correct?"text-green-400":"text-red-400",children:Array.isArray(I==null?void 0:I.user_answer)?I.user_answer.join(", "):(I==null?void 0:I.user_answer)||""})]}),!(I!=null&&I.is_correct)&&t.jsxs("div",{children:[t.jsx("span",{className:"text-slate-400",children:": "}),t.jsx("span",{className:"text-green-400",children:Array.isArray(I==null?void 0:I.correct_answer)?I.correct_answer.join(", "):I==null?void 0:I.correct_answer})]}),(I==null?void 0:I.explanation)&&t.jsxs("div",{className:"mt-2 p-2 bg-blue-500/10 rounded text-blue-300",children:[t.jsx("strong",{children:":"})," ",I.explanation]})]})]})]})},F)})]}),t.jsxs("div",{className:"flex justify-center space-x-4",children:[t.jsx(E,{onClick:r,variant:"outline",children:""}),!x.is_passed&&(a==null?void 0:a.attempt_number)<s.max_attempts&&t.jsxs(E,{onClick:()=>{f(!1),g(null),l(0),c({}),w()},className:"bg-blue-500 hover:bg-blue-600",children:[t.jsx(ef,{className:"w-4 h-4 mr-2"}),""]})]})]});const P=s.questions[o],$=P.id||o.toString(),G=d[$];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-white",children:s.title}),t.jsxs("p",{className:"text-slate-400",children:[" ",o+1,"  ",s.questions.length]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[s.time_limit>0&&t.jsxs("div",{className:`flex items-center space-x-2 ${u<300?"text-red-400":"text-slate-400"}`,children:[t.jsx(ce,{className:"w-4 h-4"}),t.jsx("span",{className:"font-mono",children:N(u)})]}),t.jsxs("div",{className:"text-slate-400 text-sm",children:[": ",_(),"/",s.questions.length]})]})]}),t.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(o+1)/s.questions.length*100}%`}})}),t.jsx(be,{mode:"wait",children:t.jsx(A.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"glass-effect p-6 rounded-xl",children:t.jsx(cw,{question:P,questionId:$,userAnswer:G,onAnswerChange:k})},o)}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(E,{onClick:T,disabled:o===0,variant:"outline",children:[t.jsx(Bt,{className:"w-4 h-4 mr-2"}),""]}),t.jsx("div",{className:"flex items-center space-x-2",children:o===s.questions.length-1?t.jsx(E,{onClick:b,disabled:y||_()===0,className:"bg-green-500 hover:bg-green-600",children:y?"...":""}):t.jsxs(E,{onClick:j,children:["",t.jsx(Jl,{className:"w-4 h-4 ml-2"})]})})]}),_()<s.questions.length&&t.jsxs("div",{className:"flex items-center space-x-2 text-amber-400 text-sm",children:[t.jsx(ye,{className:"w-4 h-4"}),t.jsxs("span",{children:[" (",s.questions.length-_()," )"]})]})]})},cw=({question:s,questionId:e,userAnswer:r,onAnswerChange:n})=>{const a=()=>{switch(s.type){case"multiple_choice":return t.jsx("div",{className:"space-y-3",children:s.options.map((i,o)=>t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-slate-700/30 transition-colors",children:[t.jsx("input",{type:"radio",name:e,value:i,checked:r===i,onChange:l=>n(e,l.target.value),className:"w-4 h-4 text-blue-500"}),t.jsx("span",{className:"text-slate-200",children:i})]},o))});case"multiple_select":return t.jsx("div",{className:"space-y-3",children:s.options.map((i,o)=>t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-slate-700/30 transition-colors",children:[t.jsx("input",{type:"checkbox",value:i,checked:Array.isArray(r)&&r.includes(i),onChange:l=>{const d=Array.isArray(r)?r:[];l.target.checked?n(e,[...d,i]):n(e,d.filter(c=>c!==i))},className:"w-4 h-4 text-blue-500"}),t.jsx("span",{className:"text-slate-200",children:i})]},o))});case"true_false":return t.jsx("div",{className:"space-y-3",children:[!0,!1].map(i=>t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-slate-700/30 transition-colors",children:[t.jsx("input",{type:"radio",name:e,value:i,checked:r===i,onChange:o=>n(e,o.target.value==="true"),className:"w-4 h-4 text-blue-500"}),t.jsx("span",{className:"text-slate-200",children:i?"":""})]},i.toString()))});case"fill_blank":return t.jsx("input",{type:"text",value:r||"",onChange:i=>n(e,i.target.value),placeholder:"...",className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"});default:return t.jsx("p",{className:"text-red-400",children:""})}};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-lg font-semibold text-white",children:s.question}),s.image&&t.jsx("img",{src:s.image,alt:"Question",className:"max-w-full h-auto rounded-lg"}),a(),s.hint&&t.jsxs("div",{className:"text-sm text-blue-300 bg-blue-500/10 p-3 rounded-lg",children:[t.jsx("strong",{children:":"})," ",s.hint]})]})},yu=async s=>{try{const{data:e,error:r}=await C.from("assignments").select("*").eq("content_id",s).eq("is_active",!0).single();if(r){if(r.code==="PGRST116")return{data:null,error:null};throw r}return{data:e||null,error:null}}catch(e){return console.error("Error fetching assignment:",e),{data:null,error:e}}},bu=async s=>{try{const{data:{user:e},error:r}=await C.auth.getUser();if(r||!e)return{data:[],error:null};const{data:n,error:a}=await C.from("assignment_submissions").select("*").eq("user_id",e.id).eq("assignment_id",s).order("attempt_number",{ascending:!1});if(a)throw a;return{data:n||[],error:null}}catch(e){return console.error("Error fetching user submissions:",e),{data:[],error:e}}},tl=async(s,e)=>{try{const{data:{user:r},error:n}=await C.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:a,error:i}=await C.from("assignments").select("*").eq("id",s).single();if(i)throw i;const{data:o,error:l}=await bu(s);if(l)throw l;const d=o.length+1,c=a.due_date?new Date>new Date(a.due_date):!1,{data:u,error:h}=await C.from("assignment_submissions").insert([{user_id:r.id,assignment_id:s,attempt_number:d,submission_text:e.text||"",file_urls:e.fileUrls||[],file_names:e.fileNames||[],file_sizes:e.fileSizes||[],status:"submitted",is_late:c,max_score:a.max_score||100}]).select().single();if(h)throw h;return{data:u,error:null}}catch(r){return console.error("Error creating submission:",r),{data:null,error:r}}},sl=async(s,e)=>{try{const{data:{user:r},error:n}=await C.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:a,error:i}=await C.from("assignment_submissions").update({submission_text:e.text||"",file_urls:e.fileUrls||[],file_names:e.fileNames||[],file_sizes:e.fileSizes||[],updated_at:new Date().toISOString()}).eq("id",s).eq("user_id",r.id).select().single();if(i)throw i;return{data:a,error:null}}catch(r){return console.error("Error updating submission:",r),{data:null,error:r}}},dw=async s=>{try{const{data:{user:e},error:r}=await C.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n,error:a}=await C.from("assignment_submissions").update({status:"submitted",submitted_at:new Date().toISOString()}).eq("id",s).eq("user_id",e.id).select().single();if(a)throw a;return{data:n,error:null}}catch(e){return console.error("Error submitting final submission:",e),{data:null,error:e}}},uw=async(s,e)=>{try{const{data:{user:r},error:n}=await C.auth.getUser();if(n||!r)throw new Error("User not authenticated");const a=s.name.split(".").pop(),i=`${Date.now()}-${Math.random().toString(36).substring(2)}.${a}`,o=`assignments/${e}/${r.id}/${i}`,{data:l,error:d}=await C.storage.from("course-files").upload(o,s);if(d)throw d;const{data:{publicUrl:c}}=C.storage.from("course-files").getPublicUrl(o);return{data:{path:l.path,url:c,originalName:s.name,size:s.size,type:s.type},error:null}}catch(r){return console.error("Error uploading file:",r),{data:null,error:r}}},hw=async s=>{try{const{error:e}=await C.storage.from("course-files").remove([s]);if(e)throw e;return{error:null}}catch(e){return console.error("Error deleting file:",e),{error:e}}},mw=(s,e)=>{const r=[];s.size>(e.max_file_size||10485760)&&r.push(` ${s.name}  (${(e.max_file_size/1024/1024).toFixed(1)} MB)`);const n=s.name.split(".").pop().toLowerCase(),a=e.allowed_file_types||["pdf","doc","docx","jpg","png"];return a.includes(n)||r.push(` ${s.name}  (${a.join(", ")})`),{isValid:r.length===0,errors:r}},fw=async s=>{try{const{data:e,error:r}=await C.from("assignments").select("*").eq("id",s).single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error fetching assignment:",e),{data:null,error:e}}},pw=async s=>{try{const{data:e,error:r}=await C.from("assignment_submissions").select(`
        *,
        user_profiles!assignment_submissions_user_id_fkey(full_name, email, avatar_url)
      `).eq("assignment_id",s).order("submitted_at",{ascending:!1});if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error fetching assignment submissions:",e),{data:null,error:e}}},xw=async(s,e)=>{try{const{data:{user:r},error:n}=await C.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:a,error:i}=await C.from("assignment_submissions").update({score:e.score,feedback:e.feedback,graded_at:e.graded_at||new Date().toISOString(),graded_by:e.graded_by||r.id,grading_rubric_scores:e.grading_rubric_scores||null}).eq("id",s).select().single();if(i)throw i;return{data:a,error:null}}catch(r){return console.error("Error updating submission grade:",r),{data:null,error:r}}},gw=({assignment:s,maxFiles:e=5,onFilesChange:r,initialFiles:n=[],disabled:a=!1,className:i=""})=>{var w,k;const{toast:o}=se(),[l,d]=p.useState(n),[c,u]=p.useState(!1),[h,m]=p.useState(!1),f=(j,T="w-6 h-6")=>{const N=j.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(N)?t.jsx(qs,{className:`${T} text-blue-500`}):["pdf"].includes(N)?t.jsx(Y,{className:`${T} text-red-500`}):["doc","docx"].includes(N)?t.jsx(Y,{className:`${T} text-blue-600`}):["mp4","avi","mov"].includes(N)?t.jsx(Om,{className:`${T} text-purple-500`}):t.jsx(Er,{className:`${T} text-gray-500`})},x=j=>{if(j===0)return"0 Bytes";const T=1024,N=["Bytes","KB","MB","GB"],_=Math.floor(Math.log(j)/Math.log(T));return parseFloat((j/Math.pow(T,_)).toFixed(2))+" "+N[_]},g=p.useCallback(async j=>{if(a)return;const T=Array.from(j);if(l.length+T.length>e){o({title:"",description:` ${e} `,variant:"destructive"});return}u(!0);try{const N=[];for(const P of T){const $=mw(P,s);if(!$.isValid){o({title:"",description:$.errors.join(`
`),variant:"destructive"});continue}const{data:G,error:U}=await uw(P,s.id);if(U){o({title:"",description:` ${P.name}: ${U.message}`,variant:"destructive"});continue}N.push({id:Date.now()+Math.random(),name:P.name,size:P.size,type:P.type,url:G.url,path:G.path,uploaded:!0})}const _=[...l,...N];d(_),r==null||r(_),N.length>0&&o({title:"",description:` ${N.length} `})}catch(N){console.error("Upload error:",N),o({title:"",description:"",variant:"destructive"})}finally{u(!1)}},[l,e,s,a,r,o]),y=async j=>{if(a)return;j.uploaded&&j.path&&await hw(j.path);const T=l.filter(N=>N.id!==j.id);d(T),r==null||r(T),o({title:"",description:` ${j.name} `})},v=p.useCallback(j=>{j.preventDefault(),j.stopPropagation(),j.type==="dragenter"||j.type==="dragover"?m(!0):j.type==="dragleave"&&m(!1)},[]),b=p.useCallback(j=>{j.preventDefault(),j.stopPropagation(),m(!1),j.dataTransfer.files&&j.dataTransfer.files[0]&&g(j.dataTransfer.files)},[g]);return t.jsxs("div",{className:`space-y-4 ${i}`,children:[t.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 transition-colors ${h?"border-blue-500 bg-blue-50/10":"border-slate-600 hover:border-slate-500"} ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onDragEnter:v,onDragLeave:v,onDragOver:v,onDrop:b,onClick:()=>!a&&document.getElementById("file-upload").click(),children:[t.jsx("input",{id:"file-upload",type:"file",multiple:!0,disabled:a,className:"hidden",accept:(w=s.allowed_file_types)==null?void 0:w.map(j=>`.${j}`).join(","),onChange:j=>g(j.target.files)}),t.jsx("div",{className:"text-center",children:c?t.jsxs("div",{className:"space-y-2",children:[t.jsx(Gs,{className:"w-8 h-8 text-blue-500 mx-auto animate-spin"}),t.jsx("p",{className:"text-slate-300",children:"..."})]}):t.jsxs("div",{className:"space-y-2",children:[t.jsx(Hs,{className:"w-8 h-8 text-slate-400 mx-auto"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-300",children:" "}),t.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[": ",(k=s.allowed_file_types)==null?void 0:k.join(", ")]}),t.jsxs("p",{className:"text-sm text-slate-500",children:[": ",x(s.max_file_size||10485760)]})]})]})})]}),t.jsx(be,{children:l.length>0&&t.jsxs(A.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2",children:[t.jsxs("h4",{className:"text-sm font-medium text-slate-300",children:[" (",l.length,"/",e,")"]}),l.map(j=>t.jsxs(A.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex items-center space-x-3 p-3 bg-slate-700/30 rounded-lg",children:[t.jsx("div",{className:"flex-shrink-0",children:f(j.name)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-slate-200 truncate",children:j.name}),t.jsx("p",{className:"text-xs text-slate-400",children:x(j.size)})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[j.uploaded?t.jsx(tc,{className:"w-4 h-4 text-green-400"}):t.jsx(Gs,{className:"w-4 h-4 text-blue-400 animate-spin"}),j.url&&t.jsx(E,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:T=>{T.stopPropagation(),window.open(j.url,"_blank")},children:t.jsx(Ve,{className:"w-4 h-4"})}),!a&&t.jsx(E,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-red-400 hover:text-red-300",onClick:T=>{T.stopPropagation(),y(j)},children:t.jsx(tt,{className:"w-4 h-4"})})]})]},j.id))]})}),s&&t.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(ye,{className:"w-3 h-3"}),t.jsxs("span",{children:[" ",s.max_files||e," "]})]}),s.due_date&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(ye,{className:"w-3 h-3"}),t.jsxs("span",{children:[": ",new Date(s.due_date).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})]})},yw=({contentId:s,assignment:e,onComplete:r,onClose:n})=>{const{toast:a}=se(),[i,o]=p.useState(!0),[l,d]=p.useState(e),[c,u]=p.useState([]),[h,m]=p.useState(null),[f,x]=p.useState(""),[g,y]=p.useState([]),[v,b]=p.useState(!1),[w,k]=p.useState(!1),[j,T]=p.useState("submit"),N=p.useCallback(async()=>{var L;o(!0);try{let S=l;if(!S){const{data:R,error:M}=await yu(s);if(M)throw M;d(R),S=R}if(S!=null&&S.id){const{data:R,error:M}=await bu(S.id);if(M)throw M;if(u(R),R.length>0){const F=R[0];m(F),x(F.submission_text||""),y(((L=F.file_urls)==null?void 0:L.map((I,W)=>{var B,D;return{id:Date.now()+W,name:((B=F.file_names)==null?void 0:B[W])||`File ${W+1}`,size:((D=F.file_sizes)==null?void 0:D[W])||0,url:I,uploaded:!0}}))||[]),F.status==="submitted"||F.status==="graded"?T("view"):T("edit")}}}catch(S){console.error("Error loading assignment data:",S),a({title:"",description:S.message,variant:"destructive"})}finally{o(!1)}},[s,l,a]);p.useEffect(()=>{N()},[N]);const _=async()=>{if(l){b(!0);try{const L={text:f,fileUrls:g.map(R=>R.url),fileNames:g.map(R=>R.name),fileSizes:g.map(R=>R.size)};let S;if(h&&h.status==="draft"?S=await sl(h.id,L):S=await tl(l.id,{...L,status:"draft"}),S.error)throw S.error;m(S.data),a({title:"",description:""}),N()}catch(L){console.error("Error saving draft:",L),a({title:"",description:L.message,variant:"destructive"})}finally{b(!1)}}},P=async()=>{if(l){if(!f.trim()&&g.length===0){a({title:"",description:" 1 ",variant:"destructive"});return}k(!0);try{const L={text:f,fileUrls:g.map(R=>R.url),fileNames:g.map(R=>R.name),fileSizes:g.map(R=>R.size)};let S;if(h&&h.status==="draft"?(await sl(h.id,L),S=await dw(h.id)):S=await tl(l.id,L),S.error)throw S.error;a({title:"! ",description:""}),r==null||r(S.data),T("view"),N()}catch(L){console.error("Error submitting assignment:",L),a({title:"",description:L.message,variant:"destructive"})}finally{k(!1)}}},$=(l==null?void 0:l.due_date)&&new Date>new Date(l.due_date),G=j==="submit"||j==="edit",U=(h==null?void 0:h.status)==="submitted"||(h==null?void 0:h.status)==="graded";return i?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-400",children:"..."})]})}):l?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:l.title}),t.jsx("p",{className:"text-slate-300",children:l.description})]}),t.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[U&&t.jsxs("div",{className:"flex items-center space-x-1 text-green-400 text-sm",children:[t.jsx(tc,{className:"w-4 h-4"}),t.jsx("span",{children:""})]}),$&&!U&&t.jsxs("div",{className:"flex items-center space-x-1 text-red-400 text-sm",children:[t.jsx(jt,{className:"w-4 h-4"}),t.jsx("span",{children:""})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 p-4 bg-slate-700/30 rounded-lg",children:[l.due_date&&t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(xs,{className:"w-4 h-4 text-blue-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400",children:""}),t.jsx("p",{className:"text-slate-200",children:new Date(l.due_date).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(ge,{className:"w-4 h-4 text-yellow-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400",children:""}),t.jsxs("p",{className:"text-slate-200",children:[l.max_score||100," "]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(Y,{className:"w-4 h-4 text-purple-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400",children:""}),t.jsxs("p",{className:"text-slate-200",children:[l.max_files||5," "]})]})]})]})]}),l.instructions&&t.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[t.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:""}),t.jsx("div",{className:"text-slate-300 whitespace-pre-wrap leading-relaxed",children:l.instructions})]}),c.length>0&&t.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[t.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:""}),t.jsx("div",{className:"space-y-2",children:c.map((L,S)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"text-sm",children:[t.jsxs("span",{className:"text-slate-300",children:[" ",L.attempt_number]}),t.jsx("span",{className:"ml-2 text-xs text-slate-400",children:new Date(L.submitted_at||L.created_at).toLocaleDateString("th-TH")})]}),t.jsxs("div",{className:`px-2 py-1 rounded text-xs ${L.status==="submitted"?"bg-green-500/20 text-green-400":L.status==="graded"?"bg-blue-500/20 text-blue-400":"bg-yellow-500/20 text-yellow-400"}`,children:[L.status==="submitted"&&"",L.status==="graded"&&` (${L.score}/${L.max_score})`,L.status==="draft"&&""]})]}),t.jsx(E,{size:"sm",variant:"ghost",onClick:()=>{var R;m(L),x(L.submission_text||""),y(((R=L.file_urls)==null?void 0:R.map((M,F)=>{var I,W;return{id:Date.now()+F,name:((I=L.file_names)==null?void 0:I[F])||`File ${F+1}`,size:((W=L.file_sizes)==null?void 0:W[F])||0,url:M,uploaded:!0}}))||[]),T("view")},children:t.jsx(ze,{className:"w-4 h-4"})})]},L.id))})]}),t.jsx(be,{mode:"wait",children:t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass-effect rounded-lg overflow-hidden",children:[h&&t.jsx("div",{className:"border-b border-white/10 p-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(E,{size:"sm",variant:j==="view"?"default":"ghost",onClick:()=>T("view"),children:[t.jsx(ze,{className:"w-4 h-4 mr-2"}),""]}),!U&&t.jsxs(E,{size:"sm",variant:j==="edit"?"default":"ghost",onClick:()=>T("edit"),children:[t.jsx(hs,{className:"w-4 h-4 mr-2"}),""]})]})}),t.jsx("div",{className:"p-6",children:j==="view"?t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-lg font-semibold text-white",children:""}),(h==null?void 0:h.submission_text)&&t.jsxs("div",{children:[t.jsx("h5",{className:"text-sm font-medium text-slate-400 mb-2",children:""}),t.jsx("div",{className:"p-4 bg-slate-700/30 rounded-lg text-slate-200 whitespace-pre-wrap",children:h.submission_text})]}),g.length>0&&t.jsxs("div",{children:[t.jsx("h5",{className:"text-sm font-medium text-slate-400 mb-2",children:""}),t.jsx("div",{className:"space-y-2",children:g.map(L=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[t.jsx("span",{className:"text-slate-200",children:L.name}),t.jsx(E,{size:"sm",variant:"ghost",onClick:()=>window.open(L.url,"_blank"),children:t.jsx(Ve,{className:"w-4 h-4"})})]},L.id))})]}),(h==null?void 0:h.feedback)&&t.jsxs("div",{children:[t.jsx("h5",{className:"text-sm font-medium text-slate-400 mb-2",children:""}),t.jsx("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg text-blue-200",children:h.feedback})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("h4",{className:"text-lg font-semibold text-white",children:h?"":""}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"/"}),t.jsx("textarea",{value:f,onChange:L=>x(L.target.value),disabled:!G,rows:8,className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:border-blue-500 focus:outline-none resize-none",placeholder:"..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:""}),t.jsx(gw,{assignment:l,maxFiles:l.max_files||5,onFilesChange:y,initialFiles:g,disabled:!G})]}),G&&t.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/10",children:[t.jsx("div",{className:"text-xs text-slate-500",children:$&&t.jsxs("div",{className:"flex items-center space-x-1 text-amber-400",children:[t.jsx(jt,{className:"w-3 h-3"}),t.jsx("span",{children:""})]})}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(E,{variant:"outline",onClick:_,disabled:v||w,children:v?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx(gs,{className:"w-4 h-4 mr-2"}),""]})}),t.jsx(E,{onClick:P,disabled:v||w,className:"bg-green-500 hover:bg-green-600",children:w?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Ma,{className:"w-4 h-4 mr-2"}),""]})})]})]})]})})]},j)})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Y,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:""}),t.jsx("p",{className:"text-slate-400",children:""})]})},vu=async s=>{try{const{data:e,error:r}=await C.from("content_with_progress").select("*").eq("course_id",s).order("order_index",{ascending:!0});if(r)throw r;return{data:e||[],error:null}}catch(e){return console.error("Error fetching content with progress:",e),{data:[],error:e}}},bw=async(s,e)=>{try{const{data:{user:r},error:n}=await C.auth.getUser();if(n||!r)throw new Error("User not authenticated");const a={completion_type:e.completion_type||"manual",completion_criteria:e.completion_criteria||{},minimum_score:e.minimum_score||0,minimum_time_minutes:e.minimum_time_minutes||0,is_required:e.is_required!==void 0?e.is_required:!0,unlock_after:e.unlock_after||[],updated_at:new Date().toISOString()},{data:i,error:o}=await C.from("course_content").update(a).eq("id",s).select().single();if(o)throw o;return{data:i,error:null}}catch(r){return console.error("Error updating completion requirements:",r),{data:null,error:r}}},rl=async(s,e)=>{try{const{data:r,error:n}=await C.rpc("check_content_accessibility",{p_enrollment_id:s,p_content_id:e});if(n)throw n;return{data:r||!1,error:null}}catch(r){return console.error("Error checking content accessibility:",r),{data:!1,error:r}}},vw=async(s,e,r={})=>{try{console.log("markContentCompleted called:",{enrollmentId:s,contentId:e,completionData:r});let n,a;const{data:i}=await C.from("course_progress").select("*").eq("enrollment_id",s).eq("content_id",e).maybeSingle();if(i){const o=await C.from("course_progress").update({is_completed:!0,completed_at:new Date().toISOString(),completion_data:r,last_attempt_at:new Date().toISOString(),attempts_count:(i.attempts_count||0)+1}).eq("enrollment_id",s).eq("content_id",e).select().single();n=o.data,a=o.error,console.log("Updated existing progress record")}else{const o=await C.from("course_progress").insert({enrollment_id:s,content_id:e,is_completed:!0,completed_at:new Date().toISOString(),completion_data:r,completion_type:"manual",time_spent_minutes:0,attempts_count:1,last_attempt_at:new Date().toISOString(),is_accessible:!0,unlocked_at:new Date().toISOString()}).select().single();n=o.data,a=o.error,console.log("Inserted new progress record")}if(a)throw console.error("Database error in markContentCompleted:",a),a;console.log("Progress record updated:",n);try{const{data:o}=await C.from("enrollments").select("progress_percentage").eq("id",s).single();if(o){const l=Math.min((o.progress_percentage||0)+10,100);await C.from("enrollments").update({progress_percentage:l,status:l>=100?"completed":"active",completed_at:l>=100?new Date().toISOString():null}).eq("id",s),console.log("Enrollment progress updated to:",l+"%")}}catch(o){console.warn("Could not update enrollment progress:",o)}return{data:n,error:null}}catch(n){return console.error("Error marking content completed:",n),{data:null,error:n}}},ww=()=>{var Ze,Ct,q,ue,he,qe,Qe,Re;const{courseId:s}=Br(),{user:e}=Le(),{toast:r}=se(),[n,a]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState({isEnrolled:!1}),[c,u]=p.useState(null),[h,m]=p.useState(null),[f,x]=p.useState({}),[g,y]=p.useState(null),[v,b]=p.useState({}),[w,k]=p.useState(null),[j,T]=p.useState(!1),[N,_]=p.useState(null),[P,$]=p.useState(!1),G=p.useCallback(async()=>{if(e)try{console.log("Checking enrollment for user:",e==null?void 0:e.id,"course:",s);const{isEnrolled:V,status:z,error:H}=await li(s);if(console.log("Enrollment result:",{isEnrolled:V,status:z,error:H}),H){console.error("Enrollment check error:",H),r({title:"",description:H.message,variant:"destructive"}),d({isEnrolled:!1,status:null});return}if(d({isEnrolled:V,status:z}),z!=null&&z.enrollment_id?(m(z.enrollment_id),console.log("Enrollment ID set:",z.enrollment_id)):z!=null&&z.id&&(m(z.id),console.log("Enrollment ID set from status.id:",z.id)),V){console.log("User is enrolled, loading progress...");const{data:Me}=await In(s);console.log("Course progress data:",Me),u(Me);const{data:me}=await vu(s);if(me&&me.length>0){console.log("Loading content progress for",me.length,"items");const Ge={},Ce={};for(const mt of me){if(mt.content_type==="video"){const{data:Tt}=await el(mt.id);Ge[mt.id]=Tt}const ws=(z==null?void 0:z.enrollment_id)||(z==null?void 0:z.id);if(ws){const{data:Tt}=await rl(ws,mt.id);Ce[mt.id]=Tt}}console.log("Content progress map:",Ge),console.log("Content accessibility map:",Ce),b(Ge),x(Ce)}}else console.log("User is not enrolled")}catch(V){console.error("Error in checkEnrollmentAndProgress:",V),r({title:"",description:V.message,variant:"destructive"})}},[e,s,r]),U=p.useCallback(async()=>{o(!0),console.log("CourseLearningPage: Loading course with ID:",s);const V=setTimeout(()=>{console.error("CourseLearningPage: Course loading timeout after 10 seconds"),o(!1),r({title:"",description:"",variant:"destructive"})},1e4);try{const{data:z,error:H}=await uu(s);clearTimeout(V),console.log("CourseLearningPage: Course data received:",z,"Error:",H),H?(console.error("CourseLearningPage: Course loading error:",H),r({title:"",description:H.message,variant:"destructive"})):z?(a(z),console.log("CourseLearningPage: Course set successfully:",z),z!=null&&z.content&&z.content.length>0?(console.log("CourseLearningPage: Auto-selecting first content:",z.content[0]),y(z.content[0])):console.log("CourseLearningPage: No content found in course")):(console.log("CourseLearningPage: No course data returned"),r({title:"",description:"",variant:"destructive"}))}catch(z){clearTimeout(V),console.error("CourseLearningPage: Unexpected error loading course:",z),r({title:"",description:z.message,variant:"destructive"})}finally{o(!1)}},[s,r]);p.useEffect(()=>{U()},[s]),p.useEffect(()=>{e&&n&&(console.log("useEffect: Checking enrollment and progress",{user:e==null?void 0:e.id,courseId:n==null?void 0:n.id}),G())},[e,n==null?void 0:n.id]);const L=async V=>{const z=n.content.findIndex(H=>H.id===V.id);if(X(V,z)){const H=n.content[z-1];r({title:"",description:H?` "${H.title}" `:"",variant:"destructive"});return}if(y(V),T(!1),k(null),$(!1),_(null),V.content_type==="quiz"){const{data:H}=await Qv(V.id);H&&(k(H),T(!0))}if(V.content_type==="assignment")try{const{data:H,error:Me}=await yu(V.id);H&&!Me&&(_(H),$(!0))}catch{console.log(`: ${V.title}`)}},S=V=>{r({title:V.is_passed?"!  ":"",description:`: ${V.score}%`,variant:V.is_passed?"default":"destructive"}),V.is_passed&&g?Z(g.id,{quiz_score:V.score,quiz_passed:V.is_passed,quiz_attempts:V.attempt_number||1}):e&&n&&(async()=>{try{const{data:H}=await In(s);u(H)}catch(H){console.error("Error refreshing progress:",H)}})(),T(!1)},R=V=>{r({title:"! ",description:""}),g&&Z(g.id,{assignment_submitted:!0,submission_id:V.id}),$(!1)},M=V=>{if(b(z=>({...z,[g.id]:V})),g&&V.total_duration>0){const z=V.watched_duration/V.total_duration*100;z>=90&&Z(g.id,{video_watched_percentage:z,video_duration:V.total_duration,video_watched_duration:V.watched_duration})}},F=V=>{if(!V.completion_type||V.completion_type==="manual")return"";switch(V.completion_type){case"quiz_required":return` ${V.minimum_score||0}% `;case"assignment_required":return` ${V.minimum_score||0}% `;case"time_based":return` ${V.minimum_time_minutes||0} `;case"video_complete":return" (90%)";case"sequential":return"";default:return""}},I=V=>{if(!V||V.completion_type!=="manual")return!1;const z=D(V);return!(z!=null&&z.isCompleted)},W=(V,z=!1)=>{if(z)return t.jsx(Pe,{className:"w-5 h-5 text-green-400"});switch(V){case"video":return t.jsx(Ms,{className:"w-5 h-5 text-blue-400"});case"quiz":return t.jsx(Ft,{className:"w-5 h-5 text-yellow-400"});case"assignment":return t.jsx(Y,{className:"w-5 h-5 text-purple-400"});case"document":return t.jsx(oe,{className:"w-5 h-5 text-green-400"});default:return t.jsx(Y,{className:"w-5 h-5 text-gray-400"})}},B=V=>{if(!(c!=null&&c.content_progress))return 0;const z=c.content_progress.find(H=>H.id===V.id);if(V.content_type==="video"&&v[V.id]){const H=v[V.id];return H.total_duration>0?Math.round(H.last_position/H.total_duration*100):0}return z!=null&&z.is_completed?100:0},D=V=>{if(!(c!=null&&c.content_progress))return null;const z=c.content_progress.find(H=>H.id===V.id);return V.content_type==="quiz"||V.content_type==="assignment"?z!=null&&z.is_completed?z.score!==void 0&&z.is_passed!==void 0?{isCompleted:!0,isPassed:z.is_passed,score:z.score,type:V.content_type}:{isCompleted:!0,isPassed:!0,score:null,type:V.content_type}:null:z!=null&&z.is_completed?{isCompleted:!0,isPassed:!0,score:null,type:V.content_type}:null},X=(V,z)=>{if(f.hasOwnProperty(V.id))return!f[V.id];if(z===0)return!1;const H=n.content[z-1];return B(H)<100},Z=async(V,z={})=>{var Me;console.log("handleContentComplete called with:",{contentId:V,completionData:z,enrollmentId:h,enrollmentStatus:l});let H=h;if(!H&&((Me=l==null?void 0:l.status)!=null&&Me.id)&&(H=l.status.id,m(H),console.log("Using enrollment ID from status:",H)),!H){console.error("No enrollment ID found:",{enrollmentId:h,enrollmentStatus:l}),r({title:"",description:" ",variant:"destructive"});return}try{const{data:me,error:Ge}=await vw(H,V,z);if(Ge)throw Ge;r({title:"! ",description:""}),e&&n&&(async()=>{var mt,ws;try{const{data:Tt}=await In(s);if(u(Tt),n!=null&&n.content){const ui={},hi={};for(const js of n.content){if(js.content_type==="video"){const{data:dn}=await el(js.id);ui[js.id]=dn}const mi=((mt=l==null?void 0:l.status)==null?void 0:mt.enrollment_id)||((ws=l==null?void 0:l.status)==null?void 0:ws.id);if(mi){const{data:dn}=await rl(mi,js.id);hi[js.id]=dn}}b(ui),x(hi)}}catch(Tt){console.error("Error refreshing progress:",Tt)}})()}catch(me){console.error("Error marking content completed:",me),r({title:"",description:me.message,variant:"destructive"})}};return i?t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#667eea] mx-auto mb-4"}),t.jsx("p",{className:"text-teal-700",children:"..."}),t.jsxs("p",{className:"text-teal-700 text-sm mt-2",children:["Course ID: ",s]})]})}):n?l.isEnrolled?t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0a192f] to-[#172a46]",children:[t.jsx(we,{children:t.jsxs("title",{children:[n.title," -  | Login Learning"]})}),t.jsx("div",{className:"bg-black/20 backdrop-blur-sm border-b border-white/10",children:t.jsx("div",{className:"container mx-auto px-4 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(te,{to:`/courses/${s}`,children:t.jsx(E,{variant:"ghost",size:"icon",className:"text-teal-900",children:t.jsx(Bt,{className:"w-5 h-5"})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-teal-900",children:n.title}),c&&t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-teal-800",children:[t.jsxs("span",{children:[": ",c.progress_percentage,"%"]}),t.jsx("span",{children:""}),t.jsxs("span",{children:[c.completed_count,"/",c.total_count," "]})]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-teal-800",children:[t.jsx(de,{className:"w-4 h-4"}),t.jsxs("span",{children:[n.enrollment_count||0," "]})]})]})})}),t.jsx("div",{className:"container mx-auto px-4 py-6",children:t.jsxs("div",{className:"grid lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 sticky top-24",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 p-3 rounded-xl mr-4",children:t.jsx(oe,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:""}),t.jsxs("p",{className:"text-sm text-gray-600",children:[((Ze=n.content)==null?void 0:Ze.length)||0," "]})]})]}),c&&t.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-200",children:[t.jsxs("div",{className:"flex justify-between text-sm font-semibold text-gray-700 mb-3",children:[t.jsx("span",{children:" "}),t.jsxs("span",{className:"text-indigo-600",children:[c.progress_percentage,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 shadow-inner",children:t.jsx("div",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 h-3 rounded-full transition-all duration-500 shadow-sm",style:{width:`${c.progress_percentage}%`}})}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-2",children:[t.jsx("span",{children:""}),t.jsx("span",{children:""})]})]}),t.jsx("div",{className:"space-y-3",children:(Ct=n.content)==null?void 0:Ct.map((V,z)=>{const H=B(V),Me=H>=100,me=X(V,z),Ge=(g==null?void 0:g.id)===V.id,Ce=D(V);return t.jsxs(A.div,{whileHover:{scale:me?1:1.02,y:me?0:-2},className:`group relative overflow-hidden rounded-xl border-2 transition-all duration-300 cursor-pointer ${Ge?"bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-300 shadow-lg":me?"bg-gray-100 border-gray-300 opacity-70":"bg-white border-gray-200 hover:border-indigo-300 hover:shadow-md"}`,onClick:()=>!me&&L(V),children:[t.jsx("div",{className:"absolute inset-0 opacity-5",children:t.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-full -translate-y-8 translate-x-8"})}),t.jsx("div",{className:"relative p-4",children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsxs("div",{className:"flex-shrink-0",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${Ge?"bg-gradient-to-r from-indigo-500 to-purple-500 shadow-lg":me?"bg-gray-300":Me?"bg-gradient-to-r from-green-500 to-emerald-500 shadow-lg":"bg-gradient-to-r from-blue-500 to-cyan-500 shadow-md"}`,children:me?t.jsx(Oe,{className:"w-6 h-6 text-gray-600"}):Me?t.jsx(Pe,{className:"w-6 h-6 text-white"}):W(V.content_type,!1)}),t.jsx("div",{className:"text-center mt-2",children:t.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${Ge?"bg-indigo-200 text-indigo-800":me?"bg-gray-200 text-gray-600":"bg-blue-100 text-blue-700"}`,children:["#",z+1]})})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:`text-sm font-bold mb-1 line-clamp-2 ${me?"text-gray-600":"text-gray-800"}`,children:V.title}),V.description&&t.jsx("p",{className:`text-xs mb-2 line-clamp-2 ${me?"text-gray-500":"text-gray-600"}`,children:V.description})]}),t.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[Ce&&t.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${Ce.isPassed?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[Ce.isPassed?t.jsx(Pe,{className:"w-3 h-3"}):t.jsx(Ws,{className:"w-3 h-3"}),t.jsxs("span",{children:[Ce.type==="quiz"||Ce.type==="assignment"?Ce.isPassed?"":"":"",Ce.score!==null&&` ${Ce.score}%`]})]}),me&&t.jsx("div",{className:"text-xs text-gray-500 text-right",children:""}),!me&&!Ce&&z>0&&t.jsx("div",{className:"text-xs text-blue-600 text-right",children:""})]})]}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[V.duration_minutes>0&&t.jsxs("div",{className:`flex items-center text-xs ${me?"text-gray-500":"text-gray-600"}`,children:[t.jsx(ce,{className:"w-3 h-3 mr-1"}),t.jsxs("span",{className:"font-medium",children:[V.duration_minutes," "]})]}),!me&&H>0&&H<100&&t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-1.5",children:t.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${H}%`}})}),t.jsxs("span",{className:"text-xs font-medium text-indigo-600",children:[Math.round(H),"%"]})]})]})]})]})}),Ge&&t.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-indigo-500 to-purple-500"})]},V.id)})})]})}),t.jsxs("div",{className:"lg:col-span-3",children:[t.jsx(be,{mode:"wait",children:g&&t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 p-6 text-white",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:W(g.content_type,!1)}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:g.title}),g.duration_minutes>0&&t.jsxs("div",{className:"flex items-center text-indigo-100 mt-1",children:[t.jsx(ce,{className:"w-4 h-4 mr-1"}),t.jsxs("span",{children:[g.duration_minutes," "]})]})]})]}),t.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2",children:t.jsxs("div",{className:"text-sm font-medium",children:[": ",Math.round(B(g)),"%"]})})]}),g.description&&t.jsx("div",{className:"mt-4 p-4 bg-white/10 rounded-xl backdrop-blur-sm",children:t.jsx("p",{className:"text-indigo-100",children:g.description})})]}),t.jsxs("div",{className:"p-6",children:[g.content_type==="video"&&g.content_url&&t.jsx(Zv,{src:g.content_url,contentId:g.id,title:g.title,onProgress:M,initialTime:((q=v[g.id])==null?void 0:q.last_position)||0}),j&&w&&t.jsx(lw,{quiz:w,onComplete:S,onClose:()=>T(!1)}),g.content_type==="document"&&t.jsxs("div",{className:"space-y-4",children:[g.content_url&&t.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-slate-700/30 rounded-lg",children:[t.jsx(Y,{className:"w-8 h-8 text-blue-400"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-teal-900 font-medium",children:""}),t.jsx("p",{className:"text-teal-700 text-sm",children:""})]}),t.jsxs(E,{variant:"outline",size:"sm",children:[t.jsx(Ve,{className:"w-4 h-4 mr-2"}),""]})]}),g.description&&t.jsx("div",{className:"prose prose-invert max-w-none",children:t.jsx("div",{className:"text-teal-800 leading-relaxed",children:g.description})})]}),P&&N&&t.jsx(yw,{contentId:g.id,assignment:N,onComplete:R,onClose:()=>$(!1)}),g.content_type==="assignment"&&!P&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Y,{className:"w-16 h-16 text-purple-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-teal-900 mb-2",children:""}),t.jsx("p",{className:"text-teal-700 mb-4",children:"..."})]}),!["video","quiz","document","assignment"].includes(g.content_type)&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(oe,{className:"w-16 h-16 text-teal-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-teal-900 mb-2",children:""}),t.jsx("p",{className:"text-teal-700",children:" "})]}),t.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:t.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx(ye,{className:"w-5 h-5 text-blue-600"}),t.jsx("h4",{className:"font-semibold text-gray-900",children:(ue=D(g))!=null&&ue.isCompleted?"":""})]}),(he=D(g))!=null&&he.isCompleted?t.jsxs("div",{className:"text-green-700",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[t.jsx(Pe,{className:"w-4 h-4"}),t.jsx("span",{className:"font-medium",children:"!"})]}),t.jsx("p",{className:"text-sm text-green-600",children:""})]}):t.jsxs("div",{className:"text-gray-700",children:[t.jsx("p",{className:"mb-2",children:F(g)}),I(g)&&t.jsxs(E,{onClick:()=>Z(g.id,{manual_completion:!0}),className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[t.jsx(ds,{className:"w-4 h-4 mr-2"}),""]}),g.completion_type==="quiz_required"&&t.jsx("div",{className:"mt-3 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:t.jsx("p",{className:"text-sm text-yellow-800",children:" "})}),g.completion_type==="assignment_required"&&t.jsx("div",{className:"mt-3 p-3 bg-purple-50 rounded-lg border border-purple-200",children:t.jsx("p",{className:"text-sm text-purple-800",children:" "})}),g.completion_type==="video_complete"&&t.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:t.jsx("p",{className:"text-sm text-blue-800",children:"  90% "})})]})]}),((qe=D(g))==null?void 0:qe.isCompleted)&&t.jsx("div",{className:"ml-6",children:(()=>{const V=n.content.findIndex(H=>H.id===g.id),z=n.content[V+1];if(z){const H=X(z,V+1);return t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:":"}),t.jsxs(E,{onClick:()=>!H&&L(z),disabled:H,variant:H?"outline":"default",className:H?"opacity-50":"bg-blue-600 hover:bg-blue-700",size:"sm",children:[t.jsx(Jl,{className:"w-4 h-4 mr-2"}),z.title]})]})}return t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"bg-green-100 rounded-full p-3 mb-2",children:t.jsx(Ft,{className:"w-6 h-6 text-green-600"})}),t.jsx("p",{className:"text-sm font-medium text-green-700",children:"!"})]})})()})]})})}),t.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:t.jsx(di,{contentId:g.id,compact:!1,className:"attachments-section"})})]})]},g.id)}),!g&&((Qe=n.content)==null?void 0:Qe.length)>0&&t.jsxs("div",{className:"glass-effect rounded-xl p-12 text-center",children:[t.jsx(oe,{className:"w-16 h-16 text-teal-700 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-teal-900 mb-2",children:""}),t.jsx("p",{className:"text-teal-700",children:""})]}),((Re=n.content)==null?void 0:Re.length)===0&&t.jsxs("div",{className:"glass-effect rounded-xl p-12 text-center",children:[t.jsx(oe,{className:"w-16 h-16 text-teal-700 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-teal-900 mb-2",children:""}),t.jsx("p",{className:"text-teal-700",children:" "})]})]})]})})]}):t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h2",{className:"text-2xl font-bold text-teal-900 mb-2",children:""}),t.jsx("p",{className:"text-teal-700 mb-4",children:""}),t.jsxs("div",{className:"text-teal-700 text-sm mb-4",children:[t.jsxs("p",{children:["Course: ",n==null?void 0:n.title]}),t.jsxs("p",{children:["User: ",e==null?void 0:e.email]}),t.jsxs("p",{children:["Enrollment Status: ",JSON.stringify(l)]})]}),t.jsx(te,{to:`/courses/${s}`,children:t.jsx(E,{children:""})})]})}):t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("h2",{className:"text-2xl font-bold text-teal-900 mb-2",children:""}),t.jsxs("p",{className:"text-teal-700 mb-4",children:["Course ID: ",s]}),t.jsxs("p",{className:"text-teal-700 text-sm mb-4",children:["Loading: ",i?"true":"false"]}),t.jsx(te,{to:"/courses",children:t.jsx(E,{variant:"outline",children:""})})]})})},jw=()=>{const s={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},e=[{title:"Arduino & IoT Workshop",duration:"5 ",participants:"15-20 ",description:" IoT  Arduino",features:["","",""],price:"12,500 ",category:"Electronics"},{title:"React Native Mobile Development",duration:"7 ",participants:"12-18 ",description:" React Native ",features:["","Deploy  Store","Portfolio Project"],price:"18,000 ",category:"Software"},{title:"Structural Design Intensive",duration:"10 ",participants:"10-15 ",description:"",features:["AutoCAD + SAP2000","",""],price:"25,000 ",category:"Civil Engineering"}],r=[{icon:de,title:"",description:" "},{icon:Wr,title:"",description:"70%  30%  "},{icon:ge,title:"",description:""},{icon:oe,title:"",description:" E-book "}],n=[" ","","Wi-Fi  ","",""];return t.jsxs(A.div,{initial:"initial",animate:"in",exit:"out",variants:s,className:"min-h-screen pt-20",children:[t.jsxs(we,{children:[t.jsx("title",{children:" Onsite - Login Learning"}),t.jsx("meta",{name:"description",content:" Onsite   Login Learning "})]}),t.jsxs("section",{className:"relative overflow-hidden py-20",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-100/50 to-blue-200/30"}),t.jsx("div",{className:"container mx-auto px-4 relative",children:t.jsxs(A.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8},className:"text-center max-w-4xl mx-auto",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-700 to-blue-500 rounded-full flex items-center justify-center",children:t.jsx(us,{className:"w-10 h-10 text-blue-800"})})}),t.jsxs("h1",{className:"text-4xl lg:text-6xl font-bold text-black mb-6",children:[" ",t.jsx("span",{className:"gradient-text",children:"Onsite"})]}),t.jsx("p",{className:"text-xl text-black mb-8 leading-relaxed",children:"     Login Learning"}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t.jsxs(E,{size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600",children:[t.jsx(xs,{className:"w-5 h-5 mr-2"})," Onsite"]}),t.jsxs(E,{size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[t.jsx($t,{className:"w-5 h-5 mr-2"}),""]})]})]})})]}),t.jsx("section",{className:"py-20",children:t.jsxs("div",{className:"container mx-auto px-4",children:[t.jsxs(A.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},className:"text-center mb-16",children:[t.jsxs("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:[" ",t.jsx("span",{className:"gradient-text",children:"Onsite"})]}),t.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:" Onsite "})]}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:r.map((a,i)=>t.jsxs(A.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.6,delay:i*.1},className:"glass-effect p-6 rounded-xl text-center hover:transform hover:scale-105 transition-all duration-300",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-700 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(a.icon,{className:"w-8 h-8 text-blue-800"})}),t.jsx("h3",{className:"text-xl font-bold text-black mb-3",children:a.title}),t.jsx("p",{className:"text-black",children:a.description})]},i))})]})}),t.jsx("section",{className:"py-20 bg-gradient-to-r from-blue-50/80 to-blue-100/60",children:t.jsxs("div",{className:"container mx-auto px-4",children:[t.jsxs(A.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},className:"text-center mb-16",children:[t.jsxs("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:[" ",t.jsx("span",{className:"gradient-text",children:"Onsite"})," "]}),t.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:" "})]}),t.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:e.map((a,i)=>t.jsxs(A.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.6,delay:i*.2},className:"glass-effect p-6 rounded-xl hover:transform hover:scale-105 transition-all duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-blue-700 to-blue-500 text-gray-800 text-sm rounded-full",children:a.category}),t.jsxs("div",{className:"flex items-center text-yellow-400",children:[t.jsx(Ar,{className:"w-4 h-4 mr-1"}),t.jsx("span",{className:"text-sm",children:""})]})]}),t.jsx("h3",{className:"text-xl font-bold text-black mb-3",children:a.title}),t.jsx("p",{className:"text-black mb-4",children:a.description}),t.jsxs("div",{className:"space-y-2 mb-6",children:[t.jsxs("div",{className:"flex items-center text-black",children:[t.jsx(ce,{className:"w-4 h-4 mr-2"}),t.jsxs("span",{children:[": ",a.duration]})]}),t.jsxs("div",{className:"flex items-center text-black",children:[t.jsx(de,{className:"w-4 h-4 mr-2"}),t.jsxs("span",{children:[": ",a.participants]})]})]}),t.jsx("div",{className:"space-y-2 mb-6",children:a.features.map((o,l)=>t.jsxs("div",{className:"flex items-center text-blue-600",children:[t.jsx(Pe,{className:"w-4 h-4 mr-2"}),t.jsx("span",{className:"text-sm",children:o})]},l))}),t.jsxs("div",{className:"border-t border-slate-300 pt-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-2xl font-bold text-black",children:a.price}),t.jsx("span",{className:"text-black text-sm block",children:""})]}),t.jsx(E,{className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600",children:""})]})]},i))})]})}),t.jsx("section",{className:"py-20",children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[t.jsxs(A.div,{initial:{x:-30,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.8},children:[t.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:""}),t.jsx("p",{className:"text-xl text-black mb-8",children:" "}),t.jsx("div",{className:"space-y-4",children:n.map((a,i)=>t.jsxs(A.div,{initial:{x:-20,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.6,delay:i*.1},className:"flex items-center",children:[t.jsx(Pe,{className:"w-5 h-5 text-blue-600 mr-3 flex-shrink-0"}),t.jsx("span",{className:"text-black",children:a})]},i))})]}),t.jsx(A.div,{initial:{x:30,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.8},className:"glass-effect p-8 rounded-xl",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Rm,{className:"w-16 h-16 text-blue-600 mx-auto mb-6"}),t.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:""}),t.jsxs("div",{className:"space-y-3 text-black",children:[t.jsx("p",{children:t.jsx("strong",{children:":"})}),t.jsxs("p",{children:["123  ",t.jsx("br",{}),"  10400"]}),t.jsx("div",{className:"pt-4 border-t border-slate-300",children:t.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx($t,{className:"w-4 h-4 mr-2 text-blue-600"}),t.jsx("span",{children:"02-xxx-xxxx"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(ct,{className:"w-4 h-4 mr-2 text-blue-600"}),t.jsx("span",{children:"onsite@loginlearning.com"})]})]})})]})]})})]})})}),t.jsx("section",{className:"py-20 bg-gradient-to-r from-blue-100/60 to-blue-200/40",children:t.jsx("div",{className:"container mx-auto px-4 text-center",children:t.jsxs(A.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},className:"max-w-3xl mx-auto",children:[t.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:" Onsite ?"}),t.jsx("p",{className:"text-xl text-black mb-8",children:""}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t.jsxs(E,{size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600",children:[t.jsx($t,{className:"w-5 h-5 mr-2"}),""]}),t.jsx(E,{size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50",asChild:!0,children:t.jsxs(te,{to:"/contact",children:[t.jsx(ct,{className:"w-5 h-5 mr-2"}),""]})})]})]})})})]})},Nw=()=>{const[s,e]=p.useState({}),r=(l,d)=>{const c=`${l}-${d}`;e(u=>({...u,[c]:!u[c]}))},n=[{faculty:" ()",icon:sf,subtitle:" Portfolio ()",universities:[{name:"",shortName:"",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",gpax:" 3.00-3.50",exams:"TPAT3, TGAT",intake:"~600-700 ",fee:"~21,000 /",website:"https://www.eng.chula.ac.th/",websiteText:" ",recommendedMajors:[": GPAX  3.50, Portfolio , TPAT3",": GPAX  3.25, Portfolio, TPAT3"],portfolioRounds:"~327 ",quotaRounds:"~38 ",admissionRounds:"~240 "},{name:"",shortName:"",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/5/51/Logo_ku_th.svg/1200px-Logo_ku_th.svg.png",fallbackLogo:"https://placehold.co/60x60/D4A017/FFFFFF?text=KU&font=bold",gpax:" 2.75-3.25",exams:"TPAT3, TGAT",intake:"~1400+ ",fee:"~17,000 /",website:"https://www.eng.ku.ac.th/",websiteText:" ",recommendedMajors:[": GPAX  3.25, Portfolio",": GPAX  3.00, Portfolio"],portfolioRounds:"~791 ",quotaRounds:"~181 ",admissionRounds:"~390 "},{name:"",shortName:".",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/7/76/Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg/1200px-Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg.png",fallbackLogo:"https://placehold.co/60x60/F28500/FFFFFF?text=KMUTT&font=bold",gpax:" 2.75-3.00",exams:"TGAT, TPAT3 ()",intake:"~900+ ",fee:"~25,000 /",website:"https://eng.kmutt.ac.th/",websiteText:" .",recommendedMajors:[": GPAX  3.00, Portfolio"],portfolioRounds:"~725 ",quotaRounds:"~170 ",admissionRounds:"~63 "},{name:"",shortName:".",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/e/e4/Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg/1200px-Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg.png",fallbackLogo:"https://placehold.co/60x60/E36414/FFFFFF?text=KMITL&font=bold",gpax:" 2.75",exams:"TPAT3, TGAT",intake:"~600+ ",fee:"~20,000 /",website:"https://www.reg.kmitl.ac.th/index/faculty_engineer.php",websiteText:" .",recommendedMajors:[": GPAX  3.00, Portfolio"],portfolioRounds:"~200 ",quotaRounds:"~54 ",admissionRounds:"~403 "},{name:"",shortName:".",logo:"https://www.eng.kmutnb.ac.th/wp-content/uploads/2019/08/LOGO-KMUTNB--300x300.png",fallbackLogo:"https://placehold.co/60x60/C00000/FFFFFF?text=KMUTNB&font=bold",gpax:" 2.75",exams:"TGAT/TPAT ()",intake:"~600+ ",fee:"~18,000 /",website:"https://www.eng.kmutnb.ac.th/",websiteText:" .",recommendedMajors:[": GPAX  2.75, Portfolio"],portfolioRounds:"~371 ",quotaRounds:"~124 ",admissionRounds:"~40 "},{name:"",shortName:".",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/d/db/Chiang_Mai_University.svg/1200px-Chiang_Mai_University.svg.png",fallbackLogo:"https://placehold.co/60x60/7B1FA2/FFFFFF?text=CMU&font=bold",gpax:" 2.75-3.00",exams:"TGAT, TPAT3",intake:"~1100+ ",fee:"~20,000 /",website:"https://www.eng.cmu.ac.th/",websiteText:" .",recommendedMajors:[": GPAX  3.00, Portfolio"],portfolioRounds:"~352 ",quotaRounds:"~225 ",admissionRounds:"~350 "},{name:"",shortName:".",logo:"https://www.kku.ac.th/wp-content/uploads/2022/01/1.-official-logo-2022-26.png",fallbackLogo:"https://placehold.co/60x60/D32F2F/FFFFFF?text=KKU&font=bold",gpax:" 2.75",exams:"TGAT/TPAT ()",intake:"~600+ ",fee:"~18,000 /",website:"https://eng.kku.ac.th/",websiteText:" .",recommendedMajors:[": GPAX  3.00, Portfolio"],portfolioRounds:"~326 ",quotaRounds:"~152 ",admissionRounds:"~118 "},{name:"",shortName:".",logo:"https://huso.psu.ac.th/th/wp-content/uploads/2023/04/PSU_Logo_text_Eng_Color_2.png",fallbackLogo:"https://placehold.co/60x60/0277BD/FFFFFF?text=PSU&font=bold",gpax:" 2.75",exams:"TGAT/TPAT ()",intake:"~1000+ ",fee:"~22,000 /",website:"https://www.eng.psu.ac.th/",websiteText:" .",recommendedMajors:[": GPAX  3.00, Portfolio"],portfolioRounds:"~594 ",quotaRounds:"~210 ",admissionRounds:"~100 "}]},{faculty:" ()",icon:$m,subtitle:" Portfolio ()",universities:[{name:"",shortName:"ISE Chula",subtitle:"ISE (International School of Engineering)",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",requirements:"IELTS:  6.0, TOEFL iBT:  80, SAT Math:  620",intake:"~180-200  ()",fee:"~84,000 /",website:"https://www.google.com/search?client=safari&rls=en&q=ISE+Chula&ie=UTF-8&oe=UTF-8",websiteText:" ISE Chula",recommendedMajors:["Aerospace Engineering: GPAX  3.5, Strong Math/Physics, IELTS  6.5, SAT Math  650","Robotics and AI: GPAX  3.5, Strong Math/Programming, IELTS  6.5, SAT Math  650"]},{name:"",shortName:"IUP Kasetsart",subtitle:"IUP (International Undergraduate Program)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/5/51/Logo_ku_th.svg/1200px-Logo_ku_th.svg.png",fallbackLogo:"https://placehold.co/60x60/D4A017/FFFFFF?text=KU&font=bold",gpax:" 2.75",requirements:"IELTS:  5.5, TOEFL iBT:  61",intake:"~100-150  ()",fee:"~70,000 /",website:"https://iup.eng.ku.ac.th",websiteText:" IUP Kasetsart",recommendedMajors:["Software and Knowledge Engineering: GPAX  3.00, IELTS  5.5, Portfolio ( Project  Software)","Electrical Engineering: GPAX  2.75, IELTS  5.5, Portfolio ()"]},{name:"",shortName:"Mahidol Eng",subtitle:"Faculty of Engineering (International Programs)",logo:"https://upload.wikimedia.org/wikipedia/commons/4/45/Mahidol_U.png",fallbackLogo:"https://placehold.co/60x60/1565C0/FFFFFF?text=MU&font=bold",gpax:" 3.00",requirements:"IELTS:  6.0, TOEFL iBT:  64",intake:"~80-120  ()",fee:"~90,000 /",website:"https://www.eg.mahidol.ac.th",websiteText:" EG Mahidol Inter",recommendedMajors:["Biomedical Engineering: GPAX  3.25, IELTS  6.0, Portfolio (, )","Computer Engineering: GPAX  3.00, IELTS  6.0, Portfolio ( Programming, Math)"]},{name:"",shortName:"SIIE KMUTT",subtitle:"SIIE (School of International and Interdisciplinary Engineering)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/7/76/Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg/1200px-Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg.png",fallbackLogo:"https://placehold.co/60x60/F28500/FFFFFF?text=KMUTT&font=bold",gpax:" 3.00",requirements:"IELTS  5.5 / TOEFL",intake:"~150-200 ",fee:"~80,000 /",website:"https://www.eng.kmitl.ac.th/siie-international-programs/",websiteText:" SIIE KMUTT",recommendedMajors:["Computer Engineering (Inter): GPAX  3.00, IELTS  5.5, Portfolio"]},{name:"",shortName:"Inter KMITL",subtitle:"School of Engineering (International Programs)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/e/e4/Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg/1200px-Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg.png",fallbackLogo:"https://placehold.co/60x60/E36414/FFFFFF?text=KMITL&font=bold",gpax:" 3.00",requirements:"IELTS  5.5 / TOEFL",intake:"~100-150 ",fee:"~75,000 /",website:"https://oia.kmitl.ac.th/oia/international-programs/",websiteText:" Inter KMITL",recommendedMajors:["Robotics & AI Engineering (Inter): GPAX  3.00, IELTS  5.5, Portfolio"]}]},{faculty:" ()",icon:Lm,subtitle:" Portfolio ()",universities:[{name:"",shortName:" ",subtitle:" ",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",gpax:" 3.25-3.5 ()",intake:"~20-30 ",fee:"~21,000 /",website:"https://www.chula.ac.th/academic/faculty-of-science/",websiteText:" ",recommendedMajors:["AI & Machine Learning: GPAX  3.5, Portfolio ( AI/ML),  . ","Software Development: GPAX  3.25, Portfolio ( Application/Web)"]},{name:"",shortName:" ",subtitle:" ",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/5/51/Logo_ku_th.svg/1200px-Logo_ku_th.svg.png",fallbackLogo:"https://placehold.co/60x60/D4A017/FFFFFF?text=KU&font=bold",gpax:" 3.00 ()",intake:"~30-50 ",fee:"~17,000 /",website:"https://sci.ku.ac.th/web2024/",websiteText:" ",recommendedMajors:["Data Science: GPAX  3.00, Portfolio (), /","Game Development: GPAX  3.00, Portfolio (, Art, Story)"]},{name:"",shortName:". ",subtitle:"  ()",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/7/76/Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg/1200px-Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg.png",fallbackLogo:"https://placehold.co/60x60/F28500/FFFFFF?text=KMUTT&font=bold",gpax:" 3.00",requirements:"IELTS  5.5 / TOEFL iBT  61",intake:"~50 ",fee:"~40,000 /",website:"https://www.kmutt.ac.th/education/curriculum/faculty-of-science/",websiteText:" .",recommendedMajors:["Computer Science (English Program): ","AI & Data Analytics:    AI"]}]},{faculty:" (ICT)",icon:hs,subtitle:" Portfolio ()",universities:[{name:"",shortName:"ICT Mahidol",subtitle:" ICT ()",logo:"https://upload.wikimedia.org/wikipedia/commons/4/45/Mahidol_U.png",fallbackLogo:"https://placehold.co/60x60/1565C0/FFFFFF?text=MU&font=bold",gpax:" 3.00",requirements:"IELTS  6.0 / TOEFL iBT  64",intake:"~150-200 ",fee:"~60,000 /",website:"https://www.ict.mahidol.ac.th",websiteText:" ICT Mahidol",recommendedMajors:["Cybersecurity: GPAX  3.00, IELTS  6.0, Portfolio ()","Data Science (Track): GPAX  3.25, IELTS  6.0, Portfolio ( Data)"]},{name:"",shortName:"CEDT Chula",subtitle:" (CEDT - Inter)",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",gpax:" 3.50",requirements:"IELTS  6.5 / TOEFL iBT  80, SAT Math  700",intake:"~40-50 ",fee:"~110,000 /",website:"https://www.cp.eng.chula.ac.th/cedt",websiteText:" CEDT Chula",recommendedMajors:["Digital Technology & Innovation: GPAX  3.5, IELTS  6.5, SAT Math  700, Portfolio ()"]},{name:"",shortName:"IT KMITL",subtitle:" (IT KMITL)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/e/e4/Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg/1200px-Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg.png",fallbackLogo:"https://placehold.co/60x60/E36414/FFFFFF?text=KMITL&font=bold",gpax:" 2.75-3.00 ()",intake:"~100-200 ",fee:"~35,000 /",website:"https://www.it.kmitl.ac.th/th/program/",websiteText:" IT KMITL",recommendedMajors:[" (IT): GPAX  2.75, Portfolio"," (Data Science): GPAX  3.00, Portfolio"]}]}],a={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},i={type:"tween",ease:"anticipate",duration:.5},o=["from-blue-500 to-indigo-500","from-green-500 to-teal-500","from-purple-500 to-violet-500","from-orange-500 to-red-500"];return t.jsxs(A.div,{initial:"initial",animate:"in",exit:"out",variants:a,transition:i,className:"pt-24 pb-16 px-6",children:[t.jsxs(we,{children:[t.jsx("title",{children:" - Login Learning"}),t.jsx("meta",{name:"description",content:"  Portfolio ()"})]}),t.jsxs("section",{className:"pt-8 mb-12",children:[t.jsxs(A.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-center mb-10",children:[t.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-4",children:[" ",t.jsx("span",{className:"gradient-text",children:""})]}),t.jsx("p",{className:"text-xl text-gray-700 max-w-3xl mx-auto",children:" ( Portfolio )"})]}),n.map((l,d)=>t.jsxs(A.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:d*.1+.3},viewport:{once:!0},className:"mb-16",children:[t.jsxs("div",{className:`flex items-center mb-6 p-6 rounded-xl bg-gradient-to-r ${o[d%o.length]} shadow-lg`,children:[t.jsx(l.icon,{className:"w-10 h-10 text-white mr-4"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-white",children:l.faculty}),t.jsx("p",{className:"text-white/90 text-sm mt-1",children:l.subtitle})]})]}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:l.universities.map((c,u)=>{const h=`${d}-${u}`,m=s[h];return t.jsxs(A.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:u*.05},viewport:{once:!0},className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-200",children:[t.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("img",{className:"w-12 h-12 mr-4 rounded-full object-contain bg-white p-1 shadow-sm border-2 border-white",alt:` ${c.name}`,src:c.logo,onError:f=>{f.target.src=c.fallbackLogo}}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:c.shortName}),c.subtitle&&t.jsx("p",{className:"text-blue-600 text-sm font-medium",children:c.subtitle})]})]})}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"space-y-3 text-sm text-gray-700 mb-4",children:[c.gpax&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(lc,{className:"w-4 h-4 mr-3 text-blue-500"}),t.jsxs("span",{children:[t.jsx("strong",{children:"GPAX:"})," ",c.gpax]})]}),c.exams&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(hs,{className:"w-4 h-4 mr-3 text-green-500"}),t.jsxs("span",{children:[t.jsx("strong",{children:":"})," ",c.exams]})]}),c.requirements&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(Wr,{className:"w-4 h-4 mr-3 text-yellow-500"}),t.jsxs("span",{children:[t.jsx("strong",{children:":"})," ",c.requirements]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(de,{className:"w-4 h-4 mr-3 text-purple-500"}),t.jsxs("span",{children:[t.jsx("strong",{children:":"})," ",c.intake]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Cr,{className:"w-4 h-4 mr-3 text-red-500"}),t.jsxs("span",{children:[t.jsx("strong",{children:":"})," ",c.fee]})]})]}),c.recommendedMajors&&t.jsxs("div",{className:"mb-4",children:[t.jsxs("button",{onClick:()=>r(d,u),className:"flex items-center justify-between w-full p-3 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(ge,{className:"w-4 h-4 mr-2 text-indigo-600"}),t.jsx("span",{className:"text-sm font-medium text-indigo-800",children:""})]}),m?t.jsx(rc,{className:"w-4 h-4 text-indigo-600"}):t.jsx(sc,{className:"w-4 h-4 text-indigo-600"})]}),m&&t.jsxs(A.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"mt-3 p-4 bg-gray-50 rounded-lg",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:":"}),t.jsx("ul",{className:"space-y-2 text-xs text-gray-700",children:c.recommendedMajors.map((f,x)=>t.jsxs("li",{className:"flex items-start",children:[t.jsx("span",{className:"w-2 h-2 bg-indigo-400 rounded-full mt-1.5 mr-2 flex-shrink-0"}),t.jsx("span",{children:f})]},x))}),c.portfolioRounds&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:" Portfolio:"}),t.jsxs("div",{className:"text-xs text-gray-700 space-y-1",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(ce,{className:"w-3 h-3 mr-2 text-blue-500"}),t.jsxs("span",{children:[" 1 Portfolio: ",c.portfolioRounds]})]}),c.quotaRounds&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(ce,{className:"w-3 h-3 mr-2 text-green-500"}),t.jsxs("span",{children:[" 2 Quota: ",c.quotaRounds]})]}),c.admissionRounds&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(ce,{className:"w-3 h-3 mr-2 text-orange-500"}),t.jsxs("span",{children:[" 3 Admission: ",c.admissionRounds]})]})]})]})]})]}),c.website&&t.jsxs(E,{onClick:()=>window.open(c.website,"_blank","noopener,noreferrer"),className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white py-3 rounded-xl font-semibold transition-all duration-200 shadow-md hover:shadow-lg",children:[t.jsx(Tr,{className:"w-4 h-4 mr-2"}),c.websiteText]})]})]},u)})})]},d)),t.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5+n.length*.1},className:"mt-12 text-center p-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:""}),t.jsxs("p",{className:"text-gray-700 text-sm leading-relaxed max-w-4xl mx-auto",children:["  ",t.jsx("strong",{children:"TCAS"})," ",t.jsx("strong",{children:""}),""]}),t.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[t.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:"Portfolio"}),t.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"GPAX"}),t.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium",children:""}),t.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-medium",children:""})]})]})]})]})},wu=re.forwardRef(({className:s,...e},r)=>t.jsx("textarea",{className:ht("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...e}));wu.displayName="Textarea";const _w=()=>{const{toast:s}=se(),e={address:"917  75  , ",contacts:[{name:"",phone:"090-969-9578"},{name:"",phone:"083-436-0294"}],email:"info@loginlearning.com",lineGroup:"https://line.me/ti/g/TbTTLXEkRS"},r=[{name:"",address:" ,  10520"},{name:"",address:"400 . 75 ,  10700"},{name:"",address:"165/31   20110"},{name:"",address:"84/48   21000"}],n=o=>{o.preventDefault(),s({title:" ",description:"  "})},a={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},i={type:"tween",ease:"anticipate",duration:.5};return t.jsxs(A.div,{initial:"initial",animate:"in",exit:"out",variants:a,transition:i,className:"pt-24 pb-16 px-6",children:[t.jsxs(we,{children:[t.jsx("title",{children:" - Login Learning"}),t.jsx("meta",{name:"description",content:" Login Learning   "})]}),t.jsxs("section",{className:"pt-8 mb-12",children:[t.jsxs(A.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-center mb-10",children:[t.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-4",children:[" ",t.jsx("span",{className:"gradient-text",children:"Login Learning"})]}),t.jsx("p",{className:"text-xl text-gray-700 max-w-2xl mx-auto",children:"? ? ? !"})]}),t.jsxs("div",{className:"max-w-6xl mx-auto grid lg:grid-cols-2 gap-12",children:[t.jsxs(A.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.7,delay:.4},className:"glass-effect p-8 rounded-xl shadow-xl",children:[t.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-6",children:""}),t.jsxs("form",{onSubmit:n,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-800 mb-1",children:"-"}),t.jsx(fe,{type:"text",id:"name",placeholder:"  ",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-800 mb-1",children:""}),t.jsx(fe,{type:"email",id:"email",placeholder:" somchai.j@example.com",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-800 mb-1",children:""}),t.jsx(fe,{type:"text",id:"subject",placeholder:"  Arduino",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-800 mb-1",children:""}),t.jsx(wu,{id:"message",rows:"4",placeholder:"...",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),t.jsxs(E,{type:"submit",size:"lg",className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[t.jsx(Ma,{className:"w-5 h-5 mr-2"}),""]})]})]}),t.jsxs(A.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.7,delay:.6},className:"space-y-8",children:[t.jsxs("div",{className:"glass-effect p-8 rounded-xl shadow-xl",children:[t.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-6",children:""}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(us,{className:"w-6 h-6 text-blue-400 mt-1 shrink-0"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),t.jsx("p",{className:"text-gray-700",children:e.address})]})]}),t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx($t,{className:"w-6 h-6 text-green-400 mt-1 shrink-0"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),e.contacts.map(o=>t.jsxs("p",{className:"text-gray-700",children:[o.name,": ",o.phone]},o.name))]})]}),t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(ct,{className:"w-6 h-6 text-yellow-400 mt-1 shrink-0"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:""}),t.jsx("a",{href:`mailto:${e.email}`,className:"text-gray-700 hover:text-yellow-600 transition-colors",children:e.email})]})]}),t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(de,{className:"w-6 h-6 text-teal-400 mt-1 shrink-0"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Line Group"}),t.jsx("a",{href:e.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"text-gray-700 hover:text-teal-600 transition-colors underline",children:" Line"})]})]})]})]}),t.jsxs("div",{className:"glass-effect p-8 rounded-xl shadow-xl",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:""}),t.jsx("div",{className:"space-y-3",children:r.map(o=>t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx(us,{className:"w-5 h-5 text-purple-400 mt-1 shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-md font-medium text-gray-800",children:o.name}),t.jsx("p",{className:"text-sm text-gray-600",children:o.address})]})]},o.name))})]})]})]})]}),t.jsxs("section",{className:"mt-16",children:[t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.7,delay:.8},className:"text-center mb-6",children:t.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:""})}),t.jsx(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.7,delay:1},className:"glass-effect rounded-xl p-4 shadow-xl h-96 flex items-center justify-center",children:t.jsx("p",{className:"text-gray-700 text-lg",children:"  ! "})})]})]})},kw=()=>{const[s,e]=p.useState(""),[r,n]=p.useState(""),[a,i]=p.useState(!1),[o,l]=p.useState(""),{signInWithPassword:d,signInWithGoogle:c,isSupabaseConnected:u}=Le(),h=zr(),{toast:m}=se(),f=async v=>{if(v.preventDefault(),l(""),!u){m({title:"  Supabase",description:" Supabase ",variant:"destructive"});return}i(!0);const{error:b}=await d(s,r);i(!1),b?(l(b.message),m({title:"",description:b.message,variant:"destructive"})):(m({title:"!"}),h("/dashboard"))},x=async()=>{if(l(""),!u){m({title:"  Supabase",description:" Supabase  Google",variant:"destructive"});return}i(!0);const{error:v}=await c();i(!1),v&&(l(v.message),m({title:" Google ",description:v.message,variant:"destructive"}))},g={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},y={type:"tween",ease:"anticipate",duration:.5};return t.jsxs(A.div,{initial:"initial",animate:"in",exit:"out",variants:g,transition:y,className:"min-h-screen flex items-center justify-center pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:[t.jsxs(we,{children:[t.jsx("title",{children:" - Login Learning"}),t.jsx("meta",{name:"description",content:" Login Learning "})]}),t.jsxs("div",{className:"max-w-md w-full space-y-8 glass-effect p-10 rounded-xl shadow-2xl",children:[t.jsxs("div",{children:[t.jsx(A.h2,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mt-6 text-center text-4xl font-extrabold text-gray-900",children:""}),t.jsxs(A.p,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"mt-2 text-center text-sm text-gray-700",children:[""," ",t.jsx(te,{to:"/signup",className:"font-medium text-blue-400 hover:text-blue-300",children:""})]})]}),t.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[o&&t.jsxs(A.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 p-3 rounded-md flex items-center text-red-300 text-sm",children:[t.jsx(ye,{className:"w-5 h-5 mr-2"}),o]}),t.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[t.jsxs(A.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.3},children:[t.jsx("label",{htmlFor:"email-address",className:"sr-only",children:""}),t.jsxs("div",{className:"relative",children:[t.jsx(fe,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-t-md",placeholder:"",value:s,onChange:v=>e(v.target.value)}),t.jsx(ct,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),t.jsxs(A.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.4},children:[t.jsx("label",{htmlFor:"password",className:"sr-only",children:""}),t.jsxs("div",{className:"relative",children:[t.jsx(fe,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-b-md",placeholder:"",value:r,onChange:v=>n(v.target.value)}),t.jsx(Oe,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]})]}),t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},className:"flex items-center justify-between",children:t.jsx("div",{className:"text-sm",children:t.jsx("button",{onClick:()=>m({title:" "}),className:"font-medium text-blue-400 hover:text-blue-300",children:"?"})})}),t.jsx(A.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.6},children:t.jsxs(E,{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-gray-800 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:a||!u,children:[t.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:t.jsx(Gm,{className:"h-5 w-5 text-blue-300 group-hover:text-blue-200","aria-hidden":"true"})}),a?"...":""]})})]}),t.jsxs(A.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.7},className:"mt-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t border-gray-700"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"px-2 bg-gray-800 text-gray-400 rounded-md",children:""})})]}),t.jsx("div",{className:"mt-6",children:t.jsxs(E,{onClick:x,variant:"outline",className:"w-full flex justify-center py-3 px-4 border-gray-300 text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:a||!u,children:[t.jsx("svg",{className:"w-5 h-5 mr-2","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:t.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.7 512 244 512 110.3 512 0 401.7 0 265.2S110.3 18.3 244 18.3c67.4 0 120.9 24.8 160.4 60.3l-64.8 63.1c-20.1-18.9-48.4-30.8-89.3-30.8-70.1 0-128.2 57.2-128.2 128.2s58.1 128.2 128.2 128.2c80.3 0 110.1-58.8 113.8-87.9H244v-74.6h236.7c2.3 12.7 3.8 25.9 3.8 39.9z"})})," Google"]})})]}),!u&&t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-4 text-center text-yellow-400 text-sm p-3 bg-yellow-500/10 rounded-md",children:" Supabase !  Supabase  Login"})]})]})},Sw=()=>{const[s,e]=p.useState(""),[r,n]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState(""),[d,c]=p.useState(!1),[u,h]=p.useState(""),{signUpWithPassword:m,signInWithGoogle:f,isSupabaseConnected:x}=Le(),g=zr(),{toast:y}=se(),v=async j=>{if(j.preventDefault(),h(""),!x){y({title:"  Supabase",description:" Supabase ",variant:"destructive"});return}if(r!==a){h(""),y({title:"",description:"",variant:"destructive"});return}c(!0);const{error:T}=await m(s,r,o);c(!1),T?(h(T.message),y({title:"",description:T.message,variant:"destructive"})):(y({title:"!",description:""}),g("/login"))},b=async()=>{if(h(""),!x){y({title:"  Supabase",description:" Supabase  Google",variant:"destructive"});return}c(!0);const{error:j}=await f();c(!1),j&&(h(j.message),y({title:" Google ",description:j.message,variant:"destructive"}))},w={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},k={type:"tween",ease:"anticipate",duration:.5};return t.jsxs(A.div,{initial:"initial",animate:"in",exit:"out",variants:w,transition:k,className:"min-h-screen flex items-center justify-center pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:[t.jsxs(we,{children:[t.jsx("title",{children:" - Login Learning"}),t.jsx("meta",{name:"description",content:" Login Learning "})]}),t.jsxs("div",{className:"max-w-md w-full space-y-8 glass-effect p-10 rounded-xl shadow-2xl",children:[t.jsxs("div",{children:[t.jsx(A.h2,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mt-6 text-center text-4xl font-extrabold text-gray-900",children:""}),t.jsxs(A.p,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"mt-2 text-center text-sm text-gray-700",children:[""," ",t.jsx(te,{to:"/login",className:"font-medium text-blue-400 hover:text-blue-300",children:""})]})]}),t.jsxs("form",{className:"mt-8 space-y-6",onSubmit:v,children:[u&&t.jsxs(A.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 p-3 rounded-md flex items-center text-red-300 text-sm",children:[t.jsx(ye,{className:"w-5 h-5 mr-2"}),u]}),t.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[t.jsxs(A.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.3},children:[t.jsx("label",{htmlFor:"full-name",className:"sr-only",children:"-"}),t.jsxs("div",{className:"relative",children:[t.jsx(fe,{id:"full-name",name:"fullName",type:"text",autoComplete:"name",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"-",value:o,onChange:j=>l(j.target.value)}),t.jsx(dt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),t.jsxs(A.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.4},children:[t.jsx("label",{htmlFor:"email-address",className:"sr-only",children:""}),t.jsxs("div",{className:"relative",children:[t.jsx(fe,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"",value:s,onChange:j=>e(j.target.value)}),t.jsx(ct,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),t.jsxs(A.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.5},children:[t.jsx("label",{htmlFor:"password",className:"sr-only",children:""}),t.jsxs("div",{className:"relative",children:[t.jsx(fe,{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:" ( 6 )",value:r,onChange:j=>n(j.target.value)}),t.jsx(Oe,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),t.jsxs(A.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.6},children:[t.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:""}),t.jsxs("div",{className:"relative",children:[t.jsx(fe,{id:"confirm-password",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"",value:a,onChange:j=>i(j.target.value)}),t.jsx(Oe,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]})]}),t.jsx(A.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.7},children:t.jsxs(E,{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-gray-800 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:d||!x,children:[t.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:t.jsx(dc,{className:"h-5 w-5 text-blue-300 group-hover:text-blue-200","aria-hidden":"true"})}),d?"...":""]})})]}),t.jsxs(A.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.8},className:"mt-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t border-gray-700"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"px-2 bg-gray-800 text-gray-400 rounded-md",children:""})})]}),t.jsx("div",{className:"mt-6",children:t.jsxs(E,{onClick:b,variant:"outline",className:"w-full flex justify-center py-3 px-4 border-gray-300 text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:d||!x,children:[t.jsx("svg",{className:"w-5 h-5 mr-2","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:t.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.7 512 244 512 110.3 512 0 401.7 0 265.2S110.3 18.3 244 18.3c67.4 0 120.9 24.8 160.4 60.3l-64.8 63.1c-20.1-18.9-48.4-30.8-89.3-30.8-70.1 0-128.2 57.2-128.2 128.2s58.1 128.2 128.2 128.2c80.3 0 110.1-58.8 113.8-87.9H244v-74.6h236.7c2.3 12.7 3.8 25.9 3.8 39.9z"})})," Google"]})})]}),!x&&t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"mt-4 text-center text-yellow-400 text-sm p-3 bg-yellow-500/10 rounded-md",children:" Supabase !  Supabase "})]})]})},Cw=()=>{var l;const{user:s,isAdmin:e}=Le(),{toast:r}=se(),n=zr(),a=(d,c)=>{c?n(c):r({title:`  "${d}" `,description:" ! "})},i={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};if(!s)return t.jsx("div",{className:"min-h-screen flex items-center justify-center pt-24 pb-12 px-4",children:t.jsx("p",{className:"text-green-900 text-xl",children:"..."})});const o=[{name:"",icon:oe,color:"blue",description:"",path:"/courses"},{name:"",icon:cc,color:"green",description:"",path:"/profile"},{name:"",icon:Yl,color:"purple",description:"",path:null},{name:"",icon:Ql,color:"yellow",description:"",path:null},{name:"",icon:ys,color:"indigo",description:"",path:null}];return e&&o.push({name:"",icon:ac,color:"red",description:", , ",path:"/admin",gridSpan:"lg:col-span-2"}),t.jsxs(A.div,{initial:"initial",animate:"in",exit:"out",variants:i,className:"container mx-auto px-4 py-12",children:[t.jsxs(we,{children:[t.jsx("title",{children:" - Login Learning"}),t.jsx("meta",{name:"description",content:" Login Learning "})]}),t.jsxs("div",{className:"max-w-5xl mx-auto",children:[t.jsxs(A.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mb-10",children:[t.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-green-900",children:[", ",t.jsx("span",{className:"gradient-text",children:((l=s.user_metadata)==null?void 0:l.full_name)||s.email}),"!"]}),e&&t.jsx("p",{className:"text-yellow-400 text-md sm:text-lg mt-2",children:""})]}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map((d,c)=>t.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,delay:.15+c*.05},className:`glass-effect p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 ease-in-out transform hover:-translate-y-1 ${d.gridSpan||""}`,onClick:()=>a(d.name,d.path),children:[t.jsxs("div",{className:`flex items-center text-${d.color}-400 mb-3`,children:[t.jsx(d.icon,{className:"w-7 h-7 mr-3"}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-green-900",children:d.name})]}),t.jsx("p",{className:"text-green-700 text-sm mb-4",children:d.description}),t.jsx(E,{variant:"outline",className:`w-full border-${d.color}-500/60 text-${d.color}-400 hover:bg-${d.color}-500/20`,children:d.path?d.name===""?"":`${d.name}`:""})]},d.name))})]})]})},Tw=()=>{var f,x,g;const{user:s,isAdmin:e}=Le(),{toast:r}=se(),[n,a]=re.useState(!1),[i,o]=re.useState(((f=s==null?void 0:s.user_metadata)==null?void 0:f.full_name)||""),[l,d]=re.useState((s==null?void 0:s.email)||""),c=()=>{r({title:" ",description:"! "}),a(!1)},u=y=>{r({title:`  "${y}" `,description:" ! "})},h={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},m={type:"tween",ease:"anticipate",duration:.5};return s?t.jsxs(A.div,{initial:"initial",animate:"in",exit:"out",variants:h,transition:m,className:"container mx-auto px-4 py-12",children:[t.jsxs(we,{children:[t.jsx("title",{children:" - Login Learning"}),t.jsx("meta",{name:"description",content:" Login Learning"})]}),t.jsxs(A.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mb-10 text-center",children:[t.jsxs("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900",children:[" ",t.jsx("span",{className:"gradient-text",children:((x=s.user_metadata)==null?void 0:x.full_name)||s.email})]}),e&&t.jsx("p",{className:"text-yellow-400 mt-2",children:": "})]}),t.jsxs("div",{className:"max-w-2xl mx-auto glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:""}),t.jsxs(E,{variant:"outline",onClick:()=>a(!n),className:"text-gray-700 border-gray-400 hover:bg-gray-100 hover:text-gray-900",children:[t.jsx(hs,{className:"w-4 h-4 mr-2"}),n?"":""]})]}),n?t.jsxs("form",{onSubmit:y=>{y.preventDefault(),c()},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"-"}),t.jsxs("div",{className:"relative",children:[t.jsx(dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),t.jsx(fe,{id:"fullName",type:"text",value:i,onChange:y=>o(y.target.value),className:"pl-10 bg-white border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-200"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),t.jsxs("div",{className:"relative",children:[t.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),t.jsx(fe,{id:"email",type:"email",value:l,onChange:y=>d(y.target.value),disabled:!0,className:"pl-10 bg-gray-100 border-gray-300 text-gray-600 cursor-not-allowed"})]}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:""})]}),t.jsx(E,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:""})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(dt,{className:"w-5 h-5 mr-3 text-[#667eea]"}),t.jsxs("span",{className:"text-gray-800",children:["-: ",((g=s.user_metadata)==null?void 0:g.full_name)||""]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(ct,{className:"w-5 h-5 mr-3 text-[#667eea]"}),t.jsxs("span",{className:"text-gray-800",children:[": ",s.email]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(af,{className:"w-5 h-5 mr-3 text-[#667eea]"}),t.jsx("span",{className:"text-gray-800",children:": "})]})]})]}),t.jsxs("div",{className:"max-w-2xl mx-auto mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-effect p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>u(""),children:[t.jsxs("div",{className:"flex items-center text-blue-300 mb-3",children:[t.jsx(oe,{className:"w-7 h-7 mr-3"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""})]}),t.jsx("p",{className:"text-gray-700 text-sm",children:""})]}),t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-effect p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>u(""),children:[t.jsxs("div",{className:"flex items-center text-green-300 mb-3",children:[t.jsx(Yl,{className:"w-7 h-7 mr-3"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:""})]}),t.jsx("p",{className:"text-gray-700 text-sm",children:""})]})]})]}):t.jsx("div",{className:"text-center py-10",children:"..."})},Ew=({isOpen:s,onClose:e})=>{const[r,n]=p.useState([]),[a,i]=p.useState(!1),o=p.useMemo(()=>[{name:"Supabase Connection",test:async()=>{if(!C)throw new Error("Supabase client not initialized");const{error:u}=await C.from("courses").select("count").limit(1);if(u)throw u;return"Connected successfully"}},{name:"Courses Table Access",test:async()=>{const{data:u,error:h}=await C.from("courses").select("id, title, is_active").limit(1);if(h)throw h;return`Found ${(u==null?void 0:u.length)||0} courses (limited to 1)`}},{name:"User Authentication",test:async()=>{const{data:{user:u},error:h}=await C.auth.getUser();if(h)throw h;return u?`Authenticated as: ${u.email}`:"Not authenticated"}},{name:"RLS Policies Check",test:async()=>{const{data:u,error:h}=await C.from("courses").select("id, title").eq("is_active",!0).limit(1);if(h)throw new Error(`RLS Error: ${h.message}`);return`RLS working, can access ${(u==null?void 0:u.length)||0} active courses`}},{name:"Enrollments Table Access",test:async()=>{const{error:u}=await C.from("enrollments").select("count").limit(1);if(u)throw u;return"Enrollments table accessible"}},{name:"Storage Access",test:async()=>{const{data:u,error:h}=await C.storage.listBuckets();if(h)throw h;return u.find(f=>f.name==="course-files")?"Storage buckets accessible":"course-files bucket not found"}}],[]),l=p.useCallback(async()=>{i(!0);const u=[];for(const h of o)try{const m=await h.test();u.push({name:h.name,status:"success",message:m})}catch(m){u.push({name:h.name,status:"error",message:m.message})}n(u),i(!1)},[o]);p.useEffect(()=>{s&&l()},[s,l]);const d=u=>{switch(u){case"success":return t.jsx(Pe,{className:"w-5 h-5 text-green-400"});case"error":return t.jsx(Ws,{className:"w-5 h-5 text-red-400"});case"warning":return t.jsx(jt,{className:"w-5 h-5 text-yellow-400"});default:return t.jsx(La,{className:"w-5 h-5 text-slate-400"})}},c=async()=>{console.log("Attempting to fix common issues...");try{await C.auth.refreshSession(),console.log("Session refreshed")}catch(u){console.error("Failed to refresh session:",u)}l()};return s?t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:t.jsxs(A.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"glass-effect p-6 rounded-xl w-full max-w-2xl max-h-[80vh] overflow-y-auto",onClick:u=>u.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center",children:[t.jsx(Aa,{className:"w-6 h-6 mr-2 text-[#667eea]"}),"Database Health Check"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(E,{variant:"outline",size:"sm",onClick:l,disabled:a,children:[t.jsx(oc,{className:`w-4 h-4 mr-1 ${a?"animate-spin":""}`}),"Refresh"]}),t.jsx(E,{variant:"ghost",size:"sm",onClick:e,children:""})]})]}),a&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#667eea] mx-auto mb-4"}),t.jsx("p",{className:"text-slate-400",children:"Running health checks..."})]}),!a&&r.length>0&&t.jsxs("div",{className:"space-y-4",children:[r.map((u,h)=>t.jsxs(A.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.1},className:`
                  p-4 rounded-lg border-2 transition-colors
                  ${u.status==="success"?"border-green-500/30 bg-green-500/10":u.status==="error"?"border-red-500/30 bg-red-500/10":"border-yellow-500/30 bg-yellow-500/10"}
                `,children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex items-center",children:[d(u.status),t.jsx("h3",{className:"font-medium text-white ml-3",children:u.name})]})}),t.jsx("p",{className:`
                  text-sm mt-2 ml-8
                  ${u.status==="success"?"text-green-300":u.status==="error"?"text-red-300":"text-yellow-300"}
                `,children:u.message})]},u.name)),t.jsxs("div",{className:"mt-6 p-4 bg-slate-800/50 rounded-lg",children:[t.jsx("h3",{className:"font-medium text-white mb-2",children:"Summary"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-green-400",children:r.filter(u=>u.status==="success").length}),t.jsx("div",{className:"text-sm text-slate-400",children:"Passed"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:r.filter(u=>u.status==="warning").length}),t.jsx("div",{className:"text-sm text-slate-400",children:"Warnings"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-red-400",children:r.filter(u=>u.status==="error").length}),t.jsx("div",{className:"text-sm text-slate-400",children:"Failed"})]})]})]}),r.some(u=>u.status==="error")&&t.jsx("div",{className:"mt-6 flex justify-center",children:t.jsx(E,{onClick:c,className:"bg-[#667eea] hover:bg-[#5a6fcf]",children:"Try Auto-Fix"})}),t.jsxs("div",{className:"mt-6 p-4 bg-slate-700/30 rounded-lg",children:[t.jsx("h3",{className:"font-medium text-white mb-2",children:"Troubleshooting Tips"}),t.jsxs("ul",{className:"text-sm text-slate-400 space-y-1",children:[t.jsx("li",{children:" Check if your internet connection is stable"}),t.jsx("li",{children:" Verify Supabase project is active and not paused"}),t.jsx("li",{children:" Ensure RLS policies allow public access to courses table"}),t.jsx("li",{children:" Check if any recent schema changes broke compatibility"}),t.jsx("li",{children:" Verify storage buckets are properly configured"})]})]})]})]})}):null},Pw=()=>{const{user:s}=Le(),{toast:e}=se(),[r,n]=p.useState(!1),a=[{name:"",icon:de,path:"/admin/users",color:"sky"},{name:"",icon:Sr,path:"/admin/courses",color:"lime"},{name:"",icon:Y,path:"#",color:"indigo",disabled:!0},{name:"",icon:ys,path:"#",color:"fuchsia",disabled:!0},{name:"",icon:Zl,path:"#",color:"orange",disabled:!0},{name:"",icon:Cr,path:"#",color:"emerald",disabled:!0}],i=(l,d)=>{d&&e({title:`  "${l}" `,description:" ! "})},o={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};return t.jsxs(A.div,{initial:"initial",animate:"in",exit:"out",variants:o,className:"container mx-auto px-4 py-12",children:[t.jsxs(we,{children:[t.jsx("title",{children:" - Login Learning"}),t.jsx("meta",{name:"description",content:" Login Learning"})]}),t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs(A.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mb-10 flex flex-col sm:flex-row justify-between items-center",children:[t.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4 sm:mb-0",children:t.jsx("span",{className:"gradient-text",children:""})}),t.jsxs("div",{className:"flex items-center space-x-2 text-purple-800 p-2 bg-purple-800/30 rounded-lg border border-purple-600/50",children:[t.jsx(rf,{className:"w-5 h-5 sm:w-6 sm:h-6"}),t.jsx("span",{className:"text-sm sm:text-base",children:""})]})]}),t.jsxs("p",{className:"text-purple-800 mb-4 text-base sm:text-lg",children:[", ",s==null?void 0:s.email,".   Login Learning "]}),t.jsx("div",{className:"mb-8 flex flex-wrap gap-3",children:t.jsxs(E,{onClick:()=>n(!0),variant:"outline",className:"border-red-500/60 text-red-800 hover:bg-red-500/20",children:[t.jsx(Aa,{className:"w-4 h-4 mr-2"}),""]})}),t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((l,d)=>t.jsx(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,delay:.15+d*.05},children:t.jsxs(te,{to:l.disabled?"#":l.path,onClick:()=>i(l.name,l.disabled),className:`block glass-effect p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 ease-in-out transform hover:-translate-y-1
                  ${l.disabled?"opacity-60 cursor-not-allowed":`hover:border-${l.color}-500/50 border-transparent border`}
                `,children:[t.jsxs("div",{className:`flex items-center text-${l.color}-400 mb-3`,children:[t.jsx(l.icon,{className:"w-7 h-7 mr-3"}),t.jsx("h2",{className:"text-xl font-semibold text-purple-900",children:l.name})]}),t.jsx("p",{className:"text-purple-700 text-sm mb-4",children:l.name===""?", , ":l.name===""?", , ":l.name===""?" ":l.name===""?"":l.name===""?"":l.name===""?"":""}),t.jsxs(E,{variant:"outline",className:`w-full border-${l.color}-500/60 text-${l.color}-800 hover:bg-${l.color}-500/20 
                    ${l.disabled?"pointer-events-none":""}
                  `,disabled:l.disabled,children:["",l.name]})]})},l.name))})]}),t.jsx(Ew,{isOpen:r,onClose:()=>n(!1)})]})},Aw=[{id:"1",name:" ",email:"student1@example.com",role:"Student",joined:"2024-01-15"},{id:"2",name:" ",email:"instructor@example.com",role:"Instructor",joined:"2023-11-20"},{id:"3",name:" ",email:"branchmanager@example.com",role:"Branch Manager",joined:"2023-09-01"}],Lw=()=>{const{toast:s}=se(),[e,r]=re.useState(""),[n]=re.useState(Aw),a=l=>{s({title:`  "${l}" `,description:" ! "})},i=n.filter(l=>l.name.toLowerCase().includes(e.toLowerCase())||l.email.toLowerCase().includes(e.toLowerCase())),o={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};return t.jsxs(A.div,{initial:"initial",animate:"in",exit:"out",variants:o,className:"container mx-auto px-4 py-12",children:[t.jsxs(we,{children:[t.jsx("title",{children:" -  Login Learning"}),t.jsx("meta",{name:"description",content:" Login Learning"})]}),t.jsxs(A.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"flex flex-col sm:flex-row justify-between items-center mb-10",children:[t.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-teal-900 mb-4 sm:mb-0",children:[t.jsx(de,{className:"inline-block w-8 h-8 mr-3 text-[#667eea]"}),""]}),t.jsxs(E,{onClick:()=>a(""),className:"bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-gray-800",children:[t.jsx(dc,{className:"w-5 h-5 mr-2"}),""]})]}),t.jsx("div",{className:"mb-6 glass-effect p-4 rounded-xl",children:t.jsxs("div",{className:"relative",children:[t.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(fe,{type:"text",placeholder:" (, )...",value:e,onChange:l=>r(l.target.value),className:"pl-10 w-full bg-slate-200 border-slate-400 text-gray-900 focus:border-[#667eea]"})]})}),t.jsxs("div",{className:"glass-effect rounded-xl shadow-xl overflow-x-auto",children:[t.jsxs("table",{className:"w-full min-w-max text-left text-teal-800",children:[t.jsx("thead",{className:"border-b border-slate-700",children:t.jsxs("tr",{className:"bg-teal-100/30",children:[t.jsx("th",{className:"p-4",children:"-"}),t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4 text-center",children:""})]})}),t.jsx("tbody",{children:i.map((l,d)=>t.jsxs(A.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:d*.05},className:"border-b border-slate-700/50 hover:bg-slate-700/20 transition-colors",children:[t.jsx("td",{className:"p-4",children:l.name}),t.jsx("td",{className:"p-4",children:l.email}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${l.role==="Admin"?"bg-red-500/30 text-red-300":l.role==="Instructor"?"bg-blue-500/30 text-blue-300":l.role==="Branch Manager"?"bg-purple-500/30 text-purple-300":"bg-green-500/30 text-green-300"}`,children:l.role})}),t.jsx("td",{className:"p-4",children:l.joined}),t.jsxs("td",{className:"p-4 text-center space-x-2",children:[t.jsx(E,{variant:"ghost",size:"icon",onClick:()=>a(` ${l.name}`),className:"text-blue-400 hover:bg-blue-500/20",children:t.jsx(Ra,{className:"w-4 h-4"})}),t.jsx(E,{variant:"ghost",size:"icon",onClick:()=>a(` ${l.name}`),className:"text-red-400 hover:bg-red-500/20",children:t.jsx(Ye,{className:"w-4 h-4"})})]})]},l.id))})]}),i.length===0&&t.jsx("p",{className:"text-center p-6 text-teal-700",children:""})]})]})},Rw=({isOpen:s,onClose:e,onSuccess:r})=>{const{toast:n}=se(),[a,i]=p.useState(!1),[o,l]=p.useState({title:"",description:"",category:"",difficulty_level:"beginner",duration_hours:0,price:0,instructor_name:"",instructor_email:"",max_students:50,is_active:!0,image_url:""}),[d,c]=p.useState({}),[u,h]=p.useState(null),[m,f]=p.useState(!1),[x,g]=p.useState(null),y=N=>{const{name:_,value:P,type:$}=N.target;l(G=>({...G,[_]:$==="number"?parseFloat(P)||0:P})),d[_]&&c(G=>({...G,[_]:""}))},v=()=>{const N={};return o.title.trim()||(N.title=""),o.description.trim()||(N.description=""),o.category.trim()||(N.category=""),o.instructor_name.trim()||(N.instructor_name=""),o.duration_hours<=0&&(N.duration_hours=" 0 "),o.price<0&&(N.price=""),o.max_students<=0&&(N.max_students=" 0"),c(N),Object.keys(N).length===0},b=async N=>{if(N.preventDefault(),!v()){n({title:"",description:"",variant:"destructive"});return}i(!0);try{let _={...o};if(u){f(!0);const{data:G,error:U}=await wv(u);if(U)throw new Error(`: ${U.message}`);_.image_url=G.publicUrl,f(!1)}const{data:P,error:$}=await dv(_);if($)throw $;n({title:"! ",description:` "${o.title}" `}),l({title:"",description:"",category:"",difficulty_level:"beginner",duration_hours:0,price:0,instructor_name:"",instructor_email:"",max_students:50,is_active:!0,image_url:""}),h(null),g(null),r&&r(P),e()}catch(_){console.error("Error creating course:",_),n({title:"",description:_.message,variant:"destructive"})}finally{i(!1),f(!1)}},w=N=>{const _=N.target.files[0];if(!_)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(_.type)){n({title:"",description:" (JPG, PNG, WebP )",variant:"destructive"});return}if(_.size>5*1024*1024){n({title:"",description:" 5MB",variant:"destructive"});return}h(_);const $=new FileReader;$.onload=G=>{g(G.target.result)},$.readAsDataURL(_)},k=()=>{h(null),g(null);const N=document.getElementById("cover-image");N&&(N.value="")},j=["Electronics","Civil Engineering","Energy","Software","Design","Robotics","Mechanical","Chemical","Environmental"],T=[{value:"beginner",label:""},{value:"intermediate",label:""},{value:"advanced",label:""}];return s?t.jsx(be,{children:t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:t.jsxs(A.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:"bg-white shadow-2xl rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-gray-200",onClick:N=>N.stopPropagation(),children:[t.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-8 rounded-t-2xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:t.jsx(oe,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-white",children:""}),t.jsx("p",{className:"text-indigo-100 mt-1",children:""})]})]}),t.jsx(E,{variant:"ghost",size:"icon",onClick:e,disabled:a,className:"text-white hover:bg-white/20 rounded-xl",children:t.jsx(tt,{className:"w-6 h-6"})})]})}),t.jsx("div",{className:"p-8",children:t.jsxs("form",{onSubmit:b,className:"space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:t.jsx(oe,{className:"w-4 h-4 text-white"})})," *"]}),t.jsx(fe,{name:"title",value:o.title,onChange:y,placeholder:" Arduino Automation Systems",className:"bg-white border-gray-300 text-gray-800 text-lg h-12 focus:border-blue-500 focus:ring-blue-500 rounded-xl shadow-sm",error:d.title}),d.title&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ye,{className:"w-4 h-4 mr-2"}),d.title]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-green-500 p-2 rounded-lg mr-3",children:t.jsx(Y,{className:"w-4 h-4 text-white"})})," *"]}),t.jsx("textarea",{name:"description",value:o.description,onChange:y,placeholder:"...",rows:4,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-200 text-base shadow-sm resize-none"}),d.description&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ye,{className:"w-4 h-4 mr-2"}),d.description]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-6 rounded-xl border border-purple-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:t.jsx(df,{className:"w-4 h-4 text-white"})})," *"]}),t.jsxs("select",{name:"category",value:o.category,onChange:y,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 h-12 shadow-sm",children:[t.jsx("option",{value:"",children:""}),j.map(N=>t.jsx("option",{value:N,children:N},N))]}),d.category&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ye,{className:"w-4 h-4 mr-2"}),d.category]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 p-6 rounded-xl border border-amber-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-amber-500 p-2 rounded-lg mr-3",children:t.jsx(de,{className:"w-4 h-4 text-white"})}),""]}),t.jsx("select",{name:"difficulty_level",value:o.difficulty_level,onChange:y,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12 shadow-sm",children:T.map(N=>t.jsx("option",{value:N.value,children:N.label},N.value))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 p-6 rounded-xl border border-cyan-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-cyan-500 p-2 rounded-lg mr-3",children:t.jsx(ce,{className:"w-4 h-4 text-white"})})," () *"]}),t.jsxs("div",{className:"relative",children:[t.jsx(ce,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(fe,{type:"number",name:"duration_hours",value:o.duration_hours,onChange:y,placeholder:"40",min:"0",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 rounded-xl shadow-sm text-lg"})]}),d.duration_hours&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ye,{className:"w-4 h-4 mr-2"}),d.duration_hours]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 p-6 rounded-xl border border-emerald-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-emerald-500 p-2 rounded-lg mr-3",children:t.jsx(Cr,{className:"w-4 h-4 text-white"})})," ()"]}),t.jsxs("div",{className:"relative",children:[t.jsx(Cr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(fe,{type:"number",name:"price",value:o.price,onChange:y,placeholder:"2500",min:"0",step:"0.01",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 rounded-xl shadow-sm text-lg"})]}),d.price&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ye,{className:"w-4 h-4 mr-2"}),d.price]})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 p-6 rounded-xl border border-indigo-200",children:[t.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[t.jsx("div",{className:"bg-indigo-500 p-2 rounded-lg mr-3",children:t.jsx(de,{className:"w-5 h-5 text-white"})}),""]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:" *"}),t.jsx(fe,{name:"instructor_name",value:o.instructor_name,onChange:y,placeholder:"",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 rounded-xl shadow-sm"}),d.instructor_name&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ye,{className:"w-4 h-4 mr-2"}),d.instructor_name]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:""}),t.jsx(fe,{type:"email",name:"instructor_email",value:o.instructor_email,onChange:y,placeholder:"teacher@loginlearning.com",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 rounded-xl shadow-sm"})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-rose-50 to-pink-50 p-6 rounded-xl border border-rose-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[t.jsx("div",{className:"bg-rose-500 p-2 rounded-lg mr-3",children:t.jsx(de,{className:"w-4 h-4 text-white"})})," *"]}),t.jsxs("div",{className:"relative max-w-xs",children:[t.jsx(de,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(fe,{type:"number",name:"max_students",value:o.max_students,onChange:y,placeholder:"50",min:"1",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-rose-500 focus:ring-2 focus:ring-rose-200 rounded-xl shadow-sm text-lg"})]}),d.max_students&&t.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[t.jsx(ye,{className:"w-4 h-4 mr-2"}),d.max_students]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 p-6 rounded-xl border border-teal-200",children:[t.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[t.jsx("div",{className:"bg-teal-500 p-2 rounded-lg mr-3",children:t.jsx(qs,{className:"w-4 h-4 text-white"})}),""]}),t.jsxs("div",{className:"space-y-4",children:[x&&t.jsxs("div",{className:"relative inline-block",children:[t.jsx("img",{src:x,alt:"Course cover preview",className:"w-48 h-32 object-cover rounded-xl border-2 border-gray-200 shadow-lg"}),t.jsx(E,{type:"button",variant:"ghost",size:"icon",onClick:k,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg",children:t.jsx(Ye,{className:"w-4 h-4"})})]}),!x&&t.jsxs("div",{className:"border-2 border-dashed border-teal-300 rounded-xl p-8 text-center hover:border-teal-400 transition-colors bg-white/50",children:[t.jsx("input",{type:"file",id:"cover-image",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:w,className:"hidden",disabled:m}),t.jsxs("label",{htmlFor:"cover-image",className:"cursor-pointer flex flex-col items-center space-y-3",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-400 to-cyan-500 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx(qs,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-800 font-semibold text-lg",children:""}),t.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"JPG, PNG, WebP  5MB"}),t.jsx("p",{className:"text-teal-600 text-xs mt-2 font-medium",children:""})]})]})]}),m&&t.jsxs("div",{className:"flex items-center justify-center space-x-3 bg-blue-50 p-4 rounded-xl",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),t.jsx("span",{className:"text-blue-700 font-medium",children:"..."})]})]})]}),t.jsxs("div",{className:"flex justify-center space-x-4 pt-8",children:[t.jsx(E,{type:"button",variant:"outline",onClick:e,disabled:a,className:"px-8 py-3 text-gray-600 border-gray-300 hover:bg-gray-50 rounded-xl font-medium text-lg h-14 min-w-[120px]",children:""}),t.jsx(E,{type:"submit",disabled:a||m,className:"px-12 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg h-14 min-w-[160px] shadow-lg hover:shadow-xl transition-all duration-200",children:a||m?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),m?"...":"..."]}):t.jsxs(t.Fragment,{children:[t.jsx(gs,{className:"w-5 h-5 mr-3"}),""]})})]})]})})]})})}):null},Mw=()=>{const{toast:s}=se(),[e,r]=p.useState(""),[n,a]=p.useState([]),[i,o]=p.useState(!0),[l,d]=p.useState(null),[c,u]=p.useState(!1),h=p.useCallback(async()=>{o(!0);const{data:b,error:w}=await hv();w?s({title:"",description:w.message,variant:"destructive"}):a(b||[]),o(!1)},[s]),m=p.useCallback(async()=>{const{data:b,error:w}=await mv();!w&&b&&d(b)},[]);p.useEffect(()=>{h(),m()},[h,m]);const f=async(b,w,k)=>{const j=!k,T=j?"":"";if(!confirm(`${T} "${w}"?`))return;const{error:N}=await uv(b,j);N?s({title:`${T}`,description:N.message,variant:"destructive"}):(s({title:`${T}`,description:` "${w}" ${T}`}),h(),m())},x=()=>{h(),m()},g=b=>{s({title:"",description:`${b} `,variant:"info"})},y=n.filter(b=>b.title.toLowerCase().includes(e.toLowerCase())||b.category.toLowerCase().includes(e.toLowerCase())),v={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};return t.jsxs(A.div,{initial:"initial",animate:"in",exit:"out",variants:v,className:"container mx-auto px-4 py-12",children:[t.jsxs(we,{children:[t.jsx("title",{children:" -  Login Learning"}),t.jsx("meta",{name:"description",content:" Login Learning"})]}),t.jsxs(A.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"flex flex-col sm:flex-row justify-between items-center mb-10",children:[t.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-purple-900 mb-4 sm:mb-0",children:[t.jsx(Sr,{className:"inline-block w-8 h-8 mr-3 text-[#667eea]"}),""]}),t.jsxs(E,{onClick:()=>u(!0),className:"bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-white-800",children:[t.jsx(Jm,{className:"w-5 h-5 mr-2"}),""]})]}),l&&t.jsxs(A.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"glass-effect p-6 rounded-xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-700 text-sm",children:""}),t.jsx("p",{className:"text-2xl font-bold text-purple-900",children:l.totalCourses})]}),t.jsx(Sr,{className:"w-8 h-8 text-[#667eea]"})]})}),t.jsx("div",{className:"glass-effect p-6 rounded-xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-700 text-sm",children:""}),t.jsx("p",{className:"text-2xl font-bold text-purple-900",children:l.totalEnrollments})]}),t.jsx(de,{className:"w-8 h-8 text-green-400"})]})}),t.jsx("div",{className:"glass-effect p-6 rounded-xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-700 text-sm",children:""}),t.jsx("p",{className:"text-2xl font-bold text-purple-900",children:l.activeEnrollments})]}),t.jsx(Zl,{className:"w-8 h-8 text-blue-400"})]})}),t.jsx("div",{className:"glass-effect p-6 rounded-xl",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-purple-700 text-sm",children:""}),t.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[l.completionRate,"%"]})]}),t.jsx(ze,{className:"w-8 h-8 text-purple-400"})]})})]}),t.jsx("div",{className:"mb-6 glass-effect p-4 rounded-xl",children:t.jsxs("div",{className:"relative",children:[t.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx(fe,{type:"text",placeholder:" (, )...",value:e,onChange:b=>r(b.target.value),className:"pl-10 w-full bg-slate-200 border-slate-400 text-gray-900 focus:border-[#667eea]"})]})}),t.jsxs("div",{className:"glass-effect rounded-xl shadow-xl overflow-x-auto",children:[i?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#667eea] mx-auto mb-4"}),t.jsx("p",{className:"text-purple-700",children:"..."})]}):t.jsxs("table",{className:"w-full min-w-max text-left text-purple-800",children:[t.jsx("thead",{className:"border-b border-slate-700",children:t.jsxs("tr",{className:"bg-purple-100/30",children:[t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4",children:""}),t.jsx("th",{className:"p-4 text-center",children:""})]})}),t.jsx("tbody",{children:y.map((b,w)=>t.jsxs(A.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:w*.05},className:"border-b border-slate-700/50 hover:bg-slate-700/20 transition-colors",children:[t.jsx("td",{className:"p-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-purple-900",children:b.title}),t.jsx("p",{className:"text-sm text-purple-700 truncate max-w-xs",children:b.description||""})]})}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-500/30 text-blue-300",children:b.category||""})}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(de,{className:"w-4 h-4 mr-1 text-purple-700"}),b.enrollment_count||0]})}),t.jsxs("td",{className:"p-4",children:[b.duration_hours||0," "]}),t.jsx("td",{className:"p-4",children:b.price?`${b.price.toLocaleString()}`:""}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b.is_active?"bg-green-500/30 text-green-300":"bg-red-500/30 text-red-300"}`,children:b.is_active?"":""})}),t.jsx("td",{className:"p-4",children:new Date(b.created_at).toLocaleDateString("th-TH")}),t.jsxs("td",{className:"p-4 text-center space-x-2",children:[t.jsx(te,{to:`/admin/courses/${b.id}/content`,children:t.jsx(E,{variant:"ghost",size:"icon",className:"text-green-400 hover:bg-green-500/20",title:"",children:t.jsx(Y,{className:"w-4 h-4"})})}),t.jsx(E,{variant:"ghost",size:"icon",onClick:()=>g(` ${b.title}`),className:"text-blue-400 hover:bg-blue-500/20",title:"",children:t.jsx(Ra,{className:"w-4 h-4"})}),t.jsx(E,{variant:"ghost",size:"icon",onClick:()=>f(b.id,b.title,b.is_active),className:b.is_active?"text-orange-400 hover:bg-orange-500/20":"text-green-400 hover:bg-green-500/20",title:b.is_active?"":"",children:b.is_active?t.jsx(Ym,{className:"w-4 h-4"}):t.jsx(Zm,{className:"w-4 h-4"})}),!b.is_active&&t.jsx(E,{variant:"ghost",size:"icon",onClick:()=>g(` ${b.title}`),className:"text-red-400 hover:bg-red-500/20",title:"",children:t.jsx(Ye,{className:"w-4 h-4"})})]})]},b.id))})]}),!i&&y.length===0&&t.jsxs("div",{className:"text-center p-8",children:[t.jsx(jt,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),t.jsx("p",{className:"text-purple-700 text-lg",children:""}),t.jsx("p",{className:"text-purple-600 text-sm mt-2",children:""})]})]}),t.jsx(Rw,{isOpen:c,onClose:()=>u(!1),onSuccess:x})]})},Iw=async s=>{try{const{data:{user:e},error:r}=await C.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n,error:a}=await C.from("course_content").insert([{...s,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(a)throw a;return{data:n,error:null}}catch(e){return console.error("Error creating content:",e),{data:null,error:e}}},Ow=async(s,e)=>{try{const{data:{user:r},error:n}=await C.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:a,error:i}=await C.from("course_content").update({...e,updated_at:new Date().toISOString()}).eq("id",s).select().single();if(i)throw i;return{data:a,error:null}}catch(r){return console.error("Error updating content:",r),{data:null,error:r}}},Dw=async s=>{try{const{data:{user:e},error:r}=await C.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n}=await C.from("quizzes").select("id").eq("content_id",s),{data:a}=await C.from("assignments").select("id").eq("content_id",s);if(n&&n.length>0){for(const o of n)await C.from("quiz_attempts").delete().eq("quiz_id",o.id);await C.from("quizzes").delete().eq("content_id",s)}if(a&&a.length>0){for(const o of a)await C.from("assignment_submissions").delete().eq("assignment_id",o.id);await C.from("assignments").delete().eq("content_id",s)}await C.from("video_progress").delete().eq("content_id",s);const{error:i}=await C.from("course_content").delete().eq("id",s);if(i)throw i;return{error:null}}catch(e){return console.error("Error deleting content:",e),{error:e}}},$w=s=>{var r;const e=[];if((r=s.title)!=null&&r.trim()||e.push(""),s.content_type||e.push(""),s.duration_minutes<0&&e.push(""),s.content_url&&s.content_url.trim()&&(s.content_type==="video"||s.content_type==="document"))try{new URL(s.content_url)}catch{e.push(" URL ")}return{isValid:e.length===0,errors:e}},Fw=()=>[{name:"",content_type:"video",title:" X: ",description:"...",duration_minutes:15},{name:"",content_type:"quiz",title:" X",description:"",duration_minutes:10},{name:"",content_type:"assignment",title:" X",description:"",duration_minutes:60},{name:"",content_type:"document",title:"",description:" PDF ",duration_minutes:0}],Uw=({contentId:s,initialQuiz:e,onSave:r})=>{const{toast:n}=se(),[a,i]=p.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",instructions:(e==null?void 0:e.instructions)||"",time_limit:(e==null?void 0:e.time_limit)||0,max_attempts:(e==null?void 0:e.max_attempts)||3,passing_score:(e==null?void 0:e.passing_score)||70,show_correct_answers:(e==null?void 0:e.show_correct_answers)??!0,randomize_questions:(e==null?void 0:e.randomize_questions)??!1,questions:(e==null?void 0:e.questions)||[]}),[o,l]=p.useState(null),[d,c]=p.useState(!1),u=()=>{const v=iw(a);if(!v.isValid){n({title:"",description:v.errors.join(`
`),variant:"destructive"});return}r(a)},h=()=>{l({id:Date.now().toString(),type:"multiple_choice",question:"",options:["","","",""],correct_answer:"",explanation:"",points:1}),c(!0)},m=v=>{l({...v}),c(!0)},f=v=>{v.id&&a.questions.find(b=>b.id===v.id)?i(b=>({...b,questions:b.questions.map(w=>w.id===v.id?v:w)})):i(b=>({...b,questions:[...b.questions,v]})),c(!1),l(null)},x=v=>{confirm("?")&&i(b=>({...b,questions:b.questions.filter(w=>w.id!==v)}))},g=v=>{const b={...v,id:Date.now().toString(),question:`${v.question} ()`};i(w=>({...w,questions:[...w.questions,b]}))},y=()=>{const v=ow();i(b=>({...b,questions:[...b.questions,...v]}))};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:""}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsx("input",{type:"text",value:a.title,onChange:v=>i(b=>({...b,title:v.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:""})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:" ()"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ce,{className:"w-4 h-4 text-slate-400"}),t.jsx("input",{type:"number",value:a.time_limit,onChange:v=>i(b=>({...b,time_limit:parseInt(v.target.value)||0})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0",placeholder:"0 = "})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsx("input",{type:"number",value:a.max_attempts,onChange:v=>i(b=>({...b,max_attempts:parseInt(v.target.value)||1})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:" (%)"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ge,{className:"w-4 h-4 text-slate-400"}),t.jsx("input",{type:"number",value:a.passing_score,onChange:v=>i(b=>({...b,passing_score:parseInt(v.target.value)||70})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0",max:"100"})]})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsx("textarea",{value:a.description,onChange:v=>i(b=>({...b,description:v.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:2,placeholder:""})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsx("textarea",{value:a.instructions,onChange:v=>i(b=>({...b,instructions:v.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:3,placeholder:""})]}),t.jsxs("div",{className:"mt-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",id:"show_correct_answers",checked:a.show_correct_answers,onChange:v=>i(b=>({...b,show_correct_answers:v.target.checked})),className:"w-4 h-4"}),t.jsx("label",{htmlFor:"show_correct_answers",className:"text-sm text-slate-300",children:""})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",id:"randomize_questions",checked:a.randomize_questions,onChange:v=>i(b=>({...b,randomize_questions:v.target.checked})),className:"w-4 h-4"}),t.jsx("label",{htmlFor:"randomize_questions",className:"text-sm text-slate-300",children:""})]})]})]}),t.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-white",children:[" (",a.questions.length," )"]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[a.questions.length===0&&t.jsx(E,{onClick:y,variant:"outline",size:"sm",children:""}),t.jsxs(E,{onClick:h,className:"bg-green-500 hover:bg-green-600",children:[t.jsx(zt,{className:"w-4 h-4 mr-2"}),""]})]})]}),a.questions.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(ye,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-400 mb-4",children:""}),t.jsxs(E,{onClick:h,children:[t.jsx(zt,{className:"w-4 h-4 mr-2"}),""]})]}):t.jsx("div",{className:"space-y-3",children:a.questions.map((v,b)=>t.jsx(Vw,{question:v,index:b,onEdit:()=>m(v),onDelete:()=>x(v.id),onDuplicate:()=>g(v)},v.id))})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx(E,{onClick:u,className:"bg-blue-500 hover:bg-blue-600",children:""})}),t.jsx(be,{children:d&&t.jsx(Bw,{question:o,onSave:f,onClose:()=>{c(!1),l(null)}})})]})},Vw=({question:s,index:e,onEdit:r,onDelete:n,onDuplicate:a})=>{var d;const[i,o]=p.useState(!1),l=c=>({multiple_choice:"",multiple_select:"",true_false:"/",fill_blank:""})[c]||c;return t.jsx("div",{className:"bg-slate-700/30 rounded-lg border border-slate-600",children:t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[t.jsxs("span",{className:"text-sm font-medium text-slate-400",children:["#",e+1]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"text-white font-medium truncate",children:s.question}),t.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[l(s.type),"  ",s.points||1," "]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(E,{size:"sm",variant:"ghost",onClick:()=>o(!i),children:i?t.jsx(rc,{className:"w-4 h-4"}):t.jsx(sc,{className:"w-4 h-4"})}),t.jsx(E,{size:"sm",variant:"ghost",onClick:r,children:t.jsx(hs,{className:"w-4 h-4"})}),t.jsx(E,{size:"sm",variant:"ghost",onClick:a,children:t.jsx(Xn,{className:"w-4 h-4"})}),t.jsx(E,{size:"sm",variant:"ghost",onClick:n,className:"text-red-400",children:t.jsx(Ye,{className:"w-4 h-4"})})]})]}),t.jsx(be,{children:i&&t.jsxs(A.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-4 pt-4 border-t border-slate-600",children:[s.type==="multiple_choice"&&t.jsx("div",{className:"space-y-2",children:(d=s.options)==null?void 0:d.map((c,u)=>t.jsxs("div",{className:`p-2 rounded ${c===s.correct_answer?"bg-green-500/20 text-green-300":"bg-slate-700/50 text-slate-300"}`,children:[c===s.correct_answer&&" ",c]},u))}),s.type==="true_false"&&t.jsxs("div",{className:"text-slate-300",children:[": ",t.jsx("span",{className:"text-green-300",children:s.correct_answer?"":""})]}),s.explanation&&t.jsxs("div",{className:"mt-3 p-3 bg-blue-500/10 rounded text-blue-300 text-sm",children:[t.jsx("strong",{children:":"})," ",s.explanation]})]})})]})})},Bw=({question:s,onSave:e,onClose:r})=>{const[n,a]=p.useState({id:(s==null?void 0:s.id)||Date.now().toString(),type:(s==null?void 0:s.type)||"multiple_choice",question:(s==null?void 0:s.question)||"",options:(s==null?void 0:s.options)||["","","",""],correct_answer:(s==null?void 0:s.correct_answer)||"",explanation:(s==null?void 0:s.explanation)||"",points:(s==null?void 0:s.points)||1}),i=c=>{if(c.preventDefault(),!n.question.trim()){alert("");return}if(n.type==="multiple_choice"&&n.options.filter(u=>u.trim()).length<2){alert(" 2 ");return}if(!n.correct_answer){alert("");return}e(n)},o=()=>{a(c=>({...c,options:[...c.options,""]}))},l=c=>{a(u=>({...u,options:u.options.filter((h,m)=>m!==c)}))},d=(c,u)=>{a(h=>({...h,options:h.options.map((m,f)=>f===c?u:m)}))};return t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:r,children:t.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-effect p-6 rounded-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:c=>c.stopPropagation(),children:[t.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:s!=null&&s.id?"":""}),t.jsxs("form",{onSubmit:i,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsxs("select",{value:n.type,onChange:c=>a(u=>({...u,type:c.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",children:[t.jsx("option",{value:"multiple_choice",children:" ()"}),t.jsx("option",{value:"multiple_select",children:" ()"}),t.jsx("option",{value:"true_false",children:"/"}),t.jsx("option",{value:"fill_blank",children:""})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsx("textarea",{value:n.question,onChange:c=>a(u=>({...u,question:c.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:3,placeholder:"",required:!0})]}),n.type==="multiple_choice"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsxs("div",{className:"space-y-2",children:[n.options.map((c,u)=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"radio",name:"correct_answer",checked:n.correct_answer===c,onChange:()=>a(h=>({...h,correct_answer:c})),className:"w-4 h-4"}),t.jsx("input",{type:"text",value:c,onChange:h=>d(u,h.target.value),className:"flex-1 p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:` ${u+1}`}),n.options.length>2&&t.jsx(E,{type:"button",variant:"ghost",size:"icon",onClick:()=>l(u),children:t.jsx(Ye,{className:"w-4 h-4 text-red-400"})})]},u)),t.jsxs(E,{type:"button",onClick:o,variant:"outline",size:"sm",children:[t.jsx(zt,{className:"w-4 h-4 mr-2"}),""]})]})]}),n.type==="true_false"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"radio",name:"correct_answer",value:"true",checked:n.correct_answer===!0||n.correct_answer==="true",onChange:()=>a(c=>({...c,correct_answer:!0})),className:"w-4 h-4"}),t.jsx("span",{className:"text-slate-300",children:""})]}),t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"radio",name:"correct_answer",value:"false",checked:n.correct_answer===!1||n.correct_answer==="false",onChange:()=>a(c=>({...c,correct_answer:!1})),className:"w-4 h-4"}),t.jsx("span",{className:"text-slate-300",children:""})]})]})]}),n.type==="fill_blank"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsx("input",{type:"text",value:n.correct_answer,onChange:c=>a(u=>({...u,correct_answer:c.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:""})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:" ()"}),t.jsx("textarea",{value:n.explanation,onChange:c=>a(u=>({...u,explanation:c.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:2,placeholder:""})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsx("input",{type:"number",value:n.points,onChange:c=>a(u=>({...u,points:parseInt(c.target.value)||1})),className:"w-32 p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx(E,{type:"button",variant:"outline",onClick:r,children:""}),t.jsx(E,{type:"submit",className:"bg-blue-500 hover:bg-blue-600",children:""})]})]})]})})},zw=({contentId:s,initialAssignment:e,onSave:r})=>{const{toast:n}=se(),[a,i]=p.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",instructions:(e==null?void 0:e.instructions)||"",due_date:(e==null?void 0:e.due_date)||"",max_file_size:(e==null?void 0:e.max_file_size)||10485760,allowed_file_types:(e==null?void 0:e.allowed_file_types)||["pdf","doc","docx","jpg","png"],max_files:(e==null?void 0:e.max_files)||5,max_score:(e==null?void 0:e.max_score)||100,auto_grade:(e==null?void 0:e.auto_grade)||!1,grading_rubric:(e==null?void 0:e.grading_rubric)||{}}),o=[{value:"pdf",label:"PDF"},{value:"doc",label:"Word (.doc)"},{value:"docx",label:"Word (.docx)"},{value:"txt",label:"Text (.txt)"},{value:"jpg",label:"Image (.jpg)"},{value:"jpeg",label:"Image (.jpeg)"},{value:"png",label:"Image (.png)"},{value:"gif",label:"Image (.gif)"},{value:"zip",label:"ZIP Archive"},{value:"rar",label:"RAR Archive"},{value:"mp4",label:"Video (.mp4)"},{value:"avi",label:"Video (.avi)"},{value:"mov",label:"Video (.mov)"}],l=()=>{if(!a.title.trim()){n({title:"",description:"",variant:"destructive"});return}if(!a.instructions.trim()){n({title:"",description:"",variant:"destructive"});return}if(a.allowed_file_types.length===0){n({title:"",description:" 1 ",variant:"destructive"});return}r(a)},d=h=>{i(m=>({...m,allowed_file_types:m.allowed_file_types.includes(h)?m.allowed_file_types.filter(f=>f!==h):[...m.allowed_file_types,h]}))},c=h=>{if(h===0)return"0 Bytes";const m=1024,f=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(h)/Math.log(m));return parseFloat((h/Math.pow(m,x)).toFixed(2))+" "+f[x]},u=h=>{i(m=>({...m,max_file_size:h*1024*1024}))};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:""}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:" *"}),t.jsx("input",{type:"text",value:a.title,onChange:h=>i(m=>({...m,title:h.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"",required:!0})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsx("textarea",{value:a.description,onChange:h=>i(m=>({...m,description:h.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:2,placeholder:""})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:" *"}),t.jsx("textarea",{value:a.instructions,onChange:h=>i(m=>({...m,instructions:h.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:6,placeholder:"     ",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(xs,{className:"w-4 h-4 text-slate-400"}),t.jsx("input",{type:"datetime-local",value:a.due_date,onChange:h=>i(m=>({...m,due_date:h.target.value})),className:"flex-1 p-3 bg-slate-700 border border-slate-600 rounded-lg text-white"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ge,{className:"w-4 h-4 text-slate-400"}),t.jsx("input",{type:"number",value:a.max_score,onChange:h=>i(m=>({...m,max_score:parseInt(h.target.value)||100})),className:"flex-1 p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]})]})]})]}),t.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:""}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsx("input",{type:"number",value:a.max_files,onChange:h=>i(m=>({...m,max_files:parseInt(h.target.value)||5})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1",max:"20"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:" (MB)"}),t.jsxs("select",{value:a.max_file_size/1024/1024,onChange:h=>u(parseInt(h.target.value)),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",children:[t.jsx("option",{value:1,children:"1 MB"}),t.jsx("option",{value:5,children:"5 MB"}),t.jsx("option",{value:10,children:"10 MB"}),t.jsx("option",{value:25,children:"25 MB"}),t.jsx("option",{value:50,children:"50 MB"}),t.jsx("option",{value:100,children:"100 MB"})]})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:" *"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:o.map(h=>t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.allowed_file_types.includes(h.value),onChange:()=>d(h.value),className:"w-4 h-4 rounded"}),t.jsx("span",{className:"text-sm text-slate-300",children:h.label})]},h.value))}),t.jsx("p",{className:"text-xs text-slate-500 mt-2",children:" 1 "})]}),t.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx(La,{className:"w-4 h-4 text-blue-400 mt-0.5"}),t.jsxs("div",{className:"text-sm text-blue-300",children:[t.jsx("p",{children:t.jsx("strong",{children:":"})}),t.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[t.jsxs("li",{children:[": ",a.max_files," "]}),t.jsxs("li",{children:[": ",c(a.max_file_size)]}),t.jsxs("li",{children:[": ",a.allowed_file_types.join(", ")]})]})]})]})})]}),t.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:""}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",id:"auto_grade",checked:a.auto_grade,onChange:h=>i(m=>({...m,auto_grade:h.target.checked})),className:"w-4 h-4"}),t.jsx("label",{htmlFor:"auto_grade",className:"text-sm text-slate-300",children:""})]}),t.jsx("p",{className:"text-xs text-slate-500 mt-1 ml-7",children:" "})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:""}),t.jsx("textarea",{value:a.grading_rubric.description||"",onChange:h=>i(m=>({...m,grading_rubric:{...m.grading_rubric,description:h.target.value}})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:4,placeholder:` :
-  (50%)
-  (30%)
-  (20%)`})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs(E,{onClick:l,className:"bg-blue-500 hover:bg-blue-600",children:[t.jsx(Y,{className:"w-4 h-4 mr-2"}),""]})}),a.allowed_file_types.length===0&&t.jsxs("div",{className:"flex items-center space-x-2 text-amber-400 text-sm",children:[t.jsx(ye,{className:"w-4 h-4"}),t.jsx("span",{children:" 1 "})]})]})},qw=async()=>{try{console.log("Checking storage setup...");const{data:{user:s},error:e}=await C.auth.getUser();if(e||!s)throw new Error("User must be authenticated to check storage");const{data:r,error:n}=await C.storage.listBuckets();if(n){console.error("List buckets error:",n);const{error:l}=await C.storage.from("course-files").list("",{limit:1});if(l)throw new Error(`Cannot access storage: ${n.message}. Direct test also failed: ${l.message}`);console.log("Bucket exists but listBuckets() failed. Using direct access method.")}else if(console.log("Available buckets:",r),!r.find(d=>d.name==="course-files"))return console.error("course-files bucket not found in list"),{success:!1,error:'Storage bucket "course-files" not found in bucket list. Please check bucket permissions.',details:{buckets:r.map(d=>d.name),missingBucket:"course-files"}};const a=new Blob(["test"],{type:"text/plain"}),i=`test/${Date.now()}_test.txt`,{error:o}=await C.storage.from("course-files").upload(i,a,{upsert:!0});if(o)return console.error("Upload test failed:",o),{success:!1,error:`Cannot upload to storage: ${o.message}`,details:o};try{await C.storage.from("course-files").remove([i])}catch(l){console.warn("Failed to cleanup test file:",l)}return console.log("Storage setup check passed"),{success:!0,message:"Storage is properly configured"}}catch(s){return console.error("Storage setup check failed:",s),{success:!1,error:s.message,details:s}}},Gw=async()=>{try{console.log("Checking database schema...");const{error:s}=await C.from("content_attachments").select("id").limit(1);return s?s.code==="42P01"?{success:!1,error:'Table "content_attachments" does not exist. Please run the database schema setup.',sqlFile:"content-attachments-schema.sql"}:{success:!1,error:`Database error: ${s.message}`,details:s}:(console.log("Database schema check passed"),{success:!0,message:"Database schema is properly configured"})}catch(s){return console.error("Database schema check failed:",s),{success:!1,error:s.message,details:s}}},Hw=async()=>{console.log("Running comprehensive system check...");const s={storage:await qw(),database:await Gw()},e=Object.values(s).every(r=>r.success);return{success:e,results:s,summary:e?"All systems are properly configured":"Some systems need configuration"}},Ww=({onClose:s})=>{const{toast:e}=se(),[r,n]=p.useState(!1),[a,i]=p.useState(null),o=async()=>{n(!0);try{const u=await Hw();i(u),u.success&&e({title:" ",description:""})}catch(u){e({title:"",description:u.message,variant:"destructive"})}finally{n(!1)}},l=u=>{navigator.clipboard.writeText(u),e({title:"",description:""})},d=u=>u?t.jsx(Pe,{className:"w-5 h-5 text-green-400"}):t.jsx(Ws,{className:"w-5 h-5 text-red-400"}),c=`-- Run this SQL in Supabase SQL Editor
-- ==========================================
-- CONTENT ATTACHMENTS SCHEMA
--  ( Google Classroom)
-- ==========================================

--  content_attachments 
CREATE TABLE IF NOT EXISTS content_attachments (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    content_id UUID NOT NULL REFERENCES course_content(id) ON DELETE CASCADE,
    file_name VARCHAR(255) NOT NULL,
    file_path TEXT NOT NULL,
    file_size BIGINT NOT NULL,
    file_type VARCHAR(50) NOT NULL,
    mime_type VARCHAR(100),
    upload_order INTEGER DEFAULT 1,
    is_downloadable BOOLEAN DEFAULT true,
    is_preview_available BOOLEAN DEFAULT false,
    uploaded_by UUID REFERENCES auth.users(id),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

--  indexes  performance
CREATE INDEX IF NOT EXISTS idx_content_attachments_content_id ON content_attachments(content_id);
CREATE INDEX IF NOT EXISTS idx_content_attachments_upload_order ON content_attachments(content_id, upload_order);
CREATE INDEX IF NOT EXISTS idx_content_attachments_file_type ON content_attachments(file_type);

--  RLS (Row Level Security)
ALTER TABLE content_attachments ENABLE ROW LEVEL SECURITY;

-- Policy:  attachments  ()
CREATE POLICY "Anyone can view content attachments" ON content_attachments
FOR SELECT USING (true);

-- Policy:  admin/instructor // attachments 
CREATE POLICY "Instructors can manage attachments" ON content_attachments
FOR ALL USING (
    auth.uid() IN (
        SELECT user_id FROM user_profiles 
        WHERE role IN ('admin', 'instructor')
    )
);

--  function trigger  updated_at
CREATE OR REPLACE FUNCTION update_content_attachments_updated_at()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER trigger_update_content_attachments_updated_at
    BEFORE UPDATE ON content_attachments
    FOR EACH ROW
    EXECUTE FUNCTION update_content_attachments_updated_at();`;return t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:s,children:t.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-effect rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:u=>u.stopPropagation(),children:[t.jsx("div",{className:"p-6 border-b border-white/10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(ys,{className:"w-6 h-6 text-blue-400"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:""}),t.jsx("p",{className:"text-slate-400 text-sm",children:" Storage  Database"})]})]}),t.jsxs(E,{onClick:o,disabled:r,className:"bg-blue-500 hover:bg-blue-600",children:[t.jsx(oc,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`}),r?"...":""]})]})}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[!a&&!r&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(jt,{className:"w-16 h-16 text-yellow-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:""}),t.jsx("p",{className:"text-slate-400 mb-6",children:' "" '})]}),r&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),t.jsx("p",{className:"text-white/70",children:"..."})]}),a&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:`p-4 rounded-lg border ${a.success?"bg-green-500/20 border-green-500/30":"bg-red-500/20 border-red-500/30"}`,children:t.jsxs("div",{className:"flex items-center space-x-3",children:[d(a.success),t.jsxs("div",{children:[t.jsx("h3",{className:`font-semibold ${a.success?"text-green-300":"text-red-300"}`,children:a.summary}),a.success&&t.jsx("p",{className:"text-green-200 text-sm",children:""})]})]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[t.jsx(Vm,{className:"w-5 h-5 mr-2"}),"Supabase Storage"]}),t.jsx("div",{className:`p-4 rounded-lg border ${a.results.storage.success?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"}`,children:t.jsxs("div",{className:"flex items-start space-x-3",children:[d(a.results.storage.success),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:`font-medium ${a.results.storage.success?"text-green-300":"text-red-300"}`,children:a.results.storage.success?"Storage ":"Storage "}),a.results.storage.error&&t.jsx("p",{className:"text-red-200 text-sm mt-1",children:a.results.storage.error}),!a.results.storage.success&&t.jsxs("div",{className:"mt-3 space-y-3",children:[t.jsxs("div",{className:"p-3 bg-slate-700/50 rounded text-sm",children:[t.jsx("p",{className:"text-slate-300 mb-2",children:" :"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"text-xs text-slate-400",children:[t.jsx("strong",{children:" 1:"}),"  Storage Policies SQL"]}),t.jsx("div",{className:"bg-slate-800 p-2 rounded text-xs",children:t.jsx("pre",{className:"text-slate-300 whitespace-pre-wrap",children:`--  SQL  Supabase SQL Editor
CREATE POLICY "Anyone can view course files" ON storage.objects
FOR SELECT USING (bucket_id = 'course-files');

CREATE POLICY "Authenticated users can upload course files" ON storage.objects  
FOR INSERT WITH CHECK (bucket_id = 'course-files' AND auth.uid() IS NOT NULL);

CREATE POLICY IF NOT EXISTS "Anyone can view buckets" ON storage.buckets
FOR SELECT USING (true);`})}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(E,{size:"sm",variant:"outline",onClick:()=>l(`--  SQL  Supabase SQL Editor
CREATE POLICY "Anyone can view course files" ON storage.objects
FOR SELECT USING (bucket_id = 'course-files');

CREATE POLICY "Authenticated users can upload course files" ON storage.objects  
FOR INSERT WITH CHECK (bucket_id = 'course-files' AND auth.uid() IS NOT NULL);

CREATE POLICY IF NOT EXISTS "Anyone can view buckets" ON storage.buckets
FOR SELECT USING (true);`),children:[t.jsx(Xn,{className:"w-3 h-3 mr-1"})," SQL"]}),t.jsxs(E,{size:"sm",variant:"outline",onClick:()=>window.open("https://supabase.com/dashboard","_blank"),children:[t.jsx(Tr,{className:"w-3 h-3 mr-1"})," SQL Editor"]})]})]})]}),t.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded text-sm",children:[t.jsx("p",{className:"text-blue-300 mb-2",children:"  2:  Bucket Settings"}),t.jsxs("ol",{className:"text-blue-200 text-xs space-y-1 ml-4",children:[t.jsx("li",{children:"1.  Storage  course-files  Settings"}),t.jsx("li",{children:"2.  Public bucket = true"}),t.jsx("li",{children:"3.  File size limit = 50MB+"}),t.jsx("li",{children:"4.  Allowed MIME types = "})]})]}),t.jsxs("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/20 rounded text-sm",children:[t.jsx("p",{className:"text-yellow-300 mb-2",children:" :"}),t.jsxs("div",{className:"text-yellow-200 text-xs space-y-1",children:[t.jsx("div",{children:"  bucket "}),t.jsx("div",{children:"  user permissions"}),t.jsx("div",{children:"  STORAGE_TROUBLESHOOTING.md"})]})]})]})]})]})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[t.jsx(Aa,{className:"w-5 h-5 mr-2"}),"Database Schema"]}),t.jsx("div",{className:`p-4 rounded-lg border ${a.results.database.success?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"}`,children:t.jsxs("div",{className:"flex items-start space-x-3",children:[d(a.results.database.success),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:`font-medium ${a.results.database.success?"text-green-300":"text-red-300"}`,children:a.results.database.success?"Database Schema ":" Database Schema"}),a.results.database.error&&t.jsx("p",{className:"text-red-200 text-sm mt-1",children:a.results.database.error}),!a.results.database.success&&t.jsxs("div",{className:"mt-3 space-y-3",children:[t.jsx("p",{className:"text-slate-300 text-sm",children:" SQL  Supabase SQL Editor:"}),t.jsxs("div",{className:"relative",children:[t.jsx("pre",{className:"bg-slate-800 p-3 rounded text-xs text-slate-300 overflow-x-auto max-h-40",children:c}),t.jsx(E,{size:"sm",variant:"outline",className:"absolute top-2 right-2",onClick:()=>l(c),children:t.jsx(Xn,{className:"w-3 h-3"})})]}),t.jsx("div",{className:"flex space-x-2",children:t.jsxs(E,{size:"sm",variant:"outline",onClick:()=>window.open("https://supabase.com/dashboard","_blank"),children:[t.jsx(Tr,{className:"w-3 h-3 mr-1"})," SQL Editor"]})})]})]})]})})]})]})]}),t.jsx("div",{className:"p-6 border-t border-white/10",children:t.jsx("div",{className:"flex justify-end",children:t.jsx(E,{variant:"outline",onClick:s,children:""})})})]})})},Kw=({contentId:s,existingFiles:e=[],onFilesChange:r,maxFiles:n=10,maxFileSize:a=50*1024*1024,allowedTypes:i=["pdf","doc","docx","ppt","pptx","xls","xlsx","jpg","jpeg","png","gif","mp4","mp3","zip","rar","txt"],uploadMode:o="admin",className:l=""})=>{const{toast:d}=se(),c=p.useRef(null),[u,h]=p.useState(e),[m,f]=p.useState(!1),[x,g]=p.useState(!1),[y,v]=p.useState(!1),b=S=>{const R=S==null?void 0:S.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(R)?t.jsx(qs,{className:"w-5 h-5 text-blue-500"}):["mp4","avi","mov","wmv","flv"].includes(R)?t.jsx(uc,{className:"w-5 h-5 text-purple-500"}):["zip","rar","7z","tar","gz"].includes(R)?t.jsx(nc,{className:"w-5 h-5 text-orange-500"}):["pdf"].includes(R)?t.jsx(Y,{className:"w-5 h-5 text-red-500"}):["doc","docx"].includes(R)?t.jsx(Y,{className:"w-5 h-5 text-blue-600"}):["ppt","pptx"].includes(R)?t.jsx(Y,{className:"w-5 h-5 text-orange-600"}):["xls","xlsx"].includes(R)?t.jsx(Y,{className:"w-5 h-5 text-green-600"}):t.jsx(Er,{className:"w-5 h-5 text-slate-500"})},w=S=>{if(S===0)return"0 Bytes";const R=1024,M=["Bytes","KB","MB","GB"],F=Math.floor(Math.log(S)/Math.log(R));return parseFloat((S/Math.pow(R,F)).toFixed(2))+" "+M[F]},k=S=>{var F;const R=[];S.size>a&&R.push(` ${S.name}  (${w(a)})`);const M=(F=S.name.split(".").pop())==null?void 0:F.toLowerCase();return i.includes(M)||R.push(` ${S.name} `),{isValid:R.length===0,errors:R}},j=S=>{if(!S||S.length===0)return;const R=Array.from(S);if(u.length+R.length>n){d({title:"",description:` ${n} `,variant:"destructive"});return}const M=[],F=[];if(R.forEach(I=>{var B;const W=k(I);if(W.isValid){const D=`file_${Date.now()}_${Math.floor(Math.random()*1e3)}`;M.push({id:D,file:I,name:I.name,size:I.size,type:(B=I.name.split(".").pop())==null?void 0:B.toLowerCase(),mimeType:I.type,isUploading:!1,isUploaded:!1,progress:0,url:null,path:null})}else F.push(...W.errors)}),F.length>0&&d({title:"",description:F.join(`
`),variant:"destructive"}),M.length>0){const I=[...u,...M];h(I),r==null||r(I)}},T=S=>{S.preventDefault(),g(!1),j(S.dataTransfer.files)},N=S=>{S.preventDefault(),S.stopPropagation(),S.type==="dragenter"||S.type==="dragover"?g(!0):S.type==="dragleave"&&g(!1)},_=S=>{const R=u.filter(M=>M.id!==S);h(R),r==null||r(R)},P=async(S,R=1)=>{var M;h(F=>F.map(I=>I.id===S.id?{...I,isUploading:!0,progress:0}:I));try{const F=setInterval(()=>{h(B=>B.map(D=>D.id===S.id?{...D,progress:Math.min(D.progress+10,90)}:D))},200),{data:I,error:W}=await xv(S.file,s,R);if(clearInterval(F),W)throw W;return h(B=>B.map(D=>D.id===S.id?{...D,isUploading:!1,isUploaded:!0,progress:100,url:I.url,path:I.file_path,attachmentId:I.id}:D)),{success:!0,data:I}}catch(F){console.error("Upload error details:",F);const I=((M=F==null?void 0:F.error)==null?void 0:M.message)||(F==null?void 0:F.message)||"";throw h(W=>W.map(B=>B.id===S.id?{...B,isUploading:!1,isUploaded:!1,progress:0,error:I}:B)),d({title:"",description:`${I}

 "" `,variant:"destructive",action:t.jsx(E,{size:"sm",onClick:()=>v(!0),children:""})}),F}},$=async()=>{if(!s){d({title:"",description:" Content ID",variant:"destructive"});return}f(!0);const S=u.filter(R=>!R.isUploaded&&!R.isUploading);if(S.length===0){d({title:"",description:""}),f(!1);return}try{const R=await Promise.allSettled(S.map((I,W)=>P(I,W+1))),M=R.filter(I=>I.status==="fulfilled").length,F=R.filter(I=>I.status==="rejected").length;M>0&&F===0?d({title:" ",description:` ${M} `}):M>0&&F>0?d({title:"",description:` ${M} ,  ${F} `,variant:"destructive"}):d({title:"",description:" ",variant:"destructive"}),r==null||r(u)}catch{d({title:"",description:"",variant:"destructive"})}finally{f(!1)}},G=S=>{if(S.url){const R=document.createElement("a");R.href=S.url,R.download=S.name,document.body.appendChild(R),R.click(),document.body.removeChild(R)}},U=u.filter(S=>!S.isUploaded),L=u.filter(S=>S.isUploaded);return t.jsxs("div",{className:`space-y-4 ${l}`,children:[t.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 transition-colors ${x?"border-blue-500 bg-blue-500/10":"border-slate-600 hover:border-slate-500"}`,onDragEnter:N,onDragLeave:N,onDragOver:N,onDrop:T,children:[t.jsx("input",{ref:c,type:"file",multiple:!0,accept:i.map(S=>`.${S}`).join(","),onChange:S=>j(S.target.files),className:"hidden"}),t.jsxs("div",{className:"text-center",children:[t.jsx(Hs,{className:"w-8 h-8 text-slate-400 mx-auto mb-3"}),t.jsxs("p",{className:"text-slate-300 mb-2",children:[" "," ",t.jsx("button",{type:"button",onClick:()=>{var S;return(S=c.current)==null?void 0:S.click()},className:"text-blue-400 hover:text-blue-300 underline",children:""})]}),t.jsxs("p",{className:"text-xs text-slate-500",children:[": ",i.join(", ")," | : ",w(a)," | : ",n," "]})]})]}),u.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h4",{className:"text-sm font-medium text-slate-300",children:[" (",u.length,"/",n,")"]}),U.length>0&&t.jsx(E,{size:"sm",onClick:$,disabled:m,className:"bg-blue-500 hover:bg-blue-600",children:m?t.jsxs(t.Fragment,{children:[t.jsx(Gs,{className:"w-4 h-4 mr-2 animate-spin"}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Hs,{className:"w-4 h-4 mr-2"}),""]})})]}),t.jsx("div",{className:"grid gap-2",children:t.jsx(be,{children:u.map(S=>t.jsxs(A.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center space-x-3 p-3 bg-slate-700/30 rounded-lg border border-slate-600",children:[t.jsx("div",{className:"flex-shrink-0",children:b(S.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("p",{className:"text-sm font-medium text-white truncate",children:S.name}),S.isUploaded&&t.jsx(Pe,{className:"w-4 h-4 text-green-400"})]}),t.jsx("p",{className:"text-xs text-slate-400",children:w(S.size)}),S.isUploading&&t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"w-full bg-slate-600 rounded-full h-1",children:t.jsx("div",{className:"bg-blue-500 h-1 rounded-full transition-all duration-300",style:{width:`${S.progress}%`}})}),t.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[S.progress,"%"]})]}),S.error&&t.jsx("div",{className:"mt-2 p-2 bg-red-500/20 border border-red-500/30 rounded text-xs",children:t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx(ye,{className:"w-3 h-3 text-red-400 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-red-400",children:S.error}),t.jsx(E,{size:"sm",variant:"ghost",className:"text-red-300 hover:text-red-200 h-auto p-0 mt-1 text-xs",onClick:()=>v(!0),children:" "})]})]})})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[S.isUploaded&&t.jsxs(t.Fragment,{children:[t.jsx(E,{size:"sm",variant:"ghost",onClick:()=>G(S),title:"",children:t.jsx(Ve,{className:"w-4 h-4"})}),S.type&&["jpg","jpeg","png","gif","pdf"].includes(S.type)&&t.jsx(E,{size:"sm",variant:"ghost",title:"",children:t.jsx(ze,{className:"w-4 h-4"})})]}),t.jsx(E,{size:"sm",variant:"ghost",onClick:()=>_(S.id),className:"text-red-400 hover:text-red-300",title:"",children:t.jsx(Ye,{className:"w-4 h-4"})})]})]},S.id))})})]}),u.length>0&&t.jsxs("div",{className:"text-xs text-slate-500 text-center",children:[L.length>0&&t.jsxs("span",{className:"text-green-400",children:[" ",L.length," "]}),U.length>0&&L.length>0&&t.jsx("span",{className:"mx-2",children:""}),U.length>0&&t.jsxs("span",{className:"text-yellow-400",children:[" ",U.length," "]})]}),y&&t.jsx(Ww,{onClose:()=>v(!1)})]})},Xw=({mode:s,content:e,onSave:r,onClose:n})=>{const{toast:a}=se(),[i,o]=p.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",content_type:(e==null?void 0:e.content_type)||"video",content_url:(e==null?void 0:e.content_url)||"",duration_minutes:(e==null?void 0:e.duration_minutes)||0,is_free:(e==null?void 0:e.is_free)||!1,completion_type:(e==null?void 0:e.completion_type)||"manual",minimum_score:(e==null?void 0:e.minimum_score)||0,minimum_time_minutes:(e==null?void 0:e.minimum_time_minutes)||0,is_required:(e==null?void 0:e.is_required)!==!1,unlock_after:(e==null?void 0:e.unlock_after)||[],completion_criteria:(e==null?void 0:e.completion_criteria)||{}}),[l,d]=p.useState("basic"),[c,u]=p.useState(""),[h,m]=p.useState(!1),[f,x]=p.useState(!1),[g,y]=p.useState(!1);p.useEffect(()=>{var N,_;if(i.content_url&&i.content_type==="video"){let P=i.content_url;P.includes("youtube.com/watch")?P=`https://www.youtube.com/embed/${(N=P.split("v=")[1])==null?void 0:N.split("&")[0]}`:P.includes("youtu.be/")&&(P=`https://www.youtube.com/embed/${(_=P.split("youtu.be/")[1])==null?void 0:_.split("?")[0]}`),u(P)}},[i.content_url,i.content_type]);const v=N=>{N.preventDefault();const _=$w(i);if(!_.isValid){a({title:"",description:_.errors.join(`
`),variant:"destructive"});return}r(i)},b=N=>{o(_=>({..._,...N}))},w=()=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[t.jsxs("label",{className:"block text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[t.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:t.jsx(Y,{className:"w-5 h-5 text-white"})}),""]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{value:"video",label:"",icon:Ms,color:"blue",bgColor:"from-blue-500 to-blue-600"},{value:"quiz",label:"",icon:Ft,color:"yellow",bgColor:"from-yellow-500 to-orange-500"},{value:"assignment",label:"",icon:Y,color:"purple",bgColor:"from-purple-500 to-purple-600"},{value:"document",label:"",icon:oe,color:"green",bgColor:"from-green-500 to-green-600"}].map(N=>{const _=N.icon,P=i.content_type===N.value;return t.jsxs("button",{type:"button",onClick:()=>o($=>({...$,content_type:N.value})),className:`p-4 rounded-xl border-2 transition-all duration-300 transform hover:scale-105 ${P?`border-${N.color}-500 bg-gradient-to-br ${N.bgColor} text-white shadow-lg`:"border-gray-200 bg-white hover:border-gray-300 hover:shadow-md text-gray-600"}`,children:[t.jsx(_,{className:`w-6 h-6 mx-auto mb-2 ${P?"text-white":`text-${N.color}-500`}`}),t.jsx("div",{className:`text-sm font-medium ${P?"text-white":"text-gray-700"}`,children:N.label})]},N.value)})})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[t.jsxs("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[t.jsx("div",{className:"bg-green-500 p-2 rounded-lg mr-3",children:t.jsx(oe,{className:"w-5 h-5 text-white"})})," *"]}),t.jsx("input",{type:"text",value:i.title,onChange:N=>o(_=>({..._,title:N.target.value})),className:"w-full p-4 bg-white border-2 border-gray-200 rounded-xl text-gray-800 placeholder-gray-500 focus:border-green-500 focus:ring-4 focus:ring-green-200 focus:outline-none transition-all duration-200 text-lg shadow-sm",placeholder:"  Python ",required:!0})]}),t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-6 rounded-xl border border-purple-200",children:[t.jsxs("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[t.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:t.jsx(Y,{className:"w-5 h-5 text-white"})}),""]}),t.jsx("textarea",{value:i.description,onChange:N=>o(_=>({..._,description:N.target.value})),className:"w-full p-4 bg-white border-2 border-gray-200 rounded-xl text-gray-800 placeholder-gray-500 focus:border-purple-500 focus:ring-4 focus:ring-purple-200 focus:outline-none transition-all duration-200 resize-none shadow-sm",rows:4,placeholder:"..."})]}),t.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 p-6 rounded-xl border border-orange-200",children:[t.jsxs("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[t.jsx("div",{className:"bg-orange-500 p-2 rounded-lg mr-3",children:t.jsx(Pi,{className:"w-5 h-5 text-white"})})," URL  ()"]}),g?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[i.content_type==="video"&&" YouTube URL",i.content_type==="document"&&""]}),t.jsx(E,{type:"button",variant:"ghost",onClick:()=>{y(!1),o(N=>({...N,content_url:""})),m(!1)},className:"text-red-500 hover:text-red-600 hover:bg-red-50 rounded-lg p-1",children:t.jsx(tt,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("input",{type:"url",value:i.content_url,onChange:N=>o(_=>({..._,content_url:N.target.value})),className:"flex-1 p-4 bg-white border-2 border-gray-200 rounded-xl text-gray-800 placeholder-gray-500 focus:border-orange-500 focus:ring-4 focus:ring-orange-200 focus:outline-none transition-all duration-200 text-lg shadow-sm",placeholder:i.content_type==="video"?"https://youtube.com/watch?v=...  https://youtu.be/...":"https://example.com/document.pdf"}),i.content_type==="video"&&i.content_url&&t.jsx(E,{type:"button",variant:"outline",onClick:()=>m(!h),className:"px-4 py-2 border-orange-300 text-orange-600 hover:bg-orange-50 hover:border-orange-400 rounded-xl",children:h?t.jsx(Im,{className:"w-5 h-5"}):t.jsx(ze,{className:"w-5 h-5"})})]}),i.content_type==="video"&&h&&c&&t.jsx("div",{className:"mt-4",children:t.jsx("div",{className:"aspect-video bg-gray-100 rounded-xl overflow-hidden shadow-lg border-2 border-gray-200",children:t.jsx("iframe",{src:c,className:"w-full h-full",allowFullScreen:!0,title:"Video Preview"})})})]}):t.jsxs(E,{type:"button",onClick:()=>y(!0),className:"bg-orange-500 hover:bg-orange-600 text-white rounded-xl px-6 py-3 transition-all duration-200 shadow-md hover:shadow-lg",children:[t.jsx(Pi,{className:"w-5 h-5 mr-2"})," URL "]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 p-6 rounded-xl border border-cyan-200",children:[t.jsxs("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[t.jsx("div",{className:"bg-cyan-500 p-2 rounded-lg mr-3",children:t.jsx(ce,{className:"w-5 h-5 text-white"})}),""]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"number",value:i.duration_minutes,onChange:N=>o(_=>({..._,duration_minutes:parseInt(N.target.value)||0})),className:"w-28 p-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800 text-center text-lg font-semibold focus:border-cyan-500 focus:ring-4 focus:ring-cyan-200 focus:outline-none transition-all duration-200 shadow-sm",min:"0",placeholder:"0"}),t.jsx("span",{className:"text-gray-600 font-medium",children:""})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 p-6 rounded-xl border border-emerald-200",children:[t.jsxs("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[t.jsx("div",{className:"bg-emerald-500 p-2 rounded-lg mr-3",children:t.jsx(Ft,{className:"w-5 h-5 text-white"})}),""]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"checkbox",id:"is_free",checked:i.is_free,onChange:N=>o(_=>({..._,is_free:N.target.checked})),className:"w-5 h-5 text-emerald-500 border-2 border-gray-300 rounded-lg focus:ring-4 focus:ring-emerald-200 focus:ring-opacity-50"}),t.jsx("label",{htmlFor:"is_free",className:"text-gray-700 font-medium cursor-pointer",children:" ()"})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-50 p-6 rounded-xl border border-amber-200",children:[t.jsxs("label",{className:"block text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[t.jsx("div",{className:"bg-amber-500 p-2 rounded-lg mr-3",children:t.jsx(ys,{className:"w-5 h-5 text-white"})}),""]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[{value:"manual",label:"",icon:ds,color:"blue"},{value:"quiz_required",label:"",icon:ge,color:"yellow"},{value:"assignment_required",label:"",icon:Y,color:"purple"},{value:"time_based",label:"",icon:ce,color:"green"},{value:"video_complete",label:"",icon:Ms,color:"red"},{value:"sequential",label:"",icon:Oe,color:"gray"}].map(N=>{const _=N.icon,P=i.completion_type===N.value;return t.jsxs("button",{type:"button",onClick:()=>o($=>({...$,completion_type:N.value})),className:`p-3 rounded-lg border-2 transition-all duration-200 ${P?`border-${N.color}-500 bg-${N.color}-50 text-${N.color}-700`:"border-gray-200 bg-white hover:border-gray-300 text-gray-600"}`,children:[t.jsx(_,{className:`w-4 h-4 mx-auto mb-1 ${P?`text-${N.color}-600`:"text-gray-500"}`}),t.jsx("div",{className:"text-xs font-medium",children:N.label})]},N.value)})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(i.completion_type==="quiz_required"||i.completion_type==="assignment_required")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" (%)"}),t.jsx("input",{type:"number",value:i.minimum_score,onChange:N=>o(_=>({..._,minimum_score:parseInt(N.target.value)||0})),className:"w-full p-2 border-2 border-gray-200 rounded-lg focus:border-amber-500 focus:outline-none",min:"0",max:"100",placeholder:"80"})]}),i.completion_type==="time_based"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ()"}),t.jsx("input",{type:"number",value:i.minimum_time_minutes,onChange:N=>o(_=>({..._,minimum_time_minutes:parseInt(N.target.value)||0})),className:"w-full p-2 border-2 border-gray-200 rounded-lg focus:border-amber-500 focus:outline-none",min:"0",placeholder:"10"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",id:"is_required",checked:i.is_required,onChange:N=>o(_=>({..._,is_required:N.target.checked})),className:"w-4 h-4 text-amber-500 border-2 border-gray-300 rounded focus:ring-amber-500"}),t.jsx("label",{htmlFor:"is_required",className:"text-sm text-gray-700 cursor-pointer",children:i.is_required?t.jsxs("span",{className:"flex items-center text-amber-600",children:[t.jsx(Oe,{className:"w-4 h-4 mr-1"})," "]}):t.jsxs("span",{className:"flex items-center text-gray-500",children:[t.jsx(Zn,{className:"w-4 h-4 mr-1"})," "]})})]})]})]})]})]}),k=()=>s==="create"?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Y,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-400 mb-2",children:""}),t.jsx("p",{className:"text-xs text-slate-500 mb-4",children:""}),t.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4 max-w-md mx-auto",children:[t.jsx("h4",{className:"text-blue-300 font-medium mb-2",children:" "}),t.jsxs("ol",{className:"text-blue-200 text-sm space-y-1 text-left",children:[t.jsx("li",{children:'1.  ""'}),t.jsx("li",{children:'2.  "" '}),t.jsx("li",{children:"3. "}),t.jsx("li",{children:'4.  "" '})]})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:""}),t.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"    "}),t.jsx(be,{children:f&&t.jsxs(A.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6",children:[t.jsx(Kw,{contentId:e==null?void 0:e.id,onFilesChange:N=>{console.log("Files changed:",N)},uploadMode:"admin",maxFiles:10,maxFileSize:50*1024*1024}),t.jsx("div",{className:"flex justify-end space-x-2 mt-4",children:t.jsx(E,{type:"button",variant:"outline",onClick:()=>x(!1),children:""})})]})}),t.jsx(di,{contentId:e==null?void 0:e.id,showUploadButton:!f,onUploadClick:()=>x(!0),isAdminView:!0,className:"admin-attachment-viewer"})]}),t.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:[t.jsx("h4",{className:"text-blue-300 font-medium mb-2",children:" "}),t.jsxs("ul",{className:"text-blue-200 text-sm space-y-1",children:[t.jsx("li",{children:"  PDF, Word, PowerPoint "}),t.jsx("li",{children:" "}),t.jsx("li",{children:" "}),t.jsx("li",{children:"  50MB "}),t.jsx("li",{children:" "})]})]})]}),j=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 p-6 rounded-xl border border-purple-200",children:[t.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[t.jsx(ge,{className:"w-6 h-6 mr-3 text-purple-600"}),""]}),t.jsx("p",{className:"text-gray-600 mb-6",children:""}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:""}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{value:"manual",label:"",description:"",icon:ds,color:"blue"},{value:"quiz_required",label:"",description:"",icon:ge,color:"yellow"},{value:"assignment_required",label:"",description:"",icon:Y,color:"purple"},{value:"time_based",label:"",description:"",icon:ce,color:"green"},{value:"video_complete",label:"",description:"",icon:Ms,color:"red"},{value:"sequential",label:"",description:"",icon:Oe,color:"gray"}].map(N=>{const _=N.icon,P=i.completion_type===N.value;return t.jsxs("div",{onClick:()=>o($=>({...$,completion_type:N.value})),className:`p-4 rounded-xl border-2 cursor-pointer transition-all duration-300 ${P?`border-${N.color}-500 bg-${N.color}-50 shadow-lg`:"border-gray-200 bg-white hover:border-gray-300 hover:shadow-md"}`,children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx(_,{className:`w-5 h-5 mr-2 ${P?`text-${N.color}-600`:"text-gray-500"}`}),t.jsx("span",{className:`font-semibold ${P?`text-${N.color}-800`:"text-gray-700"}`,children:N.label})]}),t.jsx("p",{className:`text-sm ${P?`text-${N.color}-600`:"text-gray-500"}`,children:N.description})]},N.value)})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(i.completion_type==="quiz_required"||i.completion_type==="assignment_required")&&t.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2 flex items-center",children:[t.jsx(ge,{className:"w-4 h-4 mr-2 text-yellow-600"})," (%)"]}),t.jsx("input",{type:"number",value:i.minimum_score,onChange:N=>o(_=>({..._,minimum_score:parseInt(N.target.value)||0})),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-yellow-500 focus:outline-none text-center text-lg font-semibold",min:"0",max:"100",placeholder:"80"}),t.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[" ",i.minimum_score,"% "]})]}),i.completion_type==="time_based"&&t.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2 flex items-center",children:[t.jsx(ce,{className:"w-4 h-4 mr-2 text-green-600"})," ()"]}),t.jsx("input",{type:"number",value:i.minimum_time_minutes,onChange:N=>o(_=>({..._,minimum_time_minutes:parseInt(N.target.value)||0})),className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:border-green-500 focus:outline-none text-center text-lg font-semibold",min:"0",placeholder:"10"}),t.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[" ",i.minimum_time_minutes," "]})]})]}),t.jsx("div",{className:"mt-6 bg-amber-50 p-4 rounded-lg border border-amber-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-1 flex items-center",children:[i.is_required?t.jsx(Oe,{className:"w-4 h-4 mr-2 text-amber-600"}):t.jsx(Zn,{className:"w-4 h-4 mr-2 text-gray-500"}),""]}),t.jsx("p",{className:"text-sm text-gray-600",children:i.is_required?" - ":" - "})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:`text-sm font-medium ${i.is_required?"text-amber-600":"text-gray-500"}`,children:i.is_required?"":""}),t.jsx("input",{type:"checkbox",id:"is_required_detailed",checked:i.is_required,onChange:N=>o(_=>({..._,is_required:N.target.checked})),className:"w-5 h-5 text-amber-500 border-2 border-gray-300 rounded focus:ring-amber-500"})]})]})})]}),t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[t.jsxs("h4",{className:"text-blue-800 font-semibold mb-2 flex items-center",children:[t.jsx(ze,{className:"w-4 h-4 mr-2"}),""]}),t.jsxs("div",{className:"bg-white p-3 rounded border",children:[t.jsxs("p",{className:"text-sm text-gray-700",children:[t.jsx("strong",{children:":"})," ",{manual:"",quiz_required:` ${i.minimum_score}%`,assignment_required:` ${i.minimum_score}%`,time_based:` ${i.minimum_time_minutes} `,video_complete:"",sequential:""}[i.completion_type]]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[": ",i.is_required?" ":" "]})]})]})]}),T=()=>{switch(i.content_type){case"quiz":return t.jsx(Uw,{contentId:e==null?void 0:e.id,onSave:N=>{console.log("Quiz data:",N)}});case"assignment":return t.jsx(zw,{contentId:e==null?void 0:e.id,onSave:N=>{console.log("Assignment data:",N)}});default:return t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Y,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-400",children:""})]})}};return t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:n,children:t.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white shadow-2xl rounded-xl max-w-4xl w-full max-h-[90vh] flex flex-col",onClick:N=>N.stopPropagation(),children:[t.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-8 rounded-t-xl",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:t.jsx(oe,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-white",children:s==="create"?"":""}),t.jsx("p",{className:"text-indigo-100 mt-1",children:""})]})]}),t.jsx(E,{variant:"ghost",size:"icon",onClick:n,className:"text-white hover:bg-white/20 rounded-xl p-2",children:t.jsx(tt,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"flex space-x-2 mt-6 bg-white/10 p-1 rounded-xl backdrop-blur-sm",children:[t.jsx("button",{type:"button",onClick:()=>d("basic"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${l==="basic"?"bg-white text-indigo-600 shadow-lg":"text-white hover:bg-white/20"}`,children:" "}),t.jsx("button",{type:"button",onClick:()=>d("attachments"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${l==="attachments"?"bg-white text-indigo-600 shadow-lg":"text-white hover:bg-white/20"}`,children:" "}),(i.content_type==="quiz"||i.content_type==="assignment")&&t.jsx("button",{type:"button",onClick:()=>d("advanced"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${l==="advanced"?"bg-white text-indigo-600 shadow-lg":"text-white hover:bg-white/20"}`,children:" "}),t.jsx("button",{type:"button",onClick:()=>d("requirements"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${l==="requirements"?"bg-white text-indigo-600 shadow-lg":"text-white hover:bg-white/20"}`,children:" "})]})]}),t.jsxs("form",{onSubmit:v,className:"flex flex-col flex-1 min-h-0",children:[t.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:t.jsx(be,{mode:"wait",children:t.jsxs(A.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"space-y-6",children:[l==="basic"&&w(),l==="attachments"&&k(),l==="advanced"&&T(),l==="requirements"&&j()]},l)})}),t.jsxs("div",{className:"bg-gray-50 p-8 border-t border-gray-200 flex-shrink-0",children:[l==="basic"&&s==="create"&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("p",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[t.jsx(Ft,{className:"w-5 h-5 mr-2 text-yellow-500"}),""]}),t.jsx("div",{className:"flex flex-wrap gap-3",children:Fw().map((N,_)=>t.jsxs("button",{type:"button",onClick:()=>b(N),className:"px-4 py-2 text-sm bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white rounded-full transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105",children:[" ",N.name]},_))})]}),t.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[t.jsx(E,{type:"button",variant:"outline",onClick:n,className:"px-8 py-3 text-gray-600 border-gray-300 hover:bg-gray-50 rounded-xl font-medium text-lg h-14 min-w-[120px]",children:""}),(l==="basic"||l==="requirements")&&t.jsxs(E,{type:"submit",className:"px-12 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg h-14 min-w-[160px] shadow-lg hover:shadow-xl transition-all duration-200",children:[t.jsx(gs,{className:"w-5 h-5 mr-3"}),""]}),l!=="basic"&&l!=="requirements"&&t.jsx(E,{type:"button",onClick:()=>d("basic"),className:"px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl font-semibold text-lg h-14 min-w-[140px] shadow-lg hover:shadow-xl transition-all duration-200",children:""})]})]})]})]})})},Jw=({content:s,courseContent:e=[],onUpdate:r,onClose:n})=>{const[a,i]=p.useState({completion_type:"manual",minimum_score:0,minimum_time_minutes:0,is_required:!0,unlock_after:[],completion_criteria:{}}),[o,l]=p.useState(!1),{toast:d}=se();p.useEffect(()=>{s&&i({completion_type:s.completion_type||"manual",minimum_score:s.minimum_score||0,minimum_time_minutes:s.minimum_time_minutes||0,is_required:s.is_required!==void 0?s.is_required:!0,unlock_after:s.unlock_after||[],completion_criteria:s.completion_criteria||{}})},[s]);const c=async()=>{l(!0);try{const{data:f,error:x}=await bw(s.id,a);if(x)throw new Error(x.message);d({title:"",description:""}),r&&r(f),n&&n()}catch(f){console.error("Error saving requirements:",f),d({title:"",description:f.message,variant:"destructive"})}finally{l(!1)}},u=f=>{switch(f){case"manual":return t.jsx(ds,{className:"w-5 h-5"});case"quiz_required":return t.jsx(ge,{className:"w-5 h-5"});case"assignment_required":return t.jsx(Y,{className:"w-5 h-5"});case"time_based":return t.jsx(ce,{className:"w-5 h-5"});case"video_complete":return t.jsx(Pr,{className:"w-5 h-5"});case"sequential":return t.jsx(Oe,{className:"w-5 h-5"});default:return t.jsx(ds,{className:"w-5 h-5"})}},h=f=>{switch(f){case"manual":return"";case"quiz_required":return"";case"assignment_required":return"";case"time_based":return"";case"video_complete":return" (90%)";case"sequential":return"";default:return""}},m=e.filter(f=>f.id!==(s==null?void 0:s.id)&&f.order_index<((s==null?void 0:s.order_index)||999));return t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:n,children:t.jsxs(A.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:f=>f.stopPropagation(),children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(ys,{className:"w-6 h-6 text-blue-600"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:""}),t.jsx("p",{className:"text-gray-600",children:s==null?void 0:s.title})]})]}),t.jsx(E,{variant:"ghost",size:"sm",onClick:n,children:t.jsx(tt,{className:"w-5 h-5"})})]})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 mb-3 block",children:""}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{type:"manual",label:""},{type:"quiz_required",label:""},{type:"assignment_required",label:""},{type:"time_based",label:""},{type:"video_complete",label:""},{type:"sequential",label:""}].map(f=>t.jsx(A.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`
                    border-2 rounded-lg p-4 cursor-pointer transition-colors
                    ${a.completion_type===f.type?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}
                  `,onClick:()=>i({...a,completion_type:f.type}),children:t.jsxs("div",{className:"flex items-center space-x-3",children:[u(f.type),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:f.label}),t.jsx("p",{className:"text-sm text-gray-500",children:h(f.type)})]})]})},f.type))})]}),t.jsxs(be,{children:[(a.completion_type==="quiz_required"||a.completion_type==="assignment_required")&&t.jsxs(A.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:" (%)"}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:a.minimum_score,onChange:f=>i({...a,minimum_score:parseInt(f.target.value)}),className:"flex-1"}),t.jsxs("span",{className:"font-medium text-gray-900 w-12",children:[a.minimum_score,"%"]})]}),t.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx(La,{className:"w-4 h-4 text-blue-600 mt-0.5"}),t.jsxs("p",{className:"text-sm text-blue-800",children:[" ",a.minimum_score,"%  "]})]})})]}),a.completion_type==="time_based"&&t.jsxs(A.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:" ()"}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{type:"number",min:"1",max:"180",value:a.minimum_time_minutes,onChange:f=>i({...a,minimum_time_minutes:parseInt(f.target.value)||0}),className:"border border-gray-300 rounded-md px-3 py-2 w-24"}),t.jsx("span",{className:"text-gray-600",children:""})]}),t.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg",children:t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx(ce,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),t.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",a.minimum_time_minutes,"  "]})]})})]}),a.completion_type==="sequential"&&m.length>0&&t.jsxs(A.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:""}),t.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:m.map(f=>t.jsxs("label",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded",children:[t.jsx("input",{type:"checkbox",checked:a.unlock_after.includes(f.id),onChange:x=>{x.target.checked?i({...a,unlock_after:[...a.unlock_after,f.id]}):i({...a,unlock_after:a.unlock_after.filter(g=>g!==f.id)})},className:"rounded border-gray-300"}),t.jsxs("span",{className:"text-sm text-gray-700",children:[f.order_index,". ",f.title]})]},f.id))})]})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[a.is_required?t.jsx(Oe,{className:"w-5 h-5 text-red-500"}):t.jsx(Zn,{className:"w-5 h-5 text-green-500"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:""}),t.jsx("p",{className:"text-sm text-gray-500",children:a.is_required?"":" "})]})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.is_required,onChange:f=>i({...a,is_required:f.target.checked}),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(s==null?void 0:s.progress_count)>0&&t.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx(jt,{className:"w-5 h-5 text-orange-600 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-orange-900",children:": "}),t.jsx("p",{className:"text-sm text-orange-800 mt-1",children:" "})]})]})})]}),t.jsx("div",{className:"p-6 border-t border-gray-200",children:t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx(E,{variant:"outline",onClick:n,disabled:o,children:""}),t.jsx(E,{onClick:c,disabled:o,className:"bg-blue-600 hover:bg-blue-700",children:o?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx(gs,{className:"w-4 h-4 mr-2"}),""]})})]})})]})})},Yw=()=>{const{courseId:s}=Br(),{isAdmin:e}=Le(),{toast:r}=se(),[n,a]=p.useState(null),[i,o]=p.useState([]),[l,d]=p.useState(!0),[c,u]=p.useState(!1),[h,m]=p.useState(null),[f,x]=p.useState("create"),[g,y]=p.useState(!1),[v,b]=p.useState(null),w=p.useCallback(async()=>{d(!0);try{const{data:L,error:S}=await cv(s);if(S)throw S;a(L);const{data:R,error:M}=await vu(s);if(M)throw M;o(R||[])}catch(L){console.error("Error loading course data:",L),r({title:"",description:L.message,variant:"destructive"})}finally{d(!1)}},[s,r]);p.useEffect(()=>{e&&w()},[e,w]);const k=()=>{m(null),x("create"),u(!0)},j=L=>{m(L),x("edit"),u(!0)},T=L=>{b(L),y(!0)},N=L=>{o(i.map(S=>S.id===L.id?{...S,...L}:S))},_=async L=>{if(confirm("?"))try{const{error:S}=await Dw(L);if(S)throw S;r({title:"",description:""}),w()}catch(S){console.error("Error deleting content:",S),r({title:"",description:S.message,variant:"destructive"})}},P=async L=>{try{let S;if(f==="create"?S=await Iw({...L,course_id:s,order_index:i.length+1}):S=await Ow(h.id,L),S.error)throw S.error;r({title:f==="create"?"":"",description:""}),u(!1),w()}catch(S){console.error("Error saving content:",S),r({title:"",description:S.message,variant:"destructive"})}},$=L=>{switch(L){case"video":return t.jsx(Ms,{className:"w-5 h-5 text-blue-500"});case"quiz":return t.jsx(Ft,{className:"w-5 h-5 text-yellow-500"});case"assignment":return t.jsx(Y,{className:"w-5 h-5 text-purple-500"});case"document":return t.jsx(Y,{className:"w-5 h-5 text-green-500"});default:return t.jsx(Y,{className:"w-5 h-5 text-gray-500"})}},G=L=>({video:"",quiz:"",assignment:"",document:"",text:""})[L]||L,U=L=>({manual:"",quiz_required:"",assignment_required:"",time_based:"",video_complete:"",sequential:""})[L]||L;return e?l?t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),t.jsx("p",{className:"text-orange-700",children:"..."})]})}):t.jsxs("div",{className:"container mx-auto px-4 py-12",children:[t.jsx(we,{children:t.jsx("title",{children:n!=null&&n.title?` - ${n.title} | Admin`:" | Admin"})}),t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[t.jsx(te,{to:"/admin/courses",children:t.jsx(E,{variant:"ghost",size:"icon",children:t.jsx(Bt,{className:"w-5 h-5"})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-orange-900",children:""}),t.jsx("p",{className:"text-orange-700",children:n==null?void 0:n.title}),n&&t.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${n.is_active?"bg-green-500/30 text-green-700":"bg-red-500/30 text-red-700"}`,children:n.is_active?"":""}),!n.is_active&&t.jsx("span",{className:"text-xs text-red-600 bg-red-50 px-2 py-1 rounded-full",children:"  - "})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"text-sm text-orange-700",children:[": ",i.length," "]}),t.jsxs(E,{onClick:k,className:"bg-blue-500 hover:bg-blue-600",children:[t.jsx(zt,{className:"w-4 h-4 mr-2"}),""]})]})]}),t.jsx("div",{className:"space-y-4",children:i.length===0?t.jsxs("div",{className:"glass-effect p-12 rounded-xl text-center",children:[t.jsx(Y,{className:"w-16 h-16 text-orange-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-orange-900 mb-2",children:""}),t.jsx("p",{className:"text-orange-700 mb-4",children:""}),t.jsxs(E,{onClick:k,children:[t.jsx(zt,{className:"w-4 h-4 mr-2"}),""]})]}):i.map((L,S)=>t.jsx(A.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass-effect p-4 rounded-xl",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"cursor-move text-orange-600 hover:text-orange-500",children:t.jsx(Um,{className:"w-5 h-5"})}),t.jsx("div",{className:"text-sm font-medium text-orange-700 w-8",children:L.order_index}),t.jsx("div",{className:"flex-shrink-0",children:$(L.content_type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("h3",{className:"text-lg font-semibold text-orange-900 truncate",children:L.title}),t.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-orange-200 text-orange-800",children:G(L.content_type)})]}),L.description&&t.jsx("p",{className:"text-orange-700 text-sm mt-1 truncate",children:L.description}),t.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-orange-600",children:[L.duration_minutes>0&&t.jsxs("span",{children:[": ",L.duration_minutes," "]}),L.is_free&&t.jsx("span",{className:"text-green-400",children:""}),L.completion_type&&L.completion_type!=="manual"&&t.jsx("span",{className:"px-2 py-1 rounded bg-blue-100 text-blue-700",children:U(L.completion_type)}),!L.is_required&&t.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-600",children:""})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(te,{to:`/courses/${s}/learn`,target:"_blank",children:t.jsx(E,{size:"sm",variant:"ghost",title:"",children:t.jsx(ze,{className:"w-4 h-4"})})}),L.content_type==="assignment"&&L.assignment_id&&t.jsx(te,{to:`/admin/assignments/${L.assignment_id}/grading`,children:t.jsx(E,{size:"sm",variant:"ghost",className:"text-orange-800 hover:text-orange-700",title:"",children:t.jsx(ds,{className:"w-4 h-4"})})}),t.jsx(E,{size:"sm",variant:"ghost",onClick:()=>T(L),className:"text-blue-600 hover:text-blue-700",title:"",children:t.jsx(ys,{className:"w-4 h-4"})}),t.jsx(E,{size:"sm",variant:"ghost",onClick:()=>j(L),title:"",children:t.jsx(hs,{className:"w-4 h-4"})}),t.jsx(E,{size:"sm",variant:"ghost",onClick:()=>_(L.id),className:"text-red-800 hover:text-red-700",title:"",children:t.jsx(Ye,{className:"w-4 h-4"})})]})]})},L.id))}),t.jsxs(be,{children:[c&&t.jsx(Xw,{mode:f,content:h,onSave:P,onClose:()=>u(!1)}),g&&t.jsx(Jw,{content:v,courseContent:i,onUpdate:N,onClose:()=>y(!1)})]})]}):t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-orange-900 mb-2",children:""}),t.jsx("p",{className:"text-orange-700",children:""})]})})},Zw=({submission:s,assignment:e,onGrade:r})=>{var h,m;const n=s.score!==null,a=s.is_late,i=new Date(s.submitted_at),o=a&&e.due_date?Math.ceil((i-new Date(e.due_date))/(1e3*60*60*24)):0,l=async(f,x)=>{try{const{data:g,error:y}=await C.storage.from("course-files").download(x);if(y)throw y;const v=URL.createObjectURL(g),b=document.createElement("a");b.href=v,b.download=f,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(v)}catch(g){console.error("Download error:",g),alert("")}},d=()=>n?"text-green-400":a?"text-red-400":"text-yellow-400",c=()=>n?t.jsx(Pe,{className:"w-4 h-4"}):a?t.jsx(jt,{className:"w-4 h-4"}):t.jsx(ce,{className:"w-4 h-4"}),u=()=>n?` (${s.score}/${e.max_score})`:a?` ${o} `:"";return t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-6 rounded-xl hover:bg-slate-700/30 transition-colors",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mr-3",children:t.jsx(dt,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:((h=s.user_profiles)==null?void 0:h.full_name)||""}),t.jsx("p",{className:"text-sm text-slate-400",children:((m=s.user_profiles)==null?void 0:m.email)||""})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{className:"flex items-center text-sm text-slate-400",children:[t.jsx(xs,{className:"w-4 h-4 mr-2"}),": ",i.toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),t.jsxs("div",{className:`flex items-center text-sm ${d()}`,children:[c(),t.jsx("span",{className:"ml-2",children:u()})]})]}),s.notes&&t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(is,{className:"w-4 h-4 text-slate-400 mr-2 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-slate-300 mb-1",children:":"}),t.jsx("p",{className:"text-sm text-slate-400",children:s.notes})]})]})})}),s.file_paths&&s.file_paths.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-sm font-medium text-slate-300 mb-2",children:":"}),t.jsx("div",{className:"space-y-2",children:s.file_paths.map((f,x)=>{const g=f.split("/").pop();return t.jsxs("div",{className:"flex items-center justify-between bg-slate-700/50 p-2 rounded",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Y,{className:"w-4 h-4 text-blue-400 mr-2"}),t.jsx("span",{className:"text-sm text-slate-300",children:g})]}),t.jsx(E,{size:"sm",variant:"ghost",onClick:()=>l(g,f),className:"text-blue-400 hover:text-blue-300",children:t.jsx(Ve,{className:"w-4 h-4"})})]},x)})})]}),n&&s.feedback&&t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"bg-green-500/10 border border-green-500/20 p-3 rounded-lg",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(ge,{className:"w-4 h-4 text-green-400 mr-2 mt-0.5"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-green-300 mb-1",children:":"}),t.jsx("p",{className:"text-sm text-green-200",children:s.feedback})]})]})})})]}),t.jsxs("div",{className:"ml-6 flex flex-col space-y-2",children:[t.jsxs(E,{onClick:r,className:`${n?"bg-blue-500 hover:bg-blue-600":"bg-green-500 hover:bg-green-600"}`,children:[t.jsx(ge,{className:"w-4 h-4 mr-2"}),n?"":""]}),s.file_paths&&s.file_paths.length>0&&t.jsxs(E,{variant:"outline",size:"sm",onClick:()=>{s.file_paths.forEach(f=>{const x=f.split("/").pop();l(x,f)})},children:[t.jsx(Ve,{className:"w-4 h-4 mr-2"}),""]})]})]}),n&&t.jsx("div",{className:"mt-4 pt-4 border-t border-slate-600",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(ge,{className:"w-5 h-5 text-yellow-400 mr-2"}),t.jsx("span",{className:"text-sm text-slate-400",children:":"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-2xl font-bold text-white mr-1",children:s.score}),t.jsxs("span",{className:"text-lg text-slate-400",children:["/ ",e.max_score]}),t.jsxs("span",{className:"ml-2 text-sm text-slate-400",children:["(",Math.round(s.score/e.max_score*100),"%)"]})]})]})})]})},Qw=({submission:s,assignment:e,onSave:r,onClose:n})=>{var x,g;const{toast:a}=se(),[i,o]=p.useState({score:s.score||"",feedback:s.feedback||"",grading_rubric_scores:s.grading_rubric_scores||{}}),[l,d]=p.useState(!1),c=["! "," "," "," ",""," "],u=async y=>{if(y.preventDefault(),!i.score||i.score===""){a({title:"",variant:"destructive"});return}const v=parseFloat(i.score);if(isNaN(v)||v<0||v>e.max_score){a({title:"",description:` 0-${e.max_score}`,variant:"destructive"});return}d(!0);try{await r({...i,score:v,graded_at:new Date().toISOString(),graded_by:"admin"})}catch(b){console.error("Grading error:",b)}finally{d(!1)}},h=async(y,v)=>{try{const{data:b,error:w}=await C.storage.from("course-files").download(v);if(w)throw w;const k=URL.createObjectURL(b),j=document.createElement("a");j.href=k,j.download=y,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(k)}catch(b){console.error("Download error:",b),a({title:"",variant:"destructive"})}},m=y=>{const v=y/e.max_score*100;return v>=80?"text-green-400":v>=70?"text-yellow-400":v>=60?"text-orange-400":"text-red-400"},f=y=>{const v=y/e.max_score*100;return v>=80?"A":v>=70?"B":v>=60?"C":v>=50?"D":"F"};return t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:n,children:t.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-effect rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:y=>y.stopPropagation(),children:[t.jsx("div",{className:"p-6 border-b border-white/10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:""}),t.jsx("p",{className:"text-slate-400 mt-1",children:e.title})]}),t.jsx(E,{variant:"ghost",size:"icon",onClick:n,children:t.jsx(tt,{className:"w-5 h-5"})})]})}),t.jsxs("div",{className:"flex flex-col lg:flex-row h-full max-h-[calc(90vh-88px)]",children:[t.jsxs("div",{className:"lg:w-1/2 p-6 border-r border-white/10 overflow-y-auto",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mr-3",children:t.jsx(dt,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-white",children:((x=s.user_profiles)==null?void 0:x.full_name)||""}),t.jsx("p",{className:"text-sm text-slate-400",children:(g=s.user_profiles)==null?void 0:g.email})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[t.jsxs("div",{className:"flex items-center text-sm text-slate-400",children:[t.jsx(xs,{className:"w-4 h-4 mr-2"}),": ",new Date(s.submitted_at).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),s.is_late&&t.jsxs("div",{className:"flex items-center text-sm text-red-400",children:[t.jsx(jt,{className:"w-4 h-4 mr-2"}),""]})]})]}),s.notes&&t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:":"}),t.jsx("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:t.jsx("p",{className:"text-sm text-slate-300",children:s.notes})})]}),s.file_paths&&s.file_paths.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:":"}),t.jsx("div",{className:"space-y-2",children:s.file_paths.map((y,v)=>{const b=y.split("/").pop();return t.jsxs("div",{className:"flex items-center justify-between bg-slate-700/50 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Y,{className:"w-4 h-4 text-blue-400 mr-2"}),t.jsx("span",{className:"text-sm text-slate-300",children:b})]}),t.jsx(E,{size:"sm",variant:"ghost",onClick:()=>h(b,y),className:"text-blue-400 hover:text-blue-300",children:t.jsx(Ve,{className:"w-4 h-4"})})]},v)})})]}),t.jsxs("div",{className:"bg-slate-700/30 p-4 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:":"}),t.jsx("p",{className:"text-sm text-slate-400 mb-3",children:e.instructions}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-slate-400",children:":"}),t.jsxs("span",{className:"text-white font-semibold",children:[e.max_score," "]})]})]})]}),t.jsx("div",{className:"lg:w-1/2 p-6 overflow-y-auto",children:t.jsxs("form",{onSubmit:u,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:" *"}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx("input",{type:"number",min:"0",max:e.max_score,step:"0.5",value:i.score,onChange:y=>o(v=>({...v,score:y.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white text-center text-xl font-bold",placeholder:"0",required:!0})}),t.jsxs("div",{className:"text-xl text-slate-400",children:["/ ",e.max_score]}),i.score&&t.jsx("div",{className:`text-lg font-bold ${m(parseFloat(i.score))}`,children:f(parseFloat(i.score))})]}),i.score&&t.jsx("div",{className:"mt-2 text-center",children:t.jsxs("span",{className:`text-sm ${m(parseFloat(i.score))}`,children:[Math.round(parseFloat(i.score)/e.max_score*100),"%"]})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-400 mb-2",children:":"}),t.jsx("div",{className:"grid grid-cols-4 gap-2",children:[25,50,75,100].map(y=>{const v=Math.round(y/100*e.max_score);return t.jsxs(E,{type:"button",variant:"outline",size:"sm",onClick:()=>o(b=>({...b,score:v.toString()})),className:"text-xs",children:[y,"%"]},y)})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"/"}),t.jsx("textarea",{value:i.feedback,onChange:y=>o(v=>({...v,feedback:y.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:6,placeholder:"..."})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-slate-400 mb-2",children:":"}),t.jsx("div",{className:"space-y-2",children:c.map((y,v)=>t.jsx("button",{type:"button",onClick:()=>o(b=>({...b,feedback:b.feedback?`${b.feedback}

${y}`:y})),className:"w-full text-left p-2 text-xs bg-slate-700/50 hover:bg-slate-700 rounded text-slate-300 hover:text-white transition-colors",children:y},v))})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-white/10",children:[t.jsx(E,{type:"button",variant:"outline",onClick:n,children:""}),t.jsx(E,{type:"submit",className:"bg-green-500 hover:bg-green-600",disabled:l,children:l?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"..."]}):t.jsxs(t.Fragment,{children:[t.jsx(gs,{className:"w-4 h-4 mr-2"}),""]})})]})]})})]})]})})},ej=()=>{const{assignmentId:s}=Br(),{toast:e}=se(),[r,n]=p.useState(null),[a,i]=p.useState([]),[o,l]=p.useState(!0),[d,c]=p.useState(""),[u,h]=p.useState("all"),[m,f]=p.useState(null),[x,g]=p.useState(!1),y=p.useCallback(async()=>{l(!0);try{const{data:j,error:T}=await fw(s);if(T)throw T;n(j);const{data:N,error:_}=await pw(s);if(_)throw _;i(N||[])}catch(j){e({title:"",description:j.message,variant:"destructive"})}finally{l(!1)}},[s,e]);p.useEffect(()=>{y()},[y]);const v=j=>{f(j),g(!0)},b=async j=>{try{const{error:T}=await xw(m.id,j);if(T)throw T;e({title:"",description:` ${j.score}/${r.max_score} `}),y(),g(!1),f(null)}catch(T){e({title:"",description:T.message,variant:"destructive"})}},w=a.filter(j=>{var _,P;const T=((P=(_=j.user_profiles)==null?void 0:_.full_name)==null?void 0:P.toLowerCase().includes(d.toLowerCase()))||!1,N=u==="all"||u==="graded"&&j.score!==null||u==="ungraded"&&j.score===null||u==="late"&&j.is_late;return T&&N}),k={total:a.length,graded:a.filter(j=>j.score!==null).length,ungraded:a.filter(j=>j.score===null).length,average:a.length>0&&Math.round(a.filter(j=>j.score!==null).reduce((j,T)=>j+(T.score||0),0)/a.filter(j=>j.score!==null).length)||0};return o?t.jsx("div",{className:"container mx-auto px-4 py-12",children:t.jsxs("div",{className:"flex items-center justify-center h-64",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),t.jsx("span",{className:"ml-3 text-slate-400",children:"..."})]})}):t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto px-4 py-12",children:[t.jsx(we,{children:t.jsx("title",{children:" -  Login Learning"})}),t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx(te,{to:"/admin/courses",className:"text-slate-400 hover:text-white transition-colors mr-4",children:t.jsx(Bt,{className:"w-5 h-5"})}),t.jsx("h1",{className:"text-2xl font-bold text-white",children:""})]}),r&&t.jsx("div",{className:"glass-effect p-6 rounded-xl",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:r.title}),t.jsx("p",{className:"text-slate-400 mb-4",children:r.description}),t.jsxs("div",{className:"flex items-center space-x-6 text-sm text-slate-400",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(ge,{className:"w-4 h-4 mr-1"}),": ",r.max_score]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(ce,{className:"w-4 h-4 mr-1"}),": ",r.due_date?new Date(r.due_date).toLocaleDateString("th-TH"):""]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(de,{className:"w-4 h-4 mr-1"}),": ",k.total," "]})]})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[t.jsx("div",{className:"glass-effect p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 text-sm",children:""}),t.jsx("p",{className:"text-2xl font-bold text-white",children:k.total})]}),t.jsx(Y,{className:"w-8 h-8 text-blue-400"})]})}),t.jsx("div",{className:"glass-effect p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 text-sm",children:""}),t.jsx("p",{className:"text-2xl font-bold text-green-400",children:k.graded})]}),t.jsx(Pe,{className:"w-8 h-8 text-green-400"})]})}),t.jsx("div",{className:"glass-effect p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 text-sm",children:""}),t.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:k.ungraded})]}),t.jsx(ye,{className:"w-8 h-8 text-yellow-400"})]})}),t.jsx("div",{className:"glass-effect p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 text-sm",children:""}),t.jsx("p",{className:"text-2xl font-bold text-purple-400",children:k.average})]}),t.jsx(ge,{className:"w-8 h-8 text-purple-400"})]})})]}),t.jsx("div",{className:"glass-effect p-4 rounded-lg mb-6",children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),t.jsx(fe,{type:"text",placeholder:"...",value:d,onChange:j=>c(j.target.value),className:"pl-10 bg-slate-700/50 border-slate-600 text-white"})]})}),t.jsx("div",{className:"w-full sm:w-48",children:t.jsxs("select",{value:u,onChange:j=>h(j.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:[t.jsx("option",{value:"all",children:""}),t.jsx("option",{value:"ungraded",children:""}),t.jsx("option",{value:"graded",children:""}),t.jsx("option",{value:"late",children:""})]})})]})}),t.jsx("div",{className:"space-y-4",children:w.length===0?t.jsxs("div",{className:"glass-effect p-8 rounded-lg text-center",children:[t.jsx(Y,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-400 text-lg",children:d||u!=="all"?"":""})]}):w.map(j=>t.jsx(Zw,{submission:j,assignment:r,onGrade:()=>v(j)},j.id))}),t.jsx(be,{children:x&&m&&t.jsx(Qw,{submission:m,assignment:r,onSave:b,onClose:()=>{g(!1),f(null)}})})]})},tj=()=>{const{toast:s}=se(),{user:e,signOut:r,isAdmin:n}=Le(),a=zr(),i=async()=>{try{await r(),s({title:""}),a("/")}catch(l){s({title:"",description:l.message,variant:"destructive"})}},o=[{to:"/",label:"",icon:zm},{to:"/courses",label:"",icon:ec},{to:"/onsite",label:" Onsite",icon:us},{to:"/admissions",label:"",icon:Fm},{to:"/about",label:"",icon:cc},{to:"/contact",label:"",icon:$t}];return t.jsx(A.nav,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8},className:"glass-effect fixed top-0 left-0 right-0 z-50 px-4 sm:px-6 py-3 shadow-lg",children:t.jsxs("div",{className:"max-w-screen-xl mx-auto flex items-center justify-between",children:[t.jsxs(te,{to:"/",className:"flex items-center space-x-2",children:[t.jsx("img",{src:"/Logo.png",alt:"Login Learning Logo",className:"w-10 h-10 object-contain"}),t.jsx("span",{className:"text-xl sm:text-2xl font-bold text-black hidden sm:block",children:"Login Learning"})]}),t.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[o.map(l=>t.jsxs(te,{to:l.to,className:"text-black hover:text-blue-700 transition-colors flex items-center space-x-1",children:[t.jsx(l.icon,{className:"w-4 h-4"}),t.jsx("span",{children:l.label})]},l.to)),n&&t.jsxs(te,{to:"/admin",className:"text-blue-600 hover:text-blue-800 transition-colors flex items-center space-x-1",children:[t.jsx(nf,{className:"w-4 h-4"}),t.jsx("span",{children:""})]})]}),t.jsx("div",{className:"flex items-center space-x-2 sm:space-x-3",children:e?t.jsxs(t.Fragment,{children:[t.jsx(E,{variant:"ghost",className:"text-black hover:bg-blue-50 hover:text-blue-700 px-2 sm:px-3 py-1 sm:py-2",asChild:!0,children:t.jsxs(te,{to:"/dashboard",className:"flex items-center space-x-1",children:[t.jsx(ac,{className:"w-4 h-4 sm:w-5 sm:h-5"}),t.jsx("span",{className:"hidden sm:inline",children:""})]})}),t.jsxs(E,{variant:"outline",className:"text-black border-slate-300 hover:bg-blue-50 hover:text-blue-700 hover:border-blue-300 px-2 sm:px-3 py-1 sm:py-2",onClick:i,children:[t.jsx(Hm,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-0 sm:mr-1"}),t.jsx("span",{className:"hidden sm:inline",children:""})]})]}):t.jsxs(t.Fragment,{children:[t.jsx(E,{variant:"ghost",className:"text-black hover:bg-blue-50 hover:text-blue-700 px-2 sm:px-3 py-1 sm:py-2",asChild:!0,children:t.jsx(te,{to:"/login",children:""})}),t.jsx(E,{className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 text-gray-800 px-2 sm:px-3 py-1 sm:py-2",asChild:!0,children:t.jsx(te,{to:"/signup",children:""})})]})})]})})},sj=()=>{const s={name:"Login Learning",description:" - /",address:"917  75  ",contacts:[{name:"",phone:"090-969-9578"},{name:"",phone:"083-436-0294"}],lineGroup:"https://line.me/ti/g/TbTTLXEkRS",email:"info@loginlearning.com"},e=[{name:"",address:" ,  10520"},{name:"",address:"400 . 75 ,  10700"},{name:"",address:"165/31   20110"},{name:"",address:"84/48   21000"}];return t.jsx("footer",{className:"py-12 px-6 border-t border-slate-200 bg-slate-50 backdrop-blur-md",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12",children:[t.jsxs("div",{children:[t.jsxs(te,{to:"/",className:"flex items-center space-x-3 mb-6",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-700 to-blue-500 rounded-lg flex items-center justify-center",children:t.jsx(oe,{className:"w-6 h-6 text-blue-800"})}),t.jsx("span",{className:"text-2xl font-bold text-black",children:s.name})]}),t.jsx("p",{className:"text-black opacity-80 leading-relaxed mb-4",children:s.description}),t.jsxs("div",{className:"flex items-start space-x-2 text-black mb-2",children:[t.jsx(us,{className:"w-5 h-5 mt-1 text-blue-600 shrink-0"}),t.jsx("span",{children:s.address})]}),t.jsxs("div",{className:"flex items-center space-x-2 text-black mb-2",children:[t.jsx(ct,{className:"w-5 h-5 text-blue-600 shrink-0"}),t.jsx("a",{href:`mailto:${s.email}`,className:"hover:text-blue-700 transition-colors",children:s.email})]}),s.contacts.map(r=>t.jsxs("div",{className:"flex items-center space-x-2 text-black mb-1",children:[t.jsx($t,{className:"w-5 h-5 text-blue-600 shrink-0"}),t.jsxs("span",{children:[r.name,": ",r.phone]})]},r.name)),t.jsxs("div",{className:"flex items-center space-x-2 text-black mt-2",children:[t.jsx(de,{className:"w-5 h-5 text-blue-600 shrink-0"}),t.jsx("a",{href:s.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-700 transition-colors",children:"Line Group"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-black font-semibold mb-4 text-lg",children:""}),t.jsx("ul",{className:"space-y-3",children:e.map(r=>t.jsxs("li",{children:[t.jsx("p",{className:"font-medium text-black",children:r.name}),t.jsx("p",{className:"text-black text-sm",children:r.address})]},r.name))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-black font-semibold mb-4 text-lg",children:""}),t.jsxs("ul",{className:"space-y-2 text-black",children:[t.jsx("li",{children:t.jsx(te,{to:"/courses",className:"hover:text-blue-700 transition-colors",children:""})}),t.jsx("li",{children:t.jsx(te,{to:"/admissions",className:"hover:text-blue-700 transition-colors",children:""})}),t.jsx("li",{children:t.jsx(te,{to:"/about#services",className:"hover:text-blue-700 transition-colors",children:""})}),t.jsx("li",{children:t.jsx(te,{to:"/about#projects",className:"hover:text-blue-700 transition-colors",children:""})}),t.jsx("li",{children:t.jsx(te,{to:"/contact",className:"hover:text-blue-700 transition-colors",children:""})})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-black font-semibold mb-4 text-lg",children:""}),t.jsxs("ul",{className:"space-y-2 text-black",children:[t.jsx("li",{children:t.jsx("button",{onClick:()=>alert(" "),className:"hover:text-blue-700 transition-colors",children:"Facebook"})}),t.jsx("li",{children:t.jsx("button",{onClick:()=>alert(" "),className:"hover:text-blue-700 transition-colors",children:"Instagram"})}),t.jsx("li",{children:t.jsx("button",{onClick:()=>alert(" "),className:"hover:text-blue-700 transition-colors",children:"YouTube"})}),t.jsx("li",{children:t.jsx("a",{href:s.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-700 transition-colors",children:"Line Official"})})]})]})]}),t.jsxs("div",{className:"border-t border-slate-300 mt-8 pt-8 text-center",children:[t.jsxs("p",{className:"text-black",children:[" ",new Date().getFullYear()," ",s.name,". ."]}),t.jsx("p",{className:"text-xs text-black mt-1",children:" "})]})]})})},On=({children:s})=>{const{user:e,loading:r,isSupabaseConnected:n}=Le(),a=nl();return r?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("p",{className:"text-white text-xl",children:"..."})}):n?e?s:t.jsx(Rs,{to:"/login",state:{from:a},replace:!0}):t.jsx(Rs,{to:"/login",state:{from:a,message:" Supabase "},replace:!0})},Ps=({children:s})=>{const{user:e,isAdmin:r,loading:n,isSupabaseConnected:a}=Le(),i=nl();return n?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("p",{className:"text-white text-xl",children:"..."})}):a?e?r?s:t.jsx(Rs,{to:"/dashboard",state:{message:""},replace:!0}):t.jsx(Rs,{to:"/login",state:{from:i},replace:!0}):t.jsx(Rs,{to:"/login",state:{from:i,message:" Supabase "},replace:!0})};function rj(){return t.jsxs(ml,{children:[t.jsxs(we,{children:[t.jsx("title",{children:"Login Learning - "}),t.jsx("meta",{name:"description",content:"    24 "})]}),t.jsx(Cu,{children:t.jsx(Bx,{children:t.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-white to-slate-50 text-black",children:[t.jsx(tj,{}),t.jsx("main",{className:"flex-grow pt-20",children:t.jsxs(Tu,{children:[t.jsx(je,{path:"/",element:t.jsx(iv,{})}),t.jsx(je,{path:"/about",element:t.jsx(ov,{})}),t.jsx(je,{path:"/courses",element:t.jsx(fv,{})}),t.jsx(je,{path:"/courses/:courseId",element:t.jsx(Yv,{})}),t.jsx(je,{path:"/courses/:courseId/learn",element:t.jsx(On,{children:t.jsx(ww,{})})}),t.jsx(je,{path:"/onsite",element:t.jsx(jw,{})}),t.jsx(je,{path:"/admissions",element:t.jsx(Nw,{})}),t.jsx(je,{path:"/contact",element:t.jsx(_w,{})}),t.jsx(je,{path:"/login",element:t.jsx(kw,{})}),t.jsx(je,{path:"/signup",element:t.jsx(Sw,{})}),t.jsx(je,{path:"/dashboard",element:t.jsx(On,{children:t.jsx(Cw,{})})}),t.jsx(je,{path:"/profile",element:t.jsx(On,{children:t.jsx(Tw,{})})}),t.jsx(je,{path:"/admin",element:t.jsx(Ps,{children:t.jsx(Pw,{})})}),t.jsx(je,{path:"/admin/users",element:t.jsx(Ps,{children:t.jsx(Lw,{})})}),t.jsx(je,{path:"/admin/courses",element:t.jsx(Ps,{children:t.jsx(Mw,{})})}),t.jsx(je,{path:"/admin/courses/:courseId/content",element:t.jsx(Ps,{children:t.jsx(Yw,{})})}),t.jsx(je,{path:"/admin/assignments/:assignmentId/grading",element:t.jsx(Ps,{children:t.jsx(ej,{})})})]})}),t.jsx(sj,{}),t.jsx(jf,{})]})})})]})}$n.createRoot(document.getElementById("root")).render(t.jsx(re.StrictMode,{children:t.jsx(rj,{})}));
