import{r,u as E,j as e,H as z,n as F,A as G,aa as q,b5 as I,ag as g,g as U}from"./vendor-a7f5a9e8.js";import{a as A,u as B,I as n,B as f}from"./admin-0e30eae8.js";import{m as t}from"./ui-b0ca5b02.js";import"./vendor-misc-68264ea8.js";const D=()=>{const[m,h]=r.useState(""),[c,b]=r.useState(""),[p,v]=r.useState(""),[x,j]=r.useState(""),[d,l]=r.useState(!1),[y,i]=r.useState(""),{signUpWithPassword:w,signInWithGoogle:N,isSupabaseConnected:o}=A(),S=E(),{toast:s}=B(),C=async a=>{if(a.preventDefault(),i(""),!o){s({title:"⚠️ ยังไม่ได้เชื่อมต่อ Supabase",description:"โปรดเชื่อมต่อ Supabase ก่อนทำการสมัครสมาชิก",variant:"destructive"});return}if(c!==p){i("รหัสผ่านไม่ตรงกัน"),s({title:"ข้อผิดพลาด",description:"รหัสผ่านและการยืนยันรหัสผ่านไม่ตรงกัน",variant:"destructive"});return}l(!0);const{error:u}=await w(m,c,x);l(!1),u?(i(u.message),s({title:"สมัครสมาชิกไม่สำเร็จ",description:u.message,variant:"destructive"})):(s({title:"สมัครสมาชิกสำเร็จ!",description:"กรุณาตรวจสอบอีเมลของคุณเพื่อยืนยันบัญชี"}),S("/login"))},k=async()=>{if(i(""),!o){s({title:"⚠️ ยังไม่ได้เชื่อมต่อ Supabase",description:"โปรดเชื่อมต่อ Supabase ก่อนทำการสมัครสมาชิกด้วย Google",variant:"destructive"});return}l(!0);const{error:a}=await N();l(!1),a&&(i(a.message),s({title:"สมัครสมาชิกด้วย Google ไม่สำเร็จ",description:a.message,variant:"destructive"}))},L={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},P={type:"tween",ease:"anticipate",duration:.5};return e.jsxs(t.div,{initial:"initial",animate:"in",exit:"out",variants:L,transition:P,className:"min-h-screen flex items-center justify-center pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:[e.jsxs(z,{children:[e.jsx("title",{children:"สมัครสมาชิก - Login Learning"}),e.jsx("meta",{name:"description",content:"สร้างบัญชี Login Learning ใหม่เพื่อเริ่มต้นการเรียนรู้และค้นพบศักยภาพด้านวิศวกรรม"})]}),e.jsxs("div",{className:"max-w-md w-full space-y-8 glass-effect p-10 rounded-xl shadow-2xl",children:[e.jsxs("div",{children:[e.jsx(t.h2,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mt-6 text-center text-4xl font-extrabold text-gray-900",children:"สร้างบัญชีใหม่"}),e.jsxs(t.p,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"mt-2 text-center text-sm text-gray-700",children:["หรือ"," ",e.jsx(F,{to:"/login",className:"font-medium text-blue-400 hover:text-blue-300",children:"เข้าสู่ระบบหากมีบัญชีแล้ว"})]})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:C,children:[y&&e.jsxs(t.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 p-3 rounded-md flex items-center text-red-300 text-sm",children:[e.jsx(G,{className:"w-5 h-5 mr-2"}),y]}),e.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[e.jsxs(t.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.3},children:[e.jsx("label",{htmlFor:"full-name",className:"sr-only",children:"ชื่อ-นามสกุล"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{id:"full-name",name:"fullName",type:"text",autoComplete:"name",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"ชื่อ-นามสกุล",value:x,onChange:a=>j(a.target.value)}),e.jsx(q,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),e.jsxs(t.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.4},children:[e.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"อีเมล"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"อีเมล",value:m,onChange:a=>h(a.target.value)}),e.jsx(I,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),e.jsxs(t.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.5},children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"รหัสผ่าน"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"รหัสผ่าน (อย่างน้อย 6 ตัวอักษร)",value:c,onChange:a=>b(a.target.value)}),e.jsx(g,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),e.jsxs(t.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.6},children:[e.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"ยืนยันรหัสผ่าน"}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{id:"confirm-password",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"ยืนยันรหัสผ่าน",value:p,onChange:a=>v(a.target.value)}),e.jsx(g,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]})]}),e.jsx(t.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.7},children:e.jsxs(f,{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-gray-800 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:d||!o,children:[e.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:e.jsx(U,{className:"h-5 w-5 text-blue-300 group-hover:text-blue-200","aria-hidden":"true"})}),d?"กำลังสร้างบัญชี...":"สร้างบัญชี"]})})]}),e.jsxs(t.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.8},className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-gray-800 text-gray-400 rounded-md",children:"หรือสมัครด้วย"})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(f,{onClick:k,variant:"outline",className:"w-full flex justify-center py-3 px-4 border-gray-300 text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:d||!o,children:[e.jsx("svg",{className:"w-5 h-5 mr-2","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:e.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.7 512 244 512 110.3 512 0 401.7 0 265.2S110.3 18.3 244 18.3c67.4 0 120.9 24.8 160.4 60.3l-64.8 63.1c-20.1-18.9-48.4-30.8-89.3-30.8-70.1 0-128.2 57.2-128.2 128.2s58.1 128.2 128.2 128.2c80.3 0 110.1-58.8 113.8-87.9H244v-74.6h236.7c2.3 12.7 3.8 25.9 3.8 39.9z"})}),"สมัครด้วย Google"]})})]}),!o&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"mt-4 text-center text-yellow-400 text-sm p-3 bg-yellow-500/10 rounded-md",children:"⚠️ Supabase ยังไม่ได้เชื่อมต่อ! กรุณาเชื่อมต่อ Supabase ในหน้าตั้งค่าเพื่อเปิดใช้งานระบบสมัครสมาชิก"})]})]})};export{D as default};
