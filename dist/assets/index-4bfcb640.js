var qd=Object.defineProperty;var Gd=(t,e,r)=>e in t?qd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var qe=(t,e,r)=>(Gd(t,typeof e!="symbol"?e+"":e,r),r);import{r as p,a as Qn,g as ea,b as Z,c as Hd,R as Wd,d as Kd,e as Re}from"./vendor-48cd178f.js";import{L as Y,u as wr,a as jr,b as Po,N as ms,B as Xd,R as Jd,c as pe}from"./router-95e73c68.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Ao={exports:{}},Nr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yd=p,Zd=Symbol.for("react.element"),Qd=Symbol.for("react.fragment"),eu=Object.prototype.hasOwnProperty,tu=Yd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,su={key:!0,ref:!0,__self:!0,__source:!0};function Lo(t,e,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)eu.call(e,n)&&!su.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Zd,type:t,key:i,ref:o,props:a,_owner:tu.current}}Nr.Fragment=Qd;Nr.jsx=Lo;Nr.jsxs=Lo;Ao.exports=Nr;var s=Ao.exports,gn={},Ba=Qn;gn.createRoot=Ba.createRoot,gn.hydrateRoot=Ba.hydrateRoot;var ru=typeof Element<"u",nu=typeof Map=="function",au=typeof Set=="function",iu=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Qs(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,n,a;if(Array.isArray(t)){if(r=t.length,r!=e.length)return!1;for(n=r;n--!==0;)if(!Qs(t[n],e[n]))return!1;return!0}var i;if(nu&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(n=i.next()).done;)if(!e.has(n.value[0]))return!1;for(i=t.entries();!(n=i.next()).done;)if(!Qs(n.value[1],e.get(n.value[0])))return!1;return!0}if(au&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(n=i.next()).done;)if(!e.has(n.value[0]))return!1;return!0}if(iu&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(r=t.length,r!=e.length)return!1;for(n=r;n--!==0;)if(t[n]!==e[n])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,a[n]))return!1;if(ru&&t instanceof Element)return!1;for(n=r;n--!==0;)if(!((a[n]==="_owner"||a[n]==="__v"||a[n]==="__o")&&t.$$typeof)&&!Qs(t[a[n]],e[a[n]]))return!1;return!0}return t!==t&&e!==e}var ou=function(e,r){try{return Qs(e,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const lu=ea(ou);var cu=function(t,e,r,n,a,i,o,l){if(!t){var d;if(e===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,a,i,o,l],u=0;d=new Error(e.replace(/%s/g,function(){return c[u++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}},du=cu;const za=ea(du);var uu=function(e,r,n,a){var i=n?n.call(a,e,r):void 0;if(i!==void 0)return!!i;if(e===r)return!0;if(typeof e!="object"||!e||typeof r!="object"||!r)return!1;var o=Object.keys(e),l=Object.keys(r);if(o.length!==l.length)return!1;for(var d=Object.prototype.hasOwnProperty.bind(r),c=0;c<o.length;c++){var u=o[c];if(!d(u))return!1;var h=e[u],m=r[u];if(i=n?n.call(a,h,m,u):void 0,i===!1||i===void 0&&h!==m)return!1}return!0};const hu=ea(uu);var Ro=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(Ro||{}),qr={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},qa=Object.values(Ro),ta={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},mu=Object.entries(ta).reduce((t,[e,r])=>(t[r]=e,t),{}),Fe="data-rh",qt={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Gt=(t,e)=>{for(let r=t.length-1;r>=0;r-=1){const n=t[r];if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}return null},fu=t=>{let e=Gt(t,"title");const r=Gt(t,qt.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),r&&e)return r.replace(/%s/g,()=>e);const n=Gt(t,qt.DEFAULT_TITLE);return e||n||void 0},pu=t=>Gt(t,qt.ON_CHANGE_CLIENT_STATE)||(()=>{}),Gr=(t,e)=>e.filter(r=>typeof r[t]<"u").map(r=>r[t]).reduce((r,n)=>({...r,...n}),{}),xu=(t,e)=>e.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,n)=>{if(!r.length){const a=Object.keys(n);for(let i=0;i<a.length;i+=1){const l=a[i].toLowerCase();if(t.indexOf(l)!==-1&&n[l])return r.concat(n)}}return r},[]),gu=t=>console&&typeof console.warn=="function"&&console.warn(t),rs=(t,e,r)=>{const n={};return r.filter(a=>Array.isArray(a[t])?!0:(typeof a[t]<"u"&&gu(`Helmet: ${t} should be of type "Array". Instead found type "${typeof a[t]}"`),!1)).map(a=>a[t]).reverse().reduce((a,i)=>{const o={};i.filter(d=>{let c;const u=Object.keys(d);for(let m=0;m<u.length;m+=1){const f=u[m],x=f.toLowerCase();e.indexOf(x)!==-1&&!(c==="rel"&&d[c].toLowerCase()==="canonical")&&!(x==="rel"&&d[x].toLowerCase()==="stylesheet")&&(c=x),e.indexOf(f)!==-1&&(f==="innerHTML"||f==="cssText"||f==="itemprop")&&(c=f)}if(!c||!d[c])return!1;const h=d[c].toLowerCase();return n[c]||(n[c]={}),o[c]||(o[c]={}),n[c][h]?!1:(o[c][h]=!0,!0)}).reverse().forEach(d=>a.push(d));const l=Object.keys(o);for(let d=0;d<l.length;d+=1){const c=l[d],u={...n[c],...o[c]};n[c]=u}return a},[]).reverse()},yu=(t,e)=>{if(Array.isArray(t)&&t.length){for(let r=0;r<t.length;r+=1)if(t[r][e])return!0}return!1},vu=t=>({baseTag:xu(["href"],t),bodyAttributes:Gr("bodyAttributes",t),defer:Gt(t,qt.DEFER),encode:Gt(t,qt.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Gr("htmlAttributes",t),linkTags:rs("link",["rel","href"],t),metaTags:rs("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:rs("noscript",["innerHTML"],t),onChangeClientState:pu(t),scriptTags:rs("script",["src","innerHTML"],t),styleTags:rs("style",["cssText"],t),title:fu(t),titleAttributes:Gr("titleAttributes",t),prioritizeSeoTags:yu(t,qt.PRIORITIZE_SEO_TAGS)}),Io=t=>Array.isArray(t)?t.join(""):t,bu=(t,e)=>{const r=Object.keys(t);for(let n=0;n<r.length;n+=1)if(e[r[n]]&&e[r[n]].includes(t[r[n]]))return!0;return!1},Hr=(t,e)=>Array.isArray(t)?t.reduce((r,n)=>(bu(n,e)?r.priority.push(n):r.default.push(n),r),{priority:[],default:[]}):{default:t,priority:[]},Ga=(t,e)=>({...t,[e]:void 0}),wu=["noscript","script","style"],yn=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Mo=t=>Object.keys(t).reduce((e,r)=>{const n=typeof t[r]<"u"?`${r}="${t[r]}"`:`${r}`;return e?`${e} ${n}`:n},""),ju=(t,e,r,n)=>{const a=Mo(r),i=Io(e);return a?`<${t} ${Fe}="true" ${a}>${yn(i,n)}</${t}>`:`<${t} ${Fe}="true">${yn(i,n)}</${t}>`},Nu=(t,e,r=!0)=>e.reduce((n,a)=>{const i=a,o=Object.keys(i).filter(c=>!(c==="innerHTML"||c==="cssText")).reduce((c,u)=>{const h=typeof i[u]>"u"?u:`${u}="${yn(i[u],r)}"`;return c?`${c} ${h}`:h},""),l=i.innerHTML||i.cssText||"",d=wu.indexOf(t)===-1;return`${n}<${t} ${Fe}="true" ${o}${d?"/>":`>${l}</${t}>`}`},""),Oo=(t,e={})=>Object.keys(t).reduce((r,n)=>{const a=ta[n];return r[a||n]=t[n],r},e),_u=(t,e,r)=>{const n={key:e,[Fe]:!0},a=Oo(r,n);return[Z.createElement("title",a,e)]},er=(t,e)=>e.map((r,n)=>{const a={key:n,[Fe]:!0};return Object.keys(r).forEach(i=>{const l=ta[i]||i;if(l==="innerHTML"||l==="cssText"){const d=r.innerHTML||r.cssText;a.dangerouslySetInnerHTML={__html:d}}else a[l]=r[i]}),Z.createElement(t,a)}),Le=(t,e,r=!0)=>{switch(t){case"title":return{toComponent:()=>_u(t,e.title,e.titleAttributes),toString:()=>ju(t,e.title,e.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Oo(e),toString:()=>Mo(e)};default:return{toComponent:()=>er(t,e),toString:()=>Nu(t,e,r)}}},ku=({metaTags:t,linkTags:e,scriptTags:r,encode:n})=>{const a=Hr(t,qr.meta),i=Hr(e,qr.link),o=Hr(r,qr.script);return{priorityMethods:{toComponent:()=>[...er("meta",a.priority),...er("link",i.priority),...er("script",o.priority)],toString:()=>`${Le("meta",a.priority,n)} ${Le("link",i.priority,n)} ${Le("script",o.priority,n)}`},metaTags:a.default,linkTags:i.default,scriptTags:o.default}},Su=t=>{const{baseTag:e,bodyAttributes:r,encode:n=!0,htmlAttributes:a,noscriptTags:i,styleTags:o,title:l="",titleAttributes:d,prioritizeSeoTags:c}=t;let{linkTags:u,metaTags:h,scriptTags:m}=t,f={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:f,linkTags:u,metaTags:h,scriptTags:m}=ku(t)),{priority:f,base:Le("base",e,n),bodyAttributes:Le("bodyAttributes",r,n),htmlAttributes:Le("htmlAttributes",a,n),link:Le("link",u,n),meta:Le("meta",h,n),noscript:Le("noscript",i,n),script:Le("script",m,n),style:Le("style",o,n),title:Le("title",{title:l,titleAttributes:d},n)}},vn=Su,Us=[],Do=!!(typeof window<"u"&&window.document&&window.document.createElement),bn=class{constructor(t,e){qe(this,"instances",[]);qe(this,"canUseDOM",Do);qe(this,"context");qe(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Us:this.instances,add:t=>{(this.canUseDOM?Us:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Us:this.instances).indexOf(t);(this.canUseDOM?Us:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=vn({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Tu={},$o=Z.createContext(Tu),Xt,Fo=(Xt=class extends p.Component{constructor(r){super(r);qe(this,"helmetData");this.helmetData=new bn(this.props.context||{},Xt.canUseDOM)}render(){return Z.createElement($o.Provider,{value:this.helmetData.value},this.props.children)}},qe(Xt,"canUseDOM",Do),Xt),It=(t,e)=>{const r=document.head||document.querySelector("head"),n=r.querySelectorAll(`${t}[${Fe}]`),a=[].slice.call(n),i=[];let o;return e&&e.length&&e.forEach(l=>{const d=document.createElement(t);for(const c in l)if(Object.prototype.hasOwnProperty.call(l,c))if(c==="innerHTML")d.innerHTML=l.innerHTML;else if(c==="cssText")d.styleSheet?d.styleSheet.cssText=l.cssText:d.appendChild(document.createTextNode(l.cssText));else{const u=c,h=typeof l[u]>"u"?"":l[u];d.setAttribute(c,h)}d.setAttribute(Fe,"true"),a.some((c,u)=>(o=u,d.isEqualNode(c)))?a.splice(o,1):i.push(d)}),a.forEach(l=>{var d;return(d=l.parentNode)==null?void 0:d.removeChild(l)}),i.forEach(l=>r.appendChild(l)),{oldTags:a,newTags:i}},wn=(t,e)=>{const r=document.getElementsByTagName(t)[0];if(!r)return;const n=r.getAttribute(Fe),a=n?n.split(","):[],i=[...a],o=Object.keys(e);for(const l of o){const d=e[l]||"";r.getAttribute(l)!==d&&r.setAttribute(l,d),a.indexOf(l)===-1&&a.push(l);const c=i.indexOf(l);c!==-1&&i.splice(c,1)}for(let l=i.length-1;l>=0;l-=1)r.removeAttribute(i[l]);a.length===i.length?r.removeAttribute(Fe):r.getAttribute(Fe)!==o.join(",")&&r.setAttribute(Fe,o.join(","))},Cu=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=Io(t)),wn("title",e)},Ha=(t,e)=>{const{baseTag:r,bodyAttributes:n,htmlAttributes:a,linkTags:i,metaTags:o,noscriptTags:l,onChangeClientState:d,scriptTags:c,styleTags:u,title:h,titleAttributes:m}=t;wn("body",n),wn("html",a),Cu(h,m);const f={baseTag:It("base",r),linkTags:It("link",i),metaTags:It("meta",o),noscriptTags:It("noscript",l),scriptTags:It("script",c),styleTags:It("style",u)},x={},b={};Object.keys(f).forEach(g=>{const{newTags:v,oldTags:y}=f[g];v.length&&(x[g]=v),y.length&&(b[g]=f[g].oldTags)}),e&&e(),d(t,x,b)},ns=null,Eu=t=>{ns&&cancelAnimationFrame(ns),t.defer?ns=requestAnimationFrame(()=>{Ha(t,()=>{ns=null})}):(Ha(t),ns=null)},Pu=Eu,Wa=class extends p.Component{constructor(){super(...arguments);qe(this,"rendered",!1)}shouldComponentUpdate(e){return!hu(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:r}=this.props.context;let n=null;const a=vu(e.get().map(i=>{const o={...i.props};return delete o.context,o}));Fo.canUseDOM?Pu(a):vn&&(n=vn(a)),r(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},xn,fe=(xn=class extends p.Component{shouldComponentUpdate(t){return!lu(Ga(this.props,"helmetData"),Ga(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,r,n){return{...e,[t.type]:[...e[t.type]||[],{...r,...this.mapNestedChildrenToProps(t,n)}]}}mapObjectTypeChildren(t,e,r,n){switch(t.type){case"title":return{...e,[t.type]:n,titleAttributes:{...r}};case"body":return{...e,bodyAttributes:{...r}};case"html":return{...e,htmlAttributes:{...r}};default:return{...e,[t.type]:{...r}}}}mapArrayTypeChildrenToProps(t,e){let r={...e};return Object.keys(t).forEach(n=>{r={...r,[n]:t[n]}}),r}warnOnInvalidChildren(t,e){return za(qa.some(r=>t.type===r),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${qa.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),za(!e||typeof e=="string"||Array.isArray(e)&&!e.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let r={};return Z.Children.forEach(t,n=>{if(!n||!n.props)return;const{children:a,...i}=n.props,o=Object.keys(i).reduce((d,c)=>(d[mu[c]||c]=i[c],d),{});let{type:l}=n;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(n,a),l){case"Symbol(react.fragment)":e=this.mapChildrenToProps(a,e);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(n,r,o,a);break;default:e=this.mapObjectTypeChildren(n,e,o,a);break}}),this.mapArrayTypeChildrenToProps(r,e)}render(){const{children:t,...e}=this.props;let r={...e},{helmetData:n}=e;if(t&&(r=this.mapChildrenToProps(t,r)),n&&!(n instanceof bn)){const a=n;n=new bn(a.context,!0),delete r.helmetData}return n?Z.createElement(Wa,{...r,context:n.value}):Z.createElement($o.Consumer,null,a=>Z.createElement(Wa,{...r,context:a}))}},qe(xn,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),xn);function Uo(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=Uo(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Vo(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=Uo(t))&&(n&&(n+=" "),n+=e);return n}function Au(){for(var t=0,e,r,n="";t<arguments.length;)(e=arguments[t++])&&(r=Bo(e))&&(n&&(n+=" "),n+=r);return n}function Bo(t){if(typeof t=="string")return t;for(var e,r="",n=0;n<t.length;n++)t[n]&&(e=Bo(t[n]))&&(r&&(r+=" "),r+=e);return r}var sa="-";function Lu(t){var e=Iu(t),r=t.conflictingClassGroups,n=t.conflictingClassGroupModifiers,a=n===void 0?{}:n;function i(l){var d=l.split(sa);return d[0]===""&&d.length!==1&&d.shift(),zo(d,e)||Ru(l)}function o(l,d){var c=r[l]||[];return d&&a[l]?[].concat(c,a[l]):c}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function zo(t,e){var o;if(t.length===0)return e.classGroupId;var r=t[0],n=e.nextPart.get(r),a=n?zo(t.slice(1),n):void 0;if(a)return a;if(e.validators.length!==0){var i=t.join(sa);return(o=e.validators.find(function(l){var d=l.validator;return d(i)}))==null?void 0:o.classGroupId}}var Ka=/^\[(.+)\]$/;function Ru(t){if(Ka.test(t)){var e=Ka.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}}function Iu(t){var e=t.theme,r=t.prefix,n={nextPart:new Map,validators:[]},a=Ou(Object.entries(t.classGroups),r);return a.forEach(function(i){var o=i[0],l=i[1];jn(l,n,o,e)}),n}function jn(t,e,r,n){t.forEach(function(a){if(typeof a=="string"){var i=a===""?e:Xa(e,a);i.classGroupId=r;return}if(typeof a=="function"){if(Mu(a)){jn(a(n),e,r,n);return}e.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(function(o){var l=o[0],d=o[1];jn(d,Xa(e,l),r,n)})})}function Xa(t,e){var r=t;return e.split(sa).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function Mu(t){return t.isThemeGetter}function Ou(t,e){return e?t.map(function(r){var n=r[0],a=r[1],i=a.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var d=l[0],c=l[1];return[e+d,c]})):o});return[n,i]}):t}function Du(t){if(t<1)return{get:function(){},set:function(){}};var e=0,r=new Map,n=new Map;function a(i,o){r.set(i,o),e++,e>t&&(e=0,n=r,r=new Map)}return{get:function(o){var l=r.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return a(o,l),l},set:function(o,l){r.has(o)?r.set(o,l):a(o,l)}}}var qo="!";function $u(t){var e=t.separator||":",r=e.length===1,n=e[0],a=e.length;return function(o){for(var l=[],d=0,c=0,u,h=0;h<o.length;h++){var m=o[h];if(d===0){if(m===n&&(r||o.slice(h,h+a)===e)){l.push(o.slice(c,h)),c=h+a;continue}if(m==="/"){u=h;continue}}m==="["?d++:m==="]"&&d--}var f=l.length===0?o:o.substring(c),x=f.startsWith(qo),b=x?f.substring(1):f,g=u&&u>c?u-c:void 0;return{modifiers:l,hasImportantModifier:x,baseClassName:b,maybePostfixModifierPosition:g}}}function Fu(t){if(t.length<=1)return t;var e=[],r=[];return t.forEach(function(n){var a=n[0]==="[";a?(e.push.apply(e,r.sort().concat([n])),r=[]):r.push(n)}),e.push.apply(e,r.sort()),e}function Uu(t){return{cache:Du(t.cacheSize),splitModifiers:$u(t),...Lu(t)}}var Vu=/\s+/;function Bu(t,e){var r=e.splitModifiers,n=e.getClassGroupId,a=e.getConflictingClassGroupIds,i=new Set;return t.trim().split(Vu).map(function(o){var l=r(o),d=l.modifiers,c=l.hasImportantModifier,u=l.baseClassName,h=l.maybePostfixModifierPosition,m=n(h?u.substring(0,h):u),f=!!h;if(!m){if(!h)return{isTailwindClass:!1,originalClassName:o};if(m=n(u),!m)return{isTailwindClass:!1,originalClassName:o};f=!1}var x=Fu(d).join(":"),b=c?x+qo:x;return{isTailwindClass:!0,modifierId:b,classGroupId:m,originalClassName:o,hasPostfixModifier:f}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,d=o.classGroupId,c=o.hasPostfixModifier,u=l+d;return i.has(u)?!1:(i.add(u),a(d,c).forEach(function(h){return i.add(l+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function zu(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,a,i,o=l;function l(c){var u=e[0],h=e.slice(1),m=h.reduce(function(f,x){return x(f)},u());return n=Uu(m),a=n.cache.get,i=n.cache.set,o=d,d(c)}function d(c){var u=a(c);if(u)return u;var h=Bu(c,n);return i(c,h),h}return function(){return o(Au.apply(null,arguments))}}function ie(t){var e=function(n){return n[t]||[]};return e.isThemeGetter=!0,e}var Go=/^\[(?:([a-z-]+):)?(.+)\]$/i,qu=/^\d+\/\d+$/,Gu=new Set(["px","full","screen"]),Hu=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Wu=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ku=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Me(t){return Nt(t)||Gu.has(t)||qu.test(t)||Nn(t)}function Nn(t){return Pt(t,"length",eh)}function Xu(t){return Pt(t,"size",Ho)}function Ju(t){return Pt(t,"position",Ho)}function Yu(t){return Pt(t,"url",th)}function Vs(t){return Pt(t,"number",Nt)}function Nt(t){return!Number.isNaN(Number(t))}function Zu(t){return t.endsWith("%")&&Nt(t.slice(0,-1))}function as(t){return Ja(t)||Pt(t,"number",Ja)}function X(t){return Go.test(t)}function is(){return!0}function st(t){return Hu.test(t)}function Qu(t){return Pt(t,"",sh)}function Pt(t,e,r){var n=Go.exec(t);return n?n[1]?n[1]===e:r(n[2]):!1}function eh(t){return Wu.test(t)}function Ho(){return!1}function th(t){return t.startsWith("url(")}function Ja(t){return Number.isInteger(Number(t))}function sh(t){return Ku.test(t)}function rh(){var t=ie("colors"),e=ie("spacing"),r=ie("blur"),n=ie("brightness"),a=ie("borderColor"),i=ie("borderRadius"),o=ie("borderSpacing"),l=ie("borderWidth"),d=ie("contrast"),c=ie("grayscale"),u=ie("hueRotate"),h=ie("invert"),m=ie("gap"),f=ie("gradientColorStops"),x=ie("gradientColorStopPositions"),b=ie("inset"),g=ie("margin"),v=ie("opacity"),y=ie("padding"),w=ie("saturate"),_=ie("scale"),N=ie("sepia"),k=ie("skew"),j=ie("space"),S=ie("translate"),I=function(){return["auto","contain","none"]},B=function(){return["auto","hidden","clip","visible","scroll"]},H=function(){return["auto",X,e]},$=function(){return[X,e]},F=function(){return["",Me]},T=function(){return["auto",Nt,X]},A=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},O=function(){return["solid","dashed","dotted","double","none"]},U=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},R=function(){return["start","end","center","between","around","evenly","stretch"]},W=function(){return["","0",X]},re=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},q=function(){return[Nt,Vs]},D=function(){return[Nt,X]};return{cacheSize:500,theme:{colors:[is],spacing:[Me],blur:["none","",st,X],brightness:q(),borderColor:[t],borderRadius:["none","","full",st,X],borderSpacing:$(),borderWidth:F(),contrast:q(),grayscale:W(),hueRotate:D(),invert:W(),gap:$(),gradientColorStops:[t],gradientColorStopPositions:[Zu,Nn],inset:H(),margin:H(),opacity:q(),padding:$(),saturate:q(),scale:q(),sepia:W(),skew:D(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",X]}],container:["container"],columns:[{columns:[st]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(A(),[X])}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",as]}],basis:[{basis:H()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",X]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",as]}],"grid-cols":[{"grid-cols":[is]}],"col-start-end":[{col:["auto",{span:["full",as]},X]}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":[is]}],"row-start-end":[{row:["auto",{span:[as]},X]}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",X]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",X]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(R())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(R(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(R(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",X,e]}],"min-w":[{"min-w":["min","max","fit",X,Me]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[st]},st,X]}],h:[{h:[X,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",X,Me]}],"max-h":[{"max-h":[X,e,"min","max","fit"]}],"font-size":[{text:["base",st,Nn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Vs]}],"font-family":[{font:[is]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",X]}],"line-clamp":[{"line-clamp":["none",Nt,Vs]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",X,Me]}],"list-image":[{"list-image":["none",X]}],"list-style-type":[{list:["none","disc","decimal",X]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(O(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Me]}],"underline-offset":[{"underline-offset":["auto",X,Me]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",X]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",X]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(A(),[Ju])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Xu]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Yu]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(O(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:O()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:[""].concat(O())}],"outline-offset":[{"outline-offset":[X,Me]}],"outline-w":[{outline:[Me]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Me]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",st,Qu]}],"shadow-color":[{shadow:[is]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":U()}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",st,X]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",X]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",X]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",X]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[as,X]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",X]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",X]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",X]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Me,Vs]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var nh=zu(rh);function Qe(...t){return nh(Vo(t))}function Se(t,e,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return e==null?void 0:e(a)}}function Ya(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Wo(...t){return e=>{let r=!1;const n=t.map(a=>{const i=Ya(a,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():Ya(t[a],null)}}}}function St(...t){return p.useCallback(Wo(...t),t)}function Ko(t,e=[]){let r=[];function n(i,o){const l=p.createContext(o),d=r.length;r=[...r,o];const c=h=>{var v;const{scope:m,children:f,...x}=h,b=((v=m==null?void 0:m[t])==null?void 0:v[d])||l,g=p.useMemo(()=>x,Object.values(x));return s.jsx(b.Provider,{value:g,children:f})};c.displayName=i+"Provider";function u(h,m){var b;const f=((b=m==null?void 0:m[t])==null?void 0:b[d])||l,x=p.useContext(f);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,u]}const a=()=>{const i=r.map(o=>p.createContext(o));return function(l){const d=(l==null?void 0:l[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:d}}),[l,d])}};return a.scopeName=t,[n,ah(a,...e)]}function ah(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:d,scopeName:c})=>{const h=d(i)[`__scope${c}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function rr(t){const e=oh(t),r=p.forwardRef((n,a)=>{const{children:i,...o}=n,l=p.Children.toArray(i),d=l.find(ch);if(d){const c=d.props.children,u=l.map(h=>h===d?p.Children.count(c)>1?p.Children.only(null):p.isValidElement(c)?c.props.children:null:h);return s.jsx(e,{...o,ref:a,children:p.isValidElement(c)?p.cloneElement(c,void 0,u):null})}return s.jsx(e,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}var ih=rr("Slot");function oh(t){const e=p.forwardRef((r,n)=>{const{children:a,...i}=r;if(p.isValidElement(a)){const o=uh(a),l=dh(i,a.props);return a.type!==p.Fragment&&(l.ref=n?Wo(n,o):o),p.cloneElement(a,l)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var lh=Symbol("radix.slottable");function ch(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===lh}function dh(t,e){const r={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const d=i(...l);return a(...l),d}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function uh(t){var n,a;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function hh(t){const e=t+"CollectionProvider",[r,n]=Ko(e),[a,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:g,children:v}=b,y=Z.useRef(null),w=Z.useRef(new Map).current;return s.jsx(a,{scope:g,itemMap:w,collectionRef:y,children:v})};o.displayName=e;const l=t+"CollectionSlot",d=rr(l),c=Z.forwardRef((b,g)=>{const{scope:v,children:y}=b,w=i(l,v),_=St(g,w.collectionRef);return s.jsx(d,{ref:_,children:y})});c.displayName=l;const u=t+"CollectionItemSlot",h="data-radix-collection-item",m=rr(u),f=Z.forwardRef((b,g)=>{const{scope:v,children:y,...w}=b,_=Z.useRef(null),N=St(g,_),k=i(u,v);return Z.useEffect(()=>(k.itemMap.set(_,{ref:_,...w}),()=>void k.itemMap.delete(_))),s.jsx(m,{[h]:"",ref:N,children:y})});f.displayName=u;function x(b){const g=i(t+"CollectionConsumer",b);return Z.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((k,j)=>w.indexOf(k.ref.current)-w.indexOf(j.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},x,n]}var mh=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ze=mh.reduce((t,e)=>{const r=rr(`Primitive.${e}`),n=p.forwardRef((a,i)=>{const{asChild:o,...l}=a,d=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(d,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Xo(t,e){t&&Qn.flushSync(()=>t.dispatchEvent(e))}function Tt(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function fh(t,e=globalThis==null?void 0:globalThis.document){const r=Tt(t);p.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var ph="DismissableLayer",_n="dismissableLayer.update",xh="dismissableLayer.pointerDownOutside",gh="dismissableLayer.focusOutside",Za,Jo=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yo=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...d}=t,c=p.useContext(Jo),[u,h]=p.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=p.useState({}),x=St(e,j=>h(j)),b=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=b.indexOf(g),y=u?b.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,_=y>=v,N=vh(j=>{const S=j.target,I=[...c.branches].some(B=>B.contains(S));!_||I||(a==null||a(j),o==null||o(j),j.defaultPrevented||l==null||l())},m),k=bh(j=>{const S=j.target;[...c.branches].some(B=>B.contains(S))||(i==null||i(j),o==null||o(j),j.defaultPrevented||l==null||l())},m);return fh(j=>{y===c.layers.size-1&&(n==null||n(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},m),p.useEffect(()=>{if(u)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Za=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Qa(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Za)}},[u,m,r,c]),p.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Qa())},[u,c]),p.useEffect(()=>{const j=()=>f({});return document.addEventListener(_n,j),()=>document.removeEventListener(_n,j)},[]),s.jsx(ze.div,{...d,ref:x,style:{pointerEvents:w?_?"auto":"none":void 0,...t.style},onFocusCapture:Se(t.onFocusCapture,k.onFocusCapture),onBlurCapture:Se(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Se(t.onPointerDownCapture,N.onPointerDownCapture)})});Yo.displayName=ph;var yh="DismissableLayerBranch",Zo=p.forwardRef((t,e)=>{const r=p.useContext(Jo),n=p.useRef(null),a=St(e,n);return p.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(ze.div,{...t,ref:a})});Zo.displayName=yh;function vh(t,e=globalThis==null?void 0:globalThis.document){const r=Tt(t),n=p.useRef(!1),a=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let d=function(){Qo(xh,r,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=d,e.addEventListener("click",a.current,{once:!0})):d()}else e.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",a.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function bh(t,e=globalThis==null?void 0:globalThis.document){const r=Tt(t),n=p.useRef(!1);return p.useEffect(()=>{const a=i=>{i.target&&!n.current&&Qo(gh,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Qa(){const t=new CustomEvent(_n);document.dispatchEvent(t)}function Qo(t,e,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&a.addEventListener(t,e,{once:!0}),n?Xo(a,i):a.dispatchEvent(i)}var wh=Yo,jh=Zo,ws=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},Nh="Portal",el=p.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[a,i]=p.useState(!1);ws(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Hd.createPortal(s.jsx(ze.div,{...n,ref:e}),o):null});el.displayName=Nh;function _h(t,e){return p.useReducer((r,n)=>e[r][n]??r,t)}var tl=t=>{const{present:e,children:r}=t,n=kh(e),a=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),i=St(n.ref,Sh(a));return typeof r=="function"||n.isPresent?p.cloneElement(a,{ref:i}):null};tl.displayName="Presence";function kh(t){const[e,r]=p.useState(),n=p.useRef(null),a=p.useRef(t),i=p.useRef("none"),o=t?"mounted":"unmounted",[l,d]=_h(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const c=Bs(n.current);i.current=l==="mounted"?c:"none"},[l]),ws(()=>{const c=n.current,u=a.current;if(u!==t){const m=i.current,f=Bs(c);t?d("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?d("UNMOUNT"):d(u&&m!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,d]),ws(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=f=>{const b=Bs(n.current).includes(f.animationName);if(f.target===e&&b&&(d("ANIMATION_END"),!a.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},m=f=>{f.target===e&&(i.current=Bs(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(c=>{n.current=c?getComputedStyle(c):null,r(c)},[])}}function Bs(t){return(t==null?void 0:t.animationName)||"none"}function Sh(t){var n,a;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Th=Wd[" useInsertionEffect ".trim().toString()]||ws;function Ch({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[a,i,o]=Eh({defaultProp:e,onChange:r}),l=t!==void 0,d=l?t:a;{const u=p.useRef(t!==void 0);p.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const c=p.useCallback(u=>{var h;if(l){const m=Ph(u)?u(t):u;m!==t&&((h=o.current)==null||h.call(o,m))}else i(u)},[l,t,i,o]);return[d,c]}function Eh({defaultProp:t,onChange:e}){const[r,n]=p.useState(t),a=p.useRef(r),i=p.useRef(e);return Th(()=>{i.current=e},[e]),p.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function Ph(t){return typeof t=="function"}var Ah=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Lh="VisuallyHidden",ra=p.forwardRef((t,e)=>s.jsx(ze.span,{...t,ref:e,style:{...Ah,...t.style}}));ra.displayName=Lh;var na="ToastProvider",[aa,Rh,Ih]=hh("Toast"),[sl,tw]=Ko("Toast",[Ih]),[Mh,_r]=sl(na),rl=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=t,[l,d]=p.useState(null),[c,u]=p.useState(0),h=p.useRef(!1),m=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${na}\`. Expected non-empty \`string\`.`),s.jsx(aa.Provider,{scope:e,children:s.jsx(Mh,{scope:e,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:c,viewport:l,onViewportChange:d,onToastAdd:p.useCallback(()=>u(f=>f+1),[]),onToastRemove:p.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};rl.displayName=na;var nl="ToastViewport",Oh=["F8"],kn="toast.viewportPause",Sn="toast.viewportResume",al=p.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=Oh,label:a="Notifications ({hotkey})",...i}=t,o=_r(nl,r),l=Rh(r),d=p.useRef(null),c=p.useRef(null),u=p.useRef(null),h=p.useRef(null),m=St(e,h,o.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;p.useEffect(()=>{const g=v=>{var w;n.length!==0&&n.every(_=>v[_]||v.code===_)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[n]),p.useEffect(()=>{const g=d.current,v=h.current;if(x&&g&&v){const y=()=>{if(!o.isClosePausedRef.current){const k=new CustomEvent(kn);v.dispatchEvent(k),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const k=new CustomEvent(Sn);v.dispatchEvent(k),o.isClosePausedRef.current=!1}},_=k=>{!g.contains(k.relatedTarget)&&w()},N=()=>{g.contains(document.activeElement)||w()};return g.addEventListener("focusin",y),g.addEventListener("focusout",_),g.addEventListener("pointermove",y),g.addEventListener("pointerleave",N),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{g.removeEventListener("focusin",y),g.removeEventListener("focusout",_),g.removeEventListener("pointermove",y),g.removeEventListener("pointerleave",N),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[x,o.isClosePausedRef]);const b=p.useCallback(({tabbingDirection:g})=>{const y=l().map(w=>{const _=w.ref.current,N=[_,...Xh(_)];return g==="forwards"?N:N.reverse()});return(g==="forwards"?y.reverse():y).flat()},[l]);return p.useEffect(()=>{const g=h.current;if(g){const v=y=>{var N,k,j;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const S=document.activeElement,I=y.shiftKey;if(y.target===g&&I){(N=c.current)==null||N.focus();return}const $=b({tabbingDirection:I?"backwards":"forwards"}),F=$.findIndex(T=>T===S);Wr($.slice(F+1))?y.preventDefault():I?(k=c.current)==null||k.focus():(j=u.current)==null||j.focus()}};return g.addEventListener("keydown",v),()=>g.removeEventListener("keydown",v)}},[l,b]),s.jsxs(jh,{ref:d,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&s.jsx(Tn,{ref:c,onFocusFromOutsideViewport:()=>{const g=b({tabbingDirection:"forwards"});Wr(g)}}),s.jsx(aa.Slot,{scope:r,children:s.jsx(ze.ol,{tabIndex:-1,...i,ref:m})}),x&&s.jsx(Tn,{ref:u,onFocusFromOutsideViewport:()=>{const g=b({tabbingDirection:"backwards"});Wr(g)}})]})});al.displayName=nl;var il="ToastFocusProxy",Tn=p.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=t,i=_r(il,r);return s.jsx(ra,{"aria-hidden":!0,tabIndex:0,...a,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const l=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(l))&&n()}})});Tn.displayName=il;var Ps="Toast",Dh="toast.swipeStart",$h="toast.swipeMove",Fh="toast.swipeCancel",Uh="toast.swipeEnd",ol=p.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=t,[l,d]=Ch({prop:n,defaultProp:a??!0,onChange:i,caller:Ps});return s.jsx(tl,{present:r||l,children:s.jsx(zh,{open:l,...o,ref:e,onClose:()=>d(!1),onPause:Tt(t.onPause),onResume:Tt(t.onResume),onSwipeStart:Se(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Se(t.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Se(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Se(t.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),d(!1)})})})});ol.displayName=Ps;var[Vh,Bh]=sl(Ps,{onClose(){}}),zh=p.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:d,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:f,...x}=t,b=_r(Ps,r),[g,v]=p.useState(null),y=St(e,T=>v(T)),w=p.useRef(null),_=p.useRef(null),N=a||b.duration,k=p.useRef(0),j=p.useRef(N),S=p.useRef(0),{onToastAdd:I,onToastRemove:B}=b,H=Tt(()=>{var A;(g==null?void 0:g.contains(document.activeElement))&&((A=b.viewport)==null||A.focus()),o()}),$=p.useCallback(T=>{!T||T===1/0||(window.clearTimeout(S.current),k.current=new Date().getTime(),S.current=window.setTimeout(H,T))},[H]);p.useEffect(()=>{const T=b.viewport;if(T){const A=()=>{$(j.current),c==null||c()},O=()=>{const U=new Date().getTime()-k.current;j.current=j.current-U,window.clearTimeout(S.current),d==null||d()};return T.addEventListener(kn,O),T.addEventListener(Sn,A),()=>{T.removeEventListener(kn,O),T.removeEventListener(Sn,A)}}},[b.viewport,N,d,c,$]),p.useEffect(()=>{i&&!b.isClosePausedRef.current&&$(N)},[i,N,b.isClosePausedRef,$]),p.useEffect(()=>(I(),()=>B()),[I,B]);const F=p.useMemo(()=>g?fl(g):null,[g]);return b.viewport?s.jsxs(s.Fragment,{children:[F&&s.jsx(qh,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:F}),s.jsx(Vh,{scope:r,onClose:H,children:Qn.createPortal(s.jsx(aa.ItemSlot,{scope:r,children:s.jsx(wh,{asChild:!0,onEscapeKeyDown:Se(l,()=>{b.isFocusedToastEscapeKeyDownRef.current||H(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(ze.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":b.swipeDirection,...x,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Se(t.onKeyDown,T=>{T.key==="Escape"&&(l==null||l(T.nativeEvent),T.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,H()))}),onPointerDown:Se(t.onPointerDown,T=>{T.button===0&&(w.current={x:T.clientX,y:T.clientY})}),onPointerMove:Se(t.onPointerMove,T=>{if(!w.current)return;const A=T.clientX-w.current.x,O=T.clientY-w.current.y,U=!!_.current,R=["left","right"].includes(b.swipeDirection),W=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,re=R?W(0,A):0,q=R?0:W(0,O),D=T.pointerType==="touch"?10:2,V={x:re,y:q},ee={originalEvent:T,delta:V};U?(_.current=V,zs($h,h,ee,{discrete:!1})):ei(V,b.swipeDirection,D)?(_.current=V,zs(Dh,u,ee,{discrete:!1}),T.target.setPointerCapture(T.pointerId)):(Math.abs(A)>D||Math.abs(O)>D)&&(w.current=null)}),onPointerUp:Se(t.onPointerUp,T=>{const A=_.current,O=T.target;if(O.hasPointerCapture(T.pointerId)&&O.releasePointerCapture(T.pointerId),_.current=null,w.current=null,A){const U=T.currentTarget,R={originalEvent:T,delta:A};ei(A,b.swipeDirection,b.swipeThreshold)?zs(Uh,f,R,{discrete:!0}):zs(Fh,m,R,{discrete:!0}),U.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),b.viewport)})]}):null}),qh=t=>{const{__scopeToast:e,children:r,...n}=t,a=_r(Ps,e),[i,o]=p.useState(!1),[l,d]=p.useState(!1);return Wh(()=>o(!0)),p.useEffect(()=>{const c=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(c)},[]),l?null:s.jsx(el,{asChild:!0,children:s.jsx(ra,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},Gh="ToastTitle",ll=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return s.jsx(ze.div,{...n,ref:e})});ll.displayName=Gh;var Hh="ToastDescription",cl=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return s.jsx(ze.div,{...n,ref:e})});cl.displayName=Hh;var dl="ToastAction",ul=p.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?s.jsx(ml,{altText:r,asChild:!0,children:s.jsx(ia,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${dl}\`. Expected non-empty \`string\`.`),null)});ul.displayName=dl;var hl="ToastClose",ia=p.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,a=Bh(hl,r);return s.jsx(ml,{asChild:!0,children:s.jsx(ze.button,{type:"button",...n,ref:e,onClick:Se(t.onClick,a.onClose)})})});ia.displayName=hl;var ml=p.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...a}=t;return s.jsx(ze.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:e})});function fl(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),Kh(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...fl(n))}}),e}function zs(t,e,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&a.addEventListener(t,e,{once:!0}),n?Xo(a,i):a.dispatchEvent(i)}var ei=(t,e,r=0)=>{const n=Math.abs(t.x),a=Math.abs(t.y),i=n>a;return e==="left"||e==="right"?i&&n>r:!i&&a>r};function Wh(t=()=>{}){const e=Tt(t);ws(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function Kh(t){return t.nodeType===t.ELEMENT_NODE}function Xh(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Wr(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var Jh=rl,pl=al,xl=ol,gl=ll,yl=cl,vl=ul,bl=ia;const ti=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,si=Vo,wl=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return si(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=e,o=Object.keys(a).map(c=>{const u=r==null?void 0:r[c],h=i==null?void 0:i[c];if(u===null)return null;const m=ti(u)||ti(h);return a[c][m]}),l=r&&Object.entries(r).reduce((c,u)=>{let[h,m]=u;return m===void 0||(c[h]=m),c},{}),d=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:h,className:m,...f}=u;return Object.entries(f).every(x=>{let[b,g]=x;return Array.isArray(g)?g.includes({...i,...l}[b]):{...i,...l}[b]===g})?[...c,h,m]:c},[]);return si(t,o,d,r==null?void 0:r.class,r==null?void 0:r.className)};var Yh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Zh=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L=(t,e)=>{const r=p.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...d},c)=>p.createElement("svg",{ref:c,...Yh,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:`lucide lucide-${Zh(t)}`,...d},[...e.map(([u,h])=>p.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${t}`,r},xe=L("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ct=L("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),As=L("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Qh=L("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Te=L("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),jl=L("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),Nl=L("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),em=L("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),nr=L("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]]),ue=L("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),tm=L("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),_l=L("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),sm=L("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Ls=L("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),kl=L("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Ue=L("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),rm=L("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Sl=L("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ri=L("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Tl=L("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ve=L("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Cn=L("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),oa=L("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),ar=L("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Je=L("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ir=L("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),nm=L("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),dt=L("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Cl=L("FileArchive",[["path",{d:"M4 22V4c0-.5.2-1 .6-1.4C5 2.2 5.5 2 6 2h8.5L20 7.5V20c0 .5-.2 1-.6 1.4-.4.4-.9.6-1.4.6h-2",key:"1u864v"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]),J=L("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),or=L("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),am=L("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),im=L("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),om=L("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),lm=L("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),cm=L("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),dm=L("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),js=L("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),El=L("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Pl=L("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),um=L("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),ni=L("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),lr=L("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),cr=L("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),hm=L("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),mm=L("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ye=L("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Jt=L("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Al=L("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),fm=L("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),pm=L("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Yt=L("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Ll=L("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),kt=L("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),la=L("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),En=L("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),xm=L("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),Ns=L("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),gm=L("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),ym=L("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),Rl=L("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),vm=L("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),bm=L("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),kr=L("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),wm=L("School",[["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4",key:"cpkuc4"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),Sr=L("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Il=L("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ca=L("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),jm=L("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),Nm=L("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),_m=L("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),km=L("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Sm=L("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),Tm=L("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),dr=L("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Cm=L("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Tr=L("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),et=L("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ml=L("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ht=L("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Pn=L("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Em=L("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Ol=L("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),Dl=L("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),_s=L("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),le=L("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),$l=L("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),Pm=L("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),Am=L("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),ks=L("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Et=L("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Fl=L("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Lm=L("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Rm=L("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Im=Jh,Ul=Z.forwardRef(({className:t,...e},r)=>s.jsx(pl,{ref:r,className:Qe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Ul.displayName=pl.displayName;const Mm=wl("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Vl=Z.forwardRef(({className:t,variant:e,...r},n)=>s.jsx(xl,{ref:n,className:Qe(Mm({variant:e}),t),...r}));Vl.displayName=xl.displayName;const Om=Z.forwardRef(({className:t,...e},r)=>s.jsx(vl,{ref:r,className:Qe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Om.displayName=vl.displayName;const Bl=Z.forwardRef(({className:t,...e},r)=>s.jsx(bl,{ref:r,className:Qe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:s.jsx(Et,{className:"h-4 w-4"})}));Bl.displayName=bl.displayName;const zl=Z.forwardRef(({className:t,...e},r)=>s.jsx(gl,{ref:r,className:Qe("text-sm font-semibold",t),...e}));zl.displayName=gl.displayName;const ql=Z.forwardRef(({className:t,...e},r)=>s.jsx(yl,{ref:r,className:Qe("text-sm opacity-90",t),...e}));ql.displayName=yl.displayName;const Dm=1;let Kr=0;function $m(){return Kr=(Kr+1)%Number.MAX_VALUE,Kr.toString()}const we={state:{toasts:[]},listeners:[],getState:()=>we.state,setState:t=>{typeof t=="function"?we.state=t(we.state):we.state={...we.state,...t},we.listeners.forEach(e=>e(we.state))},subscribe:t=>(we.listeners.push(t),()=>{we.listeners=we.listeners.filter(e=>e!==t)})},Fm=({...t})=>{const e=$m(),r=a=>we.setState(i=>({...i,toasts:i.toasts.map(o=>o.id===e?{...o,...a}:o)})),n=()=>we.setState(a=>({...a,toasts:a.toasts.filter(i=>i.id!==e)}));return we.setState(a=>({...a,toasts:[{...t,id:e,dismiss:n},...a.toasts].slice(0,Dm)})),{id:e,dismiss:n,update:r}};function se(){const[t,e]=p.useState(we.getState());return p.useEffect(()=>we.subscribe(n=>{e(n)}),[]),p.useEffect(()=>{const r=[];return t.toasts.forEach(n=>{if(n.duration===1/0)return;const a=setTimeout(()=>{n.dismiss()},n.duration||5e3);r.push(a)}),()=>{r.forEach(n=>clearTimeout(n))}},[t.toasts]),{toast:Fm,toasts:t.toasts}}function Um(){const{toasts:t}=se();return s.jsxs(Im,{children:[t.map(({id:e,title:r,description:n,action:a,dismiss:i,...o})=>s.jsxs(Vl,{...o,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(zl,{children:r}),n&&s.jsx(ql,{children:n})]}),a,s.jsx(Bl,{})]},e)),s.jsx(Ul,{})]})}const Vm="modulepreload",Bm=function(t){return"/TestLogin/"+t},ai={},Rs=function(e,r,n){if(!r||r.length===0)return e();const a=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=Bm(i),i in ai)return;ai[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let u=a.length-1;u>=0;u--){const h=a[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Vm,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},zm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Rs(()=>Promise.resolve().then(()=>ts),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class da extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class qm extends da{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Gm extends da{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Hm extends da{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var An;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(An||(An={}));var Wm=globalThis&&globalThis.__awaiter||function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(t,e||[])).next())})};class Km{constructor(e,{headers:r={},customFetch:n,region:a=An.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=zm(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return Wm(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:d}=r;d||(d=this.region),d&&d!=="any"&&(l["x-region"]=d);let c;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:c}).catch(x=>{throw new qm(x)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new Gm(u);if(!u.ok)throw new Hm(u);let m=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),f;return m==="application/json"?f=yield u.json():m==="application/octet-stream"?f=yield u.blob():m==="text/event-stream"?f=u:m==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(a){return{data:null,error:a}}})}}var _e={},ua={},Cr={},Is={},Er={},Pr={},Xm=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Zt=Xm();const Jm=Zt.fetch,Gl=Zt.fetch.bind(Zt),Hl=Zt.Headers,Ym=Zt.Request,Zm=Zt.Response,ts=Object.freeze(Object.defineProperty({__proto__:null,Headers:Hl,Request:Ym,Response:Zm,default:Gl,fetch:Jm},Symbol.toStringTag,{value:"Module"})),Qm=Kd(ts);var Ar={};Object.defineProperty(Ar,"__esModule",{value:!0});let ef=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ar.default=ef;var Wl=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pr,"__esModule",{value:!0});const tf=Wl(Qm),sf=Wl(Ar);let rf=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=tf.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,d;let c=null,u=null,h=null,m=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,m=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const b=await i.text();try{c=JSON.parse(b),Array.isArray(c)&&i.status===404&&(u=[],c=null,m=200,f="OK")}catch{i.status===404&&b===""?(m=204,f="No Content"):c={message:b}}if(c&&this.isMaybeSingle&&(!((d=c==null?void 0:c.details)===null||d===void 0)&&d.includes("0 rows"))&&(c=null,m=200,f="OK"),c&&this.shouldThrowOnError)throw new sf.default(c)}return{error:c,data:u,count:h,status:m,statusText:f}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,d;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(d=i==null?void 0:i.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,r)}returns(){return this}overrideTypes(){return this}};Pr.default=rf;var nf=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Er,"__esModule",{value:!0});const af=nf(Pr);let of=class extends af.default{select(e){let r=!1;const n=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const d=[e?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${d};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Er.default=of;var lf=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Is,"__esModule",{value:!0});const cf=lf(Er);let df=class extends cf.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};Is.default=df;var uf=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cr,"__esModule",{value:!0});const os=uf(Is);let hf=class{constructor(e,{headers:r={},schema:n,fetch:a}){this.url=e,this.headers=r,this.schema=n,this.fetch=a}select(e,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new os.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(o.length>0){const l=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",l.join(","))}}return new os.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const d=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(d.length>0){const c=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new os.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new os.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new os.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Cr.default=hf;var Lr={},Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.version=void 0;Rr.version="0.0.0-automated";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.DEFAULT_HEADERS=void 0;const mf=Rr;Lr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${mf.version}`};var Kl=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ua,"__esModule",{value:!0});const ff=Kl(Cr),pf=Kl(Is),xf=Lr;let gf=class Xl{constructor(e,{headers:r={},schema:n,fetch:a}={}){this.url=e,this.headers=Object.assign(Object.assign({},xf.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(e){const r=new URL(`${this.url}/${e}`);return new ff.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Xl(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:a=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let d;n||a?(o=n?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",d=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new pf.default({method:o,url:l,headers:c,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};ua.default=gf;var ss=Re&&Re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_e,"__esModule",{value:!0});_e.PostgrestError=_e.PostgrestBuilder=_e.PostgrestTransformBuilder=_e.PostgrestFilterBuilder=_e.PostgrestQueryBuilder=_e.PostgrestClient=void 0;const Jl=ss(ua);_e.PostgrestClient=Jl.default;const Yl=ss(Cr);_e.PostgrestQueryBuilder=Yl.default;const Zl=ss(Is);_e.PostgrestFilterBuilder=Zl.default;const Ql=ss(Er);_e.PostgrestTransformBuilder=Ql.default;const ec=ss(Pr);_e.PostgrestBuilder=ec.default;const tc=ss(Ar);_e.PostgrestError=tc.default;var yf=_e.default={PostgrestClient:Jl.default,PostgrestQueryBuilder:Yl.default,PostgrestFilterBuilder:Zl.default,PostgrestTransformBuilder:Ql.default,PostgrestBuilder:ec.default,PostgrestError:tc.default};const{PostgrestClient:vf,PostgrestQueryBuilder:ow,PostgrestFilterBuilder:lw,PostgrestTransformBuilder:cw,PostgrestBuilder:dw,PostgrestError:uw}=yf;let Ln;typeof window>"u"?Ln=require("ws"):Ln=window.WebSocket;const bf=Ln,wf="2.11.10",jf={"X-Client-Info":`realtime-js/${wf}`},Nf="1.0.0",sc=1e4,_f=1e3;var Wt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Wt||(Wt={}));var be;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(be||(be={}));var $e;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})($e||($e={}));var Rn;(function(t){t.websocket="websocket"})(Rn||(Rn={}));var jt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(jt||(jt={}));class kf{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+a));o=o+a;const d=n.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:d,payload:c}}}class rc{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ne;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ne||(ne={}));const ii=(t,e,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=Sf(o,t,e,a),i),{})},Sf=(t,e,r,n)=>{const a=e.find(l=>l.name===t),i=a==null?void 0:a.type,o=r[t];return i&&!n.includes(i)?nc(i,o):In(o)},nc=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Pf(e,r)}switch(t){case ne.bool:return Tf(e);case ne.float4:case ne.float8:case ne.int2:case ne.int4:case ne.int8:case ne.numeric:case ne.oid:return Cf(e);case ne.json:case ne.jsonb:return Ef(e);case ne.timestamp:return Af(e);case ne.abstime:case ne.date:case ne.daterange:case ne.int4range:case ne.int8range:case ne.money:case ne.reltime:case ne.text:case ne.time:case ne.timestamptz:case ne.timetz:case ne.tsrange:case ne.tstzrange:return In(e);default:return In(e)}},In=t=>t,Tf=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Cf=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ef=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Pf=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>nc(e,l))}return t},Af=t=>typeof t=="string"?t.replace(" ","T"):t,ac=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Xr{constructor(e,r,n={},a=sc){this.channel=e,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var oi;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(oi||(oi={}));class fs{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fs.syncState(this.state,a,i,o),this.pendingDiffs.forEach(d=>{this.state=fs.syncDiff(this.state,d,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=fs.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,a){const i=this.cloneDeep(e),o=this.transformState(r),l={},d={};return this.map(i,(c,u)=>{o[c]||(d[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const m=u.map(g=>g.presence_ref),f=h.map(g=>g.presence_ref),x=u.filter(g=>f.indexOf(g.presence_ref)<0),b=h.filter(g=>m.indexOf(g.presence_ref)<0);x.length>0&&(l[c]=x),b.length>0&&(d[c]=b)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:d},n,a)}static syncDiff(e,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,d)=>{var c;const u=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(d),u.length>0){const h=e[l].map(f=>f.presence_ref),m=u.filter(f=>h.indexOf(f.presence_ref)<0);e[l].unshift(...m)}n(l,u,d)}),this.map(o,(l,d)=>{let c=e[l];if(!c)return;const u=d.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=c,a(l,c,d),c.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const a=e[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var li;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(li||(li={}));var ci;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ci||(ci={}));var He;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(He||(He={}));class ha{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Xr(this,$e.join,this.params,this.timeout),this.rejoinTimer=new rc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=be.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this._on($e.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new fs(this),this.broadcastEndpointURL=ac(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(He.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(He.CLOSED));const d={},c={broadcast:i,presence:o,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(He.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,f=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,x=[];for(let b=0;b<f;b++){const g=m[b],{filter:{event:v,schema:y,table:w,filter:_}}=g,N=u&&u[b];if(N&&N.event===v&&N.schema===y&&N.table===w&&N.filter===_)x.push(Object.assign(Object.assign({},g),{id:N.id}));else{this.unsubscribe(),this.state=be.errored,e==null||e(He.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(He.SUBSCRIBED);return}}).receive("error",u=>{this.state=be.errored,e==null||e(He.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(He.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,d;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=be.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($e.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const a=new Xr(this,$e.leave,{},e);a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Xr(this,e,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var a,i;const o=e.toLocaleLowerCase(),{close:l,error:d,leave:c,join:u}=$e;if(n&&[l,d,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(f=>{var x,b,g;return((x=f.filter)===null||x===void 0?void 0:x.event)==="*"||((g=(b=f.filter)===null||b===void 0?void 0:b.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var x,b,g,v,y,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const _=f.id,N=(x=f.filter)===null||x===void 0?void 0:x.event;return _&&((b=r.ids)===null||b===void 0?void 0:b.includes(_))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const _=(y=(v=f==null?void 0:f.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:b,table:g,commit_timestamp:v,type:y,errors:w}=x;m=Object.assign(Object.assign({},{schema:b,table:g,commit_timestamp:v,eventType:y,new:{},old:{},errors:w}),this._getPayloadRecords(x))}f.callback(m,n)})}_isClosed(){return this.state===be.closed}_isJoined(){return this.state===be.joined}_isJoining(){return this.state===be.joining}_isLeaving(){return this.state===be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const a=e.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&ha.isEqual(a.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($e.close,{},e)}_onError(e){this._on($e.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=ii(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=ii(e.columns,e.old_record)),r}}const di=()=>{},Lf=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Rf{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=jf,this.params={},this.timeout=sc,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=di,this.ref=0,this.logger=di,this.conn=null,this.sendBuffer=[],this.serializer=new kf,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Rs(()=>Promise.resolve().then(()=>ts),void 0).then(({default:d})=>d(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Rn.websocket}`,this.httpEndpoint=ac(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new rc(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=bf),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new If(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Nf}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Wt.connecting:return jt.Connecting;case Wt.open:return jt.Open;case Wt.closing:return jt.Closing;default:return jt.Closed}}isConnected(){return this.connectionState()===jt.Open}channel(e,r={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new ha(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:a,ref:i}=e,o=()=>{this.encode(e,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push($e.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(_f,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:a,payload:i,ref:o}=r;n==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger($e.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${n}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Lf],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class If{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Wt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class ma extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function me(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Mf extends ma{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Mn extends ma{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var Of=globalThis&&globalThis.__awaiter||function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(t,e||[])).next())})};const ic=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Rs(()=>Promise.resolve().then(()=>ts),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Df=()=>Of(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Rs(()=>Promise.resolve().then(()=>ts),void 0)).Response:Response}),On=t=>{if(Array.isArray(t))return t.map(r=>On(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=On(n)}),e};var At=globalThis&&globalThis.__awaiter||function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(t,e||[])).next())})};const Jr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),$f=(t,e,r)=>At(void 0,void 0,void 0,function*(){const n=yield Df();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{e(new Mf(Jr(a),t.status||500))}).catch(a=>{e(new Mn(Jr(a),a))}):e(new Mn(Jr(t),t))}),Ff=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function Ms(t,e,r,n,a,i){return At(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,Ff(e,n,a,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>$f(d,l,n))})})}function ur(t,e,r,n){return At(this,void 0,void 0,function*(){return Ms(t,"GET",e,r,n)})}function at(t,e,r,n,a){return At(this,void 0,void 0,function*(){return Ms(t,"POST",e,n,a,r)})}function Uf(t,e,r,n,a){return At(this,void 0,void 0,function*(){return Ms(t,"PUT",e,n,a,r)})}function Vf(t,e,r,n){return At(this,void 0,void 0,function*(){return Ms(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function oc(t,e,r,n,a){return At(this,void 0,void 0,function*(){return Ms(t,"DELETE",e,n,a,r)})}var Ne=globalThis&&globalThis.__awaiter||function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(t,e||[])).next())})};const Bf={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ui={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zf{constructor(e,r={},n,a){this.url=e,this.headers=r,this.bucketId=n,this.fetch=ic(a)}uploadOrUpdate(e,r,n,a){return Ne(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ui),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:c,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(me(i))return{data:null,error:i};throw i}})}upload(e,r,n){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,a){return Ne(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let d;const c=Object.assign({upsert:ui.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",c.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",c.cacheControl)):(d=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:d,headers:u}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(d){if(me(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,r){return Ne(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield at(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new ma("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}update(e,r,n){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Ne(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}})}copy(e,r,n){return Ne(this,void 0,void 0,function*(){try{return{data:{path:(yield at(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,n){return Ne(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield at(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,n){return Ne(this,void 0,void 0,function*(){try{const a=yield at(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}})}download(e,r){return Ne(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ur(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(me(l))return{data:null,error:l};throw l}})}info(e){return Ne(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield ur(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:On(n),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}exists(e){return Ne(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield Vf(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(me(n)&&n instanceof Mn){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&a.push(d);let c=a.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${c}`)}}}remove(e){return Ne(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}list(e,r,n){return Ne(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Bf),r),{prefix:e||""});return{data:yield at(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const qf="2.7.1",Gf={"X-Client-Info":`storage-js/${qf}`};var Mt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(t,e||[])).next())})};class Hf{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},Gf),r),this.fetch=ic(n)}listBuckets(){return Mt(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(me(e))return{data:null,error:e};throw e}})}getBucket(e){return Mt(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Mt(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Mt(this,void 0,void 0,function*(){try{return{data:yield Uf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Mt(this,void 0,void 0,function*(){try{return{data:yield at(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Mt(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}}class Wf extends Hf{constructor(e,r={},n){super(e,r,n)}from(e){return new zf(this.url,this.headers,e,this.fetch)}}const Kf="2.50.0";let us="";typeof Deno<"u"?us="deno":typeof document<"u"?us="web":typeof navigator<"u"&&navigator.product==="ReactNative"?us="react-native":us="node";const Xf={"X-Client-Info":`supabase-js-${us}/${Kf}`},Jf={headers:Xf},Yf={schema:"public"},Zf={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qf={};var ep=globalThis&&globalThis.__awaiter||function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(t,e||[])).next())})};const tp=t=>{let e;return t?e=t:typeof fetch>"u"?e=Gl:e=fetch,(...r)=>e(...r)},sp=()=>typeof Headers>"u"?Hl:Headers,rp=(t,e,r)=>{const n=tp(r),a=sp();return(i,o)=>ep(void 0,void 0,void 0,function*(){var l;const d=(l=yield e())!==null&&l!==void 0?l:t;let c=new a(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var np=globalThis&&globalThis.__awaiter||function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(t,e||[])).next())})};function ap(t){return t.endsWith("/")?t:t+"/"}function ip(t,e){var r,n;const{db:a,auth:i,realtime:o,global:l}=t,{db:d,auth:c,realtime:u,global:h}=e,m={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>np(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const lc="2.70.0",Ft=30*1e3,Dn=3,Yr=Dn*Ft,op="http://localhost:9999",lp="supabase.auth.token",cp={"X-Client-Info":`gotrue-js/${lc}`},$n="X-Supabase-Api-Version",cc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,up=6e5;class fa extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function G(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class hp extends fa{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function mp(t){return G(t)&&t.name==="AuthApiError"}class dc extends fa{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class mt extends fa{constructor(e,r,n,a){super(e,n,a),this.name=r,this.status=n}}class rt extends mt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fp(t){return G(t)&&t.name==="AuthSessionMissingError"}class qs extends mt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gs extends mt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hs extends mt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function pp(t){return G(t)&&t.name==="AuthImplicitGrantRedirectError"}class hi extends mt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fn extends mt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Zr(t){return G(t)&&t.name==="AuthRetryableFetchError"}class mi extends mt{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ps extends mt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const hr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fi=` 	
\r=`.split(""),xp=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<fi.length;e+=1)t[fi[e].charCodeAt(0)]=-2;for(let e=0;e<hr.length;e+=1)t[hr[e].charCodeAt(0)]=e;return t})();function pi(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(hr[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(hr[n]),e.queuedBits-=6}}function uc(t,e,r){const n=xp[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function xi(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{vp(o,n,r)};for(let o=0;o<t.length;o+=1)uc(t.charCodeAt(o),a,i);return e.join("")}function gp(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function yp(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}gp(n,e)}}function vp(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function bp(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)uc(t.charCodeAt(a),r,n);return new Uint8Array(e)}function wp(t){const e=[];return yp(t,r=>e.push(r)),new Uint8Array(e)}function jp(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};return t.forEach(a=>pi(a,r,n)),pi(null,r,n),e.join("")}function Np(t){return Math.round(Date.now()/1e3)+t}function _p(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const De=()=>typeof window<"u"&&typeof document<"u",xt={tested:!1,writable:!1},xs=()=>{if(!De())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xt.tested)return xt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),xt.tested=!0,xt.writable=!0}catch{xt.tested=!0,xt.writable=!1}return xt.writable};function kp(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{e[a]=n}),e}const hc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Rs(()=>Promise.resolve().then(()=>ts),void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Sp=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",mc=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Ws=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ks=async(t,e)=>{await t.removeItem(e)};class Ir{constructor(){this.promise=new Ir.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Ir.promiseConstructor=Promise;function Qr(t){const e=t.split(".");if(e.length!==3)throw new ps("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!dp.test(e[n]))throw new ps("JWT not in base64url format");return{header:JSON.parse(xi(e[0])),payload:JSON.parse(xi(e[1])),signature:bp(e[2]),raw:{header:e[0],payload:e[1]}}}async function Tp(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Cp(t,e){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function Ep(t){return("0"+t.toString(16)).substr(-2)}function Pp(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,Ep).join("")}async function Ap(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Lp(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Ap(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ot(t,e,r=!1){const n=Pp();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await mc(t,`${e}-code-verifier`,a);const i=await Lp(n);return[i,n===i?"plain":"s256"]}const Rp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ip(t){const e=t.headers.get($n);if(!e||!e.match(Rp))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Mp(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Op(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Dp=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Dt(t){if(!Dp.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var $p=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};const yt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Fp=[502,503,504];async function gi(t){var e;if(!Sp(t))throw new Fn(yt(t),0);if(Fp.includes(t.status))throw new Fn(yt(t),t.status);let r;try{r=await t.json()}catch(i){throw new dc(yt(i),i)}let n;const a=Ip(t);if(a&&a.getTime()>=cc["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new mi(yt(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new rt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new mi(yt(r),t.status,r.weak_password.reasons);throw new hp(yt(r),t.status||500,n)}const Up=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function K(t,e,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[$n]||(i[$n]=cc["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await Vp(t,e,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function Vp(t,e,r,n,a,i){const o=Up(e,n,a,i);let l;try{l=await t(r,Object.assign({},o))}catch(d){throw console.error(d),new Fn(yt(d),0)}if(l.ok||await gi(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(d){await gi(d)}}function Ge(t){var e;let r=null;Gp(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Np(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function yi(t){const e=Ge(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ot(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Bp(t){return{data:t,error:null}}function zp(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=t,o=$p(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function qp(t){return t}function Gp(t){return t.access_token&&t.refresh_token&&t.expires_in}const en=["global","local","others"];var Hp=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};class Wp{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=hc(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=en[0]){if(en.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${en.join(", ")}`);try{return await K(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await K(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ot})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Hp(e,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await K(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:zp,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(G(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await K(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ot})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,a,i,o,l,d;try{const c={nextPage:null,lastPage:0,total:0},u=await K(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:qp});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(d=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return f.length>0&&(f.forEach(x=>{const b=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(x.split(";")[1].split("=")[1]);c[`${g}Page`]=b}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(G(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Dt(e);try{return await K(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ot})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Dt(e);try{return await K(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ot})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Dt(e);try{return await K(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ot})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Dt(e.userId);try{const{data:r,error:n}=await K(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(G(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Dt(e.userId),Dt(e.id);try{return{data:await K(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}}const Kp={getItem:t=>xs()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{xs()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{xs()&&globalThis.localStorage.removeItem(t)}};function vi(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Xp(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const $t={debug:!!(globalThis&&xs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Jp extends fc{}async function Yp(t,e,r){$t.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),$t.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){$t.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{$t.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw $t.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Jp(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if($t.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Xp();const Zp={url:op,storageKey:lp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function bi(t,e,r){return await r()}class Ss{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ss.nextInstanceID,Ss.nextInstanceID+=1,this.instanceID>0&&De()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Zp),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Wp({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=hc(a.fetch),this.lock=a.lock||bi,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:De()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Yp:this.lock=bi,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:xs()?this.storage=Kp:(this.memoryStorage={},this.storage=vi(this.memoryStorage)):(this.memoryStorage={},this.storage=vi(this.memoryStorage)),De()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lc}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=kp(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),De()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),pp(i)){const d=(e=i.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return G(r)?{error:r}:{error:new dc("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,a;try{const i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ge}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(G(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,a;try{let i;if("email"in e){const{email:u,password:h,options:m}=e;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await Ot(this.storage,this.storageKey)),i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:x},xform:Ge})}else if("phone"in e){const{phone:u,password:h,options:m}=e;i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ge})}else throw new Gs("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(i){if(G(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:yi})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:yi})}else throw new Gs("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new qs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(G(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,a,i,o,l,d,c,u,h,m,f;let x,b;if("message"in e)x=e.message,b=e.signature;else{const{chain:g,wallet:v,statement:y,options:w}=e;let _;if(De())if(typeof v=="object")_=v;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))_=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const N=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const k=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),y?{statement:y}:null));let j;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")j=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)j=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)x=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),b=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${N.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(a=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((d=w==null?void 0:w.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const k=await _.signMessage(new TextEncoder().encode(x),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=k}}try{const{data:g,error:v}=await K(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:jp(b)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ge});if(v)throw v;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new qs}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:v})}catch(g){if(G(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const r=await Ws(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await K(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ge});if(await Ks(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new qs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(G(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=e,l=await K(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ge}),{data:d,error:c}=l;return c?{data:{user:null,session:null},error:c}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new qs}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:c})}catch(r){if(G(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,a,i,o;try{if("email"in e){const{email:l,options:d}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Ot(this.storage,this.storageKey));const{error:h}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:d}=e,{data:c,error:u}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Gs("You must provide either an email or phone number.")}catch(l){if(G(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let a,i;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await K(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ge});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,c=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:c,session:d},error:null}}catch(a){if(G(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ot(this.storage,this.storageKey)),await K(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Bp})}catch(i){if(G(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new rt;const{error:a}=await K(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(G(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:i}=e,{error:o}=await K(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:a,options:i}=e,{data:o,error:l}=await K(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Gs("You must provide either an email or phone number and a type")}catch(r){if(G(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Ws(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Yr:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,c,u))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ot}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rt}:await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:ot})})}catch(r){if(G(r))return fp(r)&&(await this._removeSession(),await Ks(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new rt;const o=a.session;let l=null,d=null;this.flowType==="pkce"&&e.email!=null&&([l,d]=await Ot(this.storage,this.storageKey));const{data:c,error:u}=await K(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:ot});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(G(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new rt;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=Qr(e.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:d}=await this._getUser(e.access_token);if(d)throw d;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(G(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new rt;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(G(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!De())throw new Hs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Hs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new hi("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new hi("No code detected.");const{data:y,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:d,token_type:c}=e;if(!i||!l||!o||!c)throw new Hs("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let m=u+h;d&&(m=parseInt(d));const f=m-u;f*1e3<=Ft&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const x=m-h;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,u);const{data:b,error:g}=await this._getUser(i);if(g)throw g;const v={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(n){if(G(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Ws(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(mp(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ks(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=_p(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Ot(this.storage,this.storageKey,!0));try{return await K(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(G(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,d,c,u;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await K(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return De()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(G(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await K(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Cp(async a=>(a>0&&await Tp(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await K(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ge})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Zr(i)&&Date.now()+o-n<Ft})}catch(n){if(this._debug(r,"error",n),G(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),De()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Ws(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Yr;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Yr}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Zr(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new rt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ir;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new rt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),G(i)){const o={session:null,error:i};return Zr(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(d){i.push(d)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await mc(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ks(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&De()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ft);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/Ft);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ft}ms, refresh threshold is ${Dn} ticks`),a<=Dn&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fc)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!De()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ot(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await K(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:c}=await K(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await K(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(G(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await K(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(G(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Qr(a.access_token);let l=null;o.aal&&(l=o.aal);let d=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+up>Date.now()))return n;const{data:a,error:i}=await K(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!a.keys||a.keys.length===0)throw new ps("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),n=a.keys.find(o=>o.kid===e),!n)throw new ps("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:f,error:x}=await this.getSession();if(x||!f.session)return{data:null,error:x};n=f.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:d}}=Qr(n);if(Mp(i.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:i,header:a,signature:o},error:null}}const c=Op(a.alg),u=await this.fetchJwk(a.kid,r),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,wp(`${l}.${d}`)))throw new ps("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}}}Ss.nextInstanceID=0;const Qp=Ss;class ex extends Qp{constructor(e){super(e)}}var tx=globalThis&&globalThis.__awaiter||function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(h){o(h)}}function d(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(t,e||[])).next())})};class sx{constructor(e,r,n){var a,i,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=ap(e),d=new URL(l);this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const c=`sb-${d.hostname.split(".")[0]}-auth-token`,u={db:Yf,realtime:Qf,auth:Object.assign(Object.assign({},Zf),{storageKey:c}),global:Jf},h=ip(n??{},u);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=rp(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new vf(new URL("rest/v1",d).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Km(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Wf(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return tx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:o,lock:l,debug:d},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ex({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,flowType:o,lock:l,debug:d,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Rf(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const rx=(t,e,r)=>new sx(t,e,r),nx="https://wjjgnspqiakolhgeqkkz.supabase.co",ax="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indqamduc3BxaWFrb2xoZ2Vxa2t6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxNTUyMDUsImV4cCI6MjA2NTczMTIwNX0.eooKPqp-iCZWMC5Jz8vzAwADkDqhkrs9-s2A_Of5md0",E=rx(nx,ax),ix="login-learning.com",pc=p.createContext(),Oe={SUPER_ADMIN:"super_admin",BRANCH_MANAGER:"branch_manager",INSTRUCTOR:"instructor",STUDENT:"student",PARENT:"parent",GUEST:"guest"},wi=t=>t?t.toLowerCase().endsWith(`@${ix}`):!1,ox=({children:t})=>{const[e,r]=p.useState(null),[n,a]=p.useState(!0),[i,o]=p.useState(!1),[l,d]=p.useState(Oe.GUEST),{toast:c}=se();p.useEffect(()=>{if(!E){console.warn("Supabase client is not initialized. This might be because Supabase URL or Anon Key are missing or incorrect."),c({title:"⚠️ Supabase ยังไม่ได้เริ่มการทำงาน",description:"กรุณาตรวจสอบการตั้งค่า Supabase URL และ Anon Key",variant:"destructive",duration:1e4}),a(!1);return}(async()=>{var y;try{const{data:{session:w},error:_}=await E.auth.getSession();_&&(console.error("Error getting session:",_),c({title:"ข้อผิดพลาดในการโหลดเซสชัน",description:_.message,variant:"destructive"}));const N=(w==null?void 0:w.user)??null;r(N),N?wi(N.email)?(o(!0),d(Oe.SUPER_ADMIN)):(o(!1),d(((y=N.user_metadata)==null?void 0:y.role)||Oe.STUDENT)):(o(!1),d(Oe.GUEST))}catch(w){console.error("Exception in getSession:",w),c({title:"เกิดข้อผิดพลาดร้ายแรงในการโหลดเซสชัน",description:w.message,variant:"destructive"})}finally{a(!1)}})();const{data:v}=E.auth.onAuthStateChange(async(y,w)=>{var N;const _=(w==null?void 0:w.user)??null;r(_),_?wi(_.email)?(o(!0),d(Oe.SUPER_ADMIN)):(o(!1),d(((N=_.user_metadata)==null?void 0:N.role)||Oe.STUDENT)):(o(!1),d(Oe.GUEST)),y==="SIGNED_IN"&&_?c({title:`เข้าสู่ระบบสำเร็จในฐานะ ${l}!`}):y==="PASSWORD_RECOVERY"?c({title:"การกู้คืนรหัสผ่าน",description:"คำแนะนำในการกู้คืนรหัสผ่านถูกส่งไปยังอีเมลของคุณแล้ว"}):y==="USER_UPDATED"&&c({title:"ข้อมูลผู้ใช้อัปเดตแล้ว"}),a(!1)});return()=>{v==null||v.subscription.unsubscribe()}},[c]);const b={user:e,isAdmin:i,userRole:l,ROLES:Oe,hasRole:g=>e?l===Oe.SUPER_ADMIN?!0:l===g:!1,signInWithPassword:async(g,v)=>{if(!E)return c({title:"Supabase ยังไม่ได้เชื่อมต่อ",description:"กรุณาเชื่อมต่อ Supabase ก่อนใช้งาน",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};a(!0);const{data:y,error:w}=await E.auth.signInWithPassword({email:g,password:v});return a(!1),{data:y,error:w}},signUpWithPassword:async(g,v,y)=>{if(!E)return c({title:"Supabase ยังไม่ได้เชื่อมต่อ",description:"กรุณาเชื่อมต่อ Supabase ก่อนใช้งาน",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};a(!0);const{data:w,error:_}=await E.auth.signUp({email:g,password:v,options:{data:{full_name:y,role:Oe.STUDENT}}});return a(!1),{data:w,error:_}},signInWithGoogle:async()=>{if(!E)return c({title:"Supabase ยังไม่ได้เชื่อมต่อ",description:"กรุณาเชื่อมต่อ Supabase ก่อนใช้งาน",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};a(!0);const{data:g,error:v}=await E.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});return a(!1),{data:g,error:v}},signOut:async()=>{if(!E)return c({title:"Supabase ยังไม่ได้เชื่อมต่อ",description:"กรุณาเชื่อมต่อ Supabase ก่อนใช้งาน",variant:"destructive"}),{error:{message:"Supabase client not initialized"}};a(!0);const{error:g}=await E.auth.signOut();return a(!1),g||(r(null),o(!1),d(Oe.GUEST)),{error:g}},loading:n,isSupabaseConnected:!!E};return s.jsx(pc.Provider,{value:b,children:t})},ge=()=>p.useContext(pc),xc=p.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Mr=p.createContext({}),Or=p.createContext(null),Dr=typeof document<"u",pa=Dr?p.useLayoutEffect:p.useEffect,gc=p.createContext({strict:!1}),xa=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),lx="framerAppearId",yc="data-"+xa(lx);function cx(t,e,r,n){const{visualElement:a}=p.useContext(Mr),i=p.useContext(gc),o=p.useContext(Or),l=p.useContext(xc).reducedMotion,d=p.useRef();n=n||i.renderer,!d.current&&n&&(d.current=n(t,{visualState:e,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=d.current;p.useInsertionEffect(()=>{c&&c.update(r,o)});const u=p.useRef(!!(r[yc]&&!window.HandoffComplete));return pa(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),p.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function Ut(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function dx(t,e,r){return p.useCallback(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):Ut(r)&&(r.current=n))},[e])}function Ts(t){return typeof t=="string"||Array.isArray(t)}function $r(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const ga=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ya=["initial",...ga];function Fr(t){return $r(t.animate)||ya.some(e=>Ts(t[e]))}function vc(t){return!!(Fr(t)||t.variants)}function ux(t,e){if(Fr(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Ts(r)?r:void 0,animate:Ts(n)?n:void 0}}return t.inherit!==!1?e:{}}function hx(t){const{initial:e,animate:r}=ux(t,p.useContext(Mr));return p.useMemo(()=>({initial:e,animate:r}),[ji(e),ji(r)])}function ji(t){return Array.isArray(t)?t.join(" "):t}const Ni={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Cs={};for(const t in Ni)Cs[t]={isEnabled:e=>Ni[t].some(r=>!!e[r])};function mx(t){for(const e in t)Cs[e]={...Cs[e],...t[e]}}const va=p.createContext({}),bc=p.createContext({}),fx=Symbol.for("motionComponentSymbol");function px({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:a}){t&&mx(t);function i(l,d){let c;const u={...p.useContext(xc),...l,layoutId:xx(l)},{isStatic:h}=u,m=hx(l),f=n(l,h);if(!h&&Dr){m.visualElement=cx(a,f,u,e);const x=p.useContext(bc),b=p.useContext(gc).strict;m.visualElement&&(c=m.visualElement.loadFeatures(u,b,t,x))}return p.createElement(Mr.Provider,{value:m},c&&m.visualElement?p.createElement(c,{visualElement:m.visualElement,...u}):null,r(a,l,dx(f,m.visualElement,d),f,h,m.visualElement))}const o=p.forwardRef(i);return o[fx]=a,o}function xx({layoutId:t}){const e=p.useContext(va).id;return e&&t!==void 0?e+"-"+t:t}function gx(t){function e(n,a={}){return px(t(n,a))}if(typeof Proxy>"u")return e;const r=new Map;return new Proxy(e,{get:(n,a)=>(r.has(a)||r.set(a,e(a)),r.get(a))})}const yx=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ba(t){return typeof t!="string"||t.includes("-")?!1:!!(yx.indexOf(t)>-1||/[A-Z]/.test(t))}const mr={};function vx(t){Object.assign(mr,t)}const Os=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Lt=new Set(Os);function wc(t,{layout:e,layoutId:r}){return Lt.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!mr[t]||t==="opacity")}const ke=t=>!!(t&&t.getVelocity),bx={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wx=Os.length;function jx(t,{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},n,a){let i="";for(let o=0;o<wx;o++){const l=Os[o];if(t[l]!==void 0){const d=bx[l]||l;i+=`${d}(${t[l]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(t,n?"":i):r&&n&&(i="none"),i}const jc=t=>e=>typeof e=="string"&&e.startsWith(t),Nc=jc("--"),Un=jc("var(--"),Nx=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,_x=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ut=(t,e,r)=>Math.min(Math.max(r,t),e),Rt={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},gs={...Rt,transform:t=>ut(0,1,t)},Xs={...Rt,default:1},ys=t=>Math.round(t*1e5)/1e5,Ur=/(-)?([\d]*\.?[\d])+/g,_c=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,kx=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ds(t){return typeof t=="string"}const $s=t=>({test:e=>Ds(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),nt=$s("deg"),Be=$s("%"),z=$s("px"),Sx=$s("vh"),Tx=$s("vw"),_i={...Be,parse:t=>Be.parse(t)/100,transform:t=>Be.transform(t*100)},ki={...Rt,transform:Math.round},kc={borderWidth:z,borderTopWidth:z,borderRightWidth:z,borderBottomWidth:z,borderLeftWidth:z,borderRadius:z,radius:z,borderTopLeftRadius:z,borderTopRightRadius:z,borderBottomRightRadius:z,borderBottomLeftRadius:z,width:z,maxWidth:z,height:z,maxHeight:z,size:z,top:z,right:z,bottom:z,left:z,padding:z,paddingTop:z,paddingRight:z,paddingBottom:z,paddingLeft:z,margin:z,marginTop:z,marginRight:z,marginBottom:z,marginLeft:z,rotate:nt,rotateX:nt,rotateY:nt,rotateZ:nt,scale:Xs,scaleX:Xs,scaleY:Xs,scaleZ:Xs,skew:nt,skewX:nt,skewY:nt,distance:z,translateX:z,translateY:z,translateZ:z,x:z,y:z,z,perspective:z,transformPerspective:z,opacity:gs,originX:_i,originY:_i,originZ:z,zIndex:ki,fillOpacity:gs,strokeOpacity:gs,numOctaves:ki};function wa(t,e,r,n){const{style:a,vars:i,transform:o,transformOrigin:l}=t;let d=!1,c=!1,u=!0;for(const h in e){const m=e[h];if(Nc(h)){i[h]=m;continue}const f=kc[h],x=_x(m,f);if(Lt.has(h)){if(d=!0,o[h]=x,!u)continue;m!==(f.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,l[h]=x):a[h]=x}if(e.transform||(d||n?a.transform=jx(t.transform,r,u,n):a.transform&&(a.transform="none")),c){const{originX:h="50%",originY:m="50%",originZ:f=0}=l;a.transformOrigin=`${h} ${m} ${f}`}}const ja=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Sc(t,e,r){for(const n in e)!ke(e[n])&&!wc(n,r)&&(t[n]=e[n])}function Cx({transformTemplate:t},e,r){return p.useMemo(()=>{const n=ja();return wa(n,e,{enableHardwareAcceleration:!r},t),Object.assign({},n.vars,n.style)},[e])}function Ex(t,e,r){const n=t.style||{},a={};return Sc(a,n,t),Object.assign(a,Cx(t,e,r)),t.transformValues?t.transformValues(a):a}function Px(t,e,r){const n={},a=Ex(t,e,r);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=a,n}const Ax=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fr(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Ax.has(t)}let Tc=t=>!fr(t);function Lx(t){t&&(Tc=e=>e.startsWith("on")?!fr(e):t(e))}try{Lx(require("@emotion/is-prop-valid").default)}catch{}function Rx(t,e,r){const n={};for(const a in t)a==="values"&&typeof t.values=="object"||(Tc(a)||r===!0&&fr(a)||!e&&!fr(a)||t.draggable&&a.startsWith("onDrag"))&&(n[a]=t[a]);return n}function Si(t,e,r){return typeof t=="string"?t:z.transform(e+r*t)}function Ix(t,e,r){const n=Si(e,t.x,t.width),a=Si(r,t.y,t.height);return`${n} ${a}`}const Mx={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ox={offset:"strokeDashoffset",array:"strokeDasharray"};function Dx(t,e,r=1,n=0,a=!0){t.pathLength=1;const i=a?Mx:Ox;t[i.offset]=z.transform(-n);const o=z.transform(e),l=z.transform(r);t[i.array]=`${o} ${l}`}function Na(t,{attrX:e,attrY:r,attrScale:n,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:d=0,...c},u,h,m){if(wa(t,c,u,m),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:x,dimensions:b}=t;f.transform&&(b&&(x.transform=f.transform),delete f.transform),b&&(a!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=Ix(b,a!==void 0?a:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),o!==void 0&&Dx(f,o,l,d,!1)}const Cc=()=>({...ja(),attrs:{}}),_a=t=>typeof t=="string"&&t.toLowerCase()==="svg";function $x(t,e,r,n){const a=p.useMemo(()=>{const i=Cc();return Na(i,e,{enableHardwareAcceleration:!1},_a(n),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};Sc(i,t.style,t),a.style={...i,...a.style}}return a}function Fx(t=!1){return(r,n,a,{latestValues:i},o)=>{const d=(ba(r)?$x:Px)(n,i,o,r),u={...Rx(n,typeof r=="string",t),...d,ref:a},{children:h}=n,m=p.useMemo(()=>ke(h)?h.get():h,[h]);return p.createElement(r,{...u,children:m})}}function Ec(t,{style:e,vars:r},n,a){Object.assign(t.style,e,a&&a.getProjectionStyles(n));for(const i in r)t.style.setProperty(i,r[i])}const Pc=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ac(t,e,r,n){Ec(t,e,void 0,n);for(const a in e.attrs)t.setAttribute(Pc.has(a)?a:xa(a),e.attrs[a])}function ka(t,e){const{style:r}=t,n={};for(const a in r)(ke(r[a])||e.style&&ke(e.style[a])||wc(a,t))&&(n[a]=r[a]);return n}function Lc(t,e){const r=ka(t,e);for(const n in t)if(ke(t[n])||ke(e[n])){const a=Os.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[a]=t[n]}return r}function Sa(t,e,r,n={},a={}){return typeof e=="function"&&(e=e(r!==void 0?r:t.custom,n,a)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(r!==void 0?r:t.custom,n,a)),e}function Rc(t){const e=p.useRef(null);return e.current===null&&(e.current=t()),e.current}const pr=t=>Array.isArray(t),Ux=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Vx=t=>pr(t)?t[t.length-1]||0:t;function tr(t){const e=ke(t)?t.get():t;return Ux(e)?e.toValue():e}function Bx({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},n,a,i){const o={latestValues:zx(n,a,i,t),renderState:e()};return r&&(o.mount=l=>r(n,l,o)),o}const Ic=t=>(e,r)=>{const n=p.useContext(Mr),a=p.useContext(Or),i=()=>Bx(t,e,n,a);return r?i():Rc(i)};function zx(t,e,r,n){const a={},i=n(t,{});for(const m in i)a[m]=tr(i[m]);let{initial:o,animate:l}=t;const d=Fr(t),c=vc(t);e&&c&&!d&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?l:o;return h&&typeof h!="boolean"&&!$r(h)&&(Array.isArray(h)?h:[h]).forEach(f=>{const x=Sa(t,f);if(!x)return;const{transitionEnd:b,transition:g,...v}=x;for(const y in v){let w=v[y];if(Array.isArray(w)){const _=u?w.length-1:0;w=w[_]}w!==null&&(a[y]=w)}for(const y in b)a[y]=b[y]}),a}const de=t=>t;class Ti{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function qx(t){let e=new Ti,r=new Ti,n=0,a=!1,i=!1;const o=new WeakSet,l={schedule:(d,c=!1,u=!1)=>{const h=u&&a,m=h?e:r;return c&&o.add(d),m.add(d)&&h&&a&&(n=e.order.length),d},cancel:d=>{r.remove(d),o.delete(d)},process:d=>{if(a){i=!0;return}if(a=!0,[e,r]=[r,e],r.clear(),n=e.order.length,n)for(let c=0;c<n;c++){const u=e.order[c];u(d),o.has(u)&&(l.schedule(u),t())}a=!1,i&&(i=!1,l.process(d))}};return l}const Js=["prepare","read","update","preRender","render","postRender"],Gx=40;function Hx(t,e){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=Js.reduce((h,m)=>(h[m]=qx(()=>r=!0),h),{}),o=h=>i[h].process(a),l=()=>{const h=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(h-a.timestamp,Gx),1),a.timestamp=h,a.isProcessing=!0,Js.forEach(o),a.isProcessing=!1,r&&e&&(n=!1,t(l))},d=()=>{r=!0,n=!0,a.isProcessing||t(l)};return{schedule:Js.reduce((h,m)=>{const f=i[m];return h[m]=(x,b=!1,g=!1)=>(r||d(),f.schedule(x,b,g)),h},{}),cancel:h=>Js.forEach(m=>i[m].cancel(h)),state:a,steps:i}}const{schedule:ae,cancel:Ze,state:ye,steps:tn}=Hx(typeof requestAnimationFrame<"u"?requestAnimationFrame:de,!0),Wx={useVisualState:Ic({scrapeMotionValuesFromProps:Lc,createRenderState:Cc,onMount:(t,e,{renderState:r,latestValues:n})=>{ae.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),ae.render(()=>{Na(r,n,{enableHardwareAcceleration:!1},_a(e.tagName),t.transformTemplate),Ac(e,r)})}})},Kx={useVisualState:Ic({scrapeMotionValuesFromProps:ka,createRenderState:ja})};function Xx(t,{forwardMotionProps:e=!1},r,n){return{...ba(t)?Wx:Kx,preloadedFeatures:r,useRender:Fx(e),createVisualElement:n,Component:t}}function We(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}const Mc=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Vr(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const Jx=t=>e=>Mc(e)&&t(e,Vr(e));function Ke(t,e,r,n){return We(t,e,Jx(r),n)}const Yx=(t,e)=>r=>e(t(r)),lt=(...t)=>t.reduce(Yx);function Oc(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const Ci=Oc("dragHorizontal"),Ei=Oc("dragVertical");function Dc(t){let e=!1;if(t==="y")e=Ei();else if(t==="x")e=Ci();else{const r=Ci(),n=Ei();r&&n?e=()=>{r(),n()}:(r&&r(),n&&n())}return e}function $c(){const t=Dc(!0);return t?(t(),!1):!0}class ft{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Pi(t,e){const r="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End"),a=(i,o)=>{if(i.pointerType==="touch"||$c())return;const l=t.getProps();t.animationState&&l.whileHover&&t.animationState.setActive("whileHover",e),l[n]&&ae.update(()=>l[n](i,o))};return Ke(t.current,r,a,{passive:!t.getProps()[n]})}class Zx extends ft{mount(){this.unmount=lt(Pi(this.node,!0),Pi(this.node,!1))}unmount(){}}class Qx extends ft{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=lt(We(this.node.current,"focus",()=>this.onFocus()),We(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Fc=(t,e)=>e?t===e?!0:Fc(t,e.parentElement):!1;function sn(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,Vr(r))}class e0 extends ft{constructor(){super(...arguments),this.removeStartListeners=de,this.removeEndListeners=de,this.removeAccessibleListeners=de,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=Ke(window,"pointerup",(l,d)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps();ae.update(()=>{!h&&!Fc(this.node.current,l.target)?u&&u(l,d):c&&c(l,d)})},{passive:!(n.onTap||n.onPointerUp)}),o=Ke(window,"pointercancel",(l,d)=>this.cancelPress(l,d),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=lt(i,o),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||sn("up",(d,c)=>{const{onTap:u}=this.node.getProps();u&&ae.update(()=>u(d,c))})};this.removeEndListeners(),this.removeEndListeners=We(this.node.current,"keyup",o),sn("down",(l,d)=>{this.startPress(l,d)})},r=We(this.node.current,"keydown",e),n=()=>{this.isPressing&&sn("cancel",(i,o)=>this.cancelPress(i,o))},a=We(this.node.current,"blur",n);this.removeAccessibleListeners=lt(r,a)}}startPress(e,r){this.isPressing=!0;const{onTapStart:n,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&ae.update(()=>n(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!$c()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&ae.update(()=>n(e,r))}mount(){const e=this.node.getProps(),r=Ke(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=We(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=lt(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Vn=new WeakMap,rn=new WeakMap,t0=t=>{const e=Vn.get(t.target);e&&e(t)},s0=t=>{t.forEach(t0)};function r0({root:t,...e}){const r=t||document;rn.has(r)||rn.set(r,{});const n=rn.get(r),a=JSON.stringify(e);return n[a]||(n[a]=new IntersectionObserver(s0,{root:t,...e})),n[a]}function n0(t,e,r){const n=r0(e);return Vn.set(t,r),n.observe(t),()=>{Vn.delete(t),n.unobserve(t)}}const a0={some:0,all:1};class i0 extends ft{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:a0[a]},l=d=>{const{isIntersecting:c}=d;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=c?u:h;m&&m(d)};return n0(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(o0(e,r))&&this.startObserver()}unmount(){}}function o0({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const l0={inView:{Feature:i0},tap:{Feature:e0},focus:{Feature:Qx},hover:{Feature:Zx}};function Uc(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function c0(t){const e={};return t.values.forEach((r,n)=>e[n]=r.get()),e}function d0(t){const e={};return t.values.forEach((r,n)=>e[n]=r.getVelocity()),e}function Br(t,e,r){const n=t.getProps();return Sa(n,e,r!==void 0?r:n.custom,c0(t),d0(t))}let u0=de,Ta=de;const ct=t=>t*1e3,Xe=t=>t/1e3,h0={current:!1},Vc=t=>Array.isArray(t)&&typeof t[0]=="number";function Bc(t){return!!(!t||typeof t=="string"&&zc[t]||Vc(t)||Array.isArray(t)&&t.every(Bc))}const hs=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,zc={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hs([0,.65,.55,1]),circOut:hs([.55,0,1,.45]),backIn:hs([.31,.01,.66,-.59]),backOut:hs([.33,1.53,.69,.99])};function qc(t){if(t)return Vc(t)?hs(t):Array.isArray(t)?t.map(qc):zc[t]}function m0(t,e,r,{delay:n=0,duration:a,repeat:i=0,repeatType:o="loop",ease:l,times:d}={}){const c={[e]:r};d&&(c.offset=d);const u=qc(l);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:n,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function f0(t,{repeat:e,repeatType:r="loop"}){const n=e&&r!=="loop"&&e%2===1?0:t.length-1;return t[n]}const Gc=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,p0=1e-7,x0=12;function g0(t,e,r,n,a){let i,o,l=0;do o=e+(r-e)/2,i=Gc(o,n,a)-t,i>0?r=o:e=o;while(Math.abs(i)>p0&&++l<x0);return o}function Fs(t,e,r,n){if(t===e&&r===n)return de;const a=i=>g0(i,0,1,t,r);return i=>i===0||i===1?i:Gc(a(i),e,n)}const y0=Fs(.42,0,1,1),v0=Fs(0,0,.58,1),Hc=Fs(.42,0,.58,1),b0=t=>Array.isArray(t)&&typeof t[0]!="number",Wc=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Kc=t=>e=>1-t(1-e),Ca=t=>1-Math.sin(Math.acos(t)),Xc=Kc(Ca),w0=Wc(Ca),Jc=Fs(.33,1.53,.69,.99),Ea=Kc(Jc),j0=Wc(Ea),N0=t=>(t*=2)<1?.5*Ea(t):.5*(2-Math.pow(2,-10*(t-1))),_0={linear:de,easeIn:y0,easeInOut:Hc,easeOut:v0,circIn:Ca,circInOut:w0,circOut:Xc,backIn:Ea,backInOut:j0,backOut:Jc,anticipate:N0},Ai=t=>{if(Array.isArray(t)){Ta(t.length===4);const[e,r,n,a]=t;return Fs(e,r,n,a)}else if(typeof t=="string")return _0[t];return t},Pa=(t,e)=>r=>!!(Ds(r)&&kx.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),Yc=(t,e,r)=>n=>{if(!Ds(n))return n;const[a,i,o,l]=n.match(Ur);return{[t]:parseFloat(a),[e]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},k0=t=>ut(0,255,t),nn={...Rt,transform:t=>Math.round(k0(t))},_t={test:Pa("rgb","red"),parse:Yc("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+nn.transform(t)+", "+nn.transform(e)+", "+nn.transform(r)+", "+ys(gs.transform(n))+")"};function S0(t){let e="",r="",n="",a="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),a=t.substring(4,5),e+=e,r+=r,n+=n,a+=a),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const Bn={test:Pa("#"),parse:S0,transform:_t.transform},Vt={test:Pa("hsl","hue"),parse:Yc("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+Be.transform(ys(e))+", "+Be.transform(ys(r))+", "+ys(gs.transform(n))+")"},je={test:t=>_t.test(t)||Bn.test(t)||Vt.test(t),parse:t=>_t.test(t)?_t.parse(t):Vt.test(t)?Vt.parse(t):Bn.parse(t),transform:t=>Ds(t)?t:t.hasOwnProperty("red")?_t.transform(t):Vt.transform(t)},oe=(t,e,r)=>-r*t+r*e+t;function an(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function T0({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let a=0,i=0,o=0;if(!e)a=i=o=r;else{const l=r<.5?r*(1+e):r+e-r*e,d=2*r-l;a=an(d,l,t+1/3),i=an(d,l,t),o=an(d,l,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}const on=(t,e,r)=>{const n=t*t;return Math.sqrt(Math.max(0,r*(e*e-n)+n))},C0=[Bn,_t,Vt],E0=t=>C0.find(e=>e.test(t));function Li(t){const e=E0(t);let r=e.parse(t);return e===Vt&&(r=T0(r)),r}const Zc=(t,e)=>{const r=Li(t),n=Li(e),a={...r};return i=>(a.red=on(r.red,n.red,i),a.green=on(r.green,n.green,i),a.blue=on(r.blue,n.blue,i),a.alpha=oe(r.alpha,n.alpha,i),_t.transform(a))};function P0(t){var e,r;return isNaN(t)&&Ds(t)&&(((e=t.match(Ur))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(_c))===null||r===void 0?void 0:r.length)||0)>0}const Qc={regex:Nx,countKey:"Vars",token:"${v}",parse:de},ed={regex:_c,countKey:"Colors",token:"${c}",parse:je.parse},td={regex:Ur,countKey:"Numbers",token:"${n}",parse:Rt.parse};function ln(t,{regex:e,countKey:r,token:n,parse:a}){const i=t.tokenised.match(e);i&&(t["num"+r]=i.length,t.tokenised=t.tokenised.replace(e,n),t.values.push(...i.map(a)))}function xr(t){const e=t.toString(),r={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&ln(r,Qc),ln(r,ed),ln(r,td),r}function sd(t){return xr(t).values}function rd(t){const{values:e,numColors:r,numVars:n,tokenised:a}=xr(t),i=e.length;return o=>{let l=a;for(let d=0;d<i;d++)d<n?l=l.replace(Qc.token,o[d]):d<n+r?l=l.replace(ed.token,je.transform(o[d])):l=l.replace(td.token,ys(o[d]));return l}}const A0=t=>typeof t=="number"?0:t;function L0(t){const e=sd(t);return rd(t)(e.map(A0))}const ht={test:P0,parse:sd,createTransformer:rd,getAnimatableNone:L0},nd=(t,e)=>r=>`${r>0?e:t}`;function ad(t,e){return typeof t=="number"?r=>oe(t,e,r):je.test(t)?Zc(t,e):t.startsWith("var(")?nd(t,e):od(t,e)}const id=(t,e)=>{const r=[...t],n=r.length,a=t.map((i,o)=>ad(i,e[o]));return i=>{for(let o=0;o<n;o++)r[o]=a[o](i);return r}},R0=(t,e)=>{const r={...t,...e},n={};for(const a in r)t[a]!==void 0&&e[a]!==void 0&&(n[a]=ad(t[a],e[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}},od=(t,e)=>{const r=ht.createTransformer(e),n=xr(t),a=xr(e);return n.numVars===a.numVars&&n.numColors===a.numColors&&n.numNumbers>=a.numNumbers?lt(id(n.values,a.values),r):nd(t,e)},Es=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},Ri=(t,e)=>r=>oe(t,e,r);function I0(t){return typeof t=="number"?Ri:typeof t=="string"?je.test(t)?Zc:od:Array.isArray(t)?id:typeof t=="object"?R0:Ri}function M0(t,e,r){const n=[],a=r||I0(t[0]),i=t.length-1;for(let o=0;o<i;o++){let l=a(t[o],t[o+1]);if(e){const d=Array.isArray(e)?e[o]||de:e;l=lt(d,l)}n.push(l)}return n}function ld(t,e,{clamp:r=!0,ease:n,mixer:a}={}){const i=t.length;if(Ta(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=M0(e,n,a),l=o.length,d=c=>{let u=0;if(l>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const h=Es(t[u],t[u+1],c);return o[u](h)};return r?c=>d(ut(t[0],t[i-1],c)):d}function O0(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const a=Es(0,e,n);t.push(oe(r,1,a))}}function D0(t){const e=[0];return O0(e,t.length-1),e}function $0(t,e){return t.map(r=>r*e)}function F0(t,e){return t.map(()=>e||Hc).splice(0,t.length-1)}function gr({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const a=b0(n)?n.map(Ai):Ai(n),i={done:!1,value:e[0]},o=$0(r&&r.length===e.length?r:D0(e),t),l=ld(o,e,{ease:Array.isArray(a)?a:F0(e,a)});return{calculatedDuration:t,next:d=>(i.value=l(d),i.done=d>=t,i)}}function cd(t,e){return e?t*(1e3/e):0}const U0=5;function dd(t,e,r){const n=Math.max(e-U0,0);return cd(r-t(n),e-n)}const cn=.001,V0=.01,Ii=10,B0=.05,z0=1;function q0({duration:t=800,bounce:e=.25,velocity:r=0,mass:n=1}){let a,i;u0(t<=ct(Ii));let o=1-e;o=ut(B0,z0,o),t=ut(V0,Ii,Xe(t)),o<1?(a=c=>{const u=c*o,h=u*t,m=u-r,f=zn(c,o),x=Math.exp(-h);return cn-m/f*x},i=c=>{const h=c*o*t,m=h*r+r,f=Math.pow(o,2)*Math.pow(c,2)*t,x=Math.exp(-h),b=zn(Math.pow(c,2),o);return(-a(c)+cn>0?-1:1)*((m-f)*x)/b}):(a=c=>{const u=Math.exp(-c*t),h=(c-r)*t+1;return-cn+u*h},i=c=>{const u=Math.exp(-c*t),h=(r-c)*(t*t);return u*h});const l=5/t,d=H0(a,i,l);if(t=ct(t),isNaN(d))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(d,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:t}}}const G0=12;function H0(t,e,r){let n=r;for(let a=1;a<G0;a++)n=n-t(n)/e(n);return n}function zn(t,e){return t*Math.sqrt(1-e*e)}const W0=["duration","bounce"],K0=["stiffness","damping","mass"];function Mi(t,e){return e.some(r=>t[r]!==void 0)}function X0(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Mi(t,K0)&&Mi(t,W0)){const r=q0(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function ud({keyframes:t,restDelta:e,restSpeed:r,...n}){const a=t[0],i=t[t.length-1],o={done:!1,value:a},{stiffness:l,damping:d,mass:c,duration:u,velocity:h,isResolvedFromDuration:m}=X0({...n,velocity:-Xe(n.velocity||0)}),f=h||0,x=d/(2*Math.sqrt(l*c)),b=i-a,g=Xe(Math.sqrt(l/c)),v=Math.abs(b)<5;r||(r=v?.01:2),e||(e=v?.005:.5);let y;if(x<1){const w=zn(g,x);y=_=>{const N=Math.exp(-x*g*_);return i-N*((f+x*g*b)/w*Math.sin(w*_)+b*Math.cos(w*_))}}else if(x===1)y=w=>i-Math.exp(-g*w)*(b+(f+g*b)*w);else{const w=g*Math.sqrt(x*x-1);y=_=>{const N=Math.exp(-x*g*_),k=Math.min(w*_,300);return i-N*((f+x*g*b)*Math.sinh(k)+w*b*Math.cosh(k))/w}}return{calculatedDuration:m&&u||null,next:w=>{const _=y(w);if(m)o.done=w>=u;else{let N=f;w!==0&&(x<1?N=dd(y,w,_):N=0);const k=Math.abs(N)<=r,j=Math.abs(i-_)<=e;o.done=k&&j}return o.value=o.done?i:_,o}}}function Oi({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:d,restDelta:c=.5,restSpeed:u}){const h=t[0],m={done:!1,value:h},f=S=>l!==void 0&&S<l||d!==void 0&&S>d,x=S=>l===void 0?d:d===void 0||Math.abs(l-S)<Math.abs(d-S)?l:d;let b=r*e;const g=h+b,v=o===void 0?g:o(g);v!==g&&(b=v-h);const y=S=>-b*Math.exp(-S/n),w=S=>v+y(S),_=S=>{const I=y(S),B=w(S);m.done=Math.abs(I)<=c,m.value=m.done?v:B};let N,k;const j=S=>{f(m.value)&&(N=S,k=ud({keyframes:[m.value,x(m.value)],velocity:dd(w,S,m.value),damping:a,stiffness:i,restDelta:c,restSpeed:u}))};return j(0),{calculatedDuration:null,next:S=>{let I=!1;return!k&&N===void 0&&(I=!0,_(S),j(S)),N!==void 0&&S>N?k.next(S-N):(!I&&_(S),m)}}}const J0=t=>{const e=({timestamp:r})=>t(r);return{start:()=>ae.update(e,!0),stop:()=>Ze(e),now:()=>ye.isProcessing?ye.timestamp:performance.now()}},Di=2e4;function $i(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<Di;)e+=r,n=t.next(e);return e>=Di?1/0:e}const Y0={decay:Oi,inertia:Oi,tween:gr,keyframes:gr,spring:ud};function yr({autoplay:t=!0,delay:e=0,driver:r=J0,keyframes:n,type:a="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:d,onStop:c,onComplete:u,onUpdate:h,...m}){let f=1,x=!1,b,g;const v=()=>{g=new Promise(q=>{b=q})};v();let y;const w=Y0[a]||gr;let _;w!==gr&&typeof n[0]!="number"&&(_=ld([0,100],n,{clamp:!1}),n=[0,100]);const N=w({...m,keyframes:n});let k;l==="mirror"&&(k=w({...m,keyframes:[...n].reverse(),velocity:-(m.velocity||0)}));let j="idle",S=null,I=null,B=null;N.calculatedDuration===null&&i&&(N.calculatedDuration=$i(N));const{calculatedDuration:H}=N;let $=1/0,F=1/0;H!==null&&($=H+o,F=$*(i+1)-o);let T=0;const A=q=>{if(I===null)return;f>0&&(I=Math.min(I,q)),f<0&&(I=Math.min(q-F/f,I)),S!==null?T=S:T=Math.round(q-I)*f;const D=T-e*(f>=0?1:-1),V=f>=0?D<0:D>F;T=Math.max(D,0),j==="finished"&&S===null&&(T=F);let ee=T,Ie=N;if(i){const tt=Math.min(T,F)/$;let pt=Math.floor(tt),Ve=tt%1;!Ve&&tt>=1&&(Ve=1),Ve===1&&pt--,pt=Math.min(pt,i+1),!!(pt%2)&&(l==="reverse"?(Ve=1-Ve,o&&(Ve-=o/$)):l==="mirror"&&(Ie=k)),ee=ut(0,1,Ve)*$}const M=V?{done:!1,value:n[0]}:Ie.next(ee);_&&(M.value=_(M.value));let{done:te}=M;!V&&H!==null&&(te=f>=0?T>=F:T<=0);const Q=S===null&&(j==="finished"||j==="running"&&te);return h&&h(M.value),Q&&R(),M},O=()=>{y&&y.stop(),y=void 0},U=()=>{j="idle",O(),b(),v(),I=B=null},R=()=>{j="finished",u&&u(),O(),b()},W=()=>{if(x)return;y||(y=r(A));const q=y.now();d&&d(),S!==null?I=q-S:(!I||j==="finished")&&(I=q),j==="finished"&&v(),B=I,S=null,j="running",y.start()};t&&W();const re={then(q,D){return g.then(q,D)},get time(){return Xe(T)},set time(q){q=ct(q),T=q,S!==null||!y||f===0?S=q:I=y.now()-q/f},get duration(){const q=N.calculatedDuration===null?$i(N):N.calculatedDuration;return Xe(q)},get speed(){return f},set speed(q){q===f||!y||(f=q,re.time=Xe(T))},get state(){return j},play:W,pause:()=>{j="paused",S=T},stop:()=>{x=!0,j!=="idle"&&(j="idle",c&&c(),U())},cancel:()=>{B!==null&&A(B),U()},complete:()=>{j="finished"},sample:q=>(I=0,A(q))};return re}function Z0(t){let e;return()=>(e===void 0&&(e=t()),e)}const Q0=Z0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),eg=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Ys=10,tg=2e4,sg=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Bc(e.ease);function rg(t,e,{onUpdate:r,onComplete:n,...a}){if(!(Q0()&&eg.has(e)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let o=!1,l,d,c=!1;const u=()=>{d=new Promise(w=>{l=w})};u();let{keyframes:h,duration:m=300,ease:f,times:x}=a;if(sg(e,a)){const w=yr({...a,repeat:0,delay:0});let _={done:!1,value:h[0]};const N=[];let k=0;for(;!_.done&&k<tg;)_=w.sample(k),N.push(_.value),k+=Ys;x=void 0,h=N,m=k-Ys,f="linear"}const b=m0(t.owner.current,e,h,{...a,duration:m,ease:f,times:x}),g=()=>{c=!1,b.cancel()},v=()=>{c=!0,ae.update(g),l(),u()};return b.onfinish=()=>{c||(t.set(f0(h,a)),n&&n(),v())},{then(w,_){return d.then(w,_)},attachTimeline(w){return b.timeline=w,b.onfinish=null,de},get time(){return Xe(b.currentTime||0)},set time(w){b.currentTime=ct(w)},get speed(){return b.playbackRate},set speed(w){b.playbackRate=w},get duration(){return Xe(m)},play:()=>{o||(b.play(),Ze(g))},pause:()=>b.pause(),stop:()=>{if(o=!0,b.playState==="idle")return;const{currentTime:w}=b;if(w){const _=yr({...a,autoplay:!1});t.setWithVelocity(_.sample(w-Ys).value,_.sample(w).value,Ys)}v()},complete:()=>{c||b.finish()},cancel:v}}function ng({keyframes:t,delay:e,onUpdate:r,onComplete:n}){const a=()=>(r&&r(t[t.length-1]),n&&n(),{time:0,speed:1,duration:0,play:de,pause:de,stop:de,then:i=>(i(),Promise.resolve()),cancel:de,complete:de});return e?yr({keyframes:[0,1],duration:0,delay:e,onComplete:a}):a()}const ag={type:"spring",stiffness:500,damping:25,restSpeed:10},ig=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),og={type:"keyframes",duration:.8},lg={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},cg=(t,{keyframes:e})=>e.length>2?og:Lt.has(t)?t.startsWith("scale")?ig(e[1]):ag:lg,qn=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ht.test(e)||e==="0")&&!e.startsWith("url(")),dg=new Set(["brightness","contrast","saturate","opacity"]);function ug(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(Ur)||[];if(!n)return t;const a=r.replace(n,"");let i=dg.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+a+")"}const hg=/([a-z-]*)\(.*?\)/g,Gn={...ht,getAnimatableNone:t=>{const e=t.match(hg);return e?e.map(ug).join(" "):t}},mg={...kc,color:je,backgroundColor:je,outlineColor:je,fill:je,stroke:je,borderColor:je,borderTopColor:je,borderRightColor:je,borderBottomColor:je,borderLeftColor:je,filter:Gn,WebkitFilter:Gn},Aa=t=>mg[t];function hd(t,e){let r=Aa(t);return r!==Gn&&(r=ht),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const md=t=>/^0[^.\s]+$/.test(t);function fg(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||md(t)}function pg(t,e,r,n){const a=qn(e,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const o=n.from!==void 0?n.from:t.get();let l;const d=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),fg(i[c])&&d.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(l=i[c]);if(a&&d.length&&l)for(let c=0;c<d.length;c++){const u=d[c];i[u]=hd(e,l)}return i}function xg({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:d,elapsed:c,...u}){return!!Object.keys(u).length}function La(t,e){return t[e]||t.default||t}const gg={skipAnimations:!1},Ra=(t,e,r,n={})=>a=>{const i=La(n,t)||{},o=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-ct(o);const d=pg(e,t,r,i),c=d[0],u=d[d.length-1],h=qn(t,c),m=qn(t,u);let f={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:x=>{e.set(x),i.onUpdate&&i.onUpdate(x)},onComplete:()=>{a(),i.onComplete&&i.onComplete()}};if(xg(i)||(f={...f,...cg(t,f)}),f.duration&&(f.duration=ct(f.duration)),f.repeatDelay&&(f.repeatDelay=ct(f.repeatDelay)),!h||!m||h0.current||i.type===!1||gg.skipAnimations)return ng(f);if(!n.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const x=rg(e,t,f);if(x)return x}return yr(f)};function vr(t){return!!(ke(t)&&t.add)}const fd=t=>/^\-?\d*\.?\d+$/.test(t);function Ia(t,e){t.indexOf(e)===-1&&t.push(e)}function Ma(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class Oa{constructor(){this.subscriptions=[]}add(e){return Ia(this.subscriptions,e),()=>Ma(this.subscriptions,e)}notify(e,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,r,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const yg=t=>!isNaN(parseFloat(t));class vg{constructor(e,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,a=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:o}=ye;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,ae.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ae.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=yg(this.current),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Oa);const n=this.events[e].add(r);return e==="change"?()=>{n(),ae.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?cd(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Qt(t,e){return new vg(t,e)}const pd=t=>e=>e.test(t),bg={test:t=>t==="auto",parse:t=>t},xd=[Rt,z,Be,nt,Tx,Sx,bg],ls=t=>xd.find(pd(t)),wg=[...xd,je,ht],jg=t=>wg.find(pd(t));function Ng(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Qt(r))}function _g(t,e){const r=Br(t,e);let{transitionEnd:n={},transition:a={},...i}=r?t.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const o in i){const l=Vx(i[o]);Ng(t,o,l)}}function kg(t,e,r){var n,a;const i=Object.keys(e).filter(l=>!t.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const d=i[l],c=e[d];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(a=(n=r[d])!==null&&n!==void 0?n:t.readValue(d))!==null&&a!==void 0?a:e[d]),u!=null&&(typeof u=="string"&&(fd(u)||md(u))?u=parseFloat(u):!jg(u)&&ht.test(c)&&(u=hd(d,c)),t.addValue(d,Qt(u,{owner:t})),r[d]===void 0&&(r[d]=u),u!==null&&t.setBaseTarget(d,u))}}function Sg(t,e){return e?(e[t]||e.default||e).from:void 0}function Tg(t,e,r){const n={};for(const a in t){const i=Sg(a,e);if(i!==void 0)n[a]=i;else{const o=r.getValue(a);o&&(n[a]=o.get())}}return n}function Cg({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function Eg(t,e){const r=t.get();if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(e[n]!==r)return!0}else return r!==e}function gd(t,e,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...l}=t.makeTargetAnimatable(e);const d=t.getValue("willChange");n&&(i=n);const c=[],u=a&&t.animationState&&t.animationState.getState()[a];for(const h in l){const m=t.getValue(h),f=l[h];if(!m||f===void 0||u&&Cg(u,h))continue;const x={delay:r,elapsed:0,...La(i||{},h)};if(window.HandoffAppearAnimations){const v=t.getProps()[yc];if(v){const y=window.HandoffAppearAnimations(v,h,m,ae);y!==null&&(x.elapsed=y,x.isHandoff=!0)}}let b=!x.isHandoff&&!Eg(m,f);if(x.type==="spring"&&(m.getVelocity()||x.velocity)&&(b=!1),m.animation&&(b=!1),b)continue;m.start(Ra(h,m,f,t.shouldReduceMotion&&Lt.has(h)?{type:!1}:x));const g=m.animation;vr(d)&&(d.add(h),g.then(()=>d.remove(h))),c.push(g)}return o&&Promise.all(c).then(()=>{o&&_g(t,o)}),c}function Hn(t,e,r={}){const n=Br(t,e,r.custom);let{transition:a=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const i=n?()=>Promise.all(gd(t,n,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:h}=a;return Pg(t,e,c+d,u,h,r)}:()=>Promise.resolve(),{when:l}=a;if(l){const[d,c]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>c())}else return Promise.all([i(),o(r.delay)])}function Pg(t,e,r=0,n=0,a=1,i){const o=[],l=(t.variantChildren.size-1)*n,d=a===1?(c=0)=>c*n:(c=0)=>l-c*n;return Array.from(t.variantChildren).sort(Ag).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(Hn(c,e,{...i,delay:r+d(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Ag(t,e){return t.sortNodePosition(e)}function Lg(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const a=e.map(i=>Hn(t,i,r));n=Promise.all(a)}else if(typeof e=="string")n=Hn(t,e,r);else{const a=typeof e=="function"?Br(t,e,r.custom):e;n=Promise.all(gd(t,a,r))}return n.then(()=>t.notify("AnimationComplete",e))}const Rg=[...ga].reverse(),Ig=ga.length;function Mg(t){return e=>Promise.all(e.map(({animation:r,options:n})=>Lg(t,r,n)))}function Og(t){let e=Mg(t);const r=$g();let n=!0;const a=(d,c)=>{const u=Br(t,c);if(u){const{transition:h,transitionEnd:m,...f}=u;d={...d,...f,...m}}return d};function i(d){e=d(t)}function o(d,c){const u=t.getProps(),h=t.getVariantContext(!0)||{},m=[],f=new Set;let x={},b=1/0;for(let v=0;v<Ig;v++){const y=Rg[v],w=r[y],_=u[y]!==void 0?u[y]:h[y],N=Ts(_),k=y===c?w.isActive:null;k===!1&&(b=v);let j=_===h[y]&&_!==u[y]&&N;if(j&&n&&t.manuallyAnimateOnMount&&(j=!1),w.protectedKeys={...x},!w.isActive&&k===null||!_&&!w.prevProp||$r(_)||typeof _=="boolean")continue;let I=Dg(w.prevProp,_)||y===c&&w.isActive&&!j&&N||v>b&&N,B=!1;const H=Array.isArray(_)?_:[_];let $=H.reduce(a,{});k===!1&&($={});const{prevResolvedValues:F={}}=w,T={...F,...$},A=O=>{I=!0,f.has(O)&&(B=!0,f.delete(O)),w.needsAnimating[O]=!0};for(const O in T){const U=$[O],R=F[O];if(x.hasOwnProperty(O))continue;let W=!1;pr(U)&&pr(R)?W=!Uc(U,R):W=U!==R,W?U!==void 0?A(O):f.add(O):U!==void 0&&f.has(O)?A(O):w.protectedKeys[O]=!0}w.prevProp=_,w.prevResolvedValues=$,w.isActive&&(x={...x,...$}),n&&t.blockInitialAnimation&&(I=!1),I&&(!j||B)&&m.push(...H.map(O=>({animation:O,options:{type:y,...d}})))}if(f.size){const v={};f.forEach(y=>{const w=t.getBaseTarget(y);w!==void 0&&(v[y]=w)}),m.push({animation:v})}let g=!!m.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),n=!1,g?e(m):Promise.resolve()}function l(d,c,u){var h;if(r[d].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(f=>{var x;return(x=f.animationState)===null||x===void 0?void 0:x.setActive(d,c)}),r[d].isActive=c;const m=o(u,d);for(const f in r)r[f].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r}}function Dg(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Uc(e,t):!1}function gt(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $g(){return{animate:gt(!0),whileInView:gt(),whileHover:gt(),whileTap:gt(),whileDrag:gt(),whileFocus:gt(),exit:gt()}}class Fg extends ft{constructor(e){super(e),e.animationState||(e.animationState=Og(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),$r(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let Ug=0;class Vg extends ft{constructor(){super(...arguments),this.id=Ug++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===a)return;const i=this.node.animationState.setActive("exit",!e,{custom:n??this.node.getProps().custom});r&&!e&&i.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Bg={animation:{Feature:Fg},exit:{Feature:Vg}},Fi=(t,e)=>Math.abs(t-e);function zg(t,e){const r=Fi(t.x,e.x),n=Fi(t.y,e.y);return Math.sqrt(r**2+n**2)}class yd{constructor(e,r,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=un(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,f=zg(h.offset,{x:0,y:0})>=3;if(!m&&!f)return;const{point:x}=h,{timestamp:b}=ye;this.history.push({...x,timestamp:b});const{onStart:g,onMove:v}=this.handlers;m||(g&&g(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=dn(m,this.transformPagePoint),ae.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:f,onSessionEnd:x,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=un(h.type==="pointercancel"?this.lastMoveEventInfo:dn(m,this.transformPagePoint),this.history);this.startEvent&&f&&f(h,g),x&&x(h,g)},!Mc(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=a||window;const o=Vr(e),l=dn(o,this.transformPagePoint),{point:d}=l,{timestamp:c}=ye;this.history=[{...d,timestamp:c}];const{onSessionStart:u}=r;u&&u(e,un(l,this.history)),this.removeListeners=lt(Ke(this.contextWindow,"pointermove",this.handlePointerMove),Ke(this.contextWindow,"pointerup",this.handlePointerUp),Ke(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ze(this.updatePoint)}}function dn(t,e){return e?{point:e(t.point)}:t}function Ui(t,e){return{x:t.x-e.x,y:t.y-e.y}}function un({point:t},e){return{point:t,delta:Ui(t,vd(e)),offset:Ui(t,qg(e)),velocity:Gg(e,.1)}}function qg(t){return t[0]}function vd(t){return t[t.length-1]}function Gg(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const a=vd(t);for(;r>=0&&(n=t[r],!(a.timestamp-n.timestamp>ct(e)));)r--;if(!n)return{x:0,y:0};const i=Xe(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ce(t){return t.max-t.min}function Wn(t,e=0,r=.01){return Math.abs(t-e)<=r}function Vi(t,e,r,n=.5){t.origin=n,t.originPoint=oe(e.min,e.max,t.origin),t.scale=Ce(r)/Ce(e),(Wn(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=oe(r.min,r.max,t.origin)-t.originPoint,(Wn(t.translate)||isNaN(t.translate))&&(t.translate=0)}function vs(t,e,r,n){Vi(t.x,e.x,r.x,n?n.originX:void 0),Vi(t.y,e.y,r.y,n?n.originY:void 0)}function Bi(t,e,r){t.min=r.min+e.min,t.max=t.min+Ce(e)}function Hg(t,e,r){Bi(t.x,e.x,r.x),Bi(t.y,e.y,r.y)}function zi(t,e,r){t.min=e.min-r.min,t.max=t.min+Ce(e)}function bs(t,e,r){zi(t.x,e.x,r.x),zi(t.y,e.y,r.y)}function Wg(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?oe(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?oe(r,t,n.max):Math.min(t,r)),t}function qi(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function Kg(t,{top:e,left:r,bottom:n,right:a}){return{x:qi(t.x,r,a),y:qi(t.y,e,n)}}function Gi(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function Xg(t,e){return{x:Gi(t.x,e.x),y:Gi(t.y,e.y)}}function Jg(t,e){let r=.5;const n=Ce(t),a=Ce(e);return a>n?r=Es(e.min,e.max-n,t.min):n>a&&(r=Es(t.min,t.max-a,e.min)),ut(0,1,r)}function Yg(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const Kn=.35;function Zg(t=Kn){return t===!1?t=0:t===!0&&(t=Kn),{x:Hi(t,"left","right"),y:Hi(t,"top","bottom")}}function Hi(t,e,r){return{min:Wi(t,e),max:Wi(t,r)}}function Wi(t,e){return typeof t=="number"?t:t[e]||0}const Ki=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bt=()=>({x:Ki(),y:Ki()}),Xi=()=>({min:0,max:0}),he=()=>({x:Xi(),y:Xi()});function Ae(t){return[t("x"),t("y")]}function bd({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function Qg({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function ey(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function hn(t){return t===void 0||t===1}function Xn({scale:t,scaleX:e,scaleY:r}){return!hn(t)||!hn(e)||!hn(r)}function vt(t){return Xn(t)||wd(t)||t.z||t.rotate||t.rotateX||t.rotateY}function wd(t){return Ji(t.x)||Ji(t.y)}function Ji(t){return t&&t!=="0%"}function br(t,e,r){const n=t-r,a=e*n;return r+a}function Yi(t,e,r,n,a){return a!==void 0&&(t=br(t,a,n)),br(t,r,n)+e}function Jn(t,e=0,r=1,n,a){t.min=Yi(t.min,e,r,n,a),t.max=Yi(t.max,e,r,n,a)}function jd(t,{x:e,y:r}){Jn(t.x,e.translate,e.scale,e.originPoint),Jn(t.y,r.translate,r.scale,r.originPoint)}function ty(t,e,r,n=!1){const a=r.length;if(!a)return;e.x=e.y=1;let i,o;for(let l=0;l<a;l++){i=r[l],o=i.projectionDelta;const d=i.instance;d&&d.style&&d.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&zt(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,jd(t,o)),n&&vt(i.latestValues)&&zt(t,i.latestValues))}e.x=Zi(e.x),e.y=Zi(e.y)}function Zi(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function it(t,e){t.min=t.min+e,t.max=t.max+e}function Qi(t,e,[r,n,a]){const i=e[a]!==void 0?e[a]:.5,o=oe(t.min,t.max,i);Jn(t,e[r],e[n],o,e.scale)}const sy=["x","scaleX","originX"],ry=["y","scaleY","originY"];function zt(t,e){Qi(t.x,e,sy),Qi(t.y,e,ry)}function Nd(t,e){return bd(ey(t.getBoundingClientRect(),e))}function ny(t,e,r){const n=Nd(t,r),{scroll:a}=e;return a&&(it(n.x,a.offset.x),it(n.y,a.offset.y)),n}const _d=({current:t})=>t?t.ownerDocument.defaultView:null,ay=new WeakMap;class iy{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=he(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Vr(u,"page").point)},i=(u,h)=>{const{drag:m,dragPropagation:f,onDragStart:x}=this.getProps();if(m&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Dc(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ae(g=>{let v=this.getAxisMotionValue(g).get()||0;if(Be.test(v)){const{projection:y}=this.visualElement;if(y&&y.layout){const w=y.layout.layoutBox[g];w&&(v=Ce(w)*(parseFloat(v)/100))}}this.originPoint[g]=v}),x&&ae.update(()=>x(u,h),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:m,dragDirectionLock:f,onDirectionLock:x,onDrag:b}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:g}=h;if(f&&this.currentDirection===null){this.currentDirection=oy(g),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",h.point,g),this.updateAxis("y",h.point,g),this.visualElement.render(),b&&b(u,h)},l=(u,h)=>this.stop(u,h),d=()=>Ae(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new yd(e,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:_d(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&ae.update(()=>i(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:a}=this.getProps();if(!n||!Zs(e,a,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=Wg(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;r&&Ut(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=Kg(a.layoutBox,r):this.constraints=!1,this.elastic=Zg(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Ae(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=Yg(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Ut(e))return!1;const n=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=ny(n,a.root,this.visualElement.getTransformPagePoint());let o=Xg(a.layout.layoutBox,i);if(r){const l=r(Qg(o));this.hasMutatedConstraints=!!l,l&&(o=bd(l))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},c=Ae(u=>{if(!Zs(u,r,this.currentDirection))return;let h=d&&d[u]||{};o&&(h={min:0,max:0});const m=a?200:1e6,f=a?40:1e7,x={type:"inertia",velocity:n?e[u]:0,bounceStiffness:m,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,x)});return Promise.all(c).then(l)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return n.start(Ra(e,n,0,r))}stopAnimation(){Ae(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ae(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ae(r=>{const{drag:n}=this.getProps();if(!Zs(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];i.set(e[r]-oe(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Ut(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Ae(o=>{const l=this.getAxisMotionValue(o);if(l){const d=l.get();a[o]=Jg({min:d,max:d},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ae(o=>{if(!Zs(o,e,null))return;const l=this.getAxisMotionValue(o),{min:d,max:c}=this.constraints[o];l.set(oe(d,c,a[o]))})}addListeners(){if(!this.visualElement.current)return;ay.set(this.visualElement,this);const e=this.visualElement.current,r=Ke(e,"pointerdown",d=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();Ut(d)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),n();const o=We(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:d,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ae(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=d[u].translate,h.set(h.get()+d[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=Kn,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Zs(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function oy(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class ly extends ft{constructor(e){super(e),this.removeGroupControls=de,this.removeListeners=de,this.controls=new iy(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||de}unmount(){this.removeGroupControls(),this.removeListeners()}}const eo=t=>(e,r)=>{t&&ae.update(()=>t(e,r))};class cy extends ft{constructor(){super(...arguments),this.removePointerDownListener=de}onPointerDown(e){this.session=new yd(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_d(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:eo(e),onStart:eo(r),onMove:n,onEnd:(i,o)=>{delete this.session,a&&ae.update(()=>a(i,o))}}}mount(){this.removePointerDownListener=Ke(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function dy(){const t=p.useContext(Or);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:n}=t,a=p.useId();return p.useEffect(()=>n(a),[]),!e&&r?[!1,()=>r&&r(a)]:[!0]}const sr={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function to(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const cs={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(z.test(t))t=parseFloat(t);else return t;const r=to(t,e.target.x),n=to(t,e.target.y);return`${r}% ${n}%`}},uy={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,a=ht.parse(t);if(a.length>5)return n;const i=ht.createTransformer(t),o=typeof a[0]!="number"?1:0,l=r.x.scale*e.x,d=r.y.scale*e.y;a[0+o]/=l,a[1+o]/=d;const c=oe(l,d,.5);return typeof a[2+o]=="number"&&(a[2+o]/=c),typeof a[3+o]=="number"&&(a[3+o]/=c),i(a)}};class hy extends Z.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=e;vx(my),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),sr.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,a||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||ae.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kd(t){const[e,r]=dy(),n=p.useContext(va);return Z.createElement(hy,{...t,layoutGroup:n,switchLayoutGroup:p.useContext(bc),isPresent:e,safeToRemove:r})}const my={borderRadius:{...cs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cs,borderTopRightRadius:cs,borderBottomLeftRadius:cs,borderBottomRightRadius:cs,boxShadow:uy},Sd=["TopLeft","TopRight","BottomLeft","BottomRight"],fy=Sd.length,so=t=>typeof t=="string"?parseFloat(t):t,ro=t=>typeof t=="number"||z.test(t);function py(t,e,r,n,a,i){a?(t.opacity=oe(0,r.opacity!==void 0?r.opacity:1,xy(n)),t.opacityExit=oe(e.opacity!==void 0?e.opacity:1,0,gy(n))):i&&(t.opacity=oe(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<fy;o++){const l=`border${Sd[o]}Radius`;let d=no(e,l),c=no(r,l);if(d===void 0&&c===void 0)continue;d||(d=0),c||(c=0),d===0||c===0||ro(d)===ro(c)?(t[l]=Math.max(oe(so(d),so(c),n),0),(Be.test(c)||Be.test(d))&&(t[l]+="%")):t[l]=c}(e.rotate||r.rotate)&&(t.rotate=oe(e.rotate||0,r.rotate||0,n))}function no(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const xy=Td(0,.5,Xc),gy=Td(.5,.95,de);function Td(t,e,r){return n=>n<t?0:n>e?1:r(Es(t,e,n))}function ao(t,e){t.min=e.min,t.max=e.max}function Pe(t,e){ao(t.x,e.x),ao(t.y,e.y)}function io(t,e,r,n,a){return t-=e,t=br(t,1/r,n),a!==void 0&&(t=br(t,1/a,n)),t}function yy(t,e=0,r=1,n=.5,a,i=t,o=t){if(Be.test(e)&&(e=parseFloat(e),e=oe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=oe(i.min,i.max,n);t===i&&(l-=e),t.min=io(t.min,e,r,l,a),t.max=io(t.max,e,r,l,a)}function oo(t,e,[r,n,a],i,o){yy(t,e[r],e[n],e[a],e.scale,i,o)}const vy=["x","scaleX","originX"],by=["y","scaleY","originY"];function lo(t,e,r,n){oo(t.x,e,vy,r?r.x:void 0,n?n.x:void 0),oo(t.y,e,by,r?r.y:void 0,n?n.y:void 0)}function co(t){return t.translate===0&&t.scale===1}function Cd(t){return co(t.x)&&co(t.y)}function wy(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Ed(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function uo(t){return Ce(t.x)/Ce(t.y)}class jy{constructor(){this.members=[]}add(e){Ia(this.members,e),e.scheduleRender()}remove(e){if(Ma(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(a=>e===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ho(t,e,r){let n="";const a=t.x.translate/e.x,i=t.y.translate/e.y;if((a||i)&&(n=`translate3d(${a}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{rotate:d,rotateX:c,rotateY:u}=r;d&&(n+=`rotate(${d}deg) `),c&&(n+=`rotateX(${c}deg) `),u&&(n+=`rotateY(${u}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const Ny=(t,e)=>t.depth-e.depth;class _y{constructor(){this.children=[],this.isDirty=!1}add(e){Ia(this.children,e),this.isDirty=!0}remove(e){Ma(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Ny),this.isDirty=!1,this.children.forEach(e)}}function ky(t,e){const r=performance.now(),n=({timestamp:a})=>{const i=a-r;i>=e&&(Ze(n),t(i-e))};return ae.read(n,!0),()=>Ze(n)}function Sy(t){window.MotionDebug&&window.MotionDebug.record(t)}function Ty(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Cy(t,e,r){const n=ke(t)?t:Qt(t);return n.start(Ra("",n,e,r)),n.animation}const mo=["","X","Y","Z"],Ey={visibility:"hidden"},fo=1e3;let Py=0;const bt={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Pd({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=e==null?void 0:e()){this.id=Py++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,bt.totalNodes=bt.resolvedTargetDeltas=bt.recalculatedProjection=0,this.nodes.forEach(Ry),this.nodes.forEach($y),this.nodes.forEach(Fy),this.nodes.forEach(Iy),Sy(bt)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new _y)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Oa),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const d=this.eventHandlers.get(o);d&&d.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Ty(o),this.instance=o;const{layoutId:d,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||d)&&(this.isLayoutDirty=!0),t){let h;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=ky(m,250),sr.hasAnimatedSinceResize&&(sr.hasAnimatedSinceResize=!1,this.nodes.forEach(xo))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&u&&(d||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:f,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||qy,{onLayoutAnimationStart:g,onLayoutAnimationComplete:v}=u.getProps(),y=!this.targetLayout||!Ed(this.targetLayout,x)||f,w=!m&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||m&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,w);const _={...La(b,"layout"),onPlay:g,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else m||xo(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ze(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Uy),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(po);return}this.isUpdating||this.nodes.forEach(Oy),this.isUpdating=!1,this.nodes.forEach(Dy),this.nodes.forEach(Ay),this.nodes.forEach(Ly),this.clearAllSnapshots();const l=performance.now();ye.delta=ut(0,1e3/60,l-ye.timestamp),ye.timestamp=l,ye.isProcessing=!0,tn.update.process(ye),tn.preRender.process(ye),tn.render.process(ye),ye.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(My),this.sharedNodes.forEach(Vy)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ae.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ae.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=he(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!Cd(this.projectionDelta),d=this.getTransformTemplate(),c=d?d(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(l||vt(this.latestValues)||u)&&(a(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return o&&(d=this.removeTransform(d)),Gy(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return he();const l=o.measureViewportBox(),{scroll:d}=this.root;return d&&(it(l.x,d.offset.x),it(l.y,d.offset.y)),l}removeElementScroll(o){const l=he();Pe(l,o);for(let d=0;d<this.path.length;d++){const c=this.path[d],{scroll:u,options:h}=c;if(c!==this.root&&u&&h.layoutScroll){if(u.isRoot){Pe(l,o);const{scroll:m}=this.root;m&&(it(l.x,-m.offset.x),it(l.y,-m.offset.y))}it(l.x,u.offset.x),it(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const d=he();Pe(d,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&zt(d,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),vt(u.latestValues)&&zt(d,u.latestValues)}return vt(this.latestValues)&&zt(d,this.latestValues),d}removeTransform(o){const l=he();Pe(l,o);for(let d=0;d<this.path.length;d++){const c=this.path[d];if(!c.instance||!vt(c.latestValues))continue;Xn(c.latestValues)&&c.updateSnapshot();const u=he(),h=c.measurePageBox();Pe(u,h),lo(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return vt(this.latestValues)&&lo(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ye.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==d;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=ye.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=he(),this.relativeTargetOrigin=he(),bs(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Pe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=he(),this.targetWithTransforms=he()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Hg(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Pe(this.target,this.layout.layoutBox),jd(this.target,this.targetDelta)):Pe(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=he(),this.relativeTargetOrigin=he(),bs(this.relativeTargetOrigin,this.target,f.target),Pe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}bt.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Xn(this.parent.latestValues)||wd(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ye.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Pe(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,f=this.treeScale.y;ty(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:x}=l;if(!x){this.projectionTransform&&(this.projectionDelta=Bt(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Bt(),this.projectionDeltaWithTransform=Bt());const b=this.projectionTransform;vs(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=ho(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==m||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),bt.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const d=this.snapshot,c=d?d.latestValues:{},u={...this.latestValues},h=Bt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=he(),f=d?d.source:void 0,x=this.layout?this.layout.source:void 0,b=f!==x,g=this.getStack(),v=!g||g.members.length<=1,y=!!(b&&!v&&this.options.crossfade===!0&&!this.path.some(zy));this.animationProgress=0;let w;this.mixTargetDelta=_=>{const N=_/1e3;go(h.x,o.x,N),go(h.y,o.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bs(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),By(this.relativeTarget,this.relativeTargetOrigin,m,N),w&&wy(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=he()),Pe(w,this.relativeTarget)),b&&(this.animationValues=u,py(u,c,this.latestValues,N,y,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ze(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ae.update(()=>{sr.hasAnimatedSinceResize=!0,this.currentAnimation=Cy(0,fo,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(fo),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:d,layout:c,latestValues:u}=o;if(!(!l||!d||!c)){if(this!==o&&this.layout&&c&&Ad(this.options.animationType,this.layout.layoutBox,c.layoutBox)){d=this.target||he();const h=Ce(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+h;const m=Ce(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+m}Pe(l,d),zt(l,u),vs(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new jy),this.sharedNodes.get(o).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:d}={}){const c=this.getStack();c&&c.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:d}=o;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(l=!0),!l)return;const c={};for(let u=0;u<mo.length;u++){const h="rotate"+mo[u];d[h]&&(c[h]=d[h],o.setStaticValue(h,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var l,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ey;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=tr(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=tr(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!vt(this.latestValues)&&(b.transform=u?u({},""):"none",this.hasProjected=!1),b}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=ho(this.projectionDeltaWithTransform,this.treeScale,m),u&&(c.transform=u(m,c.transform));const{x:f,y:x}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${x.origin*100}% 0`,h.animationValues?c.opacity=h===this?(d=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in mr){if(m[b]===void 0)continue;const{correct:g,applyTo:v}=mr[b],y=c.transform==="none"?m[b]:g(m[b],h);if(v){const w=v.length;for(let _=0;_<w;_++)c[v[_]]=y}else c[b]=y}return this.options.layoutId&&(c.pointerEvents=h===this?tr(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(po),this.root.sharedNodes.clear()}}}function Ay(t){t.updateLayout()}function Ly(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=t.layout,{animationType:i}=t.options,o=r.source!==t.layout.source;i==="size"?Ae(h=>{const m=o?r.measuredBox[h]:r.layoutBox[h],f=Ce(m);m.min=n[h].min,m.max=m.min+f}):Ad(i,r.layoutBox,n)&&Ae(h=>{const m=o?r.measuredBox[h]:r.layoutBox[h],f=Ce(n[h]);m.max=m.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+f)});const l=Bt();vs(l,n,r.layoutBox);const d=Bt();o?vs(d,t.applyTransform(a,!0),r.measuredBox):vs(d,n,r.layoutBox);const c=!Cd(l);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:f}=h;if(m&&f){const x=he();bs(x,r.layoutBox,m.layoutBox);const b=he();bs(b,n,f.layoutBox),Ed(x,b)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:d,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Ry(t){bt.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Iy(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function My(t){t.clearSnapshot()}function po(t){t.clearMeasurements()}function Oy(t){t.isLayoutDirty=!1}function Dy(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function xo(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function $y(t){t.resolveTargetDelta()}function Fy(t){t.calcProjection()}function Uy(t){t.resetRotation()}function Vy(t){t.removeLeadSnapshot()}function go(t,e,r){t.translate=oe(e.translate,0,r),t.scale=oe(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function yo(t,e,r,n){t.min=oe(e.min,r.min,n),t.max=oe(e.max,r.max,n)}function By(t,e,r,n){yo(t.x,e.x,r.x,n),yo(t.y,e.y,r.y,n)}function zy(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const qy={duration:.45,ease:[.4,0,.1,1]},vo=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),bo=vo("applewebkit/")&&!vo("chrome/")?Math.round:de;function wo(t){t.min=bo(t.min),t.max=bo(t.max)}function Gy(t){wo(t.x),wo(t.y)}function Ad(t,e,r){return t==="position"||t==="preserve-aspect"&&!Wn(uo(e),uo(r),.2)}const Hy=Pd({attachResizeListener:(t,e)=>We(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),mn={current:void 0},Ld=Pd({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!mn.current){const t=new Hy({});t.mount(window),t.setOptions({layoutScroll:!0}),mn.current=t}return mn.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Wy={pan:{Feature:cy},drag:{Feature:ly,ProjectionNode:Ld,MeasureLayout:kd}},Ky=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Xy(t){const e=Ky.exec(t);if(!e)return[,];const[,r,n]=e;return[r,n]}function Yn(t,e,r=1){const[n,a]=Xy(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return fd(o)?parseFloat(o):o}else return Un(a)?Yn(a,e,r+1):a}function Jy(t,{...e},r){const n=t.current;if(!(n instanceof Element))return{target:e,transitionEnd:r};r&&(r={...r}),t.values.forEach(a=>{const i=a.get();if(!Un(i))return;const o=Yn(i,n);o&&a.set(o)});for(const a in e){const i=e[a];if(!Un(i))continue;const o=Yn(i,n);o&&(e[a]=o,r||(r={}),r[a]===void 0&&(r[a]=i))}return{target:e,transitionEnd:r}}const Yy=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Rd=t=>Yy.has(t),Zy=t=>Object.keys(t).some(Rd),jo=t=>t===Rt||t===z,No=(t,e)=>parseFloat(t.split(", ")[e]),_o=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/);if(a)return No(a[1],e);{const i=n.match(/^matrix\((.+)\)$/);return i?No(i[1],t):0}},Qy=new Set(["x","y","z"]),ev=Os.filter(t=>!Qy.has(t));function tv(t){const e=[];return ev.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e.length&&t.render(),e}const es={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:_o(4,13),y:_o(5,14)};es.translateX=es.x;es.translateY=es.y;const sv=(t,e,r)=>{const n=e.measureViewportBox(),a=e.current,i=getComputedStyle(a),{display:o}=i,l={};o==="none"&&e.setStaticValue("display",t.display||"block"),r.forEach(c=>{l[c]=es[c](n,i)}),e.render();const d=e.measureViewportBox();return r.forEach(c=>{const u=e.getValue(c);u&&u.jump(l[c]),t[c]=es[c](d,i)}),t},rv=(t,e,r={},n={})=>{e={...e},n={...n};const a=Object.keys(e).filter(Rd);let i=[],o=!1;const l=[];if(a.forEach(d=>{const c=t.getValue(d);if(!t.hasValue(d))return;let u=r[d],h=ls(u);const m=e[d];let f;if(pr(m)){const x=m.length,b=m[0]===null?1:0;u=m[b],h=ls(u);for(let g=b;g<x&&m[g]!==null;g++)f?Ta(ls(m[g])===f):f=ls(m[g])}else f=ls(m);if(h!==f)if(jo(h)&&jo(f)){const x=c.get();typeof x=="string"&&c.set(parseFloat(x)),typeof m=="string"?e[d]=parseFloat(m):Array.isArray(m)&&f===z&&(e[d]=m.map(parseFloat))}else h!=null&&h.transform&&(f!=null&&f.transform)&&(u===0||m===0)?u===0?c.set(f.transform(u)):e[d]=h.transform(m):(o||(i=tv(t),o=!0),l.push(d),n[d]=n[d]!==void 0?n[d]:e[d],c.jump(m))}),l.length){const d=l.indexOf("height")>=0?window.pageYOffset:null,c=sv(e,t,l);return i.length&&i.forEach(([u,h])=>{t.getValue(u).set(h)}),t.render(),Dr&&d!==null&&window.scrollTo({top:d}),{target:c,transitionEnd:n}}else return{target:e,transitionEnd:n}};function nv(t,e,r,n){return Zy(e)?rv(t,e,r,n):{target:e,transitionEnd:n}}const av=(t,e,r,n)=>{const a=Jy(t,e,n);return e=a.target,n=a.transitionEnd,nv(t,e,r,n)},Zn={current:null},Id={current:!1};function iv(){if(Id.current=!0,!!Dr)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Zn.current=t.matches;t.addListener(e),e()}else Zn.current=!1}function ov(t,e,r){const{willChange:n}=e;for(const a in e){const i=e[a],o=r[a];if(ke(i))t.addValue(a,i),vr(n)&&n.add(a);else if(ke(o))t.addValue(a,Qt(i,{owner:t})),vr(n)&&n.remove(a);else if(o!==i)if(t.hasValue(a)){const l=t.getValue(a);!l.hasAnimated&&l.set(i)}else{const l=t.getStaticValue(a);t.addValue(a,Qt(l!==void 0?l:i,{owner:t}))}}for(const a in r)e[a]===void 0&&t.removeValue(a);return e}const ko=new WeakMap,Md=Object.keys(Cs),lv=Md.length,So=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],cv=ya.length;class dv{constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ae.render(this.render,!1,!0);const{latestValues:l,renderState:d}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=d,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.isControllingVariants=Fr(r),this.isVariantNode=vc(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(r,{});for(const h in u){const m=u[h];l[h]!==void 0&&ke(m)&&(m.set(l[h],!1),vr(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){this.current=e,ko.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),Id.current||iv(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Zn.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ko.delete(this.current),this.projection&&this.projection.unmount(),Ze(this.notifyUpdate),Ze(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,r){const n=Lt.has(e),a=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ae.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{a(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...r},n,a,i){let o,l;for(let d=0;d<lv;d++){const c=Md[d],{isEnabled:u,Feature:h,ProjectionNode:m,MeasureLayout:f}=Cs[c];m&&(o=m),u(r)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),f&&(l=f))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:c,drag:u,dragConstraints:h,layoutScroll:m,layoutRoot:f}=r;this.projection.setOptions({layoutId:d,layout:c,alwaysMeasureLayout:!!u||h&&Ut(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:f})}return l}updateFeatures(){for(const e in this.features){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):he()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<So.length;n++){const a=So[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i=e["on"+a];i&&(this.propEventSubscriptions[a]=this.on(a,i))}this.prevMotionValues=ov(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<cv;n++){const a=ya[n],i=this.props[a];(Ts(i)||i===!1)&&(r[a]=i)}return r}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Qt(r,{owner:this}),this.addValue(e,n)),n}readValue(e){var r;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props,a=typeof n=="string"||typeof n=="object"?(r=Sa(this.props,n))===null||r===void 0?void 0:r[e]:void 0;if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ke(i)?i:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Oa),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class Od extends dv{sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...n},{transformValues:a},i){let o=Tg(n,e||{},this);if(a&&(r&&(r=a(r)),n&&(n=a(n)),o&&(o=a(o))),i){kg(this,n,o);const l=av(this,n,o,r);r=l.transitionEnd,n=l.target}return{transition:e,transitionEnd:r,...n}}}function uv(t){return window.getComputedStyle(t)}class hv extends Od{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,r){if(Lt.has(r)){const n=Aa(r);return n&&n.default||0}else{const n=uv(e),a=(Nc(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:r}){return Nd(e,r)}build(e,r,n,a){wa(e,r,n,a.transformTemplate)}scrapeMotionValuesFromProps(e,r){return ka(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ke(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(e,r,n,a){Ec(e,r,n,a)}}class mv extends Od{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Lt.has(r)){const n=Aa(r);return n&&n.default||0}return r=Pc.has(r)?r:xa(r),e.getAttribute(r)}measureInstanceViewportBox(){return he()}scrapeMotionValuesFromProps(e,r){return Lc(e,r)}build(e,r,n,a){Na(e,r,n,this.isSVGTag,a.transformTemplate)}renderInstance(e,r,n,a){Ac(e,r,n,a)}mount(e){this.isSVGTag=_a(e.tagName),super.mount(e)}}const fv=(t,e)=>ba(t)?new mv(e,{enableHardwareAcceleration:!1}):new hv(e,{enableHardwareAcceleration:!0}),pv={layout:{ProjectionNode:Ld,MeasureLayout:kd}},xv={...Bg,...l0,...Wy,...pv},P=gx((t,e)=>Xx(t,e,xv,fv));function Dd(){const t=p.useRef(!1);return pa(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function gv(){const t=Dd(),[e,r]=p.useState(0),n=p.useCallback(()=>{t.current&&r(e+1)},[e]);return[p.useCallback(()=>ae.postRender(n),[n]),e]}class yv extends p.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function vv({children:t,isPresent:e}){const r=p.useId(),n=p.useRef(null),a=p.useRef({width:0,height:0,top:0,left:0});return p.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:d}=a.current;if(e||!n.current||!i||!o)return;n.current.dataset.motionPopId=r;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),p.createElement(yv,{isPresent:e,childRef:n,sizeRef:a},p.cloneElement(t,{ref:n}))}const fn=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o})=>{const l=Rc(bv),d=p.useId(),c=p.useMemo(()=>({id:d,initial:e,isPresent:r,custom:a,onExitComplete:u=>{l.set(u,!0);for(const h of l.values())if(!h)return;n&&n()},register:u=>(l.set(u,!1),()=>l.delete(u))}),i?void 0:[r]);return p.useMemo(()=>{l.forEach((u,h)=>l.set(h,!1))},[r]),p.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),o==="popLayout"&&(t=p.createElement(vv,{isPresent:r},t)),p.createElement(Or.Provider,{value:c},t)};function bv(){return new Map}function wv(t){return p.useEffect(()=>()=>t(),[])}const wt=t=>t.key||"";function jv(t,e){t.forEach(r=>{const n=wt(r);e.set(n,r)})}function Nv(t){const e=[];return p.Children.forEach(t,r=>{p.isValidElement(r)&&e.push(r)}),e}const Ee=({children:t,custom:e,initial:r=!0,onExitComplete:n,exitBeforeEnter:a,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=p.useContext(va).forceRender||gv()[0],d=Dd(),c=Nv(t);let u=c;const h=p.useRef(new Map).current,m=p.useRef(u),f=p.useRef(new Map).current,x=p.useRef(!0);if(pa(()=>{x.current=!1,jv(c,f),m.current=u}),wv(()=>{x.current=!0,f.clear(),h.clear()}),x.current)return p.createElement(p.Fragment,null,u.map(y=>p.createElement(fn,{key:wt(y),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:o},y)));u=[...u];const b=m.current.map(wt),g=c.map(wt),v=b.length;for(let y=0;y<v;y++){const w=b[y];g.indexOf(w)===-1&&!h.has(w)&&h.set(w,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((y,w)=>{if(g.indexOf(w)!==-1)return;const _=f.get(w);if(!_)return;const N=b.indexOf(w);let k=y;if(!k){const j=()=>{h.delete(w);const S=Array.from(f.keys()).filter(I=>!g.includes(I));if(S.forEach(I=>f.delete(I)),m.current=c.filter(I=>{const B=wt(I);return B===w||S.includes(B)}),!h.size){if(d.current===!1)return;l(),n&&n()}};k=p.createElement(fn,{key:wt(_),isPresent:!1,onExitComplete:j,custom:e,presenceAffectsLayout:i,mode:o},_),h.set(w,k)}u.splice(N,0,k)}),u=u.map(y=>{const w=y.key;return h.has(w)?y:p.createElement(fn,{key:wt(y),isPresent:!0,presenceAffectsLayout:i,mode:o},y)}),p.createElement(p.Fragment,null,h.size?u:u.map(y=>p.cloneElement(y)))},_v=wl("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),C=Z.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...a},i)=>{const o=n?ih:"button";return s.jsx(o,{className:Qe(_v({variant:e,size:r,className:t})),ref:i,...a})});C.displayName="Button";const kv=()=>{const{toast:t}=se(),{user:e}=ge(),r=()=>{t({title:"🚧 ฟีเจอร์นี้ยังไม่พร้อมใช้งาน",description:"แต่ไม่ต้องกังวล! คุณสามารถขอให้เพิ่มฟีเจอร์นี้ในข้อความถัดไปได้! 🚀"})},n=[{id:1,title:"โครงงานระบบควบคุมอัตโนมัติ",description:"เรียนรู้การสร้างระบบควบคุมอัตโนมัติด้วย Arduino และ IoT",duration:"8 สัปดาห์",students:1250,rating:4.8,level:"ระดับกลาง",image:"Engineering automation control system with Arduino and IoT sensors"},{id:2,title:"การออกแบบโครงสร้างอาคาร",description:"หลักการออกแบบและคำนวณโครงสร้างอาคารสูง",duration:"12 สัปดาห์",students:890,rating:4.9,level:"ระดับสูง",image:"Modern building structural design with engineering blueprints"},{id:3,title:"โครงงานพลังงานทดแทน",description:"สร้างระบบผลิตไฟฟ้าจากพลังงานแสงอาทิตย์และลม",duration:"10 สัปดาห์",students:2100,rating:4.7,level:"ระดับกลาง",image:"Solar panels and wind turbines renewable energy project"},{id:4,title:"การพัฒนาแอปพลิเคชันมือถือ",description:"สร้างแอปมือถือด้วย React Native และ Flutter",duration:"6 สัปดาห์",students:1680,rating:4.6,level:"ระดับเริ่มต้น",image:"Mobile app development with React Native and Flutter coding"}],a=[{icon:le,value:"15,000+",label:"นักเรียน"},{icon:ue,value:"200+",label:"คอร์สเรียน"},{icon:Te,value:"95%",label:"อัตราสำเร็จ"},{icon:dr,value:"4.8",label:"คะแนนเฉลี่ย"}],i={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},o={type:"tween",ease:"anticipate",duration:.5};return s.jsxs(P.div,{initial:"initial",animate:"in",exit:"out",variants:i,transition:o,children:[s.jsxs(fe,{children:[s.jsx("title",{children:"หน้าแรก - Login Learning"}),s.jsx("meta",{name:"description",content:"ยินดีต้อนรับสู่ Login Learning แพลตฟอร์มเรียนรู้วิศวกรรมออนไลน์ครบวงจรสำหรับน้องมัธยม"})]}),s.jsxs("div",{className:"pt-24",children:[" ",s.jsx("section",{className:"pt-16 pb-20 px-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[s.jsxs(P.div,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,delay:.2},children:[s.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold mb-6 leading-tight text-black",children:["เสริมทักษะ",s.jsx("span",{className:"block gradient-text",children:"วิศวกรรม"}),"ค้นหาตัวตน"]}),s.jsx("p",{className:"text-xl text-black mb-8 leading-relaxed",children:"Login Learning ช่วยน้องมัธยมค้นพบศักยภาพและความชอบด้านวิศวกรรม เพื่อการตัดสินใจเลือกเส้นทางอนาคตอย่างมั่นใจ"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(C,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 text-lg px-8 py-6 pulse-glow",children:s.jsxs(Y,{to:e?"/dashboard":"/signup",children:[s.jsx(En,{className:"w-5 h-5 mr-2"}),e?"ไปที่แดชบอร์ด":"เริ่มเรียนฟรี"]})}),s.jsx(C,{asChild:!0,size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50 text-lg px-8 py-6",children:s.jsxs(Y,{to:"/courses",children:["ดูคอร์สทั้งหมด",s.jsx(ri,{className:"w-5 h-5 ml-2"})]})})]})]}),s.jsxs(P.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,delay:.4},className:"relative",children:[s.jsx("div",{className:"floating-animation",children:s.jsx("img",{className:"rounded-2xl shadow-2xl w-full",alt:"นักเรียนมัธยมกำลังเรียนรู้เกี่ยวกับโครงงานวิศวกรรมอย่างสนุกสนาน",src:"https://images.unsplash.com/photo-1596496181861-5fc5346995ba"})}),s.jsx("div",{className:"absolute -bottom-6 -left-6 glass-effect rounded-xl p-4 shadow-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx(Fl,{className:"w-6 h-6 text-blue-800"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-black font-semibold",children:"โครงงานสร้างสรรค์"}),s.jsx("p",{className:"text-black opacity-70",children:"จากผู้เชี่ยวชาญด้านวิศวกรรม"})]})]})})]})]})})}),s.jsx("section",{className:"py-16 px-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx(P.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:a.map((l,d)=>s.jsxs(P.div,{initial:{scale:.8,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.5,delay:d*.1},viewport:{once:!0},className:"glass-effect rounded-xl p-6 text-center hover:scale-105 transition-transform",children:[s.jsx(l.icon,{className:"w-8 h-8 text-blue-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-3xl font-bold text-black mb-2",children:l.value}),s.jsx("p",{className:"text-black",children:l.label})]},d))})})}),s.jsx("section",{className:"py-20 px-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs(P.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-black mb-6",children:"คอร์สเรียนแนะนำ"}),s.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:"คัดสรรคอร์สคุณภาพเพื่อจุดประกายความสนใจด้านวิศวกรรมในตัวคุณ"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:n.slice(0,4).map((l,d)=>s.jsx(P.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:d*.1},viewport:{once:!0},className:"course-card rounded-xl overflow-hidden",children:s.jsxs(Y,{to:"/courses",className:"block",onClick:r,children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{className:"w-full h-48 object-cover",alt:`ภาพปกคอร์ส ${l.title}`,src:"https://images.unsplash.com/photo-1635251595512-dc52146d5ae8"}),s.jsx("div",{className:"absolute top-4 right-4 bg-black/50 backdrop-blur-sm rounded-full px-3 py-1",children:s.jsx("span",{className:"text-gray-800 text-sm font-medium",children:l.level})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-black mb-3 line-clamp-2",children:l.title}),s.jsx("p",{className:"text-black mb-4 line-clamp-2",children:l.description}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(dr,{className:"w-4 h-4 text-yellow-500 fill-current"}),s.jsx("span",{className:"text-black font-medium",children:l.rating})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-black",children:[s.jsx(le,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:l.students.toLocaleString()})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-1 text-black",children:[s.jsx(ve,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:l.duration})]}),s.jsx(C,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:"เรียนเลย"})]})]})]})},l.id))}),s.jsx("div",{className:"text-center mt-12",children:s.jsx(C,{asChild:!0,size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50 text-lg px-8 py-4",children:s.jsxs(Y,{to:"/courses",children:["ดูคอร์สทั้งหมด",s.jsx(ri,{className:"w-5 h-5 ml-2"})]})})})]})}),s.jsx("section",{className:"py-20 px-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs(P.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-black mb-6",children:"ทำไมต้องเลือก Login Learning?"}),s.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:"เราให้มากกว่าการเรียนรู้ เราสร้างวิศวกรรุ่นใหม่ที่พร้อมสำหรับอนาคต"})]}),s.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:Tr,title:"เรียนรู้จากโปรเจกต์จริง",description:"ฝึกฝนกับโครงงานที่ใช้งานได้จริงในอุตสาหกรรมและมหาวิทยาลัย"},{icon:le,title:"พี่เลี้ยงผู้เชี่ยวชาญ",description:"เรียนกับพี่วิศวกรและผู้มีประสบการณ์ตรง คอยให้คำแนะนำใกล้ชิด"},{icon:Ml,title:"ค้นพบตัวเองและวางแผน",description:"ช่วยน้องๆ ค้นหาความถนัดและวางแผนเส้นทางสู่วิศวะฯ อย่างชัดเจน"}].map((l,d)=>s.jsxs(P.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:d*.2},viewport:{once:!0},className:"glass-effect rounded-xl p-8 text-center hover:scale-105 transition-transform cursor-pointer",onClick:r,children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-700 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(l.icon,{className:"w-8 h-8 text-blue-800"})}),s.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:l.title}),s.jsx("p",{className:"text-black leading-relaxed",children:l.description})]},d))})]})}),s.jsx("section",{className:"py-20 px-6",children:s.jsx("div",{className:"max-w-4xl mx-auto text-center",children:s.jsxs(P.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},viewport:{once:!0},className:"glass-effect rounded-2xl p-12 shadow-xl",children:[s.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-black mb-6",children:"พร้อมค้นหาเส้นทางวิศวะฯ ของคุณแล้วหรือยัง?"}),s.jsx("p",{className:"text-xl text-black mb-8",children:"เข้าร่วมกับเพื่อนๆ อีกกว่า 15,000 คน ที่ Login Learning"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(C,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 text-lg px-8 py-6",children:s.jsx(Y,{to:e?"/dashboard":"/signup",children:e?"ไปที่แดชบอร์ด":"เริ่มเรียนฟรีวันนี้"})}),s.jsx(C,{asChild:!0,size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50 text-lg px-8 py-6",children:s.jsx(Y,{to:"/contact",children:"ปรึกษาพี่ๆ ผู้เชี่ยวชาญ"})})]})]})})})]})]})},Sv=()=>{const t={name:"LOGIN LEARNING Co.",mission:"คอร์สเรียนเสริมทักษะและค้นหาตัวตนของน้องมัธยม ต้น-ปลาย เพื่อตัดสินใจเข้าเรียนต่อในระดับมัธยมปลาย/มหาวิทยาลัย",address:"917 จรัญสนิทวงศ์ 75 บางพลัด บางพลัด",contacts:[{name:"พี่ก้อง",phone:"090-969-9578"},{name:"พี่เก็ก",phone:"083-436-0294"}],lineGroup:"https://line.me/ti/g/TbTTLXEkRS",email:"info@loginlearning.com"},e=[{name:"สาขาลาดกระบัง",address:"ถนนฉลองกรุง ลาดกระบัง, กรุงเทพฯ 10520",image:"Ladkrabang branch of Login Learning with students"},{name:"สาขาบางพลัด",address:"400 ซ.จรัญสนิทวงศ์ 75 แขวงบางพลัด, กรุงเทพฯ 10700",image:"Bang Phlat branch of Login Learning with modern classroom"},{name:"สาขาศรีราชา",address:"165/31 อำเภอศรีราชา ชลบุรี 20110",image:"Sriracha branch of Login Learning, coastal city view"},{name:"สาขาระยอง",address:"84/48 อำเภอเมืองระยอง ระยอง 21000",image:"Rayong branch of Login Learning, industrial area context"}],r=[{icon:Fl,title:"สอนทำโครงงานด้านวิศวกรรม",description:"เสริมสร้างทักษะการทำโครงงานจริง พร้อมพี่เลี้ยงดูแลใกล้ชิด"},{icon:Tr,title:"สอนทฤษฎีและการแข่งขัน",description:"เตรียมความพร้อมทั้งภาคทฤษฎีและสนามแข่งขัน เช่น หุ่นยนต์เดินตามเส้น, TESA Top Gun Rally"},{icon:_l,title:"อบรม Professional Skills",description:"พัฒนาทักษะจำเป็นสำหรับวิศวกร เช่น การโปรแกรม (Python, C++), Arduino, IoT, แขนกล DOBOT, PLC"},{icon:um,title:"Engineering Services",description:"บริการด้านวิศวกรรม เช่น ออกแบบชุดฝึกขนถ่ายโลหะ, เครื่องตรวจความสุกมะม่วง, เครื่องจำลองการชุบโลหะ"},{icon:le,title:"จัดค่ายนอกสถานที่",description:"เปิดประสบการณ์การเรียนรู้วิศวกรรมรูปแบบใหม่ สนุกและได้ความรู้"}],n=["แบบจำลองการปลูกข้าวสมัยใหม่ด้วยระบบ IOT","แบบจำลองการควบคุมและตรวจสอบคุณภาพน้ำด้วยระบบ IOT และ AI","แบบจำลองเครื่องกวนสารโดยใช้ AI และ PID Control","เครื่องตรวจความสุกมะม่วง","เครื่องช่วยกายภาพบำบัดแขน","กระถางต้นไม้อัจฉริยะ","เครื่องตรวจสอบคุณภาพน็อตและจำลองการชุบแข็ง"],a={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},i={type:"tween",ease:"anticipate",duration:.5};return s.jsxs(P.div,{initial:"initial",animate:"in",exit:"out",variants:a,transition:i,className:"pt-24 pb-16 px-6",children:[s.jsxs(fe,{children:[s.jsx("title",{children:"เกี่ยวกับเรา - Login Learning"}),s.jsx("meta",{name:"description",content:`เรียนรู้เพิ่มเติมเกี่ยวกับ ${t.name} ภารกิจของเรา และทีมงานผู้เชี่ยวชาญที่พร้อมช่วยน้องๆ ค้นหาเส้นทางวิศวะ`})]}),s.jsxs("section",{className:"text-center mb-16 pt-8",children:[s.jsxs(P.h1,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-4",children:["เกี่ยวกับ ",s.jsx("span",{className:"gradient-text",children:"Login Learning"})]}),s.jsx(P.p,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.4},className:"text-xl text-gray-700 max-w-3xl mx-auto",children:t.mission})]}),s.jsx("section",{className:"mb-16",children:s.jsxs("div",{className:"max-w-4xl mx-auto glass-effect p-8 rounded-xl shadow-lg",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 text-center",children:"ข้อมูลองค์กร"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsx("img",{className:"rounded-lg shadow-md w-full h-64 object-cover mb-4",alt:"ทีมงาน Login Learning กำลังสอนนักเรียน",src:"https://images.unsplash.com/photo-1701229404076-5629809b331d"}),s.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[s.jsx(Jt,{className:"w-6 h-6 text-blue-400 mt-1 shrink-0"}),s.jsx("p",{className:"text-gray-800",children:t.address})]}),s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx(Ye,{className:"w-6 h-6 text-blue-400 shrink-0"}),s.jsx("a",{href:`mailto:${t.email}`,className:"text-gray-800 hover:text-blue-600 transition-colors",children:t.email})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"ติดต่อเรา:"}),t.contacts.map((o,l)=>s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx(kt,{className:"w-6 h-6 text-blue-400 shrink-0"}),s.jsxs("p",{className:"text-gray-800",children:[o.name,": ",o.phone]})]},l)),s.jsxs("div",{className:"flex items-center space-x-3 mt-4",children:[s.jsx(le,{className:"w-6 h-6 text-green-400 shrink-0"}),s.jsx("a",{href:t.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"text-gray-800 hover:text-green-600 transition-colors underline",children:"เข้าร่วม Line Group ของเรา"})]}),s.jsx("img",{className:"rounded-lg shadow-md w-full h-40 object-cover mt-4",alt:"บรรยากาศการเรียนการสอนที่ Login Learning",src:"https://images.unsplash.com/photo-1645001399108-e5c236218018"})]})]})]})}),s.jsxs("section",{className:"mb-16",id:"branches",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-10 text-center",children:"สาขาของเรา"}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((o,l)=>s.jsxs(P.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.5,delay:l*.1},viewport:{once:!0},className:"course-card rounded-xl overflow-hidden p-6 text-center",children:[s.jsx("img",{className:"w-full h-40 object-cover rounded-md mb-4",alt:`สาขา ${o.name} ของ Login Learning`,src:"https://images.unsplash.com/photo-1683419405479-e79a7a6a1d53"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:o.name}),s.jsx("p",{className:"text-gray-600 text-sm",children:o.address})]},l))})]}),s.jsxs("section",{className:"mb-16",id:"services",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-10 text-center",children:"บริการและกิจกรรมของเรา"}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map((o,l)=>s.jsxs(P.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.5,delay:l*.1},viewport:{once:!0},className:"glass-effect rounded-xl p-6 hover:shadow-xl transition-shadow",children:[s.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mb-6 mx-auto",children:s.jsx(o.icon,{className:"w-8 h-8 text-blue-800"})}),s.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-3 text-center",children:o.title}),s.jsx("p",{className:"text-gray-700 leading-relaxed text-center",children:o.description})]},l))})]}),s.jsxs("section",{id:"projects",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-10 text-center",children:"ตัวอย่างโครงงาน ปี 2568"}),s.jsxs("div",{className:"max-w-3xl mx-auto glass-effect p-8 rounded-xl shadow-lg",children:[s.jsx("ul",{className:"list-disc list-inside space-y-3 text-gray-800",children:n.map((o,l)=>s.jsx(P.li,{initial:{x:-20,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.3,delay:l*.05},viewport:{once:!0},className:"text-lg",children:o},l))}),s.jsx("p",{className:"text-gray-600 mt-6 text-sm italic",children:"ข้อมูลนี้เป็นข้อมูลเบื้องต้นและอาจมีการเปลี่ยนแปลง โปรดตรวจสอบข้อมูลล่าสุดจากประกาศอย่างเป็นทางการ"})]})]})]})},ce=Z.forwardRef(({className:t,type:e,...r},n)=>s.jsx("input",{type:e,className:Qe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));ce.displayName="Input";const Tv=async()=>{try{const{data:t,error:e}=await E.from("courses").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(e)throw e;return{data:t.map(n=>({...n,enrollment_count:0})),error:null}}catch(t){return console.error("Error fetching courses:",t),{data:null,error:t}}},$d=async t=>{try{const{data:e,error:r}=await E.from("courses").select(`
        *,
        course_content(*)
      `).eq("id",t).eq("is_active",!0).single();if(r)throw r;let n=0;try{const{count:a}=await E.from("enrollments").select("*",{count:"exact",head:!0}).eq("course_id",t);n=a||0}catch(a){console.warn("Could not fetch enrollment count:",a)}return{data:{...e,enrollment_count:n,content:e.course_content||[]},error:null}}catch(e){return console.error("Error fetching course:",e),{data:null,error:e}}},Cv=async t=>{try{const{data:e,error:r}=await E.from("courses").select(`
        *,
        course_content(*)
      `).eq("id",t).single();if(r)throw r;let n=0;try{const{count:a}=await E.from("enrollments").select("*",{count:"exact",head:!0}).eq("course_id",t);n=a||0}catch(a){console.warn("Could not fetch enrollment count:",a)}return{data:{...e,enrollment_count:n,content:e.course_content||[]},error:null}}catch(e){return console.error("Error fetching course for admin:",e),{data:null,error:e}}},Ev=async t=>{var e;try{const{data:r,error:n}=await E.from("courses").insert([{...t,created_by:(e=(await E.auth.getUser()).data.user)==null?void 0:e.id}]).select().single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error creating course:",r),{data:null,error:r}}},Pv=async(t,e)=>{try{const{error:r}=await E.from("courses").update({is_active:e}).eq("id",t);if(r)throw r;return{error:null}}catch(r){return console.error("Error toggling course status:",r),{error:r}}},Av=async t=>{try{const{error:e}=await E.from("course_content").delete().eq("course_id",t);if(e)throw e;const{error:r}=await E.from("courses").delete().eq("id",t);if(r)throw r;return{error:null}}catch(e){return console.error("Error permanently deleting course:",e),{error:e}}},Lv=async()=>{try{if(console.log("Fetching admin courses..."),!E)throw new Error("Supabase client not initialized");const{data:t,error:e}=await E.from("courses").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Supabase error:",e),new Error(`Database error: ${e.message}`);return console.log("Admin courses fetched successfully:",(t==null?void 0:t.length)||0,"courses"),{data:t||[],error:null}}catch(t){return console.error("Error fetching admin courses:",t),{data:null,error:{message:t.message||"Unknown error occurred",details:t}}}},Rv=async()=>{try{const{count:t,error:e}=await E.from("courses").select("*",{count:"exact",head:!0}).eq("is_active",!0);if(e)throw e;const{count:r,error:n}=await E.from("enrollments").select("*",{count:"exact",head:!0});if(n)throw n;const{count:a,error:i}=await E.from("enrollments").select("*",{count:"exact",head:!0}).eq("status","active");if(i)throw i;const{count:o,error:l}=await E.from("enrollments").select("*",{count:"exact",head:!0}).eq("status","completed");if(l)throw l;return{data:{totalCourses:t||0,totalEnrollments:r||0,activeEnrollments:a||0,completedEnrollments:o||0,completionRate:r>0?(o/r*100).toFixed(1):0},error:null}}catch(t){return console.error("Error fetching course stats:",t),{data:null,error:t}}},Iv=()=>{const{toast:t}=se();ge();const[e,r]=p.useState([]),[n,a]=p.useState(!0),[i,o]=p.useState(""),[l,d]=p.useState("ทั้งหมด");p.useEffect(()=>{c()},[]);const c=async()=>{a(!0);const{data:x,error:b}=await Tv();b?t({title:"ข้อผิดพลาดในการโหลดข้อมูล",description:b.message,variant:"destructive"}):r(x||[]),a(!1)},u=["ทั้งหมด",...new Set(e.map(x=>x.category).filter(Boolean))],h=e.filter(x=>{var v;const b=x.title.toLowerCase().includes(i.toLowerCase())||((v=x.description)==null?void 0:v.toLowerCase().includes(i.toLowerCase())),g=l==="ทั้งหมด"||x.category===l;return b&&g}),m={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},f={type:"tween",ease:"anticipate",duration:.5};return s.jsxs(P.div,{initial:"initial",animate:"in",exit:"out",variants:m,transition:f,className:"pt-24 pb-16 px-6",children:[s.jsxs(fe,{children:[s.jsx("title",{children:"คอร์สเรียนทั้งหมด - Login Learning"}),s.jsx("meta",{name:"description",content:"เลือกดูคอร์สเรียนวิศวกรรมที่หลากหลายของเรา ออกแบบมาเพื่อน้องๆ มัธยมโดยเฉพาะ"})]}),s.jsx("section",{className:"pt-8 mb-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs(P.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-center mb-10",children:[s.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-blue-900 mb-4",children:["คอร์สเรียน ",s.jsx("span",{className:"gradient-text",children:"ทั้งหมด"})]}),s.jsx("p",{className:"text-xl text-blue-800 max-w-2xl mx-auto",children:"ค้นหาคอร์สที่ใช่ จุดประกายแรงบันดาลใจสู่เส้นทางวิศวะฯ กับ Login Learning"})]}),s.jsxs(P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.4},className:"flex flex-col md:flex-row gap-4 mb-8 p-4 glass-effect rounded-lg",children:[s.jsxs("div",{className:"relative flex-grow",children:[s.jsx(ce,{type:"text",placeholder:"ค้นหาคอร์สเรียน...",className:"pl-10 text-black bg-white/90 focus:bg-white",value:i,onChange:x=>o(x.target.value)}),s.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})]}),s.jsx("select",{className:"px-4 py-2 rounded-lg bg-white/90 text-black border border-white/30 focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",value:l,onChange:x=>d(x.target.value),children:u.map(x=>s.jsx("option",{value:x,children:x},x))})]}),n?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#667eea] mx-auto mb-4"}),s.jsx("p",{className:"text-blue-700",children:"กำลังโหลดคอร์สเรียน..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6 text-blue-700",children:["พบ ",h.length," คอร์สเรียน",i&&` สำหรับ "${i}"`,l!=="ทั้งหมด"&&` ในหมวดหมู่ "${l}"`]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:h.map((x,b)=>s.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:b*.05+.5},className:"course-card rounded-xl overflow-hidden hover:scale-105 transition-transform duration-300",children:s.jsxs(Y,{to:`/courses/${x.id}`,className:"block",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{className:"w-full h-48 object-cover",alt:`ภาพปกคอร์ส ${x.title}`,src:x.image_url||"https://images.unsplash.com/photo-1635251595512-dc52146d5ae8"}),s.jsx("div",{className:"absolute top-3 right-3 bg-blue-800/80 backdrop-blur-sm rounded-full px-3 py-1 text-xs font-medium text-white-800",children:x.difficulty_level==="beginner"?"ระดับเริ่มต้น":x.difficulty_level==="intermediate"?"ระดับกลาง":x.difficulty_level==="advanced"?"ระดับสูง":"ไม่ระบุ"}),s.jsx("div",{className:"absolute bottom-3 left-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white-800 px-2 py-1 rounded text-xs font-semibold",children:x.category||"ทั่วไป"})]}),s.jsxs("div",{className:"p-5",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-2 line-clamp-2 h-14",children:x.title}),s.jsx("p",{className:"text-sm text-blue-700 mb-3 line-clamp-3 h-[60px]",children:x.description||"ไม่มีคำอธิบาย"}),s.jsxs("div",{className:"flex items-center justify-between mb-3 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(nr,{className:"w-4 h-4 text-blue-400"}),s.jsx("span",{className:"text-blue-900 font-medium",children:x.instructor_name||"อาจารย์"})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-blue-700",children:[s.jsx(le,{className:"w-4 h-4"}),s.jsx("span",{children:x.enrollment_count||0})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-1 text-blue-700 text-sm",children:[s.jsx(ve,{className:"w-4 h-4"}),s.jsxs("span",{children:[x.duration_hours||0," ชั่วโมง"]})]}),s.jsx("div",{className:"text-blue-900 font-bold",children:x.price>0?`฿${x.price.toLocaleString()}`:"ฟรี"})]}),s.jsx(C,{className:"w-full mt-4 bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-gray-800",children:"ดูรายละเอียด"})]})]})},x.id))}),h.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ue,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-blue-900 mb-2",children:"ไม่พบคอร์สเรียน"}),s.jsx("p",{className:"text-blue-700 mb-4",children:"ลองปรับเปลี่ยนคำค้นหาหรือหมวดหมู่"}),s.jsx(C,{onClick:()=>{o(""),d("ทั้งหมด")},variant:"outline",className:"text-blue-900 border-blue-300 hover:bg-blue-100",children:"ดูคอร์สทั้งหมด"})]})]})]})})]})},Fd=async t=>{try{console.log("enrollmentService: Starting enrollment for courseId:",t);const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)throw console.error("enrollmentService: User authentication error:",r),new Error("User not authenticated");console.log("enrollmentService: User authenticated:",e.id),console.log("enrollmentService: Checking for existing enrollment...");const{data:n,error:a}=await E.from("enrollments").select("*").eq("user_id",e.id).eq("course_id",t).maybeSingle();if(console.log("enrollmentService: Existing enrollment check:",{existingEnrollment:n,checkError:a}),a)throw console.error("enrollmentService: Error checking existing enrollment:",a),a;if(n)return console.log("enrollmentService: User already enrolled"),{data:null,error:{message:"คุณได้ลงทะเบียนคอร์สนี้แล้ว"}};console.log("enrollmentService: Creating new enrollment...");const i={user_id:e.id,course_id:t,status:"active",progress_percentage:0};console.log("enrollmentService: Enrollment data:",i);const{data:o,error:l}=await E.from("enrollments").insert([i]).select(`
        *,
        courses(title, instructor_name)
      `).single();if(console.log("enrollmentService: Enrollment creation result:",{data:o,error:l}),l)throw console.error("enrollmentService: Enrollment creation failed:",l),l;return console.log("enrollmentService: Enrollment created successfully:",o),{data:o,error:null}}catch(e){return console.error("enrollmentService: Error enrolling in course:",e),{data:null,error:e}}},Da=async t=>{try{console.log("enrollmentService: Checking enrollment for courseId:",t);const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)return console.log("enrollmentService: No user found or error:",r),{isEnrolled:!1,error:null};console.log("enrollmentService: Checking for user:",e.id);const{data:n,error:a}=await E.from("enrollments").select("id, status, enrolled_at").eq("user_id",e.id).eq("course_id",t).maybeSingle();if(console.log("enrollmentService: Database query result:",{data:n,error:a}),a)throw console.error("enrollmentService: Database error:",a),a;const i={isEnrolled:!!n,status:(n==null?void 0:n.status)||null,error:null};return console.log("enrollmentService: Final result:",i),i}catch(e){return console.error("enrollmentService: Error checking enrollment:",e),{isEnrolled:!1,error:e}}},Mv=async t=>{try{const{data:e,error:r}=await E.from("content_attachments").select("*").eq("content_id",t).order("upload_order",{ascending:!0});if(r)throw r;return{data:e||[],error:null}}catch(e){return console.error("Error fetching content attachments:",e),{data:[],error:e}}},Ov=async(t,e,r=1)=>{try{console.log("Starting file upload:",{fileName:t.name,contentId:e,fileSize:t.size});const{data:{user:n},error:a}=await E.auth.getUser();if(a)throw console.error("User authentication error:",a),new Error(`Authentication error: ${a.message}`);if(!n)throw new Error("User not authenticated - please login first");if(console.log("User authenticated:",n.id),!t)throw new Error("No file provided");if(!e)throw new Error("Content ID is required");const i=Date.now(),o=t.name.split(".").pop(),l=t.name.replace(/[^a-zA-Z0-9.-]/g,"_"),d=`${i}_${l}`,c=`attachments/${e}/${d}`;console.log("Generated file path:",c),console.log("Checking storage bucket access...");let u=!1;try{const{data:_,error:N}=await E.storage.listBuckets();if(N)console.warn("Cannot list buckets, trying direct access:",N.message);else{const k=_.find(j=>j.name==="course-files");k&&(console.log("Storage bucket found in list:",k.name),u=!0)}if(!u){console.log("Testing direct bucket access...");const{data:k,error:j}=await E.storage.from("course-files").list("",{limit:1});if(j)throw console.error("Direct bucket access failed:",j),new Error(`Storage bucket "course-files" is not accessible: ${j.message}. Please check bucket exists and permissions are correct.`);console.log("Direct bucket access successful"),u=!0}}catch(_){throw console.error("Storage bucket check failed:",_),new Error(`Storage setup error: ${_.message}`)}if(!u)throw new Error('Storage bucket "course-files" not found or not accessible. Please setup storage first.');console.log("Uploading file to storage...");const{data:h,error:m}=await E.storage.from("course-files").upload(c,t,{cacheControl:"3600",upsert:!1});if(m)throw console.error("Storage upload error:",m),new Error(`File upload failed: ${m.message}`);console.log("File uploaded successfully:",h);const{data:{publicUrl:f}}=E.storage.from("course-files").getPublicUrl(c);console.log("Generated public URL:",f);const{data:x,error:b}=await E.from("content_attachments").select("count").limit(1);if(b&&b.code==="42P01")throw new Error('Database table "content_attachments" not found. Please run the database schema setup.');console.log("Saving attachment record to database...");let g=1;if(typeof r=="number"&&r>0&&r<=2147483647)g=Math.floor(r);else if(typeof r=="string"){const _=parseInt(r);!isNaN(_)&&_>0&&_<=2147483647&&(g=_)}console.log("Original uploadOrder:",r,"Valid uploadOrder:",g);const v={content_id:e,file_name:t.name,file_path:c,file_size:t.size,file_type:(o==null?void 0:o.toLowerCase())||"unknown",mime_type:t.type||"application/octet-stream",upload_order:g,is_downloadable:!0,is_preview_available:Fv(t.type),uploaded_by:n.id};console.log("Attachment record:",v);const{data:y,error:w}=await E.from("content_attachments").insert([v]).select().single();if(w){console.error("Database insert error:",w);try{await E.storage.from("course-files").remove([c]),console.log("Cleaned up uploaded file after database error")}catch(_){console.error("Failed to cleanup file:",_)}throw new Error(`Database error: ${w.message}`)}return console.log("Attachment record saved:",y),{data:{...y,url:f},error:null}}catch(n){return console.error("Error uploading attachment:",n),{data:null,error:{message:n.message,details:n}}}},Dv=async(t,e)=>{try{const{data:r,error:n}=await E.storage.from("course-files").download(t);if(n)throw n;const a=URL.createObjectURL(r),i=document.createElement("a");return i.href=a,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a),{error:null}}catch(r){return console.error("Error downloading attachment:",r),{error:r}}},$v=async(t,e=3600)=>{try{const{data:r,error:n}=await E.storage.from("course-files").createSignedUrl(t,e);if(n)throw n;return{data:r.signedUrl,error:null}}catch(r){return console.error("Error getting download URL:",r),{data:null,error:r}}},Fv=t=>["application/pdf","image/jpeg","image/png","image/gif","image/webp","text/plain","text/html","application/json"].includes(t),Kt=t=>{const e={image:["jpg","jpeg","png","gif","webp","svg","bmp"],video:["mp4","avi","mov","wmv","flv","webm"],audio:["mp3","wav","ogg","aac","flac"],document:["pdf","doc","docx","txt","rtf"],presentation:["ppt","pptx","odp"],spreadsheet:["xls","xlsx","ods","csv"],archive:["zip","rar","7z","tar","gz"],code:["js","html","css","py","java","cpp","c","php","json","xml"]};for(const[r,n]of Object.entries(e))if(n.includes(t==null?void 0:t.toLowerCase()))return r;return"other"},$a=t=>{if(t===0)return"0 Bytes";const e=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,n)).toFixed(2))+" "+r[n]},Uv=async t=>{try{console.log("Starting attachment deletion for ID:",t);const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)throw new Error("User not authenticated");console.log("User authenticated:",e.id);const{data:n,error:a}=await E.from("content_attachments").select("*").eq("id",t).single();if(a)throw console.error("Error fetching attachment:",a),new Error(`ไม่พบไฟล์แนบที่ต้องการลบ: ${a.message}`);if(!n)throw new Error("ไม่พบไฟล์แนบที่ต้องการลบ");console.log("Attachment to delete:",n),console.log("Deleting file from storage:",n.file_path);const{error:i}=await E.storage.from("course-files").remove([n.file_path]);i&&console.warn("Warning: Could not delete file from storage:",i),console.log("Deleting database record for attachment:",t);const{error:o}=await E.from("content_attachments").delete().eq("id",t);if(o)throw console.error("Database deletion error:",o),new Error(`ไม่สามารถลบข้อมูลไฟล์แนบได้: ${o.message}`);return console.log("Attachment deleted successfully"),{data:n,error:null}}catch(e){return console.error("Error deleting attachment:",e),{data:null,error:e}}},Vv=async t=>{var e;try{console.log("Starting course image upload:",{fileName:t.name,fileSize:t.size});const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");if(!t)throw new Error("No image file provided");if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(t.type))throw new Error("ไฟล์ต้องเป็นรูปภาพ (JPG, PNG, WebP เท่านั้น)");const i=5*1024*1024;if(t.size>i)throw new Error("ขนาดไฟล์ต้องไม่เกิน 5MB");const o=(e=t.name.split(".").pop())==null?void 0:e.toLowerCase(),l=`course-cover-${Date.now()}-${Math.random().toString(36).substring(2)}.${o}`,d=`course-covers/${l}`;console.log("Uploading image to path:",d);const{data:c,error:u}=await E.storage.from("course-files").upload(d,t,{cacheControl:"3600",upsert:!1});if(u)throw console.error("Storage upload error:",u),new Error(`ไม่สามารถอัปโหลดรูปภาพได้: ${u.message}`);console.log("Image upload successful:",c);const{data:h}=E.storage.from("course-files").getPublicUrl(d);if(!(h!=null&&h.publicUrl))throw new Error("ไม่สามารถสร้าง URL สำหรับรูปภาพได้");return console.log("Public URL generated:",h.publicUrl),{data:{filePath:d,publicUrl:h.publicUrl,fileName:l},error:null}}catch(r){return console.error("Error uploading course image:",r),{data:null,error:r}}},Fa=({contentId:t,showUploadButton:e=!1,onUploadClick:r,className:n="",compact:a=!1,isAdminView:i=!1})=>{const{toast:o}=se(),[l,d]=p.useState([]),[c,u]=p.useState(!0),[h,m]=p.useState(null),[f,x]=p.useState(!1),[b,g]=p.useState(!1);p.useEffect(()=>{t?v():(d([]),u(!1))},[t]);const v=async()=>{var j;u(!0);try{if(!t){d([]);return}const{data:S,error:I}=await Mv(t);if(I)throw I;d(S||[])}catch(S){g(!0),(j=S.message)!=null&&j.includes('relation "content_attachments" does not exist')||o({title:"ไม่สามารถโหลดไฟล์แนบได้",description:S.message,variant:"destructive"}),d([])}finally{u(!1)}},y=(j,S="w-5 h-5")=>{try{switch(Kt(j)){case"image":return s.jsx(js,{className:`${S} text-blue-500`});case"video":return s.jsx($l,{className:`${S} text-purple-500`});case"archive":return s.jsx(Cl,{className:`${S} text-orange-500`});case"document":return s.jsx(J,{className:`${S} text-red-500`});default:return s.jsx(or,{className:`${S} text-slate-500`})}}catch(I){return console.error("AttachmentViewer: Error getting file icon:",I),s.jsx(or,{className:`${S} text-slate-500`})}},w=async j=>{try{const{error:S}=await Dv(j.file_path,j.file_name);if(S)throw S;o({title:"ดาวน์โหลดสำเร็จ",description:`ดาวน์โหลด ${j.file_name} เสร็จสิ้น`})}catch(S){console.error("Download error:",S),o({title:"ไม่สามารถดาวน์โหลดได้",description:S.message,variant:"destructive"})}},_=j=>{const S=Kt(j.file_type);["image","document"].includes(S)?(m(j),x(!0)):o({title:"ไม่สามารถดูตัวอย่างได้",description:"ไฟล์นี้ไม่รองรับการดูตัวอย่าง",variant:"destructive"})},N=async j=>{try{const{data:S,error:I}=await $v(j.file_path);if(I)throw I;window.open(S,"_blank")}catch(S){console.error("External link error:",S),o({title:"ไม่สามารถเปิดลิงก์ได้",description:S.message,variant:"destructive"})}},k=async j=>{if(!i){o({title:"ไม่มีสิทธิ์",description:"เฉพาะ Admin เท่านั้นที่สามารถลบไฟล์แนบได้",variant:"destructive"});return}if(window.confirm(`คุณต้องการลบไฟล์ "${j.file_name}" หรือไม่?`))try{const{error:S}=await Uv(j.id);if(S)throw S;o({title:"ลบไฟล์สำเร็จ",description:`ลบไฟล์ "${j.file_name}" เรียบร้อยแล้ว`}),await v()}catch(S){o({title:"ไม่สามารถลบไฟล์ได้",description:S.message,variant:"destructive"})}};return c?s.jsx("div",{className:`${n}`,children:s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-2 text-slate-400 text-sm",children:"กำลังโหลดไฟล์แนบ..."})]})}):t?b?s.jsx("div",{className:n,children:s.jsx("div",{className:"text-center py-4 text-slate-400 text-sm",children:"ไม่สามารถโหลดไฟล์แนบได้"})}):a?s.jsx("div",{className:`${n}`,children:l.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 p-2 rounded-lg",children:s.jsx(J,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"เอกสารประกอบการเรียน"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[l.length," ไฟล์"]})]})]}),s.jsx("div",{className:"grid gap-3",children:l.map(j=>{var S;return s.jsx("div",{className:"group bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-xl p-4 hover:shadow-md transition-all duration-300 hover:border-blue-300",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-md",children:y(j.file_type,"w-6 h-6 text-white")})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h5",{className:"text-sm font-semibold text-gray-800 truncate group-hover:text-blue-700 transition-colors",children:j.file_name}),s.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[s.jsx("span",{className:"text-xs text-gray-600 bg-gray-200 px-2 py-1 rounded-full",children:$a(j.file_size)}),s.jsx("span",{className:"text-xs text-blue-600 font-medium",children:((S=j.file_type)==null?void 0:S.toUpperCase())||"FILE"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(C,{size:"sm",variant:"outline",onClick:()=>w(j),className:"text-blue-600 border-blue-300 hover:bg-blue-50 hover:border-blue-400 rounded-lg",title:"ดาวน์โหลด",children:[s.jsx(Je,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"text-xs",children:"ดาวน์โหลด"})]}),["image","document"].includes(Kt(j.file_type))&&s.jsxs(C,{size:"sm",variant:"outline",onClick:()=>_(j),className:"text-green-600 border-green-300 hover:bg-green-50 hover:border-green-400 rounded-lg",title:"ดูตัวอย่าง",children:[s.jsx(dt,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"text-xs",children:"ดูตัวอย่าง"})]}),i&&s.jsx(C,{size:"sm",variant:"outline",onClick:()=>k(j),className:"text-red-600 border-red-300 hover:bg-red-50 hover:border-red-400 rounded-lg",title:"ลบไฟล์",children:s.jsx(et,{className:"w-4 h-4"})})]})]})},j.id)})})]}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(J,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{className:"text-sm",children:"ไม่มีเอกสารประกอบ"})]})}):s.jsxs("div",{className:`space-y-4 ${n}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[s.jsx(J,{className:"w-5 h-5 mr-2"}),"ไฟล์แนบ (",l.length,")"]}),e&&s.jsxs(C,{onClick:r,className:"bg-blue-500 hover:bg-blue-600",children:[s.jsx(J,{className:"w-4 h-4 mr-2"}),"จัดการไฟล์"]})]}),l.length===0?s.jsxs("div",{className:"text-center py-8 bg-slate-700/20 rounded-lg border-2 border-dashed border-slate-600",children:[s.jsx(J,{className:"w-12 h-12 text-slate-500 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-400",children:"ยังไม่มีไฟล์แนับในเนื้อหานี้"}),e&&s.jsx(C,{onClick:r,variant:"outline",className:"mt-3",children:"เพิ่มไฟล์แนบ"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(j=>s.jsx(Bv,{attachment:j,onDownload:()=>w(j),onPreview:()=>_(j),onExternalLink:()=>N(j),onDelete:()=>k(j),getFileIcon:y,isAdminView:i},j.id))}),s.jsx(Ee,{children:f&&h&&s.jsx(zv,{file:h,onClose:()=>{x(!1),m(null)},getFileIcon:y})})]}):s.jsx("div",{className:n})},Bv=({attachment:t,onDownload:e,onPreview:r,onExternalLink:n,onDelete:a,getFileIcon:i,isAdminView:o=!1})=>{var l;return Kt(t.file_type),s.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-4 rounded-lg hover:bg-slate-700/30 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"flex-shrink-0",children:i(t.file_type,"w-8 h-8")}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-sm font-medium text-white truncate",children:t.file_name}),s.jsxs("p",{className:"text-xs text-slate-400",children:[$a(t.file_size)," • ",(l=t.file_type)==null?void 0:l.toUpperCase()]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(C,{size:"sm",variant:"ghost",onClick:e,title:"ดาวน์โหลด",children:s.jsx(Je,{className:"w-4 h-4"})}),["image","document"].includes(Kt(t.file_type))&&s.jsx(C,{size:"sm",variant:"ghost",onClick:r,title:"ดูตัวอย่าง",children:s.jsx(dt,{className:"w-4 h-4"})}),s.jsx(C,{size:"sm",variant:"ghost",onClick:n,title:"เปิดในแท็บใหม่",children:s.jsx(ir,{className:"w-4 h-4"})})]}),s.jsx(C,{size:"sm",variant:"ghost",onClick:a,title:"ลบไฟล์",className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:s.jsx(et,{className:"w-4 h-4"})})]})]})},zv=({file:t,onClose:e,getFileIcon:r})=>{var m;const[n,a]=p.useState(1),[i,o]=p.useState(0),l=Kt(t.file_type),d=()=>a(f=>Math.min(f+.25,3)),c=()=>a(f=>Math.max(f-.25,.25)),u=()=>o(f=>(f+90)%360),h=()=>{a(1),o(0)};return s.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50",onClick:e,children:s.jsxs(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative max-w-6xl max-h-[90vh] w-full h-full flex flex-col",onClick:f=>f.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[r(t.file_type),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-medium",children:t.file_name}),s.jsxs("p",{className:"text-slate-400 text-sm",children:[$a(t.file_size)," • ",(m=t.file_type)==null?void 0:m.toUpperCase()]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[l==="image"&&s.jsxs(s.Fragment,{children:[s.jsx(C,{size:"sm",variant:"ghost",onClick:c,children:s.jsx(Rm,{className:"w-4 h-4"})}),s.jsx(C,{size:"sm",variant:"ghost",onClick:d,children:s.jsx(Lm,{className:"w-4 h-4"})}),s.jsx(C,{size:"sm",variant:"ghost",onClick:u,children:s.jsx(bm,{className:"w-4 h-4"})}),s.jsx(C,{size:"sm",variant:"ghost",onClick:h,children:s.jsx(Al,{className:"w-4 h-4"})})]}),s.jsx(C,{size:"sm",variant:"ghost",onClick:e,children:s.jsx(Et,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-hidden",children:l==="image"?s.jsx("img",{src:`${{}.VITE_SUPABASE_URL}/storage/v1/object/public/course-files/${t.file_path}`,alt:t.file_name,className:"max-w-full max-h-full object-contain transition-transform duration-200",style:{transform:`scale(${n}) rotate(${i}deg)`}}):l==="document"&&t.file_type==="pdf"?s.jsx("iframe",{src:`${{}.VITE_SUPABASE_URL}/storage/v1/object/public/course-files/${t.file_path}`,className:"w-full h-full rounded-lg",title:t.file_name}):s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-24 h-24 mx-auto mb-4 flex items-center justify-center bg-slate-700 rounded-full",children:r(t.file_type,"w-12 h-12")}),s.jsx("p",{className:"text-white mb-2",children:"ไม่สามารถแสดงตัวอย่างไฟล์นี้ได้"}),s.jsx("p",{className:"text-slate-400 text-sm",children:"คลิกดาวน์โหลดเพื่อเปิดไฟล์"})]})})]})})},qv=({courseId:t})=>{const{user:e}=ge(),[r,n]=p.useState(null),[a,i]=p.useState(!1),o=async()=>{i(!0);const c={timestamp:new Date().toISOString(),user:e?{id:e.id,email:e.email}:null,courseId:t};try{console.log("🔍 Testing database connection...");const{data:u,error:h}=await E.from("enrollments").select("count").limit(1);if(c.databaseConnection={success:!h,error:h==null?void 0:h.message},e&&t){console.log("🔍 Checking enrollment status...");const m=await Da(t);c.enrollmentCheck=m,console.log("🔍 Direct database query...");const{data:f,error:x}=await E.from("enrollments").select("*").eq("user_id",e.id).eq("course_id",t);c.directDatabaseQuery={data:f,error:x==null?void 0:x.message,count:(f==null?void 0:f.length)||0},console.log("🔍 Checking if course exists...");const{data:b,error:g}=await E.from("courses").select("id, title, is_active").eq("id",t).single();c.courseExists={exists:!!b,data:b,error:g==null?void 0:g.message}}}catch(u){c.generalError=u.message,console.error("Diagnostics error:",u)}n(c),i(!1),console.log("📊 Enrollment Diagnostics Complete:",c)},l=async()=>{if(!e||!t)return;console.log("🧪 Testing enrollment...");const c=await Fd(t);console.log("🧪 Enrollment test result:",c),await o()},d=()=>{localStorage.clear(),sessionStorage.clear(),console.log("🧹 Cache cleared, please refresh the page")};return s.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"🔧 Enrollment Debugger"}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsx(C,{onClick:o,disabled:a,variant:"outline",children:a?"กำลังตรวจสอบ...":"🔍 ตรวจสอบระบบ"}),e&&t&&s.jsx(C,{onClick:l,variant:"outline",children:"🧪 ทดสอบการลงทะเบียน"}),s.jsx(C,{onClick:d,variant:"outline",children:"🧹 ล้าง Cache"})]}),r&&s.jsxs("div",{className:"mt-4 p-4 bg-slate-800/50 rounded-lg text-xs font-mono",children:[s.jsx("h4",{className:"text-white font-semibold mb-2",children:"📊 ผลการตรวจสอบ:"}),s.jsx("pre",{className:"text-slate-300 whitespace-pre-wrap overflow-auto max-h-96",children:JSON.stringify(r,null,2)})]}),s.jsxs("div",{className:"mt-4 p-3 bg-blue-500/20 rounded-lg text-sm",children:[s.jsx("p",{className:"text-blue-600 font-medium",children:"💡 คำแนะนำ:"}),s.jsxs("ul",{className:"text-blue-600 text-xs mt-1 space-y-1",children:[s.jsx("li",{children:"• เปิด F12 → Console เพื่อดู Log messages"}),s.jsx("li",{children:"• ตรวจสอบว่า User ID และ Course ID ถูกต้อง"}),s.jsx("li",{children:"• ดูว่า Database connection ทำงานปกติหรือไม่"}),s.jsx("li",{children:"• ถ้า enrollmentCheck.isEnrolled = false แต่ directDatabaseQuery มีข้อมูล = ปัญหาที่ Service"})]})]})]})},Gv=()=>{var g;const{courseId:t}=wr(),{toast:e}=se(),{user:r}=ge(),[n,a]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState({isEnrolled:!1,status:null}),[c,u]=p.useState(!1);p.useEffect(()=>{h(),r&&m()},[t,r]);const h=async()=>{o(!0),console.log("Loading course with ID:",t);const{data:v,error:y}=await $d(t);console.log("Course data:",v,"Error:",y),y?(console.error("Course loading error:",y),e({title:"ข้อผิดพลาดในการโหลดข้อมูล",description:y.message,variant:"destructive"})):a(v),o(!1)},m=async()=>{console.log("CourseDetailPage: Checking enrollment status for user:",r==null?void 0:r.id,"course:",t);const{isEnrolled:v,status:y,error:w}=await Da(t);console.log("CourseDetailPage: Enrollment check result:",{isEnrolled:v,status:y,error:w}),w?console.error("CourseDetailPage: Enrollment check error:",w):(d({isEnrolled:v,status:y}),console.log("CourseDetailPage: Enrollment status updated:",{isEnrolled:v,status:y}))},f=async()=>{if(!r){e({title:"กรุณาเข้าสู่ระบบก่อน",description:"คุณต้องเข้าสู่ระบบก่อนลงทะเบียนเรียน",variant:"destructive"});return}console.log("CourseDetailPage: Starting enrollment for user:",r.id,"course:",t),u(!0);const{data:v,error:y}=await Fd(t);console.log("CourseDetailPage: Enrollment result:",{data:v,error:y}),y?(console.error("CourseDetailPage: Enrollment failed:",y),e({title:"ไม่สามารถลงทะเบียนได้",description:y.message,variant:"destructive"})):(console.log("CourseDetailPage: Enrollment successful, updating state"),e({title:"ลงทะเบียนสำเร็จ!",description:`คุณได้ลงทะเบียนคอร์ส "${n==null?void 0:n.title}" เรียบร้อยแล้ว`}),d({isEnrolled:!0,status:"active"}),console.log("CourseDetailPage: Enrollment status set to:",{isEnrolled:!0,status:"active"}),setTimeout(()=>{console.log("CourseDetailPage: Re-checking enrollment status after enrollment"),m()},1e3)),u(!1)},x={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},b={type:"tween",ease:"anticipate",duration:.5};return i?s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#667eea] mx-auto mb-4"}),s.jsx("p",{className:"text-emerald-700",children:"กำลังโหลดข้อมูลคอร์ส..."})]})}):n?s.jsxs(P.div,{initial:"initial",animate:"in",exit:"out",variants:x,transition:b,className:"container mx-auto px-4 py-12",children:[s.jsxs(fe,{children:[s.jsxs("title",{children:[n.title," - Login Learning"]}),s.jsx("meta",{name:"description",content:n.description})]}),s.jsx("div",{className:"mb-8",children:s.jsxs(Y,{to:"/courses",className:"flex items-center text-emerald-700 hover:text-emerald-900 transition-colors",children:[s.jsx(As,{className:"w-5 h-5 mr-2"}),"กลับไปหน้าคอร์สเรียนทั้งหมด"]})}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[s.jsxs(P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-emerald-900 mb-4",children:n.title}),s.jsx("p",{className:"text-emerald-800 text-lg leading-relaxed mb-6",children:n.description}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ue,{className:"w-5 h-5 text-[#667eea]"}),s.jsxs("span",{className:"text-emerald-800",children:["สอนโดย: ",n.instructor_name||"ไม่ระบุ"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ve,{className:"w-5 h-5 text-[#667eea]"}),s.jsxs("span",{className:"text-emerald-800",children:["ระยะเวลา: ",n.duration_hours||0," ชั่วโมง"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(le,{className:"w-5 h-5 text-[#667eea]"}),s.jsxs("span",{className:"text-emerald-800",children:["ผู้เรียน: ",n.enrollment_count||0," คน"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Te,{className:"w-5 h-5 text-[#667eea]"}),s.jsxs("span",{className:"text-emerald-800",children:["ระดับ: ",n.difficulty_level||"ไม่ระบุ"]})]})]}),s.jsx("img",{className:"w-full h-64 sm:h-96 object-cover rounded-lg mb-6 shadow-md",alt:n.title,src:"https://images.unsplash.com/photo-1635251595512-dc52146d5ae8"})]}),s.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[s.jsx("h2",{className:"text-2xl font-semibold text-emerald-900 mb-4",children:"เนื้อหาในคอร์ส"}),n.content&&n.content.length>0?s.jsx("ul",{className:"space-y-3",children:n.content.map((v,y)=>s.jsxs(P.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2+y*.05},className:"p-4 bg-slate-700/30 rounded-lg space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex-shrink-0",children:[v.content_type==="video"&&s.jsx(ue,{className:"w-5 h-5 text-blue-400"}),v.content_type==="quiz"&&s.jsx(Te,{className:"w-5 h-5 text-yellow-400"}),v.content_type==="assignment"&&s.jsx(le,{className:"w-5 h-5 text-purple-400"}),v.content_type==="document"&&s.jsx(ue,{className:"w-5 h-5 text-green-400"})]}),s.jsx("span",{className:"text-emerald-800 font-medium",children:v.title})]}),s.jsxs("div",{className:"text-sm text-emerald-700",children:[v.duration_minutes>0&&`${v.duration_minutes} นาที`,v.content_type==="quiz"&&"แบบทดสอบ",v.content_type==="assignment"&&"งานมอบหมาย"]})]}),v.description&&s.jsx("p",{className:"text-emerald-800 text-sm leading-relaxed",children:v.description}),s.jsx(Fa,{contentId:v.id,compact:!0,className:"mt-3"})]},v.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ue,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),s.jsx("p",{className:"text-emerald-700",children:"ยังไม่มีเนื้อหาในคอร์สนี้"})]})]})]}),s.jsxs(P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"lg:col-span-1 space-y-6",children:[s.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h2",{className:"text-3xl font-bold text-emerald-900",children:["฿",((g=n.price)==null?void 0:g.toLocaleString())||"0"]}),s.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((v,y)=>s.jsx(dr,{className:"w-5 h-5 text-yellow-400 fill-current"},y)),s.jsx("span",{className:"ml-2 text-sm text-emerald-800",children:"(5.0)"})]})]}),s.jsx("p",{className:"text-sm text-emerald-700 mb-6",children:"ราคาพิเศษสำหรับนักเรียน Login Learning"}),l.isEnrolled&&s.jsxs("div",{className:"flex items-center space-x-2 mb-4 p-3 bg-green-500/20 rounded-lg border border-green-500/30",children:[s.jsx(Em,{className:"w-5 h-5 text-green-400"}),s.jsx("span",{className:"text-green-400 font-medium",children:"คุณได้ลงทะเบียนคอร์สนี้แล้ว"})]}),l.isEnrolled?s.jsx(Y,{to:`/courses/${t}/learn`,className:"block w-full",children:s.jsxs(C,{size:"lg",className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-gray-800 text-lg py-3",children:[s.jsx(ue,{className:"w-5 h-5 mr-2"}),"เริ่มเรียน"]})}):s.jsxs(C,{size:"lg",className:"w-full bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-gray-800 text-lg py-3",onClick:f,disabled:c,children:[s.jsx(km,{className:"w-5 h-5 mr-2"}),c?"กำลังลงทะเบียน...":"ลงทะเบียนเรียนเลย"]}),s.jsx("p",{className:"text-xs text-slate-500 mt-4 text-center",children:"รับประกันความพึงพอใจ คืนเงินภายใน 7 วัน"})]}),s.jsxs("div",{className:"glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[s.jsx("h3",{className:"text-xl font-semibold text-emerald-900 mb-3",children:"สิ่งที่คุณจะได้รับ"}),s.jsxs("ul",{className:"space-y-2 text-emerald-800 text-sm list-disc list-inside",children:[s.jsx("li",{children:"ความรู้และทักษะทางวิศวกรรมที่แข็งแกร่ง"}),s.jsx("li",{children:"ประสบการณ์ทำโปรเจกต์จริง"}),s.jsx("li",{children:"ใบประกาศนียบัตรเมื่อเรียนจบ"}),s.jsx("li",{children:"คำแนะนำจากผู้เชี่ยวชาญ"}),s.jsx("li",{children:"โอกาสในการสร้างเครือข่าย"})]})]}),r&&s.jsx(qv,{courseId:t})]})]})]}):s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(xe,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-emerald-900 mb-2",children:"ไม่พบข้อมูลคอร์ส"}),s.jsx("p",{className:"text-emerald-700 mb-4",children:"คอร์สที่คุณกำลังมองหาไม่มีอยู่ในระบบ"}),s.jsx(Y,{to:"/courses",children:s.jsx(C,{variant:"outline",className:"text-emerald-900 border-emerald-300 hover:bg-emerald-100",children:"กลับไปหน้าคอร์สทั้งหมด"})})]})})},To=async(t,e)=>{try{const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{currentTime:a=0,watchedDuration:i=0,totalDuration:o=0,isCompleted:l=!1}=e,d={start_time:new Date().toISOString(),end_time:new Date().toISOString(),duration:.25,position:a},{data:c,error:u}=await E.from("video_progress").select("*").eq("user_id",r.id).eq("content_id",t).single();let h=[],m=i;c&&(h=c.watch_sessions||[],m=Math.max(c.watched_duration||0,i)),h.push(d),h.length>100&&(h=h.slice(-100));const f={user_id:r.id,content_id:t,last_position:a,watched_duration:m,total_duration:o||(c==null?void 0:c.total_duration)||0,watch_sessions:h,updated_at:new Date().toISOString()};(l||o>0&&a/o>=.9)&&(f.completed_at=new Date().toISOString());const{data:x,error:b}=await E.from("video_progress").upsert([f],{onConflict:"user_id,content_id"}).select().single();if(b)throw b;return{data:x,error:null}}catch(r){return console.error("Error updating video progress:",r),{data:null,error:r}}},Hv=async t=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)return{data:null,error:null};const{data:n,error:a}=await E.from("video_progress").select("*").eq("user_id",e.id).eq("content_id",t).single();if(a&&a.code!=="PGRST116")throw a;return{data:n||null,error:null}}catch(e){return console.error("Error fetching video progress:",e),{data:null,error:e}}},Wv=async t=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)return{data:null,error:null};const{data:n,error:a}=await E.from("enrollments").select("id, progress_percentage, status").eq("user_id",e.id).eq("course_id",t).single();if(a&&a.code!=="PGRST116")throw a;if(!n)return{data:{enrolled:!1},error:null};const{data:i,error:o}=await E.from("course_content").select("id, title, content_type, order_index").eq("course_id",t).order("order_index");if(o)throw o;const l=i.map(w=>w.id),{data:d,error:c}=await E.from("video_progress").select("content_id, completed_at").eq("user_id",e.id).in("content_id",l);if(c)throw c;const{data:u,error:h}=await E.from("quiz_attempts").select("quiz_id, is_passed, completed_at").eq("user_id",e.id);if(h)throw h;const{data:m,error:f}=await E.from("assignment_submissions").select("assignment_id, status, submitted_at").eq("user_id",e.id);if(f)throw f;const x=new Map(d.map(w=>[w.content_id,!!w.completed_at])),b=i.map(w=>{let _=!1;switch(w.content_type){case"video":_=x.get(w.id)||!1;break;case"quiz":_=u.some(N=>N.is_passed);break;case"assignment":_=m.some(N=>N.status==="submitted"||N.status==="graded");break;default:_=!1}return{...w,is_completed:_}}),g=b.filter(w=>w.is_completed).length,v=b.length,y=v>0?Math.round(g/v*100):0;return{data:{enrolled:!0,enrollment:n,content_progress:b,completed_count:g,total_count:v,progress_percentage:y,calculated_progress:y},error:null}}catch(e){return console.error("Error fetching course progress:",e),{data:null,error:e}}},Kv=({src:t,contentId:e,title:r,onProgress:n,autoPlay:a=!1,initialTime:i=0})=>{const{user:o}=ge(),l=p.useRef(null),d=p.useRef(null),c=p.useRef(null),[u,h]=p.useState(!1),[m,f]=p.useState(i),[x,b]=p.useState(0),[g,v]=p.useState(1),[y,w]=p.useState(!1),[_,N]=p.useState(!1),[k,j]=p.useState(!0),[S,I]=p.useState(!0),[B,H]=p.useState(1),[$,F]=p.useState(0),[T,A]=p.useState(0);p.useEffect(()=>{const M=l.current;if(!M)return;i>0&&(M.currentTime=i);const te=()=>{b(M.duration),j(!1)},Q=()=>{f(M.currentTime),M.paused||F(zd=>zd+.25)},tt=()=>h(!0),pt=()=>h(!1),Ve=()=>{h(!1),o&&e&&To(e,{currentTime:M.duration,watchedDuration:M.duration,isCompleted:!0})},zr=()=>{v(M.volume),w(M.muted)},Ua=()=>j(!0),Va=()=>j(!1);return M.addEventListener("loadedmetadata",te),M.addEventListener("timeupdate",Q),M.addEventListener("play",tt),M.addEventListener("pause",pt),M.addEventListener("ended",Ve),M.addEventListener("volumechange",zr),M.addEventListener("waiting",Ua),M.addEventListener("canplay",Va),()=>{M.removeEventListener("loadedmetadata",te),M.removeEventListener("timeupdate",Q),M.removeEventListener("play",tt),M.removeEventListener("pause",pt),M.removeEventListener("ended",Ve),M.removeEventListener("volumechange",zr),M.removeEventListener("waiting",Ua),M.removeEventListener("canplay",Va)}},[e,o,i]),p.useEffect(()=>{let M;const te=()=>{I(!0),clearTimeout(M),M=setTimeout(()=>{u&&I(!1)},3e3)},Q=d.current;return Q&&(Q.addEventListener("mousemove",te),Q.addEventListener("mouseleave",()=>{u&&I(!1)})),()=>{clearTimeout(M),Q&&Q.removeEventListener("mousemove",te)}},[u]),p.useEffect(()=>{if(!(!o||!e))return c.current=setInterval(()=>{const M=l.current;M&&Math.abs(M.currentTime-T)>5&&(To(e,{currentTime:M.currentTime,watchedDuration:$,totalDuration:M.duration}),A(M.currentTime))},1e4),()=>{c.current&&clearInterval(c.current)}},[o,e,$,T]);const O=()=>{const M=l.current;M.paused?M.play():M.pause()},U=M=>{const te=l.current,Q=M.currentTarget.getBoundingClientRect(),tt=(M.clientX-Q.left)/Q.width;te.currentTime=tt*x},R=()=>{const M=l.current;M.muted=!M.muted},W=M=>{const te=l.current,Q=parseFloat(M.target.value);te.volume=Q,v(Q),w(Q===0)},re=()=>{const M=d.current;document.fullscreenElement?document.exitFullscreen().then(()=>{N(!1)}):M.requestFullscreen().then(()=>{N(!0)})},q=M=>{const te=l.current;te.currentTime=Math.max(0,Math.min(x,te.currentTime+M))},D=M=>{const te=l.current;te.playbackRate=M,H(M)},V=M=>{const te=Math.floor(M/60),Q=Math.floor(M%60);return`${te}:${Q.toString().padStart(2,"0")}`},ee=x>0?m/x*100:0,Ie=x>0?$/x*100:0;return s.jsxs("div",{ref:d,className:"relative bg-black rounded-lg overflow-hidden group cursor-pointer",onClick:O,children:[s.jsx("video",{ref:l,src:t,className:"w-full h-auto max-h-[500px] object-contain",autoPlay:a,preload:"metadata",onClick:M=>M.stopPropagation()}),k&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:s.jsx(lr,{className:"w-12 h-12 text-white animate-spin"})}),!u&&!k&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:s.jsx(P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white/20 backdrop-blur-sm rounded-full p-4",children:s.jsx(En,{className:"w-16 h-16 text-white ml-2"})})}),s.jsxs(P.div,{initial:{opacity:1},animate:{opacity:S?1:0},transition:{duration:.3},className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",onClick:M=>M.stopPropagation(),children:[s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"w-full h-2 bg-white/20 rounded-full cursor-pointer",onClick:U,children:[s.jsx("div",{className:"h-full bg-white/40 rounded-full absolute",style:{width:`${Math.min(Ie,100)}%`}}),s.jsx("div",{className:"h-full bg-blue-500 rounded-full relative",style:{width:`${ee}%`},children:s.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-4 h-4 bg-blue-500 rounded-full -mr-2"})})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(C,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:O,children:u?s.jsx(pm,{className:"w-6 h-6"}):s.jsx(En,{className:"w-6 h-6"})}),s.jsx(C,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>q(-10),children:s.jsx(Sm,{className:"w-5 h-5"})}),s.jsx(C,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>q(10),children:s.jsx(Tm,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(C,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:R,children:y||g===0?s.jsx(Am,{className:"w-5 h-5"}):s.jsx(Pm,{className:"w-5 h-5"})}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:y?0:g,onChange:W,className:"w-20 h-1 bg-white/20 rounded-lg appearance-none slider"})]}),s.jsxs("span",{className:"text-white text-sm font-mono",children:[V(m)," / ",V(x)]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("select",{value:B,onChange:M=>D(parseFloat(M.target.value)),className:"bg-transparent text-white text-sm border border-white/20 rounded px-2 py-1",children:[s.jsx("option",{value:"0.5",className:"bg-black",children:"0.5x"}),s.jsx("option",{value:"0.75",className:"bg-black",children:"0.75x"}),s.jsx("option",{value:"1",className:"bg-black",children:"1x"}),s.jsx("option",{value:"1.25",className:"bg-black",children:"1.25x"}),s.jsx("option",{value:"1.5",className:"bg-black",children:"1.5x"}),s.jsx("option",{value:"2",className:"bg-black",children:"2x"})]}),s.jsx(C,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:re,children:s.jsx(Al,{className:"w-5 h-5"})})]})]})]}),r&&S&&s.jsx(P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"absolute top-4 left-4 right-4",children:s.jsx("h3",{className:"text-white text-lg font-semibold bg-black/50 backdrop-blur-sm rounded px-3 py-2",children:r})})]})},Xv=async t=>{try{const{data:e,error:r}=await E.from("quizzes").select("*").eq("content_id",t).eq("is_active",!0).single();if(r&&r.code!=="PGRST116")throw r;return{data:e||null,error:null}}catch(e){return console.error("Error fetching quiz:",e),{data:null,error:e}}},Jv=async t=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)return{data:[],error:null};const{data:n,error:a}=await E.from("quiz_attempts").select("*").eq("user_id",e.id).eq("quiz_id",t).order("attempt_number",{ascending:!1});if(a)throw a;return{data:n||[],error:null}}catch(e){return console.error("Error fetching quiz attempts:",e),{data:[],error:e}}},Yv=async t=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n,error:a}=await E.from("quizzes").select("*").eq("id",t).single();if(a)throw a;const{data:i,error:o}=await Jv(t);if(o)throw o;const l=i.length+1;if(n.max_attempts>0&&i.length>=n.max_attempts)throw new Error(`คุณได้ทำแบบทดสอบครบจำนวนครั้งที่กำหนดแล้ว (${n.max_attempts} ครั้ง)`);const{data:d,error:c}=await E.from("quiz_attempts").insert([{user_id:e.id,quiz_id:t,attempt_number:l,answers:{},score:0,started_at:new Date().toISOString()}]).select().single();if(c)throw c;return{data:{...d,quiz:n},error:null}}catch(e){return console.error("Error starting quiz attempt:",e),{data:null,error:e}}},Zv=async(t,e)=>{try{const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:a,error:i}=await E.from("quiz_attempts").select(`
        *,
        quizzes(*)
      `).eq("id",t).eq("user_id",r.id).single();if(i)throw i;const o=a.quizzes,l=Qv(o.questions,e),d=l.percentage>=o.passing_score,c=new Date().toISOString(),u=new Date(a.started_at),h=new Date(c),m=Math.round((h-u)/(1e3*60)),{data:f,error:x}=await E.from("quiz_attempts").update({answers:e,score:l.percentage,max_score:100,completed_at:c,time_spent_minutes:m,is_passed:d,feedback:l.feedback}).eq("id",t).eq("user_id",r.id).select(`
        *,
        quizzes(*)
      `).single();if(x)throw x;return{data:{...f,score_details:l},error:null}}catch(r){return console.error("Error submitting quiz attempt:",r),{data:null,error:r}}},Qv=(t,e)=>{let r=0;const n={};t.forEach((i,o)=>{const l=i.id||o.toString(),d=e[l],c=eb(i,d);c&&r++,n[l]={is_correct:c,correct_answer:tb(i),user_answer:d,explanation:i.explanation||null}});const a=t.length>0?Math.round(r/t.length*100):0;return{correct_count:r,total_questions:t.length,percentage:a,feedback:n}},eb=(t,e)=>{switch(t.type){case"multiple_choice":return e===t.correct_answer;case"true_false":return e===t.correct_answer;case"fill_blank":return(Array.isArray(t.correct_answer)?t.correct_answer:[t.correct_answer]).some(i=>(e==null?void 0:e.toLowerCase().trim())===i.toLowerCase().trim());case"multiple_select":if(!Array.isArray(e)||!Array.isArray(t.correct_answer))return!1;const n=new Set(e.sort()),a=new Set(t.correct_answer.sort());return n.size===a.size&&[...n].every(i=>a.has(i));default:return!1}},tb=t=>{switch(t.type){case"multiple_choice":case"true_false":return t.correct_answer;case"fill_blank":return Array.isArray(t.correct_answer)?t.correct_answer[0]:t.correct_answer;case"multiple_select":return t.correct_answer;default:return null}},sb=t=>{var r;const e=[];return(r=t.title)!=null&&r.trim()||e.push("ชื่อแบบทดสอบไม่สามารถว่างได้"),(!t.questions||!Array.isArray(t.questions)||t.questions.length===0)&&e.push("ต้องมีคำถามอย่างน้อย 1 ข้อ"),t.questions&&t.questions.forEach((n,a)=>{var i;(i=n.question)!=null&&i.trim()||e.push(`คำถามที่ ${a+1}: ข้อความคำถามไม่สามารถว่างได้`),n.type||e.push(`คำถามที่ ${a+1}: ต้องระบุประเภทคำถาม`),n.type==="multiple_choice"&&((!n.options||n.options.length<2)&&e.push(`คำถามที่ ${a+1}: ต้องมีตัวเลือกอย่างน้อย 2 ตัวเลือก`),n.correct_answer||e.push(`คำถามที่ ${a+1}: ต้องระบุคำตอบที่ถูกต้อง`)),n.type==="multiple_select"&&((!n.options||n.options.length<2)&&e.push(`คำถามที่ ${a+1}: ต้องมีตัวเลือกอย่างน้อย 2 ตัวเลือก`),(!n.correct_answer||!Array.isArray(n.correct_answer)||n.correct_answer.length===0)&&e.push(`คำถามที่ ${a+1}: ต้องระบุคำตอบที่ถูกต้องอย่างน้อย 1 ข้อ`)),n.type==="fill_blank"&&(n.correct_answer||e.push(`คำถามที่ ${a+1}: ต้องระบุคำตอบที่ถูกต้อง`)),n.type==="true_false"&&n.correct_answer!==!0&&n.correct_answer!==!1&&e.push(`คำถามที่ ${a+1}: ต้องระบุคำตอบเป็น true หรือ false`)}),t.passing_score&&(t.passing_score<0||t.passing_score>100)&&e.push("คะแนนผ่านต้องอยู่ระหว่าง 0-100"),t.time_limit&&t.time_limit<0&&e.push("เวลาจำกัดต้องเป็นจำนวนบวกหรือ 0"),t.max_attempts&&t.max_attempts<1&&e.push("จำนวนครั้งที่ทำได้สูงสุดต้องมากกว่า 0"),{isValid:e.length===0,errors:e}},rb=()=>[{id:"1",type:"multiple_choice",question:"ข้อใดต่อไปนี้เป็นภาษาโปรแกรมมิ่ง?",options:["JavaScript","HTML","CSS","SQL"],correct_answer:"JavaScript",explanation:"JavaScript เป็นภาษาโปรแกรมมิ่งที่ใช้ในการพัฌนาเว็บไซต์",points:1},{id:"2",type:"true_false",question:"HTML ย่อมาจาก HyperText Markup Language",correct_answer:!0,explanation:"ถูกต้อง HTML ย่อมาจาก HyperText Markup Language",points:1},{id:"3",type:"fill_blank",question:"ภาษา _______ ใช้สำหรับการจัดรูปแบบหน้าเว็บ",correct_answer:["CSS","css"],explanation:"CSS (Cascading Style Sheets) ใช้สำหรับการจัดรูปแบบหน้าเว็บ",points:1}],nb=({quiz:t,onComplete:e,onClose:r})=>{var $,F,T;const{toast:n}=se(),[a,i]=p.useState(null),[o,l]=p.useState(0),[d,c]=p.useState({}),[u,h]=p.useState(0),[m,f]=p.useState(!1),[x,b]=p.useState(null),[g,v]=p.useState(!1);p.useEffect(()=>{y()},[t.id]),p.useEffect(()=>{if(u>0&&!m){const A=setTimeout(()=>{h(u-1)},1e3);return()=>clearTimeout(A)}else u===0&&t.time_limit>0&&!m&&_()},[u,m]);const y=async()=>{v(!0);const{data:A,error:O}=await Yv(t.id);if(O){n({title:"ไม่สามารถเริ่มแบบทดสอบได้",description:O.message,variant:"destructive"}),r==null||r();return}i(A),t.time_limit>0&&h(t.time_limit*60),v(!1)},w=(A,O)=>{c(U=>({...U,[A]:O}))},_=async()=>{if(!a)return;v(!0);const{data:A,error:O}=await Zv(a.id,d);if(O){n({title:"ไม่สามารถส่งแบบทดสอบได้",description:O.message,variant:"destructive"}),v(!1);return}b(A),f(!0),v(!1),n({title:A.is_passed?"ผ่านแบบทดสอบ! 🎉":"ไม่ผ่านแบบทดสอบ",description:`คะแนนที่ได้: ${A.score}/${A.max_score} (${A.score}%)`,variant:A.is_passed?"default":"destructive"}),e==null||e(A)},N=()=>{o<t.questions.length-1&&l(o+1)},k=()=>{o>0&&l(o-1)},j=A=>{const O=Math.floor(A/60),U=A%60;return`${O}:${U.toString().padStart(2,"0")}`},S=()=>Object.keys(d).length;if(g&&!a)return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-400",children:"กำลังเตรียมแบบทดสอบ..."})]})});if(m&&x)return s.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:`mx-auto w-16 h-16 rounded-full flex items-center justify-center ${x.is_passed?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:x.is_passed?s.jsx(Ht,{className:"w-8 h-8"}):s.jsx(ks,{className:"w-8 h-8"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:x.is_passed?"ยินดีด้วย! คุณผ่านแบบทดสอบ":"เสียใจด้วย คุณไม่ผ่านแบบทดสอบ"}),s.jsxs("p",{className:"text-slate-400",children:["คะแนนที่ได้: ",x.score,"% | ต้องการ: ",t.passing_score,"%"]})]})]}),s.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[s.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"รายละเอียดคะแนน"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-400",children:(($=x.score_details)==null?void 0:$.correct_count)||0}),s.jsx("div",{className:"text-sm text-slate-400",children:"ตอบถูก"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-slate-300",children:((F=x.score_details)==null?void 0:F.total_questions)||0}),s.jsx("div",{className:"text-sm text-slate-400",children:"ทั้งหมด"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[x.score,"%"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"คะแนนรวม"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-400",children:x.time_spent_minutes||0}),s.jsx("div",{className:"text-sm text-slate-400",children:"นาที"})]})]})]}),t.show_correct_answers&&((T=x.score_details)==null?void 0:T.feedback)&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-lg font-semibold text-white",children:"ตรวจสอบคำตอบ"}),t.questions.map((A,O)=>{const U=A.id||O.toString(),R=x.score_details.feedback[U];return s.jsx(P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:O*.1},className:`glass-effect p-4 rounded-lg border-l-4 ${R!=null&&R.is_correct?"border-green-500":"border-red-500"}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`mt-1 ${R!=null&&R.is_correct?"text-green-400":"text-red-400"}`,children:R!=null&&R.is_correct?s.jsx(Ue,{className:"w-5 h-5"}):s.jsx(ks,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white font-medium mb-2",children:A.question}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-400",children:"คำตอบของคุณ: "}),s.jsx("span",{className:R!=null&&R.is_correct?"text-green-400":"text-red-400",children:Array.isArray(R==null?void 0:R.user_answer)?R.user_answer.join(", "):(R==null?void 0:R.user_answer)||"ไม่ได้ตอบ"})]}),!(R!=null&&R.is_correct)&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-400",children:"คำตอบที่ถูก: "}),s.jsx("span",{className:"text-green-400",children:Array.isArray(R==null?void 0:R.correct_answer)?R.correct_answer.join(", "):R==null?void 0:R.correct_answer})]}),(R==null?void 0:R.explanation)&&s.jsxs("div",{className:"mt-2 p-2 bg-blue-500/10 rounded text-blue-300",children:[s.jsx("strong",{children:"คำอธิบาย:"})," ",R.explanation]})]})]})]})},U)})]}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsx(C,{onClick:r,variant:"outline",children:"ปิด"}),!x.is_passed&&(a==null?void 0:a.attempt_number)<t.max_attempts&&s.jsxs(C,{onClick:()=>{f(!1),b(null),l(0),c({}),y()},className:"bg-blue-500 hover:bg-blue-600",children:[s.jsx(vm,{className:"w-4 h-4 mr-2"}),"ลองใหม่"]})]})]});const I=t.questions[o],B=I.id||o.toString(),H=d[B];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:t.title}),s.jsxs("p",{className:"text-slate-400",children:["คำถามที่ ",o+1," จาก ",t.questions.length]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[t.time_limit>0&&s.jsxs("div",{className:`flex items-center space-x-2 ${u<300?"text-red-400":"text-slate-400"}`,children:[s.jsx(ve,{className:"w-4 h-4"}),s.jsx("span",{className:"font-mono",children:j(u)})]}),s.jsxs("div",{className:"text-slate-400 text-sm",children:["ตอบแล้ว: ",S(),"/",t.questions.length]})]})]}),s.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(o+1)/t.questions.length*100}%`}})}),s.jsx(Ee,{mode:"wait",children:s.jsx(P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"glass-effect p-6 rounded-xl",children:s.jsx(ab,{question:I,questionId:B,userAnswer:H,onAnswerChange:w})},o)}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(C,{onClick:k,disabled:o===0,variant:"outline",children:[s.jsx(As,{className:"w-4 h-4 mr-2"}),"ก่อนหน้า"]}),s.jsx("div",{className:"flex items-center space-x-2",children:o===t.questions.length-1?s.jsx(C,{onClick:_,disabled:g||S()===0,className:"bg-green-500 hover:bg-green-600",children:g?"กำลังส่ง...":"ส่งคำตอบ"}):s.jsxs(C,{onClick:N,children:["ถัดไป",s.jsx(Qh,{className:"w-4 h-4 ml-2"})]})})]}),S()<t.questions.length&&s.jsxs("div",{className:"flex items-center space-x-2 text-amber-400 text-sm",children:[s.jsx(xe,{className:"w-4 h-4"}),s.jsxs("span",{children:["คุณยังตอบคำถามไม่ครบ (",t.questions.length-S()," ข้อ)"]})]})]})},ab=({question:t,questionId:e,userAnswer:r,onAnswerChange:n})=>{const a=()=>{switch(t.type){case"multiple_choice":return s.jsx("div",{className:"space-y-3",children:t.options.map((i,o)=>s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-slate-700/30 transition-colors",children:[s.jsx("input",{type:"radio",name:e,value:i,checked:r===i,onChange:l=>n(e,l.target.value),className:"w-4 h-4 text-blue-500"}),s.jsx("span",{className:"text-slate-200",children:i})]},o))});case"multiple_select":return s.jsx("div",{className:"space-y-3",children:t.options.map((i,o)=>s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-slate-700/30 transition-colors",children:[s.jsx("input",{type:"checkbox",value:i,checked:Array.isArray(r)&&r.includes(i),onChange:l=>{const d=Array.isArray(r)?r:[];l.target.checked?n(e,[...d,i]):n(e,d.filter(c=>c!==i))},className:"w-4 h-4 text-blue-500"}),s.jsx("span",{className:"text-slate-200",children:i})]},o))});case"true_false":return s.jsx("div",{className:"space-y-3",children:[!0,!1].map(i=>s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-3 rounded-lg hover:bg-slate-700/30 transition-colors",children:[s.jsx("input",{type:"radio",name:e,value:i,checked:r===i,onChange:o=>n(e,o.target.value==="true"),className:"w-4 h-4 text-blue-500"}),s.jsx("span",{className:"text-slate-200",children:i?"ถูก":"ผิด"})]},i.toString()))});case"fill_blank":return s.jsx("input",{type:"text",value:r||"",onChange:i=>n(e,i.target.value),placeholder:"พิมพ์คำตอบของคุณ...",className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:border-blue-500 focus:outline-none"});default:return s.jsx("p",{className:"text-red-400",children:"ไม่รองรับประเภทคำถามนี้"})}};return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-lg font-semibold text-white",children:t.question}),t.image&&s.jsx("img",{src:t.image,alt:"Question",className:"max-w-full h-auto rounded-lg"}),a(),t.hint&&s.jsxs("div",{className:"text-sm text-blue-300 bg-blue-500/10 p-3 rounded-lg",children:[s.jsx("strong",{children:"คำแนะนำ:"})," ",t.hint]})]})},Ud=async t=>{try{const{data:e,error:r}=await E.from("assignments").select("*").eq("content_id",t).eq("is_active",!0).single();if(r&&r.code!=="PGRST116")throw r;return{data:e||null,error:null}}catch(e){return console.error("Error fetching assignment:",e),{data:null,error:e}}},Vd=async t=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)return{data:[],error:null};const{data:n,error:a}=await E.from("assignment_submissions").select("*").eq("user_id",e.id).eq("assignment_id",t).order("attempt_number",{ascending:!1});if(a)throw a;return{data:n||[],error:null}}catch(e){return console.error("Error fetching user submissions:",e),{data:[],error:e}}},Co=async(t,e)=>{try{const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:a,error:i}=await E.from("assignments").select("*").eq("id",t).single();if(i)throw i;const{data:o,error:l}=await Vd(t);if(l)throw l;const d=o.length+1,c=a.due_date?new Date>new Date(a.due_date):!1,{data:u,error:h}=await E.from("assignment_submissions").insert([{user_id:r.id,assignment_id:t,attempt_number:d,submission_text:e.text||"",file_urls:e.fileUrls||[],file_names:e.fileNames||[],file_sizes:e.fileSizes||[],status:"submitted",is_late:c,max_score:a.max_score||100}]).select().single();if(h)throw h;return{data:u,error:null}}catch(r){return console.error("Error creating submission:",r),{data:null,error:r}}},Eo=async(t,e)=>{try{const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:a,error:i}=await E.from("assignment_submissions").update({submission_text:e.text||"",file_urls:e.fileUrls||[],file_names:e.fileNames||[],file_sizes:e.fileSizes||[],updated_at:new Date().toISOString()}).eq("id",t).eq("user_id",r.id).select().single();if(i)throw i;return{data:a,error:null}}catch(r){return console.error("Error updating submission:",r),{data:null,error:r}}},ib=async t=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n,error:a}=await E.from("assignment_submissions").update({status:"submitted",submitted_at:new Date().toISOString()}).eq("id",t).eq("user_id",e.id).select().single();if(a)throw a;return{data:n,error:null}}catch(e){return console.error("Error submitting final submission:",e),{data:null,error:e}}},ob=async(t,e)=>{try{const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");const a=t.name.split(".").pop(),i=`${Date.now()}-${Math.random().toString(36).substring(2)}.${a}`,o=`assignments/${e}/${r.id}/${i}`,{data:l,error:d}=await E.storage.from("course-files").upload(o,t);if(d)throw d;const{data:{publicUrl:c}}=E.storage.from("course-files").getPublicUrl(o);return{data:{path:l.path,url:c,originalName:t.name,size:t.size,type:t.type},error:null}}catch(r){return console.error("Error uploading file:",r),{data:null,error:r}}},lb=async t=>{try{const{error:e}=await E.storage.from("course-files").remove([t]);if(e)throw e;return{error:null}}catch(e){return console.error("Error deleting file:",e),{error:e}}},cb=(t,e)=>{const r=[];t.size>(e.max_file_size||10485760)&&r.push(`ไฟล์ ${t.name} มีขนาดใหญ่เกินกำหนด (${(e.max_file_size/1024/1024).toFixed(1)} MB)`);const n=t.name.split(".").pop().toLowerCase(),a=e.allowed_file_types||["pdf","doc","docx","jpg","png"];return a.includes(n)||r.push(`ไฟล์ ${t.name} ไม่ใช่ประเภทที่อนุญาต (${a.join(", ")})`),{isValid:r.length===0,errors:r}},db=async t=>{try{const{data:e,error:r}=await E.from("assignments").select("*").eq("id",t).single();if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error fetching assignment:",e),{data:null,error:e}}},ub=async t=>{try{const{data:e,error:r}=await E.from("assignment_submissions").select(`
        *,
        user_profiles!assignment_submissions_user_id_fkey(full_name, email, avatar_url)
      `).eq("assignment_id",t).order("submitted_at",{ascending:!1});if(r)throw r;return{data:e,error:null}}catch(e){return console.error("Error fetching assignment submissions:",e),{data:null,error:e}}},hb=async(t,e)=>{try{const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:a,error:i}=await E.from("assignment_submissions").update({score:e.score,feedback:e.feedback,graded_at:e.graded_at||new Date().toISOString(),graded_by:e.graded_by||r.id,grading_rubric_scores:e.grading_rubric_scores||null}).eq("id",t).select().single();if(i)throw i;return{data:a,error:null}}catch(r){return console.error("Error updating submission grade:",r),{data:null,error:r}}},mb=({assignment:t,maxFiles:e=5,onFilesChange:r,initialFiles:n=[],disabled:a=!1,className:i=""})=>{var w,_;const{toast:o}=se(),[l,d]=p.useState(n),[c,u]=p.useState(!1),[h,m]=p.useState(!1),f=(N,k="w-6 h-6")=>{const j=N.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(j)?s.jsx(js,{className:`${k} text-blue-500`}):["pdf"].includes(j)?s.jsx(J,{className:`${k} text-red-500`}):["doc","docx"].includes(j)?s.jsx(J,{className:`${k} text-blue-600`}):["mp4","avi","mov"].includes(j)?s.jsx(am,{className:`${k} text-purple-500`}):s.jsx(or,{className:`${k} text-gray-500`})},x=N=>{if(N===0)return"0 Bytes";const k=1024,j=["Bytes","KB","MB","GB"],S=Math.floor(Math.log(N)/Math.log(k));return parseFloat((N/Math.pow(k,S)).toFixed(2))+" "+j[S]},b=p.useCallback(async N=>{if(a)return;const k=Array.from(N);if(l.length+k.length>e){o({title:"ไฟล์เกินจำนวนที่กำหนด",description:`สามารถอัปโหลดได้สูงสุด ${e} ไฟล์`,variant:"destructive"});return}u(!0);try{const j=[];for(const I of k){const B=cb(I,t);if(!B.isValid){o({title:"ไฟล์ไม่ถูกต้อง",description:B.errors.join(`
`),variant:"destructive"});continue}const{data:H,error:$}=await ob(I,t.id);if($){o({title:"ไม่สามารถอัปโหลดไฟล์ได้",description:`ไฟล์ ${I.name}: ${$.message}`,variant:"destructive"});continue}j.push({id:Date.now()+Math.random(),name:I.name,size:I.size,type:I.type,url:H.url,path:H.path,uploaded:!0})}const S=[...l,...j];d(S),r==null||r(S),j.length>0&&o({title:"อัปโหลดสำเร็จ",description:`อัปโหลดไฟล์ ${j.length} ไฟล์เรียบร้อยแล้ว`})}catch(j){console.error("Upload error:",j),o({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถอัปโหลดไฟล์ได้",variant:"destructive"})}finally{u(!1)}},[l,e,t,a,r,o]),g=async N=>{if(a)return;N.uploaded&&N.path&&await lb(N.path);const k=l.filter(j=>j.id!==N.id);d(k),r==null||r(k),o({title:"ลบไฟล์แล้ว",description:`ลบไฟล์ ${N.name} เรียบร้อยแล้ว`})},v=p.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.type==="dragenter"||N.type==="dragover"?m(!0):N.type==="dragleave"&&m(!1)},[]),y=p.useCallback(N=>{N.preventDefault(),N.stopPropagation(),m(!1),N.dataTransfer.files&&N.dataTransfer.files[0]&&b(N.dataTransfer.files)},[b]);return s.jsxs("div",{className:`space-y-4 ${i}`,children:[s.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 transition-colors ${h?"border-blue-500 bg-blue-50/10":"border-slate-600 hover:border-slate-500"} ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onDragEnter:v,onDragLeave:v,onDragOver:v,onDrop:y,onClick:()=>!a&&document.getElementById("file-upload").click(),children:[s.jsx("input",{id:"file-upload",type:"file",multiple:!0,disabled:a,className:"hidden",accept:(w=t.allowed_file_types)==null?void 0:w.map(N=>`.${N}`).join(","),onChange:N=>b(N.target.files)}),s.jsx("div",{className:"text-center",children:c?s.jsxs("div",{className:"space-y-2",children:[s.jsx(lr,{className:"w-8 h-8 text-blue-500 mx-auto animate-spin"}),s.jsx("p",{className:"text-slate-300",children:"กำลังอัปโหลด..."})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pn,{className:"w-8 h-8 text-slate-400 mx-auto"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-300",children:"คลิกเพื่อเลือกไฟล์ หรือลากไฟล์มาวางที่นี่"}),s.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["ประเภทไฟล์ที่รองรับ: ",(_=t.allowed_file_types)==null?void 0:_.join(", ")]}),s.jsxs("p",{className:"text-sm text-slate-500",children:["ขนาดไฟล์สูงสุด: ",x(t.max_file_size||10485760)]})]})]})})]}),s.jsx(Ee,{children:l.length>0&&s.jsxs(P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2",children:[s.jsxs("h4",{className:"text-sm font-medium text-slate-300",children:["ไฟล์ที่อัปโหลด (",l.length,"/",e,")"]}),l.map(N=>s.jsxs(P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex items-center space-x-3 p-3 bg-slate-700/30 rounded-lg",children:[s.jsx("div",{className:"flex-shrink-0",children:f(N.name)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-slate-200 truncate",children:N.name}),s.jsx("p",{className:"text-xs text-slate-400",children:x(N.size)})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[N.uploaded?s.jsx(kl,{className:"w-4 h-4 text-green-400"}):s.jsx(lr,{className:"w-4 h-4 text-blue-400 animate-spin"}),N.url&&s.jsx(C,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:k=>{k.stopPropagation(),window.open(N.url,"_blank")},children:s.jsx(Je,{className:"w-4 h-4"})}),!a&&s.jsx(C,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-red-400 hover:text-red-300",onClick:k=>{k.stopPropagation(),g(N)},children:s.jsx(Et,{className:"w-4 h-4"})})]})]},N.id))]})}),t&&s.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(xe,{className:"w-3 h-3"}),s.jsxs("span",{children:["สามารถอัปโหลดได้สูงสุด ",t.max_files||e," ไฟล์"]})]}),t.due_date&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(xe,{className:"w-3 h-3"}),s.jsxs("span",{children:["กำหนดส่ง: ",new Date(t.due_date).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})]})},fb=({contentId:t,assignment:e,onComplete:r,onClose:n})=>{ge();const{toast:a}=se(),[i,o]=p.useState(!0),[l,d]=p.useState(e),[c,u]=p.useState([]),[h,m]=p.useState(null),[f,x]=p.useState(""),[b,g]=p.useState([]),[v,y]=p.useState(!1),[w,_]=p.useState(!1),[N,k]=p.useState("submit");p.useEffect(()=>{j()},[t]);const j=async()=>{var F;o(!0);try{if(!l){const{data:T,error:A}=await Ud(t);if(A)throw A;d(T)}if(l!=null&&l.id){const{data:T,error:A}=await Vd(l.id);if(A)throw A;if(u(T),T.length>0){const O=T[0];m(O),x(O.submission_text||""),g(((F=O.file_urls)==null?void 0:F.map((U,R)=>{var W,re;return{id:Date.now()+R,name:((W=O.file_names)==null?void 0:W[R])||`File ${R+1}`,size:((re=O.file_sizes)==null?void 0:re[R])||0,url:U,uploaded:!0}}))||[]),O.status==="submitted"||O.status==="graded"?k("view"):k("edit")}}}catch(T){console.error("Error loading assignment data:",T),a({title:"ไม่สามารถโหลดข้อมูลงานได้",description:T.message,variant:"destructive"})}finally{o(!1)}},S=async()=>{if(l){y(!0);try{const F={text:f,fileUrls:b.map(A=>A.url),fileNames:b.map(A=>A.name),fileSizes:b.map(A=>A.size)};let T;if(h&&h.status==="draft"?T=await Eo(h.id,F):T=await Co(l.id,{...F,status:"draft"}),T.error)throw T.error;m(T.data),a({title:"บันทึกแบบร่างแล้ว",description:"งานของคุณได้รับการบันทึกเป็นแบบร่างแล้ว"}),j()}catch(F){console.error("Error saving draft:",F),a({title:"ไม่สามารถบันทึกได้",description:F.message,variant:"destructive"})}finally{y(!1)}}},I=async()=>{if(l){if(!f.trim()&&b.length===0){a({title:"กรุณาเพิ่มเนื้อหา",description:"กรุณาเพิ่มข้อความหรืออัปโหลดไฟล์อย่างน้อย 1 รายการ",variant:"destructive"});return}_(!0);try{const F={text:f,fileUrls:b.map(A=>A.url),fileNames:b.map(A=>A.name),fileSizes:b.map(A=>A.size)};let T;if(h&&h.status==="draft"?(await Eo(h.id,F),T=await ib(h.id)):T=await Co(l.id,F),T.error)throw T.error;a({title:"ส่งงานสำเร็จ! 🎉",description:"งานของคุณได้รับการส่งเรียบร้อยแล้ว"}),r==null||r(T.data),k("view"),j()}catch(F){console.error("Error submitting assignment:",F),a({title:"ไม่สามารถส่งงานได้",description:F.message,variant:"destructive"})}finally{_(!1)}}},B=(l==null?void 0:l.due_date)&&new Date>new Date(l.due_date),H=N==="submit"||N==="edit",$=(h==null?void 0:h.status)==="submitted"||(h==null?void 0:h.status)==="graded";return i?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-400",children:"กำลังโหลดงานมอบหมาย..."})]})}):l?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:l.title}),s.jsx("p",{className:"text-slate-300",children:l.description})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[$&&s.jsxs("div",{className:"flex items-center space-x-1 text-green-400 text-sm",children:[s.jsx(kl,{className:"w-4 h-4"}),s.jsx("span",{children:"ส่งแล้ว"})]}),B&&!$&&s.jsxs("div",{className:"flex items-center space-x-1 text-red-400 text-sm",children:[s.jsx(Ct,{className:"w-4 h-4"}),s.jsx("span",{children:"เกินกำหนด"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 p-4 bg-slate-700/30 rounded-lg",children:[l.due_date&&s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[s.jsx(Ls,{className:"w-4 h-4 text-blue-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-400",children:"กำหนดส่ง"}),s.jsx("p",{className:"text-slate-200",children:new Date(l.due_date).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[s.jsx(Te,{className:"w-4 h-4 text-yellow-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-400",children:"คะแนนเต็ม"}),s.jsxs("p",{className:"text-slate-200",children:[l.max_score||100," คะแนน"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[s.jsx(J,{className:"w-4 h-4 text-purple-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-400",children:"จำนวนไฟล์สูงสุด"}),s.jsxs("p",{className:"text-slate-200",children:[l.max_files||5," ไฟล์"]})]})]})]})]}),l.instructions&&s.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[s.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"คำแนะนำ"}),s.jsx("div",{className:"text-slate-300 whitespace-pre-wrap leading-relaxed",children:l.instructions})]}),c.length>0&&s.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[s.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"ประวัติการส่งงาน"}),s.jsx("div",{className:"space-y-2",children:c.map((F,T)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"text-sm",children:[s.jsxs("span",{className:"text-slate-300",children:["ครั้งที่ ",F.attempt_number]}),s.jsx("span",{className:"ml-2 text-xs text-slate-400",children:new Date(F.submitted_at||F.created_at).toLocaleDateString("th-TH")})]}),s.jsxs("div",{className:`px-2 py-1 rounded text-xs ${F.status==="submitted"?"bg-green-500/20 text-green-400":F.status==="graded"?"bg-blue-500/20 text-blue-400":"bg-yellow-500/20 text-yellow-400"}`,children:[F.status==="submitted"&&"ส่งแล้ว",F.status==="graded"&&`ให้คะแนนแล้ว (${F.score}/${F.max_score})`,F.status==="draft"&&"แบบร่าง"]})]}),s.jsx(C,{size:"sm",variant:"ghost",onClick:()=>{var A;m(F),x(F.submission_text||""),g(((A=F.file_urls)==null?void 0:A.map((O,U)=>{var R,W;return{id:Date.now()+U,name:((R=F.file_names)==null?void 0:R[U])||`File ${U+1}`,size:((W=F.file_sizes)==null?void 0:W[U])||0,url:O,uploaded:!0}}))||[]),k("view")},children:s.jsx(dt,{className:"w-4 h-4"})})]},F.id))})]}),s.jsx(Ee,{mode:"wait",children:s.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass-effect rounded-lg overflow-hidden",children:[h&&s.jsx("div",{className:"border-b border-white/10 p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(C,{size:"sm",variant:N==="view"?"default":"ghost",onClick:()=>k("view"),children:[s.jsx(dt,{className:"w-4 h-4 mr-2"}),"ดูงาน"]}),!$&&s.jsxs(C,{size:"sm",variant:N==="edit"?"default":"ghost",onClick:()=>k("edit"),children:[s.jsx(Yt,{className:"w-4 h-4 mr-2"}),"แก้ไข"]})]})}),s.jsx("div",{className:"p-6",children:N==="view"?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-lg font-semibold text-white",children:"งานที่ส่ง"}),(h==null?void 0:h.submission_text)&&s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-medium text-slate-400 mb-2",children:"ข้อความ"}),s.jsx("div",{className:"p-4 bg-slate-700/30 rounded-lg text-slate-200 whitespace-pre-wrap",children:h.submission_text})]}),b.length>0&&s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-medium text-slate-400 mb-2",children:"ไฟล์แนบ"}),s.jsx("div",{className:"space-y-2",children:b.map(F=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[s.jsx("span",{className:"text-slate-200",children:F.name}),s.jsx(C,{size:"sm",variant:"ghost",onClick:()=>window.open(F.url,"_blank"),children:s.jsx(Je,{className:"w-4 h-4"})})]},F.id))})]}),(h==null?void 0:h.feedback)&&s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-medium text-slate-400 mb-2",children:"ความคิดเห็นจากอาจารย์"}),s.jsx("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg text-blue-200",children:h.feedback})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-white",children:h?"แก้ไขงาน":"ส่งงานมอบหมาย"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"ข้อความ/คำตอบ"}),s.jsx("textarea",{value:f,onChange:F=>x(F.target.value),disabled:!H,rows:8,className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:border-blue-500 focus:outline-none resize-none",placeholder:"เขียนคำตอบหรือคำอธิบายงานของคุณที่นี่..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-400 mb-2",children:"ไฟล์แนบ"}),s.jsx(mb,{assignment:l,maxFiles:l.max_files||5,onFilesChange:g,initialFiles:b,disabled:!H})]}),H&&s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/10",children:[s.jsx("div",{className:"text-xs text-slate-500",children:B&&s.jsxs("div",{className:"flex items-center space-x-1 text-amber-400",children:[s.jsx(Ct,{className:"w-3 h-3"}),s.jsx("span",{children:"การส่งงานหลังกำหนดอาจมีผลต่อคะแนน"})]})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(C,{variant:"outline",onClick:S,disabled:v||w,children:v?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"กำลังบันทึก..."]}):s.jsxs(s.Fragment,{children:[s.jsx(kr,{className:"w-4 h-4 mr-2"}),"บันทึกแบบร่าง"]})}),s.jsx(C,{onClick:I,disabled:v||w,className:"bg-green-500 hover:bg-green-600",children:w?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"กำลังส่ง..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Il,{className:"w-4 h-4 mr-2"}),"ส่งงาน"]})})]})]})]})})]},N)})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(J,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"ไม่พบงานมอบหมาย"}),s.jsx("p",{className:"text-slate-400",children:"ไม่สามารถโหลดข้อมูลงานมอบหมายได้"})]})},pb=()=>{var U,R,W,re,q;const{courseId:t}=wr(),{user:e}=ge(),{toast:r}=se(),[n,a]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState({isEnrolled:!1}),[c,u]=p.useState(null),[h,m]=p.useState(null),[f,x]=p.useState({}),[b,g]=p.useState(null),[v,y]=p.useState(!1),[w,_]=p.useState(null),[N,k]=p.useState(!1);p.useEffect(()=>{j(),e&&S()},[t,e]);const j=async()=>{o(!0),console.log("Loading course with ID:",t);try{const{data:D,error:V}=await $d(t);console.log("Course data received:",D,"Error:",V),V?(console.error("Course loading error:",V),r({title:"ข้อผิดพลาดในการโหลดข้อมูล",description:V.message,variant:"destructive"})):(a(D),console.log("Course set:",D),D!=null&&D.content&&D.content.length>0?(console.log("Auto-selecting first content:",D.content[0]),m(D.content[0])):console.log("No content found in course"))}catch(D){console.error("Unexpected error loading course:",D),r({title:"เกิดข้อผิดพลาดที่ไม่คาดคิด",description:D.message,variant:"destructive"})}finally{o(!1)}},S=async()=>{try{console.log("Checking enrollment for user:",e==null?void 0:e.id,"course:",t);const{isEnrolled:D,status:V,error:ee}=await Da(t);if(console.log("Enrollment result:",{isEnrolled:D,status:V,error:ee}),ee){console.error("Enrollment check error:",ee),r({title:"ไม่สามารถตรวจสอบการลงทะเบียนได้",description:ee.message,variant:"destructive"}),d({isEnrolled:!1,status:null});return}if(d({isEnrolled:D,status:V}),D){console.log("User is enrolled, loading progress...");const{data:Ie}=await Wv(t);if(console.log("Course progress data:",Ie),u(Ie),n!=null&&n.content){console.log("Loading content progress for",n.content.length,"items");const M={};for(const te of n.content)if(te.content_type==="video"){const{data:Q}=await Hv(te.id);M[te.id]=Q}console.log("Content progress map:",M),x(M)}}else console.log("User is not enrolled")}catch(D){console.error("Error in checkEnrollmentAndProgress:",D),r({title:"เกิดข้อผิดพลาดในการตรวจสอบ",description:D.message,variant:"destructive"})}},I=async D=>{if(m(D),y(!1),g(null),k(!1),_(null),D.content_type==="quiz"){const{data:V}=await Xv(D.id);V&&(g(V),y(!0))}if(D.content_type==="assignment"){const{data:V}=await Ud(D.id);V&&(_(V),k(!0))}},B=D=>{r({title:D.is_passed?"ยินดีด้วย! ผ่านแบบทดสอบ 🎉":"ไม่ผ่านแบบทดสอบ",description:`คะแนน: ${D.score}%`,variant:D.is_passed?"default":"destructive"}),S(),y(!1)},H=D=>{r({title:"ส่งงานสำเร็จ! 🎉",description:"งานของคุณได้รับการส่งเรียบร้อยแล้ว"}),S(),k(!1)},$=D=>{x(V=>({...V,[h.id]:D}))},F=(D,V=!1)=>{if(V)return s.jsx(Ue,{className:"w-5 h-5 text-green-400"});switch(D){case"video":return s.jsx(la,{className:"w-5 h-5 text-blue-400"});case"quiz":return s.jsx(Ht,{className:"w-5 h-5 text-yellow-400"});case"assignment":return s.jsx(J,{className:"w-5 h-5 text-purple-400"});case"document":return s.jsx(ue,{className:"w-5 h-5 text-green-400"});default:return s.jsx(J,{className:"w-5 h-5 text-gray-400"})}},T=D=>{if(!(c!=null&&c.content_progress))return 0;const V=c.content_progress.find(ee=>ee.id===D.id);if(D.content_type==="video"&&f[D.id]){const ee=f[D.id];return ee.total_duration>0?Math.round(ee.last_position/ee.total_duration*100):0}return V!=null&&V.is_completed?100:0},A=D=>{if(!(c!=null&&c.content_progress))return null;const V=c.content_progress.find(ee=>ee.id===D.id);return D.content_type==="quiz"||D.content_type==="assignment"?V!=null&&V.is_completed?V.score!==void 0&&V.is_passed!==void 0?{isCompleted:!0,isPassed:V.is_passed,score:V.score,type:D.content_type}:{isCompleted:!0,isPassed:!0,score:null,type:D.content_type}:null:V!=null&&V.is_completed?{isCompleted:!0,isPassed:!0,score:null,type:D.content_type}:null},O=(D,V)=>{if(V===0)return!1;const ee=n.content[V-1];return T(ee)<100};return i?s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#667eea] mx-auto mb-4"}),s.jsx("p",{className:"text-teal-700",children:"กำลังโหลดเนื้อหาคอร์ส..."}),s.jsxs("p",{className:"text-teal-700 text-sm mt-2",children:["Course ID: ",t]})]})}):n?l.isEnrolled?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0a192f] to-[#172a46]",children:[s.jsx(fe,{children:s.jsxs("title",{children:[n.title," - เรียน | Login Learning"]})}),s.jsx("div",{className:"bg-black/20 backdrop-blur-sm border-b border-white/10",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Y,{to:`/courses/${t}`,children:s.jsx(C,{variant:"ghost",size:"icon",className:"text-teal-900",children:s.jsx(As,{className:"w-5 h-5"})})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-teal-900",children:n.title}),c&&s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-teal-800",children:[s.jsxs("span",{children:["ความคืบหน้า: ",c.progress_percentage,"%"]}),s.jsx("span",{children:"•"}),s.jsxs("span",{children:[c.completed_count,"/",c.total_count," เนื้อหา"]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-teal-800",children:[s.jsx(le,{className:"w-4 h-4"}),s.jsxs("span",{children:[n.enrollment_count||0," คน"]})]})]})})}),s.jsx("div",{className:"container mx-auto px-4 py-6",children:s.jsxs("div",{className:"grid lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 sticky top-24",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 p-3 rounded-xl mr-4",children:s.jsx(ue,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"เนื้อหาในคอร์ส"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[((U=n.content)==null?void 0:U.length)||0," บทเรียน"]})]})]}),c&&s.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl border border-blue-200",children:[s.jsxs("div",{className:"flex justify-between text-sm font-semibold text-gray-700 mb-3",children:[s.jsx("span",{children:"🎯 ความคืบหน้าทั้งหมด"}),s.jsxs("span",{className:"text-indigo-600",children:[c.progress_percentage,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 shadow-inner",children:s.jsx("div",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 h-3 rounded-full transition-all duration-500 shadow-sm",style:{width:`${c.progress_percentage}%`}})}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-2",children:[s.jsx("span",{children:"เริ่มต้น"}),s.jsx("span",{children:"เสร็จสิ้น"})]})]}),s.jsx("div",{className:"space-y-3",children:(R=n.content)==null?void 0:R.map((D,V)=>{const ee=T(D),Ie=ee>=100,M=O(D,V),te=(h==null?void 0:h.id)===D.id,Q=A(D);return s.jsxs(P.div,{whileHover:{scale:M?1:1.02,y:M?0:-2},className:`group relative overflow-hidden rounded-xl border-2 transition-all duration-300 cursor-pointer ${te?"bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-300 shadow-lg":M?"bg-gray-100 border-gray-300 opacity-70":"bg-white border-gray-200 hover:border-indigo-300 hover:shadow-md"}`,onClick:()=>!M&&I(D),children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-full -translate-y-8 translate-x-8"})}),s.jsx("div",{className:"relative p-4",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsxs("div",{className:"flex-shrink-0",children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${te?"bg-gradient-to-r from-indigo-500 to-purple-500 shadow-lg":M?"bg-gray-300":Ie?"bg-gradient-to-r from-green-500 to-emerald-500 shadow-lg":"bg-gradient-to-r from-blue-500 to-cyan-500 shadow-md"}`,children:M?s.jsx(cr,{className:"w-6 h-6 text-gray-600"}):Ie?s.jsx(Ue,{className:"w-6 h-6 text-white"}):F(D.content_type,!1)}),s.jsx("div",{className:"text-center mt-2",children:s.jsxs("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${te?"bg-indigo-200 text-indigo-800":M?"bg-gray-200 text-gray-600":"bg-blue-100 text-blue-700"}`,children:["#",V+1]})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:`text-sm font-bold mb-1 line-clamp-2 ${M?"text-gray-600":"text-gray-800"}`,children:D.title}),D.description&&s.jsx("p",{className:`text-xs mb-2 line-clamp-2 ${M?"text-gray-500":"text-gray-600"}`,children:D.description})]}),Q&&s.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${Q.isPassed?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[Q.isPassed?s.jsx(Ue,{className:"w-3 h-3"}):s.jsx(ks,{className:"w-3 h-3"}),s.jsxs("span",{children:[Q.type==="quiz"||Q.type==="assignment"?Q.isPassed?"ผ่าน":"ไม่ผ่าน":"เสร็จแล้ว",Q.score!==null&&` ${Q.score}%`]})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[D.duration_minutes>0&&s.jsxs("div",{className:`flex items-center text-xs ${M?"text-gray-500":"text-gray-600"}`,children:[s.jsx(ve,{className:"w-3 h-3 mr-1"}),s.jsxs("span",{className:"font-medium",children:[D.duration_minutes," นาที"]})]}),!M&&ee>0&&ee<100&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-1.5",children:s.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${ee}%`}})}),s.jsxs("span",{className:"text-xs font-medium text-indigo-600",children:[Math.round(ee),"%"]})]})]})]})]})}),te&&s.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-indigo-500 to-purple-500"})]},D.id)})})]})}),s.jsxs("div",{className:"lg:col-span-3",children:[s.jsx(Ee,{mode:"wait",children:h&&s.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 p-6 text-white",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:F(h.content_type,!1)}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:h.title}),h.duration_minutes>0&&s.jsxs("div",{className:"flex items-center text-indigo-100 mt-1",children:[s.jsx(ve,{className:"w-4 h-4 mr-1"}),s.jsxs("span",{children:[h.duration_minutes," นาที"]})]})]})]}),s.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2",children:s.jsxs("div",{className:"text-sm font-medium",children:["ความคืบหน้า: ",Math.round(T(h)),"%"]})})]}),h.description&&s.jsx("div",{className:"mt-4 p-4 bg-white/10 rounded-xl backdrop-blur-sm",children:s.jsx("p",{className:"text-indigo-100",children:h.description})})]}),s.jsxs("div",{className:"p-6",children:[h.content_type==="video"&&h.content_url&&s.jsx(Kv,{src:h.content_url,contentId:h.id,title:h.title,onProgress:$,initialTime:((W=f[h.id])==null?void 0:W.last_position)||0}),v&&b&&s.jsx(nb,{quiz:b,onComplete:B,onClose:()=>y(!1)}),h.content_type==="document"&&s.jsxs("div",{className:"space-y-4",children:[h.content_url&&s.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-slate-700/30 rounded-lg",children:[s.jsx(J,{className:"w-8 h-8 text-blue-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-teal-900 font-medium",children:"เอกสารประกอบการเรียน"}),s.jsx("p",{className:"text-teal-700 text-sm",children:"คลิกเพื่อดาวน์โหลด"})]}),s.jsxs(C,{variant:"outline",size:"sm",children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"ดาวน์โหลด"]})]}),h.description&&s.jsx("div",{className:"prose prose-invert max-w-none",children:s.jsx("div",{className:"text-teal-800 leading-relaxed",children:h.description})})]}),N&&w&&s.jsx(fb,{contentId:h.id,assignment:w,onComplete:H,onClose:()=>k(!1)}),h.content_type==="assignment"&&!N&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(J,{className:"w-16 h-16 text-purple-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-teal-900 mb-2",children:"งานมอบหมาย"}),s.jsx("p",{className:"text-teal-700 mb-4",children:"กำลังโหลดข้อมูลงานมอบหมาย..."})]}),!["video","quiz","document","assignment"].includes(h.content_type)&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ue,{className:"w-16 h-16 text-teal-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-teal-900 mb-2",children:"เนื้อหาพิเศษ"}),s.jsx("p",{className:"text-teal-700",children:"ประเภทเนื้อหานี้จะพร้อมใช้งานเร็วๆ นี้"})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-white/10",children:s.jsx(Fa,{contentId:h.id,compact:!1,className:"attachments-section"})})]})]},h.id)}),!h&&((re=n.content)==null?void 0:re.length)>0&&s.jsxs("div",{className:"glass-effect rounded-xl p-12 text-center",children:[s.jsx(ue,{className:"w-16 h-16 text-teal-700 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-teal-900 mb-2",children:"เลือกเนื้อหาที่ต้องการเรียน"}),s.jsx("p",{className:"text-teal-700",children:"เลือกเนื้อหาจากรายการด้านซ้ายเพื่อเริ่มเรียน"})]}),((q=n.content)==null?void 0:q.length)===0&&s.jsxs("div",{className:"glass-effect rounded-xl p-12 text-center",children:[s.jsx(ue,{className:"w-16 h-16 text-teal-700 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-teal-900 mb-2",children:"ยังไม่มีเนื้อหา"}),s.jsx("p",{className:"text-teal-700",children:"เนื้อหาคอร์สจะถูกเพิ่มเร็วๆ นี้"})]})]})]})})]}):s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-teal-900 mb-2",children:"คุณยังไม่ได้ลงทะเบียนคอร์สนี้"}),s.jsx("p",{className:"text-teal-700 mb-4",children:"กรุณาลงทะเบียนก่อนเรียน"}),s.jsxs("div",{className:"text-teal-700 text-sm mb-4",children:[s.jsxs("p",{children:["Course: ",n==null?void 0:n.title]}),s.jsxs("p",{children:["User: ",e==null?void 0:e.email]}),s.jsxs("p",{children:["Enrollment Status: ",JSON.stringify(l)]})]}),s.jsx(Y,{to:`/courses/${t}`,children:s.jsx(C,{children:"ไปหน้าลงทะเบียน"})})]})}):s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-teal-900 mb-2",children:"ไม่พบข้อมูลคอร์ส"}),s.jsxs("p",{className:"text-teal-700 mb-4",children:["Course ID: ",t]}),s.jsxs("p",{className:"text-teal-700 text-sm mb-4",children:["Loading: ",i?"true":"false"]}),s.jsx(Y,{to:"/courses",children:s.jsx(C,{variant:"outline",children:"กลับไปหน้าคอร์สทั้งหมด"})})]})})},xb=()=>{const t={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},e=[{title:"Arduino & IoT Workshop",duration:"5 วัน",participants:"15-20 คน",description:"เรียนรู้การสร้างระบบ IoT และการควบคุมอุปกรณ์ด้วย Arduino",features:["ปฏิบัติการจริง","อุปกรณ์ครบชุด","โปรเจคจริง"],price:"12,500 บาท",category:"Electronics"},{title:"React Native Mobile Development",duration:"7 วัน",participants:"12-18 คน",description:"สร้างแอปพลิเคชันมือถือด้วย React Native จากเริ่มต้นจนเสร็จสมบูรณ์",features:["สร้างแอปจริง","Deploy ขึ้น Store","Portfolio Project"],price:"18,000 บาท",category:"Software"},{title:"Structural Design Intensive",duration:"10 วัน",participants:"10-15 คน",description:"การออกแบบโครงสร้างอาคารเชิงลึกด้วยซอฟต์แวร์มืออาชีพ",features:["AutoCAD + SAP2000","โปรเจคจริง","ใบรับรอง"],price:"25,000 บาท",category:"Civil Engineering"}],r=[{icon:le,title:"เรียนแบบกลุ่มเล็ก",description:"จำนวนผู้เรียนจำกัด เพื่อการดูแลที่ใกล้ชิด"},{icon:Tr,title:"ปฏิบัติการจริง",description:"70% ปฏิบัติ 30% ทฤษฎี เน้นการทำงานจริง"},{icon:Te,title:"ใบรับรองการเรียน",description:"รับใบรับรองหลังจบคอร์สทุกหลักสูตร"},{icon:ue,title:"เอกสารประกอบ",description:"เอกสาร E-book และอุปกรณ์ครบชุด"}],n=["ห้องเรียนปรับอากาศ พร้อมเครื่องมือครบชุด","คอมพิวเตอร์และซอฟต์แวร์ลิขสิทธิ์แท้","Wi-Fi ความเร็วสูง และพื้นที่จอดรถ","พื้นที่พักผ่อนและอาหารกลางวัน","ห้องสมุดและพื้นที่ทำงานกลุ่ม"];return s.jsxs(P.div,{initial:"initial",animate:"in",exit:"out",variants:t,className:"min-h-screen pt-20",children:[s.jsxs(fe,{children:[s.jsx("title",{children:"การเรียน Onsite - Login Learning"}),s.jsx("meta",{name:"description",content:"หลักสูตรการเรียนแบบ Onsite ณ สถาบัน Login Learning พร้อมปฏิบัติการจริงและอุปกรณ์ครบชุด"})]}),s.jsxs("section",{className:"relative overflow-hidden py-20",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-100/50 to-blue-200/30"}),s.jsx("div",{className:"container mx-auto px-4 relative",children:s.jsxs(P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8},className:"text-center max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-700 to-blue-500 rounded-full flex items-center justify-center",children:s.jsx(Jt,{className:"w-10 h-10 text-blue-800"})})}),s.jsxs("h1",{className:"text-4xl lg:text-6xl font-bold text-black mb-6",children:["การเรียน ",s.jsx("span",{className:"gradient-text",children:"Onsite"})]}),s.jsx("p",{className:"text-xl text-black mb-8 leading-relaxed",children:"เรียนรู้แบบเข้มข้นกับอาจารย์ผู้เชี่ยวชาญ ปฏิบัติการจริง พร้อมอุปกรณ์ครบชุด ณ ศูนย์การเรียนรู้ Login Learning"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsxs(C,{size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600",children:[s.jsx(Ls,{className:"w-5 h-5 mr-2"}),"จองหลักสูตร Onsite"]}),s.jsxs(C,{size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50",children:[s.jsx(kt,{className:"w-5 h-5 mr-2"}),"สอบถามข้อมูล"]})]})]})})]}),s.jsx("section",{className:"py-20",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs(P.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},className:"text-center mb-16",children:[s.jsxs("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:["ทำไมต้องเรียน ",s.jsx("span",{className:"gradient-text",children:"Onsite"})]}),s.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:"การเรียนแบบ Onsite ให้ประสบการณ์การเรียนรู้ที่เข้มข้นและมีประสิทธิภาพสูงสุด"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:r.map((a,i)=>s.jsxs(P.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.6,delay:i*.1},className:"glass-effect p-6 rounded-xl text-center hover:transform hover:scale-105 transition-all duration-300",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-700 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(a.icon,{className:"w-8 h-8 text-blue-800"})}),s.jsx("h3",{className:"text-xl font-bold text-black mb-3",children:a.title}),s.jsx("p",{className:"text-black",children:a.description})]},i))})]})}),s.jsx("section",{className:"py-20 bg-gradient-to-r from-blue-50/80 to-blue-100/60",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs(P.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},className:"text-center mb-16",children:[s.jsxs("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:["หลักสูตร ",s.jsx("span",{className:"gradient-text",children:"Onsite"})," ยอดนิยม"]}),s.jsx("p",{className:"text-xl text-black max-w-3xl mx-auto",children:"หลักสูตรเข้มข้นที่ได้รับความนิยมสูงสุด พร้อมปฏิบัติการจริง"})]}),s.jsx("div",{className:"grid lg:grid-cols-3 gap-8",children:e.map((a,i)=>s.jsxs(P.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.6,delay:i*.2},className:"glass-effect p-6 rounded-xl hover:transform hover:scale-105 transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-blue-700 to-blue-500 text-gray-800 text-sm rounded-full",children:a.category}),s.jsxs("div",{className:"flex items-center text-yellow-400",children:[s.jsx(dr,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"text-sm",children:"ยอดนิยม"})]})]}),s.jsx("h3",{className:"text-xl font-bold text-black mb-3",children:a.title}),s.jsx("p",{className:"text-black mb-4",children:a.description}),s.jsxs("div",{className:"space-y-2 mb-6",children:[s.jsxs("div",{className:"flex items-center text-black",children:[s.jsx(ve,{className:"w-4 h-4 mr-2"}),s.jsxs("span",{children:["ระยะเวลา: ",a.duration]})]}),s.jsxs("div",{className:"flex items-center text-black",children:[s.jsx(le,{className:"w-4 h-4 mr-2"}),s.jsxs("span",{children:["ผู้เรียน: ",a.participants]})]})]}),s.jsx("div",{className:"space-y-2 mb-6",children:a.features.map((o,l)=>s.jsxs("div",{className:"flex items-center text-blue-600",children:[s.jsx(Ue,{className:"w-4 h-4 mr-2"}),s.jsx("span",{className:"text-sm",children:o})]},l))}),s.jsxs("div",{className:"border-t border-slate-300 pt-4 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-2xl font-bold text-black",children:a.price}),s.jsx("span",{className:"text-black text-sm block",children:"รวมอุปกรณ์ทั้งหมด"})]}),s.jsx(C,{className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600",children:"สอบถาม"})]})]},i))})]})}),s.jsx("section",{className:"py-20",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[s.jsxs(P.div,{initial:{x:-30,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.8},children:[s.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:"สิ่งอำนวยความสะดวก"}),s.jsx("p",{className:"text-xl text-black mb-8",children:"ศูนย์การเรียนรู้ที่ทันสมัย พร้อมสิ่งอำนวยความสะดวกครบครัน"}),s.jsx("div",{className:"space-y-4",children:n.map((a,i)=>s.jsxs(P.div,{initial:{x:-20,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.6,delay:i*.1},className:"flex items-center",children:[s.jsx(Ue,{className:"w-5 h-5 text-blue-600 mr-3 flex-shrink-0"}),s.jsx("span",{className:"text-black",children:a})]},i))})]}),s.jsx(P.div,{initial:{x:30,opacity:0},whileInView:{x:0,opacity:1},transition:{duration:.8},className:"glass-effect p-8 rounded-xl",children:s.jsxs("div",{className:"text-center",children:[s.jsx(sm,{className:"w-16 h-16 text-blue-600 mx-auto mb-6"}),s.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:"ที่ตั้งศูนย์การเรียน"}),s.jsxs("div",{className:"space-y-3 text-black",children:[s.jsx("p",{children:s.jsx("strong",{children:"สำนักงานใหญ่:"})}),s.jsxs("p",{children:["123 ถนนเทคโนโลยี แขวงนวัตกรรม",s.jsx("br",{}),"เขตดิจิทัล กรุงเทพฯ 10400"]}),s.jsx("div",{className:"pt-4 border-t border-slate-300",children:s.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(kt,{className:"w-4 h-4 mr-2 text-blue-600"}),s.jsx("span",{children:"02-xxx-xxxx"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ye,{className:"w-4 h-4 mr-2 text-blue-600"}),s.jsx("span",{children:"onsite@loginlearning.com"})]})]})})]})]})})]})})}),s.jsx("section",{className:"py-20 bg-gradient-to-r from-blue-100/60 to-blue-200/40",children:s.jsx("div",{className:"container mx-auto px-4 text-center",children:s.jsxs(P.div,{initial:{y:30,opacity:0},whileInView:{y:0,opacity:1},transition:{duration:.8},className:"max-w-3xl mx-auto",children:[s.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-black mb-6",children:"พร้อมเริ่มต้นการเรียนรู้แบบ Onsite แล้วหรือยัง?"}),s.jsx("p",{className:"text-xl text-black mb-8",children:"ติดต่อเราวันนี้เพื่อสอบถามข้อมูลและจองที่นั่งในหลักสูตรที่คุณสนใจ"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsxs(C,{size:"lg",className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600",children:[s.jsx(kt,{className:"w-5 h-5 mr-2"}),"ติดต่อเราเลย"]}),s.jsx(C,{size:"lg",variant:"outline",className:"border-blue-300 text-blue-700 hover:bg-blue-50",asChild:!0,children:s.jsxs(Y,{to:"/contact",children:[s.jsx(Ye,{className:"w-5 h-5 mr-2"}),"ส่งข้อความถึงเรา"]})})]})]})})})]})},gb=()=>{const[t,e]=p.useState({}),r=(l,d)=>{const c=`${l}-${d}`;e(u=>({...u,[c]:!u[c]}))},n=[{faculty:"คณะวิศวกรรมศาสตร์ (หลักสูตรไทย)",icon:wm,subtitle:"ข้อมูลเบื้องต้นรอบ Portfolio (โปรดตรวจสอบประกาศล่าสุดจากมหาวิทยาลัย)",universities:[{name:"จุฬาลงกรณ์มหาวิทยาลัย",shortName:"จุฬาฯ",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",gpax:"≥ 3.00-3.50",exams:"TPAT3, TGAT",intake:"~600-700 คน",fee:"~21,000 บาท/เทอม",website:"https://www.eng.chula.ac.th/",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ จุฬาฯ",recommendedMajors:["วิศวกรรมคอมพิวเตอร์: GPAX ≥ 3.50, Portfolio ผลงานเด่น, TPAT3","วิศวกรรมไฟฟ้า: GPAX ≥ 3.25, Portfolio, TPAT3"],portfolioRounds:"~327 คน",quotaRounds:"~38 คน",admissionRounds:"~240 คน"},{name:"มหาวิทยาลัยเกษตรศาสตร์",shortName:"เกษตรฯ",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/5/51/Logo_ku_th.svg/1200px-Logo_ku_th.svg.png",fallbackLogo:"https://placehold.co/60x60/D4A017/FFFFFF?text=KU&font=bold",gpax:"≥ 2.75-3.25",exams:"TPAT3, TGAT",intake:"~1400+ คน",fee:"~17,000 บาท/เทอม",website:"https://www.eng.ku.ac.th/",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ เกษตรฯ",recommendedMajors:["วิศวกรรมคอมพิวเตอร์: GPAX ≥ 3.25, Portfolio","วิศวกรรมการบินและอวกาศ: GPAX ≥ 3.00, Portfolio"],portfolioRounds:"~791 คน",quotaRounds:"~181 คน",admissionRounds:"~390 คน"},{name:"มหาวิทยาลัยเทคโนโลยีพระจอมเกล้าธนบุรี",shortName:"มจธ.",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/7/76/Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg/1200px-Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg.png",fallbackLogo:"https://placehold.co/60x60/F28500/FFFFFF?text=KMUTT&font=bold",gpax:"≥ 2.75-3.00",exams:"TGAT, TPAT3 (บางโครงการ)",intake:"~900+ คน",fee:"~25,000 บาท/เทอม",website:"https://eng.kmutt.ac.th/",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ มจธ.",recommendedMajors:["วิศวกรรมคอมพิวเตอร์: GPAX ≥ 3.00, Portfolio"],portfolioRounds:"~725 คน",quotaRounds:"~170 คน",admissionRounds:"~63 คน"},{name:"สถาบันเทคโนโลยีพระจอมเกล้าเจ้าคุณทหารลาดกระบัง",shortName:"สจล.",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/e/e4/Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg/1200px-Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg.png",fallbackLogo:"https://placehold.co/60x60/E36414/FFFFFF?text=KMITL&font=bold",gpax:"≥ 2.75",exams:"TPAT3, TGAT",intake:"~600+ คน",fee:"~20,000 บาท/เทอม",website:"https://www.reg.kmitl.ac.th/index/faculty_engineer.php",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ สจล.",recommendedMajors:["วิศวกรรมคอมพิวเตอร์: GPAX ≥ 3.00, Portfolio"],portfolioRounds:"~200 คน",quotaRounds:"~54 คน",admissionRounds:"~403 คน"},{name:"มหาวิทยาลัยเทคโนโลยีพระจอมเกล้าพระนครเหนือ",shortName:"มจพ.",logo:"https://www.eng.kmutnb.ac.th/wp-content/uploads/2019/08/LOGO-KMUTNB--300x300.png",fallbackLogo:"https://placehold.co/60x60/C00000/FFFFFF?text=KMUTNB&font=bold",gpax:"≥ 2.75",exams:"TGAT/TPAT (บางโครงการ)",intake:"~600+ คน",fee:"~18,000 บาท/เทอม",website:"https://www.eng.kmutnb.ac.th/",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ มจพ.",recommendedMajors:["วิศวกรรมการผลิต: GPAX ≥ 2.75, Portfolio"],portfolioRounds:"~371 คน",quotaRounds:"~124 คน",admissionRounds:"~40 คน"},{name:"มหาวิทยาลัยเชียงใหม่",shortName:"มช.",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/d/db/Chiang_Mai_University.svg/1200px-Chiang_Mai_University.svg.png",fallbackLogo:"https://placehold.co/60x60/7B1FA2/FFFFFF?text=CMU&font=bold",gpax:"≥ 2.75-3.00",exams:"TGAT, TPAT3",intake:"~1100+ คน",fee:"~20,000 บาท/เทอม",website:"https://www.eng.cmu.ac.th/",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ มช.",recommendedMajors:["วิศวกรรมคอมพิวเตอร์: GPAX ≥ 3.00, Portfolio"],portfolioRounds:"~352 คน",quotaRounds:"~225 คน",admissionRounds:"~350 คน"},{name:"มหาวิทยาลัยขอนแก่น",shortName:"มข.",logo:"https://www.kku.ac.th/wp-content/uploads/2022/01/1.-official-logo-2022-26.png",fallbackLogo:"https://placehold.co/60x60/D32F2F/FFFFFF?text=KKU&font=bold",gpax:"≥ 2.75",exams:"TGAT/TPAT (บางโครงการ)",intake:"~600+ คน",fee:"~18,000 บาท/เทอม",website:"https://eng.kku.ac.th/",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ มข.",recommendedMajors:["วิศวกรรมคอมพิวเตอร์: GPAX ≥ 3.00, Portfolio"],portfolioRounds:"~326 คน",quotaRounds:"~152 คน",admissionRounds:"~118 คน"},{name:"มหาวิทยาลัยสงขลานครินทร์",shortName:"มอ.",logo:"https://huso.psu.ac.th/th/wp-content/uploads/2023/04/PSU_Logo_text_Eng_Color_2.png",fallbackLogo:"https://placehold.co/60x60/0277BD/FFFFFF?text=PSU&font=bold",gpax:"≥ 2.75",exams:"TGAT/TPAT (บางโครงการ)",intake:"~1000+ คน",fee:"~22,000 บาท/เทอม",website:"https://www.eng.psu.ac.th/",websiteText:"เว็บไซต์คณะวิศวกรรมศาสตร์ มอ.",recommendedMajors:["วิศวกรรมคอมพิวเตอร์: GPAX ≥ 3.00, Portfolio"],portfolioRounds:"~594 คน",quotaRounds:"~210 คน",admissionRounds:"~100 คน"}]},{faculty:"คณะวิศวกรรมศาสตร์ (หลักสูตรนานาชาติ)",icon:im,subtitle:"ข้อมูลเบื้องต้นรอบ Portfolio (โปรดตรวจสอบประกาศล่าสุดจากมหาวิทยาลัย)",universities:[{name:"จุฬาลงกรณ์มหาวิทยาลัย",shortName:"ISE Chula",subtitle:"ISE (International School of Engineering)",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",requirements:"IELTS: ≥ 6.0, TOEFL iBT: ≥ 80, SAT Math: ≥ 620",intake:"~180-200 คน (รวมทุกสาขา)",fee:"~84,000 บาท/เทอม",website:"https://www.google.com/search?client=safari&rls=en&q=ISE+Chula&ie=UTF-8&oe=UTF-8",websiteText:"เว็บไซต์ ISE Chula",recommendedMajors:["Aerospace Engineering: GPAX ≥ 3.5, Strong Math/Physics, IELTS ≥ 6.5, SAT Math ≥ 650","Robotics and AI: GPAX ≥ 3.5, Strong Math/Programming, IELTS ≥ 6.5, SAT Math ≥ 650"]},{name:"มหาวิทยาลัยเกษตรศาสตร์",shortName:"IUP Kasetsart",subtitle:"IUP (International Undergraduate Program)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/5/51/Logo_ku_th.svg/1200px-Logo_ku_th.svg.png",fallbackLogo:"https://placehold.co/60x60/D4A017/FFFFFF?text=KU&font=bold",gpax:"≥ 2.75",requirements:"IELTS: ≥ 5.5, TOEFL iBT: ≥ 61",intake:"~100-150 คน (รวมทุกสาขา)",fee:"~70,000 บาท/เทอม",website:"https://iup.eng.ku.ac.th",websiteText:"เว็บไซต์ IUP Kasetsart",recommendedMajors:["Software and Knowledge Engineering: GPAX ≥ 3.00, IELTS ≥ 5.5, Portfolio (เน้น Project ด้าน Software)","Electrical Engineering: GPAX ≥ 2.75, IELTS ≥ 5.5, Portfolio (เน้นความสนใจด้านไฟฟ้า)"]},{name:"มหาวิทยาลัยมหิดล",shortName:"Mahidol Eng",subtitle:"Faculty of Engineering (International Programs)",logo:"https://upload.wikimedia.org/wikipedia/commons/4/45/Mahidol_U.png",fallbackLogo:"https://placehold.co/60x60/1565C0/FFFFFF?text=MU&font=bold",gpax:"≥ 3.00",requirements:"IELTS: ≥ 6.0, TOEFL iBT: ≥ 64",intake:"~80-120 คน (รวมทุกสาขา)",fee:"~90,000 บาท/เทอม",website:"https://www.eg.mahidol.ac.th",websiteText:"เว็บไซต์ EG Mahidol Inter",recommendedMajors:["Biomedical Engineering: GPAX ≥ 3.25, IELTS ≥ 6.0, Portfolio (เน้นชีววิทยา, เคมี)","Computer Engineering: GPAX ≥ 3.00, IELTS ≥ 6.0, Portfolio (เน้น Programming, Math)"]},{name:"มหาวิทยาลัยเทคโนโลยีพระจอมเกล้าธนบุรี",shortName:"SIIE KMUTT",subtitle:"SIIE (School of International and Interdisciplinary Engineering)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/7/76/Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg/1200px-Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg.png",fallbackLogo:"https://placehold.co/60x60/F28500/FFFFFF?text=KMUTT&font=bold",gpax:"≥ 3.00",requirements:"IELTS ≥ 5.5 / TOEFL",intake:"~150-200 คน",fee:"~80,000 บาท/เทอม",website:"https://www.eng.kmitl.ac.th/siie-international-programs/",websiteText:"เว็บไซต์ SIIE KMUTT",recommendedMajors:["Computer Engineering (Inter): GPAX ≥ 3.00, IELTS ≥ 5.5, Portfolio"]},{name:"สถาบันเทคโนโลยีพระจอมเกล้าเจ้าคุณทหารลาดกระบัง",shortName:"Inter KMITL",subtitle:"School of Engineering (International Programs)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/e/e4/Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg/1200px-Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg.png",fallbackLogo:"https://placehold.co/60x60/E36414/FFFFFF?text=KMITL&font=bold",gpax:"≥ 3.00",requirements:"IELTS ≥ 5.5 / TOEFL",intake:"~100-150 คน",fee:"~75,000 บาท/เทอม",website:"https://oia.kmitl.ac.th/oia/international-programs/",websiteText:"เว็บไซต์ Inter KMITL",recommendedMajors:["Robotics & AI Engineering (Inter): GPAX ≥ 3.00, IELTS ≥ 5.5, Portfolio"]}]},{faculty:"คณะวิทยาศาสตร์ (สาขาคอมพิวเตอร์และที่เกี่ยวข้อง)",icon:tm,subtitle:"ข้อมูลเบื้องต้นรอบ Portfolio (โปรดตรวจสอบประกาศล่าสุดจากมหาวิทยาลัย)",universities:[{name:"จุฬาลงกรณ์มหาวิทยาลัย",shortName:"จุฬาฯ วิทยาศาสตร์",subtitle:"คณะวิทยาศาสตร์ สาขาวิทยาการคอมพิวเตอร์",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",gpax:"≥ 3.25-3.5 (ตามโครงการ)",intake:"~20-30 คน",fee:"~21,000 บาท/เทอม",website:"https://www.chula.ac.th/academic/faculty-of-science/",websiteText:"เว็บไซต์คณะวิทยาศาสตร์ จุฬาฯ",recommendedMajors:["AI & Machine Learning: GPAX ≥ 3.5, Portfolio (โครงงาน AI/ML), รางวัล สอวน. คอมฯ","Software Development: GPAX ≥ 3.25, Portfolio (ผลงาน Application/Web)"]},{name:"มหาวิทยาลัยเกษตรศาสตร์",shortName:"เกษตรฯ วิทยาศาสตร์",subtitle:"คณะวิทยาศาสตร์ สาขาวิทยาการคอมพิวเตอร์",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/5/51/Logo_ku_th.svg/1200px-Logo_ku_th.svg.png",fallbackLogo:"https://placehold.co/60x60/D4A017/FFFFFF?text=KU&font=bold",gpax:"≥ 3.00 (ตามโครงการ)",intake:"~30-50 คน",fee:"~17,000 บาท/เทอม",website:"https://sci.ku.ac.th/web2024/",websiteText:"เว็บไซต์คณะวิทยาศาสตร์ เกษตรฯ",recommendedMajors:["Data Science: GPAX ≥ 3.00, Portfolio (โครงงานวิเคราะห์ข้อมูล), ความรู้สถิติ/โปรแกรมมิ่ง","Game Development: GPAX ≥ 3.00, Portfolio (ผลงานเกม, Art, Story)"]},{name:"มหาวิทยาลัยเทคโนโลยีพระจอมเกล้าธนบุรี",shortName:"มจธ. วิทยาศาสตร์",subtitle:"คณะวิทยาศาสตร์ สาขาวิทยาการคอมพิวเตอร์ (หลักสูตรภาษาอังกฤษ)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/7/76/Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg/1200px-Seal_of_King_Mongkut%27s_University_of_Technology_Thonburi.svg.png",fallbackLogo:"https://placehold.co/60x60/F28500/FFFFFF?text=KMUTT&font=bold",gpax:"≥ 3.00",requirements:"IELTS ≥ 5.5 / TOEFL iBT ≥ 61",intake:"~50 คน",fee:"~40,000 บาท/เทอม",website:"https://www.kmutt.ac.th/education/curriculum/faculty-of-science/",websiteText:"เว็บไซต์คณะวิทยาศาสตร์ มจธ.",recommendedMajors:["Computer Science (English Program): เน้นความรู้พื้นฐานและประยุกต์ด้านวิทยาการคอมพิวเตอร์","AI & Data Analytics: พัฒนาทักษะการเขียนโปรแกรม การวิเคราะห์ข้อมูล และ AI"]}]},{faculty:"คณะเทคโนโลยีสารสนเทศและการสื่อสาร (ICT)",icon:Yt,subtitle:"ข้อมูลเบื้องต้นรอบ Portfolio (โปรดตรวจสอบประกาศล่าสุดจากมหาวิทยาลัย)",universities:[{name:"มหาวิทยาลัยมหิดล",shortName:"ICT Mahidol",subtitle:"คณะ ICT (หลักสูตรนานาชาติ)",logo:"https://upload.wikimedia.org/wikipedia/commons/4/45/Mahidol_U.png",fallbackLogo:"https://placehold.co/60x60/1565C0/FFFFFF?text=MU&font=bold",gpax:"≥ 3.00",requirements:"IELTS ≥ 6.0 / TOEFL iBT ≥ 64",intake:"~150-200 คน",fee:"~60,000 บาท/เทอม",website:"https://www.ict.mahidol.ac.th",websiteText:"เว็บไซต์ ICT Mahidol",recommendedMajors:["Cybersecurity: GPAX ≥ 3.00, IELTS ≥ 6.0, Portfolio (ความสนใจด้านความปลอดภัย)","Data Science (Track): GPAX ≥ 3.25, IELTS ≥ 6.0, Portfolio (โครงงาน Data)"]},{name:"จุฬาลงกรณ์มหาวิทยาลัย",shortName:"CEDT Chula",subtitle:"วิศวกรรมคอมพิวเตอร์และเทคโนโลยีดิจิทัล (CEDT - Inter)",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Logo_of_Chulalongkorn_University.svg/1200px-Logo_of_Chulalongkorn_University.svg.png",fallbackLogo:"https://placehold.co/60x60/005A9C/FFFFFF?text=CU&font=bold",gpax:"≥ 3.50",requirements:"IELTS ≥ 6.5 / TOEFL iBT ≥ 80, SAT Math ≥ 700",intake:"~40-50 คน",fee:"~110,000 บาท/เทอม",website:"https://www.cp.eng.chula.ac.th/cedt",websiteText:"เว็บไซต์ CEDT Chula",recommendedMajors:["Digital Technology & Innovation: GPAX ≥ 3.5, IELTS ≥ 6.5, SAT Math ≥ 700, Portfolio (เน้นนวัตกรรม)"]},{name:"สถาบันเทคโนโลยีพระจอมเกล้าเจ้าคุณทหารลาดกระบัง",shortName:"IT KMITL",subtitle:"คณะเทคโนโลยีสารสนเทศ (IT KMITL)",logo:"https://upload.wikimedia.org/wikipedia/th/thumb/e/e4/Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg/1200px-Seal_of_King_Mongkut%27s_Institute_of_Technology_Ladkrabang.svg.png",fallbackLogo:"https://placehold.co/60x60/E36414/FFFFFF?text=KMITL&font=bold",gpax:"≥ 2.75-3.00 (ตามสาขา)",intake:"~100-200 คน",fee:"~35,000 บาท/เทอม",website:"https://www.it.kmitl.ac.th/th/program/",websiteText:"เว็บไซต์ IT KMITL",recommendedMajors:["เทคโนโลยีสารสนเทศ (IT): GPAX ≥ 2.75, Portfolio","วิทยาการข้อมูล (Data Science): GPAX ≥ 3.00, Portfolio"]}]}],a={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},i={type:"tween",ease:"anticipate",duration:.5},o=["from-blue-500 to-indigo-500","from-green-500 to-teal-500","from-purple-500 to-violet-500","from-orange-500 to-red-500"];return s.jsxs(P.div,{initial:"initial",animate:"in",exit:"out",variants:a,transition:i,className:"pt-24 pb-16 px-6",children:[s.jsxs(fe,{children:[s.jsx("title",{children:"ข้อมูลการรับเข้ามหาวิทยาลัย - Login Learning"}),s.jsx("meta",{name:"description",content:"ข้อมูลการรับเข้าคณะวิศวกรรมศาสตร์และสาขาที่เกี่ยวข้องในมหาวิทยาลัยชั้นนำ สำหรับรอบ Portfolio (ข้อมูลเบื้องต้น)"})]}),s.jsxs("section",{className:"pt-8 mb-12",children:[s.jsxs(P.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-center mb-10",children:[s.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-4",children:["ข้อมูลการรับเข้า ",s.jsx("span",{className:"gradient-text",children:"มหาวิทยาลัย"})]}),s.jsx("p",{className:"text-xl text-gray-700 max-w-3xl mx-auto",children:"ภาพรวมเกณฑ์การรับสมัครคณะวิศวกรรมศาสตร์และสาขาใกล้เคียงในมหาวิทยาลัยชั้นนำ (ข้อมูลสำหรับรอบ Portfolio และอาจมีการเปลี่ยนแปลง)"})]}),n.map((l,d)=>s.jsxs(P.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:d*.1+.3},viewport:{once:!0},className:"mb-16",children:[s.jsxs("div",{className:`flex items-center mb-6 p-6 rounded-xl bg-gradient-to-r ${o[d%o.length]} shadow-lg`,children:[s.jsx(l.icon,{className:"w-10 h-10 text-white mr-4"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-white",children:l.faculty}),s.jsx("p",{className:"text-white/90 text-sm mt-1",children:l.subtitle})]})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:l.universities.map((c,u)=>{const h=`${d}-${u}`,m=t[h];return s.jsxs(P.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{duration:.4,delay:u*.05},viewport:{once:!0},className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-200",children:[s.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("img",{className:"w-12 h-12 mr-4 rounded-full object-contain bg-white p-1 shadow-sm border-2 border-white",alt:`โลโก้ ${c.name}`,src:c.logo,onError:f=>{f.target.src=c.fallbackLogo}}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:c.shortName}),c.subtitle&&s.jsx("p",{className:"text-blue-600 text-sm font-medium",children:c.subtitle})]})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"space-y-3 text-sm text-gray-700 mb-4",children:[c.gpax&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ml,{className:"w-4 h-4 mr-3 text-blue-500"}),s.jsxs("span",{children:[s.jsx("strong",{children:"GPAX:"})," ",c.gpax]})]}),c.exams&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(Yt,{className:"w-4 h-4 mr-3 text-green-500"}),s.jsxs("span",{children:[s.jsx("strong",{children:"คะแนนสอบ:"})," ",c.exams]})]}),c.requirements&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(Tr,{className:"w-4 h-4 mr-3 text-yellow-500"}),s.jsxs("span",{children:[s.jsx("strong",{children:"คุณสมบัติ:"})," ",c.requirements]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(le,{className:"w-4 h-4 mr-3 text-purple-500"}),s.jsxs("span",{children:[s.jsx("strong",{children:"จำนวนรับ:"})," ",c.intake]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(ar,{className:"w-4 h-4 mr-3 text-red-500"}),s.jsxs("span",{children:[s.jsx("strong",{children:"ค่าเทอม:"})," ",c.fee]})]})]}),c.recommendedMajors&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("button",{onClick:()=>r(d,u),className:"flex items-center justify-between w-full p-3 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Te,{className:"w-4 h-4 mr-2 text-indigo-600"}),s.jsx("span",{className:"text-sm font-medium text-indigo-800",children:"สาขายอดฮิตและข้อมูลเพิ่มเติม"})]}),m?s.jsx(Tl,{className:"w-4 h-4 text-indigo-600"}):s.jsx(Sl,{className:"w-4 h-4 text-indigo-600"})]}),m&&s.jsxs(P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"mt-3 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"สาขายอดฮิต:"}),s.jsx("ul",{className:"space-y-2 text-xs text-gray-700",children:c.recommendedMajors.map((f,x)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"w-2 h-2 bg-indigo-400 rounded-full mt-1.5 mr-2 flex-shrink-0"}),s.jsx("span",{children:f})]},x))}),c.portfolioRounds&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"จำนวนรับรอบ Portfolio:"}),s.jsxs("div",{className:"text-xs text-gray-700 space-y-1",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ve,{className:"w-3 h-3 mr-2 text-blue-500"}),s.jsxs("span",{children:["รอบ 1 Portfolio: ",c.portfolioRounds]})]}),c.quotaRounds&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(ve,{className:"w-3 h-3 mr-2 text-green-500"}),s.jsxs("span",{children:["รอบ 2 Quota: ",c.quotaRounds]})]}),c.admissionRounds&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(ve,{className:"w-3 h-3 mr-2 text-orange-500"}),s.jsxs("span",{children:["รอบ 3 Admission: ",c.admissionRounds]})]})]})]})]})]}),c.website&&s.jsxs(C,{onClick:()=>window.open(c.website,"_blank","noopener,noreferrer"),className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white py-3 rounded-xl font-semibold transition-all duration-200 shadow-md hover:shadow-lg",children:[s.jsx(ir,{className:"w-4 h-4 mr-2"}),c.websiteText]})]})]},u)})})]},d)),s.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5+n.length*.1},className:"mt-12 text-center p-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"ข้อควรทราบสำคัญ"}),s.jsxs("p",{className:"text-gray-700 text-sm leading-relaxed max-w-4xl mx-auto",children:["ข้อมูลจำนวนรับและเกณฑ์การคัดเลือกอาจมีการเปลี่ยนแปลงในแต่ละปีการศึกษา ควรตรวจสอบข้อมูลล่าสุดจากประกาศอย่างเป็นทางการของ ",s.jsx("strong",{children:"TCAS"})," หรือ",s.jsx("strong",{children:"มหาวิทยาลัยโดยตรง"}),"เสมอ"]}),s.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[s.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:"Portfolio"}),s.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"GPAX"}),s.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium",children:"สัมภาษณ์"}),s.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-medium",children:"คะแนนสอบ"})]})]})]})]})},Bd=Z.forwardRef(({className:t,...e},r)=>s.jsx("textarea",{className:Qe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));Bd.displayName="Textarea";const yb=()=>{const{toast:t}=se(),e={address:"917 จรัญสนิทวงศ์ 75 บางพลัด บางพลัด, กรุงเทพฯ",contacts:[{name:"พี่ก้อง",phone:"090-969-9578"},{name:"พี่เก็ก",phone:"083-436-0294"}],email:"info@loginlearning.com",lineGroup:"https://line.me/ti/g/TbTTLXEkRS"},r=[{name:"สาขาลาดกระบัง",address:"ถนนฉลองกรุง ลาดกระบัง, กรุงเทพฯ 10520"},{name:"สาขาบางพลัด",address:"400 ซ.จรัญสนิทวงศ์ 75 แขวงบางพลัด, กรุงเทพฯ 10700"},{name:"สาขาศรีราชา",address:"165/31 อำเภอศรีราชา ชลบุรี 20110"},{name:"สาขาระยอง",address:"84/48 อำเภอเมืองระยอง ระยอง 21000"}],n=o=>{o.preventDefault(),t({title:"🚧 ระบบส่งข้อความยังไม่พร้อมใช้งาน",description:"ขออภัยในความไม่สะดวก กรุณาติดต่อเราผ่านช่องทางอื่นที่ระบุไว้ 🚀"})},a={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},i={type:"tween",ease:"anticipate",duration:.5};return s.jsxs(P.div,{initial:"initial",animate:"in",exit:"out",variants:a,transition:i,className:"pt-24 pb-16 px-6",children:[s.jsxs(fe,{children:[s.jsx("title",{children:"ติดต่อเรา - Login Learning"}),s.jsx("meta",{name:"description",content:"ติดต่อ Login Learning เพื่อสอบถามข้อมูลคอร์สเรียน บริการ หรือขอคำปรึกษาด้านวิศวกรรม"})]}),s.jsxs("section",{className:"pt-8 mb-12",children:[s.jsxs(P.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.7,delay:.2},className:"text-center mb-10",children:[s.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-4",children:["ติดต่อ ",s.jsx("span",{className:"gradient-text",children:"Login Learning"})]}),s.jsx("p",{className:"text-xl text-gray-700 max-w-2xl mx-auto",children:"มีคำถาม? ต้องการคำแนะนำ? หรือสนใจคอร์สเรียน? ติดต่อเราได้เลย!"})]}),s.jsxs("div",{className:"max-w-6xl mx-auto grid lg:grid-cols-2 gap-12",children:[s.jsxs(P.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.7,delay:.4},className:"glass-effect p-8 rounded-xl shadow-xl",children:[s.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-6",children:"ส่งข้อความถึงเรา"}),s.jsxs("form",{onSubmit:n,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-800 mb-1",children:"ชื่อ-นามสกุล"}),s.jsx(ce,{type:"text",id:"name",placeholder:"เช่น สมชาย ใจดี",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-800 mb-1",children:"อีเมล"}),s.jsx(ce,{type:"email",id:"email",placeholder:"เช่น somchai.j@example.com",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-800 mb-1",children:"หัวข้อ"}),s.jsx(ce,{type:"text",id:"subject",placeholder:"เช่น สอบถามเกี่ยวกับคอร์ส Arduino",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-800 mb-1",children:"ข้อความ"}),s.jsx(Bd,{id:"message",rows:"4",placeholder:"พิมพ์ข้อความของคุณที่นี่...",className:"text-black bg-white/90 focus:bg-white",required:!0})]}),s.jsxs(C,{type:"submit",size:"lg",className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[s.jsx(Il,{className:"w-5 h-5 mr-2"}),"ส่งข้อความ"]})]})]}),s.jsxs(P.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{duration:.7,delay:.6},className:"space-y-8",children:[s.jsxs("div",{className:"glass-effect p-8 rounded-xl shadow-xl",children:[s.jsx("h2",{className:"text-3xl font-semibold text-gray-900 mb-6",children:"ข้อมูลติดต่อ"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Jt,{className:"w-6 h-6 text-blue-400 mt-1 shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"ที่ตั้งสำนักงานใหญ่"}),s.jsx("p",{className:"text-gray-700",children:e.address})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(kt,{className:"w-6 h-6 text-green-400 mt-1 shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"เบอร์โทรศัพท์"}),e.contacts.map(o=>s.jsxs("p",{className:"text-gray-700",children:[o.name,": ",o.phone]},o.name))]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Ye,{className:"w-6 h-6 text-yellow-400 mt-1 shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"อีเมล"}),s.jsx("a",{href:`mailto:${e.email}`,className:"text-gray-700 hover:text-yellow-600 transition-colors",children:e.email})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(le,{className:"w-6 h-6 text-teal-400 mt-1 shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Line Group"}),s.jsx("a",{href:e.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"text-gray-700 hover:text-teal-600 transition-colors underline",children:"คลิกเพื่อเข้าร่วมกลุ่ม Line"})]})]})]})]}),s.jsxs("div",{className:"glass-effect p-8 rounded-xl shadow-xl",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"สาขาที่เปิดบริการ"}),s.jsx("div",{className:"space-y-3",children:r.map(o=>s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(Jt,{className:"w-5 h-5 text-purple-400 mt-1 shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-md font-medium text-gray-800",children:o.name}),s.jsx("p",{className:"text-sm text-gray-600",children:o.address})]})]},o.name))})]})]})]})]}),s.jsxs("section",{className:"mt-16",children:[s.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.7,delay:.8},className:"text-center mb-6",children:s.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"ค้นหาเราบนแผนที่"})}),s.jsx(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.7,delay:1},className:"glass-effect rounded-xl p-4 shadow-xl h-96 flex items-center justify-center",children:s.jsx("p",{className:"text-gray-700 text-lg",children:"🚧 แผนที่กำลังจะมาเร็วๆ นี้! 🚧"})})]})]})},vb=()=>{const[t,e]=p.useState(""),[r,n]=p.useState(""),[a,i]=p.useState(!1),[o,l]=p.useState(""),{signInWithPassword:d,signInWithGoogle:c,isSupabaseConnected:u}=ge(),h=jr(),{toast:m}=se(),f=async v=>{if(v.preventDefault(),l(""),!u){m({title:"⚠️ ยังไม่ได้เชื่อมต่อ Supabase",description:"โปรดเชื่อมต่อ Supabase ก่อนทำการเข้าสู่ระบบ",variant:"destructive"});return}i(!0);const{error:y}=await d(t,r);i(!1),y?(l(y.message),m({title:"เข้าสู่ระบบไม่สำเร็จ",description:y.message,variant:"destructive"})):(m({title:"เข้าสู่ระบบสำเร็จ!"}),h("/dashboard"))},x=async()=>{if(l(""),!u){m({title:"⚠️ ยังไม่ได้เชื่อมต่อ Supabase",description:"โปรดเชื่อมต่อ Supabase ก่อนทำการเข้าสู่ระบบด้วย Google",variant:"destructive"});return}i(!0);const{error:v}=await c();i(!1),v&&(l(v.message),m({title:"เข้าสู่ระบบด้วย Google ไม่สำเร็จ",description:v.message,variant:"destructive"}))},b={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},g={type:"tween",ease:"anticipate",duration:.5};return s.jsxs(P.div,{initial:"initial",animate:"in",exit:"out",variants:b,transition:g,className:"min-h-screen flex items-center justify-center pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:[s.jsxs(fe,{children:[s.jsx("title",{children:"เข้าสู่ระบบ - Login Learning"}),s.jsx("meta",{name:"description",content:"เข้าสู่ระบบบัญชี Login Learning ของคุณเพื่อเข้าถึงคอร์สเรียนและติดตามความก้าวหน้า"})]}),s.jsxs("div",{className:"max-w-md w-full space-y-8 glass-effect p-10 rounded-xl shadow-2xl",children:[s.jsxs("div",{children:[s.jsx(P.h2,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mt-6 text-center text-4xl font-extrabold text-gray-900",children:"เข้าสู่ระบบ"}),s.jsxs(P.p,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"mt-2 text-center text-sm text-gray-700",children:["หรือ"," ",s.jsx(Y,{to:"/signup",className:"font-medium text-blue-400 hover:text-blue-300",children:"สร้างบัญชีใหม่"})]})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[o&&s.jsxs(P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 p-3 rounded-md flex items-center text-red-300 text-sm",children:[s.jsx(xe,{className:"w-5 h-5 mr-2"}),o]}),s.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s.jsxs(P.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.3},children:[s.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"อีเมล"}),s.jsxs("div",{className:"relative",children:[s.jsx(ce,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-t-md",placeholder:"อีเมล",value:t,onChange:v=>e(v.target.value)}),s.jsx(Ye,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),s.jsxs(P.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.4},children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"รหัสผ่าน"}),s.jsxs("div",{className:"relative",children:[s.jsx(ce,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-b-md",placeholder:"รหัสผ่าน",value:r,onChange:v=>n(v.target.value)}),s.jsx(cr,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]})]}),s.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},className:"flex items-center justify-between",children:s.jsx("div",{className:"text-sm",children:s.jsx("a",{href:"#",onClick:()=>m({title:"🚧 ฟีเจอร์นี้ยังไม่พร้อมใช้งาน"}),className:"font-medium text-blue-400 hover:text-blue-300",children:"ลืมรหัสผ่าน?"})})}),s.jsx(P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.6},children:s.jsxs(C,{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-gray-800 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:a||!u,children:[s.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:s.jsx(hm,{className:"h-5 w-5 text-blue-300 group-hover:text-blue-200","aria-hidden":"true"})}),a?"กำลังเข้าสู่ระบบ...":"เข้าสู่ระบบ"]})})]}),s.jsxs(P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.7},className:"mt-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-700"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-gray-800 text-gray-400 rounded-md",children:"หรือเข้าสู่ระบบด้วย"})})]}),s.jsx("div",{className:"mt-6",children:s.jsxs(C,{onClick:x,variant:"outline",className:"w-full flex justify-center py-3 px-4 border-gray-300 text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:a||!u,children:[s.jsx("svg",{className:"w-5 h-5 mr-2","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:s.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.7 512 244 512 110.3 512 0 401.7 0 265.2S110.3 18.3 244 18.3c67.4 0 120.9 24.8 160.4 60.3l-64.8 63.1c-20.1-18.9-48.4-30.8-89.3-30.8-70.1 0-128.2 57.2-128.2 128.2s58.1 128.2 128.2 128.2c80.3 0 110.1-58.8 113.8-87.9H244v-74.6h236.7c2.3 12.7 3.8 25.9 3.8 39.9z"})}),"เข้าสู่ระบบด้วย Google"]})})]}),!u&&s.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-4 text-center text-yellow-400 text-sm p-3 bg-yellow-500/10 rounded-md",children:"⚠️ Supabase ยังไม่ได้เชื่อมต่อ! กรุณาเชื่อมต่อ Supabase ในหน้าตั้งค่าเพื่อเปิดใช้งานระบบ Login"})]})]})},bb=()=>{const[t,e]=p.useState(""),[r,n]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState(""),[d,c]=p.useState(!1),[u,h]=p.useState(""),{signUpWithPassword:m,signInWithGoogle:f,isSupabaseConnected:x}=ge(),b=jr(),{toast:g}=se(),v=async N=>{if(N.preventDefault(),h(""),!x){g({title:"⚠️ ยังไม่ได้เชื่อมต่อ Supabase",description:"โปรดเชื่อมต่อ Supabase ก่อนทำการสมัครสมาชิก",variant:"destructive"});return}if(r!==a){h("รหัสผ่านไม่ตรงกัน"),g({title:"ข้อผิดพลาด",description:"รหัสผ่านและการยืนยันรหัสผ่านไม่ตรงกัน",variant:"destructive"});return}c(!0);const{error:k}=await m(t,r,o);c(!1),k?(h(k.message),g({title:"สมัครสมาชิกไม่สำเร็จ",description:k.message,variant:"destructive"})):(g({title:"สมัครสมาชิกสำเร็จ!",description:"กรุณาตรวจสอบอีเมลของคุณเพื่อยืนยันบัญชี"}),b("/login"))},y=async()=>{if(h(""),!x){g({title:"⚠️ ยังไม่ได้เชื่อมต่อ Supabase",description:"โปรดเชื่อมต่อ Supabase ก่อนทำการสมัครสมาชิกด้วย Google",variant:"destructive"});return}c(!0);const{error:N}=await f();c(!1),N&&(h(N.message),g({title:"สมัครสมาชิกด้วย Google ไม่สำเร็จ",description:N.message,variant:"destructive"}))},w={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},_={type:"tween",ease:"anticipate",duration:.5};return s.jsxs(P.div,{initial:"initial",animate:"in",exit:"out",variants:w,transition:_,className:"min-h-screen flex items-center justify-center pt-24 pb-12 px-4 sm:px-6 lg:px-8",children:[s.jsxs(fe,{children:[s.jsx("title",{children:"สมัครสมาชิก - Login Learning"}),s.jsx("meta",{name:"description",content:"สร้างบัญชี Login Learning ใหม่เพื่อเริ่มต้นการเรียนรู้และค้นพบศักยภาพด้านวิศวกรรม"})]}),s.jsxs("div",{className:"max-w-md w-full space-y-8 glass-effect p-10 rounded-xl shadow-2xl",children:[s.jsxs("div",{children:[s.jsx(P.h2,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mt-6 text-center text-4xl font-extrabold text-gray-900",children:"สร้างบัญชีใหม่"}),s.jsxs(P.p,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"mt-2 text-center text-sm text-gray-700",children:["หรือ"," ",s.jsx(Y,{to:"/login",className:"font-medium text-blue-400 hover:text-blue-300",children:"เข้าสู่ระบบหากมีบัญชีแล้ว"})]})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:v,children:[u&&s.jsxs(P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 p-3 rounded-md flex items-center text-red-300 text-sm",children:[s.jsx(xe,{className:"w-5 h-5 mr-2"}),u]}),s.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[s.jsxs(P.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.3},children:[s.jsx("label",{htmlFor:"full-name",className:"sr-only",children:"ชื่อ-นามสกุล"}),s.jsxs("div",{className:"relative",children:[s.jsx(ce,{id:"full-name",name:"fullName",type:"text",autoComplete:"name",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"ชื่อ-นามสกุล",value:o,onChange:N=>l(N.target.value)}),s.jsx(_s,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),s.jsxs(P.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.4},children:[s.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"อีเมล"}),s.jsxs("div",{className:"relative",children:[s.jsx(ce,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"อีเมล",value:t,onChange:N=>e(N.target.value)}),s.jsx(Ye,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),s.jsxs(P.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.5},children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"รหัสผ่าน"}),s.jsxs("div",{className:"relative",children:[s.jsx(ce,{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"รหัสผ่าน (อย่างน้อย 6 ตัวอักษร)",value:r,onChange:N=>n(N.target.value)}),s.jsx(cr,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]}),s.jsxs(P.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,delay:.6},children:[s.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"ยืนยันรหัสผ่าน"}),s.jsxs("div",{className:"relative",children:[s.jsx(ce,{id:"confirm-password",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm rounded-md",placeholder:"ยืนยันรหัสผ่าน",value:a,onChange:N=>i(N.target.value)}),s.jsx(cr,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"})]})]})]}),s.jsx(P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.7},children:s.jsxs(C,{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-gray-800 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:d||!x,children:[s.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:s.jsx(Dl,{className:"h-5 w-5 text-blue-300 group-hover:text-blue-200","aria-hidden":"true"})}),d?"กำลังสร้างบัญชี...":"สร้างบัญชี"]})})]}),s.jsxs(P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.8},className:"mt-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-700"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-gray-800 text-gray-400 rounded-md",children:"หรือสมัครด้วย"})})]}),s.jsx("div",{className:"mt-6",children:s.jsxs(C,{onClick:y,variant:"outline",className:"w-full flex justify-center py-3 px-4 border-gray-300 text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 focus:ring-offset-gray-900",disabled:d||!x,children:[s.jsx("svg",{className:"w-5 h-5 mr-2","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:s.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.7 512 244 512 110.3 512 0 401.7 0 265.2S110.3 18.3 244 18.3c67.4 0 120.9 24.8 160.4 60.3l-64.8 63.1c-20.1-18.9-48.4-30.8-89.3-30.8-70.1 0-128.2 57.2-128.2 128.2s58.1 128.2 128.2 128.2c80.3 0 110.1-58.8 113.8-87.9H244v-74.6h236.7c2.3 12.7 3.8 25.9 3.8 39.9z"})}),"สมัครด้วย Google"]})})]}),!x&&s.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"mt-4 text-center text-yellow-400 text-sm p-3 bg-yellow-500/10 rounded-md",children:"⚠️ Supabase ยังไม่ได้เชื่อมต่อ! กรุณาเชื่อมต่อ Supabase ในหน้าตั้งค่าเพื่อเปิดใช้งานระบบสมัครสมาชิก"})]})]})},wb=()=>{var l;const{user:t,isAdmin:e}=ge(),{toast:r}=se(),n=jr(),a=(d,c)=>{c?n(c):r({title:`🚧 ฟีเจอร์ "${d}" ยังไม่พร้อมใช้งาน`,description:"เรากำลังพัฒนาฟีเจอร์นี้อยู่ โปรดรอติดตาม! 🚀"})},i={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};if(!t)return s.jsx("div",{className:"min-h-screen flex items-center justify-center pt-24 pb-12 px-4",children:s.jsx("p",{className:"text-green-900 text-xl",children:"กำลังโหลดข้อมูลผู้ใช้..."})});const o=[{name:"คอร์สของฉัน",icon:ue,color:"blue",description:"ดูคอร์สที่คุณกำลังเรียนและติดตามความคืบหน้า",path:"/courses"},{name:"โปรไฟล์ของฉัน",icon:Ol,color:"green",description:"อัปเดตข้อมูลส่วนตัวและรูปโปรไฟล์ของคุณ",path:"/profile"},{name:"ความคืบหน้า",icon:jl,color:"purple",description:"ติดตามความก้าวหน้าในการเรียนรู้ของคุณ",path:null},{name:"การแจ้งเตือน",icon:em,color:"yellow",description:"ดูการแจ้งเตือนล่าสุดและข่าวสารจากเรา",path:null},{name:"ตั้งค่าบัญชี",icon:ca,color:"indigo",description:"จัดการการตั้งค่าบัญชีและความปลอดภัย",path:null}];return e&&o.push({name:"แผงควบคุมผู้ดูแลระบบ",icon:Pl,color:"red",description:"จัดการผู้ใช้, คอร์สเรียน, และเนื้อหาเว็บไซต์",path:"/admin",gridSpan:"lg:col-span-2"}),s.jsxs(P.div,{initial:"initial",animate:"in",exit:"out",variants:i,className:"container mx-auto px-4 py-12",children:[s.jsxs(fe,{children:[s.jsx("title",{children:"แดชบอร์ด - Login Learning"}),s.jsx("meta",{name:"description",content:"แดชบอร์ดส่วนตัวของคุณใน Login Learning จัดการคอร์สเรียนและโปรไฟล์"})]}),s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsxs(P.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mb-10",children:[s.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold text-green-900",children:["ยินดีต้อนรับ, ",s.jsx("span",{className:"gradient-text",children:((l=t.user_metadata)==null?void 0:l.full_name)||t.email}),"!"]}),e&&s.jsx("p",{className:"text-yellow-400 text-md sm:text-lg mt-2",children:"คุณกำลังเข้าสู่ระบบในฐานะผู้ดูแลระบบ"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map((d,c)=>s.jsxs(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,delay:.15+c*.05},className:`glass-effect p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 ease-in-out transform hover:-translate-y-1 ${d.gridSpan||""}`,onClick:()=>a(d.name,d.path),children:[s.jsxs("div",{className:`flex items-center text-${d.color}-400 mb-3`,children:[s.jsx(d.icon,{className:"w-7 h-7 mr-3"}),s.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-green-900",children:d.name})]}),s.jsx("p",{className:"text-green-700 text-sm mb-4",children:d.description}),s.jsx(C,{variant:"outline",className:`w-full border-${d.color}-500/60 text-${d.color}-400 hover:bg-${d.color}-500/20`,children:d.path?d.name==="โปรไฟล์ของฉัน"?"แก้ไขโปรไฟล์":`ไปยัง${d.name}`:"ดูรายละเอียด"})]},d.name))})]})]})},jb=()=>{var f,x,b;const{user:t,isAdmin:e}=ge(),{toast:r}=se(),[n,a]=Z.useState(!1),[i,o]=Z.useState(((f=t==null?void 0:t.user_metadata)==null?void 0:f.full_name)||""),[l,d]=Z.useState((t==null?void 0:t.email)||""),c=()=>{r({title:"🚧 ฟีเจอร์บันทึกโปรไฟล์ยังไม่พร้อมใช้งาน",description:"คุณสามารถขอให้เพิ่มฟีเจอร์นี้ในข้อความถัดไปได้! 🚀"}),a(!1)},u=g=>{r({title:`🚧 ฟีเจอร์ "${g}" ยังไม่พร้อมใช้งาน`,description:"เรากำลังพัฒนาฟีเจอร์นี้อยู่ โปรดรอติดตาม! 🚀"})},h={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},m={type:"tween",ease:"anticipate",duration:.5};return t?s.jsxs(P.div,{initial:"initial",animate:"in",exit:"out",variants:h,transition:m,className:"container mx-auto px-4 py-12",children:[s.jsxs(fe,{children:[s.jsx("title",{children:"โปรไฟล์ของฉัน - Login Learning"}),s.jsx("meta",{name:"description",content:"จัดการข้อมูลโปรไฟล์และตั้งค่าบัญชีของคุณที่ Login Learning"})]}),s.jsxs(P.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mb-10 text-center",children:[s.jsxs("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900",children:["โปรไฟล์ของ ",s.jsx("span",{className:"gradient-text",children:((x=t.user_metadata)==null?void 0:x.full_name)||t.email})]}),e&&s.jsx("p",{className:"text-yellow-400 mt-2",children:"สถานะ: ผู้ดูแลระบบ"})]}),s.jsxs("div",{className:"max-w-2xl mx-auto glass-effect p-6 sm:p-8 rounded-xl shadow-xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"ข้อมูลส่วนตัว"}),s.jsxs(C,{variant:"outline",onClick:()=>a(!n),className:"text-gray-700 border-gray-400 hover:bg-gray-100 hover:text-gray-900",children:[s.jsx(Yt,{className:"w-4 h-4 mr-2"}),n?"ยกเลิก":"แก้ไขโปรไฟล์"]})]}),n?s.jsxs("form",{onSubmit:g=>{g.preventDefault(),c()},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"ชื่อ-นามสกุล"}),s.jsxs("div",{className:"relative",children:[s.jsx(_s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),s.jsx(ce,{id:"fullName",type:"text",value:i,onChange:g=>o(g.target.value),className:"pl-10 bg-white border-gray-300 text-gray-900 focus:border-blue-500 focus:ring-blue-200"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"อีเมล"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),s.jsx(ce,{id:"email",type:"email",value:l,onChange:g=>d(g.target.value),disabled:!0,className:"pl-10 bg-gray-100 border-gray-300 text-gray-600 cursor-not-allowed"})]}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"ไม่สามารถแก้ไขอีเมลได้"})]}),s.jsx(C,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:"บันทึกการเปลี่ยนแปลง"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(_s,{className:"w-5 h-5 mr-3 text-[#667eea]"}),s.jsxs("span",{className:"text-gray-800",children:["ชื่อ-นามสกุล: ",((b=t.user_metadata)==null?void 0:b.full_name)||"ไม่ได้ระบุ"]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ye,{className:"w-5 h-5 mr-3 text-[#667eea]"}),s.jsxs("span",{className:"text-gray-800",children:["อีเมล: ",t.email]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(_m,{className:"w-5 h-5 mr-3 text-[#667eea]"}),s.jsx("span",{className:"text-gray-800",children:"สถานะบัญชี: ยืนยันแล้ว"})]})]})]}),s.jsxs("div",{className:"max-w-2xl mx-auto mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-effect p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>u("คอร์สเรียนของฉัน"),children:[s.jsxs("div",{className:"flex items-center text-blue-300 mb-3",children:[s.jsx(ue,{className:"w-7 h-7 mr-3"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"คอร์สเรียนของฉัน"})]}),s.jsx("p",{className:"text-gray-700 text-sm",children:"ดูและจัดการคอร์สที่คุณลงทะเบียน"})]}),s.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-effect p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>u("ความคืบหน้าการเรียน"),children:[s.jsxs("div",{className:"flex items-center text-green-300 mb-3",children:[s.jsx(jl,{className:"w-7 h-7 mr-3"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"ความคืบหน้า"})]}),s.jsx("p",{className:"text-gray-700 text-sm",children:"ติดตามความก้าวหน้าในการเรียนของคุณ"})]})]})]}):s.jsx("div",{className:"text-center py-10",children:"กำลังโหลดข้อมูลผู้ใช้..."})},Nb=({isOpen:t,onClose:e})=>{const[r,n]=p.useState([]),[a,i]=p.useState(!1),o=[{name:"Supabase Connection",test:async()=>{if(!E)throw new Error("Supabase client not initialized");const{error:u}=await E.from("courses").select("count").limit(1);if(u)throw u;return"Connected successfully"}},{name:"Courses Table Access",test:async()=>{const{data:u,error:h}=await E.from("courses").select("id, title, is_active").limit(1);if(h)throw h;return`Found ${(u==null?void 0:u.length)||0} courses (limited to 1)`}},{name:"User Authentication",test:async()=>{const{data:{user:u},error:h}=await E.auth.getUser();if(h)throw h;return u?`Authenticated as: ${u.email}`:"Not authenticated"}},{name:"RLS Policies Check",test:async()=>{const{data:u,error:h}=await E.from("courses").select("id, title").eq("is_active",!0).limit(1);if(h)throw new Error(`RLS Error: ${h.message}`);return`RLS working, can access ${(u==null?void 0:u.length)||0} active courses`}},{name:"Enrollments Table Access",test:async()=>{const{data:u,error:h}=await E.from("enrollments").select("count").limit(1);if(h)throw h;return"Enrollments table accessible"}},{name:"Storage Access",test:async()=>{const{data:u,error:h}=await E.storage.listBuckets();if(h)throw h;return(u==null?void 0:u.find(f=>f.name==="course-files"))?"Storage buckets accessible":"course-files bucket not found"}}],l=async()=>{i(!0);const u=[];for(const h of o)try{const m=await h.test();u.push({name:h.name,status:"success",message:m})}catch(m){u.push({name:h.name,status:"error",message:m.message})}n(u),i(!1)};p.useEffect(()=>{t&&l()},[t]);const d=u=>{switch(u){case"success":return s.jsx(Ue,{className:"w-5 h-5 text-green-400"});case"error":return s.jsx(ks,{className:"w-5 h-5 text-red-400"});case"warning":return s.jsx(Ct,{className:"w-5 h-5 text-yellow-400"});default:return s.jsx(El,{className:"w-5 h-5 text-slate-400"})}},c=async()=>{console.log("Attempting to fix common issues...");try{await E.auth.refreshSession(),console.log("Session refreshed")}catch(u){console.error("Failed to refresh session:",u)}l()};return t?s.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:s.jsxs(P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"glass-effect p-6 rounded-xl w-full max-w-2xl max-h-[80vh] overflow-y-auto",onClick:u=>u.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center",children:[s.jsx(oa,{className:"w-6 h-6 mr-2 text-[#667eea]"}),"Database Health Check"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(C,{variant:"outline",size:"sm",onClick:l,disabled:a,children:[s.jsx(Rl,{className:`w-4 h-4 mr-1 ${a?"animate-spin":""}`}),"Refresh"]}),s.jsx(C,{variant:"ghost",size:"sm",onClick:e,children:"✕"})]})]}),a&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#667eea] mx-auto mb-4"}),s.jsx("p",{className:"text-slate-400",children:"Running health checks..."})]}),!a&&r.length>0&&s.jsxs("div",{className:"space-y-4",children:[r.map((u,h)=>s.jsxs(P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.1},className:`
                  p-4 rounded-lg border-2 transition-colors
                  ${u.status==="success"?"border-green-500/30 bg-green-500/10":u.status==="error"?"border-red-500/30 bg-red-500/10":"border-yellow-500/30 bg-yellow-500/10"}
                `,children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-center",children:[d(u.status),s.jsx("h3",{className:"font-medium text-white ml-3",children:u.name})]})}),s.jsx("p",{className:`
                  text-sm mt-2 ml-8
                  ${u.status==="success"?"text-green-300":u.status==="error"?"text-red-300":"text-yellow-300"}
                `,children:u.message})]},u.name)),s.jsxs("div",{className:"mt-6 p-4 bg-slate-800/50 rounded-lg",children:[s.jsx("h3",{className:"font-medium text-white mb-2",children:"Summary"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-green-400",children:r.filter(u=>u.status==="success").length}),s.jsx("div",{className:"text-sm text-slate-400",children:"Passed"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:r.filter(u=>u.status==="warning").length}),s.jsx("div",{className:"text-sm text-slate-400",children:"Warnings"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-red-400",children:r.filter(u=>u.status==="error").length}),s.jsx("div",{className:"text-sm text-slate-400",children:"Failed"})]})]})]}),r.some(u=>u.status==="error")&&s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsx(C,{onClick:c,className:"bg-[#667eea] hover:bg-[#5a6fcf]",children:"Try Auto-Fix"})}),s.jsxs("div",{className:"mt-6 p-4 bg-slate-700/30 rounded-lg",children:[s.jsx("h3",{className:"font-medium text-white mb-2",children:"Troubleshooting Tips"}),s.jsxs("ul",{className:"text-sm text-slate-400 space-y-1",children:[s.jsx("li",{children:"• Check if your internet connection is stable"}),s.jsx("li",{children:"• Verify Supabase project is active and not paused"}),s.jsx("li",{children:"• Ensure RLS policies allow public access to courses table"}),s.jsx("li",{children:"• Check if any recent schema changes broke compatibility"}),s.jsx("li",{children:"• Verify storage buckets are properly configured"})]})]})]})]})}):null},_b=()=>{const{user:t}=ge(),{toast:e}=se(),[r,n]=p.useState(!1),a=[{name:"จัดการผู้ใช้",icon:le,path:"/admin/users",color:"sky"},{name:"จัดการคอร์สเรียน",icon:nr,path:"/admin/courses",color:"lime"},{name:"จัดการเนื้อหาเว็บไซต์",icon:J,path:"#",color:"indigo",disabled:!0},{name:"ตั้งค่าเว็บไซต์",icon:ca,path:"#",color:"fuchsia",disabled:!0},{name:"ดูสถิติและรายงาน",icon:Nl,path:"#",color:"orange",disabled:!0},{name:"ติดตามการเงิน",icon:ar,path:"#",color:"emerald",disabled:!0}],i=(l,d)=>{d&&e({title:`🚧 ฟีเจอร์ผู้ดูแลระบบ "${l}" ยังไม่พร้อมใช้งาน`,description:"เรากำลังพัฒนาส่วนนี้สำหรับผู้ดูแลระบบ โปรดรอติดตาม! 🚀"})},o={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};return s.jsxs(P.div,{initial:"initial",animate:"in",exit:"out",variants:o,className:"container mx-auto px-4 py-12",children:[s.jsxs(fe,{children:[s.jsx("title",{children:"ผู้ดูแลระบบ - Login Learning"}),s.jsx("meta",{name:"description",content:"แผงควบคุมสำหรับผู้ดูแลระบบ Login Learning"})]}),s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs(P.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"mb-10 flex flex-col sm:flex-row justify-between items-center",children:[s.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4 sm:mb-0",children:s.jsx("span",{className:"gradient-text",children:"แผงควบคุมผู้ดูแลระบบ"})}),s.jsxs("div",{className:"flex items-center space-x-2 text-purple-800 p-2 bg-purple-800/30 rounded-lg border border-purple-600/50",children:[s.jsx(jm,{className:"w-5 h-5 sm:w-6 sm:h-6"}),s.jsx("span",{className:"text-sm sm:text-base",children:"โหมดผู้ดูแลระบบ"})]})]}),s.jsxs("p",{className:"text-purple-800 mb-4 text-base sm:text-lg",children:["ยินดีต้อนรับ, ",t==null?void 0:t.email,". ที่นี่คุณสามารถจัดการส่วนต่างๆ ของแพลตฟอร์ม Login Learning ได้"]}),s.jsx("div",{className:"mb-8 flex flex-wrap gap-3",children:s.jsxs(C,{onClick:()=>n(!0),variant:"outline",className:"border-red-500/60 text-red-800 hover:bg-red-500/20",children:[s.jsx(oa,{className:"w-4 h-4 mr-2"}),"ตรวจสอบระบบฐานข้อมูล"]})}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((l,d)=>s.jsx(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,delay:.15+d*.05},children:s.jsxs(Y,{to:l.disabled?"#":l.path,onClick:()=>i(l.name,l.disabled),className:`block glass-effect p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 ease-in-out transform hover:-translate-y-1
                  ${l.disabled?"opacity-60 cursor-not-allowed":`hover:border-${l.color}-500/50 border-transparent border`}
                `,children:[s.jsxs("div",{className:`flex items-center text-${l.color}-400 mb-3`,children:[s.jsx(l.icon,{className:"w-7 h-7 mr-3"}),s.jsx("h2",{className:"text-xl font-semibold text-purple-900",children:l.name})]}),s.jsx("p",{className:"text-purple-700 text-sm mb-4",children:l.name==="จัดการผู้ใช้"?"ดู, แก้ไข, หรือลบข้อมูลผู้ใช้งาน":l.name==="จัดการคอร์สเรียน"?"เพิ่ม, แก้ไข, หรือลบคอร์สเรียนและเนื้อหา":l.name==="จัดการเนื้อหาเว็บไซต์"?"อัปเดตข้อมูลหน้าต่างๆ และข่าวสาร":l.name==="ตั้งค่าเว็บไซต์"?"ปรับแต่งการตั้งค่าทั่วไปของแพลตฟอร์ม":l.name==="ดูสถิติและรายงาน"?"ตรวจสอบสถิติการใช้งานและข้อมูลสำคัญ":l.name==="ติดตามการเงิน"?"ดูข้อมูลการชำระเงินและรายรับ":""}),s.jsxs(C,{variant:"outline",className:`w-full border-${l.color}-500/60 text-${l.color}-800 hover:bg-${l.color}-500/20 
                    ${l.disabled?"pointer-events-none":""}
                  `,disabled:l.disabled,children:["ไปยังส่วน",l.name]})]})},l.name))})]}),s.jsx(Nb,{isOpen:r,onClose:()=>n(!1)})]})},kb=[{id:"1",name:"นักเรียน ตัวอย่าง",email:"student1@example.com",role:"Student",joined:"2024-01-15"},{id:"2",name:"ผู้สอน ทดสอบ",email:"instructor@example.com",role:"Instructor",joined:"2023-11-20"},{id:"3",name:"ผู้ดูแล สาขา",email:"branchmanager@example.com",role:"Branch Manager",joined:"2023-09-01"}],Sb=()=>{const{toast:t}=se(),[e,r]=Z.useState(""),[n,a]=Z.useState(kb),i=d=>{t({title:`🚧 ฟีเจอร์ "${d}" ยังไม่พร้อมใช้งาน`,description:"เรากำลังพัฒนาส่วนนี้สำหรับผู้ดูแลระบบ โปรดรอติดตาม! 🚀"})},o=n.filter(d=>d.name.toLowerCase().includes(e.toLowerCase())||d.email.toLowerCase().includes(e.toLowerCase())),l={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};return s.jsxs(P.div,{initial:"initial",animate:"in",exit:"out",variants:l,className:"container mx-auto px-4 py-12",children:[s.jsxs(fe,{children:[s.jsx("title",{children:"จัดการผู้ใช้ - ผู้ดูแลระบบ Login Learning"}),s.jsx("meta",{name:"description",content:"จัดการข้อมูลผู้ใช้งานทั้งหมดในระบบ Login Learning"})]}),s.jsxs(P.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"flex flex-col sm:flex-row justify-between items-center mb-10",children:[s.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-teal-900 mb-4 sm:mb-0",children:[s.jsx(le,{className:"inline-block w-8 h-8 mr-3 text-[#667eea]"}),"จัดการผู้ใช้งาน"]}),s.jsxs(C,{onClick:()=>i("เพิ่มผู้ใช้ใหม่"),className:"bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-gray-800",children:[s.jsx(Dl,{className:"w-5 h-5 mr-2"}),"เพิ่มผู้ใช้ใหม่"]})]}),s.jsx("div",{className:"mb-6 glass-effect p-4 rounded-xl",children:s.jsxs("div",{className:"relative",children:[s.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(ce,{type:"text",placeholder:"ค้นหาผู้ใช้ (ชื่อ, อีเมล)...",value:e,onChange:d=>r(d.target.value),className:"pl-10 w-full bg-slate-200 border-slate-400 text-gray-900 focus:border-[#667eea]"})]})}),s.jsxs("div",{className:"glass-effect rounded-xl shadow-xl overflow-x-auto",children:[s.jsxs("table",{className:"w-full min-w-max text-left text-teal-800",children:[s.jsx("thead",{className:"border-b border-slate-700",children:s.jsxs("tr",{className:"bg-teal-100/30",children:[s.jsx("th",{className:"p-4",children:"ชื่อ-นามสกุล"}),s.jsx("th",{className:"p-4",children:"อีเมล"}),s.jsx("th",{className:"p-4",children:"บทบาท"}),s.jsx("th",{className:"p-4",children:"วันที่เข้าร่วม"}),s.jsx("th",{className:"p-4 text-center",children:"การดำเนินการ"})]})}),s.jsx("tbody",{children:o.map((d,c)=>s.jsxs(P.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:c*.05},className:"border-b border-slate-700/50 hover:bg-slate-700/20 transition-colors",children:[s.jsx("td",{className:"p-4",children:d.name}),s.jsx("td",{className:"p-4",children:d.email}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${d.role==="Admin"?"bg-red-500/30 text-red-300":d.role==="Instructor"?"bg-blue-500/30 text-blue-300":d.role==="Branch Manager"?"bg-purple-500/30 text-purple-300":"bg-green-500/30 text-green-300"}`,children:d.role})}),s.jsx("td",{className:"p-4",children:d.joined}),s.jsxs("td",{className:"p-4 text-center space-x-2",children:[s.jsx(C,{variant:"ghost",size:"icon",onClick:()=>i(`แก้ไขผู้ใช้ ${d.name}`),className:"text-blue-400 hover:bg-blue-500/20",children:s.jsx(Ll,{className:"w-4 h-4"})}),s.jsx(C,{variant:"ghost",size:"icon",onClick:()=>i(`ลบผู้ใช้ ${d.name}`),className:"text-red-400 hover:bg-red-500/20",children:s.jsx(et,{className:"w-4 h-4"})})]})]},d.id))})]}),o.length===0&&s.jsx("p",{className:"text-center p-6 text-teal-700",children:"ไม่พบผู้ใช้งานที่ตรงกับการค้นหา"})]})]})},Tb=({isOpen:t,onClose:e,onSuccess:r})=>{const{toast:n}=se(),[a,i]=p.useState(!1),[o,l]=p.useState({title:"",description:"",category:"",difficulty_level:"beginner",duration_hours:0,price:0,instructor_name:"",instructor_email:"",max_students:50,is_active:!0,image_url:""}),[d,c]=p.useState({}),[u,h]=p.useState(null),[m,f]=p.useState(!1),[x,b]=p.useState(null),g=j=>{const{name:S,value:I,type:B}=j.target;l(H=>({...H,[S]:B==="number"?parseFloat(I)||0:I})),d[S]&&c(H=>({...H,[S]:""}))},v=()=>{const j={};return o.title.trim()||(j.title="กรุณาระบุชื่อคอร์ส"),o.description.trim()||(j.description="กรุณาระบุคำอธิบายคอร์ส"),o.category.trim()||(j.category="กรุณาระบุหมวดหมู่"),o.instructor_name.trim()||(j.instructor_name="กรุณาระบุชื่ออาจารย์"),o.duration_hours<=0&&(j.duration_hours="ระยะเวลาต้องมากกว่า 0 ชั่วโมง"),o.price<0&&(j.price="ราคาต้องไม่เป็นลบ"),o.max_students<=0&&(j.max_students="จำนวนนักเรียนสูงสุดต้องมากกว่า 0"),c(j),Object.keys(j).length===0},y=async j=>{if(j.preventDefault(),!v()){n({title:"ข้อมูลไม่ครบถ้วน",description:"กรุณาตรวจสอบข้อมูลที่กรอกและลองอีกครั้ง",variant:"destructive"});return}i(!0);try{let S={...o};if(u){f(!0);const{data:H,error:$}=await Vv(u);if($)throw new Error(`ไม่สามารถอัปโหลดรูปหน้าปกได้: ${$.message}`);S.image_url=H.publicUrl,f(!1)}const{data:I,error:B}=await Ev(S);if(B)throw B;n({title:"สร้างคอร์สสำเร็จ! 🎉",description:`คอร์ส "${o.title}" ถูกสร้างเรียบร้อยแล้ว`}),l({title:"",description:"",category:"",difficulty_level:"beginner",duration_hours:0,price:0,instructor_name:"",instructor_email:"",max_students:50,is_active:!0,image_url:""}),h(null),b(null),r&&r(I),e()}catch(S){console.error("Error creating course:",S),n({title:"ไม่สามารถสร้างคอร์สได้",description:S.message,variant:"destructive"})}finally{i(!1),f(!1)}},w=j=>{const S=j.target.files[0];if(!S)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(S.type)){n({title:"ไฟล์ไม่ถูกต้อง",description:"กรุณาเลือกไฟล์รูปภาพ (JPG, PNG, WebP เท่านั้น)",variant:"destructive"});return}if(S.size>5*1024*1024){n({title:"ไฟล์ใหญ่เกินไป",description:"ขนาดไฟล์ต้องไม่เกิน 5MB",variant:"destructive"});return}h(S);const B=new FileReader;B.onload=H=>{b(H.target.result)},B.readAsDataURL(S)},_=()=>{h(null),b(null);const j=document.getElementById("cover-image");j&&(j.value="")},N=["Electronics","Civil Engineering","Energy","Software","Design","Robotics","Mechanical","Chemical","Environmental"],k=[{value:"beginner",label:"ผู้เริ่มต้น"},{value:"intermediate",label:"ระดับกลาง"},{value:"advanced",label:"ระดับสูง"}];return t?s.jsx(Ee,{children:s.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:s.jsxs(P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",duration:.3},className:"bg-white shadow-2xl rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-gray-200",onClick:j=>j.stopPropagation(),children:[s.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-8 rounded-t-2xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:s.jsx(ue,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-white",children:"เพิ่มคอร์สใหม่"}),s.jsx("p",{className:"text-indigo-100 mt-1",children:"สร้างคอร์สเรียนใหม่สำหรับนักเรียน"})]})]}),s.jsx(C,{variant:"ghost",size:"icon",onClick:e,disabled:a,className:"text-white hover:bg-white/20 rounded-xl",children:s.jsx(Et,{className:"w-6 h-6"})})]})}),s.jsx("div",{className:"p-8",children:s.jsxs("form",{onSubmit:y,className:"space-y-8",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[s.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[s.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:s.jsx(ue,{className:"w-4 h-4 text-white"})}),"ชื่อคอร์ส *"]}),s.jsx(ce,{name:"title",value:o.title,onChange:g,placeholder:"เช่น Arduino Automation Systems",className:"bg-white border-gray-300 text-gray-800 text-lg h-12 focus:border-blue-500 focus:ring-blue-500 rounded-xl shadow-sm",error:d.title}),d.title&&s.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[s.jsx(xe,{className:"w-4 h-4 mr-2"}),d.title]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[s.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[s.jsx("div",{className:"bg-green-500 p-2 rounded-lg mr-3",children:s.jsx(J,{className:"w-4 h-4 text-white"})}),"คำอธิบายคอร์ส *"]}),s.jsx("textarea",{name:"description",value:o.description,onChange:g,placeholder:"อธิบายเนื้อหาและสิ่งที่นักเรียนจะได้เรียนรู้...",rows:4,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 placeholder-gray-500 focus:border-green-500 focus:ring-2 focus:ring-green-200 text-base shadow-sm resize-none"}),d.description&&s.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[s.jsx(xe,{className:"w-4 h-4 mr-2"}),d.description]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-6 rounded-xl border border-purple-200",children:[s.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[s.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:s.jsx(Cm,{className:"w-4 h-4 text-white"})}),"หมวดหมู่ *"]}),s.jsxs("select",{name:"category",value:o.category,onChange:g,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 h-12 shadow-sm",children:[s.jsx("option",{value:"",children:"เลือกหมวดหมู่"}),N.map(j=>s.jsx("option",{value:j,children:j},j))]}),d.category&&s.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[s.jsx(xe,{className:"w-4 h-4 mr-2"}),d.category]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 p-6 rounded-xl border border-amber-200",children:[s.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[s.jsx("div",{className:"bg-amber-500 p-2 rounded-lg mr-3",children:s.jsx(le,{className:"w-4 h-4 text-white"})}),"ระดับความยาก"]}),s.jsx("select",{name:"difficulty_level",value:o.difficulty_level,onChange:g,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-800 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12 shadow-sm",children:k.map(j=>s.jsx("option",{value:j.value,children:j.label},j.value))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 p-6 rounded-xl border border-cyan-200",children:[s.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[s.jsx("div",{className:"bg-cyan-500 p-2 rounded-lg mr-3",children:s.jsx(ve,{className:"w-4 h-4 text-white"})}),"ระยะเวลา (ชั่วโมง) *"]}),s.jsxs("div",{className:"relative",children:[s.jsx(ve,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(ce,{type:"number",name:"duration_hours",value:o.duration_hours,onChange:g,placeholder:"40",min:"0",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 rounded-xl shadow-sm text-lg"})]}),d.duration_hours&&s.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[s.jsx(xe,{className:"w-4 h-4 mr-2"}),d.duration_hours]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 p-6 rounded-xl border border-emerald-200",children:[s.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[s.jsx("div",{className:"bg-emerald-500 p-2 rounded-lg mr-3",children:s.jsx(ar,{className:"w-4 h-4 text-white"})}),"ราคา (บาท)"]}),s.jsxs("div",{className:"relative",children:[s.jsx(ar,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(ce,{type:"number",name:"price",value:o.price,onChange:g,placeholder:"2500",min:"0",step:"0.01",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 rounded-xl shadow-sm text-lg"})]}),d.price&&s.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[s.jsx(xe,{className:"w-4 h-4 mr-2"}),d.price]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 p-6 rounded-xl border border-indigo-200",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[s.jsx("div",{className:"bg-indigo-500 p-2 rounded-lg mr-3",children:s.jsx(le,{className:"w-5 h-5 text-white"})}),"ข้อมูลอาจารย์"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"ชื่ออาจารย์ *"}),s.jsx(ce,{name:"instructor_name",value:o.instructor_name,onChange:g,placeholder:"อาจารย์สมชาย",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 rounded-xl shadow-sm"}),d.instructor_name&&s.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[s.jsx(xe,{className:"w-4 h-4 mr-2"}),d.instructor_name]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"อีเมลอาจารย์"}),s.jsx(ce,{type:"email",name:"instructor_email",value:o.instructor_email,onChange:g,placeholder:"teacher@loginlearning.com",className:"bg-white border-gray-300 text-gray-800 h-12 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 rounded-xl shadow-sm"})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-rose-50 to-pink-50 p-6 rounded-xl border border-rose-200",children:[s.jsxs("label",{className:"block text-gray-800 font-semibold mb-3 flex items-center",children:[s.jsx("div",{className:"bg-rose-500 p-2 rounded-lg mr-3",children:s.jsx(le,{className:"w-4 h-4 text-white"})}),"จำนวนนักเรียนสูงสุด *"]}),s.jsxs("div",{className:"relative max-w-xs",children:[s.jsx(le,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(ce,{type:"number",name:"max_students",value:o.max_students,onChange:g,placeholder:"50",min:"1",className:"pl-12 pr-4 bg-white border-gray-300 text-gray-800 h-12 focus:border-rose-500 focus:ring-2 focus:ring-rose-200 rounded-xl shadow-sm text-lg"})]}),d.max_students&&s.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center bg-red-50 p-2 rounded-lg",children:[s.jsx(xe,{className:"w-4 h-4 mr-2"}),d.max_students]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 p-6 rounded-xl border border-teal-200",children:[s.jsxs("label",{className:"block text-gray-800 font-semibold mb-4 flex items-center",children:[s.jsx("div",{className:"bg-teal-500 p-2 rounded-lg mr-3",children:s.jsx(js,{className:"w-4 h-4 text-white"})}),"รูปหน้าปกคอร์ส"]}),s.jsxs("div",{className:"space-y-4",children:[x&&s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:x,alt:"Course cover preview",className:"w-48 h-32 object-cover rounded-xl border-2 border-gray-200 shadow-lg"}),s.jsx(C,{type:"button",variant:"ghost",size:"icon",onClick:_,className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg",children:s.jsx(et,{className:"w-4 h-4"})})]}),!x&&s.jsxs("div",{className:"border-2 border-dashed border-teal-300 rounded-xl p-8 text-center hover:border-teal-400 transition-colors bg-white/50",children:[s.jsx("input",{type:"file",id:"cover-image",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:w,className:"hidden",disabled:m}),s.jsxs("label",{htmlFor:"cover-image",className:"cursor-pointer flex flex-col items-center space-y-3",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-400 to-cyan-500 rounded-2xl flex items-center justify-center shadow-lg",children:s.jsx(js,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-800 font-semibold text-lg",children:"เลือกรูปหน้าปก"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"JPG, PNG, WebP ขนาดไม่เกิน 5MB"}),s.jsx("p",{className:"text-teal-600 text-xs mt-2 font-medium",children:"คลิกเพื่ออัปโหลดไฟล์"})]})]})]}),m&&s.jsxs("div",{className:"flex items-center justify-center space-x-3 bg-blue-50 p-4 rounded-xl",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),s.jsx("span",{className:"text-blue-700 font-medium",children:"กำลังอัปโหลดรูปภาพ..."})]})]})]}),s.jsxs("div",{className:"flex justify-center space-x-4 pt-8",children:[s.jsx(C,{type:"button",variant:"outline",onClick:e,disabled:a,className:"px-8 py-3 text-gray-600 border-gray-300 hover:bg-gray-50 rounded-xl font-medium text-lg h-14 min-w-[120px]",children:"ยกเลิก"}),s.jsx(C,{type:"submit",disabled:a||m,className:"px-12 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg h-14 min-w-[160px] shadow-lg hover:shadow-xl transition-all duration-200",children:a||m?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),m?"กำลังอัปโหลดรูป...":"กำลังสร้าง..."]}):s.jsxs(s.Fragment,{children:[s.jsx(kr,{className:"w-5 h-5 mr-3"}),"สร้างคอร์ส"]})})]})]})})]})})}):null},Cb=()=>{const{toast:t}=se(),[e,r]=p.useState(""),[n,a]=p.useState([]),[i,o]=p.useState(!0),[l,d]=p.useState(null),[c,u]=p.useState(!1);p.useEffect(()=>{h(),m()},[]);const h=async()=>{o(!0);const{data:y,error:w}=await Lv();w?t({title:"ข้อผิดพลาดในการโหลดข้อมูล",description:w.message,variant:"destructive"}):a(y||[]),o(!1)},m=async()=>{const{data:y,error:w}=await Rv();!w&&y&&d(y)},f=async(y,w,_)=>{const N=!_,k=N?"เปิดใช้งาน":"ปิดใช้งาน";if(!confirm(`คุณแน่ใจหรือไม่ที่จะ${k}คอร์ส "${w}"?`))return;const{error:j}=await Pv(y,N);j?t({title:`ไม่สามารถ${k}คอร์สได้`,description:j.message,variant:"destructive"}):(t({title:`${k}คอร์สสำเร็จ`,description:`คอร์ส "${w}" ถูก${k}แล้ว`}),h(),m())},x=async(y,w)=>{if(!confirm(`⚠️ คุณแน่ใจหรือไม่ที่จะลบคอร์ส "${w}" อย่างถาวร?

🚨 การดำเนินการนี้ไม่สามารถย้อนกลับได้!

- คอร์สและเนื้อหาทั้งหมดจะถูกลบถาวร
- ข้อมูลการลงทะเบียนจะยังคงอยู่

พิมพ์ "DELETE" เพื่อยืนยัน`))return;if(prompt(`กรุณาพิมพ์ "DELETE" เพื่อยืนยันการลบคอร์ส "${w}" อย่างถาวร:`)!=="DELETE"){t({title:"ยกเลิกการลบ",description:"การลบถาวรถูกยกเลิก"});return}const{error:N}=await Av(y);N?t({title:"ไม่สามารถลบคอร์สได้",description:N.message,variant:"destructive"}):(t({title:"ลบคอร์สถาวรสำเร็จ",description:`คอร์ส "${w}" ถูกลบถาวรแล้ว`}),h(),m())},b=()=>{h(),m()},g=n.filter(y=>y.title.toLowerCase().includes(e.toLowerCase())||y.category.toLowerCase().includes(e.toLowerCase())),v={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}};return s.jsxs(P.div,{initial:"initial",animate:"in",exit:"out",variants:v,className:"container mx-auto px-4 py-12",children:[s.jsxs(fe,{children:[s.jsx("title",{children:"จัดการคอร์สเรียน - ผู้ดูแลระบบ Login Learning"}),s.jsx("meta",{name:"description",content:"จัดการคอร์สเรียนทั้งหมดในระบบ Login Learning"})]}),s.jsxs(P.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"flex flex-col sm:flex-row justify-between items-center mb-10",children:[s.jsxs("h1",{className:"text-3xl lg:text-4xl font-bold text-purple-900 mb-4 sm:mb-0",children:[s.jsx(nr,{className:"inline-block w-8 h-8 mr-3 text-[#667eea]"}),"จัดการคอร์สเรียน"]}),s.jsxs(C,{onClick:()=>u(!0),className:"bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#5a6fcf] hover:to-[#673f8b] text-white-800",children:[s.jsx(xm,{className:"w-5 h-5 mr-2"}),"เพิ่มคอร์สใหม่"]})]}),l&&s.jsxs(P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"glass-effect p-6 rounded-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-purple-700 text-sm",children:"คอร์สทั้งหมด"}),s.jsx("p",{className:"text-2xl font-bold text-purple-900",children:l.totalCourses})]}),s.jsx(nr,{className:"w-8 h-8 text-[#667eea]"})]})}),s.jsx("div",{className:"glass-effect p-6 rounded-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-purple-700 text-sm",children:"นักเรียนทั้งหมด"}),s.jsx("p",{className:"text-2xl font-bold text-purple-900",children:l.totalEnrollments})]}),s.jsx(le,{className:"w-8 h-8 text-green-400"})]})}),s.jsx("div",{className:"glass-effect p-6 rounded-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-purple-700 text-sm",children:"กำลังเรียน"}),s.jsx("p",{className:"text-2xl font-bold text-purple-900",children:l.activeEnrollments})]}),s.jsx(Nl,{className:"w-8 h-8 text-blue-400"})]})}),s.jsx("div",{className:"glass-effect p-6 rounded-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-purple-700 text-sm",children:"อัตราสำเร็จ"}),s.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[l.completionRate,"%"]})]}),s.jsx(dt,{className:"w-8 h-8 text-purple-400"})]})})]}),s.jsx("div",{className:"mb-6 glass-effect p-4 rounded-xl",children:s.jsxs("div",{className:"relative",children:[s.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx(ce,{type:"text",placeholder:"ค้นหาคอร์ส (ชื่อ, หมวดหมู่)...",value:e,onChange:y=>r(y.target.value),className:"pl-10 w-full bg-slate-200 border-slate-400 text-gray-900 focus:border-[#667eea]"})]})}),s.jsxs("div",{className:"glass-effect rounded-xl shadow-xl overflow-x-auto",children:[i?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#667eea] mx-auto mb-4"}),s.jsx("p",{className:"text-purple-700",children:"กำลังโหลดข้อมูลคอร์ส..."})]}):s.jsxs("table",{className:"w-full min-w-max text-left text-purple-800",children:[s.jsx("thead",{className:"border-b border-slate-700",children:s.jsxs("tr",{className:"bg-purple-100/30",children:[s.jsx("th",{className:"p-4",children:"ชื่อคอร์ส"}),s.jsx("th",{className:"p-4",children:"หมวดหมู่"}),s.jsx("th",{className:"p-4",children:"นักเรียน"}),s.jsx("th",{className:"p-4",children:"ระยะเวลา"}),s.jsx("th",{className:"p-4",children:"ราคา"}),s.jsx("th",{className:"p-4",children:"สถานะ"}),s.jsx("th",{className:"p-4",children:"วันที่สร้าง"}),s.jsx("th",{className:"p-4 text-center",children:"การดำเนินการ"})]})}),s.jsx("tbody",{children:g.map((y,w)=>s.jsxs(P.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:w*.05},className:"border-b border-slate-700/50 hover:bg-slate-700/20 transition-colors",children:[s.jsx("td",{className:"p-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-purple-900",children:y.title}),s.jsx("p",{className:"text-sm text-purple-700 truncate max-w-xs",children:y.description||"ไม่มีคำอธิบาย"})]})}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-500/30 text-blue-300",children:y.category||"ไม่ระบุ"})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(le,{className:"w-4 h-4 mr-1 text-purple-700"}),y.enrollment_count||0]})}),s.jsxs("td",{className:"p-4",children:[y.duration_hours||0," ชั่วโมง"]}),s.jsx("td",{className:"p-4",children:y.price?`฿${y.price.toLocaleString()}`:"ฟรี"}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${y.is_active?"bg-green-500/30 text-green-300":"bg-red-500/30 text-red-300"}`,children:y.is_active?"เปิดใช้งาน":"ปิดใช้งาน"})}),s.jsx("td",{className:"p-4",children:new Date(y.created_at).toLocaleDateString("th-TH")}),s.jsxs("td",{className:"p-4 text-center space-x-2",children:[s.jsx(Y,{to:`/admin/courses/${y.id}/content`,children:s.jsx(C,{variant:"ghost",size:"icon",className:"text-green-400 hover:bg-green-500/20",title:"จัดการเนื้อหา",children:s.jsx(J,{className:"w-4 h-4"})})}),s.jsx(C,{variant:"ghost",size:"icon",onClick:()=>handleFeatureNotImplemented(`แก้ไขคอร์ส ${y.title}`),className:"text-blue-400 hover:bg-blue-500/20",title:"แก้ไขคอร์ส",children:s.jsx(Ll,{className:"w-4 h-4"})}),s.jsx(C,{variant:"ghost",size:"icon",onClick:()=>f(y.id,y.title,y.is_active),className:y.is_active?"text-orange-400 hover:bg-orange-500/20":"text-green-400 hover:bg-green-500/20",title:y.is_active?"ปิดใช้งาน":"เปิดใช้งาน",children:y.is_active?s.jsx(gm,{className:"w-4 h-4"}):s.jsx(ym,{className:"w-4 h-4"})}),!y.is_active&&s.jsx(C,{variant:"ghost",size:"icon",onClick:()=>x(y.id,y.title),className:"text-red-400 hover:bg-red-500/20",title:"ลบถาวร",children:s.jsx(et,{className:"w-4 h-4"})})]})]},y.id))})]}),!i&&g.length===0&&s.jsxs("div",{className:"text-center p-8",children:[s.jsx(Ct,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),s.jsx("p",{className:"text-purple-700 text-lg",children:"ไม่พบคอร์สเรียนที่ตรงกับการค้นหา"}),s.jsx("p",{className:"text-purple-600 text-sm mt-2",children:"ลองปรับเปลี่ยนคำค้นหาหรือเพิ่มคอร์สใหม่"})]})]}),s.jsx(Tb,{isOpen:c,onClose:()=>u(!1),onSuccess:b})]})},Eb=async t=>{try{const{data:e,error:r}=await E.from("course_content").select("*").eq("course_id",t).order("order_index",{ascending:!0});if(r)throw r;return{data:e||[],error:null}}catch(e){return console.error("Error fetching course content:",e),{data:[],error:e}}},Pb=async t=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n,error:a}=await E.from("course_content").insert([{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(a)throw a;return{data:n,error:null}}catch(e){return console.error("Error creating content:",e),{data:null,error:e}}},Ab=async(t,e)=>{try{const{data:{user:r},error:n}=await E.auth.getUser();if(n||!r)throw new Error("User not authenticated");const{data:a,error:i}=await E.from("course_content").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return{data:a,error:null}}catch(r){return console.error("Error updating content:",r),{data:null,error:r}}},Lb=async t=>{try{const{data:{user:e},error:r}=await E.auth.getUser();if(r||!e)throw new Error("User not authenticated");const{data:n}=await E.from("quizzes").select("id").eq("content_id",t),{data:a}=await E.from("assignments").select("id").eq("content_id",t);if(n&&n.length>0){for(const o of n)await E.from("quiz_attempts").delete().eq("quiz_id",o.id);await E.from("quizzes").delete().eq("content_id",t)}if(a&&a.length>0){for(const o of a)await E.from("assignment_submissions").delete().eq("assignment_id",o.id);await E.from("assignments").delete().eq("content_id",t)}await E.from("video_progress").delete().eq("content_id",t);const{error:i}=await E.from("course_content").delete().eq("id",t);if(i)throw i;return{error:null}}catch(e){return console.error("Error deleting content:",e),{error:e}}},Rb=t=>{var r;const e=[];if((r=t.title)!=null&&r.trim()||e.push("ชื่อเนื้อหาไม่สามารถว่างได้"),t.content_type||e.push("ต้องระบุประเภทเนื้อหา"),t.duration_minutes<0&&e.push("ระยะเวลาต้องเป็นจำนวนบวก"),t.content_url&&t.content_url.trim()&&(t.content_type==="video"||t.content_type==="document"))try{new URL(t.content_url)}catch{e.push("รูปแบบ URL ไม่ถูกต้อง")}return{isValid:e.length===0,errors:e}},Ib=()=>[{name:"วิดีโอบทเรียน",content_type:"video",title:"บทเรียนที่ X: ",description:"วิดีโอการสอนเกี่ยวกับ...",duration_minutes:15},{name:"แบบทดสอบ",content_type:"quiz",title:"แบบทดสอบบทที่ X",description:"ทดสอบความเข้าใจจากบทเรียน",duration_minutes:10},{name:"งานมอบหมาย",content_type:"assignment",title:"งานมอบหมายที่ X",description:"สร้างโปรเจกต์เพื่อฝึกทักษะ",duration_minutes:60},{name:"เอกสารประกอบ",content_type:"document",title:"เอกสารประกอบการเรียน",description:"เอกสาร PDF หรือไฟล์สำหรับดาวน์โหลด",duration_minutes:0}],Mb=({contentId:t,initialQuiz:e,onSave:r})=>{const{toast:n}=se(),[a,i]=p.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",instructions:(e==null?void 0:e.instructions)||"",time_limit:(e==null?void 0:e.time_limit)||0,max_attempts:(e==null?void 0:e.max_attempts)||3,passing_score:(e==null?void 0:e.passing_score)||70,show_correct_answers:(e==null?void 0:e.show_correct_answers)??!0,randomize_questions:(e==null?void 0:e.randomize_questions)??!1,questions:(e==null?void 0:e.questions)||[]}),[o,l]=p.useState(null),[d,c]=p.useState(!1),u=()=>{const v=sb(a);if(!v.isValid){n({title:"ข้อมูลแบบทดสอบไม่ถูกต้อง",description:v.errors.join(`
`),variant:"destructive"});return}r(a)},h=()=>{l({id:Date.now().toString(),type:"multiple_choice",question:"",options:["","","",""],correct_answer:"",explanation:"",points:1}),c(!0)},m=v=>{l({...v}),c(!0)},f=v=>{v.id&&a.questions.find(y=>y.id===v.id)?i(y=>({...y,questions:y.questions.map(w=>w.id===v.id?v:w)})):i(y=>({...y,questions:[...y.questions,v]})),c(!1),l(null)},x=v=>{confirm("คุณแน่ใจหรือไม่ที่จะลบคำถามนี้?")&&i(y=>({...y,questions:y.questions.filter(w=>w.id!==v)}))},b=v=>{const y={...v,id:Date.now().toString(),question:`${v.question} (สำเนา)`};i(w=>({...w,questions:[...w.questions,y]}))},g=()=>{const v=rb();i(y=>({...y,questions:[...y.questions,...v]}))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"การตั้งค่าแบบทดสอบ"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"ชื่อแบบทดสอบ"}),s.jsx("input",{type:"text",value:a.title,onChange:v=>i(y=>({...y,title:v.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"ชื่อแบบทดสอบ"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"เวลาจำกัด (นาที)"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ve,{className:"w-4 h-4 text-slate-400"}),s.jsx("input",{type:"number",value:a.time_limit,onChange:v=>i(y=>({...y,time_limit:parseInt(v.target.value)||0})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0",placeholder:"0 = ไม่จำกัดเวลา"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"จำนวนครั้งที่ทำได้สูงสุด"}),s.jsx("input",{type:"number",value:a.max_attempts,onChange:v=>i(y=>({...y,max_attempts:parseInt(v.target.value)||1})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"คะแนนผ่าน (%)"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Te,{className:"w-4 h-4 text-slate-400"}),s.jsx("input",{type:"number",value:a.passing_score,onChange:v=>i(y=>({...y,passing_score:parseInt(v.target.value)||70})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0",max:"100"})]})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"คำอธิบาย"}),s.jsx("textarea",{value:a.description,onChange:v=>i(y=>({...y,description:v.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:2,placeholder:"อธิบายเกี่ยวกับแบบทดสอบนี้"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"คำแนะนำ"}),s.jsx("textarea",{value:a.instructions,onChange:v=>i(y=>({...y,instructions:v.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:3,placeholder:"คำแนะนำสำหรับผู้ทำแบบทดสอบ"})]}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"show_correct_answers",checked:a.show_correct_answers,onChange:v=>i(y=>({...y,show_correct_answers:v.target.checked})),className:"w-4 h-4"}),s.jsx("label",{htmlFor:"show_correct_answers",className:"text-sm text-slate-300",children:"แสดงเฉลยหลังทำเสร็จ"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"randomize_questions",checked:a.randomize_questions,onChange:v=>i(y=>({...y,randomize_questions:v.target.checked})),className:"w-4 h-4"}),s.jsx("label",{htmlFor:"randomize_questions",className:"text-sm text-slate-300",children:"สุ่มลำดับคำถาม"})]})]})]}),s.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white",children:["คำถาม (",a.questions.length," ข้อ)"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[a.questions.length===0&&s.jsx(C,{onClick:g,variant:"outline",size:"sm",children:"โหลดตัวอย่าง"}),s.jsxs(C,{onClick:h,className:"bg-green-500 hover:bg-green-600",children:[s.jsx(Ns,{className:"w-4 h-4 mr-2"}),"เพิ่มคำถาม"]})]})]}),a.questions.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(xe,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-400 mb-4",children:"ยังไม่มีคำถาม"}),s.jsxs(C,{onClick:h,children:[s.jsx(Ns,{className:"w-4 h-4 mr-2"}),"เพิ่มคำถามแรก"]})]}):s.jsx("div",{className:"space-y-3",children:a.questions.map((v,y)=>s.jsx(Ob,{question:v,index:y,onEdit:()=>m(v),onDelete:()=>x(v.id),onDuplicate:()=>b(v)},v.id))})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(C,{onClick:u,className:"bg-blue-500 hover:bg-blue-600",children:"บันทึกแบบทดสอบ"})}),s.jsx(Ee,{children:d&&s.jsx(Db,{question:o,onSave:f,onClose:()=>{c(!1),l(null)}})})]})},Ob=({question:t,index:e,onEdit:r,onDelete:n,onDuplicate:a})=>{var d;const[i,o]=p.useState(!1),l=c=>({multiple_choice:"เลือกตอบ",multiple_select:"เลือกหลายข้อ",true_false:"ถูก/ผิด",fill_blank:"เติมคำ"})[c]||c;return s.jsx("div",{className:"bg-slate-700/30 rounded-lg border border-slate-600",children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[s.jsxs("span",{className:"text-sm font-medium text-slate-400",children:["#",e+1]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-white font-medium truncate",children:t.question}),s.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[l(t.type)," • ",t.points||1," คะแนน"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(C,{size:"sm",variant:"ghost",onClick:()=>o(!i),children:i?s.jsx(Tl,{className:"w-4 h-4"}):s.jsx(Sl,{className:"w-4 h-4"})}),s.jsx(C,{size:"sm",variant:"ghost",onClick:r,children:s.jsx(Yt,{className:"w-4 h-4"})}),s.jsx(C,{size:"sm",variant:"ghost",onClick:a,children:s.jsx(Cn,{className:"w-4 h-4"})}),s.jsx(C,{size:"sm",variant:"ghost",onClick:n,className:"text-red-400",children:s.jsx(et,{className:"w-4 h-4"})})]})]}),s.jsx(Ee,{children:i&&s.jsxs(P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-4 pt-4 border-t border-slate-600",children:[t.type==="multiple_choice"&&s.jsx("div",{className:"space-y-2",children:(d=t.options)==null?void 0:d.map((c,u)=>s.jsxs("div",{className:`p-2 rounded ${c===t.correct_answer?"bg-green-500/20 text-green-300":"bg-slate-700/50 text-slate-300"}`,children:[c===t.correct_answer&&"✓ ",c]},u))}),t.type==="true_false"&&s.jsxs("div",{className:"text-slate-300",children:["คำตอบที่ถูก: ",s.jsx("span",{className:"text-green-300",children:t.correct_answer?"ถูก":"ผิด"})]}),t.explanation&&s.jsxs("div",{className:"mt-3 p-3 bg-blue-500/10 rounded text-blue-300 text-sm",children:[s.jsx("strong",{children:"คำอธิบาย:"})," ",t.explanation]})]})})]})})},Db=({question:t,onSave:e,onClose:r})=>{const[n,a]=p.useState({id:(t==null?void 0:t.id)||Date.now().toString(),type:(t==null?void 0:t.type)||"multiple_choice",question:(t==null?void 0:t.question)||"",options:(t==null?void 0:t.options)||["","","",""],correct_answer:(t==null?void 0:t.correct_answer)||"",explanation:(t==null?void 0:t.explanation)||"",points:(t==null?void 0:t.points)||1}),i=c=>{if(c.preventDefault(),!n.question.trim()){alert("กรุณาใส่คำถาม");return}if(n.type==="multiple_choice"&&n.options.filter(u=>u.trim()).length<2){alert("ต้องมีตัวเลือกอย่างน้อย 2 ตัวเลือก");return}if(!n.correct_answer){alert("กรุณาระบุคำตอบที่ถูกต้อง");return}e(n)},o=()=>{a(c=>({...c,options:[...c.options,""]}))},l=c=>{a(u=>({...u,options:u.options.filter((h,m)=>m!==c)}))},d=(c,u)=>{a(h=>({...h,options:h.options.map((m,f)=>f===c?u:m)}))};return s.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:r,children:s.jsxs(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-effect p-6 rounded-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:c=>c.stopPropagation(),children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:t!=null&&t.id?"แก้ไขคำถาม":"เพิ่มคำถามใหม่"}),s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"ประเภทคำถาม"}),s.jsxs("select",{value:n.type,onChange:c=>a(u=>({...u,type:c.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",children:[s.jsx("option",{value:"multiple_choice",children:"เลือกตอบ (ตัวเลือกเดียว)"}),s.jsx("option",{value:"multiple_select",children:"เลือกตอบ (หลายตัวเลือก)"}),s.jsx("option",{value:"true_false",children:"ถูก/ผิด"}),s.jsx("option",{value:"fill_blank",children:"เติมคำ"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"คำถาม"}),s.jsx("textarea",{value:n.question,onChange:c=>a(u=>({...u,question:c.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:3,placeholder:"ใส่คำถาม",required:!0})]}),n.type==="multiple_choice"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"ตัวเลือก"}),s.jsxs("div",{className:"space-y-2",children:[n.options.map((c,u)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"correct_answer",checked:n.correct_answer===c,onChange:()=>a(h=>({...h,correct_answer:c})),className:"w-4 h-4"}),s.jsx("input",{type:"text",value:c,onChange:h=>d(u,h.target.value),className:"flex-1 p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:`ตัวเลือกที่ ${u+1}`}),n.options.length>2&&s.jsx(C,{type:"button",variant:"ghost",size:"icon",onClick:()=>l(u),children:s.jsx(et,{className:"w-4 h-4 text-red-400"})})]},u)),s.jsxs(C,{type:"button",onClick:o,variant:"outline",size:"sm",children:[s.jsx(Ns,{className:"w-4 h-4 mr-2"}),"เพิ่มตัวเลือก"]})]})]}),n.type==="true_false"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"คำตอบที่ถูกต้อง"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"correct_answer",value:"true",checked:n.correct_answer===!0||n.correct_answer==="true",onChange:()=>a(c=>({...c,correct_answer:!0})),className:"w-4 h-4"}),s.jsx("span",{className:"text-slate-300",children:"ถูก"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"correct_answer",value:"false",checked:n.correct_answer===!1||n.correct_answer==="false",onChange:()=>a(c=>({...c,correct_answer:!1})),className:"w-4 h-4"}),s.jsx("span",{className:"text-slate-300",children:"ผิด"})]})]})]}),n.type==="fill_blank"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"คำตอบที่ถูกต้อง"}),s.jsx("input",{type:"text",value:n.correct_answer,onChange:c=>a(u=>({...u,correct_answer:c.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"คำตอบที่ถูกต้อง"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"คำอธิบาย (ไม่บังคับ)"}),s.jsx("textarea",{value:n.explanation,onChange:c=>a(u=>({...u,explanation:c.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:2,placeholder:"อธิบายเหตุผลของคำตอบที่ถูกต้อง"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"คะแนน"}),s.jsx("input",{type:"number",value:n.points,onChange:c=>a(u=>({...u,points:parseInt(c.target.value)||1})),className:"w-32 p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(C,{type:"button",variant:"outline",onClick:r,children:"ยกเลิก"}),s.jsx(C,{type:"submit",className:"bg-blue-500 hover:bg-blue-600",children:"บันทึก"})]})]})]})})},$b=({contentId:t,initialAssignment:e,onSave:r})=>{const{toast:n}=se(),[a,i]=p.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",instructions:(e==null?void 0:e.instructions)||"",due_date:(e==null?void 0:e.due_date)||"",max_file_size:(e==null?void 0:e.max_file_size)||10485760,allowed_file_types:(e==null?void 0:e.allowed_file_types)||["pdf","doc","docx","jpg","png"],max_files:(e==null?void 0:e.max_files)||5,max_score:(e==null?void 0:e.max_score)||100,auto_grade:(e==null?void 0:e.auto_grade)||!1,grading_rubric:(e==null?void 0:e.grading_rubric)||{}}),o=[{value:"pdf",label:"PDF"},{value:"doc",label:"Word (.doc)"},{value:"docx",label:"Word (.docx)"},{value:"txt",label:"Text (.txt)"},{value:"jpg",label:"Image (.jpg)"},{value:"jpeg",label:"Image (.jpeg)"},{value:"png",label:"Image (.png)"},{value:"gif",label:"Image (.gif)"},{value:"zip",label:"ZIP Archive"},{value:"rar",label:"RAR Archive"},{value:"mp4",label:"Video (.mp4)"},{value:"avi",label:"Video (.avi)"},{value:"mov",label:"Video (.mov)"}],l=()=>{if(!a.title.trim()){n({title:"ข้อมูลไม่ครบถ้วน",description:"กรุณาใส่ชื่องานมอบหมาย",variant:"destructive"});return}if(!a.instructions.trim()){n({title:"ข้อมูลไม่ครบถ้วน",description:"กรุณาใส่คำแนะนำงานมอบหมาย",variant:"destructive"});return}if(a.allowed_file_types.length===0){n({title:"ข้อมูลไม่ครบถ้วน",description:"กรุณาเลือกประเภทไฟล์ที่อนุญาตอย่างน้อย 1 ประเภท",variant:"destructive"});return}r(a)},d=h=>{i(m=>({...m,allowed_file_types:m.allowed_file_types.includes(h)?m.allowed_file_types.filter(f=>f!==h):[...m.allowed_file_types,h]}))},c=h=>{if(h===0)return"0 Bytes";const m=1024,f=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(h)/Math.log(m));return parseFloat((h/Math.pow(m,x)).toFixed(2))+" "+f[x]},u=h=>{i(m=>({...m,max_file_size:h*1024*1024}))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"ข้อมูลพื้นฐาน"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"ชื่องานมอบหมาย *"}),s.jsx("input",{type:"text",value:a.title,onChange:h=>i(m=>({...m,title:h.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"ชื่องานมอบหมาย",required:!0})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"คำอธิบายโดยย่อ"}),s.jsx("textarea",{value:a.description,onChange:h=>i(m=>({...m,description:h.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:2,placeholder:"อธิบายงานมอบหมายนี้โดยย่อ"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"คำแนะนำและรายละเอียด *"}),s.jsx("textarea",{value:a.instructions,onChange:h=>i(m=>({...m,instructions:h.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:6,placeholder:"ใส่คำแนะนำและรายละเอียดงานมอบหมาย เช่น วัตถุประสงค์ ขั้นตอนการทำ เกณฑ์การให้คะแนน ฯลฯ",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"กำหนดส่ง"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ls,{className:"w-4 h-4 text-slate-400"}),s.jsx("input",{type:"datetime-local",value:a.due_date,onChange:h=>i(m=>({...m,due_date:h.target.value})),className:"flex-1 p-3 bg-slate-700 border border-slate-600 rounded-lg text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"คะแนนเต็ม"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Te,{className:"w-4 h-4 text-slate-400"}),s.jsx("input",{type:"number",value:a.max_score,onChange:h=>i(m=>({...m,max_score:parseInt(h.target.value)||100})),className:"flex-1 p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]})]})]})]}),s.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"การตั้งค่าไฟล์"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"จำนวนไฟล์สูงสุด"}),s.jsx("input",{type:"number",value:a.max_files,onChange:h=>i(m=>({...m,max_files:parseInt(h.target.value)||5})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1",max:"20"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"ขนาดไฟล์สูงสุด (MB)"}),s.jsxs("select",{value:a.max_file_size/1024/1024,onChange:h=>u(parseInt(h.target.value)),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white",children:[s.jsx("option",{value:1,children:"1 MB"}),s.jsx("option",{value:5,children:"5 MB"}),s.jsx("option",{value:10,children:"10 MB"}),s.jsx("option",{value:25,children:"25 MB"}),s.jsx("option",{value:50,children:"50 MB"}),s.jsx("option",{value:100,children:"100 MB"})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"ประเภทไฟล์ที่อนุญาต *"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:o.map(h=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:a.allowed_file_types.includes(h.value),onChange:()=>d(h.value),className:"w-4 h-4 rounded"}),s.jsx("span",{className:"text-sm text-slate-300",children:h.label})]},h.value))}),s.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"เลือกอย่างน้อย 1 ประเภทไฟล์"})]}),s.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(El,{className:"w-4 h-4 text-blue-400 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-300",children:[s.jsx("p",{children:s.jsx("strong",{children:"สรุปการตั้งค่า:"})}),s.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[s.jsxs("li",{children:["อนุญาตไฟล์สูงสุด: ",a.max_files," ไฟล์"]}),s.jsxs("li",{children:["ขนาดไฟล์สูงสุด: ",c(a.max_file_size)]}),s.jsxs("li",{children:["ประเภทไฟล์: ",a.allowed_file_types.join(", ")]})]})]})]})})]}),s.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"การให้คะแนน"}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"auto_grade",checked:a.auto_grade,onChange:h=>i(m=>({...m,auto_grade:h.target.checked})),className:"w-4 h-4"}),s.jsx("label",{htmlFor:"auto_grade",className:"text-sm text-slate-300",children:"ให้คะแนนอัตโนมัติ"})]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1 ml-7",children:"ถ้าเปิดใช้งาน นักเรียนจะได้คะแนนเต็มทันทีที่ส่งงาน"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"เกณฑ์การให้คะแนน"}),s.jsx("textarea",{value:a.grading_rubric.description||"",onChange:h=>i(m=>({...m,grading_rubric:{...m.grading_rubric,description:h.target.value}})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:4,placeholder:`อธิบายเกณฑ์การให้คะแนน เช่น:
- ความถูกต้องของเนื้อหา (50%)
- ความคิดสร้างสรรค์ (30%)
- การนำเสนอ (20%)`})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(C,{onClick:l,className:"bg-blue-500 hover:bg-blue-600",children:[s.jsx(J,{className:"w-4 h-4 mr-2"}),"บันทึกงานมอบหมาย"]})}),a.allowed_file_types.length===0&&s.jsxs("div",{className:"flex items-center space-x-2 text-amber-400 text-sm",children:[s.jsx(xe,{className:"w-4 h-4"}),s.jsx("span",{children:"กรุณาเลือกประเภทไฟล์ที่อนุญาตอย่างน้อย 1 ประเภท"})]})]})},Fb=async()=>{try{console.log("Checking storage setup...");const{data:{user:t},error:e}=await E.auth.getUser();if(e||!t)throw new Error("User must be authenticated to check storage");const{data:r,error:n}=await E.storage.listBuckets();if(n){console.error("List buckets error:",n);const{data:d,error:c}=await E.storage.from("course-files").list("",{limit:1});if(c)throw new Error(`Cannot access storage: ${n.message}. Direct test also failed: ${c.message}`);console.log("Bucket exists but listBuckets() failed. Using direct access method.")}else if(console.log("Available buckets:",r),!r.find(c=>c.name==="course-files"))return console.error("course-files bucket not found in list"),{success:!1,error:'Storage bucket "course-files" not found in bucket list. Please check bucket permissions.',details:{buckets:r.map(c=>c.name),missingBucket:"course-files"}};const a=new Blob(["test"],{type:"text/plain"}),i=`test/${Date.now()}_test.txt`,{data:o,error:l}=await E.storage.from("course-files").upload(i,a,{upsert:!0});if(l)return console.error("Upload test failed:",l),{success:!1,error:`Cannot upload to storage: ${l.message}`,details:l};try{await E.storage.from("course-files").remove([i])}catch(d){console.warn("Failed to cleanup test file:",d)}return console.log("Storage setup check passed"),{success:!0,message:"Storage is properly configured"}}catch(t){return console.error("Storage setup check failed:",t),{success:!1,error:t.message,details:t}}},Ub=async()=>{try{console.log("Checking database schema...");const{data:t,error:e}=await E.from("content_attachments").select("id").limit(1);return e?e.code==="42P01"?{success:!1,error:'Table "content_attachments" does not exist. Please run the database schema setup.',sqlFile:"content-attachments-schema.sql"}:{success:!1,error:`Database error: ${e.message}`,details:e}:(console.log("Database schema check passed"),{success:!0,message:"Database schema is properly configured"})}catch(t){return console.error("Database schema check failed:",t),{success:!1,error:t.message,details:t}}},Vb=async()=>{console.log("Running comprehensive system check...");const t={storage:await Fb(),database:await Ub()},e=Object.values(t).every(r=>r.success);return{success:e,results:t,summary:e?"All systems are properly configured":"Some systems need configuration"}},Bb=({onClose:t})=>{const{toast:e}=se(),[r,n]=p.useState(!1),[a,i]=p.useState(null),o=async()=>{n(!0);try{const u=await Vb();i(u),u.success&&e({title:"ระบบพร้อมใช้งาน ✅",description:"ทุกอย่างถูกตั้งค่าเรียบร้อยแล้ว"})}catch(u){e({title:"เกิดข้อผิดพลาดในการตรวจสอบ",description:u.message,variant:"destructive"})}finally{n(!1)}},l=u=>{navigator.clipboard.writeText(u),e({title:"คัดลอกแล้ว",description:"ข้อความได้ถูกคัดลอกไปยังคลิปบอร์ด"})},d=u=>u?s.jsx(Ue,{className:"w-5 h-5 text-green-400"}):s.jsx(ks,{className:"w-5 h-5 text-red-400"}),c=`-- Run this SQL in Supabase SQL Editor
-- ==========================================
-- CONTENT ATTACHMENTS SCHEMA
-- ระบบไฟล์แนบสำหรับเนื้อหาทุกประเภท (เหมือน Google Classroom)
-- ==========================================

-- สร้างตาราง content_attachments สำหรับเก็บไฟล์แนบของเนื้อหา
CREATE TABLE IF NOT EXISTS content_attachments (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    content_id UUID NOT NULL REFERENCES course_content(id) ON DELETE CASCADE,
    file_name VARCHAR(255) NOT NULL,
    file_path TEXT NOT NULL,
    file_size BIGINT NOT NULL,
    file_type VARCHAR(50) NOT NULL,
    mime_type VARCHAR(100),
    upload_order INTEGER DEFAULT 1,
    is_downloadable BOOLEAN DEFAULT true,
    is_preview_available BOOLEAN DEFAULT false,
    uploaded_by UUID REFERENCES auth.users(id),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- สร้าง indexes สำหรับ performance
CREATE INDEX IF NOT EXISTS idx_content_attachments_content_id ON content_attachments(content_id);
CREATE INDEX IF NOT EXISTS idx_content_attachments_upload_order ON content_attachments(content_id, upload_order);
CREATE INDEX IF NOT EXISTS idx_content_attachments_file_type ON content_attachments(file_type);

-- เพิ่ม RLS (Row Level Security)
ALTER TABLE content_attachments ENABLE ROW LEVEL SECURITY;

-- Policy: ให้ทุกคนดู attachments ได้ (สำหรับนักเรียน)
CREATE POLICY "Anyone can view content attachments" ON content_attachments
FOR SELECT USING (true);

-- Policy: ให้ admin/instructor เพิ่ม/แก้ไข/ลบ attachments ได้
CREATE POLICY "Instructors can manage attachments" ON content_attachments
FOR ALL USING (
    auth.uid() IN (
        SELECT user_id FROM user_profiles 
        WHERE role IN ('admin', 'instructor')
    )
);

-- เพิ่ม function trigger สำหรับ updated_at
CREATE OR REPLACE FUNCTION update_content_attachments_updated_at()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER trigger_update_content_attachments_updated_at
    BEFORE UPDATE ON content_attachments
    FOR EACH ROW
    EXECUTE FUNCTION update_content_attachments_updated_at();`;return s.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t,children:s.jsxs(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-effect rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:u=>u.stopPropagation(),children:[s.jsx("div",{className:"p-6 border-b border-white/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ca,{className:"w-6 h-6 text-blue-400"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"ตรวจสอบระบบไฟล์แนบ"}),s.jsx("p",{className:"text-slate-400 text-sm",children:"ตรวจสอบการตั้งค่า Storage และ Database"})]})]}),s.jsxs(C,{onClick:o,disabled:r,className:"bg-blue-500 hover:bg-blue-600",children:[s.jsx(Rl,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`}),r?"กำลังตรวจสอบ...":"ตรวจสอบระบบ"]})]})}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[!a&&!r&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ct,{className:"w-16 h-16 text-yellow-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"ตรวจสอบระบบก่อนใช้งาน"}),s.jsx("p",{className:"text-slate-400 mb-6",children:'กดปุ่ม "ตรวจสอบระบบ" เพื่อดูว่าระบบไฟล์แนบพร้อมใช้งานหรือไม่'})]}),r&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("p",{className:"text-white/70",children:"กำลังตรวจสอบระบบ..."})]}),a&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:`p-4 rounded-lg border ${a.success?"bg-green-500/20 border-green-500/30":"bg-red-500/20 border-red-500/30"}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[d(a.success),s.jsxs("div",{children:[s.jsx("h3",{className:`font-semibold ${a.success?"text-green-300":"text-red-300"}`,children:a.summary}),a.success&&s.jsx("p",{className:"text-green-200 text-sm",children:"ระบบไฟล์แนบพร้อมใช้งานแล้ว"})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[s.jsx(cm,{className:"w-5 h-5 mr-2"}),"Supabase Storage"]}),s.jsx("div",{className:`p-4 rounded-lg border ${a.results.storage.success?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[d(a.results.storage.success),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`font-medium ${a.results.storage.success?"text-green-300":"text-red-300"}`,children:a.results.storage.success?"Storage พร้อมใช้งาน":"Storage ยังไม่พร้อม"}),a.results.storage.error&&s.jsx("p",{className:"text-red-200 text-sm mt-1",children:a.results.storage.error}),!a.results.storage.success&&s.jsxs("div",{className:"mt-3 space-y-3",children:[s.jsxs("div",{className:"p-3 bg-slate-700/50 rounded text-sm",children:[s.jsx("p",{className:"text-slate-300 mb-2",children:"🔧 วิธีแก้ไขแบบง่าย:"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-xs text-slate-400",children:[s.jsx("strong",{children:"ขั้นตอนที่ 1:"})," รัน Storage Policies SQL"]}),s.jsx("div",{className:"bg-slate-800 p-2 rounded text-xs",children:s.jsx("pre",{className:"text-slate-300 whitespace-pre-wrap",children:`-- รัน SQL นี้ใน Supabase SQL Editor
CREATE POLICY "Anyone can view course files" ON storage.objects
FOR SELECT USING (bucket_id = 'course-files');

CREATE POLICY "Authenticated users can upload course files" ON storage.objects  
FOR INSERT WITH CHECK (bucket_id = 'course-files' AND auth.uid() IS NOT NULL);

CREATE POLICY IF NOT EXISTS "Anyone can view buckets" ON storage.buckets
FOR SELECT USING (true);`})}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(C,{size:"sm",variant:"outline",onClick:()=>l(`-- รัน SQL นี้ใน Supabase SQL Editor
CREATE POLICY "Anyone can view course files" ON storage.objects
FOR SELECT USING (bucket_id = 'course-files');

CREATE POLICY "Authenticated users can upload course files" ON storage.objects  
FOR INSERT WITH CHECK (bucket_id = 'course-files' AND auth.uid() IS NOT NULL);

CREATE POLICY IF NOT EXISTS "Anyone can view buckets" ON storage.buckets
FOR SELECT USING (true);`),children:[s.jsx(Cn,{className:"w-3 h-3 mr-1"}),"คัดลอก SQL"]}),s.jsxs(C,{size:"sm",variant:"outline",onClick:()=>window.open("https://supabase.com/dashboard","_blank"),children:[s.jsx(ir,{className:"w-3 h-3 mr-1"}),"เปิด SQL Editor"]})]})]})]}),s.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded text-sm",children:[s.jsx("p",{className:"text-blue-300 mb-2",children:"📋 ขั้นตอนที่ 2: ตรวจสอบ Bucket Settings"}),s.jsxs("ol",{className:"text-blue-200 text-xs space-y-1 ml-4",children:[s.jsx("li",{children:"1. ไปที่ Storage → course-files → Settings"}),s.jsx("li",{children:"2. ✅ Public bucket = true"}),s.jsx("li",{children:"3. ✅ File size limit = 50MB+"}),s.jsx("li",{children:"4. ✅ Allowed MIME types = ทุกประเภท"})]})]}),s.jsxs("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/20 rounded text-sm",children:[s.jsx("p",{className:"text-yellow-300 mb-2",children:"⚠️ หากยังไม่ได้:"}),s.jsxs("div",{className:"text-yellow-200 text-xs space-y-1",children:[s.jsx("div",{children:"• ลบ bucket เก่าและสร้างใหม่"}),s.jsx("div",{children:"• ตรวจสอบ user permissions"}),s.jsx("div",{children:"• ดูไฟล์ STORAGE_TROUBLESHOOTING.md"})]})]})]})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"text-lg font-semibold text-white flex items-center",children:[s.jsx(oa,{className:"w-5 h-5 mr-2"}),"Database Schema"]}),s.jsx("div",{className:`p-4 rounded-lg border ${a.results.database.success?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[d(a.results.database.success),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`font-medium ${a.results.database.success?"text-green-300":"text-red-300"}`,children:a.results.database.success?"Database Schema พร้อมใช้งาน":"ต้องติดตั้ง Database Schema"}),a.results.database.error&&s.jsx("p",{className:"text-red-200 text-sm mt-1",children:a.results.database.error}),!a.results.database.success&&s.jsxs("div",{className:"mt-3 space-y-3",children:[s.jsx("p",{className:"text-slate-300 text-sm",children:"รัน SQL นี้ใน Supabase SQL Editor:"}),s.jsxs("div",{className:"relative",children:[s.jsx("pre",{className:"bg-slate-800 p-3 rounded text-xs text-slate-300 overflow-x-auto max-h-40",children:c}),s.jsx(C,{size:"sm",variant:"outline",className:"absolute top-2 right-2",onClick:()=>l(c),children:s.jsx(Cn,{className:"w-3 h-3"})})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs(C,{size:"sm",variant:"outline",onClick:()=>window.open("https://supabase.com/dashboard","_blank"),children:[s.jsx(ir,{className:"w-3 h-3 mr-1"}),"เปิด SQL Editor"]})})]})]})]})})]})]})]}),s.jsx("div",{className:"p-6 border-t border-white/10",children:s.jsx("div",{className:"flex justify-end",children:s.jsx(C,{variant:"outline",onClick:t,children:"ปิด"})})})]})})},zb=({contentId:t,existingFiles:e=[],onFilesChange:r,maxFiles:n=10,maxFileSize:a=50*1024*1024,allowedTypes:i=["pdf","doc","docx","ppt","pptx","xls","xlsx","jpg","jpeg","png","gif","mp4","mp3","zip","rar","txt"],uploadMode:o="admin",className:l=""})=>{const{toast:d}=se(),c=p.useRef(null),[u,h]=p.useState(e),[m,f]=p.useState(!1),[x,b]=p.useState(!1),[g,v]=p.useState(!1),y=T=>{const A=T==null?void 0:T.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(A)?s.jsx(js,{className:"w-5 h-5 text-blue-500"}):["mp4","avi","mov","wmv","flv"].includes(A)?s.jsx($l,{className:"w-5 h-5 text-purple-500"}):["zip","rar","7z","tar","gz"].includes(A)?s.jsx(Cl,{className:"w-5 h-5 text-orange-500"}):["pdf"].includes(A)?s.jsx(J,{className:"w-5 h-5 text-red-500"}):["doc","docx"].includes(A)?s.jsx(J,{className:"w-5 h-5 text-blue-600"}):["ppt","pptx"].includes(A)?s.jsx(J,{className:"w-5 h-5 text-orange-600"}):["xls","xlsx"].includes(A)?s.jsx(J,{className:"w-5 h-5 text-green-600"}):s.jsx(or,{className:"w-5 h-5 text-slate-500"})},w=T=>{if(T===0)return"0 Bytes";const A=1024,O=["Bytes","KB","MB","GB"],U=Math.floor(Math.log(T)/Math.log(A));return parseFloat((T/Math.pow(A,U)).toFixed(2))+" "+O[U]},_=T=>{var U;const A=[];T.size>a&&A.push(`ไฟล์ ${T.name} มีขนาดใหญ่เกินกำหนด (${w(a)})`);const O=(U=T.name.split(".").pop())==null?void 0:U.toLowerCase();return i.includes(O)||A.push(`ไฟล์ ${T.name} ไม่ใช่ประเภทที่อนุญาต`),{isValid:A.length===0,errors:A}},N=T=>{if(!T||T.length===0)return;const A=Array.from(T);if(u.length+A.length>n){d({title:"จำนวนไฟล์เกินกำหนด",description:`สามารถอัปโหลดได้สูงสุด ${n} ไฟล์`,variant:"destructive"});return}const O=[],U=[];if(A.forEach(R=>{var re;const W=_(R);if(W.isValid){const q=`file_${Date.now()}_${Math.floor(Math.random()*1e3)}`;O.push({id:q,file:R,name:R.name,size:R.size,type:(re=R.name.split(".").pop())==null?void 0:re.toLowerCase(),mimeType:R.type,isUploading:!1,isUploaded:!1,progress:0,url:null,path:null})}else U.push(...W.errors)}),U.length>0&&d({title:"ไฟล์บางไฟล์ไม่ถูกต้อง",description:U.join(`
`),variant:"destructive"}),O.length>0){const R=[...u,...O];h(R),r==null||r(R)}},k=T=>{T.preventDefault(),b(!1),N(T.dataTransfer.files)},j=T=>{T.preventDefault(),T.stopPropagation(),T.type==="dragenter"||T.type==="dragover"?b(!0):T.type==="dragleave"&&b(!1)},S=T=>{const A=u.filter(O=>O.id!==T);h(A),r==null||r(A)},I=async(T,A=1)=>{var O;h(U=>U.map(R=>R.id===T.id?{...R,isUploading:!0,progress:0}:R));try{const U=setInterval(()=>{h(re=>re.map(q=>q.id===T.id?{...q,progress:Math.min(q.progress+10,90)}:q))},200),{data:R,error:W}=await Ov(T.file,t,A);if(clearInterval(U),W)throw W;return h(re=>re.map(q=>q.id===T.id?{...q,isUploading:!1,isUploaded:!0,progress:100,url:R.url,path:R.file_path,attachmentId:R.id}:q)),{success:!0,data:R}}catch(U){console.error("Upload error details:",U);const R=((O=U==null?void 0:U.error)==null?void 0:O.message)||(U==null?void 0:U.message)||"ไม่สามารถอัปโหลดไฟล์ได้";throw h(W=>W.map(re=>re.id===T.id?{...re,isUploading:!1,isUploaded:!1,progress:0,error:R}:re)),d({title:"ไม่สามารถอัปโหลดไฟล์ได้",description:`${R}

คลิก "ตรวจสอบระบบ" หากต้องการความช่วยเหลือ`,variant:"destructive",action:s.jsx(C,{size:"sm",onClick:()=>v(!0),children:"ตรวจสอบระบบ"})}),U}},B=async()=>{if(!t){d({title:"ไม่สามารถอัปโหลดได้",description:"กรุณาบันทึกเนื้อหาก่อนเพื่อให้ได้ Content ID",variant:"destructive"});return}f(!0);const T=u.filter(A=>!A.isUploaded&&!A.isUploading);if(T.length===0){d({title:"ไม่มีไฟล์ที่ต้องอัปโหลด",description:"ไฟล์ทั้งหมดถูกอัปโหลดแล้ว"}),f(!1);return}try{const A=await Promise.allSettled(T.map((R,W)=>I(R,W+1))),O=A.filter(R=>R.status==="fulfilled").length,U=A.filter(R=>R.status==="rejected").length;O>0&&U===0?d({title:"อัปโหลดสำเร็จ ✅",description:`อัปโหลดไฟล์ ${O} ไฟล์เสร็จสิ้น`}):O>0&&U>0?d({title:"อัปโหลดเสร็จบางส่วน",description:`สำเร็จ ${O} ไฟล์, ล้มเหลว ${U} ไฟล์`,variant:"destructive"}):d({title:"อัปโหลดล้มเหลว",description:"ไม่สามารถอัปโหลดไฟล์ใดๆ ได้",variant:"destructive"}),r==null||r(u)}catch{d({title:"เกิดข้อผิดพลาด",description:"ไม่สามารถอัปโหลดไฟล์ได้",variant:"destructive"})}finally{f(!1)}},H=T=>{if(T.url){const A=document.createElement("a");A.href=T.url,A.download=T.name,document.body.appendChild(A),A.click(),document.body.removeChild(A)}},$=u.filter(T=>!T.isUploaded),F=u.filter(T=>T.isUploaded);return s.jsxs("div",{className:`space-y-4 ${l}`,children:[s.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-6 transition-colors ${x?"border-blue-500 bg-blue-500/10":"border-slate-600 hover:border-slate-500"}`,onDragEnter:j,onDragLeave:j,onDragOver:j,onDrop:k,children:[s.jsx("input",{ref:c,type:"file",multiple:!0,accept:i.map(T=>`.${T}`).join(","),onChange:T=>N(T.target.files),className:"hidden"}),s.jsxs("div",{className:"text-center",children:[s.jsx(Pn,{className:"w-8 h-8 text-slate-400 mx-auto mb-3"}),s.jsxs("p",{className:"text-slate-300 mb-2",children:["ลากไฟล์มาวางที่นี่ หรือ"," ",s.jsx("button",{type:"button",onClick:()=>{var T;return(T=c.current)==null?void 0:T.click()},className:"text-blue-400 hover:text-blue-300 underline",children:"เลือกไฟล์"})]}),s.jsxs("p",{className:"text-xs text-slate-500",children:["ไฟล์ที่รองรับ: ",i.join(", ")," | ขนาดสูงสุด: ",w(a)," | จำนวนสูงสุด: ",n," ไฟล์"]})]})]}),u.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"text-sm font-medium text-slate-300",children:["ไฟล์ที่เลือก (",u.length,"/",n,")"]}),$.length>0&&s.jsx(C,{size:"sm",onClick:B,disabled:m,className:"bg-blue-500 hover:bg-blue-600",children:m?s.jsxs(s.Fragment,{children:[s.jsx(lr,{className:"w-4 h-4 mr-2 animate-spin"}),"กำลังอัปโหลด..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Pn,{className:"w-4 h-4 mr-2"}),"อัปโหลดทั้งหมด"]})})]}),s.jsx("div",{className:"grid gap-2",children:s.jsx(Ee,{children:u.map(T=>s.jsxs(P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center space-x-3 p-3 bg-slate-700/30 rounded-lg border border-slate-600",children:[s.jsx("div",{className:"flex-shrink-0",children:y(T.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-sm font-medium text-white truncate",children:T.name}),T.isUploaded&&s.jsx(Ue,{className:"w-4 h-4 text-green-400"})]}),s.jsx("p",{className:"text-xs text-slate-400",children:w(T.size)}),T.isUploading&&s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"w-full bg-slate-600 rounded-full h-1",children:s.jsx("div",{className:"bg-blue-500 h-1 rounded-full transition-all duration-300",style:{width:`${T.progress}%`}})}),s.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[T.progress,"%"]})]}),T.error&&s.jsx("div",{className:"mt-2 p-2 bg-red-500/20 border border-red-500/30 rounded text-xs",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(xe,{className:"w-3 h-3 text-red-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-red-400",children:T.error}),s.jsx(C,{size:"sm",variant:"ghost",className:"text-red-300 hover:text-red-200 h-auto p-0 mt-1 text-xs",onClick:()=>v(!0),children:"ตรวจสอบระบบ →"})]})]})})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[T.isUploaded&&s.jsxs(s.Fragment,{children:[s.jsx(C,{size:"sm",variant:"ghost",onClick:()=>H(T),title:"ดาวน์โหลด",children:s.jsx(Je,{className:"w-4 h-4"})}),T.type&&["jpg","jpeg","png","gif","pdf"].includes(T.type)&&s.jsx(C,{size:"sm",variant:"ghost",title:"ดูตัวอย่าง",children:s.jsx(dt,{className:"w-4 h-4"})})]}),s.jsx(C,{size:"sm",variant:"ghost",onClick:()=>S(T.id),className:"text-red-400 hover:text-red-300",title:"ลบ",children:s.jsx(et,{className:"w-4 h-4"})})]})]},T.id))})})]}),u.length>0&&s.jsxs("div",{className:"text-xs text-slate-500 text-center",children:[F.length>0&&s.jsxs("span",{className:"text-green-400",children:["อัปโหลดแล้ว ",F.length," ไฟล์"]}),$.length>0&&F.length>0&&s.jsx("span",{className:"mx-2",children:"•"}),$.length>0&&s.jsxs("span",{className:"text-yellow-400",children:["รออัปโหลด ",$.length," ไฟล์"]})]}),g&&s.jsx(Bb,{onClose:()=>v(!1)})]})},qb=({mode:t,content:e,onSave:r,onClose:n})=>{const{toast:a}=se(),[i,o]=p.useState({title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",content_type:(e==null?void 0:e.content_type)||"video",content_url:(e==null?void 0:e.content_url)||"",duration_minutes:(e==null?void 0:e.duration_minutes)||0,is_free:(e==null?void 0:e.is_free)||!1}),[l,d]=p.useState("basic"),[c,u]=p.useState(""),[h,m]=p.useState(!1),[f,x]=p.useState(!1),[b,g]=p.useState(!1);p.useEffect(()=>{var k,j;if(i.content_url&&i.content_type==="video"){let S=i.content_url;S.includes("youtube.com/watch")?S=`https://www.youtube.com/embed/${(k=S.split("v=")[1])==null?void 0:k.split("&")[0]}`:S.includes("youtu.be/")&&(S=`https://www.youtube.com/embed/${(j=S.split("youtu.be/")[1])==null?void 0:j.split("?")[0]}`),u(S)}},[i.content_url,i.content_type]);const v=k=>{k.preventDefault();const j=Rb(i);if(!j.isValid){a({title:"ข้อมูลไม่ถูกต้อง",description:j.errors.join(`
`),variant:"destructive"});return}r(i)},y=k=>{o(j=>({...j,...k}))},w=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[s.jsxs("label",{className:"block text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[s.jsx("div",{className:"bg-blue-500 p-2 rounded-lg mr-3",children:s.jsx(J,{className:"w-5 h-5 text-white"})}),"เลือกประเภทเนื้อหา"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{value:"video",label:"วิดีโอ",icon:la,color:"blue",bgColor:"from-blue-500 to-blue-600"},{value:"quiz",label:"แบบทดสอบ",icon:Ht,color:"yellow",bgColor:"from-yellow-500 to-orange-500"},{value:"assignment",label:"งานมอบหมาย",icon:J,color:"purple",bgColor:"from-purple-500 to-purple-600"},{value:"document",label:"เอกสาร",icon:ue,color:"green",bgColor:"from-green-500 to-green-600"}].map(k=>{const j=k.icon,S=i.content_type===k.value;return s.jsxs("button",{type:"button",onClick:()=>o(I=>({...I,content_type:k.value})),className:`p-4 rounded-xl border-2 transition-all duration-300 transform hover:scale-105 ${S?`border-${k.color}-500 bg-gradient-to-br ${k.bgColor} text-white shadow-lg`:"border-gray-200 bg-white hover:border-gray-300 hover:shadow-md text-gray-600"}`,children:[s.jsx(j,{className:`w-6 h-6 mx-auto mb-2 ${S?"text-white":`text-${k.color}-500`}`}),s.jsx("div",{className:`text-sm font-medium ${S?"text-white":"text-gray-700"}`,children:k.label})]},k.value)})})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[s.jsxs("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("div",{className:"bg-green-500 p-2 rounded-lg mr-3",children:s.jsx(ue,{className:"w-5 h-5 text-white"})}),"ชื่อเนื้อหา *"]}),s.jsx("input",{type:"text",value:i.title,onChange:k=>o(j=>({...j,title:k.target.value})),className:"w-full p-4 bg-white border-2 border-gray-200 rounded-xl text-gray-800 placeholder-gray-500 focus:border-green-500 focus:ring-4 focus:ring-green-200 focus:outline-none transition-all duration-200 text-lg shadow-sm",placeholder:"เช่น การเขียนโปรแกรม Python เบื้องต้น",required:!0})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 p-6 rounded-xl border border-purple-200",children:[s.jsxs("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:s.jsx(J,{className:"w-5 h-5 text-white"})}),"คำอธิบายเนื้อหา"]}),s.jsx("textarea",{value:i.description,onChange:k=>o(j=>({...j,description:k.target.value})),className:"w-full p-4 bg-white border-2 border-gray-200 rounded-xl text-gray-800 placeholder-gray-500 focus:border-purple-500 focus:ring-4 focus:ring-purple-200 focus:outline-none transition-all duration-200 resize-none shadow-sm",rows:4,placeholder:"อธิบายสิ่งที่ผู้เรียนจะได้เรียนรู้จากเนื้อหานี้..."})]}),s.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 p-6 rounded-xl border border-orange-200",children:[s.jsxs("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("div",{className:"bg-orange-500 p-2 rounded-lg mr-3",children:s.jsx(ni,{className:"w-5 h-5 text-white"})}),"เพิ่ม URL เนื้อหา (ถ้าต้องการ)"]}),b?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[i.content_type==="video"&&"รองรับ YouTube URL",i.content_type==="document"&&"รองรับลิงค์เอกสารออนไลน์"]}),s.jsx(C,{type:"button",variant:"ghost",onClick:()=>{g(!1),o(k=>({...k,content_url:""})),m(!1)},className:"text-red-500 hover:text-red-600 hover:bg-red-50 rounded-lg p-1",children:s.jsx(Et,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("input",{type:"url",value:i.content_url,onChange:k=>o(j=>({...j,content_url:k.target.value})),className:"flex-1 p-4 bg-white border-2 border-gray-200 rounded-xl text-gray-800 placeholder-gray-500 focus:border-orange-500 focus:ring-4 focus:ring-orange-200 focus:outline-none transition-all duration-200 text-lg shadow-sm",placeholder:i.content_type==="video"?"https://youtube.com/watch?v=... หรือ https://youtu.be/...":"https://example.com/document.pdf"}),i.content_type==="video"&&i.content_url&&s.jsx(C,{type:"button",variant:"outline",onClick:()=>m(!h),className:"px-4 py-2 border-orange-300 text-orange-600 hover:bg-orange-50 hover:border-orange-400 rounded-xl",children:h?s.jsx(nm,{className:"w-5 h-5"}):s.jsx(dt,{className:"w-5 h-5"})})]}),i.content_type==="video"&&h&&c&&s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:"aspect-video bg-gray-100 rounded-xl overflow-hidden shadow-lg border-2 border-gray-200",children:s.jsx("iframe",{src:c,className:"w-full h-full",allowFullScreen:!0,title:"Video Preview"})})})]}):s.jsxs(C,{type:"button",onClick:()=>g(!0),className:"bg-orange-500 hover:bg-orange-600 text-white rounded-xl px-6 py-3 transition-all duration-200 shadow-md hover:shadow-lg",children:[s.jsx(ni,{className:"w-5 h-5 mr-2"}),"เพิ่ม URL ลิงค์เนื้อหา"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-blue-50 p-6 rounded-xl border border-cyan-200",children:[s.jsxs("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("div",{className:"bg-cyan-500 p-2 rounded-lg mr-3",children:s.jsx(ve,{className:"w-5 h-5 text-white"})}),"ระยะเวลาเนื้อหา"]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"number",value:i.duration_minutes,onChange:k=>o(j=>({...j,duration_minutes:parseInt(k.target.value)||0})),className:"w-28 p-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800 text-center text-lg font-semibold focus:border-cyan-500 focus:ring-4 focus:ring-cyan-200 focus:outline-none transition-all duration-200 shadow-sm",min:"0",placeholder:"0"}),s.jsx("span",{className:"text-gray-600 font-medium",children:"นาที"})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 p-6 rounded-xl border border-emerald-200",children:[s.jsxs("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx("div",{className:"bg-emerald-500 p-2 rounded-lg mr-3",children:s.jsx(Ht,{className:"w-5 h-5 text-white"})}),"การเข้าถึงเนื้อหา"]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"is_free",checked:i.is_free,onChange:k=>o(j=>({...j,is_free:k.target.checked})),className:"w-5 h-5 text-emerald-500 border-2 border-gray-300 rounded-lg focus:ring-4 focus:ring-emerald-200 focus:ring-opacity-50"}),s.jsx("label",{htmlFor:"is_free",className:"text-gray-700 font-medium cursor-pointer",children:"เนื้อหาฟรี (เข้าถึงได้โดยไม่ต้องลงทะเบียน)"})]})]})]})]}),_=()=>t==="create"?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(J,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-400 mb-2",children:"บันทึกเนื้อหาก่อนเพื่อเพิ่มไฟล์แนบ"}),s.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"ไฟล์แนบจะใช้ได้หลังจากสร้างเนื้อหาเรียบร้อยแล้ว"}),s.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4 max-w-md mx-auto",children:[s.jsx("h4",{className:"text-blue-300 font-medium mb-2",children:"💡 วิธีการใช้งาน"}),s.jsxs("ol",{className:"text-blue-200 text-sm space-y-1 text-left",children:[s.jsx("li",{children:'1. กรอกข้อมูลในแท็บ "ข้อมูลพื้นฐาน"'}),s.jsx("li",{children:'2. คลิก "บันทึก" เพื่อสร้างเนื้อหา'}),s.jsx("li",{children:"3. กลับมาแก้ไขเนื้อหาอีกครั้ง"}),s.jsx("li",{children:'4. คลิกแท็บ "ไฟล์แนบ" เพื่ออัปโหลดไฟล์'})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"ไฟล์แนบ"}),s.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"เพิ่มไฟล์แนบเพื่อให้นักเรียนดาวน์โหลด เช่น เอกสารประกอบ แบบฝึกหัด หรือทรัพยากรการเรียนรู้"}),s.jsx(Ee,{children:f&&s.jsxs(P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6",children:[s.jsx(zb,{contentId:e==null?void 0:e.id,onFilesChange:k=>{console.log("Files changed:",k)},uploadMode:"admin",maxFiles:10,maxFileSize:50*1024*1024}),s.jsx("div",{className:"flex justify-end space-x-2 mt-4",children:s.jsx(C,{type:"button",variant:"outline",onClick:()=>x(!1),children:"ยกเลิก"})})]})}),s.jsx(Fa,{contentId:e==null?void 0:e.id,showUploadButton:!f,onUploadClick:()=>x(!0),isAdminView:!0,className:"admin-attachment-viewer"})]}),s.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:[s.jsx("h4",{className:"text-blue-300 font-medium mb-2",children:"💡 คำแนะนำสำหรับไฟล์แนบ"}),s.jsxs("ul",{className:"text-blue-200 text-sm space-y-1",children:[s.jsx("li",{children:"• ไฟล์ PDF, Word, PowerPoint จะแสดงตัวอย่างได้"}),s.jsx("li",{children:"• รูปภาพจะแสดงตัวอย่างแบบเต็มหน้าจอ"}),s.jsx("li",{children:"• ชื่อไฟล์ควรมีความหมายและเข้าใจง่าย"}),s.jsx("li",{children:"• ขนาดไฟล์สูงสุด 50MB ต่อไฟล์"}),s.jsx("li",{children:"• นักเรียนสามารถดาวน์โหลดไฟล์ได้ทั้งหมด"})]})]})]}),N=()=>{switch(i.content_type){case"quiz":return s.jsx(Mb,{contentId:e==null?void 0:e.id,onSave:k=>{console.log("Quiz data:",k)}});case"assignment":return s.jsx($b,{contentId:e==null?void 0:e.id,onSave:k=>{console.log("Assignment data:",k)}});default:return s.jsxs("div",{className:"text-center py-8",children:[s.jsx(J,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-400",children:"ไม่มีการตั้งค่าเพิ่มเติมสำหรับประเภทเนื้อหานี้"})]})}};return s.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:n,children:s.jsxs(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white shadow-2xl rounded-xl max-w-4xl w-full max-h-[90vh] flex flex-col",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-8 rounded-t-xl",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:s.jsx(ue,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-white",children:t==="create"?"เพิ่มเนื้อหาใหม่":"แก้ไขเนื้อหา"}),s.jsx("p",{className:"text-indigo-100 mt-1",children:"สร้างเนื้อหาการเรียนรู้ที่น่าสนใจสำหรับนักเรียน"})]})]}),s.jsx(C,{variant:"ghost",size:"icon",onClick:n,className:"text-white hover:bg-white/20 rounded-xl p-2",children:s.jsx(Et,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex space-x-2 mt-6 bg-white/10 p-1 rounded-xl backdrop-blur-sm",children:[s.jsx("button",{type:"button",onClick:()=>d("basic"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${l==="basic"?"bg-white text-indigo-600 shadow-lg":"text-white hover:bg-white/20"}`,children:"📝 ข้อมูลพื้นฐาน"}),s.jsx("button",{type:"button",onClick:()=>d("attachments"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${l==="attachments"?"bg-white text-indigo-600 shadow-lg":"text-white hover:bg-white/20"}`,children:"📎 ไฟล์แนบ"}),(i.content_type==="quiz"||i.content_type==="assignment")&&s.jsx("button",{type:"button",onClick:()=>d("advanced"),className:`flex-1 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${l==="advanced"?"bg-white text-indigo-600 shadow-lg":"text-white hover:bg-white/20"}`,children:"⚙️ การตั้งค่าเพิ่มเติม"})]})]}),s.jsxs("form",{onSubmit:v,className:"flex flex-col flex-1 min-h-0",children:[s.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:s.jsx(Ee,{mode:"wait",children:s.jsxs(P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"space-y-6",children:[l==="basic"&&w(),l==="attachments"&&_(),l==="advanced"&&N()]},l)})}),s.jsxs("div",{className:"bg-gray-50 p-8 border-t border-gray-200 flex-shrink-0",children:[l==="basic"&&t==="create"&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("p",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[s.jsx(Ht,{className:"w-5 h-5 mr-2 text-yellow-500"}),"เทมเพลตเนื้อหาสำเร็จรูป"]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:Ib().map((k,j)=>s.jsxs("button",{type:"button",onClick:()=>y(k),className:"px-4 py-2 text-sm bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white rounded-full transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105",children:["✨ ",k.name]},j))})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[s.jsx(C,{type:"button",variant:"outline",onClick:n,className:"px-8 py-3 text-gray-600 border-gray-300 hover:bg-gray-50 rounded-xl font-medium text-lg h-14 min-w-[120px]",children:"ยกเลิก"}),l==="basic"&&s.jsxs(C,{type:"submit",className:"px-12 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg h-14 min-w-[160px] shadow-lg hover:shadow-xl transition-all duration-200",children:[s.jsx(kr,{className:"w-5 h-5 mr-3"}),"บันทึกเนื้อหา"]}),l!=="basic"&&s.jsx(C,{type:"button",onClick:()=>d("basic"),className:"px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl font-semibold text-lg h-14 min-w-[140px] shadow-lg hover:shadow-xl transition-all duration-200",children:"กลับไปบันทึก"})]})]})]})]})})},Gb=()=>{const{courseId:t}=wr(),{user:e,isAdmin:r}=ge(),{toast:n}=se(),[a,i]=p.useState(null),[o,l]=p.useState([]),[d,c]=p.useState(!0),[u,h]=p.useState(!1),[m,f]=p.useState(null),[x,b]=p.useState("create");p.useState(null),p.useEffect(()=>{r&&g()},[t,r]);const g=async()=>{c(!0);try{const{data:j,error:S}=await Cv(t);if(S)throw S;i(j);const{data:I,error:B}=await Eb(t);if(B)throw B;l(I||[])}catch(j){console.error("Error loading course data:",j),n({title:"ไม่สามารถโหลดข้อมูลได้",description:j.message,variant:"destructive"})}finally{c(!1)}},v=()=>{f(null),b("create"),h(!0)},y=j=>{f(j),b("edit"),h(!0)},w=async j=>{if(confirm("คุณแน่ใจหรือไม่ที่จะลบเนื้อหานี้?"))try{const{error:S}=await Lb(j);if(S)throw S;n({title:"ลบเนื้อหาสำเร็จ",description:"เนื้อหาได้ถูกลบออกจากระบบแล้ว"}),g()}catch(S){console.error("Error deleting content:",S),n({title:"ไม่สามารถลบเนื้อหาได้",description:S.message,variant:"destructive"})}},_=async j=>{try{let S;if(x==="create"?S=await Pb({...j,course_id:t,order_index:o.length+1}):S=await Ab(m.id,j),S.error)throw S.error;n({title:x==="create"?"สร้างเนื้อหาสำเร็จ":"อัปเดตเนื้อหาสำเร็จ",description:"เนื้อหาได้รับการบันทึกแล้ว"}),h(!1),g()}catch(S){console.error("Error saving content:",S),n({title:"ไม่สามารถบันทึกได้",description:S.message,variant:"destructive"})}},N=j=>{switch(j){case"video":return s.jsx(la,{className:"w-5 h-5 text-blue-500"});case"quiz":return s.jsx(Ht,{className:"w-5 h-5 text-yellow-500"});case"assignment":return s.jsx(J,{className:"w-5 h-5 text-purple-500"});case"document":return s.jsx(J,{className:"w-5 h-5 text-green-500"});default:return s.jsx(J,{className:"w-5 h-5 text-gray-500"})}},k=j=>({video:"วิดีโอ",quiz:"แบบทดสอบ",assignment:"งานมอบหมาย",document:"เอกสาร",text:"ข้อความ"})[j]||j;return r?d?s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("p",{className:"text-orange-700",children:"กำลังโหลดข้อมูลเนื้อหา..."})]})}):s.jsxs("div",{className:"container mx-auto px-4 py-12",children:[s.jsx(fe,{children:s.jsx("title",{children:a!=null&&a.title?`จัดการเนื้อหาคอร์ส - ${a.title} | Admin`:"จัดการเนื้อหาคอร์ส | Admin"})}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsx(Y,{to:"/admin/courses",children:s.jsx(C,{variant:"ghost",size:"icon",children:s.jsx(As,{className:"w-5 h-5"})})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-orange-900",children:"จัดการเนื้อหาคอร์ส"}),s.jsx("p",{className:"text-orange-700",children:a==null?void 0:a.title}),a&&s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${a.is_active?"bg-green-500/30 text-green-700":"bg-red-500/30 text-red-700"}`,children:a.is_active?"เปิดใช้งาน":"ปิดใช้งาน"}),!a.is_active&&s.jsx("span",{className:"text-xs text-red-600 bg-red-50 px-2 py-1 rounded-full",children:"⚠️ คอร์สนี้ถูกปิดใช้งาน - สามารถแก้ไขเนื้อหาได้แต่ผู้ใช้ทั่วไปจะไม่เห็น"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-orange-700",children:["เนื้อหาทั้งหมด: ",o.length," รายการ"]}),s.jsxs(C,{onClick:v,className:"bg-blue-500 hover:bg-blue-600",children:[s.jsx(Ns,{className:"w-4 h-4 mr-2"}),"เพิ่มเนื้อหาใหม่"]})]})]}),s.jsx("div",{className:"space-y-4",children:o.length===0?s.jsxs("div",{className:"glass-effect p-12 rounded-xl text-center",children:[s.jsx(J,{className:"w-16 h-16 text-orange-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-orange-900 mb-2",children:"ยังไม่มีเนื้อหา"}),s.jsx("p",{className:"text-orange-700 mb-4",children:"เริ่มสร้างเนื้อหาแรกของคอร์สนี้"}),s.jsxs(C,{onClick:v,children:[s.jsx(Ns,{className:"w-4 h-4 mr-2"}),"เพิ่มเนื้อหาใหม่"]})]}):o.map((j,S)=>s.jsx(P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"glass-effect p-4 rounded-xl",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"cursor-move text-orange-600 hover:text-orange-500",children:s.jsx(lm,{className:"w-5 h-5"})}),s.jsx("div",{className:"text-sm font-medium text-orange-700 w-8",children:j.order_index}),s.jsx("div",{className:"flex-shrink-0",children:N(j.content_type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-orange-900 truncate",children:j.title}),s.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-orange-200 text-orange-800",children:k(j.content_type)})]}),j.description&&s.jsx("p",{className:"text-orange-700 text-sm mt-1 truncate",children:j.description}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-orange-600",children:[j.duration_minutes>0&&s.jsxs("span",{children:["ระยะเวลา: ",j.duration_minutes," นาที"]}),j.is_free&&s.jsx("span",{className:"text-green-400",children:"ฟรี"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Y,{to:`/courses/${t}/learn`,target:"_blank",children:s.jsx(C,{size:"sm",variant:"ghost",title:"ดูตัวอย่าง",children:s.jsx(dt,{className:"w-4 h-4"})})}),j.content_type==="assignment"&&j.assignment_id&&s.jsx(Y,{to:`/admin/assignments/${j.assignment_id}/grading`,children:s.jsx(C,{size:"sm",variant:"ghost",className:"text-orange-800 hover:text-orange-700",title:"ให้คะแนน",children:s.jsx(rm,{className:"w-4 h-4"})})}),s.jsx(C,{size:"sm",variant:"ghost",onClick:()=>y(j),title:"แก้ไข",children:s.jsx(Yt,{className:"w-4 h-4"})}),s.jsx(C,{size:"sm",variant:"ghost",onClick:()=>w(j.id),className:"text-red-800 hover:text-red-700",title:"ลบ",children:s.jsx(et,{className:"w-4 h-4"})})]})]})},j.id))}),s.jsx(Ee,{children:u&&s.jsx(qb,{mode:x,content:m,onSave:_,onClose:()=>h(!1)})})]}):s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-orange-900 mb-2",children:"ไม่มีสิทธิ์เข้าถึง"}),s.jsx("p",{className:"text-orange-700",children:"หน้านี้สำหรับผู้ดูแลระบบเท่านั้น"})]})})},Hb=({submission:t,assignment:e,onGrade:r})=>{var h,m;const n=t.score!==null,a=t.is_late,i=new Date(t.submitted_at),o=a&&e.due_date?Math.ceil((i-new Date(e.due_date))/(1e3*60*60*24)):0,l=async(f,x)=>{try{const{data:b,error:g}=await E.storage.from("course-files").download(x);if(g)throw g;const v=URL.createObjectURL(b),y=document.createElement("a");y.href=v,y.download=f,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(v)}catch(b){console.error("Download error:",b),alert("ไม่สามารถดาวน์โหลดไฟล์ได้")}},d=()=>n?"text-green-400":a?"text-red-400":"text-yellow-400",c=()=>n?s.jsx(Ue,{className:"w-4 h-4"}):a?s.jsx(Ct,{className:"w-4 h-4"}):s.jsx(ve,{className:"w-4 h-4"}),u=()=>n?`ให้คะแนนแล้ว (${t.score}/${e.max_score})`:a?`ส่งช้า ${o} วัน`:"รอให้คะแนน";return s.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect p-6 rounded-xl hover:bg-slate-700/30 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mr-3",children:s.jsx(_s,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:((h=t.user_profiles)==null?void 0:h.full_name)||"ไม่ระบุชื่อ"}),s.jsx("p",{className:"text-sm text-slate-400",children:((m=t.user_profiles)==null?void 0:m.email)||"ไม่ระบุอีเมล"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-slate-400",children:[s.jsx(Ls,{className:"w-4 h-4 mr-2"}),"ส่งเมื่อ: ",i.toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),s.jsxs("div",{className:`flex items-center text-sm ${d()}`,children:[c(),s.jsx("span",{className:"ml-2",children:u()})]})]}),t.notes&&s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(fm,{className:"w-4 h-4 text-slate-400 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-300 mb-1",children:"หมายเหตุจากนักเรียน:"}),s.jsx("p",{className:"text-sm text-slate-400",children:t.notes})]})]})})}),t.file_paths&&t.file_paths.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm font-medium text-slate-300 mb-2",children:"ไฟล์ที่ส่ง:"}),s.jsx("div",{className:"space-y-2",children:t.file_paths.map((f,x)=>{const b=f.split("/").pop();return s.jsxs("div",{className:"flex items-center justify-between bg-slate-700/50 p-2 rounded",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(J,{className:"w-4 h-4 text-blue-400 mr-2"}),s.jsx("span",{className:"text-sm text-slate-300",children:b})]}),s.jsx(C,{size:"sm",variant:"ghost",onClick:()=>l(b,f),className:"text-blue-400 hover:text-blue-300",children:s.jsx(Je,{className:"w-4 h-4"})})]},x)})})]}),n&&t.feedback&&s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"bg-green-500/10 border border-green-500/20 p-3 rounded-lg",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Te,{className:"w-4 h-4 text-green-400 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-300 mb-1",children:"ความคิดเห็นจากอาจารย์:"}),s.jsx("p",{className:"text-sm text-green-200",children:t.feedback})]})]})})})]}),s.jsxs("div",{className:"ml-6 flex flex-col space-y-2",children:[s.jsxs(C,{onClick:r,className:`${n?"bg-blue-500 hover:bg-blue-600":"bg-green-500 hover:bg-green-600"}`,children:[s.jsx(Te,{className:"w-4 h-4 mr-2"}),n?"แก้ไขคะแนน":"ให้คะแนน"]}),t.file_paths&&t.file_paths.length>0&&s.jsxs(C,{variant:"outline",size:"sm",onClick:()=>{t.file_paths.forEach(f=>{const x=f.split("/").pop();l(x,f)})},children:[s.jsx(Je,{className:"w-4 h-4 mr-2"}),"ดาวน์โหลดทั้งหมด"]})]})]}),n&&s.jsx("div",{className:"mt-4 pt-4 border-t border-slate-600",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Te,{className:"w-5 h-5 text-yellow-400 mr-2"}),s.jsx("span",{className:"text-sm text-slate-400",children:"คะแนน:"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-2xl font-bold text-white mr-1",children:t.score}),s.jsxs("span",{className:"text-lg text-slate-400",children:["/ ",e.max_score]}),s.jsxs("span",{className:"ml-2 text-sm text-slate-400",children:["(",Math.round(t.score/e.max_score*100),"%)"]})]})]})})]})},Wb=({submission:t,assignment:e,onSave:r,onClose:n})=>{var x,b;const{toast:a}=se(),[i,o]=p.useState({score:t.score||"",feedback:t.feedback||"",grading_rubric_scores:t.grading_rubric_scores||{}}),[l,d]=p.useState(!1),c=["งานดีมาก! เข้าใจเนื้อหาอย่างถ่องแท้","งานดี แต่ยังมีจุดที่ต้องปรับปรุง","เป็นการทำงานที่ดี คิดวิเคราะห์ได้ดี","งานมีคุณภาพ แต่ควรใส่ใจในรายละเอียดมากขึ้น","ควรศึกษาเพิ่มเติมและปรับปรุงในครั้งต่อไป","งานยังไม่ตรงตามที่กำหนด กรุณาทำใหม่"],u=async g=>{if(g.preventDefault(),!i.score||i.score===""){a({title:"กรุณาใส่คะแนน",variant:"destructive"});return}const v=parseFloat(i.score);if(isNaN(v)||v<0||v>e.max_score){a({title:"คะแนนไม่ถูกต้อง",description:`คะแนนต้องอยู่ระหว่าง 0-${e.max_score}`,variant:"destructive"});return}d(!0);try{await r({...i,score:v,graded_at:new Date().toISOString(),graded_by:"admin"})}catch(y){console.error("Grading error:",y)}finally{d(!1)}},h=async(g,v)=>{try{const{data:y,error:w}=await E.storage.from("course-files").download(v);if(w)throw w;const _=URL.createObjectURL(y),N=document.createElement("a");N.href=_,N.download=g,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(_)}catch(y){console.error("Download error:",y),a({title:"ไม่สามารถดาวน์โหลดไฟล์ได้",variant:"destructive"})}},m=g=>{const v=g/e.max_score*100;return v>=80?"text-green-400":v>=70?"text-yellow-400":v>=60?"text-orange-400":"text-red-400"},f=g=>{const v=g/e.max_score*100;return v>=80?"A":v>=70?"B":v>=60?"C":v>=50?"D":"F"};return s.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:n,children:s.jsxs(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-effect rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:g=>g.stopPropagation(),children:[s.jsx("div",{className:"p-6 border-b border-white/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"ให้คะแนนงานมอบหมาย"}),s.jsx("p",{className:"text-slate-400 mt-1",children:e.title})]}),s.jsx(C,{variant:"ghost",size:"icon",onClick:n,children:s.jsx(Et,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"flex flex-col lg:flex-row h-full max-h-[calc(90vh-88px)]",children:[s.jsxs("div",{className:"lg:w-1/2 p-6 border-r border-white/10 overflow-y-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mr-3",children:s.jsx(_s,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:((x=t.user_profiles)==null?void 0:x.full_name)||"ไม่ระบุชื่อ"}),s.jsx("p",{className:"text-sm text-slate-400",children:(b=t.user_profiles)==null?void 0:b.email})]})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[s.jsxs("div",{className:"flex items-center text-sm text-slate-400",children:[s.jsx(Ls,{className:"w-4 h-4 mr-2"}),"ส่งเมื่อ: ",new Date(t.submitted_at).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),t.is_late&&s.jsxs("div",{className:"flex items-center text-sm text-red-400",children:[s.jsx(Ct,{className:"w-4 h-4 mr-2"}),"ส่งช้า"]})]})]}),t.notes&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"หมายเหตุจากนักเรียน:"}),s.jsx("div",{className:"bg-slate-700/50 p-3 rounded-lg",children:s.jsx("p",{className:"text-sm text-slate-300",children:t.notes})})]}),t.file_paths&&t.file_paths.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"ไฟล์ที่ส่ง:"}),s.jsx("div",{className:"space-y-2",children:t.file_paths.map((g,v)=>{const y=g.split("/").pop();return s.jsxs("div",{className:"flex items-center justify-between bg-slate-700/50 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(J,{className:"w-4 h-4 text-blue-400 mr-2"}),s.jsx("span",{className:"text-sm text-slate-300",children:y})]}),s.jsx(C,{size:"sm",variant:"ghost",onClick:()=>h(y,g),className:"text-blue-400 hover:text-blue-300",children:s.jsx(Je,{className:"w-4 h-4"})})]},v)})})]}),s.jsxs("div",{className:"bg-slate-700/30 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"รายละเอียดงาน:"}),s.jsx("p",{className:"text-sm text-slate-400 mb-3",children:e.instructions}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-400",children:"คะแนนเต็ม:"}),s.jsxs("span",{className:"text-white font-semibold",children:[e.max_score," คะแนน"]})]})]})]}),s.jsx("div",{className:"lg:w-1/2 p-6 overflow-y-auto",children:s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"คะแนน *"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"number",min:"0",max:e.max_score,step:"0.5",value:i.score,onChange:g=>o(v=>({...v,score:g.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white text-center text-xl font-bold",placeholder:"0",required:!0})}),s.jsxs("div",{className:"text-xl text-slate-400",children:["/ ",e.max_score]}),i.score&&s.jsx("div",{className:`text-lg font-bold ${m(parseFloat(i.score))}`,children:f(parseFloat(i.score))})]}),i.score&&s.jsx("div",{className:"mt-2 text-center",children:s.jsxs("span",{className:`text-sm ${m(parseFloat(i.score))}`,children:[Math.round(parseFloat(i.score)/e.max_score*100),"%"]})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"คะแนนด่วน:"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:[25,50,75,100].map(g=>{const v=Math.round(g/100*e.max_score);return s.jsxs(C,{type:"button",variant:"outline",size:"sm",onClick:()=>o(y=>({...y,score:v.toString()})),className:"text-xs",children:[g,"%"]},g)})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"ความคิดเห็น/คำแนะนำ"}),s.jsx("textarea",{value:i.feedback,onChange:g=>o(v=>({...v,feedback:g.target.value})),className:"w-full p-3 bg-slate-700 border border-slate-600 rounded-lg text-white resize-none",rows:6,placeholder:"ให้คำแนะนำและความคิดเห็นเกี่ยวกับงานของนักเรียน..."})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"ความคิดเห็นด่วน:"}),s.jsx("div",{className:"space-y-2",children:c.map((g,v)=>s.jsx("button",{type:"button",onClick:()=>o(y=>({...y,feedback:y.feedback?`${y.feedback}

${g}`:g})),className:"w-full text-left p-2 text-xs bg-slate-700/50 hover:bg-slate-700 rounded text-slate-300 hover:text-white transition-colors",children:g},v))})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-white/10",children:[s.jsx(C,{type:"button",variant:"outline",onClick:n,children:"ยกเลิก"}),s.jsx(C,{type:"submit",className:"bg-green-500 hover:bg-green-600",disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"กำลังบันทึก..."]}):s.jsxs(s.Fragment,{children:[s.jsx(kr,{className:"w-4 h-4 mr-2"}),"บันทึกคะแนน"]})})]})]})})]})]})})},Kb=()=>{const{assignmentId:t}=wr(),{toast:e}=se();ge();const[r,n]=p.useState(null),[a,i]=p.useState([]),[o,l]=p.useState(!0),[d,c]=p.useState(""),[u,h]=p.useState("all"),[m,f]=p.useState(null),[x,b]=p.useState(!1);p.useEffect(()=>{g()},[t]);const g=async()=>{l(!0);try{const{data:N,error:k}=await db(t);if(k)throw k;n(N);const{data:j,error:S}=await ub(t);if(S)throw S;i(j||[])}catch(N){e({title:"ข้อผิดพลาดในการโหลดข้อมูล",description:N.message,variant:"destructive"})}finally{l(!1)}},v=N=>{f(N),b(!0)},y=async N=>{try{const{error:k}=await hb(m.id,N);if(k)throw k;e({title:"บันทึกคะแนนสำเร็จ",description:`ให้คะแนน ${N.score}/${r.max_score} คะแนน`}),g(),b(!1),f(null)}catch(k){e({title:"ไม่สามารถบันทึกคะแนนได้",description:k.message,variant:"destructive"})}},w=a.filter(N=>{var S,I;const k=((I=(S=N.user_profiles)==null?void 0:S.full_name)==null?void 0:I.toLowerCase().includes(d.toLowerCase()))||!1,j=u==="all"||u==="graded"&&N.score!==null||u==="ungraded"&&N.score===null||u==="late"&&N.is_late;return k&&j}),_={total:a.length,graded:a.filter(N=>N.score!==null).length,ungraded:a.filter(N=>N.score===null).length,average:a.length>0&&Math.round(a.filter(N=>N.score!==null).reduce((N,k)=>N+(k.score||0),0)/a.filter(N=>N.score!==null).length)||0};return o?s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-3 text-slate-400",children:"กำลังโหลดข้อมูล..."})]})}):s.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto px-4 py-12",children:[s.jsx(fe,{children:s.jsx("title",{children:"ให้คะแนนงานมอบหมาย - ผู้ดูแลระบบ Login Learning"})}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Y,{to:"/admin/courses",className:"text-slate-400 hover:text-white transition-colors mr-4",children:s.jsx(As,{className:"w-5 h-5"})}),s.jsx("h1",{className:"text-2xl font-bold text-white",children:"ให้คะแนนงานมอบหมาย"})]}),r&&s.jsx("div",{className:"glass-effect p-6 rounded-xl",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:r.title}),s.jsx("p",{className:"text-slate-400 mb-4",children:r.description}),s.jsxs("div",{className:"flex items-center space-x-6 text-sm text-slate-400",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Te,{className:"w-4 h-4 mr-1"}),"คะแนนเต็ม: ",r.max_score]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(ve,{className:"w-4 h-4 mr-1"}),"กำหนดส่ง: ",r.due_date?new Date(r.due_date).toLocaleDateString("th-TH"):"ไม่ระบุ"]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(le,{className:"w-4 h-4 mr-1"}),"ส่งงานแล้ว: ",_.total," คน"]})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"glass-effect p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-400 text-sm",children:"งานทั้งหมด"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:_.total})]}),s.jsx(J,{className:"w-8 h-8 text-blue-400"})]})}),s.jsx("div",{className:"glass-effect p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-400 text-sm",children:"ให้คะแนนแล้ว"}),s.jsx("p",{className:"text-2xl font-bold text-green-400",children:_.graded})]}),s.jsx(Ue,{className:"w-8 h-8 text-green-400"})]})}),s.jsx("div",{className:"glass-effect p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-400 text-sm",children:"รอให้คะแนน"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:_.ungraded})]}),s.jsx(xe,{className:"w-8 h-8 text-yellow-400"})]})}),s.jsx("div",{className:"glass-effect p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-400 text-sm",children:"คะแนนเฉลี่ย"}),s.jsx("p",{className:"text-2xl font-bold text-purple-400",children:_.average})]}),s.jsx(Te,{className:"w-8 h-8 text-purple-400"})]})})]}),s.jsx("div",{className:"glass-effect p-4 rounded-lg mb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx(ce,{type:"text",placeholder:"ค้นหาชื่อนักเรียน...",value:d,onChange:N=>c(N.target.value),className:"pl-10 bg-slate-700/50 border-slate-600 text-white"})]})}),s.jsx("div",{className:"w-full sm:w-48",children:s.jsxs("select",{value:u,onChange:N=>h(N.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:[s.jsx("option",{value:"all",children:"ทั้งหมด"}),s.jsx("option",{value:"ungraded",children:"รอให้คะแนน"}),s.jsx("option",{value:"graded",children:"ให้คะแนนแล้ว"}),s.jsx("option",{value:"late",children:"ส่งช้า"})]})})]})}),s.jsx("div",{className:"space-y-4",children:w.length===0?s.jsxs("div",{className:"glass-effect p-8 rounded-lg text-center",children:[s.jsx(J,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-400 text-lg",children:d||u!=="all"?"ไม่พบงานที่ตรงกับเงื่อนไขการค้นหา":"ยังไม่มีนักเรียนส่งงาน"})]}):w.map(N=>s.jsx(Hb,{submission:N,assignment:r,onGrade:()=>v(N)},N.id))}),s.jsx(Ee,{children:x&&m&&s.jsx(Wb,{submission:m,assignment:r,onSave:y,onClose:()=>{b(!1),f(null)}})})]})},Xb=()=>{const{toast:t}=se(),{user:e,signOut:r,isAdmin:n}=ge(),a=jr(),i=async()=>{try{await r(),t({title:"ออกจากระบบสำเร็จแล้ว"}),a("/")}catch(l){t({title:"เกิดข้อผิดพลาดในการออกจากระบบ",description:l.message,variant:"destructive"})}},o=[{to:"/",label:"หน้าแรก",icon:dm},{to:"/courses",label:"คอร์สเรียน",icon:_l},{to:"/onsite",label:"การเรียน Onsite",icon:Jt},{to:"/admissions",label:"ข้อมูลการรับเข้า",icon:om},{to:"/about",label:"เกี่ยวกับเรา",icon:Ol},{to:"/contact",label:"ติดต่อ",icon:kt}];return s.jsx(P.nav,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8},className:"glass-effect fixed top-0 left-0 right-0 z-50 px-4 sm:px-6 py-3 shadow-lg",children:s.jsxs("div",{className:"max-w-screen-xl mx-auto flex items-center justify-between",children:[s.jsxs(Y,{to:"/",className:"flex items-center space-x-2",children:[s.jsx("img",{src:"/Logo.png",alt:"Login Learning Logo",className:"w-10 h-10 object-contain"}),s.jsx("span",{className:"text-xl sm:text-2xl font-bold text-black hidden sm:block",children:"Login Learning"})]}),s.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[o.map(l=>s.jsxs(Y,{to:l.to,className:"text-black hover:text-blue-700 transition-colors flex items-center space-x-1",children:[s.jsx(l.icon,{className:"w-4 h-4"}),s.jsx("span",{children:l.label})]},l.to)),n&&s.jsxs(Y,{to:"/admin",className:"text-blue-600 hover:text-blue-800 transition-colors flex items-center space-x-1",children:[s.jsx(Nm,{className:"w-4 h-4"}),s.jsx("span",{children:"ผู้ดูแลระบบ"})]})]}),s.jsx("div",{className:"flex items-center space-x-2 sm:space-x-3",children:e?s.jsxs(s.Fragment,{children:[s.jsx(C,{variant:"ghost",className:"text-black hover:bg-blue-50 hover:text-blue-700 px-2 sm:px-3 py-1 sm:py-2",asChild:!0,children:s.jsxs(Y,{to:"/dashboard",className:"flex items-center space-x-1",children:[s.jsx(Pl,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s.jsx("span",{className:"hidden sm:inline",children:"แดชบอร์ด"})]})}),s.jsxs(C,{variant:"outline",className:"text-black border-slate-300 hover:bg-blue-50 hover:text-blue-700 hover:border-blue-300 px-2 sm:px-3 py-1 sm:py-2",onClick:i,children:[s.jsx(mm,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-0 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"ออกจากระบบ"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(C,{variant:"ghost",className:"text-black hover:bg-blue-50 hover:text-blue-700 px-2 sm:px-3 py-1 sm:py-2",asChild:!0,children:s.jsx(Y,{to:"/login",children:"เข้าสู่ระบบ"})}),s.jsx(C,{className:"bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 text-gray-800 px-2 sm:px-3 py-1 sm:py-2",asChild:!0,children:s.jsx(Y,{to:"/signup",children:"สมัครเรียน"})})]})})]})})},Jb=()=>{const t={name:"Login Learning",description:"แพลตฟอร์มเสริมทักษะและค้นหาตัวตนของน้องมัธยม ต้น-ปลาย เพื่อตัดสินใจเข้าเรียนต่อในระดับมัธยมปลาย/มหาวิทยาลัย",address:"917 จรัญสนิทวงศ์ 75 บางพลัด บางพลัด",contacts:[{name:"พี่ก้อง",phone:"090-969-9578"},{name:"พี่เก็ก",phone:"083-436-0294"}],lineGroup:"https://line.me/ti/g/TbTTLXEkRS",email:"info@loginlearning.com"},e=[{name:"สาขาลาดกระบัง",address:"ถนนฉลองกรุง ลาดกระบัง, กรุงเทพฯ 10520"},{name:"สาขาบางพลัด",address:"400 ซ.จรัญสนิทวงศ์ 75 แขวงบางพลัด, กรุงเทพฯ 10700"},{name:"สาขาศรีราชา",address:"165/31 อำเภอศรีราชา ชลบุรี 20110"},{name:"สาขาระยอง",address:"84/48 อำเภอเมืองระยอง ระยอง 21000"}];return s.jsx("footer",{className:"py-12 px-6 border-t border-slate-200 bg-slate-50 backdrop-blur-md",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12",children:[s.jsxs("div",{children:[s.jsxs(Y,{to:"/",className:"flex items-center space-x-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-700 to-blue-500 rounded-lg flex items-center justify-center",children:s.jsx(ue,{className:"w-6 h-6 text-blue-800"})}),s.jsx("span",{className:"text-2xl font-bold text-black",children:t.name})]}),s.jsx("p",{className:"text-black opacity-80 leading-relaxed mb-4",children:t.description}),s.jsxs("div",{className:"flex items-start space-x-2 text-black mb-2",children:[s.jsx(Jt,{className:"w-5 h-5 mt-1 text-blue-600 shrink-0"}),s.jsx("span",{children:t.address})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-black mb-2",children:[s.jsx(Ye,{className:"w-5 h-5 text-blue-600 shrink-0"}),s.jsx("a",{href:`mailto:${t.email}`,className:"hover:text-blue-700 transition-colors",children:t.email})]}),t.contacts.map(r=>s.jsxs("div",{className:"flex items-center space-x-2 text-black mb-1",children:[s.jsx(kt,{className:"w-5 h-5 text-blue-600 shrink-0"}),s.jsxs("span",{children:[r.name,": ",r.phone]})]},r.name)),s.jsxs("div",{className:"flex items-center space-x-2 text-black mt-2",children:[s.jsx(le,{className:"w-5 h-5 text-blue-600 shrink-0"}),s.jsx("a",{href:t.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-700 transition-colors",children:"Line Group"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-black font-semibold mb-4 text-lg",children:"สาขาที่เปิดบริการ"}),s.jsx("ul",{className:"space-y-3",children:e.map(r=>s.jsxs("li",{children:[s.jsx("p",{className:"font-medium text-black",children:r.name}),s.jsx("p",{className:"text-black text-sm",children:r.address})]},r.name))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-black font-semibold mb-4 text-lg",children:"ลิงก์ด่วน"}),s.jsxs("ul",{className:"space-y-2 text-black",children:[s.jsx("li",{children:s.jsx(Y,{to:"/courses",className:"hover:text-blue-700 transition-colors",children:"คอร์สเรียนทั้งหมด"})}),s.jsx("li",{children:s.jsx(Y,{to:"/admissions",className:"hover:text-blue-700 transition-colors",children:"ข้อมูลการรับเข้ามหาวิทยาลัย"})}),s.jsx("li",{children:s.jsx(Y,{to:"/about#services",className:"hover:text-blue-700 transition-colors",children:"บริการและกิจกรรม"})}),s.jsx("li",{children:s.jsx(Y,{to:"/about#projects",className:"hover:text-blue-700 transition-colors",children:"ตัวอย่างโครงงาน"})}),s.jsx("li",{children:s.jsx(Y,{to:"/contact",className:"hover:text-blue-700 transition-colors",children:"ติดต่อเรา"})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-black font-semibold mb-4 text-lg",children:"ติดตามเรา"}),s.jsxs("ul",{className:"space-y-2 text-black",children:[s.jsx("li",{children:s.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),alert("🚧 ฟีเจอร์นี้ยังไม่พร้อมใช้งาน")},className:"hover:text-blue-700 transition-colors",children:"Facebook"})}),s.jsx("li",{children:s.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),alert("🚧 ฟีเจอร์นี้ยังไม่พร้อมใช้งาน")},className:"hover:text-blue-700 transition-colors",children:"Instagram"})}),s.jsx("li",{children:s.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),alert("🚧 ฟีเจอร์นี้ยังไม่พร้อมใช้งาน")},className:"hover:text-blue-700 transition-colors",children:"YouTube"})}),s.jsx("li",{children:s.jsx("a",{href:t.lineGroup,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-700 transition-colors",children:"Line Official"})})]})]})]}),s.jsxs("div",{className:"border-t border-slate-300 mt-8 pt-8 text-center",children:[s.jsxs("p",{className:"text-black",children:["© ",new Date().getFullYear()," ",t.name,". สงวนลิขสิทธิ์ทั้งหมด."]}),s.jsx("p",{className:"text-xs text-black mt-1",children:"ข้อมูลในเว็บไซต์นี้เป็นข้อมูลเบื้องต้นและอาจมีการเปลี่ยนแปลง โปรดตรวจสอบข้อมูลล่าสุดจากประกาศอย่างเป็นทางการ"})]})]})})},pn=({children:t})=>{const{user:e,loading:r,isSupabaseConnected:n}=ge(),a=Po();return r?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("p",{className:"text-white text-xl",children:"กำลังตรวจสอบสิทธิ์..."})}):n?e?t:s.jsx(ms,{to:"/login",state:{from:a},replace:!0}):s.jsx(ms,{to:"/login",state:{from:a,message:"โปรดเชื่อมต่อ Supabase ก่อนเข้าถึงหน้านี้"},replace:!0})},ds=({children:t})=>{const{user:e,isAdmin:r,loading:n,isSupabaseConnected:a}=ge(),i=Po();return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("p",{className:"text-white text-xl",children:"กำลังตรวจสอบสิทธิ์ผู้ดูแลระบบ..."})}):a?e?r?t:s.jsx(ms,{to:"/dashboard",state:{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้"},replace:!0}):s.jsx(ms,{to:"/login",state:{from:i},replace:!0}):s.jsx(ms,{to:"/login",state:{from:i,message:"โปรดเชื่อมต่อ Supabase ก่อนเข้าถึงหน้านี้"},replace:!0})};function Yb(){return s.jsxs(Fo,{children:[s.jsxs(fe,{children:[s.jsx("title",{children:"Login Learning - แพลตฟอร์มเรียนรู้วิศวกรรมออนไลน์"}),s.jsx("meta",{name:"description",content:"เรียนรู้การทำโครงงานวิศวกรรมกับผู้เชี่ยวชาญ ค้นหาตัวตนสำหรับน้องมัธยม เพื่อตัดสินใจเข้าเรียนต่อ พร้อมคอร์สเรียนที่หลากหลายและการสนับสนุนตลอด 24 ชั่วโมง"})]}),s.jsx(Xd,{children:s.jsx(ox,{children:s.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-white to-slate-50 text-black",children:[s.jsx(Xb,{}),s.jsx("main",{className:"flex-grow pt-20",children:s.jsxs(Jd,{children:[s.jsx(pe,{path:"/",element:s.jsx(kv,{})}),s.jsx(pe,{path:"/about",element:s.jsx(Sv,{})}),s.jsx(pe,{path:"/courses",element:s.jsx(Iv,{})}),s.jsx(pe,{path:"/courses/:courseId",element:s.jsx(Gv,{})}),s.jsx(pe,{path:"/courses/:courseId/learn",element:s.jsx(pn,{children:s.jsx(pb,{})})}),s.jsx(pe,{path:"/onsite",element:s.jsx(xb,{})}),s.jsx(pe,{path:"/admissions",element:s.jsx(gb,{})}),s.jsx(pe,{path:"/contact",element:s.jsx(yb,{})}),s.jsx(pe,{path:"/login",element:s.jsx(vb,{})}),s.jsx(pe,{path:"/signup",element:s.jsx(bb,{})}),s.jsx(pe,{path:"/dashboard",element:s.jsx(pn,{children:s.jsx(wb,{})})}),s.jsx(pe,{path:"/profile",element:s.jsx(pn,{children:s.jsx(jb,{})})}),s.jsx(pe,{path:"/admin",element:s.jsx(ds,{children:s.jsx(_b,{})})}),s.jsx(pe,{path:"/admin/users",element:s.jsx(ds,{children:s.jsx(Sb,{})})}),s.jsx(pe,{path:"/admin/courses",element:s.jsx(ds,{children:s.jsx(Cb,{})})}),s.jsx(pe,{path:"/admin/courses/:courseId/content",element:s.jsx(ds,{children:s.jsx(Gb,{})})}),s.jsx(pe,{path:"/admin/assignments/:assignmentId/grading",element:s.jsx(ds,{children:s.jsx(Kb,{})})})]})}),s.jsx(Jb,{}),s.jsx(Um,{})]})})})]})}gn.createRoot(document.getElementById("root")).render(s.jsx(Z.StrictMode,{children:s.jsx(Yb,{})}));
